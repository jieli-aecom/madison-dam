var tW=Object.defineProperty;var UL=t=>{throw TypeError(t)};var eW=(t,e,n)=>e in t?tW(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var nW=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var yt=(t,e,n)=>eW(t,typeof e!="symbol"?e+"":e,n),IL=(t,e,n)=>e.has(t)||UL("Cannot "+n);var qL=(t,e,n)=>(IL(t,e,"read from private field"),n?n.call(t):e.get(t)),jL=(t,e,n)=>e.has(t)?UL("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),cS=(t,e,n,i)=>(IL(t,e,"write to private field"),i?i.call(t,n):e.set(t,n),n);var eTt=nW((PY,BY)=>{(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerPolicy&&(a.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?a.credentials="include":r.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(r){if(r.ep)return;r.ep=!0;const a=n(r);fetch(r.href,a)}})();function q8(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var fS={exports:{}},rm={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var HL;function iW(){if(HL)return rm;HL=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(i,r,a){var o=null;if(a!==void 0&&(o=""+a),r.key!==void 0&&(o=""+r.key),"key"in r){a={};for(var s in r)s!=="key"&&(a[s]=r[s])}else a=r;return r=a.ref,{$$typeof:t,type:i,key:o,ref:r!==void 0?r:null,props:a}}return rm.Fragment=e,rm.jsx=n,rm.jsxs=n,rm}var GL;function rW(){return GL||(GL=1,fS.exports=iW()),fS.exports}var Dn=rW(),hS={exports:{}},ue={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ZL;function aW(){if(ZL)return ue;ZL=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),o=Symbol.for("react.context"),s=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),p=Symbol.iterator;function m(B){return B===null||typeof B!="object"?null:(B=p&&B[p]||B["@@iterator"],typeof B=="function"?B:null)}var _={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b=Object.assign,x={};function S(B,J,lt){this.props=B,this.context=J,this.refs=x,this.updater=lt||_}S.prototype.isReactComponent={},S.prototype.setState=function(B,J){if(typeof B!="object"&&typeof B!="function"&&B!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,B,J,"setState")},S.prototype.forceUpdate=function(B){this.updater.enqueueForceUpdate(this,B,"forceUpdate")};function T(){}T.prototype=S.prototype;function M(B,J,lt){this.props=B,this.context=J,this.refs=x,this.updater=lt||_}var k=M.prototype=new T;k.constructor=M,b(k,S.prototype),k.isPureReactComponent=!0;var $=Array.isArray,D={H:null,A:null,T:null,S:null,V:null},F=Object.prototype.hasOwnProperty;function N(B,J,lt,ft,wt,bt){return lt=bt.ref,{$$typeof:t,type:B,key:J,ref:lt!==void 0?lt:null,props:bt}}function I(B,J){return N(B.type,J,void 0,void 0,void 0,B.props)}function q(B){return typeof B=="object"&&B!==null&&B.$$typeof===t}function Y(B){var J={"=":"=0",":":"=2"};return"$"+B.replace(/[=:]/g,function(lt){return J[lt]})}var H=/\/+/g;function et(B,J){return typeof B=="object"&&B!==null&&B.key!=null?Y(""+B.key):J.toString(36)}function nt(){}function W(B){switch(B.status){case"fulfilled":return B.value;case"rejected":throw B.reason;default:switch(typeof B.status=="string"?B.then(nt,nt):(B.status="pending",B.then(function(J){B.status==="pending"&&(B.status="fulfilled",B.value=J)},function(J){B.status==="pending"&&(B.status="rejected",B.reason=J)})),B.status){case"fulfilled":return B.value;case"rejected":throw B.reason}}throw B}function j(B,J,lt,ft,wt){var bt=typeof B;(bt==="undefined"||bt==="boolean")&&(B=null);var At=!1;if(B===null)At=!0;else switch(bt){case"bigint":case"string":case"number":At=!0;break;case"object":switch(B.$$typeof){case t:case e:At=!0;break;case d:return At=B._init,j(At(B._payload),J,lt,ft,wt)}}if(At)return wt=wt(B),At=ft===""?"."+et(B,0):ft,$(wt)?(lt="",At!=null&&(lt=At.replace(H,"$&/")+"/"),j(wt,J,lt,"",function($t){return $t})):wt!=null&&(q(wt)&&(wt=I(wt,lt+(wt.key==null||B&&B.key===wt.key?"":(""+wt.key).replace(H,"$&/")+"/")+At)),J.push(wt)),1;At=0;var $e=ft===""?".":ft+":";if($(B))for(var ae=0;ae<B.length;ae++)ft=B[ae],bt=$e+et(ft,ae),At+=j(ft,J,lt,bt,wt);else if(ae=m(B),typeof ae=="function")for(B=ae.call(B),ae=0;!(ft=B.next()).done;)ft=ft.value,bt=$e+et(ft,ae++),At+=j(ft,J,lt,bt,wt);else if(bt==="object"){if(typeof B.then=="function")return j(W(B),J,lt,ft,wt);throw J=String(B),Error("Objects are not valid as a React child (found: "+(J==="[object Object]"?"object with keys {"+Object.keys(B).join(", ")+"}":J)+"). If you meant to render a collection of children, use an array instead.")}return At}function U(B,J,lt){if(B==null)return B;var ft=[],wt=0;return j(B,ft,"","",function(bt){return J.call(lt,bt,wt++)}),ft}function X(B){if(B._status===-1){var J=B._result;J=J(),J.then(function(lt){(B._status===0||B._status===-1)&&(B._status=1,B._result=lt)},function(lt){(B._status===0||B._status===-1)&&(B._status=2,B._result=lt)}),B._status===-1&&(B._status=0,B._result=J)}if(B._status===1)return B._result.default;throw B._result}var V=typeof reportError=="function"?reportError:function(B){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var J=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof B=="object"&&B!==null&&typeof B.message=="string"?String(B.message):String(B),error:B});if(!window.dispatchEvent(J))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",B);return}console.error(B)};function ot(){}return ue.Children={map:U,forEach:function(B,J,lt){U(B,function(){J.apply(this,arguments)},lt)},count:function(B){var J=0;return U(B,function(){J++}),J},toArray:function(B){return U(B,function(J){return J})||[]},only:function(B){if(!q(B))throw Error("React.Children.only expected to receive a single React element child.");return B}},ue.Component=S,ue.Fragment=n,ue.Profiler=r,ue.PureComponent=M,ue.StrictMode=i,ue.Suspense=l,ue.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=D,ue.__COMPILER_RUNTIME={__proto__:null,c:function(B){return D.H.useMemoCache(B)}},ue.cache=function(B){return function(){return B.apply(null,arguments)}},ue.cloneElement=function(B,J,lt){if(B==null)throw Error("The argument must be a React element, but you passed "+B+".");var ft=b({},B.props),wt=B.key,bt=void 0;if(J!=null)for(At in J.ref!==void 0&&(bt=void 0),J.key!==void 0&&(wt=""+J.key),J)!F.call(J,At)||At==="key"||At==="__self"||At==="__source"||At==="ref"&&J.ref===void 0||(ft[At]=J[At]);var At=arguments.length-2;if(At===1)ft.children=lt;else if(1<At){for(var $e=Array(At),ae=0;ae<At;ae++)$e[ae]=arguments[ae+2];ft.children=$e}return N(B.type,wt,void 0,void 0,bt,ft)},ue.createContext=function(B){return B={$$typeof:o,_currentValue:B,_currentValue2:B,_threadCount:0,Provider:null,Consumer:null},B.Provider=B,B.Consumer={$$typeof:a,_context:B},B},ue.createElement=function(B,J,lt){var ft,wt={},bt=null;if(J!=null)for(ft in J.key!==void 0&&(bt=""+J.key),J)F.call(J,ft)&&ft!=="key"&&ft!=="__self"&&ft!=="__source"&&(wt[ft]=J[ft]);var At=arguments.length-2;if(At===1)wt.children=lt;else if(1<At){for(var $e=Array(At),ae=0;ae<At;ae++)$e[ae]=arguments[ae+2];wt.children=$e}if(B&&B.defaultProps)for(ft in At=B.defaultProps,At)wt[ft]===void 0&&(wt[ft]=At[ft]);return N(B,bt,void 0,void 0,null,wt)},ue.createRef=function(){return{current:null}},ue.forwardRef=function(B){return{$$typeof:s,render:B}},ue.isValidElement=q,ue.lazy=function(B){return{$$typeof:d,_payload:{_status:-1,_result:B},_init:X}},ue.memo=function(B,J){return{$$typeof:f,type:B,compare:J===void 0?null:J}},ue.startTransition=function(B){var J=D.T,lt={};D.T=lt;try{var ft=B(),wt=D.S;wt!==null&&wt(lt,ft),typeof ft=="object"&&ft!==null&&typeof ft.then=="function"&&ft.then(ot,V)}catch(bt){V(bt)}finally{D.T=J}},ue.unstable_useCacheRefresh=function(){return D.H.useCacheRefresh()},ue.use=function(B){return D.H.use(B)},ue.useActionState=function(B,J,lt){return D.H.useActionState(B,J,lt)},ue.useCallback=function(B,J){return D.H.useCallback(B,J)},ue.useContext=function(B){return D.H.useContext(B)},ue.useDebugValue=function(){},ue.useDeferredValue=function(B,J){return D.H.useDeferredValue(B,J)},ue.useEffect=function(B,J,lt){var ft=D.H;if(typeof lt=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return ft.useEffect(B,J)},ue.useId=function(){return D.H.useId()},ue.useImperativeHandle=function(B,J,lt){return D.H.useImperativeHandle(B,J,lt)},ue.useInsertionEffect=function(B,J){return D.H.useInsertionEffect(B,J)},ue.useLayoutEffect=function(B,J){return D.H.useLayoutEffect(B,J)},ue.useMemo=function(B,J){return D.H.useMemo(B,J)},ue.useOptimistic=function(B,J){return D.H.useOptimistic(B,J)},ue.useReducer=function(B,J,lt){return D.H.useReducer(B,J,lt)},ue.useRef=function(B){return D.H.useRef(B)},ue.useState=function(B){return D.H.useState(B)},ue.useSyncExternalStore=function(B,J,lt){return D.H.useSyncExternalStore(B,J,lt)},ue.useTransition=function(){return D.H.useTransition()},ue.version="19.1.0",ue}var YL;function SM(){return YL||(YL=1,hS.exports=aW()),hS.exports}var Te=SM();const sT=q8(Te);var dS={exports:{}},am={},pS={exports:{}},gS={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var XL;function oW(){return XL||(XL=1,function(t){function e(U,X){var V=U.length;U.push(X);t:for(;0<V;){var ot=V-1>>>1,B=U[ot];if(0<r(B,X))U[ot]=X,U[V]=B,V=ot;else break t}}function n(U){return U.length===0?null:U[0]}function i(U){if(U.length===0)return null;var X=U[0],V=U.pop();if(V!==X){U[0]=V;t:for(var ot=0,B=U.length,J=B>>>1;ot<J;){var lt=2*(ot+1)-1,ft=U[lt],wt=lt+1,bt=U[wt];if(0>r(ft,V))wt<B&&0>r(bt,ft)?(U[ot]=bt,U[wt]=V,ot=wt):(U[ot]=ft,U[lt]=V,ot=lt);else if(wt<B&&0>r(bt,V))U[ot]=bt,U[wt]=V,ot=wt;else break t}}return X}function r(U,X){var V=U.sortIndex-X.sortIndex;return V!==0?V:U.id-X.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var o=Date,s=o.now();t.unstable_now=function(){return o.now()-s}}var l=[],f=[],d=1,p=null,m=3,_=!1,b=!1,x=!1,S=!1,T=typeof setTimeout=="function"?setTimeout:null,M=typeof clearTimeout=="function"?clearTimeout:null,k=typeof setImmediate<"u"?setImmediate:null;function $(U){for(var X=n(f);X!==null;){if(X.callback===null)i(f);else if(X.startTime<=U)i(f),X.sortIndex=X.expirationTime,e(l,X);else break;X=n(f)}}function D(U){if(x=!1,$(U),!b)if(n(l)!==null)b=!0,F||(F=!0,et());else{var X=n(f);X!==null&&j(D,X.startTime-U)}}var F=!1,N=-1,I=5,q=-1;function Y(){return S?!0:!(t.unstable_now()-q<I)}function H(){if(S=!1,F){var U=t.unstable_now();q=U;var X=!0;try{t:{b=!1,x&&(x=!1,M(N),N=-1),_=!0;var V=m;try{e:{for($(U),p=n(l);p!==null&&!(p.expirationTime>U&&Y());){var ot=p.callback;if(typeof ot=="function"){p.callback=null,m=p.priorityLevel;var B=ot(p.expirationTime<=U);if(U=t.unstable_now(),typeof B=="function"){p.callback=B,$(U),X=!0;break e}p===n(l)&&i(l),$(U)}else i(l);p=n(l)}if(p!==null)X=!0;else{var J=n(f);J!==null&&j(D,J.startTime-U),X=!1}}break t}finally{p=null,m=V,_=!1}X=void 0}}finally{X?et():F=!1}}}var et;if(typeof k=="function")et=function(){k(H)};else if(typeof MessageChannel<"u"){var nt=new MessageChannel,W=nt.port2;nt.port1.onmessage=H,et=function(){W.postMessage(null)}}else et=function(){T(H,0)};function j(U,X){N=T(function(){U(t.unstable_now())},X)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(U){U.callback=null},t.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<U?Math.floor(1e3/U):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_next=function(U){switch(m){case 1:case 2:case 3:var X=3;break;default:X=m}var V=m;m=X;try{return U()}finally{m=V}},t.unstable_requestPaint=function(){S=!0},t.unstable_runWithPriority=function(U,X){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var V=m;m=U;try{return X()}finally{m=V}},t.unstable_scheduleCallback=function(U,X,V){var ot=t.unstable_now();switch(typeof V=="object"&&V!==null?(V=V.delay,V=typeof V=="number"&&0<V?ot+V:ot):V=ot,U){case 1:var B=-1;break;case 2:B=250;break;case 5:B=1073741823;break;case 4:B=1e4;break;default:B=5e3}return B=V+B,U={id:d++,callback:X,priorityLevel:U,startTime:V,expirationTime:B,sortIndex:-1},V>ot?(U.sortIndex=V,e(f,U),n(l)===null&&U===n(f)&&(x?(M(N),N=-1):x=!0,j(D,V-ot))):(U.sortIndex=B,e(l,U),b||_||(b=!0,F||(F=!0,et()))),U},t.unstable_shouldYield=Y,t.unstable_wrapCallback=function(U){var X=m;return function(){var V=m;m=X;try{return U.apply(this,arguments)}finally{m=V}}}}(gS)),gS}var WL;function sW(){return WL||(WL=1,pS.exports=oW()),pS.exports}var mS={exports:{}},Ti={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var VL;function uW(){if(VL)return Ti;VL=1;var t=SM();function e(l){var f="https://react.dev/errors/"+l;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var d=2;d<arguments.length;d++)f+="&args[]="+encodeURIComponent(arguments[d])}return"Minified React error #"+l+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var i={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},r=Symbol.for("react.portal");function a(l,f,d){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:p==null?null:""+p,children:l,containerInfo:f,implementation:d}}var o=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function s(l,f){if(l==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return Ti.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,Ti.createPortal=function(l,f){var d=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(e(299));return a(l,f,null,d)},Ti.flushSync=function(l){var f=o.T,d=i.p;try{if(o.T=null,i.p=2,l)return l()}finally{o.T=f,i.p=d,i.d.f()}},Ti.preconnect=function(l,f){typeof l=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,i.d.C(l,f))},Ti.prefetchDNS=function(l){typeof l=="string"&&i.d.D(l)},Ti.preinit=function(l,f){if(typeof l=="string"&&f&&typeof f.as=="string"){var d=f.as,p=s(d,f.crossOrigin),m=typeof f.integrity=="string"?f.integrity:void 0,_=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;d==="style"?i.d.S(l,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:p,integrity:m,fetchPriority:_}):d==="script"&&i.d.X(l,{crossOrigin:p,integrity:m,fetchPriority:_,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},Ti.preinitModule=function(l,f){if(typeof l=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var d=s(f.as,f.crossOrigin);i.d.M(l,{crossOrigin:d,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&i.d.M(l)},Ti.preload=function(l,f){if(typeof l=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var d=f.as,p=s(d,f.crossOrigin);i.d.L(l,d,{crossOrigin:p,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},Ti.preloadModule=function(l,f){if(typeof l=="string")if(f){var d=s(f.as,f.crossOrigin);i.d.m(l,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:d,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else i.d.m(l)},Ti.requestFormReset=function(l){i.d.r(l)},Ti.unstable_batchedUpdates=function(l,f){return l(f)},Ti.useFormState=function(l,f,d){return o.H.useFormState(l,f,d)},Ti.useFormStatus=function(){return o.H.useHostTransitionStatus()},Ti.version="19.1.0",Ti}var QL;function j8(){if(QL)return mS.exports;QL=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),mS.exports=uW(),mS.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var KL;function lW(){if(KL)return am;KL=1;var t=sW(),e=SM(),n=j8();function i(u){var c="https://react.dev/errors/"+u;if(1<arguments.length){c+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)c+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+u+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(u){return!(!u||u.nodeType!==1&&u.nodeType!==9&&u.nodeType!==11)}function a(u){var c=u,g=u;if(u.alternate)for(;c.return;)c=c.return;else{u=c;do c=u,(c.flags&4098)!==0&&(g=c.return),u=c.return;while(u)}return c.tag===3?g:null}function o(u){if(u.tag===13){var c=u.memoizedState;if(c===null&&(u=u.alternate,u!==null&&(c=u.memoizedState)),c!==null)return c.dehydrated}return null}function s(u){if(a(u)!==u)throw Error(i(188))}function l(u){var c=u.alternate;if(!c){if(c=a(u),c===null)throw Error(i(188));return c!==u?null:u}for(var g=u,v=c;;){var E=g.return;if(E===null)break;var A=E.alternate;if(A===null){if(v=E.return,v!==null){g=v;continue}break}if(E.child===A.child){for(A=E.child;A;){if(A===g)return s(E),u;if(A===v)return s(E),c;A=A.sibling}throw Error(i(188))}if(g.return!==v.return)g=E,v=A;else{for(var R=!1,P=E.child;P;){if(P===g){R=!0,g=E,v=A;break}if(P===v){R=!0,v=E,g=A;break}P=P.sibling}if(!R){for(P=A.child;P;){if(P===g){R=!0,g=A,v=E;break}if(P===v){R=!0,v=A,g=E;break}P=P.sibling}if(!R)throw Error(i(189))}}if(g.alternate!==v)throw Error(i(190))}if(g.tag!==3)throw Error(i(188));return g.stateNode.current===g?u:c}function f(u){var c=u.tag;if(c===5||c===26||c===27||c===6)return u;for(u=u.child;u!==null;){if(c=f(u),c!==null)return c;u=u.sibling}return null}var d=Object.assign,p=Symbol.for("react.element"),m=Symbol.for("react.transitional.element"),_=Symbol.for("react.portal"),b=Symbol.for("react.fragment"),x=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),T=Symbol.for("react.provider"),M=Symbol.for("react.consumer"),k=Symbol.for("react.context"),$=Symbol.for("react.forward_ref"),D=Symbol.for("react.suspense"),F=Symbol.for("react.suspense_list"),N=Symbol.for("react.memo"),I=Symbol.for("react.lazy"),q=Symbol.for("react.activity"),Y=Symbol.for("react.memo_cache_sentinel"),H=Symbol.iterator;function et(u){return u===null||typeof u!="object"?null:(u=H&&u[H]||u["@@iterator"],typeof u=="function"?u:null)}var nt=Symbol.for("react.client.reference");function W(u){if(u==null)return null;if(typeof u=="function")return u.$$typeof===nt?null:u.displayName||u.name||null;if(typeof u=="string")return u;switch(u){case b:return"Fragment";case S:return"Profiler";case x:return"StrictMode";case D:return"Suspense";case F:return"SuspenseList";case q:return"Activity"}if(typeof u=="object")switch(u.$$typeof){case _:return"Portal";case k:return(u.displayName||"Context")+".Provider";case M:return(u._context.displayName||"Context")+".Consumer";case $:var c=u.render;return u=u.displayName,u||(u=c.displayName||c.name||"",u=u!==""?"ForwardRef("+u+")":"ForwardRef"),u;case N:return c=u.displayName||null,c!==null?c:W(u.type)||"Memo";case I:c=u._payload,u=u._init;try{return W(u(c))}catch{}}return null}var j=Array.isArray,U=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,X=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,V={pending:!1,data:null,method:null,action:null},ot=[],B=-1;function J(u){return{current:u}}function lt(u){0>B||(u.current=ot[B],ot[B]=null,B--)}function ft(u,c){B++,ot[B]=u.current,u.current=c}var wt=J(null),bt=J(null),At=J(null),$e=J(null);function ae(u,c){switch(ft(At,c),ft(bt,u),ft(wt,null),c.nodeType){case 9:case 11:u=(u=c.documentElement)&&(u=u.namespaceURI)?pL(u):0;break;default:if(u=c.tagName,c=c.namespaceURI)c=pL(c),u=gL(c,u);else switch(u){case"svg":u=1;break;case"math":u=2;break;default:u=0}}lt(wt),ft(wt,u)}function $t(){lt(wt),lt(bt),lt(At)}function Qt(u){u.memoizedState!==null&&ft($e,u);var c=wt.current,g=gL(c,u.type);c!==g&&(ft(bt,u),ft(wt,g))}function Jt(u){bt.current===u&&(lt(wt),lt(bt)),$e.current===u&&(lt($e),Jg._currentValue=V)}var xt=Object.prototype.hasOwnProperty,Je=t.unstable_scheduleCallback,ve=t.unstable_cancelCallback,ln=t.unstable_shouldYield,wn=t.unstable_requestPaint,nn=t.unstable_now,ws=t.unstable_getCurrentPriorityLevel,Iy=t.unstable_ImmediatePriority,eg=t.unstable_UserBlockingPriority,zu=t.unstable_NormalPriority,qy=t.unstable_LowPriority,ng=t.unstable_IdlePriority,gw=t.log,mw=t.unstable_setDisableYieldValue,Es=null,xi=null;function La(u){if(typeof gw=="function"&&mw(u),xi&&typeof xi.setStrictMode=="function")try{xi.setStrictMode(Es,u)}catch{}}var Ii=Math.clz32?Math.clz32:yw,jy=Math.log,Hy=Math.LN2;function yw(u){return u>>>=0,u===0?32:31-(jy(u)/Hy|0)|0}var Oc=256,Fu=4194304;function wo(u){var c=u&42;if(c!==0)return c;switch(u&-u){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return u&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return u}}function Ah(u,c,g){var v=u.pendingLanes;if(v===0)return 0;var E=0,A=u.suspendedLanes,R=u.pingedLanes;u=u.warmLanes;var P=v&134217727;return P!==0?(v=P&~A,v!==0?E=wo(v):(R&=P,R!==0?E=wo(R):g||(g=P&~u,g!==0&&(E=wo(g))))):(P=v&~A,P!==0?E=wo(P):R!==0?E=wo(R):g||(g=v&~u,g!==0&&(E=wo(g)))),E===0?0:c!==0&&c!==E&&(c&A)===0&&(A=E&-E,g=c&-c,A>=g||A===32&&(g&4194048)!==0)?c:E}function za(u,c){return(u.pendingLanes&~(u.suspendedLanes&~u.pingedLanes)&c)===0}function vw(u,c){switch(u){case 1:case 2:case 4:case 8:case 64:return c+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Gy(){var u=Oc;return Oc<<=1,(Oc&4194048)===0&&(Oc=256),u}function ig(){var u=Fu;return Fu<<=1,(Fu&62914560)===0&&(Fu=4194304),u}function Th(u){for(var c=[],g=0;31>g;g++)c.push(u);return c}function Pu(u,c){u.pendingLanes|=c,c!==268435456&&(u.suspendedLanes=0,u.pingedLanes=0,u.warmLanes=0)}function _w(u,c,g,v,E,A){var R=u.pendingLanes;u.pendingLanes=g,u.suspendedLanes=0,u.pingedLanes=0,u.warmLanes=0,u.expiredLanes&=g,u.entangledLanes&=g,u.errorRecoveryDisabledLanes&=g,u.shellSuspendCounter=0;var P=u.entanglements,Z=u.expirationTimes,rt=u.hiddenUpdates;for(g=R&~g;0<g;){var pt=31-Ii(g),vt=1<<pt;P[pt]=0,Z[pt]=-1;var at=rt[pt];if(at!==null)for(rt[pt]=null,pt=0;pt<at.length;pt++){var st=at[pt];st!==null&&(st.lane&=-536870913)}g&=~vt}v!==0&&Zy(u,v,0),A!==0&&E===0&&u.tag!==0&&(u.suspendedLanes|=A&~(R&~c))}function Zy(u,c,g){u.pendingLanes|=c,u.suspendedLanes&=~c;var v=31-Ii(c);u.entangledLanes|=c,u.entanglements[v]=u.entanglements[v]|1073741824|g&4194090}function Yy(u,c){var g=u.entangledLanes|=c;for(u=u.entanglements;g;){var v=31-Ii(g),E=1<<v;E&c|u[v]&c&&(u[v]|=c),g&=~E}}function rg(u){switch(u){case 2:u=1;break;case 8:u=4;break;case 32:u=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:u=128;break;case 268435456:u=134217728;break;default:u=0}return u}function ag(u){return u&=-u,2<u?8<u?(u&134217727)!==0?32:268435456:8:2}function Xy(){var u=X.p;return u!==0?u:(u=window.event,u===void 0?32:NL(u.type))}function og(u,c){var g=X.p;try{return X.p=u,c()}finally{X.p=g}}var Eo=Math.random().toString(36).slice(2),Hn="__reactFiber$"+Eo,wi="__reactProps$"+Eo,Bu="__reactContainer$"+Eo,fr="__reactEvents$"+Eo,qt="__reactListeners$"+Eo,Wy="__reactHandles$"+Eo,sg="__reactResources$"+Eo,Uu="__reactMarker$"+Eo;function Ch(u){delete u[Hn],delete u[wi],delete u[fr],delete u[qt],delete u[Wy]}function So(u){var c=u[Hn];if(c)return c;for(var g=u.parentNode;g;){if(c=g[Bu]||g[Hn]){if(g=c.alternate,c.child!==null||g!==null&&g.child!==null)for(u=_L(u);u!==null;){if(g=u[Hn])return g;u=_L(u)}return c}u=g,g=u.parentNode}return null}function Ss(u){if(u=u[Hn]||u[Bu]){var c=u.tag;if(c===5||c===6||c===13||c===26||c===27||c===3)return u}return null}function ra(u){var c=u.tag;if(c===5||c===26||c===27||c===6)return u.stateNode;throw Error(i(33))}function As(u){var c=u[sg];return c||(c=u[sg]={hoistableStyles:new Map,hoistableScripts:new Map}),c}function kn(u){u[Uu]=!0}var Vy=new Set,Qy={};function Ts(u,c){Cs(u,c),Cs(u+"Capture",c)}function Cs(u,c){for(Qy[u]=c,u=0;u<c.length;u++)Vy.add(c[u])}var bw=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),$c={},Ky={};function xw(u){return xt.call(Ky,u)?!0:xt.call($c,u)?!1:bw.test(u)?Ky[u]=!0:($c[u]=!0,!1)}function Mh(u,c,g){if(xw(c))if(g===null)u.removeAttribute(c);else{switch(typeof g){case"undefined":case"function":case"symbol":u.removeAttribute(c);return;case"boolean":var v=c.toLowerCase().slice(0,5);if(v!=="data-"&&v!=="aria-"){u.removeAttribute(c);return}}u.setAttribute(c,""+g)}}function kh(u,c,g){if(g===null)u.removeAttribute(c);else{switch(typeof g){case"undefined":case"function":case"symbol":case"boolean":u.removeAttribute(c);return}u.setAttribute(c,""+g)}}function Fa(u,c,g,v){if(v===null)u.removeAttribute(g);else{switch(typeof v){case"undefined":case"function":case"symbol":case"boolean":u.removeAttribute(g);return}u.setAttributeNS(c,g,""+v)}}var Dc,Iu;function Ms(u){if(Dc===void 0)try{throw Error()}catch(g){var c=g.stack.trim().match(/\n( *(at )?)/);Dc=c&&c[1]||"",Iu=-1<g.stack.indexOf(`
    at`)?" (<anonymous>)":-1<g.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Dc+u+Iu}var Oh=!1;function ks(u,c){if(!u||Oh)return"";Oh=!0;var g=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var v={DetermineComponentFrameRoot:function(){try{if(c){var vt=function(){throw Error()};if(Object.defineProperty(vt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(vt,[])}catch(st){var at=st}Reflect.construct(u,[],vt)}else{try{vt.call()}catch(st){at=st}u.call(vt.prototype)}}else{try{throw Error()}catch(st){at=st}(vt=u())&&typeof vt.catch=="function"&&vt.catch(function(){})}}catch(st){if(st&&at&&typeof st.stack=="string")return[st.stack,at.stack]}return[null,null]}};v.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var E=Object.getOwnPropertyDescriptor(v.DetermineComponentFrameRoot,"name");E&&E.configurable&&Object.defineProperty(v.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var A=v.DetermineComponentFrameRoot(),R=A[0],P=A[1];if(R&&P){var Z=R.split(`
`),rt=P.split(`
`);for(E=v=0;v<Z.length&&!Z[v].includes("DetermineComponentFrameRoot");)v++;for(;E<rt.length&&!rt[E].includes("DetermineComponentFrameRoot");)E++;if(v===Z.length||E===rt.length)for(v=Z.length-1,E=rt.length-1;1<=v&&0<=E&&Z[v]!==rt[E];)E--;for(;1<=v&&0<=E;v--,E--)if(Z[v]!==rt[E]){if(v!==1||E!==1)do if(v--,E--,0>E||Z[v]!==rt[E]){var pt=`
`+Z[v].replace(" at new "," at ");return u.displayName&&pt.includes("<anonymous>")&&(pt=pt.replace("<anonymous>",u.displayName)),pt}while(1<=v&&0<=E);break}}}finally{Oh=!1,Error.prepareStackTrace=g}return(g=u?u.displayName||u.name:"")?Ms(g):""}function xe(u){switch(u.tag){case 26:case 27:case 5:return Ms(u.type);case 16:return Ms("Lazy");case 13:return Ms("Suspense");case 19:return Ms("SuspenseList");case 0:case 15:return ks(u.type,!1);case 11:return ks(u.type.render,!1);case 1:return ks(u.type,!0);case 31:return Ms("Activity");default:return""}}function Xe(u){try{var c="";do c+=xe(u),u=u.return;while(u);return c}catch(g){return`
Error generating stack: `+g.message+`
`+g.stack}}function oi(u){switch(typeof u){case"bigint":case"boolean":case"number":case"string":case"undefined":return u;case"object":return u;default:return""}}function Os(u){var c=u.type;return(u=u.nodeName)&&u.toLowerCase()==="input"&&(c==="checkbox"||c==="radio")}function qu(u){var c=Os(u)?"checked":"value",g=Object.getOwnPropertyDescriptor(u.constructor.prototype,c),v=""+u[c];if(!u.hasOwnProperty(c)&&typeof g<"u"&&typeof g.get=="function"&&typeof g.set=="function"){var E=g.get,A=g.set;return Object.defineProperty(u,c,{configurable:!0,get:function(){return E.call(this)},set:function(R){v=""+R,A.call(this,R)}}),Object.defineProperty(u,c,{enumerable:g.enumerable}),{getValue:function(){return v},setValue:function(R){v=""+R},stopTracking:function(){u._valueTracker=null,delete u[c]}}}}function ju(u){u._valueTracker||(u._valueTracker=qu(u))}function re(u){if(!u)return!1;var c=u._valueTracker;if(!c)return!0;var g=c.getValue(),v="";return u&&(v=Os(u)?u.checked?"true":"false":u.value),u=v,u!==g?(c.setValue(u),!0):!1}function We(u){if(u=u||(typeof document<"u"?document:void 0),typeof u>"u")return null;try{return u.activeElement||u.body}catch{return u.body}}var ug=/[\n"\\]/g;function si(u){return u.replace(ug,function(c){return"\\"+c.charCodeAt(0).toString(16)+" "})}function Ei(u,c,g,v,E,A,R,P){u.name="",R!=null&&typeof R!="function"&&typeof R!="symbol"&&typeof R!="boolean"?u.type=R:u.removeAttribute("type"),c!=null?R==="number"?(c===0&&u.value===""||u.value!=c)&&(u.value=""+oi(c)):u.value!==""+oi(c)&&(u.value=""+oi(c)):R!=="submit"&&R!=="reset"||u.removeAttribute("value"),c!=null?Hu(u,R,oi(c)):g!=null?Hu(u,R,oi(g)):v!=null&&u.removeAttribute("value"),E==null&&A!=null&&(u.defaultChecked=!!A),E!=null&&(u.checked=E&&typeof E!="function"&&typeof E!="symbol"),P!=null&&typeof P!="function"&&typeof P!="symbol"&&typeof P!="boolean"?u.name=""+oi(P):u.removeAttribute("name")}function Jy(u,c,g,v,E,A,R,P){if(A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"&&(u.type=A),c!=null||g!=null){if(!(A!=="submit"&&A!=="reset"||c!=null))return;g=g!=null?""+oi(g):"",c=c!=null?""+oi(c):g,P||c===u.value||(u.value=c),u.defaultValue=c}v=v??E,v=typeof v!="function"&&typeof v!="symbol"&&!!v,u.checked=P?u.checked:!!v,u.defaultChecked=!!v,R!=null&&typeof R!="function"&&typeof R!="symbol"&&typeof R!="boolean"&&(u.name=R)}function Hu(u,c,g){c==="number"&&We(u.ownerDocument)===u||u.defaultValue===""+g||(u.defaultValue=""+g)}function hr(u,c,g,v){if(u=u.options,c){c={};for(var E=0;E<g.length;E++)c["$"+g[E]]=!0;for(g=0;g<u.length;g++)E=c.hasOwnProperty("$"+u[g].value),u[g].selected!==E&&(u[g].selected=E),E&&v&&(u[g].defaultSelected=!0)}else{for(g=""+oi(g),c=null,E=0;E<u.length;E++){if(u[E].value===g){u[E].selected=!0,v&&(u[E].defaultSelected=!0);return}c!==null||u[E].disabled||(c=u[E])}c!==null&&(c.selected=!0)}}function cn(u,c,g){if(c!=null&&(c=""+oi(c),c!==u.value&&(u.value=c),g==null)){u.defaultValue!==c&&(u.defaultValue=c);return}u.defaultValue=g!=null?""+oi(g):""}function Ao(u,c,g,v){if(c==null){if(v!=null){if(g!=null)throw Error(i(92));if(j(v)){if(1<v.length)throw Error(i(93));v=v[0]}g=v}g==null&&(g=""),c=g}g=oi(c),u.defaultValue=g,v=u.textContent,v===g&&v!==""&&v!==null&&(u.value=v)}function aa(u,c){if(c){var g=u.firstChild;if(g&&g===u.lastChild&&g.nodeType===3){g.nodeValue=c;return}}u.textContent=c}var Rc=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function $h(u,c,g){var v=c.indexOf("--")===0;g==null||typeof g=="boolean"||g===""?v?u.setProperty(c,""):c==="float"?u.cssFloat="":u[c]="":v?u.setProperty(c,g):typeof g!="number"||g===0||Rc.has(c)?c==="float"?u.cssFloat=g:u[c]=(""+g).trim():u[c]=g+"px"}function Gu(u,c,g){if(c!=null&&typeof c!="object")throw Error(i(62));if(u=u.style,g!=null){for(var v in g)!g.hasOwnProperty(v)||c!=null&&c.hasOwnProperty(v)||(v.indexOf("--")===0?u.setProperty(v,""):v==="float"?u.cssFloat="":u[v]="");for(var E in c)v=c[E],c.hasOwnProperty(E)&&g[E]!==v&&$h(u,E,v)}else for(var A in c)c.hasOwnProperty(A)&&$h(u,A,c[A])}function Nc(u){if(u.indexOf("-")===-1)return!1;switch(u){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var lg=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Dh=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Zu(u){return Dh.test(""+u)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":u}var Lc=null;function Yu(u){return u=u.target||u.srcElement||window,u.correspondingUseElement&&(u=u.correspondingUseElement),u.nodeType===3?u.parentNode:u}var $s=null,To=null;function t1(u){var c=Ss(u);if(c&&(u=c.stateNode)){var g=u[wi]||null;t:switch(u=c.stateNode,c.type){case"input":if(Ei(u,g.value,g.defaultValue,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name),c=g.name,g.type==="radio"&&c!=null){for(g=u;g.parentNode;)g=g.parentNode;for(g=g.querySelectorAll('input[name="'+si(""+c)+'"][type="radio"]'),c=0;c<g.length;c++){var v=g[c];if(v!==u&&v.form===u.form){var E=v[wi]||null;if(!E)throw Error(i(90));Ei(v,E.value,E.defaultValue,E.defaultValue,E.checked,E.defaultChecked,E.type,E.name)}}for(c=0;c<g.length;c++)v=g[c],v.form===u.form&&re(v)}break t;case"textarea":cn(u,g.value,g.defaultValue);break t;case"select":c=g.value,c!=null&&hr(u,!!g.multiple,c,!1)}}}var ne=!1;function $r(u,c,g){if(ne)return u(c,g);ne=!0;try{var v=u(c);return v}finally{if(ne=!1,($s!==null||To!==null)&&(X1(),$s&&(c=$s,u=To,To=$s=null,t1(c),u)))for(c=0;c<u.length;c++)t1(u[c])}}function Se(u,c){var g=u.stateNode;if(g===null)return null;var v=g[wi]||null;if(v===null)return null;g=v[c];t:switch(c){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(v=!v.disabled)||(u=u.type,v=!(u==="button"||u==="input"||u==="select"||u==="textarea")),u=!v;break t;default:u=!1}if(u)return null;if(g&&typeof g!="function")throw Error(i(231,c,typeof g));return g}var oa=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),zc=!1;if(oa)try{var Ds={};Object.defineProperty(Ds,"passive",{get:function(){zc=!0}}),window.addEventListener("test",Ds,Ds),window.removeEventListener("test",Ds,Ds)}catch{zc=!1}var sa=null,Pa=null,Xu=null;function Wu(){if(Xu)return Xu;var u,c=Pa,g=c.length,v,E="value"in sa?sa.value:sa.textContent,A=E.length;for(u=0;u<g&&c[u]===E[u];u++);var R=g-u;for(v=1;v<=R&&c[g-v]===E[A-v];v++);return Xu=E.slice(u,1<v?1-v:void 0)}function mn(u){var c=u.keyCode;return"charCode"in u?(u=u.charCode,u===0&&c===13&&(u=13)):u=c,u===10&&(u=13),32<=u||u===13?u:0}function ua(){return!0}function cg(){return!1}function ui(u){function c(g,v,E,A,R){this._reactName=g,this._targetInst=E,this.type=v,this.nativeEvent=A,this.target=R,this.currentTarget=null;for(var P in u)u.hasOwnProperty(P)&&(g=u[P],this[P]=g?g(A):A[P]);return this.isDefaultPrevented=(A.defaultPrevented!=null?A.defaultPrevented:A.returnValue===!1)?ua:cg,this.isPropagationStopped=cg,this}return d(c.prototype,{preventDefault:function(){this.defaultPrevented=!0;var g=this.nativeEvent;g&&(g.preventDefault?g.preventDefault():typeof g.returnValue!="unknown"&&(g.returnValue=!1),this.isDefaultPrevented=ua)},stopPropagation:function(){var g=this.nativeEvent;g&&(g.stopPropagation?g.stopPropagation():typeof g.cancelBubble!="unknown"&&(g.cancelBubble=!0),this.isPropagationStopped=ua)},persist:function(){},isPersistent:ua}),c}var Rs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(u){return u.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Fc=ui(Rs),Ns=d({},Rs,{view:0,detail:0}),ww=ui(Ns),Rh,fe,Pc,Si=d({},Ns,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Nh,button:0,buttons:0,relatedTarget:function(u){return u.relatedTarget===void 0?u.fromElement===u.srcElement?u.toElement:u.fromElement:u.relatedTarget},movementX:function(u){return"movementX"in u?u.movementX:(u!==Pc&&(Pc&&u.type==="mousemove"?(Rh=u.screenX-Pc.screenX,fe=u.screenY-Pc.screenY):fe=Rh=0,Pc=u),Rh)},movementY:function(u){return"movementY"in u?u.movementY:fe}}),Vu=ui(Si),e1=d({},Si,{dataTransfer:0}),Ew=ui(e1),fg=d({},Ns,{relatedTarget:0}),hg=ui(fg),n1=d({},Rs,{animationName:0,elapsedTime:0,pseudoElement:0}),Sw=ui(n1),Aw=d({},Rs,{clipboardData:function(u){return"clipboardData"in u?u.clipboardData:window.clipboardData}}),dg=ui(Aw),Tw=d({},Rs,{data:0}),Dr=ui(Tw),Cw={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},i1={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Co={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function r1(u){var c=this.nativeEvent;return c.getModifierState?c.getModifierState(u):(u=Co[u])?!!c[u]:!1}function Nh(){return r1}var pg=d({},Ns,{key:function(u){if(u.key){var c=Cw[u.key]||u.key;if(c!=="Unidentified")return c}return u.type==="keypress"?(u=mn(u),u===13?"Enter":String.fromCharCode(u)):u.type==="keydown"||u.type==="keyup"?i1[u.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Nh,charCode:function(u){return u.type==="keypress"?mn(u):0},keyCode:function(u){return u.type==="keydown"||u.type==="keyup"?u.keyCode:0},which:function(u){return u.type==="keypress"?mn(u):u.type==="keydown"||u.type==="keyup"?u.keyCode:0}}),Mw=ui(pg),a1=d({},Si,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),gg=ui(a1),kw=d({},Ns,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Nh}),Ow=ui(kw),mg=d({},Rs,{propertyName:0,elapsedTime:0,pseudoElement:0}),$w=ui(mg),o1=d({},Si,{deltaX:function(u){return"deltaX"in u?u.deltaX:"wheelDeltaX"in u?-u.wheelDeltaX:0},deltaY:function(u){return"deltaY"in u?u.deltaY:"wheelDeltaY"in u?-u.wheelDeltaY:"wheelDelta"in u?-u.wheelDelta:0},deltaZ:0,deltaMode:0}),s1=ui(o1),Lh=d({},Rs,{newState:0,oldState:0}),Ls=ui(Lh),Dw=[9,13,27,32],zs=oa&&"CompositionEvent"in window,Gn=null;oa&&"documentMode"in document&&(Gn=document.documentMode);var u1=oa&&"TextEvent"in window&&!Gn,yg=oa&&(!zs||Gn&&8<Gn&&11>=Gn),l1=" ",zh=!1;function Fh(u,c){switch(u){case"keyup":return Dw.indexOf(c.keyCode)!==-1;case"keydown":return c.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function c1(u){return u=u.detail,typeof u=="object"&&"data"in u?u.data:null}var Qu=!1;function f1(u,c){switch(u){case"compositionend":return c1(c);case"keypress":return c.which!==32?null:(zh=!0,l1);case"textInput":return u=c.data,u===l1&&zh?null:u;default:return null}}function Rw(u,c){if(Qu)return u==="compositionend"||!zs&&Fh(u,c)?(u=Wu(),Xu=Pa=sa=null,Qu=!1,u):null;switch(u){case"paste":return null;case"keypress":if(!(c.ctrlKey||c.altKey||c.metaKey)||c.ctrlKey&&c.altKey){if(c.char&&1<c.char.length)return c.char;if(c.which)return String.fromCharCode(c.which)}return null;case"compositionend":return yg&&c.locale!=="ko"?null:c.data;default:return null}}var Rr={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Fs(u){var c=u&&u.nodeName&&u.nodeName.toLowerCase();return c==="input"?!!Rr[u.type]:c==="textarea"}function h1(u,c,g,v){$s?To?To.push(v):To=[v]:$s=v,c=tv(c,"onChange"),0<c.length&&(g=new Fc("onChange","change",null,g,v),u.push({event:g,listeners:c}))}var qi=null,Bc=null;function Ku(u){lL(u,0)}function Ph(u){var c=ra(u);if(re(c))return u}function Ju(u,c){if(u==="change")return c}var vg=!1;if(oa){var tl;if(oa){var _g="oninput"in document;if(!_g){var Ba=document.createElement("div");Ba.setAttribute("oninput","return;"),_g=typeof Ba.oninput=="function"}tl=_g}else tl=!1;vg=tl&&(!document.documentMode||9<document.documentMode)}function Uc(){qi&&(qi.detachEvent("onpropertychange",d1),Bc=qi=null)}function d1(u){if(u.propertyName==="value"&&Ph(Bc)){var c=[];h1(c,Bc,u,Yu(u)),$r(Ku,c)}}function bg(u,c,g){u==="focusin"?(Uc(),qi=c,Bc=g,qi.attachEvent("onpropertychange",d1)):u==="focusout"&&Uc()}function Nw(u){if(u==="selectionchange"||u==="keyup"||u==="keydown")return Ph(Bc)}function Ua(u,c){if(u==="click")return Ph(c)}function Lw(u,c){if(u==="input"||u==="change")return Ph(c)}function el(u,c){return u===c&&(u!==0||1/u===1/c)||u!==u&&c!==c}var ji=typeof Object.is=="function"?Object.is:el;function Hi(u,c){if(ji(u,c))return!0;if(typeof u!="object"||u===null||typeof c!="object"||c===null)return!1;var g=Object.keys(u),v=Object.keys(c);if(g.length!==v.length)return!1;for(v=0;v<g.length;v++){var E=g[v];if(!xt.call(c,E)||!ji(u[E],c[E]))return!1}return!0}function Ic(u){for(;u&&u.firstChild;)u=u.firstChild;return u}function xg(u,c){var g=Ic(u);u=0;for(var v;g;){if(g.nodeType===3){if(v=u+g.textContent.length,u<=c&&v>=c)return{node:g,offset:c-u};u=v}t:{for(;g;){if(g.nextSibling){g=g.nextSibling;break t}g=g.parentNode}g=void 0}g=Ic(g)}}function Bh(u,c){return u&&c?u===c?!0:u&&u.nodeType===3?!1:c&&c.nodeType===3?Bh(u,c.parentNode):"contains"in u?u.contains(c):u.compareDocumentPosition?!!(u.compareDocumentPosition(c)&16):!1:!1}function qc(u){u=u!=null&&u.ownerDocument!=null&&u.ownerDocument.defaultView!=null?u.ownerDocument.defaultView:window;for(var c=We(u.document);c instanceof u.HTMLIFrameElement;){try{var g=typeof c.contentWindow.location.href=="string"}catch{g=!1}if(g)u=c.contentWindow;else break;c=We(u.document)}return c}function jc(u){var c=u&&u.nodeName&&u.nodeName.toLowerCase();return c&&(c==="input"&&(u.type==="text"||u.type==="search"||u.type==="tel"||u.type==="url"||u.type==="password")||c==="textarea"||u.contentEditable==="true")}var Uh=oa&&"documentMode"in document&&11>=document.documentMode,Nr=null,nl=null,Ps=null,Ih=!1;function p1(u,c,g){var v=g.window===g?g.document:g.nodeType===9?g:g.ownerDocument;Ih||Nr==null||Nr!==We(v)||(v=Nr,"selectionStart"in v&&jc(v)?v={start:v.selectionStart,end:v.selectionEnd}:(v=(v.ownerDocument&&v.ownerDocument.defaultView||window).getSelection(),v={anchorNode:v.anchorNode,anchorOffset:v.anchorOffset,focusNode:v.focusNode,focusOffset:v.focusOffset}),Ps&&Hi(Ps,v)||(Ps=v,v=tv(nl,"onSelect"),0<v.length&&(c=new Fc("onSelect","select",null,c,g),u.push({event:c,listeners:v}),c.target=Nr)))}function la(u,c){var g={};return g[u.toLowerCase()]=c.toLowerCase(),g["Webkit"+u]="webkit"+c,g["Moz"+u]="moz"+c,g}var il={animationend:la("Animation","AnimationEnd"),animationiteration:la("Animation","AnimationIteration"),animationstart:la("Animation","AnimationStart"),transitionrun:la("Transition","TransitionRun"),transitionstart:la("Transition","TransitionStart"),transitioncancel:la("Transition","TransitionCancel"),transitionend:la("Transition","TransitionEnd")},qh={},g1={};oa&&(g1=document.createElement("div").style,"AnimationEvent"in window||(delete il.animationend.animation,delete il.animationiteration.animation,delete il.animationstart.animation),"TransitionEvent"in window||delete il.transitionend.transition);function Mo(u){if(qh[u])return qh[u];if(!il[u])return u;var c=il[u],g;for(g in c)if(c.hasOwnProperty(g)&&g in g1)return qh[u]=c[g];return u}var m1=Mo("animationend"),Lr=Mo("animationiteration"),Hc=Mo("animationstart"),zw=Mo("transitionrun"),jh=Mo("transitionstart"),Fw=Mo("transitioncancel"),wg=Mo("transitionend"),y1=new Map,Bs="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Bs.push("scrollEnd");function zr(u,c){y1.set(u,c),Ts(c,[u])}var Us=new WeakMap;function Gi(u,c){if(typeof u=="object"&&u!==null){var g=Us.get(u);return g!==void 0?g:(c={value:u,source:c,stack:Xe(c)},Us.set(u,c),c)}return{value:u,source:c,stack:Xe(c)}}var Zi=[],rl=0,Fr=0;function Gc(){for(var u=rl,c=Fr=rl=0;c<u;){var g=Zi[c];Zi[c++]=null;var v=Zi[c];Zi[c++]=null;var E=Zi[c];Zi[c++]=null;var A=Zi[c];if(Zi[c++]=null,v!==null&&E!==null){var R=v.pending;R===null?E.next=E:(E.next=R.next,R.next=E),v.pending=E}A!==0&&Yc(g,E,A)}}function Zc(u,c,g,v){Zi[rl++]=u,Zi[rl++]=c,Zi[rl++]=g,Zi[rl++]=v,Fr|=v,u.lanes|=v,u=u.alternate,u!==null&&(u.lanes|=v)}function Is(u,c,g,v){return Zc(u,c,g,v),ko(u)}function al(u,c){return Zc(u,null,null,c),ko(u)}function Yc(u,c,g){u.lanes|=g;var v=u.alternate;v!==null&&(v.lanes|=g);for(var E=!1,A=u.return;A!==null;)A.childLanes|=g,v=A.alternate,v!==null&&(v.childLanes|=g),A.tag===22&&(u=A.stateNode,u===null||u._visibility&1||(E=!0)),u=A,A=A.return;return u.tag===3?(A=u.stateNode,E&&c!==null&&(E=31-Ii(g),u=A.hiddenUpdates,v=u[E],v===null?u[E]=[c]:v.push(c),c.lane=g|536870912),A):null}function ko(u){if(50<Gg)throw Gg=0,NE=null,Error(i(185));for(var c=u.return;c!==null;)u=c,c=u.return;return u.tag===3?u.stateNode:null}var qs={};function v1(u,c,g,v){this.tag=u,this.key=g,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=c,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=v,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Yi(u,c,g,v){return new v1(u,c,g,v)}function Hh(u){return u=u.prototype,!(!u||!u.isReactComponent)}function ca(u,c){var g=u.alternate;return g===null?(g=Yi(u.tag,c,u.key,u.mode),g.elementType=u.elementType,g.type=u.type,g.stateNode=u.stateNode,g.alternate=u,u.alternate=g):(g.pendingProps=c,g.type=u.type,g.flags=0,g.subtreeFlags=0,g.deletions=null),g.flags=u.flags&65011712,g.childLanes=u.childLanes,g.lanes=u.lanes,g.child=u.child,g.memoizedProps=u.memoizedProps,g.memoizedState=u.memoizedState,g.updateQueue=u.updateQueue,c=u.dependencies,g.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext},g.sibling=u.sibling,g.index=u.index,g.ref=u.ref,g.refCleanup=u.refCleanup,g}function Eg(u,c){u.flags&=65011714;var g=u.alternate;return g===null?(u.childLanes=0,u.lanes=c,u.child=null,u.subtreeFlags=0,u.memoizedProps=null,u.memoizedState=null,u.updateQueue=null,u.dependencies=null,u.stateNode=null):(u.childLanes=g.childLanes,u.lanes=g.lanes,u.child=g.child,u.subtreeFlags=0,u.deletions=null,u.memoizedProps=g.memoizedProps,u.memoizedState=g.memoizedState,u.updateQueue=g.updateQueue,u.type=g.type,c=g.dependencies,u.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext}),u}function Xc(u,c,g,v,E,A){var R=0;if(v=u,typeof u=="function")Hh(u)&&(R=1);else if(typeof u=="string")R=IX(u,g,wt.current)?26:u==="html"||u==="head"||u==="body"?27:5;else t:switch(u){case q:return u=Yi(31,g,c,E),u.elementType=q,u.lanes=A,u;case b:return Oo(g.children,E,A,c);case x:R=8,E|=24;break;case S:return u=Yi(12,g,c,E|2),u.elementType=S,u.lanes=A,u;case D:return u=Yi(13,g,c,E),u.elementType=D,u.lanes=A,u;case F:return u=Yi(19,g,c,E),u.elementType=F,u.lanes=A,u;default:if(typeof u=="object"&&u!==null)switch(u.$$typeof){case T:case k:R=10;break t;case M:R=9;break t;case $:R=11;break t;case N:R=14;break t;case I:R=16,v=null;break t}R=29,g=Error(i(130,u===null?"null":typeof u,"")),v=null}return c=Yi(R,g,c,E),c.elementType=u,c.type=v,c.lanes=A,c}function Oo(u,c,g,v){return u=Yi(7,u,v,c),u.lanes=g,u}function Sg(u,c,g){return u=Yi(6,u,null,c),u.lanes=g,u}function Gh(u,c,g){return c=Yi(4,u.children!==null?u.children:[],u.key,c),c.lanes=g,c.stateNode={containerInfo:u.containerInfo,pendingChildren:null,implementation:u.implementation},c}var js=[],ol=0,h=null,y=0,w=[],C=0,O=null,z=1,G="";function tt(u,c){js[ol++]=y,js[ol++]=h,h=u,y=c}function ut(u,c,g){w[C++]=z,w[C++]=G,w[C++]=O,O=u;var v=z;u=G;var E=32-Ii(v)-1;v&=~(1<<E),g+=1;var A=32-Ii(c)+E;if(30<A){var R=E-E%5;A=(v&(1<<R)-1).toString(32),v>>=R,E-=R,z=1<<32-Ii(c)+E|g<<E|v,G=A+u}else z=1<<A|g<<E|v,G=u}function _t(u){u.return!==null&&(tt(u,1),ut(u,1,0))}function Lt(u){for(;u===h;)h=js[--ol],js[ol]=null,y=js[--ol],js[ol]=null;for(;u===O;)O=w[--C],w[C]=null,G=w[--C],w[C]=null,z=w[--C],w[C]=null}var Ft=null,Ut=null,te=!1,Ve=null,fn=!1,Zn=Error(i(519));function dr(u){var c=Error(i(418,""));throw ul(Gi(c,u)),Zn}function _1(u){var c=u.stateNode,g=u.type,v=u.memoizedProps;switch(c[Hn]=u,c[wi]=v,g){case"dialog":me("cancel",c),me("close",c);break;case"iframe":case"object":case"embed":me("load",c);break;case"video":case"audio":for(g=0;g<Yg.length;g++)me(Yg[g],c);break;case"source":me("error",c);break;case"img":case"image":case"link":me("error",c),me("load",c);break;case"details":me("toggle",c);break;case"input":me("invalid",c),Jy(c,v.value,v.defaultValue,v.checked,v.defaultChecked,v.type,v.name,!0),ju(c);break;case"select":me("invalid",c);break;case"textarea":me("invalid",c),Ao(c,v.value,v.defaultValue,v.children),ju(c)}g=v.children,typeof g!="string"&&typeof g!="number"&&typeof g!="bigint"||c.textContent===""+g||v.suppressHydrationWarning===!0||dL(c.textContent,g)?(v.popover!=null&&(me("beforetoggle",c),me("toggle",c)),v.onScroll!=null&&me("scroll",c),v.onScrollEnd!=null&&me("scrollend",c),v.onClick!=null&&(c.onclick=ev),c=!0):c=!1,c||dr(u)}function b1(u){for(Ft=u.return;Ft;)switch(Ft.tag){case 5:case 13:fn=!1;return;case 27:case 3:fn=!0;return;default:Ft=Ft.return}}function Wc(u){if(u!==Ft)return!1;if(!te)return b1(u),te=!0,!1;var c=u.tag,g;if((g=c!==3&&c!==27)&&((g=c===5)&&(g=u.type,g=!(g!=="form"&&g!=="button")||VE(u.type,u.memoizedProps)),g=!g),g&&Ut&&dr(u),b1(u),c===13){if(u=u.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(i(317));t:{for(u=u.nextSibling,c=0;u;){if(u.nodeType===8)if(g=u.data,g==="/$"){if(c===0){Ut=Ha(u.nextSibling);break t}c--}else g!=="$"&&g!=="$!"&&g!=="$?"||c++;u=u.nextSibling}Ut=null}}else c===27?(c=Ut,El(u.type)?(u=tS,tS=null,Ut=u):Ut=c):Ut=Ft?Ha(u.stateNode.nextSibling):null;return!0}function sl(){Ut=Ft=null,te=!1}function x1(){var u=Ve;return u!==null&&(mr===null?mr=u:mr.push.apply(mr,u),Ve=null),u}function ul(u){Ve===null?Ve=[u]:Ve.push(u)}var rn=J(null),fa=null,Ia=null;function $o(u,c,g){ft(rn,c._currentValue),c._currentValue=g}function qa(u){u._currentValue=rn.current,lt(rn)}function Vc(u,c,g){for(;u!==null;){var v=u.alternate;if((u.childLanes&c)!==c?(u.childLanes|=c,v!==null&&(v.childLanes|=c)):v!==null&&(v.childLanes&c)!==c&&(v.childLanes|=c),u===g)break;u=u.return}}function Zh(u,c,g,v){var E=u.child;for(E!==null&&(E.return=u);E!==null;){var A=E.dependencies;if(A!==null){var R=E.child;A=A.firstContext;t:for(;A!==null;){var P=A;A=E;for(var Z=0;Z<c.length;Z++)if(P.context===c[Z]){A.lanes|=g,P=A.alternate,P!==null&&(P.lanes|=g),Vc(A.return,g,u),v||(R=null);break t}A=P.next}}else if(E.tag===18){if(R=E.return,R===null)throw Error(i(341));R.lanes|=g,A=R.alternate,A!==null&&(A.lanes|=g),Vc(R,g,u),R=null}else R=E.child;if(R!==null)R.return=E;else for(R=E;R!==null;){if(R===u){R=null;break}if(E=R.sibling,E!==null){E.return=R.return,R=E;break}R=R.return}E=R}}function Qc(u,c,g,v){u=null;for(var E=c,A=!1;E!==null;){if(!A){if((E.flags&524288)!==0)A=!0;else if((E.flags&262144)!==0)break}if(E.tag===10){var R=E.alternate;if(R===null)throw Error(i(387));if(R=R.memoizedProps,R!==null){var P=E.type;ji(E.pendingProps.value,R.value)||(u!==null?u.push(P):u=[P])}}else if(E===$e.current){if(R=E.alternate,R===null)throw Error(i(387));R.memoizedState.memoizedState!==E.memoizedState.memoizedState&&(u!==null?u.push(Jg):u=[Jg])}E=E.return}u!==null&&Zh(c,u,g,v),c.flags|=262144}function w1(u){for(u=u.firstContext;u!==null;){if(!ji(u.context._currentValue,u.memoizedValue))return!0;u=u.next}return!1}function Kc(u){fa=u,Ia=null,u=u.dependencies,u!==null&&(u.firstContext=null)}function Ai(u){return JD(fa,u)}function E1(u,c){return fa===null&&Kc(u),JD(u,c)}function JD(u,c){var g=c._currentValue;if(c={context:c,memoizedValue:g,next:null},Ia===null){if(u===null)throw Error(i(308));Ia=c,u.dependencies={lanes:0,firstContext:c},u.flags|=524288}else Ia=Ia.next=c;return g}var UY=typeof AbortController<"u"?AbortController:function(){var u=[],c=this.signal={aborted:!1,addEventListener:function(g,v){u.push(v)}};this.abort=function(){c.aborted=!0,u.forEach(function(g){return g()})}},IY=t.unstable_scheduleCallback,qY=t.unstable_NormalPriority,Ln={$$typeof:k,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Pw(){return{controller:new UY,data:new Map,refCount:0}}function Ag(u){u.refCount--,u.refCount===0&&IY(qY,function(){u.controller.abort()})}var Tg=null,Bw=0,Yh=0,Xh=null;function jY(u,c){if(Tg===null){var g=Tg=[];Bw=0,Yh=IE(),Xh={status:"pending",value:void 0,then:function(v){g.push(v)}}}return Bw++,c.then(tR,tR),c}function tR(){if(--Bw===0&&Tg!==null){Xh!==null&&(Xh.status="fulfilled");var u=Tg;Tg=null,Yh=0,Xh=null;for(var c=0;c<u.length;c++)(0,u[c])()}}function HY(u,c){var g=[],v={status:"pending",value:null,reason:null,then:function(E){g.push(E)}};return u.then(function(){v.status="fulfilled",v.value=c;for(var E=0;E<g.length;E++)(0,g[E])(c)},function(E){for(v.status="rejected",v.reason=E,E=0;E<g.length;E++)(0,g[E])(void 0)}),v}var eR=U.S;U.S=function(u,c){typeof c=="object"&&c!==null&&typeof c.then=="function"&&jY(u,c),eR!==null&&eR(u,c)};var Jc=J(null);function Uw(){var u=Jc.current;return u!==null?u:Qe.pooledCache}function S1(u,c){c===null?ft(Jc,Jc.current):ft(Jc,c.pool)}function nR(){var u=Uw();return u===null?null:{parent:Ln._currentValue,pool:u}}var Cg=Error(i(460)),iR=Error(i(474)),A1=Error(i(542)),Iw={then:function(){}};function rR(u){return u=u.status,u==="fulfilled"||u==="rejected"}function T1(){}function aR(u,c,g){switch(g=u[g],g===void 0?u.push(c):g!==c&&(c.then(T1,T1),c=g),c.status){case"fulfilled":return c.value;case"rejected":throw u=c.reason,sR(u),u;default:if(typeof c.status=="string")c.then(T1,T1);else{if(u=Qe,u!==null&&100<u.shellSuspendCounter)throw Error(i(482));u=c,u.status="pending",u.then(function(v){if(c.status==="pending"){var E=c;E.status="fulfilled",E.value=v}},function(v){if(c.status==="pending"){var E=c;E.status="rejected",E.reason=v}})}switch(c.status){case"fulfilled":return c.value;case"rejected":throw u=c.reason,sR(u),u}throw Mg=c,Cg}}var Mg=null;function oR(){if(Mg===null)throw Error(i(459));var u=Mg;return Mg=null,u}function sR(u){if(u===Cg||u===A1)throw Error(i(483))}var ll=!1;function qw(u){u.updateQueue={baseState:u.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function jw(u,c){u=u.updateQueue,c.updateQueue===u&&(c.updateQueue={baseState:u.baseState,firstBaseUpdate:u.firstBaseUpdate,lastBaseUpdate:u.lastBaseUpdate,shared:u.shared,callbacks:null})}function cl(u){return{lane:u,tag:0,payload:null,callback:null,next:null}}function fl(u,c,g){var v=u.updateQueue;if(v===null)return null;if(v=v.shared,(Le&2)!==0){var E=v.pending;return E===null?c.next=c:(c.next=E.next,E.next=c),v.pending=c,c=ko(u),Yc(u,null,g),c}return Zc(u,v,c,g),ko(u)}function kg(u,c,g){if(c=c.updateQueue,c!==null&&(c=c.shared,(g&4194048)!==0)){var v=c.lanes;v&=u.pendingLanes,g|=v,c.lanes=g,Yy(u,g)}}function Hw(u,c){var g=u.updateQueue,v=u.alternate;if(v!==null&&(v=v.updateQueue,g===v)){var E=null,A=null;if(g=g.firstBaseUpdate,g!==null){do{var R={lane:g.lane,tag:g.tag,payload:g.payload,callback:null,next:null};A===null?E=A=R:A=A.next=R,g=g.next}while(g!==null);A===null?E=A=c:A=A.next=c}else E=A=c;g={baseState:v.baseState,firstBaseUpdate:E,lastBaseUpdate:A,shared:v.shared,callbacks:v.callbacks},u.updateQueue=g;return}u=g.lastBaseUpdate,u===null?g.firstBaseUpdate=c:u.next=c,g.lastBaseUpdate=c}var Gw=!1;function Og(){if(Gw){var u=Xh;if(u!==null)throw u}}function $g(u,c,g,v){Gw=!1;var E=u.updateQueue;ll=!1;var A=E.firstBaseUpdate,R=E.lastBaseUpdate,P=E.shared.pending;if(P!==null){E.shared.pending=null;var Z=P,rt=Z.next;Z.next=null,R===null?A=rt:R.next=rt,R=Z;var pt=u.alternate;pt!==null&&(pt=pt.updateQueue,P=pt.lastBaseUpdate,P!==R&&(P===null?pt.firstBaseUpdate=rt:P.next=rt,pt.lastBaseUpdate=Z))}if(A!==null){var vt=E.baseState;R=0,pt=rt=Z=null,P=A;do{var at=P.lane&-536870913,st=at!==P.lane;if(st?(we&at)===at:(v&at)===at){at!==0&&at===Yh&&(Gw=!0),pt!==null&&(pt=pt.next={lane:0,tag:P.tag,payload:P.payload,callback:null,next:null});t:{var Kt=u,Wt=P;at=c;var qe=g;switch(Wt.tag){case 1:if(Kt=Wt.payload,typeof Kt=="function"){vt=Kt.call(qe,vt,at);break t}vt=Kt;break t;case 3:Kt.flags=Kt.flags&-65537|128;case 0:if(Kt=Wt.payload,at=typeof Kt=="function"?Kt.call(qe,vt,at):Kt,at==null)break t;vt=d({},vt,at);break t;case 2:ll=!0}}at=P.callback,at!==null&&(u.flags|=64,st&&(u.flags|=8192),st=E.callbacks,st===null?E.callbacks=[at]:st.push(at))}else st={lane:at,tag:P.tag,payload:P.payload,callback:P.callback,next:null},pt===null?(rt=pt=st,Z=vt):pt=pt.next=st,R|=at;if(P=P.next,P===null){if(P=E.shared.pending,P===null)break;st=P,P=st.next,st.next=null,E.lastBaseUpdate=st,E.shared.pending=null}}while(!0);pt===null&&(Z=vt),E.baseState=Z,E.firstBaseUpdate=rt,E.lastBaseUpdate=pt,A===null&&(E.shared.lanes=0),_l|=R,u.lanes=R,u.memoizedState=vt}}function uR(u,c){if(typeof u!="function")throw Error(i(191,u));u.call(c)}function lR(u,c){var g=u.callbacks;if(g!==null)for(u.callbacks=null,u=0;u<g.length;u++)uR(g[u],c)}var Wh=J(null),C1=J(0);function cR(u,c){u=Vs,ft(C1,u),ft(Wh,c),Vs=u|c.baseLanes}function Zw(){ft(C1,Vs),ft(Wh,Wh.current)}function Yw(){Vs=C1.current,lt(Wh),lt(C1)}var hl=0,le=null,Ue=null,On=null,M1=!1,Vh=!1,tf=!1,k1=0,Dg=0,Qh=null,GY=0;function En(){throw Error(i(321))}function Xw(u,c){if(c===null)return!1;for(var g=0;g<c.length&&g<u.length;g++)if(!ji(u[g],c[g]))return!1;return!0}function Ww(u,c,g,v,E,A){return hl=A,le=c,c.memoizedState=null,c.updateQueue=null,c.lanes=0,U.H=u===null||u.memoizedState===null?YR:XR,tf=!1,A=g(v,E),tf=!1,Vh&&(A=hR(c,g,v,E)),fR(u),A}function fR(u){U.H=L1;var c=Ue!==null&&Ue.next!==null;if(hl=0,On=Ue=le=null,M1=!1,Dg=0,Qh=null,c)throw Error(i(300));u===null||Yn||(u=u.dependencies,u!==null&&w1(u)&&(Yn=!0))}function hR(u,c,g,v){le=u;var E=0;do{if(Vh&&(Qh=null),Dg=0,Vh=!1,25<=E)throw Error(i(301));if(E+=1,On=Ue=null,u.updateQueue!=null){var A=u.updateQueue;A.lastEffect=null,A.events=null,A.stores=null,A.memoCache!=null&&(A.memoCache.index=0)}U.H=KY,A=c(g,v)}while(Vh);return A}function ZY(){var u=U.H,c=u.useState()[0];return c=typeof c.then=="function"?Rg(c):c,u=u.useState()[0],(Ue!==null?Ue.memoizedState:null)!==u&&(le.flags|=1024),c}function Vw(){var u=k1!==0;return k1=0,u}function Qw(u,c,g){c.updateQueue=u.updateQueue,c.flags&=-2053,u.lanes&=~g}function Kw(u){if(M1){for(u=u.memoizedState;u!==null;){var c=u.queue;c!==null&&(c.pending=null),u=u.next}M1=!1}hl=0,On=Ue=le=null,Vh=!1,Dg=k1=0,Qh=null}function pr(){var u={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return On===null?le.memoizedState=On=u:On=On.next=u,On}function $n(){if(Ue===null){var u=le.alternate;u=u!==null?u.memoizedState:null}else u=Ue.next;var c=On===null?le.memoizedState:On.next;if(c!==null)On=c,Ue=u;else{if(u===null)throw le.alternate===null?Error(i(467)):Error(i(310));Ue=u,u={memoizedState:Ue.memoizedState,baseState:Ue.baseState,baseQueue:Ue.baseQueue,queue:Ue.queue,next:null},On===null?le.memoizedState=On=u:On=On.next=u}return On}function Jw(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Rg(u){var c=Dg;return Dg+=1,Qh===null&&(Qh=[]),u=aR(Qh,u,c),c=le,(On===null?c.memoizedState:On.next)===null&&(c=c.alternate,U.H=c===null||c.memoizedState===null?YR:XR),u}function O1(u){if(u!==null&&typeof u=="object"){if(typeof u.then=="function")return Rg(u);if(u.$$typeof===k)return Ai(u)}throw Error(i(438,String(u)))}function tE(u){var c=null,g=le.updateQueue;if(g!==null&&(c=g.memoCache),c==null){var v=le.alternate;v!==null&&(v=v.updateQueue,v!==null&&(v=v.memoCache,v!=null&&(c={data:v.data.map(function(E){return E.slice()}),index:0})))}if(c==null&&(c={data:[],index:0}),g===null&&(g=Jw(),le.updateQueue=g),g.memoCache=c,g=c.data[c.index],g===void 0)for(g=c.data[c.index]=Array(u),v=0;v<u;v++)g[v]=Y;return c.index++,g}function Hs(u,c){return typeof c=="function"?c(u):c}function $1(u){var c=$n();return eE(c,Ue,u)}function eE(u,c,g){var v=u.queue;if(v===null)throw Error(i(311));v.lastRenderedReducer=g;var E=u.baseQueue,A=v.pending;if(A!==null){if(E!==null){var R=E.next;E.next=A.next,A.next=R}c.baseQueue=E=A,v.pending=null}if(A=u.baseState,E===null)u.memoizedState=A;else{c=E.next;var P=R=null,Z=null,rt=c,pt=!1;do{var vt=rt.lane&-536870913;if(vt!==rt.lane?(we&vt)===vt:(hl&vt)===vt){var at=rt.revertLane;if(at===0)Z!==null&&(Z=Z.next={lane:0,revertLane:0,action:rt.action,hasEagerState:rt.hasEagerState,eagerState:rt.eagerState,next:null}),vt===Yh&&(pt=!0);else if((hl&at)===at){rt=rt.next,at===Yh&&(pt=!0);continue}else vt={lane:0,revertLane:rt.revertLane,action:rt.action,hasEagerState:rt.hasEagerState,eagerState:rt.eagerState,next:null},Z===null?(P=Z=vt,R=A):Z=Z.next=vt,le.lanes|=at,_l|=at;vt=rt.action,tf&&g(A,vt),A=rt.hasEagerState?rt.eagerState:g(A,vt)}else at={lane:vt,revertLane:rt.revertLane,action:rt.action,hasEagerState:rt.hasEagerState,eagerState:rt.eagerState,next:null},Z===null?(P=Z=at,R=A):Z=Z.next=at,le.lanes|=vt,_l|=vt;rt=rt.next}while(rt!==null&&rt!==c);if(Z===null?R=A:Z.next=P,!ji(A,u.memoizedState)&&(Yn=!0,pt&&(g=Xh,g!==null)))throw g;u.memoizedState=A,u.baseState=R,u.baseQueue=Z,v.lastRenderedState=A}return E===null&&(v.lanes=0),[u.memoizedState,v.dispatch]}function nE(u){var c=$n(),g=c.queue;if(g===null)throw Error(i(311));g.lastRenderedReducer=u;var v=g.dispatch,E=g.pending,A=c.memoizedState;if(E!==null){g.pending=null;var R=E=E.next;do A=u(A,R.action),R=R.next;while(R!==E);ji(A,c.memoizedState)||(Yn=!0),c.memoizedState=A,c.baseQueue===null&&(c.baseState=A),g.lastRenderedState=A}return[A,v]}function dR(u,c,g){var v=le,E=$n(),A=te;if(A){if(g===void 0)throw Error(i(407));g=g()}else g=c();var R=!ji((Ue||E).memoizedState,g);R&&(E.memoizedState=g,Yn=!0),E=E.queue;var P=mR.bind(null,v,E,u);if(Ng(2048,8,P,[u]),E.getSnapshot!==c||R||On!==null&&On.memoizedState.tag&1){if(v.flags|=2048,Kh(9,D1(),gR.bind(null,v,E,g,c),null),Qe===null)throw Error(i(349));A||(hl&124)!==0||pR(v,c,g)}return g}function pR(u,c,g){u.flags|=16384,u={getSnapshot:c,value:g},c=le.updateQueue,c===null?(c=Jw(),le.updateQueue=c,c.stores=[u]):(g=c.stores,g===null?c.stores=[u]:g.push(u))}function gR(u,c,g,v){c.value=g,c.getSnapshot=v,yR(c)&&vR(u)}function mR(u,c,g){return g(function(){yR(c)&&vR(u)})}function yR(u){var c=u.getSnapshot;u=u.value;try{var g=c();return!ji(u,g)}catch{return!0}}function vR(u){var c=al(u,2);c!==null&&qr(c,u,2)}function iE(u){var c=pr();if(typeof u=="function"){var g=u;if(u=g(),tf){La(!0);try{g()}finally{La(!1)}}}return c.memoizedState=c.baseState=u,c.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Hs,lastRenderedState:u},c}function _R(u,c,g,v){return u.baseState=g,eE(u,Ue,typeof v=="function"?v:Hs)}function YY(u,c,g,v,E){if(N1(u))throw Error(i(485));if(u=c.action,u!==null){var A={payload:E,action:u,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(R){A.listeners.push(R)}};U.T!==null?g(!0):A.isTransition=!1,v(A),g=c.pending,g===null?(A.next=c.pending=A,bR(c,A)):(A.next=g.next,c.pending=g.next=A)}}function bR(u,c){var g=c.action,v=c.payload,E=u.state;if(c.isTransition){var A=U.T,R={};U.T=R;try{var P=g(E,v),Z=U.S;Z!==null&&Z(R,P),xR(u,c,P)}catch(rt){rE(u,c,rt)}finally{U.T=A}}else try{A=g(E,v),xR(u,c,A)}catch(rt){rE(u,c,rt)}}function xR(u,c,g){g!==null&&typeof g=="object"&&typeof g.then=="function"?g.then(function(v){wR(u,c,v)},function(v){return rE(u,c,v)}):wR(u,c,g)}function wR(u,c,g){c.status="fulfilled",c.value=g,ER(c),u.state=g,c=u.pending,c!==null&&(g=c.next,g===c?u.pending=null:(g=g.next,c.next=g,bR(u,g)))}function rE(u,c,g){var v=u.pending;if(u.pending=null,v!==null){v=v.next;do c.status="rejected",c.reason=g,ER(c),c=c.next;while(c!==v)}u.action=null}function ER(u){u=u.listeners;for(var c=0;c<u.length;c++)(0,u[c])()}function SR(u,c){return c}function AR(u,c){if(te){var g=Qe.formState;if(g!==null){t:{var v=le;if(te){if(Ut){e:{for(var E=Ut,A=fn;E.nodeType!==8;){if(!A){E=null;break e}if(E=Ha(E.nextSibling),E===null){E=null;break e}}A=E.data,E=A==="F!"||A==="F"?E:null}if(E){Ut=Ha(E.nextSibling),v=E.data==="F!";break t}}dr(v)}v=!1}v&&(c=g[0])}}return g=pr(),g.memoizedState=g.baseState=c,v={pending:null,lanes:0,dispatch:null,lastRenderedReducer:SR,lastRenderedState:c},g.queue=v,g=HR.bind(null,le,v),v.dispatch=g,v=iE(!1),A=lE.bind(null,le,!1,v.queue),v=pr(),E={state:c,dispatch:null,action:u,pending:null},v.queue=E,g=YY.bind(null,le,E,A,g),E.dispatch=g,v.memoizedState=u,[c,g,!1]}function TR(u){var c=$n();return CR(c,Ue,u)}function CR(u,c,g){if(c=eE(u,c,SR)[0],u=$1(Hs)[0],typeof c=="object"&&c!==null&&typeof c.then=="function")try{var v=Rg(c)}catch(R){throw R===Cg?A1:R}else v=c;c=$n();var E=c.queue,A=E.dispatch;return g!==c.memoizedState&&(le.flags|=2048,Kh(9,D1(),XY.bind(null,E,g),null)),[v,A,u]}function XY(u,c){u.action=c}function MR(u){var c=$n(),g=Ue;if(g!==null)return CR(c,g,u);$n(),c=c.memoizedState,g=$n();var v=g.queue.dispatch;return g.memoizedState=u,[c,v,!1]}function Kh(u,c,g,v){return u={tag:u,create:g,deps:v,inst:c,next:null},c=le.updateQueue,c===null&&(c=Jw(),le.updateQueue=c),g=c.lastEffect,g===null?c.lastEffect=u.next=u:(v=g.next,g.next=u,u.next=v,c.lastEffect=u),u}function D1(){return{destroy:void 0,resource:void 0}}function kR(){return $n().memoizedState}function R1(u,c,g,v){var E=pr();v=v===void 0?null:v,le.flags|=u,E.memoizedState=Kh(1|c,D1(),g,v)}function Ng(u,c,g,v){var E=$n();v=v===void 0?null:v;var A=E.memoizedState.inst;Ue!==null&&v!==null&&Xw(v,Ue.memoizedState.deps)?E.memoizedState=Kh(c,A,g,v):(le.flags|=u,E.memoizedState=Kh(1|c,A,g,v))}function OR(u,c){R1(8390656,8,u,c)}function $R(u,c){Ng(2048,8,u,c)}function DR(u,c){return Ng(4,2,u,c)}function RR(u,c){return Ng(4,4,u,c)}function NR(u,c){if(typeof c=="function"){u=u();var g=c(u);return function(){typeof g=="function"?g():c(null)}}if(c!=null)return u=u(),c.current=u,function(){c.current=null}}function LR(u,c,g){g=g!=null?g.concat([u]):null,Ng(4,4,NR.bind(null,c,u),g)}function aE(){}function zR(u,c){var g=$n();c=c===void 0?null:c;var v=g.memoizedState;return c!==null&&Xw(c,v[1])?v[0]:(g.memoizedState=[u,c],u)}function FR(u,c){var g=$n();c=c===void 0?null:c;var v=g.memoizedState;if(c!==null&&Xw(c,v[1]))return v[0];if(v=u(),tf){La(!0);try{u()}finally{La(!1)}}return g.memoizedState=[v,c],v}function oE(u,c,g){return g===void 0||(hl&1073741824)!==0?u.memoizedState=c:(u.memoizedState=g,u=UN(),le.lanes|=u,_l|=u,g)}function PR(u,c,g,v){return ji(g,c)?g:Wh.current!==null?(u=oE(u,g,v),ji(u,c)||(Yn=!0),u):(hl&42)===0?(Yn=!0,u.memoizedState=g):(u=UN(),le.lanes|=u,_l|=u,c)}function BR(u,c,g,v,E){var A=X.p;X.p=A!==0&&8>A?A:8;var R=U.T,P={};U.T=P,lE(u,!1,c,g);try{var Z=E(),rt=U.S;if(rt!==null&&rt(P,Z),Z!==null&&typeof Z=="object"&&typeof Z.then=="function"){var pt=HY(Z,v);Lg(u,c,pt,Ir(u))}else Lg(u,c,v,Ir(u))}catch(vt){Lg(u,c,{then:function(){},status:"rejected",reason:vt},Ir())}finally{X.p=A,U.T=R}}function WY(){}function sE(u,c,g,v){if(u.tag!==5)throw Error(i(476));var E=UR(u).queue;BR(u,E,c,V,g===null?WY:function(){return IR(u),g(v)})}function UR(u){var c=u.memoizedState;if(c!==null)return c;c={memoizedState:V,baseState:V,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Hs,lastRenderedState:V},next:null};var g={};return c.next={memoizedState:g,baseState:g,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Hs,lastRenderedState:g},next:null},u.memoizedState=c,u=u.alternate,u!==null&&(u.memoizedState=c),c}function IR(u){var c=UR(u).next.queue;Lg(u,c,{},Ir())}function uE(){return Ai(Jg)}function qR(){return $n().memoizedState}function jR(){return $n().memoizedState}function VY(u){for(var c=u.return;c!==null;){switch(c.tag){case 24:case 3:var g=Ir();u=cl(g);var v=fl(c,u,g);v!==null&&(qr(v,c,g),kg(v,c,g)),c={cache:Pw()},u.payload=c;return}c=c.return}}function QY(u,c,g){var v=Ir();g={lane:v,revertLane:0,action:g,hasEagerState:!1,eagerState:null,next:null},N1(u)?GR(c,g):(g=Is(u,c,g,v),g!==null&&(qr(g,u,v),ZR(g,c,v)))}function HR(u,c,g){var v=Ir();Lg(u,c,g,v)}function Lg(u,c,g,v){var E={lane:v,revertLane:0,action:g,hasEagerState:!1,eagerState:null,next:null};if(N1(u))GR(c,E);else{var A=u.alternate;if(u.lanes===0&&(A===null||A.lanes===0)&&(A=c.lastRenderedReducer,A!==null))try{var R=c.lastRenderedState,P=A(R,g);if(E.hasEagerState=!0,E.eagerState=P,ji(P,R))return Zc(u,c,E,0),Qe===null&&Gc(),!1}catch{}finally{}if(g=Is(u,c,E,v),g!==null)return qr(g,u,v),ZR(g,c,v),!0}return!1}function lE(u,c,g,v){if(v={lane:2,revertLane:IE(),action:v,hasEagerState:!1,eagerState:null,next:null},N1(u)){if(c)throw Error(i(479))}else c=Is(u,g,v,2),c!==null&&qr(c,u,2)}function N1(u){var c=u.alternate;return u===le||c!==null&&c===le}function GR(u,c){Vh=M1=!0;var g=u.pending;g===null?c.next=c:(c.next=g.next,g.next=c),u.pending=c}function ZR(u,c,g){if((g&4194048)!==0){var v=c.lanes;v&=u.pendingLanes,g|=v,c.lanes=g,Yy(u,g)}}var L1={readContext:Ai,use:O1,useCallback:En,useContext:En,useEffect:En,useImperativeHandle:En,useLayoutEffect:En,useInsertionEffect:En,useMemo:En,useReducer:En,useRef:En,useState:En,useDebugValue:En,useDeferredValue:En,useTransition:En,useSyncExternalStore:En,useId:En,useHostTransitionStatus:En,useFormState:En,useActionState:En,useOptimistic:En,useMemoCache:En,useCacheRefresh:En},YR={readContext:Ai,use:O1,useCallback:function(u,c){return pr().memoizedState=[u,c===void 0?null:c],u},useContext:Ai,useEffect:OR,useImperativeHandle:function(u,c,g){g=g!=null?g.concat([u]):null,R1(4194308,4,NR.bind(null,c,u),g)},useLayoutEffect:function(u,c){return R1(4194308,4,u,c)},useInsertionEffect:function(u,c){R1(4,2,u,c)},useMemo:function(u,c){var g=pr();c=c===void 0?null:c;var v=u();if(tf){La(!0);try{u()}finally{La(!1)}}return g.memoizedState=[v,c],v},useReducer:function(u,c,g){var v=pr();if(g!==void 0){var E=g(c);if(tf){La(!0);try{g(c)}finally{La(!1)}}}else E=c;return v.memoizedState=v.baseState=E,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:u,lastRenderedState:E},v.queue=u,u=u.dispatch=QY.bind(null,le,u),[v.memoizedState,u]},useRef:function(u){var c=pr();return u={current:u},c.memoizedState=u},useState:function(u){u=iE(u);var c=u.queue,g=HR.bind(null,le,c);return c.dispatch=g,[u.memoizedState,g]},useDebugValue:aE,useDeferredValue:function(u,c){var g=pr();return oE(g,u,c)},useTransition:function(){var u=iE(!1);return u=BR.bind(null,le,u.queue,!0,!1),pr().memoizedState=u,[!1,u]},useSyncExternalStore:function(u,c,g){var v=le,E=pr();if(te){if(g===void 0)throw Error(i(407));g=g()}else{if(g=c(),Qe===null)throw Error(i(349));(we&124)!==0||pR(v,c,g)}E.memoizedState=g;var A={value:g,getSnapshot:c};return E.queue=A,OR(mR.bind(null,v,A,u),[u]),v.flags|=2048,Kh(9,D1(),gR.bind(null,v,A,g,c),null),g},useId:function(){var u=pr(),c=Qe.identifierPrefix;if(te){var g=G,v=z;g=(v&~(1<<32-Ii(v)-1)).toString(32)+g,c=""+c+"R"+g,g=k1++,0<g&&(c+="H"+g.toString(32)),c+=""}else g=GY++,c=""+c+"r"+g.toString(32)+"";return u.memoizedState=c},useHostTransitionStatus:uE,useFormState:AR,useActionState:AR,useOptimistic:function(u){var c=pr();c.memoizedState=c.baseState=u;var g={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return c.queue=g,c=lE.bind(null,le,!0,g),g.dispatch=c,[u,c]},useMemoCache:tE,useCacheRefresh:function(){return pr().memoizedState=VY.bind(null,le)}},XR={readContext:Ai,use:O1,useCallback:zR,useContext:Ai,useEffect:$R,useImperativeHandle:LR,useInsertionEffect:DR,useLayoutEffect:RR,useMemo:FR,useReducer:$1,useRef:kR,useState:function(){return $1(Hs)},useDebugValue:aE,useDeferredValue:function(u,c){var g=$n();return PR(g,Ue.memoizedState,u,c)},useTransition:function(){var u=$1(Hs)[0],c=$n().memoizedState;return[typeof u=="boolean"?u:Rg(u),c]},useSyncExternalStore:dR,useId:qR,useHostTransitionStatus:uE,useFormState:TR,useActionState:TR,useOptimistic:function(u,c){var g=$n();return _R(g,Ue,u,c)},useMemoCache:tE,useCacheRefresh:jR},KY={readContext:Ai,use:O1,useCallback:zR,useContext:Ai,useEffect:$R,useImperativeHandle:LR,useInsertionEffect:DR,useLayoutEffect:RR,useMemo:FR,useReducer:nE,useRef:kR,useState:function(){return nE(Hs)},useDebugValue:aE,useDeferredValue:function(u,c){var g=$n();return Ue===null?oE(g,u,c):PR(g,Ue.memoizedState,u,c)},useTransition:function(){var u=nE(Hs)[0],c=$n().memoizedState;return[typeof u=="boolean"?u:Rg(u),c]},useSyncExternalStore:dR,useId:qR,useHostTransitionStatus:uE,useFormState:MR,useActionState:MR,useOptimistic:function(u,c){var g=$n();return Ue!==null?_R(g,Ue,u,c):(g.baseState=u,[u,g.queue.dispatch])},useMemoCache:tE,useCacheRefresh:jR},Jh=null,zg=0;function z1(u){var c=zg;return zg+=1,Jh===null&&(Jh=[]),aR(Jh,u,c)}function Fg(u,c){c=c.props.ref,u.ref=c!==void 0?c:null}function F1(u,c){throw c.$$typeof===p?Error(i(525)):(u=Object.prototype.toString.call(c),Error(i(31,u==="[object Object]"?"object with keys {"+Object.keys(c).join(", ")+"}":u)))}function WR(u){var c=u._init;return c(u._payload)}function VR(u){function c(K,Q){if(u){var it=K.deletions;it===null?(K.deletions=[Q],K.flags|=16):it.push(Q)}}function g(K,Q){if(!u)return null;for(;Q!==null;)c(K,Q),Q=Q.sibling;return null}function v(K){for(var Q=new Map;K!==null;)K.key!==null?Q.set(K.key,K):Q.set(K.index,K),K=K.sibling;return Q}function E(K,Q){return K=ca(K,Q),K.index=0,K.sibling=null,K}function A(K,Q,it){return K.index=it,u?(it=K.alternate,it!==null?(it=it.index,it<Q?(K.flags|=67108866,Q):it):(K.flags|=67108866,Q)):(K.flags|=1048576,Q)}function R(K){return u&&K.alternate===null&&(K.flags|=67108866),K}function P(K,Q,it,mt){return Q===null||Q.tag!==6?(Q=Sg(it,K.mode,mt),Q.return=K,Q):(Q=E(Q,it),Q.return=K,Q)}function Z(K,Q,it,mt){var Pt=it.type;return Pt===b?pt(K,Q,it.props.children,mt,it.key):Q!==null&&(Q.elementType===Pt||typeof Pt=="object"&&Pt!==null&&Pt.$$typeof===I&&WR(Pt)===Q.type)?(Q=E(Q,it.props),Fg(Q,it),Q.return=K,Q):(Q=Xc(it.type,it.key,it.props,null,K.mode,mt),Fg(Q,it),Q.return=K,Q)}function rt(K,Q,it,mt){return Q===null||Q.tag!==4||Q.stateNode.containerInfo!==it.containerInfo||Q.stateNode.implementation!==it.implementation?(Q=Gh(it,K.mode,mt),Q.return=K,Q):(Q=E(Q,it.children||[]),Q.return=K,Q)}function pt(K,Q,it,mt,Pt){return Q===null||Q.tag!==7?(Q=Oo(it,K.mode,mt,Pt),Q.return=K,Q):(Q=E(Q,it),Q.return=K,Q)}function vt(K,Q,it){if(typeof Q=="string"&&Q!==""||typeof Q=="number"||typeof Q=="bigint")return Q=Sg(""+Q,K.mode,it),Q.return=K,Q;if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case m:return it=Xc(Q.type,Q.key,Q.props,null,K.mode,it),Fg(it,Q),it.return=K,it;case _:return Q=Gh(Q,K.mode,it),Q.return=K,Q;case I:var mt=Q._init;return Q=mt(Q._payload),vt(K,Q,it)}if(j(Q)||et(Q))return Q=Oo(Q,K.mode,it,null),Q.return=K,Q;if(typeof Q.then=="function")return vt(K,z1(Q),it);if(Q.$$typeof===k)return vt(K,E1(K,Q),it);F1(K,Q)}return null}function at(K,Q,it,mt){var Pt=Q!==null?Q.key:null;if(typeof it=="string"&&it!==""||typeof it=="number"||typeof it=="bigint")return Pt!==null?null:P(K,Q,""+it,mt);if(typeof it=="object"&&it!==null){switch(it.$$typeof){case m:return it.key===Pt?Z(K,Q,it,mt):null;case _:return it.key===Pt?rt(K,Q,it,mt):null;case I:return Pt=it._init,it=Pt(it._payload),at(K,Q,it,mt)}if(j(it)||et(it))return Pt!==null?null:pt(K,Q,it,mt,null);if(typeof it.then=="function")return at(K,Q,z1(it),mt);if(it.$$typeof===k)return at(K,Q,E1(K,it),mt);F1(K,it)}return null}function st(K,Q,it,mt,Pt){if(typeof mt=="string"&&mt!==""||typeof mt=="number"||typeof mt=="bigint")return K=K.get(it)||null,P(Q,K,""+mt,Pt);if(typeof mt=="object"&&mt!==null){switch(mt.$$typeof){case m:return K=K.get(mt.key===null?it:mt.key)||null,Z(Q,K,mt,Pt);case _:return K=K.get(mt.key===null?it:mt.key)||null,rt(Q,K,mt,Pt);case I:var he=mt._init;return mt=he(mt._payload),st(K,Q,it,mt,Pt)}if(j(mt)||et(mt))return K=K.get(it)||null,pt(Q,K,mt,Pt,null);if(typeof mt.then=="function")return st(K,Q,it,z1(mt),Pt);if(mt.$$typeof===k)return st(K,Q,it,E1(Q,mt),Pt);F1(Q,mt)}return null}function Kt(K,Q,it,mt){for(var Pt=null,he=null,jt=Q,Vt=Q=0,Wn=null;jt!==null&&Vt<it.length;Vt++){jt.index>Vt?(Wn=jt,jt=null):Wn=jt.sibling;var Ae=at(K,jt,it[Vt],mt);if(Ae===null){jt===null&&(jt=Wn);break}u&&jt&&Ae.alternate===null&&c(K,jt),Q=A(Ae,Q,Vt),he===null?Pt=Ae:he.sibling=Ae,he=Ae,jt=Wn}if(Vt===it.length)return g(K,jt),te&&tt(K,Vt),Pt;if(jt===null){for(;Vt<it.length;Vt++)jt=vt(K,it[Vt],mt),jt!==null&&(Q=A(jt,Q,Vt),he===null?Pt=jt:he.sibling=jt,he=jt);return te&&tt(K,Vt),Pt}for(jt=v(jt);Vt<it.length;Vt++)Wn=st(jt,K,Vt,it[Vt],mt),Wn!==null&&(u&&Wn.alternate!==null&&jt.delete(Wn.key===null?Vt:Wn.key),Q=A(Wn,Q,Vt),he===null?Pt=Wn:he.sibling=Wn,he=Wn);return u&&jt.forEach(function(Ml){return c(K,Ml)}),te&&tt(K,Vt),Pt}function Wt(K,Q,it,mt){if(it==null)throw Error(i(151));for(var Pt=null,he=null,jt=Q,Vt=Q=0,Wn=null,Ae=it.next();jt!==null&&!Ae.done;Vt++,Ae=it.next()){jt.index>Vt?(Wn=jt,jt=null):Wn=jt.sibling;var Ml=at(K,jt,Ae.value,mt);if(Ml===null){jt===null&&(jt=Wn);break}u&&jt&&Ml.alternate===null&&c(K,jt),Q=A(Ml,Q,Vt),he===null?Pt=Ml:he.sibling=Ml,he=Ml,jt=Wn}if(Ae.done)return g(K,jt),te&&tt(K,Vt),Pt;if(jt===null){for(;!Ae.done;Vt++,Ae=it.next())Ae=vt(K,Ae.value,mt),Ae!==null&&(Q=A(Ae,Q,Vt),he===null?Pt=Ae:he.sibling=Ae,he=Ae);return te&&tt(K,Vt),Pt}for(jt=v(jt);!Ae.done;Vt++,Ae=it.next())Ae=st(jt,K,Vt,Ae.value,mt),Ae!==null&&(u&&Ae.alternate!==null&&jt.delete(Ae.key===null?Vt:Ae.key),Q=A(Ae,Q,Vt),he===null?Pt=Ae:he.sibling=Ae,he=Ae);return u&&jt.forEach(function(JX){return c(K,JX)}),te&&tt(K,Vt),Pt}function qe(K,Q,it,mt){if(typeof it=="object"&&it!==null&&it.type===b&&it.key===null&&(it=it.props.children),typeof it=="object"&&it!==null){switch(it.$$typeof){case m:t:{for(var Pt=it.key;Q!==null;){if(Q.key===Pt){if(Pt=it.type,Pt===b){if(Q.tag===7){g(K,Q.sibling),mt=E(Q,it.props.children),mt.return=K,K=mt;break t}}else if(Q.elementType===Pt||typeof Pt=="object"&&Pt!==null&&Pt.$$typeof===I&&WR(Pt)===Q.type){g(K,Q.sibling),mt=E(Q,it.props),Fg(mt,it),mt.return=K,K=mt;break t}g(K,Q);break}else c(K,Q);Q=Q.sibling}it.type===b?(mt=Oo(it.props.children,K.mode,mt,it.key),mt.return=K,K=mt):(mt=Xc(it.type,it.key,it.props,null,K.mode,mt),Fg(mt,it),mt.return=K,K=mt)}return R(K);case _:t:{for(Pt=it.key;Q!==null;){if(Q.key===Pt)if(Q.tag===4&&Q.stateNode.containerInfo===it.containerInfo&&Q.stateNode.implementation===it.implementation){g(K,Q.sibling),mt=E(Q,it.children||[]),mt.return=K,K=mt;break t}else{g(K,Q);break}else c(K,Q);Q=Q.sibling}mt=Gh(it,K.mode,mt),mt.return=K,K=mt}return R(K);case I:return Pt=it._init,it=Pt(it._payload),qe(K,Q,it,mt)}if(j(it))return Kt(K,Q,it,mt);if(et(it)){if(Pt=et(it),typeof Pt!="function")throw Error(i(150));return it=Pt.call(it),Wt(K,Q,it,mt)}if(typeof it.then=="function")return qe(K,Q,z1(it),mt);if(it.$$typeof===k)return qe(K,Q,E1(K,it),mt);F1(K,it)}return typeof it=="string"&&it!==""||typeof it=="number"||typeof it=="bigint"?(it=""+it,Q!==null&&Q.tag===6?(g(K,Q.sibling),mt=E(Q,it),mt.return=K,K=mt):(g(K,Q),mt=Sg(it,K.mode,mt),mt.return=K,K=mt),R(K)):g(K,Q)}return function(K,Q,it,mt){try{zg=0;var Pt=qe(K,Q,it,mt);return Jh=null,Pt}catch(jt){if(jt===Cg||jt===A1)throw jt;var he=Yi(29,jt,null,K.mode);return he.lanes=mt,he.return=K,he}finally{}}}var td=VR(!0),QR=VR(!1),ha=J(null),Do=null;function dl(u){var c=u.alternate;ft(zn,zn.current&1),ft(ha,u),Do===null&&(c===null||Wh.current!==null||c.memoizedState!==null)&&(Do=u)}function KR(u){if(u.tag===22){if(ft(zn,zn.current),ft(ha,u),Do===null){var c=u.alternate;c!==null&&c.memoizedState!==null&&(Do=u)}}else pl()}function pl(){ft(zn,zn.current),ft(ha,ha.current)}function Gs(u){lt(ha),Do===u&&(Do=null),lt(zn)}var zn=J(0);function P1(u){for(var c=u;c!==null;){if(c.tag===13){var g=c.memoizedState;if(g!==null&&(g=g.dehydrated,g===null||g.data==="$?"||JE(g)))return c}else if(c.tag===19&&c.memoizedProps.revealOrder!==void 0){if((c.flags&128)!==0)return c}else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===u)break;for(;c.sibling===null;){if(c.return===null||c.return===u)return null;c=c.return}c.sibling.return=c.return,c=c.sibling}return null}function cE(u,c,g,v){c=u.memoizedState,g=g(v,c),g=g==null?c:d({},c,g),u.memoizedState=g,u.lanes===0&&(u.updateQueue.baseState=g)}var fE={enqueueSetState:function(u,c,g){u=u._reactInternals;var v=Ir(),E=cl(v);E.payload=c,g!=null&&(E.callback=g),c=fl(u,E,v),c!==null&&(qr(c,u,v),kg(c,u,v))},enqueueReplaceState:function(u,c,g){u=u._reactInternals;var v=Ir(),E=cl(v);E.tag=1,E.payload=c,g!=null&&(E.callback=g),c=fl(u,E,v),c!==null&&(qr(c,u,v),kg(c,u,v))},enqueueForceUpdate:function(u,c){u=u._reactInternals;var g=Ir(),v=cl(g);v.tag=2,c!=null&&(v.callback=c),c=fl(u,v,g),c!==null&&(qr(c,u,g),kg(c,u,g))}};function JR(u,c,g,v,E,A,R){return u=u.stateNode,typeof u.shouldComponentUpdate=="function"?u.shouldComponentUpdate(v,A,R):c.prototype&&c.prototype.isPureReactComponent?!Hi(g,v)||!Hi(E,A):!0}function tN(u,c,g,v){u=c.state,typeof c.componentWillReceiveProps=="function"&&c.componentWillReceiveProps(g,v),typeof c.UNSAFE_componentWillReceiveProps=="function"&&c.UNSAFE_componentWillReceiveProps(g,v),c.state!==u&&fE.enqueueReplaceState(c,c.state,null)}function ef(u,c){var g=c;if("ref"in c){g={};for(var v in c)v!=="ref"&&(g[v]=c[v])}if(u=u.defaultProps){g===c&&(g=d({},g));for(var E in u)g[E]===void 0&&(g[E]=u[E])}return g}var B1=typeof reportError=="function"?reportError:function(u){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var c=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof u=="object"&&u!==null&&typeof u.message=="string"?String(u.message):String(u),error:u});if(!window.dispatchEvent(c))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",u);return}console.error(u)};function eN(u){B1(u)}function nN(u){console.error(u)}function iN(u){B1(u)}function U1(u,c){try{var g=u.onUncaughtError;g(c.value,{componentStack:c.stack})}catch(v){setTimeout(function(){throw v})}}function rN(u,c,g){try{var v=u.onCaughtError;v(g.value,{componentStack:g.stack,errorBoundary:c.tag===1?c.stateNode:null})}catch(E){setTimeout(function(){throw E})}}function hE(u,c,g){return g=cl(g),g.tag=3,g.payload={element:null},g.callback=function(){U1(u,c)},g}function aN(u){return u=cl(u),u.tag=3,u}function oN(u,c,g,v){var E=g.type.getDerivedStateFromError;if(typeof E=="function"){var A=v.value;u.payload=function(){return E(A)},u.callback=function(){rN(c,g,v)}}var R=g.stateNode;R!==null&&typeof R.componentDidCatch=="function"&&(u.callback=function(){rN(c,g,v),typeof E!="function"&&(bl===null?bl=new Set([this]):bl.add(this));var P=v.stack;this.componentDidCatch(v.value,{componentStack:P!==null?P:""})})}function JY(u,c,g,v,E){if(g.flags|=32768,v!==null&&typeof v=="object"&&typeof v.then=="function"){if(c=g.alternate,c!==null&&Qc(c,g,E,!0),g=ha.current,g!==null){switch(g.tag){case 13:return Do===null?zE():g.alternate===null&&yn===0&&(yn=3),g.flags&=-257,g.flags|=65536,g.lanes=E,v===Iw?g.flags|=16384:(c=g.updateQueue,c===null?g.updateQueue=new Set([v]):c.add(v),PE(u,v,E)),!1;case 22:return g.flags|=65536,v===Iw?g.flags|=16384:(c=g.updateQueue,c===null?(c={transitions:null,markerInstances:null,retryQueue:new Set([v])},g.updateQueue=c):(g=c.retryQueue,g===null?c.retryQueue=new Set([v]):g.add(v)),PE(u,v,E)),!1}throw Error(i(435,g.tag))}return PE(u,v,E),zE(),!1}if(te)return c=ha.current,c!==null?((c.flags&65536)===0&&(c.flags|=256),c.flags|=65536,c.lanes=E,v!==Zn&&(u=Error(i(422),{cause:v}),ul(Gi(u,g)))):(v!==Zn&&(c=Error(i(423),{cause:v}),ul(Gi(c,g))),u=u.current.alternate,u.flags|=65536,E&=-E,u.lanes|=E,v=Gi(v,g),E=hE(u.stateNode,v,E),Hw(u,E),yn!==4&&(yn=2)),!1;var A=Error(i(520),{cause:v});if(A=Gi(A,g),Hg===null?Hg=[A]:Hg.push(A),yn!==4&&(yn=2),c===null)return!0;v=Gi(v,g),g=c;do{switch(g.tag){case 3:return g.flags|=65536,u=E&-E,g.lanes|=u,u=hE(g.stateNode,v,u),Hw(g,u),!1;case 1:if(c=g.type,A=g.stateNode,(g.flags&128)===0&&(typeof c.getDerivedStateFromError=="function"||A!==null&&typeof A.componentDidCatch=="function"&&(bl===null||!bl.has(A))))return g.flags|=65536,E&=-E,g.lanes|=E,E=aN(E),oN(E,u,g,v),Hw(g,E),!1}g=g.return}while(g!==null);return!1}var sN=Error(i(461)),Yn=!1;function li(u,c,g,v){c.child=u===null?QR(c,null,g,v):td(c,u.child,g,v)}function uN(u,c,g,v,E){g=g.render;var A=c.ref;if("ref"in v){var R={};for(var P in v)P!=="ref"&&(R[P]=v[P])}else R=v;return Kc(c),v=Ww(u,c,g,R,A,E),P=Vw(),u!==null&&!Yn?(Qw(u,c,E),Zs(u,c,E)):(te&&P&&_t(c),c.flags|=1,li(u,c,v,E),c.child)}function lN(u,c,g,v,E){if(u===null){var A=g.type;return typeof A=="function"&&!Hh(A)&&A.defaultProps===void 0&&g.compare===null?(c.tag=15,c.type=A,cN(u,c,A,v,E)):(u=Xc(g.type,null,v,c,c.mode,E),u.ref=c.ref,u.return=c,c.child=u)}if(A=u.child,!bE(u,E)){var R=A.memoizedProps;if(g=g.compare,g=g!==null?g:Hi,g(R,v)&&u.ref===c.ref)return Zs(u,c,E)}return c.flags|=1,u=ca(A,v),u.ref=c.ref,u.return=c,c.child=u}function cN(u,c,g,v,E){if(u!==null){var A=u.memoizedProps;if(Hi(A,v)&&u.ref===c.ref)if(Yn=!1,c.pendingProps=v=A,bE(u,E))(u.flags&131072)!==0&&(Yn=!0);else return c.lanes=u.lanes,Zs(u,c,E)}return dE(u,c,g,v,E)}function fN(u,c,g){var v=c.pendingProps,E=v.children,A=u!==null?u.memoizedState:null;if(v.mode==="hidden"){if((c.flags&128)!==0){if(v=A!==null?A.baseLanes|g:g,u!==null){for(E=c.child=u.child,A=0;E!==null;)A=A|E.lanes|E.childLanes,E=E.sibling;c.childLanes=A&~v}else c.childLanes=0,c.child=null;return hN(u,c,v,g)}if((g&536870912)!==0)c.memoizedState={baseLanes:0,cachePool:null},u!==null&&S1(c,A!==null?A.cachePool:null),A!==null?cR(c,A):Zw(),KR(c);else return c.lanes=c.childLanes=536870912,hN(u,c,A!==null?A.baseLanes|g:g,g)}else A!==null?(S1(c,A.cachePool),cR(c,A),pl(),c.memoizedState=null):(u!==null&&S1(c,null),Zw(),pl());return li(u,c,E,g),c.child}function hN(u,c,g,v){var E=Uw();return E=E===null?null:{parent:Ln._currentValue,pool:E},c.memoizedState={baseLanes:g,cachePool:E},u!==null&&S1(c,null),Zw(),KR(c),u!==null&&Qc(u,c,v,!0),null}function I1(u,c){var g=c.ref;if(g===null)u!==null&&u.ref!==null&&(c.flags|=4194816);else{if(typeof g!="function"&&typeof g!="object")throw Error(i(284));(u===null||u.ref!==g)&&(c.flags|=4194816)}}function dE(u,c,g,v,E){return Kc(c),g=Ww(u,c,g,v,void 0,E),v=Vw(),u!==null&&!Yn?(Qw(u,c,E),Zs(u,c,E)):(te&&v&&_t(c),c.flags|=1,li(u,c,g,E),c.child)}function dN(u,c,g,v,E,A){return Kc(c),c.updateQueue=null,g=hR(c,v,g,E),fR(u),v=Vw(),u!==null&&!Yn?(Qw(u,c,A),Zs(u,c,A)):(te&&v&&_t(c),c.flags|=1,li(u,c,g,A),c.child)}function pN(u,c,g,v,E){if(Kc(c),c.stateNode===null){var A=qs,R=g.contextType;typeof R=="object"&&R!==null&&(A=Ai(R)),A=new g(v,A),c.memoizedState=A.state!==null&&A.state!==void 0?A.state:null,A.updater=fE,c.stateNode=A,A._reactInternals=c,A=c.stateNode,A.props=v,A.state=c.memoizedState,A.refs={},qw(c),R=g.contextType,A.context=typeof R=="object"&&R!==null?Ai(R):qs,A.state=c.memoizedState,R=g.getDerivedStateFromProps,typeof R=="function"&&(cE(c,g,R,v),A.state=c.memoizedState),typeof g.getDerivedStateFromProps=="function"||typeof A.getSnapshotBeforeUpdate=="function"||typeof A.UNSAFE_componentWillMount!="function"&&typeof A.componentWillMount!="function"||(R=A.state,typeof A.componentWillMount=="function"&&A.componentWillMount(),typeof A.UNSAFE_componentWillMount=="function"&&A.UNSAFE_componentWillMount(),R!==A.state&&fE.enqueueReplaceState(A,A.state,null),$g(c,v,A,E),Og(),A.state=c.memoizedState),typeof A.componentDidMount=="function"&&(c.flags|=4194308),v=!0}else if(u===null){A=c.stateNode;var P=c.memoizedProps,Z=ef(g,P);A.props=Z;var rt=A.context,pt=g.contextType;R=qs,typeof pt=="object"&&pt!==null&&(R=Ai(pt));var vt=g.getDerivedStateFromProps;pt=typeof vt=="function"||typeof A.getSnapshotBeforeUpdate=="function",P=c.pendingProps!==P,pt||typeof A.UNSAFE_componentWillReceiveProps!="function"&&typeof A.componentWillReceiveProps!="function"||(P||rt!==R)&&tN(c,A,v,R),ll=!1;var at=c.memoizedState;A.state=at,$g(c,v,A,E),Og(),rt=c.memoizedState,P||at!==rt||ll?(typeof vt=="function"&&(cE(c,g,vt,v),rt=c.memoizedState),(Z=ll||JR(c,g,Z,v,at,rt,R))?(pt||typeof A.UNSAFE_componentWillMount!="function"&&typeof A.componentWillMount!="function"||(typeof A.componentWillMount=="function"&&A.componentWillMount(),typeof A.UNSAFE_componentWillMount=="function"&&A.UNSAFE_componentWillMount()),typeof A.componentDidMount=="function"&&(c.flags|=4194308)):(typeof A.componentDidMount=="function"&&(c.flags|=4194308),c.memoizedProps=v,c.memoizedState=rt),A.props=v,A.state=rt,A.context=R,v=Z):(typeof A.componentDidMount=="function"&&(c.flags|=4194308),v=!1)}else{A=c.stateNode,jw(u,c),R=c.memoizedProps,pt=ef(g,R),A.props=pt,vt=c.pendingProps,at=A.context,rt=g.contextType,Z=qs,typeof rt=="object"&&rt!==null&&(Z=Ai(rt)),P=g.getDerivedStateFromProps,(rt=typeof P=="function"||typeof A.getSnapshotBeforeUpdate=="function")||typeof A.UNSAFE_componentWillReceiveProps!="function"&&typeof A.componentWillReceiveProps!="function"||(R!==vt||at!==Z)&&tN(c,A,v,Z),ll=!1,at=c.memoizedState,A.state=at,$g(c,v,A,E),Og();var st=c.memoizedState;R!==vt||at!==st||ll||u!==null&&u.dependencies!==null&&w1(u.dependencies)?(typeof P=="function"&&(cE(c,g,P,v),st=c.memoizedState),(pt=ll||JR(c,g,pt,v,at,st,Z)||u!==null&&u.dependencies!==null&&w1(u.dependencies))?(rt||typeof A.UNSAFE_componentWillUpdate!="function"&&typeof A.componentWillUpdate!="function"||(typeof A.componentWillUpdate=="function"&&A.componentWillUpdate(v,st,Z),typeof A.UNSAFE_componentWillUpdate=="function"&&A.UNSAFE_componentWillUpdate(v,st,Z)),typeof A.componentDidUpdate=="function"&&(c.flags|=4),typeof A.getSnapshotBeforeUpdate=="function"&&(c.flags|=1024)):(typeof A.componentDidUpdate!="function"||R===u.memoizedProps&&at===u.memoizedState||(c.flags|=4),typeof A.getSnapshotBeforeUpdate!="function"||R===u.memoizedProps&&at===u.memoizedState||(c.flags|=1024),c.memoizedProps=v,c.memoizedState=st),A.props=v,A.state=st,A.context=Z,v=pt):(typeof A.componentDidUpdate!="function"||R===u.memoizedProps&&at===u.memoizedState||(c.flags|=4),typeof A.getSnapshotBeforeUpdate!="function"||R===u.memoizedProps&&at===u.memoizedState||(c.flags|=1024),v=!1)}return A=v,I1(u,c),v=(c.flags&128)!==0,A||v?(A=c.stateNode,g=v&&typeof g.getDerivedStateFromError!="function"?null:A.render(),c.flags|=1,u!==null&&v?(c.child=td(c,u.child,null,E),c.child=td(c,null,g,E)):li(u,c,g,E),c.memoizedState=A.state,u=c.child):u=Zs(u,c,E),u}function gN(u,c,g,v){return sl(),c.flags|=256,li(u,c,g,v),c.child}var pE={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function gE(u){return{baseLanes:u,cachePool:nR()}}function mE(u,c,g){return u=u!==null?u.childLanes&~g:0,c&&(u|=da),u}function mN(u,c,g){var v=c.pendingProps,E=!1,A=(c.flags&128)!==0,R;if((R=A)||(R=u!==null&&u.memoizedState===null?!1:(zn.current&2)!==0),R&&(E=!0,c.flags&=-129),R=(c.flags&32)!==0,c.flags&=-33,u===null){if(te){if(E?dl(c):pl(),te){var P=Ut,Z;if(Z=P){t:{for(Z=P,P=fn;Z.nodeType!==8;){if(!P){P=null;break t}if(Z=Ha(Z.nextSibling),Z===null){P=null;break t}}P=Z}P!==null?(c.memoizedState={dehydrated:P,treeContext:O!==null?{id:z,overflow:G}:null,retryLane:536870912,hydrationErrors:null},Z=Yi(18,null,null,0),Z.stateNode=P,Z.return=c,c.child=Z,Ft=c,Ut=null,Z=!0):Z=!1}Z||dr(c)}if(P=c.memoizedState,P!==null&&(P=P.dehydrated,P!==null))return JE(P)?c.lanes=32:c.lanes=536870912,null;Gs(c)}return P=v.children,v=v.fallback,E?(pl(),E=c.mode,P=q1({mode:"hidden",children:P},E),v=Oo(v,E,g,null),P.return=c,v.return=c,P.sibling=v,c.child=P,E=c.child,E.memoizedState=gE(g),E.childLanes=mE(u,R,g),c.memoizedState=pE,v):(dl(c),yE(c,P))}if(Z=u.memoizedState,Z!==null&&(P=Z.dehydrated,P!==null)){if(A)c.flags&256?(dl(c),c.flags&=-257,c=vE(u,c,g)):c.memoizedState!==null?(pl(),c.child=u.child,c.flags|=128,c=null):(pl(),E=v.fallback,P=c.mode,v=q1({mode:"visible",children:v.children},P),E=Oo(E,P,g,null),E.flags|=2,v.return=c,E.return=c,v.sibling=E,c.child=v,td(c,u.child,null,g),v=c.child,v.memoizedState=gE(g),v.childLanes=mE(u,R,g),c.memoizedState=pE,c=E);else if(dl(c),JE(P)){if(R=P.nextSibling&&P.nextSibling.dataset,R)var rt=R.dgst;R=rt,v=Error(i(419)),v.stack="",v.digest=R,ul({value:v,source:null,stack:null}),c=vE(u,c,g)}else if(Yn||Qc(u,c,g,!1),R=(g&u.childLanes)!==0,Yn||R){if(R=Qe,R!==null&&(v=g&-g,v=(v&42)!==0?1:rg(v),v=(v&(R.suspendedLanes|g))!==0?0:v,v!==0&&v!==Z.retryLane))throw Z.retryLane=v,al(u,v),qr(R,u,v),sN;P.data==="$?"||zE(),c=vE(u,c,g)}else P.data==="$?"?(c.flags|=192,c.child=u.child,c=null):(u=Z.treeContext,Ut=Ha(P.nextSibling),Ft=c,te=!0,Ve=null,fn=!1,u!==null&&(w[C++]=z,w[C++]=G,w[C++]=O,z=u.id,G=u.overflow,O=c),c=yE(c,v.children),c.flags|=4096);return c}return E?(pl(),E=v.fallback,P=c.mode,Z=u.child,rt=Z.sibling,v=ca(Z,{mode:"hidden",children:v.children}),v.subtreeFlags=Z.subtreeFlags&65011712,rt!==null?E=ca(rt,E):(E=Oo(E,P,g,null),E.flags|=2),E.return=c,v.return=c,v.sibling=E,c.child=v,v=E,E=c.child,P=u.child.memoizedState,P===null?P=gE(g):(Z=P.cachePool,Z!==null?(rt=Ln._currentValue,Z=Z.parent!==rt?{parent:rt,pool:rt}:Z):Z=nR(),P={baseLanes:P.baseLanes|g,cachePool:Z}),E.memoizedState=P,E.childLanes=mE(u,R,g),c.memoizedState=pE,v):(dl(c),g=u.child,u=g.sibling,g=ca(g,{mode:"visible",children:v.children}),g.return=c,g.sibling=null,u!==null&&(R=c.deletions,R===null?(c.deletions=[u],c.flags|=16):R.push(u)),c.child=g,c.memoizedState=null,g)}function yE(u,c){return c=q1({mode:"visible",children:c},u.mode),c.return=u,u.child=c}function q1(u,c){return u=Yi(22,u,null,c),u.lanes=0,u.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},u}function vE(u,c,g){return td(c,u.child,null,g),u=yE(c,c.pendingProps.children),u.flags|=2,c.memoizedState=null,u}function yN(u,c,g){u.lanes|=c;var v=u.alternate;v!==null&&(v.lanes|=c),Vc(u.return,c,g)}function _E(u,c,g,v,E){var A=u.memoizedState;A===null?u.memoizedState={isBackwards:c,rendering:null,renderingStartTime:0,last:v,tail:g,tailMode:E}:(A.isBackwards=c,A.rendering=null,A.renderingStartTime=0,A.last=v,A.tail=g,A.tailMode=E)}function vN(u,c,g){var v=c.pendingProps,E=v.revealOrder,A=v.tail;if(li(u,c,v.children,g),v=zn.current,(v&2)!==0)v=v&1|2,c.flags|=128;else{if(u!==null&&(u.flags&128)!==0)t:for(u=c.child;u!==null;){if(u.tag===13)u.memoizedState!==null&&yN(u,g,c);else if(u.tag===19)yN(u,g,c);else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===c)break t;for(;u.sibling===null;){if(u.return===null||u.return===c)break t;u=u.return}u.sibling.return=u.return,u=u.sibling}v&=1}switch(ft(zn,v),E){case"forwards":for(g=c.child,E=null;g!==null;)u=g.alternate,u!==null&&P1(u)===null&&(E=g),g=g.sibling;g=E,g===null?(E=c.child,c.child=null):(E=g.sibling,g.sibling=null),_E(c,!1,E,g,A);break;case"backwards":for(g=null,E=c.child,c.child=null;E!==null;){if(u=E.alternate,u!==null&&P1(u)===null){c.child=E;break}u=E.sibling,E.sibling=g,g=E,E=u}_E(c,!0,g,null,A);break;case"together":_E(c,!1,null,null,void 0);break;default:c.memoizedState=null}return c.child}function Zs(u,c,g){if(u!==null&&(c.dependencies=u.dependencies),_l|=c.lanes,(g&c.childLanes)===0)if(u!==null){if(Qc(u,c,g,!1),(g&c.childLanes)===0)return null}else return null;if(u!==null&&c.child!==u.child)throw Error(i(153));if(c.child!==null){for(u=c.child,g=ca(u,u.pendingProps),c.child=g,g.return=c;u.sibling!==null;)u=u.sibling,g=g.sibling=ca(u,u.pendingProps),g.return=c;g.sibling=null}return c.child}function bE(u,c){return(u.lanes&c)!==0?!0:(u=u.dependencies,!!(u!==null&&w1(u)))}function tX(u,c,g){switch(c.tag){case 3:ae(c,c.stateNode.containerInfo),$o(c,Ln,u.memoizedState.cache),sl();break;case 27:case 5:Qt(c);break;case 4:ae(c,c.stateNode.containerInfo);break;case 10:$o(c,c.type,c.memoizedProps.value);break;case 13:var v=c.memoizedState;if(v!==null)return v.dehydrated!==null?(dl(c),c.flags|=128,null):(g&c.child.childLanes)!==0?mN(u,c,g):(dl(c),u=Zs(u,c,g),u!==null?u.sibling:null);dl(c);break;case 19:var E=(u.flags&128)!==0;if(v=(g&c.childLanes)!==0,v||(Qc(u,c,g,!1),v=(g&c.childLanes)!==0),E){if(v)return vN(u,c,g);c.flags|=128}if(E=c.memoizedState,E!==null&&(E.rendering=null,E.tail=null,E.lastEffect=null),ft(zn,zn.current),v)break;return null;case 22:case 23:return c.lanes=0,fN(u,c,g);case 24:$o(c,Ln,u.memoizedState.cache)}return Zs(u,c,g)}function _N(u,c,g){if(u!==null)if(u.memoizedProps!==c.pendingProps)Yn=!0;else{if(!bE(u,g)&&(c.flags&128)===0)return Yn=!1,tX(u,c,g);Yn=(u.flags&131072)!==0}else Yn=!1,te&&(c.flags&1048576)!==0&&ut(c,y,c.index);switch(c.lanes=0,c.tag){case 16:t:{u=c.pendingProps;var v=c.elementType,E=v._init;if(v=E(v._payload),c.type=v,typeof v=="function")Hh(v)?(u=ef(v,u),c.tag=1,c=pN(null,c,v,u,g)):(c.tag=0,c=dE(null,c,v,u,g));else{if(v!=null){if(E=v.$$typeof,E===$){c.tag=11,c=uN(null,c,v,u,g);break t}else if(E===N){c.tag=14,c=lN(null,c,v,u,g);break t}}throw c=W(v)||v,Error(i(306,c,""))}}return c;case 0:return dE(u,c,c.type,c.pendingProps,g);case 1:return v=c.type,E=ef(v,c.pendingProps),pN(u,c,v,E,g);case 3:t:{if(ae(c,c.stateNode.containerInfo),u===null)throw Error(i(387));v=c.pendingProps;var A=c.memoizedState;E=A.element,jw(u,c),$g(c,v,null,g);var R=c.memoizedState;if(v=R.cache,$o(c,Ln,v),v!==A.cache&&Zh(c,[Ln],g,!0),Og(),v=R.element,A.isDehydrated)if(A={element:v,isDehydrated:!1,cache:R.cache},c.updateQueue.baseState=A,c.memoizedState=A,c.flags&256){c=gN(u,c,v,g);break t}else if(v!==E){E=Gi(Error(i(424)),c),ul(E),c=gN(u,c,v,g);break t}else{switch(u=c.stateNode.containerInfo,u.nodeType){case 9:u=u.body;break;default:u=u.nodeName==="HTML"?u.ownerDocument.body:u}for(Ut=Ha(u.firstChild),Ft=c,te=!0,Ve=null,fn=!0,g=QR(c,null,v,g),c.child=g;g;)g.flags=g.flags&-3|4096,g=g.sibling}else{if(sl(),v===E){c=Zs(u,c,g);break t}li(u,c,v,g)}c=c.child}return c;case 26:return I1(u,c),u===null?(g=EL(c.type,null,c.pendingProps,null))?c.memoizedState=g:te||(g=c.type,u=c.pendingProps,v=nv(At.current).createElement(g),v[Hn]=c,v[wi]=u,fi(v,g,u),kn(v),c.stateNode=v):c.memoizedState=EL(c.type,u.memoizedProps,c.pendingProps,u.memoizedState),null;case 27:return Qt(c),u===null&&te&&(v=c.stateNode=bL(c.type,c.pendingProps,At.current),Ft=c,fn=!0,E=Ut,El(c.type)?(tS=E,Ut=Ha(v.firstChild)):Ut=E),li(u,c,c.pendingProps.children,g),I1(u,c),u===null&&(c.flags|=4194304),c.child;case 5:return u===null&&te&&((E=v=Ut)&&(v=MX(v,c.type,c.pendingProps,fn),v!==null?(c.stateNode=v,Ft=c,Ut=Ha(v.firstChild),fn=!1,E=!0):E=!1),E||dr(c)),Qt(c),E=c.type,A=c.pendingProps,R=u!==null?u.memoizedProps:null,v=A.children,VE(E,A)?v=null:R!==null&&VE(E,R)&&(c.flags|=32),c.memoizedState!==null&&(E=Ww(u,c,ZY,null,null,g),Jg._currentValue=E),I1(u,c),li(u,c,v,g),c.child;case 6:return u===null&&te&&((u=g=Ut)&&(g=kX(g,c.pendingProps,fn),g!==null?(c.stateNode=g,Ft=c,Ut=null,u=!0):u=!1),u||dr(c)),null;case 13:return mN(u,c,g);case 4:return ae(c,c.stateNode.containerInfo),v=c.pendingProps,u===null?c.child=td(c,null,v,g):li(u,c,v,g),c.child;case 11:return uN(u,c,c.type,c.pendingProps,g);case 7:return li(u,c,c.pendingProps,g),c.child;case 8:return li(u,c,c.pendingProps.children,g),c.child;case 12:return li(u,c,c.pendingProps.children,g),c.child;case 10:return v=c.pendingProps,$o(c,c.type,v.value),li(u,c,v.children,g),c.child;case 9:return E=c.type._context,v=c.pendingProps.children,Kc(c),E=Ai(E),v=v(E),c.flags|=1,li(u,c,v,g),c.child;case 14:return lN(u,c,c.type,c.pendingProps,g);case 15:return cN(u,c,c.type,c.pendingProps,g);case 19:return vN(u,c,g);case 31:return v=c.pendingProps,g=c.mode,v={mode:v.mode,children:v.children},u===null?(g=q1(v,g),g.ref=c.ref,c.child=g,g.return=c,c=g):(g=ca(u.child,v),g.ref=c.ref,c.child=g,g.return=c,c=g),c;case 22:return fN(u,c,g);case 24:return Kc(c),v=Ai(Ln),u===null?(E=Uw(),E===null&&(E=Qe,A=Pw(),E.pooledCache=A,A.refCount++,A!==null&&(E.pooledCacheLanes|=g),E=A),c.memoizedState={parent:v,cache:E},qw(c),$o(c,Ln,E)):((u.lanes&g)!==0&&(jw(u,c),$g(c,null,null,g),Og()),E=u.memoizedState,A=c.memoizedState,E.parent!==v?(E={parent:v,cache:v},c.memoizedState=E,c.lanes===0&&(c.memoizedState=c.updateQueue.baseState=E),$o(c,Ln,v)):(v=A.cache,$o(c,Ln,v),v!==E.cache&&Zh(c,[Ln],g,!0))),li(u,c,c.pendingProps.children,g),c.child;case 29:throw c.pendingProps}throw Error(i(156,c.tag))}function Ys(u){u.flags|=4}function bN(u,c){if(c.type!=="stylesheet"||(c.state.loading&4)!==0)u.flags&=-16777217;else if(u.flags|=16777216,!ML(c)){if(c=ha.current,c!==null&&((we&4194048)===we?Do!==null:(we&62914560)!==we&&(we&536870912)===0||c!==Do))throw Mg=Iw,iR;u.flags|=8192}}function j1(u,c){c!==null&&(u.flags|=4),u.flags&16384&&(c=u.tag!==22?ig():536870912,u.lanes|=c,rd|=c)}function Pg(u,c){if(!te)switch(u.tailMode){case"hidden":c=u.tail;for(var g=null;c!==null;)c.alternate!==null&&(g=c),c=c.sibling;g===null?u.tail=null:g.sibling=null;break;case"collapsed":g=u.tail;for(var v=null;g!==null;)g.alternate!==null&&(v=g),g=g.sibling;v===null?c||u.tail===null?u.tail=null:u.tail.sibling=null:v.sibling=null}}function hn(u){var c=u.alternate!==null&&u.alternate.child===u.child,g=0,v=0;if(c)for(var E=u.child;E!==null;)g|=E.lanes|E.childLanes,v|=E.subtreeFlags&65011712,v|=E.flags&65011712,E.return=u,E=E.sibling;else for(E=u.child;E!==null;)g|=E.lanes|E.childLanes,v|=E.subtreeFlags,v|=E.flags,E.return=u,E=E.sibling;return u.subtreeFlags|=v,u.childLanes=g,c}function eX(u,c,g){var v=c.pendingProps;switch(Lt(c),c.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return hn(c),null;case 1:return hn(c),null;case 3:return g=c.stateNode,v=null,u!==null&&(v=u.memoizedState.cache),c.memoizedState.cache!==v&&(c.flags|=2048),qa(Ln),$t(),g.pendingContext&&(g.context=g.pendingContext,g.pendingContext=null),(u===null||u.child===null)&&(Wc(c)?Ys(c):u===null||u.memoizedState.isDehydrated&&(c.flags&256)===0||(c.flags|=1024,x1())),hn(c),null;case 26:return g=c.memoizedState,u===null?(Ys(c),g!==null?(hn(c),bN(c,g)):(hn(c),c.flags&=-16777217)):g?g!==u.memoizedState?(Ys(c),hn(c),bN(c,g)):(hn(c),c.flags&=-16777217):(u.memoizedProps!==v&&Ys(c),hn(c),c.flags&=-16777217),null;case 27:Jt(c),g=At.current;var E=c.type;if(u!==null&&c.stateNode!=null)u.memoizedProps!==v&&Ys(c);else{if(!v){if(c.stateNode===null)throw Error(i(166));return hn(c),null}u=wt.current,Wc(c)?_1(c):(u=bL(E,v,g),c.stateNode=u,Ys(c))}return hn(c),null;case 5:if(Jt(c),g=c.type,u!==null&&c.stateNode!=null)u.memoizedProps!==v&&Ys(c);else{if(!v){if(c.stateNode===null)throw Error(i(166));return hn(c),null}if(u=wt.current,Wc(c))_1(c);else{switch(E=nv(At.current),u){case 1:u=E.createElementNS("http://www.w3.org/2000/svg",g);break;case 2:u=E.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;default:switch(g){case"svg":u=E.createElementNS("http://www.w3.org/2000/svg",g);break;case"math":u=E.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;case"script":u=E.createElement("div"),u.innerHTML="<script><\/script>",u=u.removeChild(u.firstChild);break;case"select":u=typeof v.is=="string"?E.createElement("select",{is:v.is}):E.createElement("select"),v.multiple?u.multiple=!0:v.size&&(u.size=v.size);break;default:u=typeof v.is=="string"?E.createElement(g,{is:v.is}):E.createElement(g)}}u[Hn]=c,u[wi]=v;t:for(E=c.child;E!==null;){if(E.tag===5||E.tag===6)u.appendChild(E.stateNode);else if(E.tag!==4&&E.tag!==27&&E.child!==null){E.child.return=E,E=E.child;continue}if(E===c)break t;for(;E.sibling===null;){if(E.return===null||E.return===c)break t;E=E.return}E.sibling.return=E.return,E=E.sibling}c.stateNode=u;t:switch(fi(u,g,v),g){case"button":case"input":case"select":case"textarea":u=!!v.autoFocus;break t;case"img":u=!0;break t;default:u=!1}u&&Ys(c)}}return hn(c),c.flags&=-16777217,null;case 6:if(u&&c.stateNode!=null)u.memoizedProps!==v&&Ys(c);else{if(typeof v!="string"&&c.stateNode===null)throw Error(i(166));if(u=At.current,Wc(c)){if(u=c.stateNode,g=c.memoizedProps,v=null,E=Ft,E!==null)switch(E.tag){case 27:case 5:v=E.memoizedProps}u[Hn]=c,u=!!(u.nodeValue===g||v!==null&&v.suppressHydrationWarning===!0||dL(u.nodeValue,g)),u||dr(c)}else u=nv(u).createTextNode(v),u[Hn]=c,c.stateNode=u}return hn(c),null;case 13:if(v=c.memoizedState,u===null||u.memoizedState!==null&&u.memoizedState.dehydrated!==null){if(E=Wc(c),v!==null&&v.dehydrated!==null){if(u===null){if(!E)throw Error(i(318));if(E=c.memoizedState,E=E!==null?E.dehydrated:null,!E)throw Error(i(317));E[Hn]=c}else sl(),(c.flags&128)===0&&(c.memoizedState=null),c.flags|=4;hn(c),E=!1}else E=x1(),u!==null&&u.memoizedState!==null&&(u.memoizedState.hydrationErrors=E),E=!0;if(!E)return c.flags&256?(Gs(c),c):(Gs(c),null)}if(Gs(c),(c.flags&128)!==0)return c.lanes=g,c;if(g=v!==null,u=u!==null&&u.memoizedState!==null,g){v=c.child,E=null,v.alternate!==null&&v.alternate.memoizedState!==null&&v.alternate.memoizedState.cachePool!==null&&(E=v.alternate.memoizedState.cachePool.pool);var A=null;v.memoizedState!==null&&v.memoizedState.cachePool!==null&&(A=v.memoizedState.cachePool.pool),A!==E&&(v.flags|=2048)}return g!==u&&g&&(c.child.flags|=8192),j1(c,c.updateQueue),hn(c),null;case 4:return $t(),u===null&&GE(c.stateNode.containerInfo),hn(c),null;case 10:return qa(c.type),hn(c),null;case 19:if(lt(zn),E=c.memoizedState,E===null)return hn(c),null;if(v=(c.flags&128)!==0,A=E.rendering,A===null)if(v)Pg(E,!1);else{if(yn!==0||u!==null&&(u.flags&128)!==0)for(u=c.child;u!==null;){if(A=P1(u),A!==null){for(c.flags|=128,Pg(E,!1),u=A.updateQueue,c.updateQueue=u,j1(c,u),c.subtreeFlags=0,u=g,g=c.child;g!==null;)Eg(g,u),g=g.sibling;return ft(zn,zn.current&1|2),c.child}u=u.sibling}E.tail!==null&&nn()>Z1&&(c.flags|=128,v=!0,Pg(E,!1),c.lanes=4194304)}else{if(!v)if(u=P1(A),u!==null){if(c.flags|=128,v=!0,u=u.updateQueue,c.updateQueue=u,j1(c,u),Pg(E,!0),E.tail===null&&E.tailMode==="hidden"&&!A.alternate&&!te)return hn(c),null}else 2*nn()-E.renderingStartTime>Z1&&g!==536870912&&(c.flags|=128,v=!0,Pg(E,!1),c.lanes=4194304);E.isBackwards?(A.sibling=c.child,c.child=A):(u=E.last,u!==null?u.sibling=A:c.child=A,E.last=A)}return E.tail!==null?(c=E.tail,E.rendering=c,E.tail=c.sibling,E.renderingStartTime=nn(),c.sibling=null,u=zn.current,ft(zn,v?u&1|2:u&1),c):(hn(c),null);case 22:case 23:return Gs(c),Yw(),v=c.memoizedState!==null,u!==null?u.memoizedState!==null!==v&&(c.flags|=8192):v&&(c.flags|=8192),v?(g&536870912)!==0&&(c.flags&128)===0&&(hn(c),c.subtreeFlags&6&&(c.flags|=8192)):hn(c),g=c.updateQueue,g!==null&&j1(c,g.retryQueue),g=null,u!==null&&u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(g=u.memoizedState.cachePool.pool),v=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(v=c.memoizedState.cachePool.pool),v!==g&&(c.flags|=2048),u!==null&&lt(Jc),null;case 24:return g=null,u!==null&&(g=u.memoizedState.cache),c.memoizedState.cache!==g&&(c.flags|=2048),qa(Ln),hn(c),null;case 25:return null;case 30:return null}throw Error(i(156,c.tag))}function nX(u,c){switch(Lt(c),c.tag){case 1:return u=c.flags,u&65536?(c.flags=u&-65537|128,c):null;case 3:return qa(Ln),$t(),u=c.flags,(u&65536)!==0&&(u&128)===0?(c.flags=u&-65537|128,c):null;case 26:case 27:case 5:return Jt(c),null;case 13:if(Gs(c),u=c.memoizedState,u!==null&&u.dehydrated!==null){if(c.alternate===null)throw Error(i(340));sl()}return u=c.flags,u&65536?(c.flags=u&-65537|128,c):null;case 19:return lt(zn),null;case 4:return $t(),null;case 10:return qa(c.type),null;case 22:case 23:return Gs(c),Yw(),u!==null&&lt(Jc),u=c.flags,u&65536?(c.flags=u&-65537|128,c):null;case 24:return qa(Ln),null;case 25:return null;default:return null}}function xN(u,c){switch(Lt(c),c.tag){case 3:qa(Ln),$t();break;case 26:case 27:case 5:Jt(c);break;case 4:$t();break;case 13:Gs(c);break;case 19:lt(zn);break;case 10:qa(c.type);break;case 22:case 23:Gs(c),Yw(),u!==null&&lt(Jc);break;case 24:qa(Ln)}}function Bg(u,c){try{var g=c.updateQueue,v=g!==null?g.lastEffect:null;if(v!==null){var E=v.next;g=E;do{if((g.tag&u)===u){v=void 0;var A=g.create,R=g.inst;v=A(),R.destroy=v}g=g.next}while(g!==E)}}catch(P){Ge(c,c.return,P)}}function gl(u,c,g){try{var v=c.updateQueue,E=v!==null?v.lastEffect:null;if(E!==null){var A=E.next;v=A;do{if((v.tag&u)===u){var R=v.inst,P=R.destroy;if(P!==void 0){R.destroy=void 0,E=c;var Z=g,rt=P;try{rt()}catch(pt){Ge(E,Z,pt)}}}v=v.next}while(v!==A)}}catch(pt){Ge(c,c.return,pt)}}function wN(u){var c=u.updateQueue;if(c!==null){var g=u.stateNode;try{lR(c,g)}catch(v){Ge(u,u.return,v)}}}function EN(u,c,g){g.props=ef(u.type,u.memoizedProps),g.state=u.memoizedState;try{g.componentWillUnmount()}catch(v){Ge(u,c,v)}}function Ug(u,c){try{var g=u.ref;if(g!==null){switch(u.tag){case 26:case 27:case 5:var v=u.stateNode;break;case 30:v=u.stateNode;break;default:v=u.stateNode}typeof g=="function"?u.refCleanup=g(v):g.current=v}}catch(E){Ge(u,c,E)}}function Ro(u,c){var g=u.ref,v=u.refCleanup;if(g!==null)if(typeof v=="function")try{v()}catch(E){Ge(u,c,E)}finally{u.refCleanup=null,u=u.alternate,u!=null&&(u.refCleanup=null)}else if(typeof g=="function")try{g(null)}catch(E){Ge(u,c,E)}else g.current=null}function SN(u){var c=u.type,g=u.memoizedProps,v=u.stateNode;try{t:switch(c){case"button":case"input":case"select":case"textarea":g.autoFocus&&v.focus();break t;case"img":g.src?v.src=g.src:g.srcSet&&(v.srcset=g.srcSet)}}catch(E){Ge(u,u.return,E)}}function xE(u,c,g){try{var v=u.stateNode;EX(v,u.type,g,c),v[wi]=c}catch(E){Ge(u,u.return,E)}}function AN(u){return u.tag===5||u.tag===3||u.tag===26||u.tag===27&&El(u.type)||u.tag===4}function wE(u){t:for(;;){for(;u.sibling===null;){if(u.return===null||AN(u.return))return null;u=u.return}for(u.sibling.return=u.return,u=u.sibling;u.tag!==5&&u.tag!==6&&u.tag!==18;){if(u.tag===27&&El(u.type)||u.flags&2||u.child===null||u.tag===4)continue t;u.child.return=u,u=u.child}if(!(u.flags&2))return u.stateNode}}function EE(u,c,g){var v=u.tag;if(v===5||v===6)u=u.stateNode,c?(g.nodeType===9?g.body:g.nodeName==="HTML"?g.ownerDocument.body:g).insertBefore(u,c):(c=g.nodeType===9?g.body:g.nodeName==="HTML"?g.ownerDocument.body:g,c.appendChild(u),g=g._reactRootContainer,g!=null||c.onclick!==null||(c.onclick=ev));else if(v!==4&&(v===27&&El(u.type)&&(g=u.stateNode,c=null),u=u.child,u!==null))for(EE(u,c,g),u=u.sibling;u!==null;)EE(u,c,g),u=u.sibling}function H1(u,c,g){var v=u.tag;if(v===5||v===6)u=u.stateNode,c?g.insertBefore(u,c):g.appendChild(u);else if(v!==4&&(v===27&&El(u.type)&&(g=u.stateNode),u=u.child,u!==null))for(H1(u,c,g),u=u.sibling;u!==null;)H1(u,c,g),u=u.sibling}function TN(u){var c=u.stateNode,g=u.memoizedProps;try{for(var v=u.type,E=c.attributes;E.length;)c.removeAttributeNode(E[0]);fi(c,v,g),c[Hn]=u,c[wi]=g}catch(A){Ge(u,u.return,A)}}var Xs=!1,Sn=!1,SE=!1,CN=typeof WeakSet=="function"?WeakSet:Set,Xn=null;function iX(u,c){if(u=u.containerInfo,XE=uv,u=qc(u),jc(u)){if("selectionStart"in u)var g={start:u.selectionStart,end:u.selectionEnd};else t:{g=(g=u.ownerDocument)&&g.defaultView||window;var v=g.getSelection&&g.getSelection();if(v&&v.rangeCount!==0){g=v.anchorNode;var E=v.anchorOffset,A=v.focusNode;v=v.focusOffset;try{g.nodeType,A.nodeType}catch{g=null;break t}var R=0,P=-1,Z=-1,rt=0,pt=0,vt=u,at=null;e:for(;;){for(var st;vt!==g||E!==0&&vt.nodeType!==3||(P=R+E),vt!==A||v!==0&&vt.nodeType!==3||(Z=R+v),vt.nodeType===3&&(R+=vt.nodeValue.length),(st=vt.firstChild)!==null;)at=vt,vt=st;for(;;){if(vt===u)break e;if(at===g&&++rt===E&&(P=R),at===A&&++pt===v&&(Z=R),(st=vt.nextSibling)!==null)break;vt=at,at=vt.parentNode}vt=st}g=P===-1||Z===-1?null:{start:P,end:Z}}else g=null}g=g||{start:0,end:0}}else g=null;for(WE={focusedElem:u,selectionRange:g},uv=!1,Xn=c;Xn!==null;)if(c=Xn,u=c.child,(c.subtreeFlags&1024)!==0&&u!==null)u.return=c,Xn=u;else for(;Xn!==null;){switch(c=Xn,A=c.alternate,u=c.flags,c.tag){case 0:break;case 11:case 15:break;case 1:if((u&1024)!==0&&A!==null){u=void 0,g=c,E=A.memoizedProps,A=A.memoizedState,v=g.stateNode;try{var Kt=ef(g.type,E,g.elementType===g.type);u=v.getSnapshotBeforeUpdate(Kt,A),v.__reactInternalSnapshotBeforeUpdate=u}catch(Wt){Ge(g,g.return,Wt)}}break;case 3:if((u&1024)!==0){if(u=c.stateNode.containerInfo,g=u.nodeType,g===9)KE(u);else if(g===1)switch(u.nodeName){case"HEAD":case"HTML":case"BODY":KE(u);break;default:u.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((u&1024)!==0)throw Error(i(163))}if(u=c.sibling,u!==null){u.return=c.return,Xn=u;break}Xn=c.return}}function MN(u,c,g){var v=g.flags;switch(g.tag){case 0:case 11:case 15:ml(u,g),v&4&&Bg(5,g);break;case 1:if(ml(u,g),v&4)if(u=g.stateNode,c===null)try{u.componentDidMount()}catch(R){Ge(g,g.return,R)}else{var E=ef(g.type,c.memoizedProps);c=c.memoizedState;try{u.componentDidUpdate(E,c,u.__reactInternalSnapshotBeforeUpdate)}catch(R){Ge(g,g.return,R)}}v&64&&wN(g),v&512&&Ug(g,g.return);break;case 3:if(ml(u,g),v&64&&(u=g.updateQueue,u!==null)){if(c=null,g.child!==null)switch(g.child.tag){case 27:case 5:c=g.child.stateNode;break;case 1:c=g.child.stateNode}try{lR(u,c)}catch(R){Ge(g,g.return,R)}}break;case 27:c===null&&v&4&&TN(g);case 26:case 5:ml(u,g),c===null&&v&4&&SN(g),v&512&&Ug(g,g.return);break;case 12:ml(u,g);break;case 13:ml(u,g),v&4&&$N(u,g),v&64&&(u=g.memoizedState,u!==null&&(u=u.dehydrated,u!==null&&(g=hX.bind(null,g),OX(u,g))));break;case 22:if(v=g.memoizedState!==null||Xs,!v){c=c!==null&&c.memoizedState!==null||Sn,E=Xs;var A=Sn;Xs=v,(Sn=c)&&!A?yl(u,g,(g.subtreeFlags&8772)!==0):ml(u,g),Xs=E,Sn=A}break;case 30:break;default:ml(u,g)}}function kN(u){var c=u.alternate;c!==null&&(u.alternate=null,kN(c)),u.child=null,u.deletions=null,u.sibling=null,u.tag===5&&(c=u.stateNode,c!==null&&Ch(c)),u.stateNode=null,u.return=null,u.dependencies=null,u.memoizedProps=null,u.memoizedState=null,u.pendingProps=null,u.stateNode=null,u.updateQueue=null}var an=null,gr=!1;function Ws(u,c,g){for(g=g.child;g!==null;)ON(u,c,g),g=g.sibling}function ON(u,c,g){if(xi&&typeof xi.onCommitFiberUnmount=="function")try{xi.onCommitFiberUnmount(Es,g)}catch{}switch(g.tag){case 26:Sn||Ro(g,c),Ws(u,c,g),g.memoizedState?g.memoizedState.count--:g.stateNode&&(g=g.stateNode,g.parentNode.removeChild(g));break;case 27:Sn||Ro(g,c);var v=an,E=gr;El(g.type)&&(an=g.stateNode,gr=!1),Ws(u,c,g),Wg(g.stateNode),an=v,gr=E;break;case 5:Sn||Ro(g,c);case 6:if(v=an,E=gr,an=null,Ws(u,c,g),an=v,gr=E,an!==null)if(gr)try{(an.nodeType===9?an.body:an.nodeName==="HTML"?an.ownerDocument.body:an).removeChild(g.stateNode)}catch(A){Ge(g,c,A)}else try{an.removeChild(g.stateNode)}catch(A){Ge(g,c,A)}break;case 18:an!==null&&(gr?(u=an,vL(u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u,g.stateNode),im(u)):vL(an,g.stateNode));break;case 4:v=an,E=gr,an=g.stateNode.containerInfo,gr=!0,Ws(u,c,g),an=v,gr=E;break;case 0:case 11:case 14:case 15:Sn||gl(2,g,c),Sn||gl(4,g,c),Ws(u,c,g);break;case 1:Sn||(Ro(g,c),v=g.stateNode,typeof v.componentWillUnmount=="function"&&EN(g,c,v)),Ws(u,c,g);break;case 21:Ws(u,c,g);break;case 22:Sn=(v=Sn)||g.memoizedState!==null,Ws(u,c,g),Sn=v;break;default:Ws(u,c,g)}}function $N(u,c){if(c.memoizedState===null&&(u=c.alternate,u!==null&&(u=u.memoizedState,u!==null&&(u=u.dehydrated,u!==null))))try{im(u)}catch(g){Ge(c,c.return,g)}}function rX(u){switch(u.tag){case 13:case 19:var c=u.stateNode;return c===null&&(c=u.stateNode=new CN),c;case 22:return u=u.stateNode,c=u._retryCache,c===null&&(c=u._retryCache=new CN),c;default:throw Error(i(435,u.tag))}}function AE(u,c){var g=rX(u);c.forEach(function(v){var E=dX.bind(null,u,v);g.has(v)||(g.add(v),v.then(E,E))})}function Pr(u,c){var g=c.deletions;if(g!==null)for(var v=0;v<g.length;v++){var E=g[v],A=u,R=c,P=R;t:for(;P!==null;){switch(P.tag){case 27:if(El(P.type)){an=P.stateNode,gr=!1;break t}break;case 5:an=P.stateNode,gr=!1;break t;case 3:case 4:an=P.stateNode.containerInfo,gr=!0;break t}P=P.return}if(an===null)throw Error(i(160));ON(A,R,E),an=null,gr=!1,A=E.alternate,A!==null&&(A.return=null),E.return=null}if(c.subtreeFlags&13878)for(c=c.child;c!==null;)DN(c,u),c=c.sibling}var ja=null;function DN(u,c){var g=u.alternate,v=u.flags;switch(u.tag){case 0:case 11:case 14:case 15:Pr(c,u),Br(u),v&4&&(gl(3,u,u.return),Bg(3,u),gl(5,u,u.return));break;case 1:Pr(c,u),Br(u),v&512&&(Sn||g===null||Ro(g,g.return)),v&64&&Xs&&(u=u.updateQueue,u!==null&&(v=u.callbacks,v!==null&&(g=u.shared.hiddenCallbacks,u.shared.hiddenCallbacks=g===null?v:g.concat(v))));break;case 26:var E=ja;if(Pr(c,u),Br(u),v&512&&(Sn||g===null||Ro(g,g.return)),v&4){var A=g!==null?g.memoizedState:null;if(v=u.memoizedState,g===null)if(v===null)if(u.stateNode===null){t:{v=u.type,g=u.memoizedProps,E=E.ownerDocument||E;e:switch(v){case"title":A=E.getElementsByTagName("title")[0],(!A||A[Uu]||A[Hn]||A.namespaceURI==="http://www.w3.org/2000/svg"||A.hasAttribute("itemprop"))&&(A=E.createElement(v),E.head.insertBefore(A,E.querySelector("head > title"))),fi(A,v,g),A[Hn]=u,kn(A),v=A;break t;case"link":var R=TL("link","href",E).get(v+(g.href||""));if(R){for(var P=0;P<R.length;P++)if(A=R[P],A.getAttribute("href")===(g.href==null||g.href===""?null:g.href)&&A.getAttribute("rel")===(g.rel==null?null:g.rel)&&A.getAttribute("title")===(g.title==null?null:g.title)&&A.getAttribute("crossorigin")===(g.crossOrigin==null?null:g.crossOrigin)){R.splice(P,1);break e}}A=E.createElement(v),fi(A,v,g),E.head.appendChild(A);break;case"meta":if(R=TL("meta","content",E).get(v+(g.content||""))){for(P=0;P<R.length;P++)if(A=R[P],A.getAttribute("content")===(g.content==null?null:""+g.content)&&A.getAttribute("name")===(g.name==null?null:g.name)&&A.getAttribute("property")===(g.property==null?null:g.property)&&A.getAttribute("http-equiv")===(g.httpEquiv==null?null:g.httpEquiv)&&A.getAttribute("charset")===(g.charSet==null?null:g.charSet)){R.splice(P,1);break e}}A=E.createElement(v),fi(A,v,g),E.head.appendChild(A);break;default:throw Error(i(468,v))}A[Hn]=u,kn(A),v=A}u.stateNode=v}else CL(E,u.type,u.stateNode);else u.stateNode=AL(E,v,u.memoizedProps);else A!==v?(A===null?g.stateNode!==null&&(g=g.stateNode,g.parentNode.removeChild(g)):A.count--,v===null?CL(E,u.type,u.stateNode):AL(E,v,u.memoizedProps)):v===null&&u.stateNode!==null&&xE(u,u.memoizedProps,g.memoizedProps)}break;case 27:Pr(c,u),Br(u),v&512&&(Sn||g===null||Ro(g,g.return)),g!==null&&v&4&&xE(u,u.memoizedProps,g.memoizedProps);break;case 5:if(Pr(c,u),Br(u),v&512&&(Sn||g===null||Ro(g,g.return)),u.flags&32){E=u.stateNode;try{aa(E,"")}catch(st){Ge(u,u.return,st)}}v&4&&u.stateNode!=null&&(E=u.memoizedProps,xE(u,E,g!==null?g.memoizedProps:E)),v&1024&&(SE=!0);break;case 6:if(Pr(c,u),Br(u),v&4){if(u.stateNode===null)throw Error(i(162));v=u.memoizedProps,g=u.stateNode;try{g.nodeValue=v}catch(st){Ge(u,u.return,st)}}break;case 3:if(av=null,E=ja,ja=iv(c.containerInfo),Pr(c,u),ja=E,Br(u),v&4&&g!==null&&g.memoizedState.isDehydrated)try{im(c.containerInfo)}catch(st){Ge(u,u.return,st)}SE&&(SE=!1,RN(u));break;case 4:v=ja,ja=iv(u.stateNode.containerInfo),Pr(c,u),Br(u),ja=v;break;case 12:Pr(c,u),Br(u);break;case 13:Pr(c,u),Br(u),u.child.flags&8192&&u.memoizedState!==null!=(g!==null&&g.memoizedState!==null)&&($E=nn()),v&4&&(v=u.updateQueue,v!==null&&(u.updateQueue=null,AE(u,v)));break;case 22:E=u.memoizedState!==null;var Z=g!==null&&g.memoizedState!==null,rt=Xs,pt=Sn;if(Xs=rt||E,Sn=pt||Z,Pr(c,u),Sn=pt,Xs=rt,Br(u),v&8192)t:for(c=u.stateNode,c._visibility=E?c._visibility&-2:c._visibility|1,E&&(g===null||Z||Xs||Sn||nf(u)),g=null,c=u;;){if(c.tag===5||c.tag===26){if(g===null){Z=g=c;try{if(A=Z.stateNode,E)R=A.style,typeof R.setProperty=="function"?R.setProperty("display","none","important"):R.display="none";else{P=Z.stateNode;var vt=Z.memoizedProps.style,at=vt!=null&&vt.hasOwnProperty("display")?vt.display:null;P.style.display=at==null||typeof at=="boolean"?"":(""+at).trim()}}catch(st){Ge(Z,Z.return,st)}}}else if(c.tag===6){if(g===null){Z=c;try{Z.stateNode.nodeValue=E?"":Z.memoizedProps}catch(st){Ge(Z,Z.return,st)}}}else if((c.tag!==22&&c.tag!==23||c.memoizedState===null||c===u)&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===u)break t;for(;c.sibling===null;){if(c.return===null||c.return===u)break t;g===c&&(g=null),c=c.return}g===c&&(g=null),c.sibling.return=c.return,c=c.sibling}v&4&&(v=u.updateQueue,v!==null&&(g=v.retryQueue,g!==null&&(v.retryQueue=null,AE(u,g))));break;case 19:Pr(c,u),Br(u),v&4&&(v=u.updateQueue,v!==null&&(u.updateQueue=null,AE(u,v)));break;case 30:break;case 21:break;default:Pr(c,u),Br(u)}}function Br(u){var c=u.flags;if(c&2){try{for(var g,v=u.return;v!==null;){if(AN(v)){g=v;break}v=v.return}if(g==null)throw Error(i(160));switch(g.tag){case 27:var E=g.stateNode,A=wE(u);H1(u,A,E);break;case 5:var R=g.stateNode;g.flags&32&&(aa(R,""),g.flags&=-33);var P=wE(u);H1(u,P,R);break;case 3:case 4:var Z=g.stateNode.containerInfo,rt=wE(u);EE(u,rt,Z);break;default:throw Error(i(161))}}catch(pt){Ge(u,u.return,pt)}u.flags&=-3}c&4096&&(u.flags&=-4097)}function RN(u){if(u.subtreeFlags&1024)for(u=u.child;u!==null;){var c=u;RN(c),c.tag===5&&c.flags&1024&&c.stateNode.reset(),u=u.sibling}}function ml(u,c){if(c.subtreeFlags&8772)for(c=c.child;c!==null;)MN(u,c.alternate,c),c=c.sibling}function nf(u){for(u=u.child;u!==null;){var c=u;switch(c.tag){case 0:case 11:case 14:case 15:gl(4,c,c.return),nf(c);break;case 1:Ro(c,c.return);var g=c.stateNode;typeof g.componentWillUnmount=="function"&&EN(c,c.return,g),nf(c);break;case 27:Wg(c.stateNode);case 26:case 5:Ro(c,c.return),nf(c);break;case 22:c.memoizedState===null&&nf(c);break;case 30:nf(c);break;default:nf(c)}u=u.sibling}}function yl(u,c,g){for(g=g&&(c.subtreeFlags&8772)!==0,c=c.child;c!==null;){var v=c.alternate,E=u,A=c,R=A.flags;switch(A.tag){case 0:case 11:case 15:yl(E,A,g),Bg(4,A);break;case 1:if(yl(E,A,g),v=A,E=v.stateNode,typeof E.componentDidMount=="function")try{E.componentDidMount()}catch(rt){Ge(v,v.return,rt)}if(v=A,E=v.updateQueue,E!==null){var P=v.stateNode;try{var Z=E.shared.hiddenCallbacks;if(Z!==null)for(E.shared.hiddenCallbacks=null,E=0;E<Z.length;E++)uR(Z[E],P)}catch(rt){Ge(v,v.return,rt)}}g&&R&64&&wN(A),Ug(A,A.return);break;case 27:TN(A);case 26:case 5:yl(E,A,g),g&&v===null&&R&4&&SN(A),Ug(A,A.return);break;case 12:yl(E,A,g);break;case 13:yl(E,A,g),g&&R&4&&$N(E,A);break;case 22:A.memoizedState===null&&yl(E,A,g),Ug(A,A.return);break;case 30:break;default:yl(E,A,g)}c=c.sibling}}function TE(u,c){var g=null;u!==null&&u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(g=u.memoizedState.cachePool.pool),u=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(u=c.memoizedState.cachePool.pool),u!==g&&(u!=null&&u.refCount++,g!=null&&Ag(g))}function CE(u,c){u=null,c.alternate!==null&&(u=c.alternate.memoizedState.cache),c=c.memoizedState.cache,c!==u&&(c.refCount++,u!=null&&Ag(u))}function No(u,c,g,v){if(c.subtreeFlags&10256)for(c=c.child;c!==null;)NN(u,c,g,v),c=c.sibling}function NN(u,c,g,v){var E=c.flags;switch(c.tag){case 0:case 11:case 15:No(u,c,g,v),E&2048&&Bg(9,c);break;case 1:No(u,c,g,v);break;case 3:No(u,c,g,v),E&2048&&(u=null,c.alternate!==null&&(u=c.alternate.memoizedState.cache),c=c.memoizedState.cache,c!==u&&(c.refCount++,u!=null&&Ag(u)));break;case 12:if(E&2048){No(u,c,g,v),u=c.stateNode;try{var A=c.memoizedProps,R=A.id,P=A.onPostCommit;typeof P=="function"&&P(R,c.alternate===null?"mount":"update",u.passiveEffectDuration,-0)}catch(Z){Ge(c,c.return,Z)}}else No(u,c,g,v);break;case 13:No(u,c,g,v);break;case 23:break;case 22:A=c.stateNode,R=c.alternate,c.memoizedState!==null?A._visibility&2?No(u,c,g,v):Ig(u,c):A._visibility&2?No(u,c,g,v):(A._visibility|=2,ed(u,c,g,v,(c.subtreeFlags&10256)!==0)),E&2048&&TE(R,c);break;case 24:No(u,c,g,v),E&2048&&CE(c.alternate,c);break;default:No(u,c,g,v)}}function ed(u,c,g,v,E){for(E=E&&(c.subtreeFlags&10256)!==0,c=c.child;c!==null;){var A=u,R=c,P=g,Z=v,rt=R.flags;switch(R.tag){case 0:case 11:case 15:ed(A,R,P,Z,E),Bg(8,R);break;case 23:break;case 22:var pt=R.stateNode;R.memoizedState!==null?pt._visibility&2?ed(A,R,P,Z,E):Ig(A,R):(pt._visibility|=2,ed(A,R,P,Z,E)),E&&rt&2048&&TE(R.alternate,R);break;case 24:ed(A,R,P,Z,E),E&&rt&2048&&CE(R.alternate,R);break;default:ed(A,R,P,Z,E)}c=c.sibling}}function Ig(u,c){if(c.subtreeFlags&10256)for(c=c.child;c!==null;){var g=u,v=c,E=v.flags;switch(v.tag){case 22:Ig(g,v),E&2048&&TE(v.alternate,v);break;case 24:Ig(g,v),E&2048&&CE(v.alternate,v);break;default:Ig(g,v)}c=c.sibling}}var qg=8192;function nd(u){if(u.subtreeFlags&qg)for(u=u.child;u!==null;)LN(u),u=u.sibling}function LN(u){switch(u.tag){case 26:nd(u),u.flags&qg&&u.memoizedState!==null&&jX(ja,u.memoizedState,u.memoizedProps);break;case 5:nd(u);break;case 3:case 4:var c=ja;ja=iv(u.stateNode.containerInfo),nd(u),ja=c;break;case 22:u.memoizedState===null&&(c=u.alternate,c!==null&&c.memoizedState!==null?(c=qg,qg=16777216,nd(u),qg=c):nd(u));break;default:nd(u)}}function zN(u){var c=u.alternate;if(c!==null&&(u=c.child,u!==null)){c.child=null;do c=u.sibling,u.sibling=null,u=c;while(u!==null)}}function jg(u){var c=u.deletions;if((u.flags&16)!==0){if(c!==null)for(var g=0;g<c.length;g++){var v=c[g];Xn=v,PN(v,u)}zN(u)}if(u.subtreeFlags&10256)for(u=u.child;u!==null;)FN(u),u=u.sibling}function FN(u){switch(u.tag){case 0:case 11:case 15:jg(u),u.flags&2048&&gl(9,u,u.return);break;case 3:jg(u);break;case 12:jg(u);break;case 22:var c=u.stateNode;u.memoizedState!==null&&c._visibility&2&&(u.return===null||u.return.tag!==13)?(c._visibility&=-3,G1(u)):jg(u);break;default:jg(u)}}function G1(u){var c=u.deletions;if((u.flags&16)!==0){if(c!==null)for(var g=0;g<c.length;g++){var v=c[g];Xn=v,PN(v,u)}zN(u)}for(u=u.child;u!==null;){switch(c=u,c.tag){case 0:case 11:case 15:gl(8,c,c.return),G1(c);break;case 22:g=c.stateNode,g._visibility&2&&(g._visibility&=-3,G1(c));break;default:G1(c)}u=u.sibling}}function PN(u,c){for(;Xn!==null;){var g=Xn;switch(g.tag){case 0:case 11:case 15:gl(8,g,c);break;case 23:case 22:if(g.memoizedState!==null&&g.memoizedState.cachePool!==null){var v=g.memoizedState.cachePool.pool;v!=null&&v.refCount++}break;case 24:Ag(g.memoizedState.cache)}if(v=g.child,v!==null)v.return=g,Xn=v;else t:for(g=u;Xn!==null;){v=Xn;var E=v.sibling,A=v.return;if(kN(v),v===g){Xn=null;break t}if(E!==null){E.return=A,Xn=E;break t}Xn=A}}}var aX={getCacheForType:function(u){var c=Ai(Ln),g=c.data.get(u);return g===void 0&&(g=u(),c.data.set(u,g)),g}},oX=typeof WeakMap=="function"?WeakMap:Map,Le=0,Qe=null,ge=null,we=0,ze=0,Ur=null,vl=!1,id=!1,ME=!1,Vs=0,yn=0,_l=0,rf=0,kE=0,da=0,rd=0,Hg=null,mr=null,OE=!1,$E=0,Z1=1/0,Y1=null,bl=null,ci=0,xl=null,ad=null,od=0,DE=0,RE=null,BN=null,Gg=0,NE=null;function Ir(){if((Le&2)!==0&&we!==0)return we&-we;if(U.T!==null){var u=Yh;return u!==0?u:IE()}return Xy()}function UN(){da===0&&(da=(we&536870912)===0||te?Gy():536870912);var u=ha.current;return u!==null&&(u.flags|=32),da}function qr(u,c,g){(u===Qe&&(ze===2||ze===9)||u.cancelPendingCommit!==null)&&(sd(u,0),wl(u,we,da,!1)),Pu(u,g),((Le&2)===0||u!==Qe)&&(u===Qe&&((Le&2)===0&&(rf|=g),yn===4&&wl(u,we,da,!1)),Lo(u))}function IN(u,c,g){if((Le&6)!==0)throw Error(i(327));var v=!g&&(c&124)===0&&(c&u.expiredLanes)===0||za(u,c),E=v?lX(u,c):FE(u,c,!0),A=v;do{if(E===0){id&&!v&&wl(u,c,0,!1);break}else{if(g=u.current.alternate,A&&!sX(g)){E=FE(u,c,!1),A=!1;continue}if(E===2){if(A=c,u.errorRecoveryDisabledLanes&A)var R=0;else R=u.pendingLanes&-536870913,R=R!==0?R:R&536870912?536870912:0;if(R!==0){c=R;t:{var P=u;E=Hg;var Z=P.current.memoizedState.isDehydrated;if(Z&&(sd(P,R).flags|=256),R=FE(P,R,!1),R!==2){if(ME&&!Z){P.errorRecoveryDisabledLanes|=A,rf|=A,E=4;break t}A=mr,mr=E,A!==null&&(mr===null?mr=A:mr.push.apply(mr,A))}E=R}if(A=!1,E!==2)continue}}if(E===1){sd(u,0),wl(u,c,0,!0);break}t:{switch(v=u,A=E,A){case 0:case 1:throw Error(i(345));case 4:if((c&4194048)!==c)break;case 6:wl(v,c,da,!vl);break t;case 2:mr=null;break;case 3:case 5:break;default:throw Error(i(329))}if((c&62914560)===c&&(E=$E+300-nn(),10<E)){if(wl(v,c,da,!vl),Ah(v,0,!0)!==0)break t;v.timeoutHandle=mL(qN.bind(null,v,g,mr,Y1,OE,c,da,rf,rd,vl,A,2,-0,0),E);break t}qN(v,g,mr,Y1,OE,c,da,rf,rd,vl,A,0,-0,0)}}break}while(!0);Lo(u)}function qN(u,c,g,v,E,A,R,P,Z,rt,pt,vt,at,st){if(u.timeoutHandle=-1,vt=c.subtreeFlags,(vt&8192||(vt&16785408)===16785408)&&(Kg={stylesheets:null,count:0,unsuspend:qX},LN(c),vt=HX(),vt!==null)){u.cancelPendingCommit=vt(WN.bind(null,u,c,A,g,v,E,R,P,Z,pt,1,at,st)),wl(u,A,R,!rt);return}WN(u,c,A,g,v,E,R,P,Z)}function sX(u){for(var c=u;;){var g=c.tag;if((g===0||g===11||g===15)&&c.flags&16384&&(g=c.updateQueue,g!==null&&(g=g.stores,g!==null)))for(var v=0;v<g.length;v++){var E=g[v],A=E.getSnapshot;E=E.value;try{if(!ji(A(),E))return!1}catch{return!1}}if(g=c.child,c.subtreeFlags&16384&&g!==null)g.return=c,c=g;else{if(c===u)break;for(;c.sibling===null;){if(c.return===null||c.return===u)return!0;c=c.return}c.sibling.return=c.return,c=c.sibling}}return!0}function wl(u,c,g,v){c&=~kE,c&=~rf,u.suspendedLanes|=c,u.pingedLanes&=~c,v&&(u.warmLanes|=c),v=u.expirationTimes;for(var E=c;0<E;){var A=31-Ii(E),R=1<<A;v[A]=-1,E&=~R}g!==0&&Zy(u,g,c)}function X1(){return(Le&6)===0?(Zg(0),!1):!0}function LE(){if(ge!==null){if(ze===0)var u=ge.return;else u=ge,Ia=fa=null,Kw(u),Jh=null,zg=0,u=ge;for(;u!==null;)xN(u.alternate,u),u=u.return;ge=null}}function sd(u,c){var g=u.timeoutHandle;g!==-1&&(u.timeoutHandle=-1,AX(g)),g=u.cancelPendingCommit,g!==null&&(u.cancelPendingCommit=null,g()),LE(),Qe=u,ge=g=ca(u.current,null),we=c,ze=0,Ur=null,vl=!1,id=za(u,c),ME=!1,rd=da=kE=rf=_l=yn=0,mr=Hg=null,OE=!1,(c&8)!==0&&(c|=c&32);var v=u.entangledLanes;if(v!==0)for(u=u.entanglements,v&=c;0<v;){var E=31-Ii(v),A=1<<E;c|=u[E],v&=~A}return Vs=c,Gc(),g}function jN(u,c){le=null,U.H=L1,c===Cg||c===A1?(c=oR(),ze=3):c===iR?(c=oR(),ze=4):ze=c===sN?8:c!==null&&typeof c=="object"&&typeof c.then=="function"?6:1,Ur=c,ge===null&&(yn=1,U1(u,Gi(c,u.current)))}function HN(){var u=U.H;return U.H=L1,u===null?L1:u}function GN(){var u=U.A;return U.A=aX,u}function zE(){yn=4,vl||(we&4194048)!==we&&ha.current!==null||(id=!0),(_l&134217727)===0&&(rf&134217727)===0||Qe===null||wl(Qe,we,da,!1)}function FE(u,c,g){var v=Le;Le|=2;var E=HN(),A=GN();(Qe!==u||we!==c)&&(Y1=null,sd(u,c)),c=!1;var R=yn;t:do try{if(ze!==0&&ge!==null){var P=ge,Z=Ur;switch(ze){case 8:LE(),R=6;break t;case 3:case 2:case 9:case 6:ha.current===null&&(c=!0);var rt=ze;if(ze=0,Ur=null,ud(u,P,Z,rt),g&&id){R=0;break t}break;default:rt=ze,ze=0,Ur=null,ud(u,P,Z,rt)}}uX(),R=yn;break}catch(pt){jN(u,pt)}while(!0);return c&&u.shellSuspendCounter++,Ia=fa=null,Le=v,U.H=E,U.A=A,ge===null&&(Qe=null,we=0,Gc()),R}function uX(){for(;ge!==null;)ZN(ge)}function lX(u,c){var g=Le;Le|=2;var v=HN(),E=GN();Qe!==u||we!==c?(Y1=null,Z1=nn()+500,sd(u,c)):id=za(u,c);t:do try{if(ze!==0&&ge!==null){c=ge;var A=Ur;e:switch(ze){case 1:ze=0,Ur=null,ud(u,c,A,1);break;case 2:case 9:if(rR(A)){ze=0,Ur=null,YN(c);break}c=function(){ze!==2&&ze!==9||Qe!==u||(ze=7),Lo(u)},A.then(c,c);break t;case 3:ze=7;break t;case 4:ze=5;break t;case 7:rR(A)?(ze=0,Ur=null,YN(c)):(ze=0,Ur=null,ud(u,c,A,7));break;case 5:var R=null;switch(ge.tag){case 26:R=ge.memoizedState;case 5:case 27:var P=ge;if(!R||ML(R)){ze=0,Ur=null;var Z=P.sibling;if(Z!==null)ge=Z;else{var rt=P.return;rt!==null?(ge=rt,W1(rt)):ge=null}break e}}ze=0,Ur=null,ud(u,c,A,5);break;case 6:ze=0,Ur=null,ud(u,c,A,6);break;case 8:LE(),yn=6;break t;default:throw Error(i(462))}}cX();break}catch(pt){jN(u,pt)}while(!0);return Ia=fa=null,U.H=v,U.A=E,Le=g,ge!==null?0:(Qe=null,we=0,Gc(),yn)}function cX(){for(;ge!==null&&!ln();)ZN(ge)}function ZN(u){var c=_N(u.alternate,u,Vs);u.memoizedProps=u.pendingProps,c===null?W1(u):ge=c}function YN(u){var c=u,g=c.alternate;switch(c.tag){case 15:case 0:c=dN(g,c,c.pendingProps,c.type,void 0,we);break;case 11:c=dN(g,c,c.pendingProps,c.type.render,c.ref,we);break;case 5:Kw(c);default:xN(g,c),c=ge=Eg(c,Vs),c=_N(g,c,Vs)}u.memoizedProps=u.pendingProps,c===null?W1(u):ge=c}function ud(u,c,g,v){Ia=fa=null,Kw(c),Jh=null,zg=0;var E=c.return;try{if(JY(u,E,c,g,we)){yn=1,U1(u,Gi(g,u.current)),ge=null;return}}catch(A){if(E!==null)throw ge=E,A;yn=1,U1(u,Gi(g,u.current)),ge=null;return}c.flags&32768?(te||v===1?u=!0:id||(we&536870912)!==0?u=!1:(vl=u=!0,(v===2||v===9||v===3||v===6)&&(v=ha.current,v!==null&&v.tag===13&&(v.flags|=16384))),XN(c,u)):W1(c)}function W1(u){var c=u;do{if((c.flags&32768)!==0){XN(c,vl);return}u=c.return;var g=eX(c.alternate,c,Vs);if(g!==null){ge=g;return}if(c=c.sibling,c!==null){ge=c;return}ge=c=u}while(c!==null);yn===0&&(yn=5)}function XN(u,c){do{var g=nX(u.alternate,u);if(g!==null){g.flags&=32767,ge=g;return}if(g=u.return,g!==null&&(g.flags|=32768,g.subtreeFlags=0,g.deletions=null),!c&&(u=u.sibling,u!==null)){ge=u;return}ge=u=g}while(u!==null);yn=6,ge=null}function WN(u,c,g,v,E,A,R,P,Z){u.cancelPendingCommit=null;do V1();while(ci!==0);if((Le&6)!==0)throw Error(i(327));if(c!==null){if(c===u.current)throw Error(i(177));if(A=c.lanes|c.childLanes,A|=Fr,_w(u,g,A,R,P,Z),u===Qe&&(ge=Qe=null,we=0),ad=c,xl=u,od=g,DE=A,RE=E,BN=v,(c.subtreeFlags&10256)!==0||(c.flags&10256)!==0?(u.callbackNode=null,u.callbackPriority=0,pX(zu,function(){return tL(),null})):(u.callbackNode=null,u.callbackPriority=0),v=(c.flags&13878)!==0,(c.subtreeFlags&13878)!==0||v){v=U.T,U.T=null,E=X.p,X.p=2,R=Le,Le|=4;try{iX(u,c,g)}finally{Le=R,X.p=E,U.T=v}}ci=1,VN(),QN(),KN()}}function VN(){if(ci===1){ci=0;var u=xl,c=ad,g=(c.flags&13878)!==0;if((c.subtreeFlags&13878)!==0||g){g=U.T,U.T=null;var v=X.p;X.p=2;var E=Le;Le|=4;try{DN(c,u);var A=WE,R=qc(u.containerInfo),P=A.focusedElem,Z=A.selectionRange;if(R!==P&&P&&P.ownerDocument&&Bh(P.ownerDocument.documentElement,P)){if(Z!==null&&jc(P)){var rt=Z.start,pt=Z.end;if(pt===void 0&&(pt=rt),"selectionStart"in P)P.selectionStart=rt,P.selectionEnd=Math.min(pt,P.value.length);else{var vt=P.ownerDocument||document,at=vt&&vt.defaultView||window;if(at.getSelection){var st=at.getSelection(),Kt=P.textContent.length,Wt=Math.min(Z.start,Kt),qe=Z.end===void 0?Wt:Math.min(Z.end,Kt);!st.extend&&Wt>qe&&(R=qe,qe=Wt,Wt=R);var K=xg(P,Wt),Q=xg(P,qe);if(K&&Q&&(st.rangeCount!==1||st.anchorNode!==K.node||st.anchorOffset!==K.offset||st.focusNode!==Q.node||st.focusOffset!==Q.offset)){var it=vt.createRange();it.setStart(K.node,K.offset),st.removeAllRanges(),Wt>qe?(st.addRange(it),st.extend(Q.node,Q.offset)):(it.setEnd(Q.node,Q.offset),st.addRange(it))}}}}for(vt=[],st=P;st=st.parentNode;)st.nodeType===1&&vt.push({element:st,left:st.scrollLeft,top:st.scrollTop});for(typeof P.focus=="function"&&P.focus(),P=0;P<vt.length;P++){var mt=vt[P];mt.element.scrollLeft=mt.left,mt.element.scrollTop=mt.top}}uv=!!XE,WE=XE=null}finally{Le=E,X.p=v,U.T=g}}u.current=c,ci=2}}function QN(){if(ci===2){ci=0;var u=xl,c=ad,g=(c.flags&8772)!==0;if((c.subtreeFlags&8772)!==0||g){g=U.T,U.T=null;var v=X.p;X.p=2;var E=Le;Le|=4;try{MN(u,c.alternate,c)}finally{Le=E,X.p=v,U.T=g}}ci=3}}function KN(){if(ci===4||ci===3){ci=0,wn();var u=xl,c=ad,g=od,v=BN;(c.subtreeFlags&10256)!==0||(c.flags&10256)!==0?ci=5:(ci=0,ad=xl=null,JN(u,u.pendingLanes));var E=u.pendingLanes;if(E===0&&(bl=null),ag(g),c=c.stateNode,xi&&typeof xi.onCommitFiberRoot=="function")try{xi.onCommitFiberRoot(Es,c,void 0,(c.current.flags&128)===128)}catch{}if(v!==null){c=U.T,E=X.p,X.p=2,U.T=null;try{for(var A=u.onRecoverableError,R=0;R<v.length;R++){var P=v[R];A(P.value,{componentStack:P.stack})}}finally{U.T=c,X.p=E}}(od&3)!==0&&V1(),Lo(u),E=u.pendingLanes,(g&4194090)!==0&&(E&42)!==0?u===NE?Gg++:(Gg=0,NE=u):Gg=0,Zg(0)}}function JN(u,c){(u.pooledCacheLanes&=c)===0&&(c=u.pooledCache,c!=null&&(u.pooledCache=null,Ag(c)))}function V1(u){return VN(),QN(),KN(),tL()}function tL(){if(ci!==5)return!1;var u=xl,c=DE;DE=0;var g=ag(od),v=U.T,E=X.p;try{X.p=32>g?32:g,U.T=null,g=RE,RE=null;var A=xl,R=od;if(ci=0,ad=xl=null,od=0,(Le&6)!==0)throw Error(i(331));var P=Le;if(Le|=4,FN(A.current),NN(A,A.current,R,g),Le=P,Zg(0,!1),xi&&typeof xi.onPostCommitFiberRoot=="function")try{xi.onPostCommitFiberRoot(Es,A)}catch{}return!0}finally{X.p=E,U.T=v,JN(u,c)}}function eL(u,c,g){c=Gi(g,c),c=hE(u.stateNode,c,2),u=fl(u,c,2),u!==null&&(Pu(u,2),Lo(u))}function Ge(u,c,g){if(u.tag===3)eL(u,u,g);else for(;c!==null;){if(c.tag===3){eL(c,u,g);break}else if(c.tag===1){var v=c.stateNode;if(typeof c.type.getDerivedStateFromError=="function"||typeof v.componentDidCatch=="function"&&(bl===null||!bl.has(v))){u=Gi(g,u),g=aN(2),v=fl(c,g,2),v!==null&&(oN(g,v,c,u),Pu(v,2),Lo(v));break}}c=c.return}}function PE(u,c,g){var v=u.pingCache;if(v===null){v=u.pingCache=new oX;var E=new Set;v.set(c,E)}else E=v.get(c),E===void 0&&(E=new Set,v.set(c,E));E.has(g)||(ME=!0,E.add(g),u=fX.bind(null,u,c,g),c.then(u,u))}function fX(u,c,g){var v=u.pingCache;v!==null&&v.delete(c),u.pingedLanes|=u.suspendedLanes&g,u.warmLanes&=~g,Qe===u&&(we&g)===g&&(yn===4||yn===3&&(we&62914560)===we&&300>nn()-$E?(Le&2)===0&&sd(u,0):kE|=g,rd===we&&(rd=0)),Lo(u)}function nL(u,c){c===0&&(c=ig()),u=al(u,c),u!==null&&(Pu(u,c),Lo(u))}function hX(u){var c=u.memoizedState,g=0;c!==null&&(g=c.retryLane),nL(u,g)}function dX(u,c){var g=0;switch(u.tag){case 13:var v=u.stateNode,E=u.memoizedState;E!==null&&(g=E.retryLane);break;case 19:v=u.stateNode;break;case 22:v=u.stateNode._retryCache;break;default:throw Error(i(314))}v!==null&&v.delete(c),nL(u,g)}function pX(u,c){return Je(u,c)}var Q1=null,ld=null,BE=!1,K1=!1,UE=!1,af=0;function Lo(u){u!==ld&&u.next===null&&(ld===null?Q1=ld=u:ld=ld.next=u),K1=!0,BE||(BE=!0,mX())}function Zg(u,c){if(!UE&&K1){UE=!0;do for(var g=!1,v=Q1;v!==null;){if(u!==0){var E=v.pendingLanes;if(E===0)var A=0;else{var R=v.suspendedLanes,P=v.pingedLanes;A=(1<<31-Ii(42|u)+1)-1,A&=E&~(R&~P),A=A&201326741?A&201326741|1:A?A|2:0}A!==0&&(g=!0,oL(v,A))}else A=we,A=Ah(v,v===Qe?A:0,v.cancelPendingCommit!==null||v.timeoutHandle!==-1),(A&3)===0||za(v,A)||(g=!0,oL(v,A));v=v.next}while(g);UE=!1}}function gX(){iL()}function iL(){K1=BE=!1;var u=0;af!==0&&(SX()&&(u=af),af=0);for(var c=nn(),g=null,v=Q1;v!==null;){var E=v.next,A=rL(v,c);A===0?(v.next=null,g===null?Q1=E:g.next=E,E===null&&(ld=g)):(g=v,(u!==0||(A&3)!==0)&&(K1=!0)),v=E}Zg(u)}function rL(u,c){for(var g=u.suspendedLanes,v=u.pingedLanes,E=u.expirationTimes,A=u.pendingLanes&-62914561;0<A;){var R=31-Ii(A),P=1<<R,Z=E[R];Z===-1?((P&g)===0||(P&v)!==0)&&(E[R]=vw(P,c)):Z<=c&&(u.expiredLanes|=P),A&=~P}if(c=Qe,g=we,g=Ah(u,u===c?g:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),v=u.callbackNode,g===0||u===c&&(ze===2||ze===9)||u.cancelPendingCommit!==null)return v!==null&&v!==null&&ve(v),u.callbackNode=null,u.callbackPriority=0;if((g&3)===0||za(u,g)){if(c=g&-g,c===u.callbackPriority)return c;switch(v!==null&&ve(v),ag(g)){case 2:case 8:g=eg;break;case 32:g=zu;break;case 268435456:g=ng;break;default:g=zu}return v=aL.bind(null,u),g=Je(g,v),u.callbackPriority=c,u.callbackNode=g,c}return v!==null&&v!==null&&ve(v),u.callbackPriority=2,u.callbackNode=null,2}function aL(u,c){if(ci!==0&&ci!==5)return u.callbackNode=null,u.callbackPriority=0,null;var g=u.callbackNode;if(V1()&&u.callbackNode!==g)return null;var v=we;return v=Ah(u,u===Qe?v:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),v===0?null:(IN(u,v,c),rL(u,nn()),u.callbackNode!=null&&u.callbackNode===g?aL.bind(null,u):null)}function oL(u,c){if(V1())return null;IN(u,c,!0)}function mX(){TX(function(){(Le&6)!==0?Je(Iy,gX):iL()})}function IE(){return af===0&&(af=Gy()),af}function sL(u){return u==null||typeof u=="symbol"||typeof u=="boolean"?null:typeof u=="function"?u:Zu(""+u)}function uL(u,c){var g=c.ownerDocument.createElement("input");return g.name=c.name,g.value=c.value,u.id&&g.setAttribute("form",u.id),c.parentNode.insertBefore(g,c),u=new FormData(u),g.parentNode.removeChild(g),u}function yX(u,c,g,v,E){if(c==="submit"&&g&&g.stateNode===E){var A=sL((E[wi]||null).action),R=v.submitter;R&&(c=(c=R[wi]||null)?sL(c.formAction):R.getAttribute("formAction"),c!==null&&(A=c,R=null));var P=new Fc("action","action",null,v,E);u.push({event:P,listeners:[{instance:null,listener:function(){if(v.defaultPrevented){if(af!==0){var Z=R?uL(E,R):new FormData(E);sE(g,{pending:!0,data:Z,method:E.method,action:A},null,Z)}}else typeof A=="function"&&(P.preventDefault(),Z=R?uL(E,R):new FormData(E),sE(g,{pending:!0,data:Z,method:E.method,action:A},A,Z))},currentTarget:E}]})}}for(var qE=0;qE<Bs.length;qE++){var jE=Bs[qE],vX=jE.toLowerCase(),_X=jE[0].toUpperCase()+jE.slice(1);zr(vX,"on"+_X)}zr(m1,"onAnimationEnd"),zr(Lr,"onAnimationIteration"),zr(Hc,"onAnimationStart"),zr("dblclick","onDoubleClick"),zr("focusin","onFocus"),zr("focusout","onBlur"),zr(zw,"onTransitionRun"),zr(jh,"onTransitionStart"),zr(Fw,"onTransitionCancel"),zr(wg,"onTransitionEnd"),Cs("onMouseEnter",["mouseout","mouseover"]),Cs("onMouseLeave",["mouseout","mouseover"]),Cs("onPointerEnter",["pointerout","pointerover"]),Cs("onPointerLeave",["pointerout","pointerover"]),Ts("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ts("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ts("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ts("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ts("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ts("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Yg="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),bX=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Yg));function lL(u,c){c=(c&4)!==0;for(var g=0;g<u.length;g++){var v=u[g],E=v.event;v=v.listeners;t:{var A=void 0;if(c)for(var R=v.length-1;0<=R;R--){var P=v[R],Z=P.instance,rt=P.currentTarget;if(P=P.listener,Z!==A&&E.isPropagationStopped())break t;A=P,E.currentTarget=rt;try{A(E)}catch(pt){B1(pt)}E.currentTarget=null,A=Z}else for(R=0;R<v.length;R++){if(P=v[R],Z=P.instance,rt=P.currentTarget,P=P.listener,Z!==A&&E.isPropagationStopped())break t;A=P,E.currentTarget=rt;try{A(E)}catch(pt){B1(pt)}E.currentTarget=null,A=Z}}}}function me(u,c){var g=c[fr];g===void 0&&(g=c[fr]=new Set);var v=u+"__bubble";g.has(v)||(cL(c,u,2,!1),g.add(v))}function HE(u,c,g){var v=0;c&&(v|=4),cL(g,u,v,c)}var J1="_reactListening"+Math.random().toString(36).slice(2);function GE(u){if(!u[J1]){u[J1]=!0,Vy.forEach(function(g){g!=="selectionchange"&&(bX.has(g)||HE(g,!1,u),HE(g,!0,u))});var c=u.nodeType===9?u:u.ownerDocument;c===null||c[J1]||(c[J1]=!0,HE("selectionchange",!1,c))}}function cL(u,c,g,v){switch(NL(c)){case 2:var E=YX;break;case 8:E=XX;break;default:E=aS}g=E.bind(null,c,g,u),E=void 0,!zc||c!=="touchstart"&&c!=="touchmove"&&c!=="wheel"||(E=!0),v?E!==void 0?u.addEventListener(c,g,{capture:!0,passive:E}):u.addEventListener(c,g,!0):E!==void 0?u.addEventListener(c,g,{passive:E}):u.addEventListener(c,g,!1)}function ZE(u,c,g,v,E){var A=v;if((c&1)===0&&(c&2)===0&&v!==null)t:for(;;){if(v===null)return;var R=v.tag;if(R===3||R===4){var P=v.stateNode.containerInfo;if(P===E)break;if(R===4)for(R=v.return;R!==null;){var Z=R.tag;if((Z===3||Z===4)&&R.stateNode.containerInfo===E)return;R=R.return}for(;P!==null;){if(R=So(P),R===null)return;if(Z=R.tag,Z===5||Z===6||Z===26||Z===27){v=A=R;continue t}P=P.parentNode}}v=v.return}$r(function(){var rt=A,pt=Yu(g),vt=[];t:{var at=y1.get(u);if(at!==void 0){var st=Fc,Kt=u;switch(u){case"keypress":if(mn(g)===0)break t;case"keydown":case"keyup":st=Mw;break;case"focusin":Kt="focus",st=hg;break;case"focusout":Kt="blur",st=hg;break;case"beforeblur":case"afterblur":st=hg;break;case"click":if(g.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":st=Vu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":st=Ew;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":st=Ow;break;case m1:case Lr:case Hc:st=Sw;break;case wg:st=$w;break;case"scroll":case"scrollend":st=ww;break;case"wheel":st=s1;break;case"copy":case"cut":case"paste":st=dg;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":st=gg;break;case"toggle":case"beforetoggle":st=Ls}var Wt=(c&4)!==0,qe=!Wt&&(u==="scroll"||u==="scrollend"),K=Wt?at!==null?at+"Capture":null:at;Wt=[];for(var Q=rt,it;Q!==null;){var mt=Q;if(it=mt.stateNode,mt=mt.tag,mt!==5&&mt!==26&&mt!==27||it===null||K===null||(mt=Se(Q,K),mt!=null&&Wt.push(Xg(Q,mt,it))),qe)break;Q=Q.return}0<Wt.length&&(at=new st(at,Kt,null,g,pt),vt.push({event:at,listeners:Wt}))}}if((c&7)===0){t:{if(at=u==="mouseover"||u==="pointerover",st=u==="mouseout"||u==="pointerout",at&&g!==Lc&&(Kt=g.relatedTarget||g.fromElement)&&(So(Kt)||Kt[Bu]))break t;if((st||at)&&(at=pt.window===pt?pt:(at=pt.ownerDocument)?at.defaultView||at.parentWindow:window,st?(Kt=g.relatedTarget||g.toElement,st=rt,Kt=Kt?So(Kt):null,Kt!==null&&(qe=a(Kt),Wt=Kt.tag,Kt!==qe||Wt!==5&&Wt!==27&&Wt!==6)&&(Kt=null)):(st=null,Kt=rt),st!==Kt)){if(Wt=Vu,mt="onMouseLeave",K="onMouseEnter",Q="mouse",(u==="pointerout"||u==="pointerover")&&(Wt=gg,mt="onPointerLeave",K="onPointerEnter",Q="pointer"),qe=st==null?at:ra(st),it=Kt==null?at:ra(Kt),at=new Wt(mt,Q+"leave",st,g,pt),at.target=qe,at.relatedTarget=it,mt=null,So(pt)===rt&&(Wt=new Wt(K,Q+"enter",Kt,g,pt),Wt.target=it,Wt.relatedTarget=qe,mt=Wt),qe=mt,st&&Kt)e:{for(Wt=st,K=Kt,Q=0,it=Wt;it;it=cd(it))Q++;for(it=0,mt=K;mt;mt=cd(mt))it++;for(;0<Q-it;)Wt=cd(Wt),Q--;for(;0<it-Q;)K=cd(K),it--;for(;Q--;){if(Wt===K||K!==null&&Wt===K.alternate)break e;Wt=cd(Wt),K=cd(K)}Wt=null}else Wt=null;st!==null&&fL(vt,at,st,Wt,!1),Kt!==null&&qe!==null&&fL(vt,qe,Kt,Wt,!0)}}t:{if(at=rt?ra(rt):window,st=at.nodeName&&at.nodeName.toLowerCase(),st==="select"||st==="input"&&at.type==="file")var Pt=Ju;else if(Fs(at))if(vg)Pt=Lw;else{Pt=Nw;var he=bg}else st=at.nodeName,!st||st.toLowerCase()!=="input"||at.type!=="checkbox"&&at.type!=="radio"?rt&&Nc(rt.elementType)&&(Pt=Ju):Pt=Ua;if(Pt&&(Pt=Pt(u,rt))){h1(vt,Pt,g,pt);break t}he&&he(u,at,rt),u==="focusout"&&rt&&at.type==="number"&&rt.memoizedProps.value!=null&&Hu(at,"number",at.value)}switch(he=rt?ra(rt):window,u){case"focusin":(Fs(he)||he.contentEditable==="true")&&(Nr=he,nl=rt,Ps=null);break;case"focusout":Ps=nl=Nr=null;break;case"mousedown":Ih=!0;break;case"contextmenu":case"mouseup":case"dragend":Ih=!1,p1(vt,g,pt);break;case"selectionchange":if(Uh)break;case"keydown":case"keyup":p1(vt,g,pt)}var jt;if(zs)t:{switch(u){case"compositionstart":var Vt="onCompositionStart";break t;case"compositionend":Vt="onCompositionEnd";break t;case"compositionupdate":Vt="onCompositionUpdate";break t}Vt=void 0}else Qu?Fh(u,g)&&(Vt="onCompositionEnd"):u==="keydown"&&g.keyCode===229&&(Vt="onCompositionStart");Vt&&(yg&&g.locale!=="ko"&&(Qu||Vt!=="onCompositionStart"?Vt==="onCompositionEnd"&&Qu&&(jt=Wu()):(sa=pt,Pa="value"in sa?sa.value:sa.textContent,Qu=!0)),he=tv(rt,Vt),0<he.length&&(Vt=new Dr(Vt,u,null,g,pt),vt.push({event:Vt,listeners:he}),jt?Vt.data=jt:(jt=c1(g),jt!==null&&(Vt.data=jt)))),(jt=u1?f1(u,g):Rw(u,g))&&(Vt=tv(rt,"onBeforeInput"),0<Vt.length&&(he=new Dr("onBeforeInput","beforeinput",null,g,pt),vt.push({event:he,listeners:Vt}),he.data=jt)),yX(vt,u,rt,g,pt)}lL(vt,c)})}function Xg(u,c,g){return{instance:u,listener:c,currentTarget:g}}function tv(u,c){for(var g=c+"Capture",v=[];u!==null;){var E=u,A=E.stateNode;if(E=E.tag,E!==5&&E!==26&&E!==27||A===null||(E=Se(u,g),E!=null&&v.unshift(Xg(u,E,A)),E=Se(u,c),E!=null&&v.push(Xg(u,E,A))),u.tag===3)return v;u=u.return}return[]}function cd(u){if(u===null)return null;do u=u.return;while(u&&u.tag!==5&&u.tag!==27);return u||null}function fL(u,c,g,v,E){for(var A=c._reactName,R=[];g!==null&&g!==v;){var P=g,Z=P.alternate,rt=P.stateNode;if(P=P.tag,Z!==null&&Z===v)break;P!==5&&P!==26&&P!==27||rt===null||(Z=rt,E?(rt=Se(g,A),rt!=null&&R.unshift(Xg(g,rt,Z))):E||(rt=Se(g,A),rt!=null&&R.push(Xg(g,rt,Z)))),g=g.return}R.length!==0&&u.push({event:c,listeners:R})}var xX=/\r\n?/g,wX=/\u0000|\uFFFD/g;function hL(u){return(typeof u=="string"?u:""+u).replace(xX,`
`).replace(wX,"")}function dL(u,c){return c=hL(c),hL(u)===c}function ev(){}function Ie(u,c,g,v,E,A){switch(g){case"children":typeof v=="string"?c==="body"||c==="textarea"&&v===""||aa(u,v):(typeof v=="number"||typeof v=="bigint")&&c!=="body"&&aa(u,""+v);break;case"className":kh(u,"class",v);break;case"tabIndex":kh(u,"tabindex",v);break;case"dir":case"role":case"viewBox":case"width":case"height":kh(u,g,v);break;case"style":Gu(u,v,A);break;case"data":if(c!=="object"){kh(u,"data",v);break}case"src":case"href":if(v===""&&(c!=="a"||g!=="href")){u.removeAttribute(g);break}if(v==null||typeof v=="function"||typeof v=="symbol"||typeof v=="boolean"){u.removeAttribute(g);break}v=Zu(""+v),u.setAttribute(g,v);break;case"action":case"formAction":if(typeof v=="function"){u.setAttribute(g,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof A=="function"&&(g==="formAction"?(c!=="input"&&Ie(u,c,"name",E.name,E,null),Ie(u,c,"formEncType",E.formEncType,E,null),Ie(u,c,"formMethod",E.formMethod,E,null),Ie(u,c,"formTarget",E.formTarget,E,null)):(Ie(u,c,"encType",E.encType,E,null),Ie(u,c,"method",E.method,E,null),Ie(u,c,"target",E.target,E,null)));if(v==null||typeof v=="symbol"||typeof v=="boolean"){u.removeAttribute(g);break}v=Zu(""+v),u.setAttribute(g,v);break;case"onClick":v!=null&&(u.onclick=ev);break;case"onScroll":v!=null&&me("scroll",u);break;case"onScrollEnd":v!=null&&me("scrollend",u);break;case"dangerouslySetInnerHTML":if(v!=null){if(typeof v!="object"||!("__html"in v))throw Error(i(61));if(g=v.__html,g!=null){if(E.children!=null)throw Error(i(60));u.innerHTML=g}}break;case"multiple":u.multiple=v&&typeof v!="function"&&typeof v!="symbol";break;case"muted":u.muted=v&&typeof v!="function"&&typeof v!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(v==null||typeof v=="function"||typeof v=="boolean"||typeof v=="symbol"){u.removeAttribute("xlink:href");break}g=Zu(""+v),u.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",g);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":v!=null&&typeof v!="function"&&typeof v!="symbol"?u.setAttribute(g,""+v):u.removeAttribute(g);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":v&&typeof v!="function"&&typeof v!="symbol"?u.setAttribute(g,""):u.removeAttribute(g);break;case"capture":case"download":v===!0?u.setAttribute(g,""):v!==!1&&v!=null&&typeof v!="function"&&typeof v!="symbol"?u.setAttribute(g,v):u.removeAttribute(g);break;case"cols":case"rows":case"size":case"span":v!=null&&typeof v!="function"&&typeof v!="symbol"&&!isNaN(v)&&1<=v?u.setAttribute(g,v):u.removeAttribute(g);break;case"rowSpan":case"start":v==null||typeof v=="function"||typeof v=="symbol"||isNaN(v)?u.removeAttribute(g):u.setAttribute(g,v);break;case"popover":me("beforetoggle",u),me("toggle",u),Mh(u,"popover",v);break;case"xlinkActuate":Fa(u,"http://www.w3.org/1999/xlink","xlink:actuate",v);break;case"xlinkArcrole":Fa(u,"http://www.w3.org/1999/xlink","xlink:arcrole",v);break;case"xlinkRole":Fa(u,"http://www.w3.org/1999/xlink","xlink:role",v);break;case"xlinkShow":Fa(u,"http://www.w3.org/1999/xlink","xlink:show",v);break;case"xlinkTitle":Fa(u,"http://www.w3.org/1999/xlink","xlink:title",v);break;case"xlinkType":Fa(u,"http://www.w3.org/1999/xlink","xlink:type",v);break;case"xmlBase":Fa(u,"http://www.w3.org/XML/1998/namespace","xml:base",v);break;case"xmlLang":Fa(u,"http://www.w3.org/XML/1998/namespace","xml:lang",v);break;case"xmlSpace":Fa(u,"http://www.w3.org/XML/1998/namespace","xml:space",v);break;case"is":Mh(u,"is",v);break;case"innerText":case"textContent":break;default:(!(2<g.length)||g[0]!=="o"&&g[0]!=="O"||g[1]!=="n"&&g[1]!=="N")&&(g=lg.get(g)||g,Mh(u,g,v))}}function YE(u,c,g,v,E,A){switch(g){case"style":Gu(u,v,A);break;case"dangerouslySetInnerHTML":if(v!=null){if(typeof v!="object"||!("__html"in v))throw Error(i(61));if(g=v.__html,g!=null){if(E.children!=null)throw Error(i(60));u.innerHTML=g}}break;case"children":typeof v=="string"?aa(u,v):(typeof v=="number"||typeof v=="bigint")&&aa(u,""+v);break;case"onScroll":v!=null&&me("scroll",u);break;case"onScrollEnd":v!=null&&me("scrollend",u);break;case"onClick":v!=null&&(u.onclick=ev);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Qy.hasOwnProperty(g))t:{if(g[0]==="o"&&g[1]==="n"&&(E=g.endsWith("Capture"),c=g.slice(2,E?g.length-7:void 0),A=u[wi]||null,A=A!=null?A[g]:null,typeof A=="function"&&u.removeEventListener(c,A,E),typeof v=="function")){typeof A!="function"&&A!==null&&(g in u?u[g]=null:u.hasAttribute(g)&&u.removeAttribute(g)),u.addEventListener(c,v,E);break t}g in u?u[g]=v:v===!0?u.setAttribute(g,""):Mh(u,g,v)}}}function fi(u,c,g){switch(c){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":me("error",u),me("load",u);var v=!1,E=!1,A;for(A in g)if(g.hasOwnProperty(A)){var R=g[A];if(R!=null)switch(A){case"src":v=!0;break;case"srcSet":E=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,c));default:Ie(u,c,A,R,g,null)}}E&&Ie(u,c,"srcSet",g.srcSet,g,null),v&&Ie(u,c,"src",g.src,g,null);return;case"input":me("invalid",u);var P=A=R=E=null,Z=null,rt=null;for(v in g)if(g.hasOwnProperty(v)){var pt=g[v];if(pt!=null)switch(v){case"name":E=pt;break;case"type":R=pt;break;case"checked":Z=pt;break;case"defaultChecked":rt=pt;break;case"value":A=pt;break;case"defaultValue":P=pt;break;case"children":case"dangerouslySetInnerHTML":if(pt!=null)throw Error(i(137,c));break;default:Ie(u,c,v,pt,g,null)}}Jy(u,A,P,Z,rt,R,E,!1),ju(u);return;case"select":me("invalid",u),v=R=A=null;for(E in g)if(g.hasOwnProperty(E)&&(P=g[E],P!=null))switch(E){case"value":A=P;break;case"defaultValue":R=P;break;case"multiple":v=P;default:Ie(u,c,E,P,g,null)}c=A,g=R,u.multiple=!!v,c!=null?hr(u,!!v,c,!1):g!=null&&hr(u,!!v,g,!0);return;case"textarea":me("invalid",u),A=E=v=null;for(R in g)if(g.hasOwnProperty(R)&&(P=g[R],P!=null))switch(R){case"value":v=P;break;case"defaultValue":E=P;break;case"children":A=P;break;case"dangerouslySetInnerHTML":if(P!=null)throw Error(i(91));break;default:Ie(u,c,R,P,g,null)}Ao(u,v,E,A),ju(u);return;case"option":for(Z in g)if(g.hasOwnProperty(Z)&&(v=g[Z],v!=null))switch(Z){case"selected":u.selected=v&&typeof v!="function"&&typeof v!="symbol";break;default:Ie(u,c,Z,v,g,null)}return;case"dialog":me("beforetoggle",u),me("toggle",u),me("cancel",u),me("close",u);break;case"iframe":case"object":me("load",u);break;case"video":case"audio":for(v=0;v<Yg.length;v++)me(Yg[v],u);break;case"image":me("error",u),me("load",u);break;case"details":me("toggle",u);break;case"embed":case"source":case"link":me("error",u),me("load",u);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(rt in g)if(g.hasOwnProperty(rt)&&(v=g[rt],v!=null))switch(rt){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,c));default:Ie(u,c,rt,v,g,null)}return;default:if(Nc(c)){for(pt in g)g.hasOwnProperty(pt)&&(v=g[pt],v!==void 0&&YE(u,c,pt,v,g,void 0));return}}for(P in g)g.hasOwnProperty(P)&&(v=g[P],v!=null&&Ie(u,c,P,v,g,null))}function EX(u,c,g,v){switch(c){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var E=null,A=null,R=null,P=null,Z=null,rt=null,pt=null;for(st in g){var vt=g[st];if(g.hasOwnProperty(st)&&vt!=null)switch(st){case"checked":break;case"value":break;case"defaultValue":Z=vt;default:v.hasOwnProperty(st)||Ie(u,c,st,null,v,vt)}}for(var at in v){var st=v[at];if(vt=g[at],v.hasOwnProperty(at)&&(st!=null||vt!=null))switch(at){case"type":A=st;break;case"name":E=st;break;case"checked":rt=st;break;case"defaultChecked":pt=st;break;case"value":R=st;break;case"defaultValue":P=st;break;case"children":case"dangerouslySetInnerHTML":if(st!=null)throw Error(i(137,c));break;default:st!==vt&&Ie(u,c,at,st,v,vt)}}Ei(u,R,P,Z,rt,pt,A,E);return;case"select":st=R=P=at=null;for(A in g)if(Z=g[A],g.hasOwnProperty(A)&&Z!=null)switch(A){case"value":break;case"multiple":st=Z;default:v.hasOwnProperty(A)||Ie(u,c,A,null,v,Z)}for(E in v)if(A=v[E],Z=g[E],v.hasOwnProperty(E)&&(A!=null||Z!=null))switch(E){case"value":at=A;break;case"defaultValue":P=A;break;case"multiple":R=A;default:A!==Z&&Ie(u,c,E,A,v,Z)}c=P,g=R,v=st,at!=null?hr(u,!!g,at,!1):!!v!=!!g&&(c!=null?hr(u,!!g,c,!0):hr(u,!!g,g?[]:"",!1));return;case"textarea":st=at=null;for(P in g)if(E=g[P],g.hasOwnProperty(P)&&E!=null&&!v.hasOwnProperty(P))switch(P){case"value":break;case"children":break;default:Ie(u,c,P,null,v,E)}for(R in v)if(E=v[R],A=g[R],v.hasOwnProperty(R)&&(E!=null||A!=null))switch(R){case"value":at=E;break;case"defaultValue":st=E;break;case"children":break;case"dangerouslySetInnerHTML":if(E!=null)throw Error(i(91));break;default:E!==A&&Ie(u,c,R,E,v,A)}cn(u,at,st);return;case"option":for(var Kt in g)if(at=g[Kt],g.hasOwnProperty(Kt)&&at!=null&&!v.hasOwnProperty(Kt))switch(Kt){case"selected":u.selected=!1;break;default:Ie(u,c,Kt,null,v,at)}for(Z in v)if(at=v[Z],st=g[Z],v.hasOwnProperty(Z)&&at!==st&&(at!=null||st!=null))switch(Z){case"selected":u.selected=at&&typeof at!="function"&&typeof at!="symbol";break;default:Ie(u,c,Z,at,v,st)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Wt in g)at=g[Wt],g.hasOwnProperty(Wt)&&at!=null&&!v.hasOwnProperty(Wt)&&Ie(u,c,Wt,null,v,at);for(rt in v)if(at=v[rt],st=g[rt],v.hasOwnProperty(rt)&&at!==st&&(at!=null||st!=null))switch(rt){case"children":case"dangerouslySetInnerHTML":if(at!=null)throw Error(i(137,c));break;default:Ie(u,c,rt,at,v,st)}return;default:if(Nc(c)){for(var qe in g)at=g[qe],g.hasOwnProperty(qe)&&at!==void 0&&!v.hasOwnProperty(qe)&&YE(u,c,qe,void 0,v,at);for(pt in v)at=v[pt],st=g[pt],!v.hasOwnProperty(pt)||at===st||at===void 0&&st===void 0||YE(u,c,pt,at,v,st);return}}for(var K in g)at=g[K],g.hasOwnProperty(K)&&at!=null&&!v.hasOwnProperty(K)&&Ie(u,c,K,null,v,at);for(vt in v)at=v[vt],st=g[vt],!v.hasOwnProperty(vt)||at===st||at==null&&st==null||Ie(u,c,vt,at,v,st)}var XE=null,WE=null;function nv(u){return u.nodeType===9?u:u.ownerDocument}function pL(u){switch(u){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function gL(u,c){if(u===0)switch(c){case"svg":return 1;case"math":return 2;default:return 0}return u===1&&c==="foreignObject"?0:u}function VE(u,c){return u==="textarea"||u==="noscript"||typeof c.children=="string"||typeof c.children=="number"||typeof c.children=="bigint"||typeof c.dangerouslySetInnerHTML=="object"&&c.dangerouslySetInnerHTML!==null&&c.dangerouslySetInnerHTML.__html!=null}var QE=null;function SX(){var u=window.event;return u&&u.type==="popstate"?u===QE?!1:(QE=u,!0):(QE=null,!1)}var mL=typeof setTimeout=="function"?setTimeout:void 0,AX=typeof clearTimeout=="function"?clearTimeout:void 0,yL=typeof Promise=="function"?Promise:void 0,TX=typeof queueMicrotask=="function"?queueMicrotask:typeof yL<"u"?function(u){return yL.resolve(null).then(u).catch(CX)}:mL;function CX(u){setTimeout(function(){throw u})}function El(u){return u==="head"}function vL(u,c){var g=c,v=0,E=0;do{var A=g.nextSibling;if(u.removeChild(g),A&&A.nodeType===8)if(g=A.data,g==="/$"){if(0<v&&8>v){g=v;var R=u.ownerDocument;if(g&1&&Wg(R.documentElement),g&2&&Wg(R.body),g&4)for(g=R.head,Wg(g),R=g.firstChild;R;){var P=R.nextSibling,Z=R.nodeName;R[Uu]||Z==="SCRIPT"||Z==="STYLE"||Z==="LINK"&&R.rel.toLowerCase()==="stylesheet"||g.removeChild(R),R=P}}if(E===0){u.removeChild(A),im(c);return}E--}else g==="$"||g==="$?"||g==="$!"?E++:v=g.charCodeAt(0)-48;else v=0;g=A}while(g);im(c)}function KE(u){var c=u.firstChild;for(c&&c.nodeType===10&&(c=c.nextSibling);c;){var g=c;switch(c=c.nextSibling,g.nodeName){case"HTML":case"HEAD":case"BODY":KE(g),Ch(g);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(g.rel.toLowerCase()==="stylesheet")continue}u.removeChild(g)}}function MX(u,c,g,v){for(;u.nodeType===1;){var E=g;if(u.nodeName.toLowerCase()!==c.toLowerCase()){if(!v&&(u.nodeName!=="INPUT"||u.type!=="hidden"))break}else if(v){if(!u[Uu])switch(c){case"meta":if(!u.hasAttribute("itemprop"))break;return u;case"link":if(A=u.getAttribute("rel"),A==="stylesheet"&&u.hasAttribute("data-precedence"))break;if(A!==E.rel||u.getAttribute("href")!==(E.href==null||E.href===""?null:E.href)||u.getAttribute("crossorigin")!==(E.crossOrigin==null?null:E.crossOrigin)||u.getAttribute("title")!==(E.title==null?null:E.title))break;return u;case"style":if(u.hasAttribute("data-precedence"))break;return u;case"script":if(A=u.getAttribute("src"),(A!==(E.src==null?null:E.src)||u.getAttribute("type")!==(E.type==null?null:E.type)||u.getAttribute("crossorigin")!==(E.crossOrigin==null?null:E.crossOrigin))&&A&&u.hasAttribute("async")&&!u.hasAttribute("itemprop"))break;return u;default:return u}}else if(c==="input"&&u.type==="hidden"){var A=E.name==null?null:""+E.name;if(E.type==="hidden"&&u.getAttribute("name")===A)return u}else return u;if(u=Ha(u.nextSibling),u===null)break}return null}function kX(u,c,g){if(c==="")return null;for(;u.nodeType!==3;)if((u.nodeType!==1||u.nodeName!=="INPUT"||u.type!=="hidden")&&!g||(u=Ha(u.nextSibling),u===null))return null;return u}function JE(u){return u.data==="$!"||u.data==="$?"&&u.ownerDocument.readyState==="complete"}function OX(u,c){var g=u.ownerDocument;if(u.data!=="$?"||g.readyState==="complete")c();else{var v=function(){c(),g.removeEventListener("DOMContentLoaded",v)};g.addEventListener("DOMContentLoaded",v),u._reactRetry=v}}function Ha(u){for(;u!=null;u=u.nextSibling){var c=u.nodeType;if(c===1||c===3)break;if(c===8){if(c=u.data,c==="$"||c==="$!"||c==="$?"||c==="F!"||c==="F")break;if(c==="/$")return null}}return u}var tS=null;function _L(u){u=u.previousSibling;for(var c=0;u;){if(u.nodeType===8){var g=u.data;if(g==="$"||g==="$!"||g==="$?"){if(c===0)return u;c--}else g==="/$"&&c++}u=u.previousSibling}return null}function bL(u,c,g){switch(c=nv(g),u){case"html":if(u=c.documentElement,!u)throw Error(i(452));return u;case"head":if(u=c.head,!u)throw Error(i(453));return u;case"body":if(u=c.body,!u)throw Error(i(454));return u;default:throw Error(i(451))}}function Wg(u){for(var c=u.attributes;c.length;)u.removeAttributeNode(c[0]);Ch(u)}var pa=new Map,xL=new Set;function iv(u){return typeof u.getRootNode=="function"?u.getRootNode():u.nodeType===9?u:u.ownerDocument}var Qs=X.d;X.d={f:$X,r:DX,D:RX,C:NX,L:LX,m:zX,X:PX,S:FX,M:BX};function $X(){var u=Qs.f(),c=X1();return u||c}function DX(u){var c=Ss(u);c!==null&&c.tag===5&&c.type==="form"?IR(c):Qs.r(u)}var fd=typeof document>"u"?null:document;function wL(u,c,g){var v=fd;if(v&&typeof c=="string"&&c){var E=si(c);E='link[rel="'+u+'"][href="'+E+'"]',typeof g=="string"&&(E+='[crossorigin="'+g+'"]'),xL.has(E)||(xL.add(E),u={rel:u,crossOrigin:g,href:c},v.querySelector(E)===null&&(c=v.createElement("link"),fi(c,"link",u),kn(c),v.head.appendChild(c)))}}function RX(u){Qs.D(u),wL("dns-prefetch",u,null)}function NX(u,c){Qs.C(u,c),wL("preconnect",u,c)}function LX(u,c,g){Qs.L(u,c,g);var v=fd;if(v&&u&&c){var E='link[rel="preload"][as="'+si(c)+'"]';c==="image"&&g&&g.imageSrcSet?(E+='[imagesrcset="'+si(g.imageSrcSet)+'"]',typeof g.imageSizes=="string"&&(E+='[imagesizes="'+si(g.imageSizes)+'"]')):E+='[href="'+si(u)+'"]';var A=E;switch(c){case"style":A=hd(u);break;case"script":A=dd(u)}pa.has(A)||(u=d({rel:"preload",href:c==="image"&&g&&g.imageSrcSet?void 0:u,as:c},g),pa.set(A,u),v.querySelector(E)!==null||c==="style"&&v.querySelector(Vg(A))||c==="script"&&v.querySelector(Qg(A))||(c=v.createElement("link"),fi(c,"link",u),kn(c),v.head.appendChild(c)))}}function zX(u,c){Qs.m(u,c);var g=fd;if(g&&u){var v=c&&typeof c.as=="string"?c.as:"script",E='link[rel="modulepreload"][as="'+si(v)+'"][href="'+si(u)+'"]',A=E;switch(v){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":A=dd(u)}if(!pa.has(A)&&(u=d({rel:"modulepreload",href:u},c),pa.set(A,u),g.querySelector(E)===null)){switch(v){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(g.querySelector(Qg(A)))return}v=g.createElement("link"),fi(v,"link",u),kn(v),g.head.appendChild(v)}}}function FX(u,c,g){Qs.S(u,c,g);var v=fd;if(v&&u){var E=As(v).hoistableStyles,A=hd(u);c=c||"default";var R=E.get(A);if(!R){var P={loading:0,preload:null};if(R=v.querySelector(Vg(A)))P.loading=5;else{u=d({rel:"stylesheet",href:u,"data-precedence":c},g),(g=pa.get(A))&&eS(u,g);var Z=R=v.createElement("link");kn(Z),fi(Z,"link",u),Z._p=new Promise(function(rt,pt){Z.onload=rt,Z.onerror=pt}),Z.addEventListener("load",function(){P.loading|=1}),Z.addEventListener("error",function(){P.loading|=2}),P.loading|=4,rv(R,c,v)}R={type:"stylesheet",instance:R,count:1,state:P},E.set(A,R)}}}function PX(u,c){Qs.X(u,c);var g=fd;if(g&&u){var v=As(g).hoistableScripts,E=dd(u),A=v.get(E);A||(A=g.querySelector(Qg(E)),A||(u=d({src:u,async:!0},c),(c=pa.get(E))&&nS(u,c),A=g.createElement("script"),kn(A),fi(A,"link",u),g.head.appendChild(A)),A={type:"script",instance:A,count:1,state:null},v.set(E,A))}}function BX(u,c){Qs.M(u,c);var g=fd;if(g&&u){var v=As(g).hoistableScripts,E=dd(u),A=v.get(E);A||(A=g.querySelector(Qg(E)),A||(u=d({src:u,async:!0,type:"module"},c),(c=pa.get(E))&&nS(u,c),A=g.createElement("script"),kn(A),fi(A,"link",u),g.head.appendChild(A)),A={type:"script",instance:A,count:1,state:null},v.set(E,A))}}function EL(u,c,g,v){var E=(E=At.current)?iv(E):null;if(!E)throw Error(i(446));switch(u){case"meta":case"title":return null;case"style":return typeof g.precedence=="string"&&typeof g.href=="string"?(c=hd(g.href),g=As(E).hoistableStyles,v=g.get(c),v||(v={type:"style",instance:null,count:0,state:null},g.set(c,v)),v):{type:"void",instance:null,count:0,state:null};case"link":if(g.rel==="stylesheet"&&typeof g.href=="string"&&typeof g.precedence=="string"){u=hd(g.href);var A=As(E).hoistableStyles,R=A.get(u);if(R||(E=E.ownerDocument||E,R={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},A.set(u,R),(A=E.querySelector(Vg(u)))&&!A._p&&(R.instance=A,R.state.loading=5),pa.has(u)||(g={rel:"preload",as:"style",href:g.href,crossOrigin:g.crossOrigin,integrity:g.integrity,media:g.media,hrefLang:g.hrefLang,referrerPolicy:g.referrerPolicy},pa.set(u,g),A||UX(E,u,g,R.state))),c&&v===null)throw Error(i(528,""));return R}if(c&&v!==null)throw Error(i(529,""));return null;case"script":return c=g.async,g=g.src,typeof g=="string"&&c&&typeof c!="function"&&typeof c!="symbol"?(c=dd(g),g=As(E).hoistableScripts,v=g.get(c),v||(v={type:"script",instance:null,count:0,state:null},g.set(c,v)),v):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,u))}}function hd(u){return'href="'+si(u)+'"'}function Vg(u){return'link[rel="stylesheet"]['+u+"]"}function SL(u){return d({},u,{"data-precedence":u.precedence,precedence:null})}function UX(u,c,g,v){u.querySelector('link[rel="preload"][as="style"]['+c+"]")?v.loading=1:(c=u.createElement("link"),v.preload=c,c.addEventListener("load",function(){return v.loading|=1}),c.addEventListener("error",function(){return v.loading|=2}),fi(c,"link",g),kn(c),u.head.appendChild(c))}function dd(u){return'[src="'+si(u)+'"]'}function Qg(u){return"script[async]"+u}function AL(u,c,g){if(c.count++,c.instance===null)switch(c.type){case"style":var v=u.querySelector('style[data-href~="'+si(g.href)+'"]');if(v)return c.instance=v,kn(v),v;var E=d({},g,{"data-href":g.href,"data-precedence":g.precedence,href:null,precedence:null});return v=(u.ownerDocument||u).createElement("style"),kn(v),fi(v,"style",E),rv(v,g.precedence,u),c.instance=v;case"stylesheet":E=hd(g.href);var A=u.querySelector(Vg(E));if(A)return c.state.loading|=4,c.instance=A,kn(A),A;v=SL(g),(E=pa.get(E))&&eS(v,E),A=(u.ownerDocument||u).createElement("link"),kn(A);var R=A;return R._p=new Promise(function(P,Z){R.onload=P,R.onerror=Z}),fi(A,"link",v),c.state.loading|=4,rv(A,g.precedence,u),c.instance=A;case"script":return A=dd(g.src),(E=u.querySelector(Qg(A)))?(c.instance=E,kn(E),E):(v=g,(E=pa.get(A))&&(v=d({},g),nS(v,E)),u=u.ownerDocument||u,E=u.createElement("script"),kn(E),fi(E,"link",v),u.head.appendChild(E),c.instance=E);case"void":return null;default:throw Error(i(443,c.type))}else c.type==="stylesheet"&&(c.state.loading&4)===0&&(v=c.instance,c.state.loading|=4,rv(v,g.precedence,u));return c.instance}function rv(u,c,g){for(var v=g.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),E=v.length?v[v.length-1]:null,A=E,R=0;R<v.length;R++){var P=v[R];if(P.dataset.precedence===c)A=P;else if(A!==E)break}A?A.parentNode.insertBefore(u,A.nextSibling):(c=g.nodeType===9?g.head:g,c.insertBefore(u,c.firstChild))}function eS(u,c){u.crossOrigin==null&&(u.crossOrigin=c.crossOrigin),u.referrerPolicy==null&&(u.referrerPolicy=c.referrerPolicy),u.title==null&&(u.title=c.title)}function nS(u,c){u.crossOrigin==null&&(u.crossOrigin=c.crossOrigin),u.referrerPolicy==null&&(u.referrerPolicy=c.referrerPolicy),u.integrity==null&&(u.integrity=c.integrity)}var av=null;function TL(u,c,g){if(av===null){var v=new Map,E=av=new Map;E.set(g,v)}else E=av,v=E.get(g),v||(v=new Map,E.set(g,v));if(v.has(u))return v;for(v.set(u,null),g=g.getElementsByTagName(u),E=0;E<g.length;E++){var A=g[E];if(!(A[Uu]||A[Hn]||u==="link"&&A.getAttribute("rel")==="stylesheet")&&A.namespaceURI!=="http://www.w3.org/2000/svg"){var R=A.getAttribute(c)||"";R=u+R;var P=v.get(R);P?P.push(A):v.set(R,[A])}}return v}function CL(u,c,g){u=u.ownerDocument||u,u.head.insertBefore(g,c==="title"?u.querySelector("head > title"):null)}function IX(u,c,g){if(g===1||c.itemProp!=null)return!1;switch(u){case"meta":case"title":return!0;case"style":if(typeof c.precedence!="string"||typeof c.href!="string"||c.href==="")break;return!0;case"link":if(typeof c.rel!="string"||typeof c.href!="string"||c.href===""||c.onLoad||c.onError)break;switch(c.rel){case"stylesheet":return u=c.disabled,typeof c.precedence=="string"&&u==null;default:return!0}case"script":if(c.async&&typeof c.async!="function"&&typeof c.async!="symbol"&&!c.onLoad&&!c.onError&&c.src&&typeof c.src=="string")return!0}return!1}function ML(u){return!(u.type==="stylesheet"&&(u.state.loading&3)===0)}var Kg=null;function qX(){}function jX(u,c,g){if(Kg===null)throw Error(i(475));var v=Kg;if(c.type==="stylesheet"&&(typeof g.media!="string"||matchMedia(g.media).matches!==!1)&&(c.state.loading&4)===0){if(c.instance===null){var E=hd(g.href),A=u.querySelector(Vg(E));if(A){u=A._p,u!==null&&typeof u=="object"&&typeof u.then=="function"&&(v.count++,v=ov.bind(v),u.then(v,v)),c.state.loading|=4,c.instance=A,kn(A);return}A=u.ownerDocument||u,g=SL(g),(E=pa.get(E))&&eS(g,E),A=A.createElement("link"),kn(A);var R=A;R._p=new Promise(function(P,Z){R.onload=P,R.onerror=Z}),fi(A,"link",g),c.instance=A}v.stylesheets===null&&(v.stylesheets=new Map),v.stylesheets.set(c,u),(u=c.state.preload)&&(c.state.loading&3)===0&&(v.count++,c=ov.bind(v),u.addEventListener("load",c),u.addEventListener("error",c))}}function HX(){if(Kg===null)throw Error(i(475));var u=Kg;return u.stylesheets&&u.count===0&&iS(u,u.stylesheets),0<u.count?function(c){var g=setTimeout(function(){if(u.stylesheets&&iS(u,u.stylesheets),u.unsuspend){var v=u.unsuspend;u.unsuspend=null,v()}},6e4);return u.unsuspend=c,function(){u.unsuspend=null,clearTimeout(g)}}:null}function ov(){if(this.count--,this.count===0){if(this.stylesheets)iS(this,this.stylesheets);else if(this.unsuspend){var u=this.unsuspend;this.unsuspend=null,u()}}}var sv=null;function iS(u,c){u.stylesheets=null,u.unsuspend!==null&&(u.count++,sv=new Map,c.forEach(GX,u),sv=null,ov.call(u))}function GX(u,c){if(!(c.state.loading&4)){var g=sv.get(u);if(g)var v=g.get(null);else{g=new Map,sv.set(u,g);for(var E=u.querySelectorAll("link[data-precedence],style[data-precedence]"),A=0;A<E.length;A++){var R=E[A];(R.nodeName==="LINK"||R.getAttribute("media")!=="not all")&&(g.set(R.dataset.precedence,R),v=R)}v&&g.set(null,v)}E=c.instance,R=E.getAttribute("data-precedence"),A=g.get(R)||v,A===v&&g.set(null,E),g.set(R,E),this.count++,v=ov.bind(this),E.addEventListener("load",v),E.addEventListener("error",v),A?A.parentNode.insertBefore(E,A.nextSibling):(u=u.nodeType===9?u.head:u,u.insertBefore(E,u.firstChild)),c.state.loading|=4}}var Jg={$$typeof:k,Provider:null,Consumer:null,_currentValue:V,_currentValue2:V,_threadCount:0};function ZX(u,c,g,v,E,A,R,P){this.tag=1,this.containerInfo=u,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Th(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Th(0),this.hiddenUpdates=Th(null),this.identifierPrefix=v,this.onUncaughtError=E,this.onCaughtError=A,this.onRecoverableError=R,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=P,this.incompleteTransitions=new Map}function kL(u,c,g,v,E,A,R,P,Z,rt,pt,vt){return u=new ZX(u,c,g,R,P,Z,rt,vt),c=1,A===!0&&(c|=24),A=Yi(3,null,null,c),u.current=A,A.stateNode=u,c=Pw(),c.refCount++,u.pooledCache=c,c.refCount++,A.memoizedState={element:v,isDehydrated:g,cache:c},qw(A),u}function OL(u){return u?(u=qs,u):qs}function $L(u,c,g,v,E,A){E=OL(E),v.context===null?v.context=E:v.pendingContext=E,v=cl(c),v.payload={element:g},A=A===void 0?null:A,A!==null&&(v.callback=A),g=fl(u,v,c),g!==null&&(qr(g,u,c),kg(g,u,c))}function DL(u,c){if(u=u.memoizedState,u!==null&&u.dehydrated!==null){var g=u.retryLane;u.retryLane=g!==0&&g<c?g:c}}function rS(u,c){DL(u,c),(u=u.alternate)&&DL(u,c)}function RL(u){if(u.tag===13){var c=al(u,67108864);c!==null&&qr(c,u,67108864),rS(u,67108864)}}var uv=!0;function YX(u,c,g,v){var E=U.T;U.T=null;var A=X.p;try{X.p=2,aS(u,c,g,v)}finally{X.p=A,U.T=E}}function XX(u,c,g,v){var E=U.T;U.T=null;var A=X.p;try{X.p=8,aS(u,c,g,v)}finally{X.p=A,U.T=E}}function aS(u,c,g,v){if(uv){var E=oS(v);if(E===null)ZE(u,c,v,lv,g),LL(u,v);else if(VX(E,u,c,g,v))v.stopPropagation();else if(LL(u,v),c&4&&-1<WX.indexOf(u)){for(;E!==null;){var A=Ss(E);if(A!==null)switch(A.tag){case 3:if(A=A.stateNode,A.current.memoizedState.isDehydrated){var R=wo(A.pendingLanes);if(R!==0){var P=A;for(P.pendingLanes|=2,P.entangledLanes|=2;R;){var Z=1<<31-Ii(R);P.entanglements[1]|=Z,R&=~Z}Lo(A),(Le&6)===0&&(Z1=nn()+500,Zg(0))}}break;case 13:P=al(A,2),P!==null&&qr(P,A,2),X1(),rS(A,2)}if(A=oS(v),A===null&&ZE(u,c,v,lv,g),A===E)break;E=A}E!==null&&v.stopPropagation()}else ZE(u,c,v,null,g)}}function oS(u){return u=Yu(u),sS(u)}var lv=null;function sS(u){if(lv=null,u=So(u),u!==null){var c=a(u);if(c===null)u=null;else{var g=c.tag;if(g===13){if(u=o(c),u!==null)return u;u=null}else if(g===3){if(c.stateNode.current.memoizedState.isDehydrated)return c.tag===3?c.stateNode.containerInfo:null;u=null}else c!==u&&(u=null)}}return lv=u,null}function NL(u){switch(u){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ws()){case Iy:return 2;case eg:return 8;case zu:case qy:return 32;case ng:return 268435456;default:return 32}default:return 32}}var uS=!1,Sl=null,Al=null,Tl=null,tm=new Map,em=new Map,Cl=[],WX="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function LL(u,c){switch(u){case"focusin":case"focusout":Sl=null;break;case"dragenter":case"dragleave":Al=null;break;case"mouseover":case"mouseout":Tl=null;break;case"pointerover":case"pointerout":tm.delete(c.pointerId);break;case"gotpointercapture":case"lostpointercapture":em.delete(c.pointerId)}}function nm(u,c,g,v,E,A){return u===null||u.nativeEvent!==A?(u={blockedOn:c,domEventName:g,eventSystemFlags:v,nativeEvent:A,targetContainers:[E]},c!==null&&(c=Ss(c),c!==null&&RL(c)),u):(u.eventSystemFlags|=v,c=u.targetContainers,E!==null&&c.indexOf(E)===-1&&c.push(E),u)}function VX(u,c,g,v,E){switch(c){case"focusin":return Sl=nm(Sl,u,c,g,v,E),!0;case"dragenter":return Al=nm(Al,u,c,g,v,E),!0;case"mouseover":return Tl=nm(Tl,u,c,g,v,E),!0;case"pointerover":var A=E.pointerId;return tm.set(A,nm(tm.get(A)||null,u,c,g,v,E)),!0;case"gotpointercapture":return A=E.pointerId,em.set(A,nm(em.get(A)||null,u,c,g,v,E)),!0}return!1}function zL(u){var c=So(u.target);if(c!==null){var g=a(c);if(g!==null){if(c=g.tag,c===13){if(c=o(g),c!==null){u.blockedOn=c,og(u.priority,function(){if(g.tag===13){var v=Ir();v=rg(v);var E=al(g,v);E!==null&&qr(E,g,v),rS(g,v)}});return}}else if(c===3&&g.stateNode.current.memoizedState.isDehydrated){u.blockedOn=g.tag===3?g.stateNode.containerInfo:null;return}}}u.blockedOn=null}function cv(u){if(u.blockedOn!==null)return!1;for(var c=u.targetContainers;0<c.length;){var g=oS(u.nativeEvent);if(g===null){g=u.nativeEvent;var v=new g.constructor(g.type,g);Lc=v,g.target.dispatchEvent(v),Lc=null}else return c=Ss(g),c!==null&&RL(c),u.blockedOn=g,!1;c.shift()}return!0}function FL(u,c,g){cv(u)&&g.delete(c)}function QX(){uS=!1,Sl!==null&&cv(Sl)&&(Sl=null),Al!==null&&cv(Al)&&(Al=null),Tl!==null&&cv(Tl)&&(Tl=null),tm.forEach(FL),em.forEach(FL)}function fv(u,c){u.blockedOn===c&&(u.blockedOn=null,uS||(uS=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,QX)))}var hv=null;function PL(u){hv!==u&&(hv=u,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){hv===u&&(hv=null);for(var c=0;c<u.length;c+=3){var g=u[c],v=u[c+1],E=u[c+2];if(typeof v!="function"){if(sS(v||g)===null)continue;break}var A=Ss(g);A!==null&&(u.splice(c,3),c-=3,sE(A,{pending:!0,data:E,method:g.method,action:v},v,E))}}))}function im(u){function c(Z){return fv(Z,u)}Sl!==null&&fv(Sl,u),Al!==null&&fv(Al,u),Tl!==null&&fv(Tl,u),tm.forEach(c),em.forEach(c);for(var g=0;g<Cl.length;g++){var v=Cl[g];v.blockedOn===u&&(v.blockedOn=null)}for(;0<Cl.length&&(g=Cl[0],g.blockedOn===null);)zL(g),g.blockedOn===null&&Cl.shift();if(g=(u.ownerDocument||u).$$reactFormReplay,g!=null)for(v=0;v<g.length;v+=3){var E=g[v],A=g[v+1],R=E[wi]||null;if(typeof A=="function")R||PL(g);else if(R){var P=null;if(A&&A.hasAttribute("formAction")){if(E=A,R=A[wi]||null)P=R.formAction;else if(sS(E)!==null)continue}else P=R.action;typeof P=="function"?g[v+1]=P:(g.splice(v,3),v-=3),PL(g)}}}function lS(u){this._internalRoot=u}dv.prototype.render=lS.prototype.render=function(u){var c=this._internalRoot;if(c===null)throw Error(i(409));var g=c.current,v=Ir();$L(g,v,u,c,null,null)},dv.prototype.unmount=lS.prototype.unmount=function(){var u=this._internalRoot;if(u!==null){this._internalRoot=null;var c=u.containerInfo;$L(u.current,2,null,u,null,null),X1(),c[Bu]=null}};function dv(u){this._internalRoot=u}dv.prototype.unstable_scheduleHydration=function(u){if(u){var c=Xy();u={blockedOn:null,target:u,priority:c};for(var g=0;g<Cl.length&&c!==0&&c<Cl[g].priority;g++);Cl.splice(g,0,u),g===0&&zL(u)}};var BL=e.version;if(BL!=="19.1.0")throw Error(i(527,BL,"19.1.0"));X.findDOMNode=function(u){var c=u._reactInternals;if(c===void 0)throw typeof u.render=="function"?Error(i(188)):(u=Object.keys(u).join(","),Error(i(268,u)));return u=l(c),u=u!==null?f(u):null,u=u===null?null:u.stateNode,u};var KX={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:U,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var pv=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!pv.isDisabled&&pv.supportsFiber)try{Es=pv.inject(KX),xi=pv}catch{}}return am.createRoot=function(u,c){if(!r(u))throw Error(i(299));var g=!1,v="",E=eN,A=nN,R=iN,P=null;return c!=null&&(c.unstable_strictMode===!0&&(g=!0),c.identifierPrefix!==void 0&&(v=c.identifierPrefix),c.onUncaughtError!==void 0&&(E=c.onUncaughtError),c.onCaughtError!==void 0&&(A=c.onCaughtError),c.onRecoverableError!==void 0&&(R=c.onRecoverableError),c.unstable_transitionCallbacks!==void 0&&(P=c.unstable_transitionCallbacks)),c=kL(u,1,!1,null,null,g,v,E,A,R,P,null),u[Bu]=c.current,GE(u),new lS(c)},am.hydrateRoot=function(u,c,g){if(!r(u))throw Error(i(299));var v=!1,E="",A=eN,R=nN,P=iN,Z=null,rt=null;return g!=null&&(g.unstable_strictMode===!0&&(v=!0),g.identifierPrefix!==void 0&&(E=g.identifierPrefix),g.onUncaughtError!==void 0&&(A=g.onUncaughtError),g.onCaughtError!==void 0&&(R=g.onCaughtError),g.onRecoverableError!==void 0&&(P=g.onRecoverableError),g.unstable_transitionCallbacks!==void 0&&(Z=g.unstable_transitionCallbacks),g.formState!==void 0&&(rt=g.formState)),c=kL(u,1,!0,c,g??null,v,E,A,R,P,Z,rt),c.context=OL(null),g=c.current,v=Ir(),v=rg(v),E=cl(v),E.callback=null,fl(g,E,v),g=v,c.current.lanes=g,Pu(c,g),Lo(c),u[Bu]=c.current,GE(u),new dv(c)},am.version="19.1.0",am}var JL;function cW(){if(JL)return dS.exports;JL=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),dS.exports=lW(),dS.exports}var fW=cW();const hW=/("(?:[^\\"]|\\.)*")|[:,]/g;function yS(t,e={}){const n=JSON.stringify([1],void 0,e.indent===void 0?2:e.indent).slice(2,-3),i=n===""?1/0:e.maxLength===void 0?80:e.maxLength;let{replacer:r}=e;return function a(o,s,l){o&&typeof o.toJSON=="function"&&(o=o.toJSON());const f=JSON.stringify(o,r);if(f===void 0)return f;const d=i-s.length-l;if(f.length<=d){const p=f.replace(hW,(m,_)=>_||`${m} `);if(p.length<=d)return p}if(r!=null&&(o=JSON.parse(f),r=void 0),typeof o=="object"&&o!==null){const p=s+n,m=[];let _=0,b,x;if(Array.isArray(o)){b="[",x="]";const{length:S}=o;for(;_<S;_++)m.push(a(o[_],p,_===S-1?0:1)||"null")}else{b="{",x="}";const S=Object.keys(o),{length:T}=S;for(;_<T;_++){const M=S[_],k=`${JSON.stringify(M)}: `,$=a(o[M],p,k.length+(_===T-1?0:1));$!==void 0&&m.push(k+$)}}if(m.length>0)return[b,n+m.join(`,
${p}`),x].join(`
${s}`)}return f}(t,"",0)}function kr(t,e,n){return t.fields=e||[],t.fname=n,t}function xn(t){return t==null?null:t.fname}function Li(t){return t==null?null:t.fields}function H8(t){return t.length===1?dW(t[0]):pW(t)}const dW=t=>function(e){return e[t]},pW=t=>{const e=t.length;return function(n){for(let i=0;i<e;++i)n=n[t[i]];return n}};function dt(t){throw Error(t)}function ls(t){const e=[],n=t.length;let i=null,r=0,a="",o,s,l;t=t+"";function f(){e.push(a+t.substring(o,s)),a="",o=s+1}for(o=s=0;s<n;++s)if(l=t[s],l==="\\")a+=t.substring(o,s++),o=s;else if(l===i)f(),i=null,r=-1;else{if(i)continue;o===r&&l==='"'||o===r&&l==="'"?(o=s+1,i=l):l==="."&&!r?s>o?f():o=s+1:l==="["?(s>o&&f(),r=o=s+1):l==="]"&&(r||dt("Access path missing open bracket: "+t),r>0&&f(),r=0,o=s+1)}return r&&dt("Access path missing closing bracket: "+t),i&&dt("Access path missing closing quote: "+t),s>o&&(s++,f()),e}function Aa(t,e,n){const i=ls(t);return t=i.length===1?i[0]:t,kr((n&&n.get||H8)(i),[t],e||t)}const X0=Aa("id"),Bi=kr(t=>t,[],"identity"),Pl=kr(()=>0,[],"zero"),Mp=kr(()=>1,[],"one"),Ta=kr(()=>!0,[],"true"),Ol=kr(()=>!1,[],"false");function gW(t,e,n){const i=[e].concat([].slice.call(n));console[t].apply(console,i)}const G8=0,AM=1,TM=2,Z8=3,Y8=4;function CM(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:gW,i=t||G8;return{level(r){return arguments.length?(i=+r,this):i},error(){return i>=AM&&n(e||"error","ERROR",arguments),this},warn(){return i>=TM&&n(e||"warn","WARN",arguments),this},info(){return i>=Z8&&n(e||"log","INFO",arguments),this},debug(){return i>=Y8&&n(e||"log","DEBUG",arguments),this}}}var gt=Array.isArray;function Rt(t){return t===Object(t)}const tz=t=>t!=="__proto__";function kp(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.reduce((i,r)=>{for(const a in r)if(a==="signals")i.signals=mW(i.signals,r.signals);else{const o=a==="legend"?{layout:1}:a==="style"?!0:null;Op(i,a,r[a],o)}return i},{})}function Op(t,e,n,i){if(!tz(e))return;let r,a;if(Rt(n)&&!gt(n)){a=Rt(t[e])?t[e]:t[e]={};for(r in n)i&&(i===!0||i[r])?Op(a,r,n[r]):tz(r)&&(a[r]=n[r])}else t[e]=n}function mW(t,e){if(t==null)return e;const n={},i=[];function r(a){n[a.name]||(n[a.name]=1,i.push(a))}return e.forEach(r),t.forEach(r),i}function be(t){return t[t.length-1]}function Ri(t){return t==null||t===""?null:+t}const X8=t=>e=>t*Math.exp(e),W8=t=>e=>Math.log(t*e),V8=t=>e=>Math.sign(e)*Math.log1p(Math.abs(e/t)),Q8=t=>e=>Math.sign(e)*Math.expm1(Math.abs(e))*t,O_=t=>e=>e<0?-Math.pow(-e,t):Math.pow(e,t);function lx(t,e,n,i){const r=n(t[0]),a=n(be(t)),o=(a-r)*e;return[i(r-o),i(a-o)]}function K8(t,e){return lx(t,e,Ri,Bi)}function J8(t,e){var n=Math.sign(t[0]);return lx(t,e,W8(n),X8(n))}function tP(t,e,n){return lx(t,e,O_(n),O_(1/n))}function eP(t,e,n){return lx(t,e,V8(n),Q8(n))}function cx(t,e,n,i,r){const a=i(t[0]),o=i(be(t)),s=e!=null?i(e):(a+o)/2;return[r(s+(a-s)*n),r(s+(o-s)*n)]}function MM(t,e,n){return cx(t,e,n,Ri,Bi)}function kM(t,e,n){const i=Math.sign(t[0]);return cx(t,e,n,W8(i),X8(i))}function $_(t,e,n,i){return cx(t,e,n,O_(i),O_(1/i))}function OM(t,e,n,i){return cx(t,e,n,V8(i),Q8(i))}function nP(t){return 1+~~(new Date(t).getMonth()/3)}function iP(t){return 1+~~(new Date(t).getUTCMonth()/3)}function Nt(t){return t!=null?gt(t)?t:[t]:[]}function rP(t,e,n){let i=t[0],r=t[1],a;return r<i&&(a=r,r=i,i=a),a=r-i,a>=n-e?[e,n]:[i=Math.min(Math.max(i,e),n-a),i+a]}function se(t){return typeof t=="function"}const yW="descending";function $M(t,e,n){n=n||{},e=Nt(e)||[];const i=[],r=[],a={},o=n.comparator||vW;return Nt(t).forEach((s,l)=>{s!=null&&(i.push(e[l]===yW?-1:1),r.push(s=se(s)?s:Aa(s,null,n)),(Li(s)||[]).forEach(f=>a[f]=1))}),r.length===0?null:kr(o(r,i),Object.keys(a))}const $p=(t,e)=>(t<e||t==null)&&e!=null?-1:(t>e||e==null)&&t!=null?1:(e=e instanceof Date?+e:e,(t=t instanceof Date?+t:t)!==t&&e===e?-1:e!==e&&t===t?1:0),vW=(t,e)=>t.length===1?_W(t[0],e[0]):bW(t,e,t.length),_W=(t,e)=>function(n,i){return $p(t(n),t(i))*e},bW=(t,e,n)=>(e.push(0),function(i,r){let a,o=0,s=-1;for(;o===0&&++s<n;)a=t[s],o=$p(a(i),a(r));return o*e[s]});function Ui(t){return se(t)?t:()=>t}function DM(t,e){let n;return i=>{n&&clearTimeout(n),n=setTimeout(()=>(e(i),n=null),t)}}function oe(t){for(let e,n,i=1,r=arguments.length;i<r;++i){e=arguments[i];for(n in e)t[n]=e[n]}return t}function ts(t,e){let n=0,i,r,a,o;if(t&&(i=t.length))if(e==null){for(r=t[n];n<i&&(r==null||r!==r);r=t[++n]);for(a=o=r;n<i;++n)r=t[n],r!=null&&(r<a&&(a=r),r>o&&(o=r))}else{for(r=e(t[n]);n<i&&(r==null||r!==r);r=e(t[++n]));for(a=o=r;n<i;++n)r=e(t[n]),r!=null&&(r<a&&(a=r),r>o&&(o=r))}return[a,o]}function aP(t,e){const n=t.length;let i=-1,r,a,o,s,l;if(e==null){for(;++i<n;)if(a=t[i],a!=null&&a>=a){r=o=a;break}if(i===n)return[-1,-1];for(s=l=i;++i<n;)a=t[i],a!=null&&(r>a&&(r=a,s=i),o<a&&(o=a,l=i))}else{for(;++i<n;)if(a=e(t[i],i,t),a!=null&&a>=a){r=o=a;break}if(i===n)return[-1,-1];for(s=l=i;++i<n;)a=e(t[i],i,t),a!=null&&(r>a&&(r=a,s=i),o<a&&(o=a,l=i))}return[s,l]}function zt(t,e){return Object.hasOwn(t,e)}const gv={};function Dp(t){let e={},n;function i(a){return zt(e,a)&&e[a]!==gv}const r={size:0,empty:0,object:e,has:i,get(a){return i(a)?e[a]:void 0},set(a,o){return i(a)||(++r.size,e[a]===gv&&--r.empty),e[a]=o,this},delete(a){return i(a)&&(--r.size,++r.empty,e[a]=gv),this},clear(){r.size=r.empty=0,r.object=e={}},test(a){return arguments.length?(n=a,r):n},clean(){const a={};let o=0;for(const s in e){const l=e[s];l!==gv&&(!n||!n(l))&&(a[s]=l,++o)}r.size=o,r.empty=0,r.object=e=a}};return t&&Object.keys(t).forEach(a=>{r.set(a,t[a])}),r}function oP(t,e,n,i,r,a){if(!n&&n!==0)return a;const o=+n;let s=t[0],l=be(t),f;l<s&&(f=s,s=l,l=f),f=Math.abs(e-s);const d=Math.abs(l-e);return f<d&&f<=o?i:d<=o?r:a}function kt(t,e,n){const i=t.prototype=Object.create(e.prototype);return Object.defineProperty(i,"constructor",{value:t,writable:!0,enumerable:!0,configurable:!0}),oe(i,n)}function kd(t,e,n,i){let r=e[0],a=e[e.length-1],o;return r>a&&(o=r,r=a,a=o),n=n===void 0||n,i=i===void 0||i,(n?r<=t:r<t)&&(i?t<=a:t<a)}function gc(t){return typeof t=="boolean"}function Xl(t){return Object.prototype.toString.call(t)==="[object Date]"}function sP(t){return t&&se(t[Symbol.iterator])}function Me(t){return typeof t=="number"}function RM(t){return Object.prototype.toString.call(t)==="[object RegExp]"}function Dt(t){return typeof t=="string"}function NM(t,e,n){t&&(t=e?Nt(t).map(s=>s.replace(/\\(.)/g,"$1")):Nt(t));const i=t&&t.length,r=n&&n.get||H8,a=s=>r(e?[s]:ls(s));let o;if(!i)o=function(){return""};else if(i===1){const s=a(t[0]);o=function(l){return""+s(l)}}else{const s=t.map(a);o=function(l){let f=""+s[0](l),d=0;for(;++d<i;)f+="|"+s[d](l);return f}}return kr(o,t,"key")}function uP(t,e){const n=t[0],i=be(t),r=+e;return r?r===1?i:n+r*(i-n):n}const xW=1e4;function lP(t){t=+t||xW;let e,n,i;const r=()=>{e={},n={},i=0},a=(o,s)=>(++i>t&&(n=e,e={},i=1),e[o]=s);return r(),{clear:r,has:o=>zt(e,o)||zt(n,o),get:o=>zt(e,o)?e[o]:zt(n,o)?a(o,n[o]):void 0,set:(o,s)=>zt(e,o)?e[o]=s:a(o,s)}}function cP(t,e,n,i){const r=e.length,a=n.length;if(!a)return e;if(!r)return n;const o=i||new e.constructor(r+a);let s=0,l=0,f=0;for(;s<r&&l<a;++f)o[f]=t(e[s],n[l])>0?n[l++]:e[s++];for(;s<r;++s,++f)o[f]=e[s];for(;l<a;++l,++f)o[f]=n[l];return o}function Dm(t,e){let n="";for(;--e>=0;)n+=t;return n}function fP(t,e,n,i){const r=n||" ",a=t+"",o=e-a.length;return o<=0?a:i==="left"?Dm(r,o)+a:i==="center"?Dm(r,~~(o/2))+a+Dm(r,Math.ceil(o/2)):a+Dm(r,o)}function W0(t){return t&&be(t)-t[0]||0}function Mt(t){return gt(t)?"["+t.map(Mt)+"]":Rt(t)||Dt(t)?JSON.stringify(t).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):t}function LM(t){return t==null||t===""?null:!t||t==="false"||t==="0"?!1:!!t}const wW=t=>Me(t)||Xl(t)?t:Date.parse(t);function zM(t,e){return e=e||wW,t==null||t===""?null:e(t)}function FM(t){return t==null||t===""?null:t+""}function oo(t){const e={},n=t.length;for(let i=0;i<n;++i)e[t[i]]=!0;return e}function hP(t,e,n,i){const r=i??"",a=t+"",o=a.length,s=Math.max(0,e-r.length);return o<=e?a:n==="left"?r+a.slice(o-s):n==="center"?a.slice(0,Math.ceil(s/2))+r+a.slice(o-~~(s/2)):a.slice(0,s)+r}function Rl(t,e,n){if(t)if(e){const i=t.length;for(let r=0;r<i;++r){const a=e(t[r]);a&&n(a,r,t)}}else t.forEach(n)}var ez={},vS={},_S=34,om=10,bS=13;function dP(t){return new Function("d","return {"+t.map(function(e,n){return JSON.stringify(e)+": d["+n+'] || ""'}).join(",")+"}")}function EW(t,e){var n=dP(t);return function(i,r){return e(n(i),r,t)}}function nz(t){var e=Object.create(null),n=[];return t.forEach(function(i){for(var r in i)r in e||n.push(e[r]=r)}),n}function yr(t,e){var n=t+"",i=n.length;return i<e?new Array(e-i+1).join(0)+n:n}function SW(t){return t<0?"-"+yr(-t,6):t>9999?"+"+yr(t,6):yr(t,4)}function AW(t){var e=t.getUTCHours(),n=t.getUTCMinutes(),i=t.getUTCSeconds(),r=t.getUTCMilliseconds();return isNaN(t)?"Invalid Date":SW(t.getUTCFullYear())+"-"+yr(t.getUTCMonth()+1,2)+"-"+yr(t.getUTCDate(),2)+(r?"T"+yr(e,2)+":"+yr(n,2)+":"+yr(i,2)+"."+yr(r,3)+"Z":i?"T"+yr(e,2)+":"+yr(n,2)+":"+yr(i,2)+"Z":n||e?"T"+yr(e,2)+":"+yr(n,2)+"Z":"")}function TW(t){var e=new RegExp('["'+t+`
\r]`),n=t.charCodeAt(0);function i(p,m){var _,b,x=r(p,function(S,T){if(_)return _(S,T-1);b=S,_=m?EW(S,m):dP(S)});return x.columns=b||[],x}function r(p,m){var _=[],b=p.length,x=0,S=0,T,M=b<=0,k=!1;p.charCodeAt(b-1)===om&&--b,p.charCodeAt(b-1)===bS&&--b;function $(){if(M)return vS;if(k)return k=!1,ez;var F,N=x,I;if(p.charCodeAt(N)===_S){for(;x++<b&&p.charCodeAt(x)!==_S||p.charCodeAt(++x)===_S;);return(F=x)>=b?M=!0:(I=p.charCodeAt(x++))===om?k=!0:I===bS&&(k=!0,p.charCodeAt(x)===om&&++x),p.slice(N+1,F-1).replace(/""/g,'"')}for(;x<b;){if((I=p.charCodeAt(F=x++))===om)k=!0;else if(I===bS)k=!0,p.charCodeAt(x)===om&&++x;else if(I!==n)continue;return p.slice(N,F)}return M=!0,p.slice(N,b)}for(;(T=$())!==vS;){for(var D=[];T!==ez&&T!==vS;)D.push(T),T=$();m&&(D=m(D,S++))==null||_.push(D)}return _}function a(p,m){return p.map(function(_){return m.map(function(b){return d(_[b])}).join(t)})}function o(p,m){return m==null&&(m=nz(p)),[m.map(d).join(t)].concat(a(p,m)).join(`
`)}function s(p,m){return m==null&&(m=nz(p)),a(p,m).join(`
`)}function l(p){return p.map(f).join(`
`)}function f(p){return p.map(d).join(t)}function d(p){return p==null?"":p instanceof Date?AW(p):e.test(p+="")?'"'+p.replace(/"/g,'""')+'"':p}return{parse:i,parseRows:r,format:o,formatBody:s,formatRows:l,formatRow:f,formatValue:d}}function CW(t){return t}function MW(t){if(t==null)return CW;var e,n,i=t.scale[0],r=t.scale[1],a=t.translate[0],o=t.translate[1];return function(s,l){l||(e=n=0);var f=2,d=s.length,p=new Array(d);for(p[0]=(e+=s[0])*i+a,p[1]=(n+=s[1])*r+o;f<d;)p[f]=s[f],++f;return p}}function kW(t,e){for(var n,i=t.length,r=i-e;r<--i;)n=t[r],t[r++]=t[i],t[i]=n}function OW(t,e){return typeof e=="string"&&(e=t.objects[e]),e.type==="GeometryCollection"?{type:"FeatureCollection",features:e.geometries.map(function(n){return iz(t,n)})}:iz(t,e)}function iz(t,e){var n=e.id,i=e.bbox,r=e.properties==null?{}:e.properties,a=pP(t,e);return n==null&&i==null?{type:"Feature",properties:r,geometry:a}:i==null?{type:"Feature",id:n,properties:r,geometry:a}:{type:"Feature",id:n,bbox:i,properties:r,geometry:a}}function pP(t,e){var n=MW(t.transform),i=t.arcs;function r(d,p){p.length&&p.pop();for(var m=i[d<0?~d:d],_=0,b=m.length;_<b;++_)p.push(n(m[_],_));d<0&&kW(p,b)}function a(d){return n(d)}function o(d){for(var p=[],m=0,_=d.length;m<_;++m)r(d[m],p);return p.length<2&&p.push(p[0]),p}function s(d){for(var p=o(d);p.length<4;)p.push(p[0]);return p}function l(d){return d.map(s)}function f(d){var p=d.type,m;switch(p){case"GeometryCollection":return{type:p,geometries:d.geometries.map(f)};case"Point":m=a(d.coordinates);break;case"MultiPoint":m=d.coordinates.map(a);break;case"LineString":m=o(d.arcs);break;case"MultiLineString":m=d.arcs.map(o);break;case"Polygon":m=l(d.arcs);break;case"MultiPolygon":m=d.arcs.map(l);break;default:return null}return{type:p,coordinates:m}}return f(e)}function $W(t,e){var n={},i={},r={},a=[],o=-1;e.forEach(function(f,d){var p=t.arcs[f<0?~f:f],m;p.length<3&&!p[1][0]&&!p[1][1]&&(m=e[++o],e[o]=f,e[d]=m)}),e.forEach(function(f){var d=s(f),p=d[0],m=d[1],_,b;if(_=r[p])if(delete r[_.end],_.push(f),_.end=m,b=i[m]){delete i[b.start];var x=b===_?_:_.concat(b);i[x.start=_.start]=r[x.end=b.end]=x}else i[_.start]=r[_.end]=_;else if(_=i[m])if(delete i[_.start],_.unshift(f),_.start=p,b=r[p]){delete r[b.end];var S=b===_?_:b.concat(_);i[S.start=b.start]=r[S.end=_.end]=S}else i[_.start]=r[_.end]=_;else _=[f],i[_.start=p]=r[_.end=m]=_});function s(f){var d=t.arcs[f<0?~f:f],p=d[0],m;return t.transform?(m=[0,0],d.forEach(function(_){m[0]+=_[0],m[1]+=_[1]})):m=d[d.length-1],f<0?[m,p]:[p,m]}function l(f,d){for(var p in f){var m=f[p];delete d[m.start],delete m.start,delete m.end,m.forEach(function(_){n[_<0?~_:_]=1}),a.push(m)}}return l(r,i),l(i,r),e.forEach(function(f){n[f<0?~f:f]||a.push([f])}),a}function DW(t){return pP(t,RW.apply(this,arguments))}function RW(t,e,n){var i,r,a;if(arguments.length>1)i=NW(t,e,n);else for(r=0,i=new Array(a=t.arcs.length);r<a;++r)i[r]=r;return{type:"MultiLineString",arcs:$W(t,i)}}function NW(t,e,n){var i=[],r=[],a;function o(p){var m=p<0?~p:p;(r[m]||(r[m]=[])).push({i:p,g:a})}function s(p){p.forEach(o)}function l(p){p.forEach(s)}function f(p){p.forEach(l)}function d(p){switch(a=p,p.type){case"GeometryCollection":p.geometries.forEach(d);break;case"LineString":s(p.arcs);break;case"MultiLineString":case"Polygon":l(p.arcs);break;case"MultiPolygon":f(p.arcs);break}}return d(e),r.forEach(n==null?function(p){i.push(p[0].i)}:function(p){n(p[0].g,p[p.length-1].g)&&i.push(p[0].i)}),i}function du(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function LW(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Rp(t){let e,n,i;t.length!==2?(e=du,n=(s,l)=>du(t(s),l),i=(s,l)=>t(s)-l):(e=t===du||t===LW?t:zW,n=t,i=t);function r(s,l,f=0,d=s.length){if(f<d){if(e(l,l)!==0)return d;do{const p=f+d>>>1;n(s[p],l)<0?f=p+1:d=p}while(f<d)}return f}function a(s,l,f=0,d=s.length){if(f<d){if(e(l,l)!==0)return d;do{const p=f+d>>>1;n(s[p],l)<=0?f=p+1:d=p}while(f<d)}return f}function o(s,l,f=0,d=s.length){const p=r(s,l,f,d-1);return p>f&&i(s[p-1],l)>-i(s[p],l)?p-1:p}return{left:r,center:o,right:a}}function zW(){return 0}function gP(t){return t===null?NaN:+t}function*FW(t,e){if(e===void 0)for(let n of t)n!=null&&(n=+n)>=n&&(yield n);else{let n=-1;for(let i of t)(i=e(i,++n,t))!=null&&(i=+i)>=i&&(yield i)}}const mP=Rp(du),tc=mP.right,PW=mP.left;Rp(gP).center;function BW(t,e){let n=0,i,r=0,a=0;if(e===void 0)for(let o of t)o!=null&&(o=+o)>=o&&(i=o-r,r+=i/++n,a+=i*(o-r));else{let o=-1;for(let s of t)(s=e(s,++o,t))!=null&&(s=+s)>=s&&(i=s-r,r+=i/++n,a+=i*(s-r))}if(n>1)return a/(n-1)}function UW(t,e){const n=BW(t,e);return n&&Math.sqrt(n)}class rr{constructor(){this._partials=new Float64Array(32),this._n=0}add(e){const n=this._partials;let i=0;for(let r=0;r<this._n&&r<32;r++){const a=n[r],o=e+a,s=Math.abs(e)<Math.abs(a)?e-(o-a):a-(o-e);s&&(n[i++]=s),e=o}return n[i]=e,this._n=i+1,this}valueOf(){const e=this._partials;let n=this._n,i,r,a,o=0;if(n>0){for(o=e[--n];n>0&&(i=o,r=e[--n],o=i+r,a=r-(o-i),!a););n>0&&(a<0&&e[n-1]<0||a>0&&e[n-1]>0)&&(r=a*2,i=o+r,r==i-o&&(o=i))}return o}}class rz extends Map{constructor(e,n=_P){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[i,r]of e)this.set(i,r)}get(e){return super.get(uT(this,e))}has(e){return super.has(uT(this,e))}set(e,n){return super.set(yP(this,e),n)}delete(e){return super.delete(vP(this,e))}}class D_ extends Set{constructor(e,n=_P){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const i of e)this.add(i)}has(e){return super.has(uT(this,e))}add(e){return super.add(yP(this,e))}delete(e){return super.delete(vP(this,e))}}function uT({_intern:t,_key:e},n){const i=e(n);return t.has(i)?t.get(i):n}function yP({_intern:t,_key:e},n){const i=e(n);return t.has(i)?t.get(i):(t.set(i,n),n)}function vP({_intern:t,_key:e},n){const i=e(n);return t.has(i)&&(n=t.get(i),t.delete(i)),n}function _P(t){return t!==null&&typeof t=="object"?t.valueOf():t}function IW(t,e){return Array.from(e,n=>t[n])}function qW(t=du){if(t===du)return bP;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,n)=>{const i=t(e,n);return i||i===0?i:(t(n,n)===0)-(t(e,e)===0)}}function bP(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}const jW=Math.sqrt(50),HW=Math.sqrt(10),GW=Math.sqrt(2);function R_(t,e,n){const i=(e-t)/Math.max(0,n),r=Math.floor(Math.log10(i)),a=i/Math.pow(10,r),o=a>=jW?10:a>=HW?5:a>=GW?2:1;let s,l,f;return r<0?(f=Math.pow(10,-r)/o,s=Math.round(t*f),l=Math.round(e*f),s/f<t&&++s,l/f>e&&--l,f=-f):(f=Math.pow(10,r)*o,s=Math.round(t/f),l=Math.round(e/f),s*f<t&&++s,l*f>e&&--l),l<s&&.5<=n&&n<2?R_(t,e,n*2):[s,l,f]}function lT(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const i=e<t,[r,a,o]=i?R_(e,t,n):R_(t,e,n);if(!(a>=r))return[];const s=a-r+1,l=new Array(s);if(i)if(o<0)for(let f=0;f<s;++f)l[f]=(a-f)/-o;else for(let f=0;f<s;++f)l[f]=(a-f)*o;else if(o<0)for(let f=0;f<s;++f)l[f]=(r+f)/-o;else for(let f=0;f<s;++f)l[f]=(r+f)*o;return l}function cT(t,e,n){return e=+e,t=+t,n=+n,R_(t,e,n)[2]}function ec(t,e,n){e=+e,t=+t,n=+n;const i=e<t,r=i?cT(e,t,n):cT(t,e,n);return(i?-1:1)*(r<0?1/-r:r)}function kf(t,e){let n;if(e===void 0)for(const i of t)i!=null&&(n<i||n===void 0&&i>=i)&&(n=i);else{let i=-1;for(let r of t)(r=e(r,++i,t))!=null&&(n<r||n===void 0&&r>=r)&&(n=r)}return n}function fT(t,e){let n;if(e===void 0)for(const i of t)i!=null&&(n>i||n===void 0&&i>=i)&&(n=i);else{let i=-1;for(let r of t)(r=e(r,++i,t))!=null&&(n>r||n===void 0&&r>=r)&&(n=r)}return n}function xP(t,e,n=0,i=1/0,r){if(e=Math.floor(e),n=Math.floor(Math.max(0,n)),i=Math.floor(Math.min(t.length-1,i)),!(n<=e&&e<=i))return t;for(r=r===void 0?bP:qW(r);i>n;){if(i-n>600){const l=i-n+1,f=e-n+1,d=Math.log(l),p=.5*Math.exp(2*d/3),m=.5*Math.sqrt(d*p*(l-p)/l)*(f-l/2<0?-1:1),_=Math.max(n,Math.floor(e-f*p/l+m)),b=Math.min(i,Math.floor(e+(l-f)*p/l+m));xP(t,e,_,b,r)}const a=t[e];let o=n,s=i;for(sm(t,n,e),r(t[i],a)>0&&sm(t,n,i);o<s;){for(sm(t,o,s),++o,--s;r(t[o],a)<0;)++o;for(;r(t[s],a)>0;)--s}r(t[n],a)===0?sm(t,n,s):(++s,sm(t,s,i)),s<=e&&(n=s+1),e<=s&&(i=s-1)}return t}function sm(t,e,n){const i=t[e];t[e]=t[n],t[n]=i}function hT(t,e,n){if(t=Float64Array.from(FW(t,n)),!(!(i=t.length)||isNaN(e=+e))){if(e<=0||i<2)return fT(t);if(e>=1)return kf(t);var i,r=(i-1)*e,a=Math.floor(r),o=kf(xP(t,a).subarray(0,a+1)),s=fT(t.subarray(a+1));return o+(s-o)*(r-a)}}function wP(t,e,n=gP){if(!(!(i=t.length)||isNaN(e=+e))){if(e<=0||i<2)return+n(t[0],0,t);if(e>=1)return+n(t[i-1],i-1,t);var i,r=(i-1)*e,a=Math.floor(r),o=+n(t[a],a,t),s=+n(t[a+1],a+1,t);return o+(s-o)*(r-a)}}function ZW(t,e){let n=0,i=0;if(e===void 0)for(let r of t)r!=null&&(r=+r)>=r&&(++n,i+=r);else{let r=-1;for(let a of t)(a=e(a,++r,t))!=null&&(a=+a)>=a&&(++n,i+=a)}if(n)return i/n}function EP(t,e){return hT(t,.5,e)}function*YW(t){for(const e of t)yield*e}function SP(t){return Array.from(YW(t))}function Yr(t,e,n){t=+t,e=+e,n=(r=arguments.length)<2?(e=t,t=0,1):r<3?1:+n;for(var i=-1,r=Math.max(0,Math.ceil((e-t)/n))|0,a=new Array(r);++i<r;)a[i]=t+i*n;return a}function AP(t,e){let n=0;for(let i of t)(i=+i)&&(n+=i);return n}function XW(t,...e){t=new D_(t),e=e.map(WW);t:for(const n of t)for(const i of e)if(!i.has(n)){t.delete(n);continue t}return t}function WW(t){return t instanceof D_?t:new D_(t)}function VW(...t){const e=new D_;for(const n of t)for(const i of n)e.add(i);return e}function QW(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function N_(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,i=t.slice(0,n);return[i.length>1?i[0]+i.slice(2):i,+t.slice(n+1)]}function Yd(t){return t=N_(Math.abs(t)),t?t[1]:NaN}function KW(t,e){return function(n,i){for(var r=n.length,a=[],o=0,s=t[0],l=0;r>0&&s>0&&(l+s+1>i&&(s=Math.max(1,i-l)),a.push(n.substring(r-=s,r+s)),!((l+=s+1)>i));)s=t[o=(o+1)%t.length];return a.reverse().join(e)}}function JW(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var tV=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Bf(t){if(!(e=tV.exec(t)))throw new Error("invalid format: "+t);var e;return new PM({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}Bf.prototype=PM.prototype;function PM(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}PM.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function eV(t){t:for(var e=t.length,n=1,i=-1,r;n<e;++n)switch(t[n]){case".":i=r=n;break;case"0":i===0&&(i=n),r=n;break;default:if(!+t[n])break t;i>0&&(i=0);break}return i>0?t.slice(0,i)+t.slice(r+1):t}var TP;function nV(t,e){var n=N_(t,e);if(!n)return t+"";var i=n[0],r=n[1],a=r-(TP=Math.max(-8,Math.min(8,Math.floor(r/3)))*3)+1,o=i.length;return a===o?i:a>o?i+new Array(a-o+1).join("0"):a>0?i.slice(0,a)+"."+i.slice(a):"0."+new Array(1-a).join("0")+N_(t,Math.max(0,e+a-1))[0]}function az(t,e){var n=N_(t,e);if(!n)return t+"";var i=n[0],r=n[1];return r<0?"0."+new Array(-r).join("0")+i:i.length>r+1?i.slice(0,r+1)+"."+i.slice(r+1):i+new Array(r-i.length+2).join("0")}const oz={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:QW,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>az(t*100,e),r:az,s:nV,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function sz(t){return t}var uz=Array.prototype.map,lz=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function CP(t){var e=t.grouping===void 0||t.thousands===void 0?sz:KW(uz.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",i=t.currency===void 0?"":t.currency[1]+"",r=t.decimal===void 0?".":t.decimal+"",a=t.numerals===void 0?sz:JW(uz.call(t.numerals,String)),o=t.percent===void 0?"%":t.percent+"",s=t.minus===void 0?"":t.minus+"",l=t.nan===void 0?"NaN":t.nan+"";function f(p){p=Bf(p);var m=p.fill,_=p.align,b=p.sign,x=p.symbol,S=p.zero,T=p.width,M=p.comma,k=p.precision,$=p.trim,D=p.type;D==="n"?(M=!0,D="g"):oz[D]||(k===void 0&&(k=12),$=!0,D="g"),(S||m==="0"&&_==="=")&&(S=!0,m="0",_="=");var F=x==="$"?n:x==="#"&&/[boxX]/.test(D)?"0"+D.toLowerCase():"",N=x==="$"?i:/[%p]/.test(D)?o:"",I=oz[D],q=/[defgprs%]/.test(D);k=k===void 0?6:/[gprs]/.test(D)?Math.max(1,Math.min(21,k)):Math.max(0,Math.min(20,k));function Y(H){var et=F,nt=N,W,j,U;if(D==="c")nt=I(H)+nt,H="";else{H=+H;var X=H<0||1/H<0;if(H=isNaN(H)?l:I(Math.abs(H),k),$&&(H=eV(H)),X&&+H==0&&b!=="+"&&(X=!1),et=(X?b==="("?b:s:b==="-"||b==="("?"":b)+et,nt=(D==="s"?lz[8+TP/3]:"")+nt+(X&&b==="("?")":""),q){for(W=-1,j=H.length;++W<j;)if(U=H.charCodeAt(W),48>U||U>57){nt=(U===46?r+H.slice(W+1):H.slice(W))+nt,H=H.slice(0,W);break}}}M&&!S&&(H=e(H,1/0));var V=et.length+H.length+nt.length,ot=V<T?new Array(T-V+1).join(m):"";switch(M&&S&&(H=e(ot+H,ot.length?T-nt.length:1/0),ot=""),_){case"<":H=et+H+nt+ot;break;case"=":H=et+ot+H+nt;break;case"^":H=ot.slice(0,V=ot.length>>1)+et+H+nt+ot.slice(V);break;default:H=ot+et+H+nt;break}return a(H)}return Y.toString=function(){return p+""},Y}function d(p,m){var _=f((p=Bf(p),p.type="f",p)),b=Math.max(-8,Math.min(8,Math.floor(Yd(m)/3)))*3,x=Math.pow(10,-b),S=lz[8+b/3];return function(T){return _(x*T)+S}}return{format:f,formatPrefix:d}}var mv,fx,BM;iV({thousands:",",grouping:[3],currency:["$",""]});function iV(t){return mv=CP(t),fx=mv.format,BM=mv.formatPrefix,mv}function MP(t){return Math.max(0,-Yd(Math.abs(t)))}function kP(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Yd(e)/3)))*3-Yd(Math.abs(t)))}function OP(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Yd(e)-Yd(t))+1}const xS=new Date,wS=new Date;function qn(t,e,n,i){function r(a){return t(a=arguments.length===0?new Date:new Date(+a)),a}return r.floor=a=>(t(a=new Date(+a)),a),r.ceil=a=>(t(a=new Date(a-1)),e(a,1),t(a),a),r.round=a=>{const o=r(a),s=r.ceil(a);return a-o<s-a?o:s},r.offset=(a,o)=>(e(a=new Date(+a),o==null?1:Math.floor(o)),a),r.range=(a,o,s)=>{const l=[];if(a=r.ceil(a),s=s==null?1:Math.floor(s),!(a<o)||!(s>0))return l;let f;do l.push(f=new Date(+a)),e(a,s),t(a);while(f<a&&a<o);return l},r.filter=a=>qn(o=>{if(o>=o)for(;t(o),!a(o);)o.setTime(o-1)},(o,s)=>{if(o>=o)if(s<0)for(;++s<=0;)for(;e(o,-1),!a(o););else for(;--s>=0;)for(;e(o,1),!a(o););}),n&&(r.count=(a,o)=>(xS.setTime(+a),wS.setTime(+o),t(xS),t(wS),Math.floor(n(xS,wS))),r.every=a=>(a=Math.floor(a),!isFinite(a)||!(a>0)?null:a>1?r.filter(i?o=>i(o)%a===0:o=>r.count(0,o)%a===0):r)),r}const Xd=qn(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);Xd.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?qn(e=>{e.setTime(Math.floor(e/t)*t)},(e,n)=>{e.setTime(+e+n*t)},(e,n)=>(n-e)/t):Xd);Xd.range;const su=1e3,_a=su*60,uu=_a*60,xu=uu*24,UM=xu*7,cz=xu*30,ES=xu*365,lu=qn(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*su)},(t,e)=>(e-t)/su,t=>t.getUTCSeconds());lu.range;const hx=qn(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*su)},(t,e)=>{t.setTime(+t+e*_a)},(t,e)=>(e-t)/_a,t=>t.getMinutes());hx.range;const dx=qn(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*_a)},(t,e)=>(e-t)/_a,t=>t.getUTCMinutes());dx.range;const px=qn(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*su-t.getMinutes()*_a)},(t,e)=>{t.setTime(+t+e*uu)},(t,e)=>(e-t)/uu,t=>t.getHours());px.range;const gx=qn(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*uu)},(t,e)=>(e-t)/uu,t=>t.getUTCHours());gx.range;const pu=qn(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*_a)/xu,t=>t.getDate()-1);pu.range;const Wl=qn(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/xu,t=>t.getUTCDate()-1);Wl.range;const $P=qn(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/xu,t=>Math.floor(t/xu));$P.range;function sh(t){return qn(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,n)=>{e.setDate(e.getDate()+n*7)},(e,n)=>(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*_a)/UM)}const Np=sh(0),L_=sh(1),rV=sh(2),aV=sh(3),Wd=sh(4),oV=sh(5),sV=sh(6);Np.range;L_.range;rV.range;aV.range;Wd.range;oV.range;sV.range;function uh(t){return qn(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCDate(e.getUTCDate()+n*7)},(e,n)=>(n-e)/UM)}const Lp=uh(0),z_=uh(1),uV=uh(2),lV=uh(3),Vd=uh(4),cV=uh(5),fV=uh(6);Lp.range;z_.range;uV.range;lV.range;Vd.range;cV.range;fV.range;const y0=qn(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());y0.range;const v0=qn(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());v0.range;const es=qn(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());es.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:qn(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,n)=>{e.setFullYear(e.getFullYear()+n*t)});es.range;const ns=qn(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());ns.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:qn(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)});ns.range;function DP(t,e,n,i,r,a){const o=[[lu,1,su],[lu,5,5*su],[lu,15,15*su],[lu,30,30*su],[a,1,_a],[a,5,5*_a],[a,15,15*_a],[a,30,30*_a],[r,1,uu],[r,3,3*uu],[r,6,6*uu],[r,12,12*uu],[i,1,xu],[i,2,2*xu],[n,1,UM],[e,1,cz],[e,3,3*cz],[t,1,ES]];function s(f,d,p){const m=d<f;m&&([f,d]=[d,f]);const _=p&&typeof p.range=="function"?p:l(f,d,p),b=_?_.range(f,+d+1):[];return m?b.reverse():b}function l(f,d,p){const m=Math.abs(d-f)/p,_=Rp(([,,S])=>S).right(o,m);if(_===o.length)return t.every(ec(f/ES,d/ES,p));if(_===0)return Xd.every(Math.max(ec(f,d,p),1));const[b,x]=o[m/o[_-1][2]<o[_][2]/m?_-1:_];return b.every(x)}return[s,l]}const[hV,dV]=DP(ns,v0,Lp,$P,gx,dx),[pV,gV]=DP(es,y0,Np,pu,px,hx),vi="year",Er="quarter",zi="month",Bn="week",Sr="date",Di="day",is="dayofyear",ta="hours",ea="minutes",Ca="seconds",so="milliseconds",IM=[vi,Er,zi,Bn,Sr,Di,is,ta,ea,Ca,so],SS=IM.reduce((t,e,n)=>(t[e]=1+n,t),{});function qM(t){const e=Nt(t).slice(),n={};return e.length||dt("Missing time unit."),e.forEach(r=>{zt(SS,r)?n[r]=1:dt(`Invalid time unit: ${r}.`)}),(n[Bn]||n[Di]?1:0)+(n[Er]||n[zi]||n[Sr]?1:0)+(n[is]?1:0)>1&&dt(`Incompatible time units: ${t}`),e.sort((r,a)=>SS[r]-SS[a]),e}const mV={[vi]:"%Y ",[Er]:"Q%q ",[zi]:"%b ",[Sr]:"%d ",[Bn]:"W%U ",[Di]:"%a ",[is]:"%j ",[ta]:"%H:00",[ea]:"00:%M",[Ca]:":%S",[so]:".%L",[`${vi}-${zi}`]:"%Y-%m ",[`${vi}-${zi}-${Sr}`]:"%Y-%m-%d ",[`${ta}-${ea}`]:"%H:%M"};function RP(t,e){const n=oe({},mV,e),i=qM(t),r=i.length;let a="",o=0,s,l;for(o=0;o<r;)for(s=i.length;s>o;--s)if(l=i.slice(o,s).join("-"),n[l]!=null){a+=n[l],o=s;break}return a.trim()}const bf=new Date;function jM(t){return bf.setFullYear(t),bf.setMonth(0),bf.setDate(1),bf.setHours(0,0,0,0),bf}function NP(t){return zP(new Date(t))}function LP(t){return dT(new Date(t))}function zP(t){return pu.count(jM(t.getFullYear())-1,t)}function dT(t){return Np.count(jM(t.getFullYear())-1,t)}function pT(t){return jM(t).getDay()}function yV(t,e,n,i,r,a,o){if(0<=t&&t<100){const s=new Date(-1,e,n,i,r,a,o);return s.setFullYear(t),s}return new Date(t,e,n,i,r,a,o)}function FP(t){return BP(new Date(t))}function PP(t){return gT(new Date(t))}function BP(t){const e=Date.UTC(t.getUTCFullYear(),0,1);return Wl.count(e-1,t)}function gT(t){const e=Date.UTC(t.getUTCFullYear(),0,1);return Lp.count(e-1,t)}function mT(t){return bf.setTime(Date.UTC(t,0,1)),bf.getUTCDay()}function vV(t,e,n,i,r,a,o){if(0<=t&&t<100){const s=new Date(Date.UTC(-1,e,n,i,r,a,o));return s.setUTCFullYear(n.y),s}return new Date(Date.UTC(t,e,n,i,r,a,o))}function UP(t,e,n,i,r){const a=e||1,o=be(t),s=(T,M,k)=>(k=k||T,_V(n[k],i[k],T===o&&a,M)),l=new Date,f=oo(t),d=f[vi]?s(vi):Ui(2012),p=f[zi]?s(zi):f[Er]?s(Er):Pl,m=f[Bn]&&f[Di]?s(Di,1,Bn+Di):f[Bn]?s(Bn,1):f[Di]?s(Di,1):f[Sr]?s(Sr,1):f[is]?s(is,1):Mp,_=f[ta]?s(ta):Pl,b=f[ea]?s(ea):Pl,x=f[Ca]?s(Ca):Pl,S=f[so]?s(so):Pl;return function(T){l.setTime(+T);const M=d(l);return r(M,p(l),m(l,M),_(l),b(l),x(l),S(l))}}function _V(t,e,n,i){const r=n<=1?t:i?(a,o)=>i+n*Math.floor((t(a,o)-i)/n):(a,o)=>n*Math.floor(t(a,o)/n);return e?(a,o)=>e(r(a,o),o):r}function Qd(t,e,n){return e+t*7-(n+6)%7}const bV={[vi]:t=>t.getFullYear(),[Er]:t=>Math.floor(t.getMonth()/3),[zi]:t=>t.getMonth(),[Sr]:t=>t.getDate(),[ta]:t=>t.getHours(),[ea]:t=>t.getMinutes(),[Ca]:t=>t.getSeconds(),[so]:t=>t.getMilliseconds(),[is]:t=>zP(t),[Bn]:t=>dT(t),[Bn+Di]:(t,e)=>Qd(dT(t),t.getDay(),pT(e)),[Di]:(t,e)=>Qd(1,t.getDay(),pT(e))},xV={[Er]:t=>3*t,[Bn]:(t,e)=>Qd(t,0,pT(e))};function IP(t,e){return UP(t,e||1,bV,xV,yV)}const wV={[vi]:t=>t.getUTCFullYear(),[Er]:t=>Math.floor(t.getUTCMonth()/3),[zi]:t=>t.getUTCMonth(),[Sr]:t=>t.getUTCDate(),[ta]:t=>t.getUTCHours(),[ea]:t=>t.getUTCMinutes(),[Ca]:t=>t.getUTCSeconds(),[so]:t=>t.getUTCMilliseconds(),[is]:t=>BP(t),[Bn]:t=>gT(t),[Di]:(t,e)=>Qd(1,t.getUTCDay(),mT(e)),[Bn+Di]:(t,e)=>Qd(gT(t),t.getUTCDay(),mT(e))},EV={[Er]:t=>3*t,[Bn]:(t,e)=>Qd(t,0,mT(e))};function qP(t,e){return UP(t,e||1,wV,EV,vV)}const SV={[vi]:es,[Er]:y0.every(3),[zi]:y0,[Bn]:Np,[Sr]:pu,[Di]:pu,[is]:pu,[ta]:px,[ea]:hx,[Ca]:lu,[so]:Xd},AV={[vi]:ns,[Er]:v0.every(3),[zi]:v0,[Bn]:Lp,[Sr]:Wl,[Di]:Wl,[is]:Wl,[ta]:gx,[ea]:dx,[Ca]:lu,[so]:Xd};function zp(t){return SV[t]}function Fp(t){return AV[t]}function jP(t,e,n){return t?t.offset(e,n):void 0}function HP(t,e,n){return jP(zp(t),e,n)}function GP(t,e,n){return jP(Fp(t),e,n)}function ZP(t,e,n,i){return t?t.range(e,n,i):void 0}function YP(t,e,n,i){return ZP(zp(t),e,n,i)}function XP(t,e,n,i){return ZP(Fp(t),e,n,i)}const Rm=1e3,Nm=Rm*60,Lm=Nm*60,mx=Lm*24,TV=mx*7,fz=mx*30,yT=mx*365,WP=[vi,zi,Sr,ta,ea,Ca,so],zm=WP.slice(0,-1),Fm=zm.slice(0,-1),Pm=Fm.slice(0,-1),CV=Pm.slice(0,-1),MV=[vi,Bn],hz=[vi,zi],VP=[vi],um=[[zm,1,Rm],[zm,5,5*Rm],[zm,15,15*Rm],[zm,30,30*Rm],[Fm,1,Nm],[Fm,5,5*Nm],[Fm,15,15*Nm],[Fm,30,30*Nm],[Pm,1,Lm],[Pm,3,3*Lm],[Pm,6,6*Lm],[Pm,12,12*Lm],[CV,1,mx],[MV,1,TV],[hz,1,fz],[hz,3,3*fz],[VP,1,yT]];function QP(t){const e=t.extent,n=t.maxbins||40,i=Math.abs(W0(e))/n;let r=Rp(s=>s[2]).right(um,i),a,o;return r===um.length?(a=VP,o=ec(e[0]/yT,e[1]/yT,n)):r?(r=um[i/um[r-1][2]<um[r][2]/i?r-1:r],a=r[0],o=r[1]):(a=WP,o=Math.max(ec(e[0],e[1],n),1)),{units:a,step:o}}function AS(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function TS(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function lm(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function KP(t){var e=t.dateTime,n=t.date,i=t.time,r=t.periods,a=t.days,o=t.shortDays,s=t.months,l=t.shortMonths,f=cm(r),d=fm(r),p=cm(a),m=fm(a),_=cm(o),b=fm(o),x=cm(s),S=fm(s),T=cm(l),M=fm(l),k={a:X,A:V,b:ot,B,c:null,d:vz,e:vz,f:QV,g:sQ,G:lQ,H:XV,I:WV,j:VV,L:JP,m:KV,M:JV,p:J,q:lt,Q:xz,s:wz,S:tQ,u:eQ,U:nQ,V:iQ,w:rQ,W:aQ,x:null,X:null,y:oQ,Y:uQ,Z:cQ,"%":bz},$={a:ft,A:wt,b:bt,B:At,c:null,d:_z,e:_z,f:pQ,g:SQ,G:TQ,H:fQ,I:hQ,j:dQ,L:e9,m:gQ,M:mQ,p:$e,q:ae,Q:xz,s:wz,S:yQ,u:vQ,U:_Q,V:bQ,w:xQ,W:wQ,x:null,X:null,y:EQ,Y:AQ,Z:CQ,"%":bz},D={a:Y,A:H,b:et,B:nt,c:W,d:mz,e:mz,f:HV,g:gz,G:pz,H:yz,I:yz,j:UV,L:jV,m:BV,M:IV,p:q,q:PV,Q:ZV,s:YV,S:qV,u:RV,U:NV,V:LV,w:DV,W:zV,x:j,X:U,y:gz,Y:pz,Z:FV,"%":GV};k.x=F(n,k),k.X=F(i,k),k.c=F(e,k),$.x=F(n,$),$.X=F(i,$),$.c=F(e,$);function F($t,Qt){return function(Jt){var xt=[],Je=-1,ve=0,ln=$t.length,wn,nn,ws;for(Jt instanceof Date||(Jt=new Date(+Jt));++Je<ln;)$t.charCodeAt(Je)===37&&(xt.push($t.slice(ve,Je)),(nn=dz[wn=$t.charAt(++Je)])!=null?wn=$t.charAt(++Je):nn=wn==="e"?" ":"0",(ws=Qt[wn])&&(wn=ws(Jt,nn)),xt.push(wn),ve=Je+1);return xt.push($t.slice(ve,Je)),xt.join("")}}function N($t,Qt){return function(Jt){var xt=lm(1900,void 0,1),Je=I(xt,$t,Jt+="",0),ve,ln;if(Je!=Jt.length)return null;if("Q"in xt)return new Date(xt.Q);if("s"in xt)return new Date(xt.s*1e3+("L"in xt?xt.L:0));if(Qt&&!("Z"in xt)&&(xt.Z=0),"p"in xt&&(xt.H=xt.H%12+xt.p*12),xt.m===void 0&&(xt.m="q"in xt?xt.q:0),"V"in xt){if(xt.V<1||xt.V>53)return null;"w"in xt||(xt.w=1),"Z"in xt?(ve=TS(lm(xt.y,0,1)),ln=ve.getUTCDay(),ve=ln>4||ln===0?z_.ceil(ve):z_(ve),ve=Wl.offset(ve,(xt.V-1)*7),xt.y=ve.getUTCFullYear(),xt.m=ve.getUTCMonth(),xt.d=ve.getUTCDate()+(xt.w+6)%7):(ve=AS(lm(xt.y,0,1)),ln=ve.getDay(),ve=ln>4||ln===0?L_.ceil(ve):L_(ve),ve=pu.offset(ve,(xt.V-1)*7),xt.y=ve.getFullYear(),xt.m=ve.getMonth(),xt.d=ve.getDate()+(xt.w+6)%7)}else("W"in xt||"U"in xt)&&("w"in xt||(xt.w="u"in xt?xt.u%7:"W"in xt?1:0),ln="Z"in xt?TS(lm(xt.y,0,1)).getUTCDay():AS(lm(xt.y,0,1)).getDay(),xt.m=0,xt.d="W"in xt?(xt.w+6)%7+xt.W*7-(ln+5)%7:xt.w+xt.U*7-(ln+6)%7);return"Z"in xt?(xt.H+=xt.Z/100|0,xt.M+=xt.Z%100,TS(xt)):AS(xt)}}function I($t,Qt,Jt,xt){for(var Je=0,ve=Qt.length,ln=Jt.length,wn,nn;Je<ve;){if(xt>=ln)return-1;if(wn=Qt.charCodeAt(Je++),wn===37){if(wn=Qt.charAt(Je++),nn=D[wn in dz?Qt.charAt(Je++):wn],!nn||(xt=nn($t,Jt,xt))<0)return-1}else if(wn!=Jt.charCodeAt(xt++))return-1}return xt}function q($t,Qt,Jt){var xt=f.exec(Qt.slice(Jt));return xt?($t.p=d.get(xt[0].toLowerCase()),Jt+xt[0].length):-1}function Y($t,Qt,Jt){var xt=_.exec(Qt.slice(Jt));return xt?($t.w=b.get(xt[0].toLowerCase()),Jt+xt[0].length):-1}function H($t,Qt,Jt){var xt=p.exec(Qt.slice(Jt));return xt?($t.w=m.get(xt[0].toLowerCase()),Jt+xt[0].length):-1}function et($t,Qt,Jt){var xt=T.exec(Qt.slice(Jt));return xt?($t.m=M.get(xt[0].toLowerCase()),Jt+xt[0].length):-1}function nt($t,Qt,Jt){var xt=x.exec(Qt.slice(Jt));return xt?($t.m=S.get(xt[0].toLowerCase()),Jt+xt[0].length):-1}function W($t,Qt,Jt){return I($t,e,Qt,Jt)}function j($t,Qt,Jt){return I($t,n,Qt,Jt)}function U($t,Qt,Jt){return I($t,i,Qt,Jt)}function X($t){return o[$t.getDay()]}function V($t){return a[$t.getDay()]}function ot($t){return l[$t.getMonth()]}function B($t){return s[$t.getMonth()]}function J($t){return r[+($t.getHours()>=12)]}function lt($t){return 1+~~($t.getMonth()/3)}function ft($t){return o[$t.getUTCDay()]}function wt($t){return a[$t.getUTCDay()]}function bt($t){return l[$t.getUTCMonth()]}function At($t){return s[$t.getUTCMonth()]}function $e($t){return r[+($t.getUTCHours()>=12)]}function ae($t){return 1+~~($t.getUTCMonth()/3)}return{format:function($t){var Qt=F($t+="",k);return Qt.toString=function(){return $t},Qt},parse:function($t){var Qt=N($t+="",!1);return Qt.toString=function(){return $t},Qt},utcFormat:function($t){var Qt=F($t+="",$);return Qt.toString=function(){return $t},Qt},utcParse:function($t){var Qt=N($t+="",!0);return Qt.toString=function(){return $t},Qt}}}var dz={"-":"",_:" ",0:"0"},ri=/^\s*\d+/,kV=/^%/,OV=/[\\^$*+?|[\]().{}]/g;function ke(t,e,n){var i=t<0?"-":"",r=(i?-t:t)+"",a=r.length;return i+(a<n?new Array(n-a+1).join(e)+r:r)}function $V(t){return t.replace(OV,"\\$&")}function cm(t){return new RegExp("^(?:"+t.map($V).join("|")+")","i")}function fm(t){return new Map(t.map((e,n)=>[e.toLowerCase(),n]))}function DV(t,e,n){var i=ri.exec(e.slice(n,n+1));return i?(t.w=+i[0],n+i[0].length):-1}function RV(t,e,n){var i=ri.exec(e.slice(n,n+1));return i?(t.u=+i[0],n+i[0].length):-1}function NV(t,e,n){var i=ri.exec(e.slice(n,n+2));return i?(t.U=+i[0],n+i[0].length):-1}function LV(t,e,n){var i=ri.exec(e.slice(n,n+2));return i?(t.V=+i[0],n+i[0].length):-1}function zV(t,e,n){var i=ri.exec(e.slice(n,n+2));return i?(t.W=+i[0],n+i[0].length):-1}function pz(t,e,n){var i=ri.exec(e.slice(n,n+4));return i?(t.y=+i[0],n+i[0].length):-1}function gz(t,e,n){var i=ri.exec(e.slice(n,n+2));return i?(t.y=+i[0]+(+i[0]>68?1900:2e3),n+i[0].length):-1}function FV(t,e,n){var i=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return i?(t.Z=i[1]?0:-(i[2]+(i[3]||"00")),n+i[0].length):-1}function PV(t,e,n){var i=ri.exec(e.slice(n,n+1));return i?(t.q=i[0]*3-3,n+i[0].length):-1}function BV(t,e,n){var i=ri.exec(e.slice(n,n+2));return i?(t.m=i[0]-1,n+i[0].length):-1}function mz(t,e,n){var i=ri.exec(e.slice(n,n+2));return i?(t.d=+i[0],n+i[0].length):-1}function UV(t,e,n){var i=ri.exec(e.slice(n,n+3));return i?(t.m=0,t.d=+i[0],n+i[0].length):-1}function yz(t,e,n){var i=ri.exec(e.slice(n,n+2));return i?(t.H=+i[0],n+i[0].length):-1}function IV(t,e,n){var i=ri.exec(e.slice(n,n+2));return i?(t.M=+i[0],n+i[0].length):-1}function qV(t,e,n){var i=ri.exec(e.slice(n,n+2));return i?(t.S=+i[0],n+i[0].length):-1}function jV(t,e,n){var i=ri.exec(e.slice(n,n+3));return i?(t.L=+i[0],n+i[0].length):-1}function HV(t,e,n){var i=ri.exec(e.slice(n,n+6));return i?(t.L=Math.floor(i[0]/1e3),n+i[0].length):-1}function GV(t,e,n){var i=kV.exec(e.slice(n,n+1));return i?n+i[0].length:-1}function ZV(t,e,n){var i=ri.exec(e.slice(n));return i?(t.Q=+i[0],n+i[0].length):-1}function YV(t,e,n){var i=ri.exec(e.slice(n));return i?(t.s=+i[0],n+i[0].length):-1}function vz(t,e){return ke(t.getDate(),e,2)}function XV(t,e){return ke(t.getHours(),e,2)}function WV(t,e){return ke(t.getHours()%12||12,e,2)}function VV(t,e){return ke(1+pu.count(es(t),t),e,3)}function JP(t,e){return ke(t.getMilliseconds(),e,3)}function QV(t,e){return JP(t,e)+"000"}function KV(t,e){return ke(t.getMonth()+1,e,2)}function JV(t,e){return ke(t.getMinutes(),e,2)}function tQ(t,e){return ke(t.getSeconds(),e,2)}function eQ(t){var e=t.getDay();return e===0?7:e}function nQ(t,e){return ke(Np.count(es(t)-1,t),e,2)}function t9(t){var e=t.getDay();return e>=4||e===0?Wd(t):Wd.ceil(t)}function iQ(t,e){return t=t9(t),ke(Wd.count(es(t),t)+(es(t).getDay()===4),e,2)}function rQ(t){return t.getDay()}function aQ(t,e){return ke(L_.count(es(t)-1,t),e,2)}function oQ(t,e){return ke(t.getFullYear()%100,e,2)}function sQ(t,e){return t=t9(t),ke(t.getFullYear()%100,e,2)}function uQ(t,e){return ke(t.getFullYear()%1e4,e,4)}function lQ(t,e){var n=t.getDay();return t=n>=4||n===0?Wd(t):Wd.ceil(t),ke(t.getFullYear()%1e4,e,4)}function cQ(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+ke(e/60|0,"0",2)+ke(e%60,"0",2)}function _z(t,e){return ke(t.getUTCDate(),e,2)}function fQ(t,e){return ke(t.getUTCHours(),e,2)}function hQ(t,e){return ke(t.getUTCHours()%12||12,e,2)}function dQ(t,e){return ke(1+Wl.count(ns(t),t),e,3)}function e9(t,e){return ke(t.getUTCMilliseconds(),e,3)}function pQ(t,e){return e9(t,e)+"000"}function gQ(t,e){return ke(t.getUTCMonth()+1,e,2)}function mQ(t,e){return ke(t.getUTCMinutes(),e,2)}function yQ(t,e){return ke(t.getUTCSeconds(),e,2)}function vQ(t){var e=t.getUTCDay();return e===0?7:e}function _Q(t,e){return ke(Lp.count(ns(t)-1,t),e,2)}function n9(t){var e=t.getUTCDay();return e>=4||e===0?Vd(t):Vd.ceil(t)}function bQ(t,e){return t=n9(t),ke(Vd.count(ns(t),t)+(ns(t).getUTCDay()===4),e,2)}function xQ(t){return t.getUTCDay()}function wQ(t,e){return ke(z_.count(ns(t)-1,t),e,2)}function EQ(t,e){return ke(t.getUTCFullYear()%100,e,2)}function SQ(t,e){return t=n9(t),ke(t.getUTCFullYear()%100,e,2)}function AQ(t,e){return ke(t.getUTCFullYear()%1e4,e,4)}function TQ(t,e){var n=t.getUTCDay();return t=n>=4||n===0?Vd(t):Vd.ceil(t),ke(t.getUTCFullYear()%1e4,e,4)}function CQ(){return"+0000"}function bz(){return"%"}function xz(t){return+t}function wz(t){return Math.floor(+t/1e3)}var pd,HM,i9,GM,r9;MQ({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function MQ(t){return pd=KP(t),HM=pd.format,i9=pd.parse,GM=pd.utcFormat,r9=pd.utcParse,pd}function Bm(t){const e={};return n=>e[n]||(e[n]=t(n))}function kQ(t,e){return n=>{const i=t(n),r=i.indexOf(e);if(r<0)return i;let a=OQ(i,r);const o=a<i.length?i.slice(a):"";for(;--a>r;)if(i[a]!=="0"){++a;break}return i.slice(0,a)+o}}function OQ(t,e){let n=t.lastIndexOf("e"),i;if(n>0)return n;for(n=t.length;--n>e;)if(i=t.charCodeAt(n),i>=48&&i<=57)return n+1}function a9(t){const e=Bm(t.format),n=t.formatPrefix;return{format:e,formatPrefix:n,formatFloat(i){const r=Bf(i||",");if(r.precision==null){switch(r.precision=12,r.type){case"%":r.precision-=2;break;case"e":r.precision-=1;break}return kQ(e(r),e(".1f")(1)[1])}else return e(r)},formatSpan(i,r,a,o){o=Bf(o??",f");const s=ec(i,r,a),l=Math.max(Math.abs(i),Math.abs(r));let f;if(o.precision==null)switch(o.type){case"s":return isNaN(f=kP(s,l))||(o.precision=f),n(o,l);case"":case"e":case"g":case"p":case"r":{isNaN(f=OP(s,l))||(o.precision=f-(o.type==="e"));break}case"f":case"%":{isNaN(f=MP(s))||(o.precision=f-(o.type==="%")*2);break}}return e(o)}}}let vT;o9();function o9(){return vT=a9({format:fx,formatPrefix:BM})}function s9(t){return a9(CP(t))}function F_(t){return arguments.length?vT=s9(t):vT}function Ez(t,e,n){n=n||{},Rt(n)||dt(`Invalid time multi-format specifier: ${n}`);const i=e(Ca),r=e(ea),a=e(ta),o=e(Sr),s=e(Bn),l=e(zi),f=e(Er),d=e(vi),p=t(n[so]||".%L"),m=t(n[Ca]||":%S"),_=t(n[ea]||"%I:%M"),b=t(n[ta]||"%I %p"),x=t(n[Sr]||n[Di]||"%a %d"),S=t(n[Bn]||"%b %d"),T=t(n[zi]||"%B"),M=t(n[Er]||"%B"),k=t(n[vi]||"%Y");return $=>(i($)<$?p:r($)<$?m:a($)<$?_:o($)<$?b:l($)<$?s($)<$?x:S:d($)<$?f($)<$?T:M:k)($)}function u9(t){const e=Bm(t.format),n=Bm(t.utcFormat);return{timeFormat:i=>Dt(i)?e(i):Ez(e,zp,i),utcFormat:i=>Dt(i)?n(i):Ez(n,Fp,i),timeParse:Bm(t.parse),utcParse:Bm(t.utcParse)}}let _T;l9();function l9(){return _T=u9({format:HM,parse:i9,utcFormat:GM,utcParse:r9})}function c9(t){return u9(KP(t))}function _0(t){return arguments.length?_T=c9(t):_T}const bT=(t,e)=>oe({},t,e);function f9(t,e){const n=t?s9(t):F_(),i=e?c9(e):_0();return bT(n,i)}function ZM(t,e){const n=arguments.length;return n&&n!==2&&dt("defaultLocale expects either zero or two arguments."),n?bT(F_(t),_0(e)):bT(F_(),_0())}function $Q(){return o9(),l9(),ZM()}const DQ=/^(data:|([A-Za-z]+:)?\/\/)/,RQ=/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp|file|data):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,NQ=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,Sz="file://";function LQ(t,e){return n=>({options:n||{},sanitize:FQ,load:zQ,fileAccess:!1,file:PQ(),http:UQ(t)})}async function zQ(t,e){const n=await this.sanitize(t,e),i=n.href;return n.localFile?this.file(i):this.http(i,e)}async function FQ(t,e){e=oe({},this.options,e);const n=this.fileAccess,i={href:null};let r,a,o;const s=RQ.test(t.replace(NQ,""));(t==null||typeof t!="string"||!s)&&dt("Sanitize failure, invalid URI: "+Mt(t));const l=DQ.test(t);return(o=e.baseURL)&&!l&&(!t.startsWith("/")&&!o.endsWith("/")&&(t="/"+t),t=o+t),a=(r=t.startsWith(Sz))||e.mode==="file"||e.mode!=="http"&&!l&&n,r?t=t.slice(Sz.length):t.startsWith("//")&&(e.defaultProtocol==="file"?(t=t.slice(2),a=!0):t=(e.defaultProtocol||"http")+":"+t),Object.defineProperty(i,"localFile",{value:!!a}),i.href=t,e.target&&(i.target=e.target+""),e.rel&&(i.rel=e.rel+""),e.context==="image"&&e.crossOrigin&&(i.crossOrigin=e.crossOrigin+""),i}function PQ(t){return BQ}async function BQ(){dt("No file system access.")}function UQ(t){return t?async function(e,n){const i=oe({},this.options.http,n),r=n&&n.response,a=await t(e,i);return a.ok?se(a[r])?a[r]():a.text():dt(a.status+""+a.statusText)}:IQ}async function IQ(){dt("No HTTP fetch method available.")}const qQ=t=>t!=null&&t===t,jQ=t=>t==="true"||t==="false"||t===!0||t===!1,HQ=t=>!Number.isNaN(Date.parse(t)),h9=t=>!Number.isNaN(+t)&&!(t instanceof Date),GQ=t=>h9(t)&&Number.isInteger(+t),xT={boolean:LM,integer:Ri,number:Ri,date:zM,string:FM,unknown:Bi},yv=[jQ,GQ,h9,HQ],ZQ=["boolean","integer","number","date"];function d9(t,e){if(!t||!t.length)return"unknown";const n=t.length,i=yv.length,r=yv.map((a,o)=>o+1);for(let a=0,o=0,s,l;a<n;++a)for(l=e?t[a][e]:t[a],s=0;s<i;++s)if(r[s]&&qQ(l)&&!yv[s](l)&&(r[s]=0,++o,o===yv.length))return"string";return ZQ[r.reduce((a,o)=>a===0?o:a,0)-1]}function p9(t,e){return e.reduce((n,i)=>(n[i]=d9(t,i),n),{})}function Az(t){const e=function(n,i){const r={delimiter:t};return YM(n,i?oe(i,r):r)};return e.responseType="text",e}function YM(t,e){return e.header&&(t=e.header.map(Mt).join(e.delimiter)+`
`+t),TW(e.delimiter).parse(t+"")}YM.responseType="text";function YQ(t){return typeof Buffer=="function"&&se(Buffer.isBuffer)?Buffer.isBuffer(t):!1}function XM(t,e){const n=e&&e.property?Aa(e.property):Bi;return Rt(t)&&!YQ(t)?XQ(n(t),e):n(JSON.parse(t))}XM.responseType="json";function XQ(t,e){return!gt(t)&&sP(t)&&(t=[...t]),e&&e.copy?JSON.parse(JSON.stringify(t)):t}const WQ={interior:(t,e)=>t!==e,exterior:(t,e)=>t===e};function g9(t,e){let n,i,r,a;return t=XM(t,e),e&&e.feature?(n=OW,r=e.feature):e&&e.mesh?(n=DW,r=e.mesh,a=WQ[e.filter]):dt("Missing TopoJSON feature or mesh parameter."),i=(i=t.objects[r])?n(t,i,a):dt("Invalid TopoJSON object: "+r),i&&i.features||[i]}g9.responseType="json";const i_={dsv:YM,csv:Az(","),tsv:Az("	"),json:XM,topojson:g9};function WM(t,e){return arguments.length>1?(i_[t]=e,this):zt(i_,t)?i_[t]:null}function m9(t){const e=WM(t);return e&&e.responseType||"text"}function y9(t,e,n,i){e=e||{};const r=WM(e.type||"json");return r||dt("Unknown data format type: "+e.type),t=r(t,e),e.parse&&VQ(t,e.parse,n,i),zt(t,"columns")&&delete t.columns,t}function VQ(t,e,n,i){if(!t.length)return;const r=_0();n=n||r.timeParse,i=i||r.utcParse;let a=t.columns||Object.keys(t[0]),o,s,l,f,d,p;e==="auto"&&(e=p9(t,a)),a=Object.keys(e);const m=a.map(_=>{const b=e[_];let x,S;if(b&&(b.startsWith("date:")||b.startsWith("utc:")))return x=b.split(/:(.+)?/,2),S=x[1],(S[0]==="'"&&S[S.length-1]==="'"||S[0]==='"'&&S[S.length-1]==='"')&&(S=S.slice(1,-1)),(x[0]==="utc"?i:n)(S);if(!xT[b])throw Error("Illegal format pattern: "+_+":"+b);return xT[b]});for(l=0,d=t.length,p=a.length;l<d;++l)for(o=t[l],f=0;f<p;++f)s=a[f],o[s]=m[f](o[s])}const yx=LQ(typeof fetch<"u"&&fetch);function vx(t){const e=t||Bi,n=[],i={};return n.add=r=>{const a=e(r);return i[a]||(i[a]=1,n.push(r)),n},n.remove=r=>{const a=e(r);if(i[a]){i[a]=0;const o=n.indexOf(r);o>=0&&n.splice(o,1)}return n},n}async function r_(t,e){try{await e(t)}catch(n){t.error(n)}}const v9=Symbol("vega_id");let QQ=1;function _x(t){return!!(t&&Gt(t))}function Gt(t){return t[v9]}function _9(t,e){return t[v9]=e,t}function De(t){const e=t===Object(t)?t:{data:t};return Gt(e)?e:_9(e,QQ++)}function VM(t){return bx(t,De({}))}function bx(t,e){for(const n in t)e[n]=t[n];return e}function b9(t,e){return _9(e,Gt(t))}function lh(t,e){return t?e?(n,i)=>t(n,i)||Gt(e(n))-Gt(e(i)):(n,i)=>t(n,i)||Gt(n)-Gt(i):null}function x9(t){return t&&t.constructor===ch}function ch(){const t=[],e=[],n=[],i=[],r=[];let a=null,o=!1;return{constructor:ch,insert(s){const l=Nt(s),f=l.length;for(let d=0;d<f;++d)t.push(l[d]);return this},remove(s){const l=se(s)?i:e,f=Nt(s),d=f.length;for(let p=0;p<d;++p)l.push(f[p]);return this},modify(s,l,f){const d={field:l,value:Ui(f)};return se(s)?(d.filter=s,r.push(d)):(d.tuple=s,n.push(d)),this},encode(s,l){return se(s)?r.push({filter:s,field:l}):n.push({tuple:s,field:l}),this},clean(s){return a=s,this},reflow(){return o=!0,this},pulse(s,l){const f={},d={};let p,m,_,b,x,S;for(p=0,m=l.length;p<m;++p)f[Gt(l[p])]=1;for(p=0,m=e.length;p<m;++p)x=e[p],f[Gt(x)]=-1;for(p=0,m=i.length;p<m;++p)b=i[p],l.forEach(M=>{b(M)&&(f[Gt(M)]=-1)});for(p=0,m=t.length;p<m;++p)x=t[p],S=Gt(x),f[S]?f[S]=1:s.add.push(De(t[p]));for(p=0,m=l.length;p<m;++p)x=l[p],f[Gt(x)]<0&&s.rem.push(x);function T(M,k,$){$?M[k]=$(M):s.encode=k,o||(d[Gt(M)]=M)}for(p=0,m=n.length;p<m;++p)_=n[p],x=_.tuple,b=_.field,S=f[Gt(x)],S>0&&(T(x,b,_.value),s.modifies(b));for(p=0,m=r.length;p<m;++p)_=r[p],b=_.filter,l.forEach(M=>{b(M)&&f[Gt(M)]>0&&T(M,_.field,_.value)}),s.modifies(_.field);if(o)s.mod=e.length||i.length?l.filter(M=>f[Gt(M)]>0):l.slice();else for(S in d)s.mod.push(d[S]);return(a||a==null&&(e.length||i.length))&&s.clean(!0),s}}}const a_="_:mod:_";function xx(){Object.defineProperty(this,a_,{writable:!0,value:{}})}xx.prototype={set(t,e,n,i){const r=this,a=r[t],o=r[a_];return e!=null&&e>=0?(a[e]!==n||i)&&(a[e]=n,o[e+":"+t]=-1,o[t]=-1):(a!==n||i)&&(r[t]=n,o[t]=gt(n)?1+n.length:-1),r},modified(t,e){const n=this[a_];if(arguments.length){if(gt(t)){for(let i=0;i<t.length;++i)if(n[t[i]])return!0;return!1}}else{for(const i in n)if(n[i])return!0;return!1}return e!=null&&e>=0?e+1<n[t]||!!n[e+":"+t]:!!n[t]},clear(){return this[a_]={},this}};let KQ=0;const JQ="pulse",tK=new xx,eK=1,nK=2;function Ze(t,e,n,i){this.id=++KQ,this.value=t,this.stamp=-1,this.rank=-1,this.qrank=-1,this.flags=0,e&&(this._update=e),n&&this.parameters(n,i)}function Tz(t){return function(e){const n=this.flags;return arguments.length===0?!!(n&t):(this.flags=e?n|t:n&~t,this)}}Ze.prototype={targets(){return this._targets||(this._targets=vx(X0))},set(t){return this.value!==t?(this.value=t,1):0},skip:Tz(eK),modified:Tz(nK),parameters(t,e,n){e=e!==!1;const i=this._argval=this._argval||new xx,r=this._argops=this._argops||[],a=[];let o,s,l,f;const d=(p,m,_)=>{_ instanceof Ze?(_!==this&&(e&&_.targets().add(this),a.push(_)),r.push({op:_,name:p,index:m})):i.set(p,m,_)};for(o in t)if(s=t[o],o===JQ)Nt(s).forEach(p=>{p instanceof Ze?p!==this&&(p.targets().add(this),a.push(p)):dt("Pulse parameters must be operator instances.")}),this.source=s;else if(gt(s))for(i.set(o,-1,Array(l=s.length)),f=0;f<l;++f)d(o,f,s[f]);else d(o,-1,s);return this.marshall().clear(),n&&(r.initonly=!0),a},marshall(t){const e=this._argval||tK,n=this._argops;let i,r,a,o;if(n){const s=n.length;for(r=0;r<s;++r)i=n[r],a=i.op,o=a.modified()&&a.stamp===t,e.set(i.name,i.index,a.value,o);if(n.initonly){for(r=0;r<s;++r)i=n[r],i.op.targets().remove(this);this._argops=null,this._update=null}}return e},detach(){const t=this._argops;let e,n,i,r;if(t)for(e=0,n=t.length;e<n;++e)i=t[e],r=i.op,r._targets&&r._targets.remove(this);this.pulse=null,this.source=null},evaluate(t){const e=this._update;if(e){const n=this.marshall(t.stamp),i=e.call(this,n,t);if(n.clear(),i!==this.value)this.value=i;else if(!this.modified())return t.StopPropagation}},run(t){if(t.stamp<this.stamp)return t.StopPropagation;let e;return this.skip()?(this.skip(!1),e=0):e=this.evaluate(t),this.pulse=e||t}};function iK(t,e,n,i){let r=1,a;return t instanceof Ze?a=t:t&&t.prototype instanceof Ze?a=new t:se(t)?a=new Ze(null,t):(r=0,a=new Ze(t,e)),this.rank(a),r&&(i=n,n=e),n&&this.connect(a,a.parameters(n,i)),this.touch(a),a}function rK(t,e){const n=t.rank,i=e.length;for(let r=0;r<i;++r)if(n<e[r].rank){this.rerank(t);return}}let aK=0;function wx(t,e,n){this.id=++aK,this.value=null,n&&(this.receive=n),t&&(this._filter=t),e&&(this._apply=e)}function $l(t,e,n){return new wx(t,e,n)}wx.prototype={_filter:Ta,_apply:Bi,targets(){return this._targets||(this._targets=vx(X0))},consume(t){return arguments.length?(this._consume=!!t,this):!!this._consume},receive(t){if(this._filter(t)){const e=this.value=this._apply(t),n=this._targets,i=n?n.length:0;for(let r=0;r<i;++r)n[r].receive(e);this._consume&&(t.preventDefault(),t.stopPropagation())}},filter(t){const e=$l(t);return this.targets().add(e),e},apply(t){const e=$l(null,t);return this.targets().add(e),e},merge(){const t=$l();this.targets().add(t);for(let e=0,n=arguments.length;e<n;++e)arguments[e].targets().add(t);return t},throttle(t){let e=-1;return this.filter(()=>{const n=Date.now();return n-e>t?(e=n,1):0})},debounce(t){const e=$l();return this.targets().add($l(null,null,DM(t,n=>{const i=n.dataflow;e.receive(n),i&&i.run&&i.run()}))),e},between(t,e){let n=!1;return t.targets().add($l(null,null,()=>n=!0)),e.targets().add($l(null,null,()=>n=!1)),this.filter(()=>n)},detach(){this._filter=Ta,this._targets=null}};function oK(t,e,n,i){const r=this,a=$l(n,i),o=function(f){f.dataflow=r;try{a.receive(f)}catch(d){r.error(d)}finally{r.run()}};let s;typeof t=="string"&&typeof document<"u"?s=document.querySelectorAll(t):s=Nt(t);const l=s.length;for(let f=0;f<l;++f)s[f].addEventListener(e,o);return a}function sK(t,e){const n=this.locale();return y9(t,e,n.timeParse,n.utcParse)}function uK(t,e,n){return e=this.parse(e,n),this.pulse(t,this.changeset().insert(e))}async function lK(t,e){const n=this;let i=0,r;try{r=await n.loader().load(t,{context:"dataflow",response:m9(e&&e.type)});try{r=n.parse(r,e)}catch(a){i=-2,n.warn("Data ingestion failed",t,a)}}catch(a){i=-1,n.warn("Loading failed",t,a)}return{data:r,status:i}}async function cK(t,e,n){const i=this,r=i._pending||fK(i);r.requests+=1;const a=await i.request(e,n);return i.pulse(t,i.changeset().remove(Ta).insert(a.data||[])),r.done(),a}function fK(t){let e;const n=new Promise(i=>e=i);return n.requests=0,n.done=()=>{--n.requests===0&&(t._pending=null,e(t))},t._pending=n}const hK={skip:!0};function dK(t,e,n,i,r){return(t instanceof Ze?gK:pK)(this,t,e,n,i,r),this}function pK(t,e,n,i,r,a){const o=oe({},a,hK);let s,l;se(n)||(n=Ui(n)),i===void 0?s=f=>t.touch(n(f)):se(i)?(l=new Ze(null,i,r,!1),s=f=>{l.evaluate(f);const d=n(f),p=l.value;x9(p)?t.pulse(d,p,a):t.update(d,p,o)}):s=f=>t.update(n(f),i,o),e.apply(s)}function gK(t,e,n,i,r,a){if(i===void 0)e.targets().add(n);else{const o=a||{},s=new Ze(null,mK(n,i),r,!1);s.modified(o.force),s.rank=e.rank,e.targets().add(s),n&&(s.skip(!0),s.value=n.value,s.targets().add(n),t.connect(n,[s]))}}function mK(t,e){return e=se(e)?e:Ui(e),t?function(n,i){const r=e(n,i);return t.skip()||(t.skip(r!==this.value).value=r),r}:e}function yK(t){t.rank=++this._rank}function vK(t){const e=[t];let n,i,r;for(;e.length;)if(this.rank(n=e.pop()),i=n._targets)for(r=i.length;--r>=0;)e.push(n=i[r]),n===t&&dt("Cycle detected in dataflow graph.")}const P_={},Uo=1,Nl=2,nu=4,_K=Uo|Nl,Cz=Uo|nu,gd=Uo|Nl|nu,Mz=8,hm=16,kz=32,Oz=64;function Vl(t,e,n){this.dataflow=t,this.stamp=e??-1,this.add=[],this.rem=[],this.mod=[],this.fields=null,this.encode=n||null}function CS(t,e){const n=[];return Rl(t,e,i=>n.push(i)),n}function $z(t,e){const n={};return t.visit(e,i=>{n[Gt(i)]=1}),i=>n[Gt(i)]?null:i}function vv(t,e){return t?(n,i)=>t(n,i)&&e(n,i):e}Vl.prototype={StopPropagation:P_,ADD:Uo,REM:Nl,MOD:nu,ADD_REM:_K,ADD_MOD:Cz,ALL:gd,REFLOW:Mz,SOURCE:hm,NO_SOURCE:kz,NO_FIELDS:Oz,fork(t){return new Vl(this.dataflow).init(this,t)},clone(){const t=this.fork(gd);return t.add=t.add.slice(),t.rem=t.rem.slice(),t.mod=t.mod.slice(),t.source&&(t.source=t.source.slice()),t.materialize(gd|hm)},addAll(){let t=this;return!t.source||t.add===t.rem||!t.rem.length&&t.source.length===t.add.length||(t=new Vl(this.dataflow).init(this),t.add=t.source,t.rem=[]),t},init(t,e){const n=this;return n.stamp=t.stamp,n.encode=t.encode,t.fields&&!(e&Oz)&&(n.fields=t.fields),e&Uo?(n.addF=t.addF,n.add=t.add):(n.addF=null,n.add=[]),e&Nl?(n.remF=t.remF,n.rem=t.rem):(n.remF=null,n.rem=[]),e&nu?(n.modF=t.modF,n.mod=t.mod):(n.modF=null,n.mod=[]),e&kz?(n.srcF=null,n.source=null):(n.srcF=t.srcF,n.source=t.source,t.cleans&&(n.cleans=t.cleans)),n},runAfter(t){this.dataflow.runAfter(t)},changed(t){const e=t||gd;return e&Uo&&this.add.length||e&Nl&&this.rem.length||e&nu&&this.mod.length},reflow(t){if(t)return this.fork(gd).reflow();const e=this.add.length,n=this.source&&this.source.length;return n&&n!==e&&(this.mod=this.source,e&&this.filter(nu,$z(this,Uo))),this},clean(t){return arguments.length?(this.cleans=!!t,this):this.cleans},modifies(t){const e=this.fields||(this.fields={});return gt(t)?t.forEach(n=>e[n]=!0):e[t]=!0,this},modified(t,e){const n=this.fields;return(e||this.mod.length)&&n?arguments.length?gt(t)?t.some(i=>n[i]):n[t]:!!n:!1},filter(t,e){const n=this;return t&Uo&&(n.addF=vv(n.addF,e)),t&Nl&&(n.remF=vv(n.remF,e)),t&nu&&(n.modF=vv(n.modF,e)),t&hm&&(n.srcF=vv(n.srcF,e)),n},materialize(t){t=t||gd;const e=this;return t&Uo&&e.addF&&(e.add=CS(e.add,e.addF),e.addF=null),t&Nl&&e.remF&&(e.rem=CS(e.rem,e.remF),e.remF=null),t&nu&&e.modF&&(e.mod=CS(e.mod,e.modF),e.modF=null),t&hm&&e.srcF&&(e.source=e.source.filter(e.srcF),e.srcF=null),e},visit(t,e){const n=this,i=e;if(t&hm)return Rl(n.source,n.srcF,i),n;t&Uo&&Rl(n.add,n.addF,i),t&Nl&&Rl(n.rem,n.remF,i),t&nu&&Rl(n.mod,n.modF,i);const r=n.source;if(t&Mz&&r){const a=n.add.length+n.mod.length;a===r.length||(a?Rl(r,$z(n,Cz),i):Rl(r,n.srcF,i))}return n}};function QM(t,e,n,i){const r=this;let a=0;this.dataflow=t,this.stamp=e,this.fields=null,this.encode=i||null,this.pulses=n;for(const o of n)if(o.stamp===e){if(o.fields){const s=r.fields||(r.fields={});for(const l in o.fields)s[l]=1}o.changed(r.ADD)&&(a|=r.ADD),o.changed(r.REM)&&(a|=r.REM),o.changed(r.MOD)&&(a|=r.MOD)}this.changes=a}kt(QM,Vl,{fork(t){const e=new Vl(this.dataflow).init(this,t&this.NO_FIELDS);return t!==void 0&&(t&e.ADD&&this.visit(e.ADD,n=>e.add.push(n)),t&e.REM&&this.visit(e.REM,n=>e.rem.push(n)),t&e.MOD&&this.visit(e.MOD,n=>e.mod.push(n))),e},changed(t){return this.changes&t},modified(t){const e=this,n=e.fields;return n&&e.changes&e.MOD?gt(t)?t.some(i=>n[i]):n[t]:0},filter(){dt("MultiPulse does not support filtering.")},materialize(){dt("MultiPulse does not support materialization.")},visit(t,e){const n=this,i=n.pulses,r=i.length;let a=0;if(t&n.SOURCE)for(;a<r;++a)i[a].visit(t,e);else for(;a<r;++a)i[a].stamp===n.stamp&&i[a].visit(t,e);return n}});async function bK(t,e,n){const i=this,r=[];if(i._pulse)return w9(i);if(i._pending&&await i._pending,e&&await r_(i,e),!i._touched.length)return i.debug("Dataflow invoked, but nothing to do."),i;const a=++i._clock;i._pulse=new Vl(i,a,t),i._touched.forEach(d=>i._enqueue(d,!0)),i._touched=vx(X0);let o=0,s,l,f;try{for(;i._heap.size()>0;){if(s=i._heap.pop(),s.rank!==s.qrank){i._enqueue(s,!0);continue}l=s.run(i._getPulse(s,t)),l.then?l=await l:l.async&&(r.push(l.async),l=P_),l!==P_&&s._targets&&s._targets.forEach(d=>i._enqueue(d)),++o}}catch(d){i._heap.clear(),f=d}if(i._input={},i._pulse=null,i.debug(`Pulse ${a}: ${o} operators`),f&&(i._postrun=[],i.error(f)),i._postrun.length){const d=i._postrun.sort((p,m)=>m.priority-p.priority);i._postrun=[];for(let p=0;p<d.length;++p)await r_(i,d[p].callback)}return n&&await r_(i,n),r.length&&Promise.all(r).then(d=>i.runAsync(null,()=>{d.forEach(p=>{try{p(i)}catch(m){i.error(m)}})})),i}async function xK(t,e,n){for(;this._running;)await this._running;const i=()=>this._running=null;return(this._running=this.evaluate(t,e,n)).then(i,i),this._running}function wK(t,e,n){return this._pulse?w9(this):(this.evaluate(t,e,n),this)}function EK(t,e,n){if(this._pulse||e)this._postrun.push({priority:n||0,callback:t});else try{t(this)}catch(i){this.error(i)}}function w9(t){return t.error("Dataflow already running. Use runAsync() to chain invocations."),t}function SK(t,e){const n=t.stamp<this._clock;n&&(t.stamp=this._clock),(n||e)&&(t.qrank=t.rank,this._heap.push(t))}function AK(t,e){const n=t.source,i=this._clock;return n&&gt(n)?new QM(this,i,n.map(r=>r.pulse),e):this._input[t.id]||TK(this._pulse,n&&n.pulse)}function TK(t,e){return e&&e.stamp===t.stamp?e:(t=t.fork(),e&&e!==P_&&(t.source=e.source),t)}const KM={skip:!1,force:!1};function CK(t,e){const n=e||KM;return this._pulse?this._enqueue(t):this._touched.add(t),n.skip&&t.skip(!0),this}function MK(t,e,n){const i=n||KM;return(t.set(e)||i.force)&&this.touch(t,i),this}function kK(t,e,n){this.touch(t,n||KM);const i=new Vl(this,this._clock+(this._pulse?0:1)),r=t.pulse&&t.pulse.source||[];return i.target=t,this._input[t.id]=e.pulse(i,r),this}function OK(t){let e=[];return{clear:()=>e=[],size:()=>e.length,peek:()=>e[0],push:n=>(e.push(n),E9(e,0,e.length-1,t)),pop:()=>{const n=e.pop();let i;return e.length?(i=e[0],e[0]=n,$K(e,0,t)):i=n,i}}}function E9(t,e,n,i){let r,a;const o=t[n];for(;n>e;){if(a=n-1>>1,r=t[a],i(o,r)<0){t[n]=r,n=a;continue}break}return t[n]=o}function $K(t,e,n){const i=e,r=t.length,a=t[e];let o=(e<<1)+1,s;for(;o<r;)s=o+1,s<r&&n(t[o],t[s])>=0&&(o=s),t[e]=t[o],e=o,o=(e<<1)+1;return t[e]=a,E9(t,i,e,n)}function zd(){this.logger(CM()),this.logLevel(AM),this._clock=0,this._rank=0,this._locale=ZM();try{this._loader=yx()}catch{}this._touched=vx(X0),this._input={},this._pulse=null,this._heap=OK((t,e)=>t.qrank-e.qrank),this._postrun=[]}function dm(t){return function(){return this._log[t].apply(this,arguments)}}zd.prototype={stamp(){return this._clock},loader(t){return arguments.length?(this._loader=t,this):this._loader},locale(t){return arguments.length?(this._locale=t,this):this._locale},logger(t){return arguments.length?(this._log=t,this):this._log},error:dm("error"),warn:dm("warn"),info:dm("info"),debug:dm("debug"),logLevel:dm("level"),cleanThreshold:1e4,add:iK,connect:rK,rank:yK,rerank:vK,pulse:kK,touch:CK,update:MK,changeset:ch,ingest:uK,parse:sK,preload:cK,request:lK,events:oK,on:dK,evaluate:bK,run:wK,runAsync:xK,runAfter:EK,_enqueue:SK,_getPulse:AK};function ct(t,e){Ze.call(this,t,null,e)}kt(ct,Ze,{run(t){if(t.stamp<this.stamp)return t.StopPropagation;let e;return this.skip()?this.skip(!1):e=this.evaluate(t),e=e||t,e.then?e=e.then(n=>this.pulse=n):e!==t.StopPropagation&&(this.pulse=e),e},evaluate(t){const e=this.marshall(t.stamp),n=this.transform(e,t);return e.clear(),n},transform(){}});const Kd={};function S9(t){const e=A9(t);return e&&e.Definition||null}function A9(t){return t=t&&t.toLowerCase(),zt(Kd,t)?Kd[t]:null}function*T9(t,e){if(e==null)for(let n of t)n!=null&&n!==""&&(n=+n)>=n&&(yield n);else{let n=-1;for(let i of t)i=e(i,++n,t),i!=null&&i!==""&&(i=+i)>=i&&(yield i)}}function JM(t,e,n){const i=Float64Array.from(T9(t,n));return i.sort(du),e.map(r=>wP(i,r))}function tk(t,e){return JM(t,[.25,.5,.75],e)}function ek(t,e){const n=t.length,i=UW(t,e),r=tk(t,e),a=(r[2]-r[0])/1.34;return 1.06*(Math.min(i,a)||i||Math.abs(r[0])||1)*Math.pow(n,-.2)}function C9(t){const e=t.maxbins||20,n=t.base||10,i=Math.log(n),r=t.divide||[5,2];let a=t.extent[0],o=t.extent[1],s,l,f,d,p,m;const _=t.span||o-a||Math.abs(a)||1;if(t.step)s=t.step;else if(t.steps){for(d=_/e,p=0,m=t.steps.length;p<m&&t.steps[p]<d;++p);s=t.steps[Math.max(0,p-1)]}else{for(l=Math.ceil(Math.log(e)/i),f=t.minstep||0,s=Math.max(f,Math.pow(n,Math.round(Math.log(_)/i)-l));Math.ceil(_/s)>e;)s*=n;for(p=0,m=r.length;p<m;++p)d=s/r[p],d>=f&&_/d<=e&&(s=d)}d=Math.log(s);const b=d>=0?0:~~(-d/i)+1,x=Math.pow(n,-b-1);return(t.nice||t.nice===void 0)&&(d=Math.floor(a/s+x)*s,a=a<d?d-s:d,o=Math.ceil(o/s)*s),{start:a,stop:o===a?a+s:o,step:s}}var Ma=Math.random;function DK(t){Ma=t}function M9(t,e,n,i){if(!t.length)return[void 0,void 0];const r=Float64Array.from(T9(t,i)),a=r.length,o=e;let s,l,f,d;for(f=0,d=Array(o);f<o;++f){for(s=0,l=0;l<a;++l)s+=r[~~(Ma()*a)];d[f]=s/a}return d.sort(du),[hT(d,n/2),hT(d,1-n/2)]}function k9(t,e,n,i){i=i||(m=>m);const r=t.length,a=new Float64Array(r);let o=0,s=1,l=i(t[0]),f=l,d=l+e,p;for(;s<r;++s){if(p=i(t[s]),p>=d){for(f=(l+f)/2;o<s;++o)a[o]=f;d=p+e,l=p}f=p}for(f=(l+f)/2;o<s;++o)a[o]=f;return n?RK(a,e+e/4):a}function RK(t,e){const n=t.length;let i=0,r=1,a,o;for(;t[i]===t[r];)++r;for(;r<n;){for(a=r+1;t[r]===t[a];)++a;if(t[r]-t[r-1]<e){for(o=r+(i+a-r-r>>1);o<r;)t[o++]=t[r];for(;o>r;)t[o--]=t[i]}i=r,r=a}return t}function NK(t){return function(){return t=(1103515245*t+12345)%2147483647,t/2147483647}}function LK(t,e){e==null&&(e=t,t=0);let n,i,r;const a={min(o){return arguments.length?(n=o||0,r=i-n,a):n},max(o){return arguments.length?(i=o||0,r=i-n,a):i},sample(){return n+Math.floor(r*Ma())},pdf(o){return o===Math.floor(o)&&o>=n&&o<i?1/r:0},cdf(o){const s=Math.floor(o);return s<n?0:s>=i?1:(s-n+1)/r},icdf(o){return o>=0&&o<=1?n-1+Math.floor(o*r):NaN}};return a.min(t).max(e)}const O9=Math.sqrt(2*Math.PI),zK=Math.SQRT2;let pm=NaN;function Ex(t,e){t=t||0,e=e??1;let n=0,i=0,r,a;if(pm===pm)n=pm,pm=NaN;else{do n=Ma()*2-1,i=Ma()*2-1,r=n*n+i*i;while(r===0||r>1);a=Math.sqrt(-2*Math.log(r)/r),n*=a,pm=i*a}return t+n*e}function nk(t,e,n){n=n??1;const i=(t-(e||0))/n;return Math.exp(-.5*i*i)/(n*O9)}function Sx(t,e,n){e=e||0,n=n??1;const i=(t-e)/n,r=Math.abs(i);let a;if(r>37)a=0;else{const o=Math.exp(-r*r/2);let s;r<7.07106781186547?(s=.0352624965998911*r+.700383064443688,s=s*r+6.37396220353165,s=s*r+33.912866078383,s=s*r+112.079291497871,s=s*r+221.213596169931,s=s*r+220.206867912376,a=o*s,s=.0883883476483184*r+1.75566716318264,s=s*r+16.064177579207,s=s*r+86.7807322029461,s=s*r+296.564248779674,s=s*r+637.333633378831,s=s*r+793.826512519948,s=s*r+440.413735824752,a=a/s):(s=r+.65,s=r+4/s,s=r+3/s,s=r+2/s,s=r+1/s,a=o/s/2.506628274631)}return i>0?1-a:a}function Ax(t,e,n){return t<0||t>1?NaN:(e||0)+(n??1)*zK*FK(2*t-1)}function FK(t){let e=-Math.log((1-t)*(1+t)),n;return e<6.25?(e-=3.125,n=-364441206401782e-35,n=-16850591381820166e-35+n*e,n=128584807152564e-32+n*e,n=11157877678025181e-33+n*e,n=-1333171662854621e-31+n*e,n=20972767875968562e-33+n*e,n=6637638134358324e-30+n*e,n=-4054566272975207e-29+n*e,n=-8151934197605472e-29+n*e,n=26335093153082323e-28+n*e,n=-12975133253453532e-27+n*e,n=-5415412054294628e-26+n*e,n=10512122733215323e-25+n*e,n=-4112633980346984e-24+n*e,n=-29070369957882005e-24+n*e,n=42347877827932404e-23+n*e,n=-13654692000834679e-22+n*e,n=-13882523362786469e-21+n*e,n=.00018673420803405714+n*e,n=-.000740702534166267+n*e,n=-.006033670871430149+n*e,n=.24015818242558962+n*e,n=1.6536545626831027+n*e):e<16?(e=Math.sqrt(e)-3.25,n=22137376921775787e-25,n=9075656193888539e-23+n*e,n=-27517406297064545e-23+n*e,n=18239629214389228e-24+n*e,n=15027403968909828e-22+n*e,n=-4013867526981546e-21+n*e,n=29234449089955446e-22+n*e,n=12475304481671779e-21+n*e,n=-47318229009055734e-21+n*e,n=6828485145957318e-20+n*e,n=24031110387097894e-21+n*e,n=-.0003550375203628475+n*e,n=.0009532893797373805+n*e,n=-.0016882755560235047+n*e,n=.002491442096107851+n*e,n=-.003751208507569241+n*e,n=.005370914553590064+n*e,n=1.0052589676941592+n*e,n=3.0838856104922208+n*e):Number.isFinite(e)?(e=Math.sqrt(e)-5,n=-27109920616438573e-27,n=-2555641816996525e-25+n*e,n=15076572693500548e-25+n*e,n=-3789465440126737e-24+n*e,n=761570120807834e-23+n*e,n=-1496002662714924e-23+n*e,n=2914795345090108e-23+n*e,n=-6771199775845234e-23+n*e,n=22900482228026655e-23+n*e,n=-99298272942317e-20+n*e,n=4526062597223154e-21+n*e,n=-1968177810553167e-20+n*e,n=7599527703001776e-20+n*e,n=-.00021503011930044477+n*e,n=-.00013871931833623122+n*e,n=1.0103004648645344+n*e,n=4.849906401408584+n*e):n=1/0,n*t}function ik(t,e){let n,i;const r={mean(a){return arguments.length?(n=a||0,r):n},stdev(a){return arguments.length?(i=a??1,r):i},sample:()=>Ex(n,i),pdf:a=>nk(a,n,i),cdf:a=>Sx(a,n,i),icdf:a=>Ax(a,n,i)};return r.mean(t).stdev(e)}function rk(t,e){const n=ik();let i=0;const r={data(a){return arguments.length?(t=a,i=a?a.length:0,r.bandwidth(e)):t},bandwidth(a){return arguments.length?(e=a,!e&&t&&(e=ek(t)),r):e},sample(){return t[~~(Ma()*i)]+e*n.sample()},pdf(a){let o=0,s=0;for(;s<i;++s)o+=n.pdf((a-t[s])/e);return o/e/i},cdf(a){let o=0,s=0;for(;s<i;++s)o+=n.cdf((a-t[s])/e);return o/i},icdf(){throw Error("KDE icdf not supported.")}};return r.data(t)}function ak(t,e){return t=t||0,e=e??1,Math.exp(t+Ex()*e)}function ok(t,e,n){if(t<=0)return 0;e=e||0,n=n??1;const i=(Math.log(t)-e)/n;return Math.exp(-.5*i*i)/(n*O9*t)}function sk(t,e,n){return Sx(Math.log(t),e,n)}function uk(t,e,n){return Math.exp(Ax(t,e,n))}function $9(t,e){let n,i;const r={mean(a){return arguments.length?(n=a||0,r):n},stdev(a){return arguments.length?(i=a??1,r):i},sample:()=>ak(n,i),pdf:a=>ok(a,n,i),cdf:a=>sk(a,n,i),icdf:a=>uk(a,n,i)};return r.mean(t).stdev(e)}function D9(t,e){let n=0,i;function r(o){const s=[];let l=0,f;for(f=0;f<n;++f)l+=s[f]=o[f]==null?1:+o[f];for(f=0;f<n;++f)s[f]/=l;return s}const a={weights(o){return arguments.length?(i=r(e=o||[]),a):e},distributions(o){return arguments.length?(o?(n=o.length,t=o):(n=0,t=[]),a.weights(e)):t},sample(){const o=Ma();let s=t[n-1],l=i[0],f=0;for(;f<n-1;l+=i[++f])if(o<l){s=t[f];break}return s.sample()},pdf(o){let s=0,l=0;for(;l<n;++l)s+=i[l]*t[l].pdf(o);return s},cdf(o){let s=0,l=0;for(;l<n;++l)s+=i[l]*t[l].cdf(o);return s},icdf(){throw Error("Mixture icdf not supported.")}};return a.distributions(t).weights(e)}function lk(t,e){return e==null&&(e=t??1,t=0),t+(e-t)*Ma()}function ck(t,e,n){return n==null&&(n=e??1,e=0),t>=e&&t<=n?1/(n-e):0}function fk(t,e,n){return n==null&&(n=e??1,e=0),t<e?0:t>n?1:(t-e)/(n-e)}function hk(t,e,n){return n==null&&(n=e??1,e=0),t>=0&&t<=1?e+t*(n-e):NaN}function R9(t,e){let n,i;const r={min(a){return arguments.length?(n=a||0,r):n},max(a){return arguments.length?(i=a??1,r):i},sample:()=>lk(n,i),pdf:a=>ck(a,n,i),cdf:a=>fk(a,n,i),icdf:a=>hk(a,n,i)};return e==null&&(e=t??1,t=0),r.min(t).max(e)}function dk(t,e,n){let i=0,r=0;for(const a of t){const o=n(a);e(a)==null||o==null||isNaN(o)||(i+=(o-i)/++r)}return{coef:[i],predict:()=>i,rSquared:0}}function V0(t,e,n,i){const r=i-t*t,a=Math.abs(r)<1e-24?0:(n-t*e)/r;return[e-a*t,a]}function Tx(t,e,n,i){t=t.filter(_=>{let b=e(_),x=n(_);return b!=null&&(b=+b)>=b&&x!=null&&(x=+x)>=x}),i&&t.sort((_,b)=>e(_)-e(b));const r=t.length,a=new Float64Array(r),o=new Float64Array(r);let s=0,l=0,f=0,d,p,m;for(m of t)a[s]=d=+e(m),o[s]=p=+n(m),++s,l+=(d-l)/s,f+=(p-f)/s;for(s=0;s<r;++s)a[s]-=l,o[s]-=f;return[a,o,l,f]}function Q0(t,e,n,i){let r=-1,a,o;for(const s of t)a=e(s),o=n(s),a!=null&&(a=+a)>=a&&o!=null&&(o=+o)>=o&&i(a,o,++r)}function Pp(t,e,n,i,r){let a=0,o=0;return Q0(t,e,n,(s,l)=>{const f=l-r(s),d=l-i;a+=f*f,o+=d*d}),1-a/o}function pk(t,e,n){let i=0,r=0,a=0,o=0,s=0;Q0(t,e,n,(d,p)=>{++s,i+=(d-i)/s,r+=(p-r)/s,a+=(d*p-a)/s,o+=(d*d-o)/s});const l=V0(i,r,a,o),f=d=>l[0]+l[1]*d;return{coef:l,predict:f,rSquared:Pp(t,e,n,r,f)}}function N9(t,e,n){let i=0,r=0,a=0,o=0,s=0;Q0(t,e,n,(d,p)=>{++s,d=Math.log(d),i+=(d-i)/s,r+=(p-r)/s,a+=(d*p-a)/s,o+=(d*d-o)/s});const l=V0(i,r,a,o),f=d=>l[0]+l[1]*Math.log(d);return{coef:l,predict:f,rSquared:Pp(t,e,n,r,f)}}function L9(t,e,n){const[i,r,a,o]=Tx(t,e,n);let s=0,l=0,f=0,d=0,p=0,m,_,b;Q0(t,e,n,(M,k)=>{m=i[p++],_=Math.log(k),b=m*k,s+=(k*_-s)/p,l+=(b-l)/p,f+=(b*_-f)/p,d+=(m*b-d)/p});const[x,S]=V0(l/o,s/o,f/o,d/o),T=M=>Math.exp(x+S*(M-a));return{coef:[Math.exp(x-S*a),S],predict:T,rSquared:Pp(t,e,n,o,T)}}function z9(t,e,n){let i=0,r=0,a=0,o=0,s=0,l=0;Q0(t,e,n,(p,m)=>{const _=Math.log(p),b=Math.log(m);++l,i+=(_-i)/l,r+=(b-r)/l,a+=(_*b-a)/l,o+=(_*_-o)/l,s+=(m-s)/l});const f=V0(i,r,a,o),d=p=>f[0]*Math.pow(p,f[1]);return f[0]=Math.exp(f[0]),{coef:f,predict:d,rSquared:Pp(t,e,n,s,d)}}function gk(t,e,n){const[i,r,a,o]=Tx(t,e,n),s=i.length;let l=0,f=0,d=0,p=0,m=0,_,b,x,S;for(_=0;_<s;)b=i[_],x=r[_++],S=b*b,l+=(S-l)/_,f+=(S*b-f)/_,d+=(S*S-d)/_,p+=(b*x-p)/_,m+=(S*x-m)/_;const T=d-l*l,M=l*T-f*f,k=(m*l-p*f)/M,$=(p*T-m*f)/M,D=-k*l,F=N=>(N=N-a,k*N*N+$*N+D+o);return{coef:[D-$*a+k*a*a+o,$-2*k*a,k],predict:F,rSquared:Pp(t,e,n,o,F)}}function F9(t,e,n,i){if(i===0)return dk(t,e,n);if(i===1)return pk(t,e,n);if(i===2)return gk(t,e,n);const[r,a,o,s]=Tx(t,e,n),l=r.length,f=[],d=[],p=i+1;let m,_,b,x,S;for(m=0;m<p;++m){for(b=0,x=0;b<l;++b)x+=Math.pow(r[b],m)*a[b];for(f.push(x),S=new Float64Array(p),_=0;_<p;++_){for(b=0,x=0;b<l;++b)x+=Math.pow(r[b],m+_);S[_]=x}d.push(S)}d.push(f);const T=BK(d),M=k=>{k-=o;let $=s+T[0]+T[1]*k+T[2]*k*k;for(m=3;m<p;++m)$+=T[m]*Math.pow(k,m);return $};return{coef:PK(p,T,-o,s),predict:M,rSquared:Pp(t,e,n,s,M)}}function PK(t,e,n,i){const r=Array(t);let a,o,s,l;for(a=0;a<t;++a)r[a]=0;for(a=t-1;a>=0;--a)for(s=e[a],l=1,r[a]+=s,o=1;o<=a;++o)l*=(a+1-o)/o,r[a-o]+=s*Math.pow(n,o)*l;return r[0]+=i,r}function BK(t){const e=t.length-1,n=[];let i,r,a,o,s;for(i=0;i<e;++i){for(o=i,r=i+1;r<e;++r)Math.abs(t[i][r])>Math.abs(t[i][o])&&(o=r);for(a=i;a<e+1;++a)s=t[a][i],t[a][i]=t[a][o],t[a][o]=s;for(r=i+1;r<e;++r)for(a=e;a>=i;a--)t[a][r]-=t[a][i]*t[i][r]/t[i][i]}for(r=e-1;r>=0;--r){for(s=0,a=r+1;a<e;++a)s+=t[a][r]*n[a];n[r]=(t[e][r]-s)/t[r][r]}return n}const Dz=2,Rz=1e-12;function P9(t,e,n,i){const[r,a,o,s]=Tx(t,e,n,!0),l=r.length,f=Math.max(2,~~(i*l)),d=new Float64Array(l),p=new Float64Array(l),m=new Float64Array(l).fill(1);for(let _=-1;++_<=Dz;){const b=[0,f-1];for(let S=0;S<l;++S){const T=r[S],M=b[0],k=b[1],$=T-r[M]>r[k]-T?M:k;let D=0,F=0,N=0,I=0,q=0;const Y=1/Math.abs(r[$]-T||1);for(let nt=M;nt<=k;++nt){const W=r[nt],j=a[nt],U=UK(Math.abs(T-W)*Y)*m[nt],X=W*U;D+=U,F+=X,N+=j*U,I+=j*X,q+=W*X}const[H,et]=V0(F/D,N/D,I/D,q/D);d[S]=H+et*T,p[S]=Math.abs(a[S]-d[S]),IK(r,S+1,b)}if(_===Dz)break;const x=EP(p);if(Math.abs(x)<Rz)break;for(let S=0,T,M;S<l;++S)T=p[S]/(6*x),m[S]=T>=1?Rz:(M=1-T*T)*M}return qK(r,d,o,s)}function UK(t){return(t=1-t*t*t)*t*t}function IK(t,e,n){const i=t[e];let r=n[0],a=n[1]+1;if(!(a>=t.length))for(;e>r&&t[a]-i<=i-t[r];)n[0]=++r,n[1]=a,++a}function qK(t,e,n,i){const r=t.length,a=[];let o=0,s=0,l=[],f;for(;o<r;++o)f=t[o]+n,l[0]===f?l[1]+=(e[o]-l[1])/++s:(s=0,l[1]+=i,l=[f,e[o]],a.push(l));return l[1]+=i,a}const jK=.5*Math.PI/180;function Cx(t,e,n,i){n=n||25,i=Math.max(n,i||200);const r=x=>[x,t(x)],a=e[0],o=e[1],s=o-a,l=s/i,f=[r(a)],d=[];if(n===i){for(let x=1;x<i;++x)f.push(r(a+x/n*s));return f.push(r(o)),f}else{d.push(r(o));for(let x=n;--x>0;)d.push(r(a+x/n*s))}let p=f[0],m=d[d.length-1];const _=1/s,b=HK(p[1],d);for(;m;){const x=r((p[0]+m[0])/2);x[0]-p[0]>=l&&GK(p,x,m,_,b)>jK?d.push(x):(p=m,f.push(m),d.pop()),m=d[d.length-1]}return f}function HK(t,e){let n=t,i=t;const r=e.length;for(let a=0;a<r;++a){const o=e[a][1];o<n&&(n=o),o>i&&(i=o)}return 1/(i-n)}function GK(t,e,n,i,r){const a=Math.atan2(r*(n[1]-t[1]),i*(n[0]-t[0])),o=Math.atan2(r*(e[1]-t[1]),i*(e[0]-t[0]));return Math.abs(a-o)}function ZK(t){return e=>{const n=t.length;let i=1,r=String(t[0](e));for(;i<n;++i)r+="|"+t[i](e);return r}}function wT(t){return!t||!t.length?function(){return""}:t.length===1?t[0]:ZK(t)}function B9(t,e,n){return n||t+(e?"_"+e:"")}const MS=()=>{},YK={init:MS,add:MS,rem:MS,idx:0},b0={values:{init:t=>t.cell.store=!0,value:t=>t.cell.data.values(),idx:-1},count:{value:t=>t.cell.num},__count__:{value:t=>t.missing+t.valid},missing:{value:t=>t.missing},valid:{value:t=>t.valid},sum:{init:t=>t.sum=0,value:t=>t.valid?t.sum:void 0,add:(t,e)=>t.sum+=+e,rem:(t,e)=>t.sum-=e},product:{init:t=>t.product=1,value:t=>t.valid?t.product:void 0,add:(t,e)=>t.product*=e,rem:(t,e)=>t.product/=e},mean:{init:t=>t.mean=0,value:t=>t.valid?t.mean:void 0,add:(t,e)=>(t.mean_d=e-t.mean,t.mean+=t.mean_d/t.valid),rem:(t,e)=>(t.mean_d=e-t.mean,t.mean-=t.valid?t.mean_d/t.valid:t.mean)},average:{value:t=>t.valid?t.mean:void 0,req:["mean"],idx:1},variance:{init:t=>t.dev=0,value:t=>t.valid>1?t.dev/(t.valid-1):void 0,add:(t,e)=>t.dev+=t.mean_d*(e-t.mean),rem:(t,e)=>t.dev-=t.mean_d*(e-t.mean),req:["mean"],idx:1},variancep:{value:t=>t.valid>1?t.dev/t.valid:void 0,req:["variance"],idx:2},stdev:{value:t=>t.valid>1?Math.sqrt(t.dev/(t.valid-1)):void 0,req:["variance"],idx:2},stdevp:{value:t=>t.valid>1?Math.sqrt(t.dev/t.valid):void 0,req:["variance"],idx:2},stderr:{value:t=>t.valid>1?Math.sqrt(t.dev/(t.valid*(t.valid-1))):void 0,req:["variance"],idx:2},distinct:{value:t=>t.cell.data.distinct(t.get),req:["values"],idx:3},ci0:{value:t=>t.cell.data.ci0(t.get),req:["values"],idx:3},ci1:{value:t=>t.cell.data.ci1(t.get),req:["values"],idx:3},median:{value:t=>t.cell.data.q2(t.get),req:["values"],idx:3},q1:{value:t=>t.cell.data.q1(t.get),req:["values"],idx:3},q3:{value:t=>t.cell.data.q3(t.get),req:["values"],idx:3},min:{init:t=>t.min=void 0,value:t=>t.min=Number.isNaN(t.min)?t.cell.data.min(t.get):t.min,add:(t,e)=>{(e<t.min||t.min===void 0)&&(t.min=e)},rem:(t,e)=>{e<=t.min&&(t.min=NaN)},req:["values"],idx:4},max:{init:t=>t.max=void 0,value:t=>t.max=Number.isNaN(t.max)?t.cell.data.max(t.get):t.max,add:(t,e)=>{(e>t.max||t.max===void 0)&&(t.max=e)},rem:(t,e)=>{e>=t.max&&(t.max=NaN)},req:["values"],idx:4},argmin:{init:t=>t.argmin=void 0,value:t=>t.argmin||t.cell.data.argmin(t.get),add:(t,e,n)=>{e<t.min&&(t.argmin=n)},rem:(t,e)=>{e<=t.min&&(t.argmin=void 0)},req:["min","values"],idx:3},argmax:{init:t=>t.argmax=void 0,value:t=>t.argmax||t.cell.data.argmax(t.get),add:(t,e,n)=>{e>t.max&&(t.argmax=n)},rem:(t,e)=>{e>=t.max&&(t.argmax=void 0)},req:["max","values"],idx:3},exponential:{init:(t,e)=>{t.exp=0,t.exp_r=e},value:t=>t.valid?t.exp*(1-t.exp_r)/(1-t.exp_r**t.valid):void 0,add:(t,e)=>t.exp=t.exp_r*t.exp+e,rem:(t,e)=>t.exp=(t.exp-e/t.exp_r**(t.valid-1))/t.exp_r},exponentialb:{value:t=>t.valid?t.exp*(1-t.exp_r):void 0,req:["exponential"],idx:1}},K0=Object.keys(b0).filter(t=>t!=="__count__");function XK(t,e){return(n,i)=>oe({name:t,aggregate_param:i,out:n||t},YK,e)}[...K0,"__count__"].forEach(t=>{b0[t]=XK(t,b0[t])});function U9(t,e,n){return b0[t](n,e)}function I9(t,e){return t.idx-e.idx}function WK(t){const e={};t.forEach(i=>e[i.name]=i);const n=i=>{i.req&&i.req.forEach(r=>{e[r]||n(e[r]=b0[r]())})};return t.forEach(n),Object.values(e).sort(I9)}function VK(){this.valid=0,this.missing=0,this._ops.forEach(t=>t.aggregate_param==null?t.init(this):t.init(this,t.aggregate_param))}function QK(t,e){if(t==null||t===""){++this.missing;return}t===t&&(++this.valid,this._ops.forEach(n=>n.add(this,t,e)))}function KK(t,e){if(t==null||t===""){--this.missing;return}t===t&&(--this.valid,this._ops.forEach(n=>n.rem(this,t,e)))}function JK(t){return this._out.forEach(e=>t[e.out]=e.value(this)),t}function q9(t,e){const n=e||Bi,i=WK(t),r=t.slice().sort(I9);function a(o){this._ops=i,this._out=r,this.cell=o,this.init()}return a.prototype.init=VK,a.prototype.add=QK,a.prototype.rem=KK,a.prototype.set=JK,a.prototype.get=n,a.fields=t.map(o=>o.out),a}function mk(t){this._key=t?Aa(t):Gt,this.reset()}const bi=mk.prototype;bi.reset=function(){this._add=[],this._rem=[],this._ext=null,this._get=null,this._q=null};bi.add=function(t){this._add.push(t)};bi.rem=function(t){this._rem.push(t)};bi.values=function(){if(this._get=null,this._rem.length===0)return this._add;const t=this._add,e=this._rem,n=this._key,i=t.length,r=e.length,a=Array(i-r),o={};let s,l,f;for(s=0;s<r;++s)o[n(e[s])]=1;for(s=0,l=0;s<i;++s)o[n(f=t[s])]?o[n(f)]=0:a[l++]=f;return this._rem=[],this._add=a};bi.distinct=function(t){const e=this.values(),n={};let i=e.length,r=0,a;for(;--i>=0;)a=t(e[i])+"",zt(n,a)||(n[a]=1,++r);return r};bi.extent=function(t){if(this._get!==t||!this._ext){const e=this.values(),n=aP(e,t);this._ext=[e[n[0]],e[n[1]]],this._get=t}return this._ext};bi.argmin=function(t){return this.extent(t)[0]||{}};bi.argmax=function(t){return this.extent(t)[1]||{}};bi.min=function(t){const e=this.extent(t)[0];return e!=null?t(e):void 0};bi.max=function(t){const e=this.extent(t)[1];return e!=null?t(e):void 0};bi.quartile=function(t){return(this._get!==t||!this._q)&&(this._q=tk(this.values(),t),this._get=t),this._q};bi.q1=function(t){return this.quartile(t)[0]};bi.q2=function(t){return this.quartile(t)[1]};bi.q3=function(t){return this.quartile(t)[2]};bi.ci=function(t){return(this._get!==t||!this._ci)&&(this._ci=M9(this.values(),1e3,.05,t),this._get=t),this._ci};bi.ci0=function(t){return this.ci(t)[0]};bi.ci1=function(t){return this.ci(t)[1]};function nc(t){ct.call(this,null,t),this._adds=[],this._mods=[],this._alen=0,this._mlen=0,this._drop=!0,this._cross=!1,this._dims=[],this._dnames=[],this._measures=[],this._countOnly=!1,this._counts=null,this._prev=null,this._inputs=null,this._outputs=null}nc.Definition={type:"Aggregate",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:K0},{name:"aggregate_params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"drop",type:"boolean",default:!0},{name:"cross",type:"boolean",default:!1},{name:"key",type:"field"}]};kt(nc,ct,{transform(t,e){const n=this,i=e.fork(e.NO_SOURCE|e.NO_FIELDS),r=t.modified();return n.stamp=i.stamp,n.value&&(r||e.modified(n._inputs,!0))?(n._prev=n.value,n.value=r?n.init(t):Object.create(null),e.visit(e.SOURCE,a=>n.add(a))):(n.value=n.value||n.init(t),e.visit(e.REM,a=>n.rem(a)),e.visit(e.ADD,a=>n.add(a))),i.modifies(n._outputs),n._drop=t.drop!==!1,t.cross&&n._dims.length>1&&(n._drop=!1,n.cross()),e.clean()&&n._drop&&i.clean(!0).runAfter(()=>this.clean()),n.changes(i)},cross(){const t=this,e=t.value,n=t._dnames,i=n.map(()=>({})),r=n.length;function a(s){let l,f,d,p;for(l in s)for(d=s[l].tuple,f=0;f<r;++f)i[f][p=d[n[f]]]=p}a(t._prev),a(e);function o(s,l,f){const d=n[f],p=i[f++];for(const m in p){const _=s?s+"|"+m:m;l[d]=p[m],f<r?o(_,l,f):e[_]||t.cell(_,l)}}o("",{},0)},init(t){const e=this._inputs=[],n=this._outputs=[],i={};function r(M){const k=Nt(Li(M)),$=k.length;let D=0,F;for(;D<$;++D)i[F=k[D]]||(i[F]=1,e.push(F))}this._dims=Nt(t.groupby),this._dnames=this._dims.map(M=>{const k=xn(M);return r(M),n.push(k),k}),this.cellkey=t.key?t.key:wT(this._dims),this._countOnly=!0,this._counts=[],this._measures=[];const a=t.fields||[null],o=t.ops||["count"],s=t.aggregate_params||[null],l=t.as||[],f=a.length,d={};let p,m,_,b,x,S,T;for(f!==o.length&&dt("Unmatched number of fields and aggregate ops."),T=0;T<f;++T){if(p=a[T],m=o[T],_=s[T]||null,p==null&&m!=="count"&&dt("Null aggregate field specified."),x=xn(p),S=B9(m,x,l[T]),n.push(S),m==="count"){this._counts.push(S);continue}b=d[x],b||(r(p),b=d[x]=[],b.field=p,this._measures.push(b)),m!=="count"&&(this._countOnly=!1),b.push(U9(m,_,S))}return this._measures=this._measures.map(M=>q9(M,M.field)),Object.create(null)},cellkey:wT(),cell(t,e){let n=this.value[t];return n?n.num===0&&this._drop&&n.stamp<this.stamp?(n.stamp=this.stamp,this._adds[this._alen++]=n):n.stamp<this.stamp&&(n.stamp=this.stamp,this._mods[this._mlen++]=n):(n=this.value[t]=this.newcell(t,e),this._adds[this._alen++]=n),n},newcell(t,e){const n={key:t,num:0,agg:null,tuple:this.newtuple(e,this._prev&&this._prev[t]),stamp:this.stamp,store:!1};if(!this._countOnly){const i=this._measures,r=i.length;n.agg=Array(r);for(let a=0;a<r;++a)n.agg[a]=new i[a](n)}return n.store&&(n.data=new mk),n},newtuple(t,e){const n=this._dnames,i=this._dims,r=i.length,a={};for(let o=0;o<r;++o)a[n[o]]=i[o](t);return e?b9(e.tuple,a):De(a)},clean(){const t=this.value;for(const e in t)t[e].num===0&&delete t[e]},add(t){const e=this.cellkey(t),n=this.cell(e,t);if(n.num+=1,this._countOnly)return;n.store&&n.data.add(t);const i=n.agg;for(let r=0,a=i.length;r<a;++r)i[r].add(i[r].get(t),t)},rem(t){const e=this.cellkey(t),n=this.cell(e,t);if(n.num-=1,this._countOnly)return;n.store&&n.data.rem(t);const i=n.agg;for(let r=0,a=i.length;r<a;++r)i[r].rem(i[r].get(t),t)},celltuple(t){const e=t.tuple,n=this._counts;t.store&&t.data.values();for(let i=0,r=n.length;i<r;++i)e[n[i]]=t.num;if(!this._countOnly){const i=t.agg;for(let r=0,a=i.length;r<a;++r)i[r].set(e)}return e},changes(t){const e=this._adds,n=this._mods,i=this._prev,r=this._drop,a=t.add,o=t.rem,s=t.mod;let l,f,d,p;if(i)for(f in i)l=i[f],(!r||l.num)&&o.push(l.tuple);for(d=0,p=this._alen;d<p;++d)a.push(this.celltuple(e[d])),e[d]=null;for(d=0,p=this._mlen;d<p;++d)l=n[d],(l.num===0&&r?o:s).push(this.celltuple(l)),n[d]=null;return this._alen=this._mlen=0,this._prev=null,t}});const tJ=1e-14;function yk(t){ct.call(this,null,t)}yk.Definition={type:"Bin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"anchor",type:"number"},{name:"maxbins",type:"number",default:20},{name:"base",type:"number",default:10},{name:"divide",type:"number",array:!0,default:[5,2]},{name:"extent",type:"number",array:!0,length:2,required:!0},{name:"span",type:"number"},{name:"step",type:"number"},{name:"steps",type:"number",array:!0},{name:"minstep",type:"number",default:0},{name:"nice",type:"boolean",default:!0},{name:"name",type:"string"},{name:"as",type:"string",array:!0,length:2,default:["bin0","bin1"]}]};kt(yk,ct,{transform(t,e){const n=t.interval!==!1,i=this._bins(t),r=i.start,a=i.step,o=t.as||["bin0","bin1"],s=o[0],l=o[1];let f;return t.modified()?(e=e.reflow(!0),f=e.SOURCE):f=e.modified(Li(t.field))?e.ADD_MOD:e.ADD,e.visit(f,n?d=>{const p=i(d);d[s]=p,d[l]=p==null?null:r+a*(1+(p-r)/a)}:d=>d[s]=i(d)),e.modifies(n?o:s)},_bins(t){if(this.value&&!t.modified())return this.value;const e=t.field,n=C9(t),i=n.step;let r=n.start,a=r+Math.ceil((n.stop-r)/i)*i,o,s;(o=t.anchor)!=null&&(s=o-(r+i*Math.floor((o-r)/i)),r+=s,a+=s);const l=function(f){let d=Ri(e(f));return d==null?null:d<r?-1/0:d>a?1/0:(d=Math.max(r,Math.min(d,a-i)),r+i*Math.floor(tJ+(d-r)/i))};return l.start=r,l.stop=n.stop,l.step=i,this.value=kr(l,Li(e),t.name||"bin_"+xn(e))}});function j9(t,e,n){const i=t;let r=e||[],a=n||[],o={},s=0;return{add:l=>a.push(l),remove:l=>o[i(l)]=++s,size:()=>r.length,data:(l,f)=>(s&&(r=r.filter(d=>!o[i(d)]),o={},s=0),f&&l&&r.sort(l),a.length&&(r=l?cP(l,r,a.sort(l)):r.concat(a),a=[]),r)}}function vk(t){ct.call(this,[],t)}vk.Definition={type:"Collect",metadata:{source:!0},params:[{name:"sort",type:"compare"}]};kt(vk,ct,{transform(t,e){const n=e.fork(e.ALL),i=j9(Gt,this.value,n.materialize(n.ADD).add),r=t.sort,a=e.changed()||r&&(t.modified("sort")||e.modified(r.fields));return n.visit(n.REM,i.remove),this.modified(a),this.value=n.source=i.data(lh(r),a),e.source&&e.source.root&&(this.value.root=e.source.root),n}});function H9(t){Ze.call(this,null,eJ,t)}kt(H9,Ze);function eJ(t){return this.value&&!t.modified()?this.value:$M(t.fields,t.orders)}function _k(t){ct.call(this,null,t)}_k.Definition={type:"CountPattern",metadata:{generates:!0,changes:!0},params:[{name:"field",type:"field",required:!0},{name:"case",type:"enum",values:["upper","lower","mixed"],default:"mixed"},{name:"pattern",type:"string",default:'[\\w"]+'},{name:"stopwords",type:"string",default:""},{name:"as",type:"string",array:!0,length:2,default:["text","count"]}]};function nJ(t,e,n){switch(e){case"upper":t=t.toUpperCase();break;case"lower":t=t.toLowerCase();break}return t.match(n)}kt(_k,ct,{transform(t,e){const n=p=>m=>{for(var _=nJ(s(m),t.case,a)||[],b,x=0,S=_.length;x<S;++x)o.test(b=_[x])||p(b)},i=this._parameterCheck(t,e),r=this._counts,a=this._match,o=this._stop,s=t.field,l=t.as||["text","count"],f=n(p=>r[p]=1+(r[p]||0)),d=n(p=>r[p]-=1);return i?e.visit(e.SOURCE,f):(e.visit(e.ADD,f),e.visit(e.REM,d)),this._finish(e,l)},_parameterCheck(t,e){let n=!1;return(t.modified("stopwords")||!this._stop)&&(this._stop=new RegExp("^"+(t.stopwords||"")+"$","i"),n=!0),(t.modified("pattern")||!this._match)&&(this._match=new RegExp(t.pattern||"[\\w']+","g"),n=!0),(t.modified("field")||e.modified(t.field.fields))&&(n=!0),n&&(this._counts={}),n},_finish(t,e){const n=this._counts,i=this._tuples||(this._tuples={}),r=e[0],a=e[1],o=t.fork(t.NO_SOURCE|t.NO_FIELDS);let s,l,f;for(s in n)l=i[s],f=n[s]||0,!l&&f?(i[s]=l=De({}),l[r]=s,l[a]=f,o.add.push(l)):f===0?(l&&o.rem.push(l),n[s]=null,i[s]=null):l[a]!==f&&(l[a]=f,o.mod.push(l));return o.modifies(e)}});function bk(t){ct.call(this,null,t)}bk.Definition={type:"Cross",metadata:{generates:!0},params:[{name:"filter",type:"expr"},{name:"as",type:"string",array:!0,length:2,default:["a","b"]}]};kt(bk,ct,{transform(t,e){const n=e.fork(e.NO_SOURCE),i=t.as||["a","b"],r=i[0],a=i[1],o=!this.value||e.changed(e.ADD_REM)||t.modified("as")||t.modified("filter");let s=this.value;return o?(s&&(n.rem=s),s=e.materialize(e.SOURCE).source,n.add=this.value=iJ(s,r,a,t.filter||Ta)):n.mod=s,n.source=this.value,n.modifies(i)}});function iJ(t,e,n,i){for(var r=[],a={},o=t.length,s=0,l,f;s<o;++s)for(a[e]=f=t[s],l=0;l<o;++l)a[n]=t[l],i(a)&&(r.push(De(a)),a={},a[e]=f);return r}const Nz={kde:rk,mixture:D9,normal:ik,lognormal:$9,uniform:R9},rJ="distributions",Lz="function",aJ="field";function G9(t,e){const n=t[Lz];zt(Nz,n)||dt("Unknown distribution function: "+n);const i=Nz[n]();for(const r in t)r===aJ?i.data((t.from||e()).map(t[r])):r===rJ?i[r](t[r].map(a=>G9(a,e))):typeof i[r]===Lz&&i[r](t[r]);return i}function xk(t){ct.call(this,null,t)}const Z9=[{key:{function:"normal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"lognormal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"uniform"},params:[{name:"min",type:"number",default:0},{name:"max",type:"number",default:1}]},{key:{function:"kde"},params:[{name:"field",type:"field",required:!0},{name:"from",type:"data"},{name:"bandwidth",type:"number",default:0}]}],oJ={key:{function:"mixture"},params:[{name:"distributions",type:"param",array:!0,params:Z9},{name:"weights",type:"number",array:!0}]};xk.Definition={type:"Density",metadata:{generates:!0},params:[{name:"extent",type:"number",array:!0,length:2},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"method",type:"string",default:"pdf",values:["pdf","cdf"]},{name:"distribution",type:"param",params:Z9.concat(oJ)},{name:"as",type:"string",array:!0,default:["value","density"]}]};kt(xk,ct,{transform(t,e){const n=e.fork(e.NO_SOURCE|e.NO_FIELDS);if(!this.value||e.changed()||t.modified()){const i=G9(t.distribution,sJ(e)),r=t.steps||t.minsteps||25,a=t.steps||t.maxsteps||200;let o=t.method||"pdf";o!=="pdf"&&o!=="cdf"&&dt("Invalid density method: "+o),!t.extent&&!i.data&&dt("Missing density extent parameter."),o=i[o];const s=t.as||["value","density"],l=t.extent||ts(i.data()),f=Cx(o,l,r,a).map(d=>{const p={};return p[s[0]]=d[0],p[s[1]]=d[1],De(p)});this.value&&(n.rem=this.value),this.value=n.add=n.source=f}return n}});function sJ(t){return()=>t.materialize(t.SOURCE).source}function Y9(t,e){return t?t.map((n,i)=>e[i]||xn(n)):null}function wk(t,e,n){const i=[],r=p=>p(l);let a,o,s,l,f,d;if(e==null)i.push(t.map(n));else for(a={},o=0,s=t.length;o<s;++o)l=t[o],f=e.map(r),d=a[f],d||(a[f]=d=[],d.dims=f,i.push(d)),d.push(n(l));return i}const X9="bin";function Ek(t){ct.call(this,null,t)}Ek.Definition={type:"DotBin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"step",type:"number"},{name:"smooth",type:"boolean",default:!1},{name:"as",type:"string",default:X9}]};const uJ=(t,e)=>W0(ts(t,e))/30;kt(Ek,ct,{transform(t,e){if(this.value&&!(t.modified()||e.changed()))return e;const n=e.materialize(e.SOURCE).source,i=wk(e.source,t.groupby,Bi),r=t.smooth||!1,a=t.field,o=t.step||uJ(n,a),s=lh((b,x)=>a(b)-a(x)),l=t.as||X9,f=i.length;let d=1/0,p=-1/0,m=0,_;for(;m<f;++m){const b=i[m].sort(s);_=-1;for(const x of k9(b,o,r,a))x<d&&(d=x),x>p&&(p=x),b[++_][l]=x}return this.value={start:d,stop:p,step:o},e.reflow(!0).modifies(l)}});function W9(t){Ze.call(this,null,lJ,t),this.modified(!0)}kt(W9,Ze);function lJ(t){const e=t.expr;return this.value&&!t.modified("expr")?this.value:kr(n=>e(n,t),Li(e),xn(e))}function Sk(t){ct.call(this,[void 0,void 0],t)}Sk.Definition={type:"Extent",metadata:{},params:[{name:"field",type:"field",required:!0}]};kt(Sk,ct,{transform(t,e){const n=this.value,i=t.field,r=e.changed()||e.modified(i.fields)||t.modified("field");let a=n[0],o=n[1];if((r||a==null)&&(a=1/0,o=-1/0),e.visit(r?e.SOURCE:e.ADD,s=>{const l=Ri(i(s));l!=null&&(l<a&&(a=l),l>o&&(o=l))}),!Number.isFinite(a)||!Number.isFinite(o)){let s=xn(i);s&&(s=` for field "${s}"`),e.dataflow.warn(`Infinite extent${s}: [${a}, ${o}]`),a=o=void 0}this.value=[a,o]}});function Ak(t,e){Ze.call(this,t),this.parent=e,this.count=0}kt(Ak,Ze,{connect(t){return this.detachSubflow=t.detachSubflow,this.targets().add(t),t.source=this},add(t){this.count+=1,this.value.add.push(t)},rem(t){this.count-=1,this.value.rem.push(t)},mod(t){this.value.mod.push(t)},init(t){this.value.init(t,t.NO_SOURCE)},evaluate(){return this.value}});function Mx(t){ct.call(this,{},t),this._keys=Dp();const e=this._targets=[];e.active=0,e.forEach=n=>{for(let i=0,r=e.active;i<r;++i)n(e[i],i,e)}}kt(Mx,ct,{activate(t){this._targets[this._targets.active++]=t},subflow(t,e,n,i){const r=this.value;let a=zt(r,t)&&r[t],o,s;return a?a.value.stamp<n.stamp&&(a.init(n),this.activate(a)):(s=i||(s=this._group[t])&&s.tuple,o=n.dataflow,a=new Ak(n.fork(n.NO_SOURCE),this),o.add(a).connect(e(o,t,s)),r[t]=a,this.activate(a)),a},clean(){const t=this.value;let e=0;for(const n in t)if(t[n].count===0){const i=t[n].detachSubflow;i&&i(),delete t[n],++e}if(e){const n=this._targets.filter(i=>i&&i.count>0);this.initTargets(n)}},initTargets(t){const e=this._targets,n=e.length,i=t?t.length:0;let r=0;for(;r<i;++r)e[r]=t[r];for(;r<n&&e[r]!=null;++r)e[r]=null;e.active=i},transform(t,e){const n=e.dataflow,i=t.key,r=t.subflow,a=this._keys,o=t.modified("key"),s=l=>this.subflow(l,r,e);return this._group=t.group||{},this.initTargets(),e.visit(e.REM,l=>{const f=Gt(l),d=a.get(f);d!==void 0&&(a.delete(f),s(d).rem(l))}),e.visit(e.ADD,l=>{const f=i(l);a.set(Gt(l),f),s(f).add(l)}),o||e.modified(i.fields)?e.visit(e.MOD,l=>{const f=Gt(l),d=a.get(f),p=i(l);d===p?s(p).mod(l):(a.set(f,p),s(d).rem(l),s(p).add(l))}):e.changed(e.MOD)&&e.visit(e.MOD,l=>{s(a.get(Gt(l))).mod(l)}),o&&e.visit(e.REFLOW,l=>{const f=Gt(l),d=a.get(f),p=i(l);d!==p&&(a.set(f,p),s(d).rem(l),s(p).add(l))}),e.clean()?n.runAfter(()=>{this.clean(),a.clean()}):a.empty>n.cleanThreshold&&n.runAfter(a.clean),e}});function V9(t){Ze.call(this,null,cJ,t)}kt(V9,Ze);function cJ(t){return this.value&&!t.modified()?this.value:gt(t.name)?Nt(t.name).map(e=>Aa(e)):Aa(t.name,t.as)}function Tk(t){ct.call(this,Dp(),t)}Tk.Definition={type:"Filter",metadata:{changes:!0},params:[{name:"expr",type:"expr",required:!0}]};kt(Tk,ct,{transform(t,e){const n=e.dataflow,i=this.value,r=e.fork(),a=r.add,o=r.rem,s=r.mod,l=t.expr;let f=!0;e.visit(e.REM,p=>{const m=Gt(p);i.has(m)?i.delete(m):o.push(p)}),e.visit(e.ADD,p=>{l(p,t)?a.push(p):i.set(Gt(p),1)});function d(p){const m=Gt(p),_=l(p,t),b=i.get(m);_&&b?(i.delete(m),a.push(p)):!_&&!b?(i.set(m,1),o.push(p)):f&&_&&!b&&s.push(p)}return e.visit(e.MOD,d),t.modified()&&(f=!1,e.visit(e.REFLOW,d)),i.empty>n.cleanThreshold&&n.runAfter(i.clean),r}});function Ck(t){ct.call(this,[],t)}Ck.Definition={type:"Flatten",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"index",type:"string"},{name:"as",type:"string",array:!0}]};kt(Ck,ct,{transform(t,e){const n=e.fork(e.NO_SOURCE),i=t.fields,r=Y9(i,t.as||[]),a=t.index||null,o=r.length;return n.rem=this.value,e.visit(e.SOURCE,s=>{const l=i.map(b=>b(s)),f=l.reduce((b,x)=>Math.max(b,x.length),0);let d=0,p,m,_;for(;d<f;++d){for(m=VM(s),p=0;p<o;++p)m[r[p]]=(_=l[p][d])==null?null:_;a&&(m[a]=d),n.add.push(m)}}),this.value=n.source=n.add,a&&n.modifies(a),n.modifies(r)}});function Mk(t){ct.call(this,[],t)}Mk.Definition={type:"Fold",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0,length:2,default:["key","value"]}]};kt(Mk,ct,{transform(t,e){const n=e.fork(e.NO_SOURCE),i=t.fields,r=i.map(xn),a=t.as||["key","value"],o=a[0],s=a[1],l=i.length;return n.rem=this.value,e.visit(e.SOURCE,f=>{for(let d=0,p;d<l;++d)p=VM(f),p[o]=r[d],p[s]=i[d](f),n.add.push(p)}),this.value=n.source=n.add,n.modifies(a)}});function kk(t){ct.call(this,null,t)}kk.Definition={type:"Formula",metadata:{modifies:!0},params:[{name:"expr",type:"expr",required:!0},{name:"as",type:"string",required:!0},{name:"initonly",type:"boolean"}]};kt(kk,ct,{transform(t,e){const n=t.expr,i=t.as,r=t.modified(),a=t.initonly?e.ADD:r?e.SOURCE:e.modified(n.fields)||e.modified(i)?e.ADD_MOD:e.ADD;return r&&(e=e.materialize().reflow(!0)),t.initonly||e.modifies(i),e.visit(a,o=>o[i]=n(o,t))}});function Q9(t){ct.call(this,[],t)}kt(Q9,ct,{transform(t,e){const n=e.fork(e.ALL),i=t.generator;let r=this.value,a=t.size-r.length,o,s,l;if(a>0){for(o=[];--a>=0;)o.push(l=De(i(t))),r.push(l);n.add=n.add.length?n.materialize(n.ADD).add.concat(o):o}else s=r.slice(0,-a),n.rem=n.rem.length?n.materialize(n.REM).rem.concat(s):s,r=r.slice(-a);return n.source=this.value=r,n}});const _v={value:"value",median:EP,mean:ZW,min:fT,max:kf},fJ=[];function Ok(t){ct.call(this,[],t)}Ok.Definition={type:"Impute",metadata:{changes:!0},params:[{name:"field",type:"field",required:!0},{name:"key",type:"field",required:!0},{name:"keyvals",array:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"enum",default:"value",values:["value","mean","median","max","min"]},{name:"value",default:0}]};function hJ(t){var e=t.method||_v.value,n;if(_v[e]==null)dt("Unrecognized imputation method: "+e);else return e===_v.value?(n=t.value!==void 0?t.value:0,()=>n):_v[e]}function dJ(t){const e=t.field;return n=>n?e(n):NaN}kt(Ok,ct,{transform(t,e){var n=e.fork(e.ALL),i=hJ(t),r=dJ(t),a=xn(t.field),o=xn(t.key),s=(t.groupby||[]).map(xn),l=pJ(e.source,t.groupby,t.key,t.keyvals),f=[],d=this.value,p=l.domain.length,m,_,b,x,S,T,M,k,$,D;for(S=0,k=l.length;S<k;++S)for(m=l[S],b=m.values,_=NaN,M=0;M<p;++M)if(m[M]==null){for(x=l.domain[M],D={_impute:!0},T=0,$=b.length;T<$;++T)D[s[T]]=b[T];D[o]=x,D[a]=Number.isNaN(_)?_=i(m,r):_,f.push(De(D))}return f.length&&(n.add=n.materialize(n.ADD).add.concat(f)),d.length&&(n.rem=n.materialize(n.REM).rem.concat(d)),this.value=f,n}});function pJ(t,e,n,i){var r=T=>T(S),a=[],o=i?i.slice():[],s={},l={},f,d,p,m,_,b,x,S;for(o.forEach((T,M)=>s[T]=M+1),m=0,x=t.length;m<x;++m)S=t[m],b=n(S),_=s[b]||(s[b]=o.push(b)),d=(f=e?e.map(r):fJ)+"",(p=l[d])||(p=l[d]=[],a.push(p),p.values=f),p[_-1]=S;return a.domain=o,a}function $k(t){nc.call(this,t)}$k.Definition={type:"JoinAggregate",metadata:{modifies:!0},params:[{name:"groupby",type:"field",array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"ops",type:"enum",array:!0,values:K0},{name:"as",type:"string",null:!0,array:!0},{name:"key",type:"field"}]};kt($k,nc,{transform(t,e){const n=this,i=t.modified();let r;return n.value&&(i||e.modified(n._inputs,!0))?(r=n.value=i?n.init(t):{},e.visit(e.SOURCE,a=>n.add(a))):(r=n.value=n.value||this.init(t),e.visit(e.REM,a=>n.rem(a)),e.visit(e.ADD,a=>n.add(a))),n.changes(),e.visit(e.SOURCE,a=>{oe(a,r[n.cellkey(a)].tuple)}),e.reflow(i).modifies(this._outputs)},changes(){const t=this._adds,e=this._mods;let n,i;for(n=0,i=this._alen;n<i;++n)this.celltuple(t[n]),t[n]=null;for(n=0,i=this._mlen;n<i;++n)this.celltuple(e[n]),e[n]=null;this._alen=this._mlen=0}});function Dk(t){ct.call(this,null,t)}Dk.Definition={type:"KDE",metadata:{generates:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"cumulative",type:"boolean",default:!1},{name:"counts",type:"boolean",default:!1},{name:"bandwidth",type:"number",default:0},{name:"extent",type:"number",array:!0,length:2},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"as",type:"string",array:!0,default:["value","density"]}]};kt(Dk,ct,{transform(t,e){const n=e.fork(e.NO_SOURCE|e.NO_FIELDS);if(!this.value||e.changed()||t.modified()){const i=e.materialize(e.SOURCE).source,r=wk(i,t.groupby,t.field),a=(t.groupby||[]).map(xn),o=t.bandwidth,s=t.cumulative?"cdf":"pdf",l=t.as||["value","density"],f=[];let d=t.extent,p=t.steps||t.minsteps||25,m=t.steps||t.maxsteps||200;s!=="pdf"&&s!=="cdf"&&dt("Invalid density method: "+s),t.resolve==="shared"&&(d||(d=ts(i,t.field)),p=m=t.steps||m),r.forEach(_=>{const b=rk(_,o)[s],x=t.counts?_.length:1,S=d||ts(_);Cx(b,S,p,m).forEach(T=>{const M={};for(let k=0;k<a.length;++k)M[a[k]]=_.dims[k];M[l[0]]=T[0],M[l[1]]=T[1]*x,f.push(De(M))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=f}return n}});function K9(t){Ze.call(this,null,gJ,t)}kt(K9,Ze);function gJ(t){return this.value&&!t.modified()?this.value:NM(t.fields,t.flat)}function J9(t){ct.call(this,[],t),this._pending=null}kt(J9,ct,{transform(t,e){const n=e.dataflow;return this._pending?kS(this,e,this._pending):mJ(t)?e.StopPropagation:t.values?kS(this,e,n.parse(t.values,t.format)):t.async?{async:n.request(t.url,t.format).then(r=>(this._pending=Nt(r.data),a=>a.touch(this)))}:n.request(t.url,t.format).then(i=>kS(this,e,Nt(i.data)))}});function mJ(t){return t.modified("async")&&!(t.modified("values")||t.modified("url")||t.modified("format"))}function kS(t,e,n){n.forEach(De);const i=e.fork(e.NO_FIELDS&e.NO_SOURCE);return i.rem=t.value,t.value=i.source=i.add=n,t._pending=null,i.rem.length&&i.clean(!0),i}function Rk(t){ct.call(this,{},t)}Rk.Definition={type:"Lookup",metadata:{modifies:!0},params:[{name:"index",type:"index",params:[{name:"from",type:"data",required:!0},{name:"key",type:"field",required:!0}]},{name:"values",type:"field",array:!0},{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0},{name:"default",default:null}]};kt(Rk,ct,{transform(t,e){const n=t.fields,i=t.index,r=t.values,a=t.default==null?null:t.default,o=t.modified(),s=n.length;let l=o?e.SOURCE:e.ADD,f=e,d=t.as,p,m,_;return r?(m=r.length,s>1&&!d&&dt('Multi-field lookup requires explicit "as" parameter.'),d&&d.length!==s*m&&dt('The "as" parameter has too few output field names.'),d=d||r.map(xn),p=function(b){for(var x=0,S=0,T,M;x<s;++x)if(M=i.get(n[x](b)),M==null)for(T=0;T<m;++T,++S)b[d[S]]=a;else for(T=0;T<m;++T,++S)b[d[S]]=r[T](M)}):(d||dt("Missing output field names."),p=function(b){for(var x=0,S;x<s;++x)S=i.get(n[x](b)),b[d[x]]=S??a}),o?f=e.reflow(!0):(_=n.some(b=>e.modified(b.fields)),l|=_?e.MOD:0),e.visit(l,p),f.modifies(d)}});function t7(t){Ze.call(this,null,yJ,t)}kt(t7,Ze);function yJ(t){if(this.value&&!t.modified())return this.value;const e=t.extents,n=e.length;let i=1/0,r=-1/0,a,o;for(a=0;a<n;++a)o=e[a],o[0]<i&&(i=o[0]),o[1]>r&&(r=o[1]);return[i,r]}function e7(t){Ze.call(this,null,vJ,t)}kt(e7,Ze);function vJ(t){return this.value&&!t.modified()?this.value:t.values.reduce((e,n)=>e.concat(n),[])}function n7(t){ct.call(this,null,t)}kt(n7,ct,{transform(t,e){return this.modified(t.modified()),this.value=t,e.fork(e.NO_SOURCE|e.NO_FIELDS)}});function Nk(t){nc.call(this,t)}Nk.Definition={type:"Pivot",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"value",type:"field",required:!0},{name:"op",type:"enum",values:K0,default:"sum"},{name:"limit",type:"number",default:0},{name:"key",type:"field"}]};kt(Nk,nc,{_transform:nc.prototype.transform,transform(t,e){return this._transform(_J(t,e),e)}});function _J(t,e){const n=t.field,i=t.value,r=(t.op==="count"?"__count__":t.op)||"sum",a=Li(n).concat(Li(i)),o=xJ(n,t.limit||0,e);return e.changed()&&t.set("__pivot__",null,null,!0),{key:t.key,groupby:t.groupby,ops:o.map(()=>r),fields:o.map(s=>bJ(s,n,i,a)),as:o.map(s=>s+""),modified:t.modified.bind(t)}}function bJ(t,e,n,i){return kr(r=>e(r)===t?n(r):NaN,i,t+"")}function xJ(t,e,n){const i={},r=[];return n.visit(n.SOURCE,a=>{const o=t(a);i[o]||(i[o]=1,r.push(o))}),r.sort($p),e?r.slice(0,e):r}function i7(t){Mx.call(this,t)}kt(i7,Mx,{transform(t,e){const n=t.subflow,i=t.field,r=a=>this.subflow(Gt(a),n,e,a);return(t.modified("field")||i&&e.modified(Li(i)))&&dt("PreFacet does not support field modification."),this.initTargets(),i?(e.visit(e.MOD,a=>{const o=r(a);i(a).forEach(s=>o.mod(s))}),e.visit(e.ADD,a=>{const o=r(a);i(a).forEach(s=>o.add(De(s)))}),e.visit(e.REM,a=>{const o=r(a);i(a).forEach(s=>o.rem(s))})):(e.visit(e.MOD,a=>r(a).mod(a)),e.visit(e.ADD,a=>r(a).add(a)),e.visit(e.REM,a=>r(a).rem(a))),e.clean()&&e.runAfter(()=>this.clean()),e}});function Lk(t){ct.call(this,null,t)}Lk.Definition={type:"Project",metadata:{generates:!0,changes:!0},params:[{name:"fields",type:"field",array:!0},{name:"as",type:"string",null:!0,array:!0}]};kt(Lk,ct,{transform(t,e){const n=e.fork(e.NO_SOURCE),i=t.fields,r=Y9(t.fields,t.as||[]),a=i?(s,l)=>wJ(s,l,i,r):bx;let o;return this.value?o=this.value:(e=e.addAll(),o=this.value={}),e.visit(e.REM,s=>{const l=Gt(s);n.rem.push(o[l]),o[l]=null}),e.visit(e.ADD,s=>{const l=a(s,De({}));o[Gt(s)]=l,n.add.push(l)}),e.visit(e.MOD,s=>{n.mod.push(a(s,o[Gt(s)]))}),n}});function wJ(t,e,n,i){for(let r=0,a=n.length;r<a;++r)e[i[r]]=n[r](t);return e}function r7(t){ct.call(this,null,t)}kt(r7,ct,{transform(t,e){return this.value=t.value,t.modified("value")?e.fork(e.NO_SOURCE|e.NO_FIELDS):e.StopPropagation}});function zk(t){ct.call(this,null,t)}zk.Definition={type:"Quantile",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"probs",type:"number",array:!0},{name:"step",type:"number",default:.01},{name:"as",type:"string",array:!0,default:["prob","value"]}]};const EJ=1e-14;kt(zk,ct,{transform(t,e){const n=e.fork(e.NO_SOURCE|e.NO_FIELDS),i=t.as||["prob","value"];if(this.value&&!t.modified()&&!e.changed())return n.source=this.value,n;const r=e.materialize(e.SOURCE).source,a=wk(r,t.groupby,t.field),o=(t.groupby||[]).map(xn),s=[],l=t.step||.01,f=t.probs||Yr(l/2,1-EJ,l),d=f.length;return a.forEach(p=>{const m=JM(p,f);for(let _=0;_<d;++_){const b={};for(let x=0;x<o.length;++x)b[o[x]]=p.dims[x];b[i[0]]=f[_],b[i[1]]=m[_],s.push(De(b))}}),this.value&&(n.rem=this.value),this.value=n.add=n.source=s,n}});function a7(t){ct.call(this,null,t)}kt(a7,ct,{transform(t,e){let n,i;return this.value?i=this.value:(n=e=e.addAll(),i=this.value={}),t.derive&&(n=e.fork(e.NO_SOURCE),e.visit(e.REM,r=>{const a=Gt(r);n.rem.push(i[a]),i[a]=null}),e.visit(e.ADD,r=>{const a=VM(r);i[Gt(r)]=a,n.add.push(a)}),e.visit(e.MOD,r=>{const a=i[Gt(r)];for(const o in r)a[o]=r[o],n.modifies(o);n.mod.push(a)})),n}});function Fk(t){ct.call(this,[],t),this.count=0}Fk.Definition={type:"Sample",metadata:{},params:[{name:"size",type:"number",default:1e3}]};kt(Fk,ct,{transform(t,e){const n=e.fork(e.NO_SOURCE),i=t.modified("size"),r=t.size,a=this.value.reduce((d,p)=>(d[Gt(p)]=1,d),{});let o=this.value,s=this.count,l=0;function f(d){let p,m;o.length<r?o.push(d):(m=~~((s+1)*Ma()),m<o.length&&m>=l&&(p=o[m],a[Gt(p)]&&n.rem.push(p),o[m]=d)),++s}if(e.rem.length&&(e.visit(e.REM,d=>{const p=Gt(d);a[p]&&(a[p]=-1,n.rem.push(d)),--s}),o=o.filter(d=>a[Gt(d)]!==-1)),(e.rem.length||i)&&o.length<r&&e.source&&(l=s=o.length,e.visit(e.SOURCE,d=>{a[Gt(d)]||f(d)}),l=-1),i&&o.length>r){const d=o.length-r;for(let p=0;p<d;++p)a[Gt(o[p])]=-1,n.rem.push(o[p]);o=o.slice(d)}return e.mod.length&&e.visit(e.MOD,d=>{a[Gt(d)]&&n.mod.push(d)}),e.add.length&&e.visit(e.ADD,f),(e.add.length||l<0)&&(n.add=o.filter(d=>!a[Gt(d)])),this.count=s,this.value=n.source=o,n}});function Pk(t){ct.call(this,null,t)}Pk.Definition={type:"Sequence",metadata:{generates:!0,changes:!0},params:[{name:"start",type:"number",required:!0},{name:"stop",type:"number",required:!0},{name:"step",type:"number",default:1},{name:"as",type:"string",default:"data"}]};kt(Pk,ct,{transform(t,e){if(this.value&&!t.modified())return;const n=e.materialize().fork(e.MOD),i=t.as||"data";return n.rem=this.value?e.rem.concat(this.value):e.rem,this.value=Yr(t.start,t.stop,t.step||1).map(r=>{const a={};return a[i]=r,De(a)}),n.add=e.add.concat(this.value),n}});function o7(t){ct.call(this,null,t),this.modified(!0)}kt(o7,ct,{transform(t,e){return this.value=e.source,e.changed()?e.fork(e.NO_SOURCE|e.NO_FIELDS):e.StopPropagation}});function Bk(t){ct.call(this,null,t)}const s7=["unit0","unit1"];Bk.Definition={type:"TimeUnit",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"units",type:"enum",values:IM,array:!0},{name:"step",type:"number",default:1},{name:"maxbins",type:"number",default:40},{name:"extent",type:"date",array:!0},{name:"timezone",type:"enum",default:"local",values:["local","utc"]},{name:"as",type:"string",array:!0,length:2,default:s7}]};kt(Bk,ct,{transform(t,e){const n=t.field,i=t.interval!==!1,r=t.timezone==="utc",a=this._floor(t,e),o=(r?Fp:zp)(a.unit).offset,s=t.as||s7,l=s[0],f=s[1],d=a.step;let p=a.start||1/0,m=a.stop||-1/0,_=e.ADD;return(t.modified()||e.changed(e.REM)||e.modified(Li(n)))&&(e=e.reflow(!0),_=e.SOURCE,p=1/0,m=-1/0),e.visit(_,b=>{const x=n(b);let S,T;x==null?(b[l]=null,i&&(b[f]=null)):(b[l]=S=T=a(x),i&&(b[f]=T=o(S,d)),S<p&&(p=S),T>m&&(m=T))}),a.start=p,a.stop=m,e.modifies(i?s:l)},_floor(t,e){const n=t.timezone==="utc",{units:i,step:r}=t.units?{units:t.units,step:t.step||1}:QP({extent:t.extent||ts(e.materialize(e.SOURCE).source,t.field),maxbins:t.maxbins}),a=qM(i),o=this.value||{},s=(n?qP:IP)(a,r);return s.unit=be(a),s.units=a,s.step=r,s.start=o.start,s.stop=o.stop,this.value=s}});function u7(t){ct.call(this,Dp(),t)}kt(u7,ct,{transform(t,e){const n=e.dataflow,i=t.field,r=this.value,a=s=>r.set(i(s),s);let o=!0;return t.modified("field")||e.modified(i.fields)?(r.clear(),e.visit(e.SOURCE,a)):e.changed()?(e.visit(e.REM,s=>r.delete(i(s))),e.visit(e.ADD,a)):o=!1,this.modified(o),r.empty>n.cleanThreshold&&n.runAfter(r.clean),e.fork()}});function l7(t){ct.call(this,null,t)}kt(l7,ct,{transform(t,e){(!this.value||t.modified("field")||t.modified("sort")||e.changed()||t.sort&&e.modified(t.sort.fields))&&(this.value=(t.sort?e.source.slice().sort(lh(t.sort)):e.source).map(t.field))}});function SJ(t,e,n,i){const r=x0[t](e,n);return{init:r.init||Pl,update:function(a,o){o[i]=r.next(a)}}}const x0={row_number:function(){return{next:t=>t.index+1}},rank:function(){let t;return{init:()=>t=1,next:e=>{const n=e.index,i=e.data;return n&&e.compare(i[n-1],i[n])?t=n+1:t}}},dense_rank:function(){let t;return{init:()=>t=1,next:e=>{const n=e.index,i=e.data;return n&&e.compare(i[n-1],i[n])?++t:t}}},percent_rank:function(){const t=x0.rank(),e=t.next;return{init:t.init,next:n=>(e(n)-1)/(n.data.length-1)}},cume_dist:function(){let t;return{init:()=>t=0,next:e=>{const n=e.data,i=e.compare;let r=e.index;if(t<r){for(;r+1<n.length&&!i(n[r],n[r+1]);)++r;t=r}return(1+t)/n.length}}},ntile:function(t,e){e=+e,e>0||dt("ntile num must be greater than zero.");const n=x0.cume_dist(),i=n.next;return{init:n.init,next:r=>Math.ceil(e*i(r))}},lag:function(t,e){return e=+e||1,{next:n=>{const i=n.index-e;return i>=0?t(n.data[i]):null}}},lead:function(t,e){return e=+e||1,{next:n=>{const i=n.index+e,r=n.data;return i<r.length?t(r[i]):null}}},first_value:function(t){return{next:e=>t(e.data[e.i0])}},last_value:function(t){return{next:e=>t(e.data[e.i1-1])}},nth_value:function(t,e){return e=+e,e>0||dt("nth_value nth must be greater than zero."),{next:n=>{const i=n.i0+(e-1);return i<n.i1?t(n.data[i]):null}}},prev_value:function(t){let e;return{init:()=>e=null,next:n=>{const i=t(n.data[n.index]);return i!=null?e=i:e}}},next_value:function(t){let e,n;return{init:()=>(e=null,n=-1),next:i=>{const r=i.data;return i.index<=n?e:(n=AJ(t,r,i.index))<0?(n=r.length,e=null):e=t(r[n])}}}};function AJ(t,e,n){for(let i=e.length;n<i;++n)if(t(e[n])!=null)return n;return-1}const TJ=Object.keys(x0);function c7(t){const e=Nt(t.ops),n=Nt(t.fields),i=Nt(t.params),r=Nt(t.aggregate_params),a=Nt(t.as),o=this.outputs=[],s=this.windows=[],l={},f={},d=[],p=[];let m=!0;function _(b){Nt(Li(b)).forEach(x=>l[x]=1)}_(t.sort),e.forEach((b,x)=>{const S=n[x],T=i[x],M=r[x]||null,k=xn(S),$=B9(b,k,a[x]);if(_(S),o.push($),zt(x0,b))s.push(SJ(b,S,T,$));else{if(S==null&&b!=="count"&&dt("Null aggregate field specified."),b==="count"){d.push($);return}m=!1;let D=f[k];D||(D=f[k]=[],D.field=S,p.push(D)),D.push(U9(b,M,$))}}),(d.length||p.length)&&(this.cell=CJ(p,d,m)),this.inputs=Object.keys(l)}const f7=c7.prototype;f7.init=function(){this.windows.forEach(t=>t.init()),this.cell&&this.cell.init()};f7.update=function(t,e){const n=this.cell,i=this.windows,r=t.data,a=i&&i.length;let o;if(n){for(o=t.p0;o<t.i0;++o)n.rem(r[o]);for(o=t.p1;o<t.i1;++o)n.add(r[o]);n.set(e)}for(o=0;o<a;++o)i[o].update(t,e)};function CJ(t,e,n){t=t.map(l=>q9(l,l.field));const i={num:0,agg:null,store:!1,count:e};if(!n)for(var r=t.length,a=i.agg=Array(r),o=0;o<r;++o)a[o]=new t[o](i);if(i.store)var s=i.data=new mk;return i.add=function(l){if(i.num+=1,!n){s&&s.add(l);for(let f=0;f<r;++f)a[f].add(a[f].get(l),l)}},i.rem=function(l){if(i.num-=1,!n){s&&s.rem(l);for(let f=0;f<r;++f)a[f].rem(a[f].get(l),l)}},i.set=function(l){let f,d;for(s&&s.values(),f=0,d=e.length;f<d;++f)l[e[f]]=i.num;if(!n)for(f=0,d=a.length;f<d;++f)a[f].set(l)},i.init=function(){i.num=0,s&&s.reset();for(let l=0;l<r;++l)a[l].init()},i}function Uk(t){ct.call(this,{},t),this._mlen=0,this._mods=[]}Uk.Definition={type:"Window",metadata:{modifies:!0},params:[{name:"sort",type:"compare"},{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:TJ.concat(K0)},{name:"params",type:"number",null:!0,array:!0},{name:"aggregate_params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"frame",type:"number",null:!0,array:!0,length:2,default:[null,0]},{name:"ignorePeers",type:"boolean",default:!1}]};kt(Uk,ct,{transform(t,e){this.stamp=e.stamp;const n=t.modified(),i=lh(t.sort),r=wT(t.groupby),a=s=>this.group(r(s));let o=this.state;(!o||n)&&(o=this.state=new c7(t)),n||e.modified(o.inputs)?(this.value={},e.visit(e.SOURCE,s=>a(s).add(s))):(e.visit(e.REM,s=>a(s).remove(s)),e.visit(e.ADD,s=>a(s).add(s)));for(let s=0,l=this._mlen;s<l;++s)MJ(this._mods[s],o,i,t);return this._mlen=0,this._mods=[],e.reflow(n).modifies(o.outputs)},group(t){let e=this.value[t];return e||(e=this.value[t]=j9(Gt),e.stamp=-1),e.stamp<this.stamp&&(e.stamp=this.stamp,this._mods[this._mlen++]=e),e}});function MJ(t,e,n,i){const r=i.sort,a=r&&!i.ignorePeers,o=i.frame||[null,0],s=t.data(n),l=s.length,f=a?Rp(r):null,d={i0:0,i1:0,p0:0,p1:0,index:0,data:s,compare:r||Ui(-1)};e.init();for(let p=0;p<l;++p)kJ(d,o,p,l),a&&OJ(d,f),e.update(d,s[p])}function kJ(t,e,n,i){t.p0=t.i0,t.p1=t.i1,t.i0=e[0]==null?0:Math.max(0,n-Math.abs(e[0])),t.i1=e[1]==null?i:Math.min(i,n+Math.abs(e[1])+1),t.index=n}function OJ(t,e){const n=t.i0,i=t.i1-1,r=t.compare,a=t.data,o=a.length-1;n>0&&!r(a[n],a[n-1])&&(t.i0=e.left(a,a[n])),i<o&&!r(a[i],a[i+1])&&(t.i1=e.right(a,a[i]))}const $J=Object.freeze(Object.defineProperty({__proto__:null,aggregate:nc,bin:yk,collect:vk,compare:H9,countpattern:_k,cross:bk,density:xk,dotbin:Ek,expression:W9,extent:Sk,facet:Mx,field:V9,filter:Tk,flatten:Ck,fold:Mk,formula:kk,generate:Q9,impute:Ok,joinaggregate:$k,kde:Dk,key:K9,load:J9,lookup:Rk,multiextent:t7,multivalues:e7,params:n7,pivot:Nk,prefacet:i7,project:Lk,proxy:r7,quantile:zk,relay:a7,sample:Fk,sequence:Pk,sieve:o7,subflow:Ak,timeunit:Bk,tupleindex:u7,values:l7,window:Uk},Symbol.toStringTag,{value:"Module"}));function Re(t){return function(){return t}}const zz=Math.abs,Ci=Math.atan2,of=Math.cos,DJ=Math.max,OS=Math.min,zo=Math.sin,Af=Math.sqrt,ki=1e-12,Jd=Math.PI,B_=Jd/2,h7=2*Jd;function RJ(t){return t>1?0:t<-1?Jd:Math.acos(t)}function Fz(t){return t>=1?B_:t<=-1?-B_:Math.asin(t)}const ET=Math.PI,ST=2*ET,yf=1e-6,NJ=ST-yf;function d7(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function LJ(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return d7;const n=10**e;return function(i){this._+=i[0];for(let r=1,a=i.length;r<a;++r)this._+=Math.round(arguments[r]*n)/n+i[r]}}let Ik=class{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?d7:LJ(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,i,r){this._append`Q${+e},${+n},${this._x1=+i},${this._y1=+r}`}bezierCurveTo(e,n,i,r,a,o){this._append`C${+e},${+n},${+i},${+r},${this._x1=+a},${this._y1=+o}`}arcTo(e,n,i,r,a){if(e=+e,n=+n,i=+i,r=+r,a=+a,a<0)throw new Error(`negative radius: ${a}`);let o=this._x1,s=this._y1,l=i-e,f=r-n,d=o-e,p=s-n,m=d*d+p*p;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(m>yf)if(!(Math.abs(p*l-f*d)>yf)||!a)this._append`L${this._x1=e},${this._y1=n}`;else{let _=i-o,b=r-s,x=l*l+f*f,S=_*_+b*b,T=Math.sqrt(x),M=Math.sqrt(m),k=a*Math.tan((ET-Math.acos((x+m-S)/(2*T*M)))/2),$=k/M,D=k/T;Math.abs($-1)>yf&&this._append`L${e+$*d},${n+$*p}`,this._append`A${a},${a},0,0,${+(p*_>d*b)},${this._x1=e+D*l},${this._y1=n+D*f}`}}arc(e,n,i,r,a,o){if(e=+e,n=+n,i=+i,o=!!o,i<0)throw new Error(`negative radius: ${i}`);let s=i*Math.cos(r),l=i*Math.sin(r),f=e+s,d=n+l,p=1^o,m=o?r-a:a-r;this._x1===null?this._append`M${f},${d}`:(Math.abs(this._x1-f)>yf||Math.abs(this._y1-d)>yf)&&this._append`L${f},${d}`,i&&(m<0&&(m=m%ST+ST),m>NJ?this._append`A${i},${i},0,1,${p},${e-s},${n-l}A${i},${i},0,1,${p},${this._x1=f},${this._y1=d}`:m>yf&&this._append`A${i},${i},0,${+(m>=ET)},${p},${this._x1=e+i*Math.cos(a)},${this._y1=n+i*Math.sin(a)}`)}rect(e,n,i,r){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${i=+i}v${+r}h${-i}Z`}toString(){return this._}};function kx(){return new Ik}kx.prototype=Ik.prototype;function Ox(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const i=Math.floor(n);if(!(i>=0))throw new RangeError(`invalid digits: ${n}`);e=i}return t},()=>new Ik(e)}function zJ(t){return t.innerRadius}function FJ(t){return t.outerRadius}function PJ(t){return t.startAngle}function BJ(t){return t.endAngle}function UJ(t){return t&&t.padAngle}function IJ(t,e,n,i,r,a,o,s){var l=n-t,f=i-e,d=o-r,p=s-a,m=p*l-d*f;if(!(m*m<ki))return m=(d*(e-a)-p*(t-r))/m,[t+m*l,e+m*f]}function bv(t,e,n,i,r,a,o){var s=t-n,l=e-i,f=(o?a:-a)/Af(s*s+l*l),d=f*l,p=-f*s,m=t+d,_=e+p,b=n+d,x=i+p,S=(m+b)/2,T=(_+x)/2,M=b-m,k=x-_,$=M*M+k*k,D=r-a,F=m*x-b*_,N=(k<0?-1:1)*Af(DJ(0,D*D*$-F*F)),I=(F*k-M*N)/$,q=(-F*M-k*N)/$,Y=(F*k+M*N)/$,H=(-F*M+k*N)/$,et=I-S,nt=q-T,W=Y-S,j=H-T;return et*et+nt*nt>W*W+j*j&&(I=Y,q=H),{cx:I,cy:q,x01:-d,y01:-p,x11:I*(r/D-1),y11:q*(r/D-1)}}function qJ(){var t=zJ,e=FJ,n=Re(0),i=null,r=PJ,a=BJ,o=UJ,s=null,l=Ox(f);function f(){var d,p,m=+t.apply(this,arguments),_=+e.apply(this,arguments),b=r.apply(this,arguments)-B_,x=a.apply(this,arguments)-B_,S=zz(x-b),T=x>b;if(s||(s=d=l()),_<m&&(p=_,_=m,m=p),!(_>ki))s.moveTo(0,0);else if(S>h7-ki)s.moveTo(_*of(b),_*zo(b)),s.arc(0,0,_,b,x,!T),m>ki&&(s.moveTo(m*of(x),m*zo(x)),s.arc(0,0,m,x,b,T));else{var M=b,k=x,$=b,D=x,F=S,N=S,I=o.apply(this,arguments)/2,q=I>ki&&(i?+i.apply(this,arguments):Af(m*m+_*_)),Y=OS(zz(_-m)/2,+n.apply(this,arguments)),H=Y,et=Y,nt,W;if(q>ki){var j=Fz(q/m*zo(I)),U=Fz(q/_*zo(I));(F-=j*2)>ki?(j*=T?1:-1,$+=j,D-=j):(F=0,$=D=(b+x)/2),(N-=U*2)>ki?(U*=T?1:-1,M+=U,k-=U):(N=0,M=k=(b+x)/2)}var X=_*of(M),V=_*zo(M),ot=m*of(D),B=m*zo(D);if(Y>ki){var J=_*of(k),lt=_*zo(k),ft=m*of($),wt=m*zo($),bt;if(S<Jd)if(bt=IJ(X,V,ft,wt,J,lt,ot,B)){var At=X-bt[0],$e=V-bt[1],ae=J-bt[0],$t=lt-bt[1],Qt=1/zo(RJ((At*ae+$e*$t)/(Af(At*At+$e*$e)*Af(ae*ae+$t*$t)))/2),Jt=Af(bt[0]*bt[0]+bt[1]*bt[1]);H=OS(Y,(m-Jt)/(Qt-1)),et=OS(Y,(_-Jt)/(Qt+1))}else H=et=0}N>ki?et>ki?(nt=bv(ft,wt,X,V,_,et,T),W=bv(J,lt,ot,B,_,et,T),s.moveTo(nt.cx+nt.x01,nt.cy+nt.y01),et<Y?s.arc(nt.cx,nt.cy,et,Ci(nt.y01,nt.x01),Ci(W.y01,W.x01),!T):(s.arc(nt.cx,nt.cy,et,Ci(nt.y01,nt.x01),Ci(nt.y11,nt.x11),!T),s.arc(0,0,_,Ci(nt.cy+nt.y11,nt.cx+nt.x11),Ci(W.cy+W.y11,W.cx+W.x11),!T),s.arc(W.cx,W.cy,et,Ci(W.y11,W.x11),Ci(W.y01,W.x01),!T))):(s.moveTo(X,V),s.arc(0,0,_,M,k,!T)):s.moveTo(X,V),!(m>ki)||!(F>ki)?s.lineTo(ot,B):H>ki?(nt=bv(ot,B,J,lt,m,-H,T),W=bv(X,V,ft,wt,m,-H,T),s.lineTo(nt.cx+nt.x01,nt.cy+nt.y01),H<Y?s.arc(nt.cx,nt.cy,H,Ci(nt.y01,nt.x01),Ci(W.y01,W.x01),!T):(s.arc(nt.cx,nt.cy,H,Ci(nt.y01,nt.x01),Ci(nt.y11,nt.x11),!T),s.arc(0,0,m,Ci(nt.cy+nt.y11,nt.cx+nt.x11),Ci(W.cy+W.y11,W.cx+W.x11),T),s.arc(W.cx,W.cy,H,Ci(W.y11,W.x11),Ci(W.y01,W.x01),!T))):s.arc(0,0,m,D,$,T)}if(s.closePath(),d)return s=null,d+""||null}return f.centroid=function(){var d=(+t.apply(this,arguments)+ +e.apply(this,arguments))/2,p=(+r.apply(this,arguments)+ +a.apply(this,arguments))/2-Jd/2;return[of(p)*d,zo(p)*d]},f.innerRadius=function(d){return arguments.length?(t=typeof d=="function"?d:Re(+d),f):t},f.outerRadius=function(d){return arguments.length?(e=typeof d=="function"?d:Re(+d),f):e},f.cornerRadius=function(d){return arguments.length?(n=typeof d=="function"?d:Re(+d),f):n},f.padRadius=function(d){return arguments.length?(i=d==null?null:typeof d=="function"?d:Re(+d),f):i},f.startAngle=function(d){return arguments.length?(r=typeof d=="function"?d:Re(+d),f):r},f.endAngle=function(d){return arguments.length?(a=typeof d=="function"?d:Re(+d),f):a},f.padAngle=function(d){return arguments.length?(o=typeof d=="function"?d:Re(+d),f):o},f.context=function(d){return arguments.length?(s=d??null,f):s},f}function p7(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function g7(t){this._context=t}g7.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function qk(t){return new g7(t)}function m7(t){return t[0]}function y7(t){return t[1]}function v7(t,e){var n=Re(!0),i=null,r=qk,a=null,o=Ox(s);t=typeof t=="function"?t:t===void 0?m7:Re(t),e=typeof e=="function"?e:e===void 0?y7:Re(e);function s(l){var f,d=(l=p7(l)).length,p,m=!1,_;for(i==null&&(a=r(_=o())),f=0;f<=d;++f)!(f<d&&n(p=l[f],f,l))===m&&((m=!m)?a.lineStart():a.lineEnd()),m&&a.point(+t(p,f,l),+e(p,f,l));if(_)return a=null,_+""||null}return s.x=function(l){return arguments.length?(t=typeof l=="function"?l:Re(+l),s):t},s.y=function(l){return arguments.length?(e=typeof l=="function"?l:Re(+l),s):e},s.defined=function(l){return arguments.length?(n=typeof l=="function"?l:Re(!!l),s):n},s.curve=function(l){return arguments.length?(r=l,i!=null&&(a=r(i)),s):r},s.context=function(l){return arguments.length?(l==null?i=a=null:a=r(i=l),s):i},s}function _7(t,e,n){var i=null,r=Re(!0),a=null,o=qk,s=null,l=Ox(f);t=typeof t=="function"?t:t===void 0?m7:Re(+t),e=typeof e=="function"?e:Re(e===void 0?0:+e),n=typeof n=="function"?n:n===void 0?y7:Re(+n);function f(p){var m,_,b,x=(p=p7(p)).length,S,T=!1,M,k=new Array(x),$=new Array(x);for(a==null&&(s=o(M=l())),m=0;m<=x;++m){if(!(m<x&&r(S=p[m],m,p))===T)if(T=!T)_=m,s.areaStart(),s.lineStart();else{for(s.lineEnd(),s.lineStart(),b=m-1;b>=_;--b)s.point(k[b],$[b]);s.lineEnd(),s.areaEnd()}T&&(k[m]=+t(S,m,p),$[m]=+e(S,m,p),s.point(i?+i(S,m,p):k[m],n?+n(S,m,p):$[m]))}if(M)return s=null,M+""||null}function d(){return v7().defined(r).curve(o).context(a)}return f.x=function(p){return arguments.length?(t=typeof p=="function"?p:Re(+p),i=null,f):t},f.x0=function(p){return arguments.length?(t=typeof p=="function"?p:Re(+p),f):t},f.x1=function(p){return arguments.length?(i=p==null?null:typeof p=="function"?p:Re(+p),f):i},f.y=function(p){return arguments.length?(e=typeof p=="function"?p:Re(+p),n=null,f):e},f.y0=function(p){return arguments.length?(e=typeof p=="function"?p:Re(+p),f):e},f.y1=function(p){return arguments.length?(n=p==null?null:typeof p=="function"?p:Re(+p),f):n},f.lineX0=f.lineY0=function(){return d().x(t).y(e)},f.lineY1=function(){return d().x(t).y(n)},f.lineX1=function(){return d().x(i).y(e)},f.defined=function(p){return arguments.length?(r=typeof p=="function"?p:Re(!!p),f):r},f.curve=function(p){return arguments.length?(o=p,a!=null&&(s=o(a)),f):o},f.context=function(p){return arguments.length?(p==null?a=s=null:s=o(a=p),f):a},f}const jJ={draw(t,e){const n=Af(e/Jd);t.moveTo(n,0),t.arc(0,0,n,0,h7)}};function HJ(t,e){let n=null,i=Ox(r);t=typeof t=="function"?t:Re(t||jJ),e=typeof e=="function"?e:Re(e===void 0?64:+e);function r(){let a;if(n||(n=a=i()),t.apply(this,arguments).draw(n,+e.apply(this,arguments)),a)return n=null,a+""||null}return r.type=function(a){return arguments.length?(t=typeof a=="function"?a:Re(a),r):t},r.size=function(a){return arguments.length?(e=typeof a=="function"?a:Re(+a),r):e},r.context=function(a){return arguments.length?(n=a??null,r):n},r}function ic(){}function U_(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function $x(t){this._context=t}$x.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:U_(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:U_(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function GJ(t){return new $x(t)}function b7(t){this._context=t}b7.prototype={areaStart:ic,areaEnd:ic,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:U_(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function ZJ(t){return new b7(t)}function x7(t){this._context=t}x7.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,i=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,i):this._context.moveTo(n,i);break;case 3:this._point=4;default:U_(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function YJ(t){return new x7(t)}function w7(t,e){this._basis=new $x(t),this._beta=e}w7.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var t=this._x,e=this._y,n=t.length-1;if(n>0)for(var i=t[0],r=e[0],a=t[n]-i,o=e[n]-r,s=-1,l;++s<=n;)l=s/n,this._basis.point(this._beta*t[s]+(1-this._beta)*(i+l*a),this._beta*e[s]+(1-this._beta)*(r+l*o));this._x=this._y=null,this._basis.lineEnd()},point:function(t,e){this._x.push(+t),this._y.push(+e)}};const XJ=function t(e){function n(i){return e===1?new $x(i):new w7(i,e)}return n.beta=function(i){return t(+i)},n}(.85);function I_(t,e,n){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-e),t._y2+t._k*(t._y1-n),t._x2,t._y2)}function jk(t,e){this._context=t,this._k=(1-e)/6}jk.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:I_(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2,this._x1=t,this._y1=e;break;case 2:this._point=3;default:I_(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const WJ=function t(e){function n(i){return new jk(i,e)}return n.tension=function(i){return t(+i)},n}(0);function Hk(t,e){this._context=t,this._k=(1-e)/6}Hk.prototype={areaStart:ic,areaEnd:ic,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:I_(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const VJ=function t(e){function n(i){return new Hk(i,e)}return n.tension=function(i){return t(+i)},n}(0);function Gk(t,e){this._context=t,this._k=(1-e)/6}Gk.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:I_(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const QJ=function t(e){function n(i){return new Gk(i,e)}return n.tension=function(i){return t(+i)},n}(0);function Zk(t,e,n){var i=t._x1,r=t._y1,a=t._x2,o=t._y2;if(t._l01_a>ki){var s=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,l=3*t._l01_a*(t._l01_a+t._l12_a);i=(i*s-t._x0*t._l12_2a+t._x2*t._l01_2a)/l,r=(r*s-t._y0*t._l12_2a+t._y2*t._l01_2a)/l}if(t._l23_a>ki){var f=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,d=3*t._l23_a*(t._l23_a+t._l12_a);a=(a*f+t._x1*t._l23_2a-e*t._l12_2a)/d,o=(o*f+t._y1*t._l23_2a-n*t._l12_2a)/d}t._context.bezierCurveTo(i,r,a,o,t._x2,t._y2)}function E7(t,e){this._context=t,this._alpha=e}E7.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,i=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3;default:Zk(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const KJ=function t(e){function n(i){return e?new E7(i,e):new jk(i,0)}return n.alpha=function(i){return t(+i)},n}(.5);function S7(t,e){this._context=t,this._alpha=e}S7.prototype={areaStart:ic,areaEnd:ic,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,i=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:Zk(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const JJ=function t(e){function n(i){return e?new S7(i,e):new Hk(i,0)}return n.alpha=function(i){return t(+i)},n}(.5);function A7(t,e){this._context=t,this._alpha=e}A7.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,i=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Zk(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const ttt=function t(e){function n(i){return e?new A7(i,e):new Gk(i,0)}return n.alpha=function(i){return t(+i)},n}(.5);function T7(t){this._context=t}T7.prototype={areaStart:ic,areaEnd:ic,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function ett(t){return new T7(t)}function Pz(t){return t<0?-1:1}function Bz(t,e,n){var i=t._x1-t._x0,r=e-t._x1,a=(t._y1-t._y0)/(i||r<0&&-0),o=(n-t._y1)/(r||i<0&&-0),s=(a*r+o*i)/(i+r);return(Pz(a)+Pz(o))*Math.min(Math.abs(a),Math.abs(o),.5*Math.abs(s))||0}function Uz(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function $S(t,e,n){var i=t._x0,r=t._y0,a=t._x1,o=t._y1,s=(a-i)/3;t._context.bezierCurveTo(i+s,r+s*e,a-s,o-s*n,a,o)}function q_(t){this._context=t}q_.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:$S(this,this._t0,Uz(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,$S(this,Uz(this,n=Bz(this,t,e)),n);break;default:$S(this,this._t0,n=Bz(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}};function C7(t){this._context=new M7(t)}(C7.prototype=Object.create(q_.prototype)).point=function(t,e){q_.prototype.point.call(this,e,t)};function M7(t){this._context=t}M7.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,i,r,a){this._context.bezierCurveTo(e,t,i,n,a,r)}};function ntt(t){return new q_(t)}function itt(t){return new C7(t)}function k7(t){this._context=t}k7.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),n===2)this._context.lineTo(t[1],e[1]);else for(var i=Iz(t),r=Iz(e),a=0,o=1;o<n;++a,++o)this._context.bezierCurveTo(i[0][a],r[0][a],i[1][a],r[1][a],t[o],e[o]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function Iz(t){var e,n=t.length-1,i,r=new Array(n),a=new Array(n),o=new Array(n);for(r[0]=0,a[0]=2,o[0]=t[0]+2*t[1],e=1;e<n-1;++e)r[e]=1,a[e]=4,o[e]=4*t[e]+2*t[e+1];for(r[n-1]=2,a[n-1]=7,o[n-1]=8*t[n-1]+t[n],e=1;e<n;++e)i=r[e]/a[e-1],a[e]-=i,o[e]-=i*o[e-1];for(r[n-1]=o[n-1]/a[n-1],e=n-2;e>=0;--e)r[e]=(o[e]-r[e+1])/a[e];for(a[n-1]=(t[n]+r[n-1])/2,e=0;e<n-1;++e)a[e]=2*t[e+1]-r[e+1];return[r,a]}function rtt(t){return new k7(t)}function Dx(t,e){this._context=t,this._t=e}Dx.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}break}}this._x=t,this._y=e}};function att(t){return new Dx(t,.5)}function ott(t){return new Dx(t,0)}function stt(t){return new Dx(t,1)}function Ql(t,e){if(typeof document<"u"&&document.createElement){const n=document.createElement("canvas");if(n&&n.getContext)return n.width=t,n.height=e,n}return null}const utt=()=>typeof Image<"u"?Image:null;function cs(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function mc(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const AT=Symbol("implicit");function Yk(){var t=new rz,e=[],n=[],i=AT;function r(a){let o=t.get(a);if(o===void 0){if(i!==AT)return i;t.set(a,o=e.push(a)-1)}return n[o%n.length]}return r.domain=function(a){if(!arguments.length)return e.slice();e=[],t=new rz;for(const o of a)t.has(o)||t.set(o,e.push(o)-1);return r},r.range=function(a){return arguments.length?(n=Array.from(a),r):n.slice()},r.unknown=function(a){return arguments.length?(i=a,r):i},r.copy=function(){return Yk(e,n).unknown(i)},cs.apply(r,arguments),r}function Bp(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function J0(t,e){var n=Object.create(t.prototype);for(var i in e)n[i]=e[i];return n}function yc(){}var Uf=.7,tp=1/Uf,Fd="\\s*([+-]?\\d+)\\s*",w0="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Xo="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",ltt=/^#([0-9a-f]{3,8})$/,ctt=new RegExp(`^rgb\\(${Fd},${Fd},${Fd}\\)$`),ftt=new RegExp(`^rgb\\(${Xo},${Xo},${Xo}\\)$`),htt=new RegExp(`^rgba\\(${Fd},${Fd},${Fd},${w0}\\)$`),dtt=new RegExp(`^rgba\\(${Xo},${Xo},${Xo},${w0}\\)$`),ptt=new RegExp(`^hsl\\(${w0},${Xo},${Xo}\\)$`),gtt=new RegExp(`^hsla\\(${w0},${Xo},${Xo},${w0}\\)$`),qz={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Bp(yc,E0,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:jz,formatHex:jz,formatHex8:mtt,formatHsl:ytt,formatRgb:Hz,toString:Hz});function jz(){return this.rgb().formatHex()}function mtt(){return this.rgb().formatHex8()}function ytt(){return O7(this).formatHsl()}function Hz(){return this.rgb().formatRgb()}function E0(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=ltt.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?Gz(e):n===3?new Qn(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?xv(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?xv(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=ctt.exec(t))?new Qn(e[1],e[2],e[3],1):(e=ftt.exec(t))?new Qn(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=htt.exec(t))?xv(e[1],e[2],e[3],e[4]):(e=dtt.exec(t))?xv(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=ptt.exec(t))?Xz(e[1],e[2]/100,e[3]/100,1):(e=gtt.exec(t))?Xz(e[1],e[2]/100,e[3]/100,e[4]):qz.hasOwnProperty(t)?Gz(qz[t]):t==="transparent"?new Qn(NaN,NaN,NaN,0):null}function Gz(t){return new Qn(t>>16&255,t>>8&255,t&255,1)}function xv(t,e,n,i){return i<=0&&(t=e=n=NaN),new Qn(t,e,n,i)}function Xk(t){return t instanceof yc||(t=E0(t)),t?(t=t.rgb(),new Qn(t.r,t.g,t.b,t.opacity)):new Qn}function rc(t,e,n,i){return arguments.length===1?Xk(t):new Qn(t,e,n,i??1)}function Qn(t,e,n,i){this.r=+t,this.g=+e,this.b=+n,this.opacity=+i}Bp(Qn,rc,J0(yc,{brighter(t){return t=t==null?tp:Math.pow(tp,t),new Qn(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Uf:Math.pow(Uf,t),new Qn(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Qn(Of(this.r),Of(this.g),Of(this.b),j_(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Zz,formatHex:Zz,formatHex8:vtt,formatRgb:Yz,toString:Yz}));function Zz(){return`#${Tf(this.r)}${Tf(this.g)}${Tf(this.b)}`}function vtt(){return`#${Tf(this.r)}${Tf(this.g)}${Tf(this.b)}${Tf((isNaN(this.opacity)?1:this.opacity)*255)}`}function Yz(){const t=j_(this.opacity);return`${t===1?"rgb(":"rgba("}${Of(this.r)}, ${Of(this.g)}, ${Of(this.b)}${t===1?")":`, ${t})`}`}function j_(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Of(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Tf(t){return t=Of(t),(t<16?"0":"")+t.toString(16)}function Xz(t,e,n,i){return i<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Ka(t,e,n,i)}function O7(t){if(t instanceof Ka)return new Ka(t.h,t.s,t.l,t.opacity);if(t instanceof yc||(t=E0(t)),!t)return new Ka;if(t instanceof Ka)return t;t=t.rgb();var e=t.r/255,n=t.g/255,i=t.b/255,r=Math.min(e,n,i),a=Math.max(e,n,i),o=NaN,s=a-r,l=(a+r)/2;return s?(e===a?o=(n-i)/s+(n<i)*6:n===a?o=(i-e)/s+2:o=(e-n)/s+4,s/=l<.5?a+r:2-a-r,o*=60):s=l>0&&l<1?0:o,new Ka(o,s,l,t.opacity)}function H_(t,e,n,i){return arguments.length===1?O7(t):new Ka(t,e,n,i??1)}function Ka(t,e,n,i){this.h=+t,this.s=+e,this.l=+n,this.opacity=+i}Bp(Ka,H_,J0(yc,{brighter(t){return t=t==null?tp:Math.pow(tp,t),new Ka(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Uf:Math.pow(Uf,t),new Ka(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*e,r=2*n-i;return new Qn(DS(t>=240?t-240:t+120,r,i),DS(t,r,i),DS(t<120?t+240:t-120,r,i),this.opacity)},clamp(){return new Ka(Wz(this.h),wv(this.s),wv(this.l),j_(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=j_(this.opacity);return`${t===1?"hsl(":"hsla("}${Wz(this.h)}, ${wv(this.s)*100}%, ${wv(this.l)*100}%${t===1?")":`, ${t})`}`}}));function Wz(t){return t=(t||0)%360,t<0?t+360:t}function wv(t){return Math.max(0,Math.min(1,t||0))}function DS(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const $7=Math.PI/180,D7=180/Math.PI,G_=18,R7=.96422,N7=1,L7=.82521,z7=4/29,Pd=6/29,F7=3*Pd*Pd,_tt=Pd*Pd*Pd;function P7(t){if(t instanceof Wo)return new Wo(t.l,t.a,t.b,t.opacity);if(t instanceof cu)return B7(t);t instanceof Qn||(t=Xk(t));var e=zS(t.r),n=zS(t.g),i=zS(t.b),r=RS((.2225045*e+.7168786*n+.0606169*i)/N7),a,o;return e===n&&n===i?a=o=r:(a=RS((.4360747*e+.3850649*n+.1430804*i)/R7),o=RS((.0139322*e+.0971045*n+.7141733*i)/L7)),new Wo(116*r-16,500*(a-r),200*(r-o),t.opacity)}function Z_(t,e,n,i){return arguments.length===1?P7(t):new Wo(t,e,n,i??1)}function Wo(t,e,n,i){this.l=+t,this.a=+e,this.b=+n,this.opacity=+i}Bp(Wo,Z_,J0(yc,{brighter(t){return new Wo(this.l+G_*(t??1),this.a,this.b,this.opacity)},darker(t){return new Wo(this.l-G_*(t??1),this.a,this.b,this.opacity)},rgb(){var t=(this.l+16)/116,e=isNaN(this.a)?t:t+this.a/500,n=isNaN(this.b)?t:t-this.b/200;return e=R7*NS(e),t=N7*NS(t),n=L7*NS(n),new Qn(LS(3.1338561*e-1.6168667*t-.4906146*n),LS(-.9787684*e+1.9161415*t+.033454*n),LS(.0719453*e-.2289914*t+1.4052427*n),this.opacity)}}));function RS(t){return t>_tt?Math.pow(t,1/3):t/F7+z7}function NS(t){return t>Pd?t*t*t:F7*(t-z7)}function LS(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function zS(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function btt(t){if(t instanceof cu)return new cu(t.h,t.c,t.l,t.opacity);if(t instanceof Wo||(t=P7(t)),t.a===0&&t.b===0)return new cu(NaN,0<t.l&&t.l<100?0:NaN,t.l,t.opacity);var e=Math.atan2(t.b,t.a)*D7;return new cu(e<0?e+360:e,Math.sqrt(t.a*t.a+t.b*t.b),t.l,t.opacity)}function Y_(t,e,n,i){return arguments.length===1?btt(t):new cu(t,e,n,i??1)}function cu(t,e,n,i){this.h=+t,this.c=+e,this.l=+n,this.opacity=+i}function B7(t){if(isNaN(t.h))return new Wo(t.l,0,0,t.opacity);var e=t.h*$7;return new Wo(t.l,Math.cos(e)*t.c,Math.sin(e)*t.c,t.opacity)}Bp(cu,Y_,J0(yc,{brighter(t){return new cu(this.h,this.c,this.l+G_*(t??1),this.opacity)},darker(t){return new cu(this.h,this.c,this.l-G_*(t??1),this.opacity)},rgb(){return B7(this).rgb()}}));var U7=-.14861,Wk=1.78277,Vk=-.29227,Rx=-.90649,S0=1.97294,Vz=S0*Rx,Qz=S0*Wk,Kz=Wk*Vk-Rx*U7;function xtt(t){if(t instanceof $f)return new $f(t.h,t.s,t.l,t.opacity);t instanceof Qn||(t=Xk(t));var e=t.r/255,n=t.g/255,i=t.b/255,r=(Kz*i+Vz*e-Qz*n)/(Kz+Vz-Qz),a=i-r,o=(S0*(n-r)-Vk*a)/Rx,s=Math.sqrt(o*o+a*a)/(S0*r*(1-r)),l=s?Math.atan2(o,a)*D7-120:NaN;return new $f(l<0?l+360:l,s,r,t.opacity)}function TT(t,e,n,i){return arguments.length===1?xtt(t):new $f(t,e,n,i??1)}function $f(t,e,n,i){this.h=+t,this.s=+e,this.l=+n,this.opacity=+i}Bp($f,TT,J0(yc,{brighter(t){return t=t==null?tp:Math.pow(tp,t),new $f(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Uf:Math.pow(Uf,t),new $f(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=isNaN(this.h)?0:(this.h+120)*$7,e=+this.l,n=isNaN(this.s)?0:this.s*e*(1-e),i=Math.cos(t),r=Math.sin(t);return new Qn(255*(e+n*(U7*i+Wk*r)),255*(e+n*(Vk*i+Rx*r)),255*(e+n*(S0*i)),this.opacity)}}));function I7(t,e,n,i,r){var a=t*t,o=a*t;return((1-3*t+3*a-o)*e+(4-6*a+3*o)*n+(1+3*t+3*a-3*o)*i+o*r)/6}function q7(t){var e=t.length-1;return function(n){var i=n<=0?n=0:n>=1?(n=1,e-1):Math.floor(n*e),r=t[i],a=t[i+1],o=i>0?t[i-1]:2*r-a,s=i<e-1?t[i+2]:2*a-r;return I7((n-i/e)*e,o,r,a,s)}}function j7(t){var e=t.length;return function(n){var i=Math.floor(((n%=1)<0?++n:n)*e),r=t[(i+e-1)%e],a=t[i%e],o=t[(i+1)%e],s=t[(i+2)%e];return I7((n-i/e)*e,r,a,o,s)}}const Nx=t=>()=>t;function H7(t,e){return function(n){return t+n*e}}function wtt(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(i){return Math.pow(t+i*e,n)}}function Lx(t,e){var n=e-t;return n?H7(t,n>180||n<-180?n-360*Math.round(n/360):n):Nx(isNaN(t)?e:t)}function Ett(t){return(t=+t)==1?Kn:function(e,n){return n-e?wtt(e,n,t):Nx(isNaN(e)?n:e)}}function Kn(t,e){var n=e-t;return n?H7(t,n):Nx(isNaN(t)?e:t)}const CT=function t(e){var n=Ett(e);function i(r,a){var o=n((r=rc(r)).r,(a=rc(a)).r),s=n(r.g,a.g),l=n(r.b,a.b),f=Kn(r.opacity,a.opacity);return function(d){return r.r=o(d),r.g=s(d),r.b=l(d),r.opacity=f(d),r+""}}return i.gamma=t,i}(1);function G7(t){return function(e){var n=e.length,i=new Array(n),r=new Array(n),a=new Array(n),o,s;for(o=0;o<n;++o)s=rc(e[o]),i[o]=s.r||0,r[o]=s.g||0,a[o]=s.b||0;return i=t(i),r=t(r),a=t(a),s.opacity=1,function(l){return s.r=i(l),s.g=r(l),s.b=a(l),s+""}}}var Stt=G7(q7),Att=G7(j7);function Qk(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,i=e.slice(),r;return function(a){for(r=0;r<n;++r)i[r]=t[r]*(1-a)+e[r]*a;return i}}function Z7(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Ttt(t,e){return(Z7(e)?Qk:Y7)(t,e)}function Y7(t,e){var n=e?e.length:0,i=t?Math.min(n,t.length):0,r=new Array(i),a=new Array(n),o;for(o=0;o<i;++o)r[o]=vc(t[o],e[o]);for(;o<n;++o)a[o]=e[o];return function(s){for(o=0;o<i;++o)a[o]=r[o](s);return a}}function X7(t,e){var n=new Date;return t=+t,e=+e,function(i){return n.setTime(t*(1-i)+e*i),n}}function Va(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function W7(t,e){var n={},i={},r;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(r in e)r in t?n[r]=vc(t[r],e[r]):i[r]=e[r];return function(a){for(r in n)i[r]=n[r](a);return i}}var MT=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,FS=new RegExp(MT.source,"g");function Ctt(t){return function(){return t}}function Mtt(t){return function(e){return t(e)+""}}function V7(t,e){var n=MT.lastIndex=FS.lastIndex=0,i,r,a,o=-1,s=[],l=[];for(t=t+"",e=e+"";(i=MT.exec(t))&&(r=FS.exec(e));)(a=r.index)>n&&(a=e.slice(n,a),s[o]?s[o]+=a:s[++o]=a),(i=i[0])===(r=r[0])?s[o]?s[o]+=r:s[++o]=r:(s[++o]=null,l.push({i:o,x:Va(i,r)})),n=FS.lastIndex;return n<e.length&&(a=e.slice(n),s[o]?s[o]+=a:s[++o]=a),s.length<2?l[0]?Mtt(l[0].x):Ctt(e):(e=l.length,function(f){for(var d=0,p;d<e;++d)s[(p=l[d]).i]=p.x(f);return s.join("")})}function vc(t,e){var n=typeof e,i;return e==null||n==="boolean"?Nx(e):(n==="number"?Va:n==="string"?(i=E0(e))?(e=i,CT):V7:e instanceof E0?CT:e instanceof Date?X7:Z7(e)?Qk:Array.isArray(e)?Y7:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?W7:Va)(t,e)}function ktt(t){var e=t.length;return function(n){return t[Math.max(0,Math.min(e-1,Math.floor(n*e)))]}}function Ott(t,e){var n=Lx(+t,+e);return function(i){var r=n(i);return r-360*Math.floor(r/360)}}function ty(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}var Jz=180/Math.PI,kT={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Q7(t,e,n,i,r,a){var o,s,l;return(o=Math.sqrt(t*t+e*e))&&(t/=o,e/=o),(l=t*n+e*i)&&(n-=t*l,i-=e*l),(s=Math.sqrt(n*n+i*i))&&(n/=s,i/=s,l/=s),t*i<e*n&&(t=-t,e=-e,l=-l,o=-o),{translateX:r,translateY:a,rotate:Math.atan2(e,t)*Jz,skewX:Math.atan(l)*Jz,scaleX:o,scaleY:s}}var Ev;function $tt(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?kT:Q7(e.a,e.b,e.c,e.d,e.e,e.f)}function Dtt(t){return t==null||(Ev||(Ev=document.createElementNS("http://www.w3.org/2000/svg","g")),Ev.setAttribute("transform",t),!(t=Ev.transform.baseVal.consolidate()))?kT:(t=t.matrix,Q7(t.a,t.b,t.c,t.d,t.e,t.f))}function K7(t,e,n,i){function r(f){return f.length?f.pop()+" ":""}function a(f,d,p,m,_,b){if(f!==p||d!==m){var x=_.push("translate(",null,e,null,n);b.push({i:x-4,x:Va(f,p)},{i:x-2,x:Va(d,m)})}else(p||m)&&_.push("translate("+p+e+m+n)}function o(f,d,p,m){f!==d?(f-d>180?d+=360:d-f>180&&(f+=360),m.push({i:p.push(r(p)+"rotate(",null,i)-2,x:Va(f,d)})):d&&p.push(r(p)+"rotate("+d+i)}function s(f,d,p,m){f!==d?m.push({i:p.push(r(p)+"skewX(",null,i)-2,x:Va(f,d)}):d&&p.push(r(p)+"skewX("+d+i)}function l(f,d,p,m,_,b){if(f!==p||d!==m){var x=_.push(r(_)+"scale(",null,",",null,")");b.push({i:x-4,x:Va(f,p)},{i:x-2,x:Va(d,m)})}else(p!==1||m!==1)&&_.push(r(_)+"scale("+p+","+m+")")}return function(f,d){var p=[],m=[];return f=t(f),d=t(d),a(f.translateX,f.translateY,d.translateX,d.translateY,p,m),o(f.rotate,d.rotate,p,m),s(f.skewX,d.skewX,p,m),l(f.scaleX,f.scaleY,d.scaleX,d.scaleY,p,m),f=d=null,function(_){for(var b=-1,x=m.length,S;++b<x;)p[(S=m[b]).i]=S.x(_);return p.join("")}}}var Rtt=K7($tt,"px, ","px)","deg)"),Ntt=K7(Dtt,", ",")",")"),Ltt=1e-12;function t5(t){return((t=Math.exp(t))+1/t)/2}function ztt(t){return((t=Math.exp(t))-1/t)/2}function Ftt(t){return((t=Math.exp(2*t))-1)/(t+1)}const Ptt=function t(e,n,i){function r(a,o){var s=a[0],l=a[1],f=a[2],d=o[0],p=o[1],m=o[2],_=d-s,b=p-l,x=_*_+b*b,S,T;if(x<Ltt)T=Math.log(m/f)/e,S=function(N){return[s+N*_,l+N*b,f*Math.exp(e*N*T)]};else{var M=Math.sqrt(x),k=(m*m-f*f+i*x)/(2*f*n*M),$=(m*m-f*f-i*x)/(2*m*n*M),D=Math.log(Math.sqrt(k*k+1)-k),F=Math.log(Math.sqrt($*$+1)-$);T=(F-D)/e,S=function(N){var I=N*T,q=t5(D),Y=f/(n*M)*(q*Ftt(e*I+D)-ztt(D));return[s+Y*_,l+Y*b,f*q/t5(e*I+D)]}}return S.duration=T*1e3*e/Math.SQRT2,S}return r.rho=function(a){var o=Math.max(.001,+a),s=o*o,l=s*s;return t(o,s,l)},r}(Math.SQRT2,2,4);function J7(t){return function(e,n){var i=t((e=H_(e)).h,(n=H_(n)).h),r=Kn(e.s,n.s),a=Kn(e.l,n.l),o=Kn(e.opacity,n.opacity);return function(s){return e.h=i(s),e.s=r(s),e.l=a(s),e.opacity=o(s),e+""}}}const Btt=J7(Lx);var Utt=J7(Kn);function Itt(t,e){var n=Kn((t=Z_(t)).l,(e=Z_(e)).l),i=Kn(t.a,e.a),r=Kn(t.b,e.b),a=Kn(t.opacity,e.opacity);return function(o){return t.l=n(o),t.a=i(o),t.b=r(o),t.opacity=a(o),t+""}}function tB(t){return function(e,n){var i=t((e=Y_(e)).h,(n=Y_(n)).h),r=Kn(e.c,n.c),a=Kn(e.l,n.l),o=Kn(e.opacity,n.opacity);return function(s){return e.h=i(s),e.c=r(s),e.l=a(s),e.opacity=o(s),e+""}}}const qtt=tB(Lx);var jtt=tB(Kn);function eB(t){return function e(n){n=+n;function i(r,a){var o=t((r=TT(r)).h,(a=TT(a)).h),s=Kn(r.s,a.s),l=Kn(r.l,a.l),f=Kn(r.opacity,a.opacity);return function(d){return r.h=o(d),r.s=s(d),r.l=l(Math.pow(d,n)),r.opacity=f(d),r+""}}return i.gamma=e,i}(1)}const Htt=eB(Lx);var Gtt=eB(Kn);function Kk(t,e){e===void 0&&(e=t,t=vc);for(var n=0,i=e.length-1,r=e[0],a=new Array(i<0?0:i);n<i;)a[n]=t(r,r=e[++n]);return function(o){var s=Math.max(0,Math.min(i-1,Math.floor(o*=i)));return a[s](o-s)}}function Ztt(t,e){for(var n=new Array(e),i=0;i<e;++i)n[i]=t(i/(e-1));return n}const Ytt=Object.freeze(Object.defineProperty({__proto__:null,interpolate:vc,interpolateArray:Ttt,interpolateBasis:q7,interpolateBasisClosed:j7,interpolateCubehelix:Htt,interpolateCubehelixLong:Gtt,interpolateDate:X7,interpolateDiscrete:ktt,interpolateHcl:qtt,interpolateHclLong:jtt,interpolateHsl:Btt,interpolateHslLong:Utt,interpolateHue:Ott,interpolateLab:Itt,interpolateNumber:Va,interpolateNumberArray:Qk,interpolateObject:W7,interpolateRgb:CT,interpolateRgbBasis:Stt,interpolateRgbBasisClosed:Att,interpolateRound:ty,interpolateString:V7,interpolateTransformCss:Rtt,interpolateTransformSvg:Ntt,interpolateZoom:Ptt,piecewise:Kk,quantize:Ztt},Symbol.toStringTag,{value:"Module"}));function Xtt(t){return function(){return t}}function OT(t){return+t}var e5=[0,1];function xr(t){return t}function $T(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:Xtt(isNaN(e)?NaN:.5)}function Wtt(t,e){var n;return t>e&&(n=t,t=e,e=n),function(i){return Math.max(t,Math.min(e,i))}}function Vtt(t,e,n){var i=t[0],r=t[1],a=e[0],o=e[1];return r<i?(i=$T(r,i),a=n(o,a)):(i=$T(i,r),a=n(a,o)),function(s){return a(i(s))}}function Qtt(t,e,n){var i=Math.min(t.length,e.length)-1,r=new Array(i),a=new Array(i),o=-1;for(t[i]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++o<i;)r[o]=$T(t[o],t[o+1]),a[o]=n(e[o],e[o+1]);return function(s){var l=tc(t,s,1,i)-1;return a[l](r[l](s))}}function ey(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function zx(){var t=e5,e=e5,n=vc,i,r,a,o=xr,s,l,f;function d(){var m=Math.min(t.length,e.length);return o!==xr&&(o=Wtt(t[0],t[m-1])),s=m>2?Qtt:Vtt,l=f=null,p}function p(m){return m==null||isNaN(m=+m)?a:(l||(l=s(t.map(i),e,n)))(i(o(m)))}return p.invert=function(m){return o(r((f||(f=s(e,t.map(i),Va)))(m)))},p.domain=function(m){return arguments.length?(t=Array.from(m,OT),d()):t.slice()},p.range=function(m){return arguments.length?(e=Array.from(m),d()):e.slice()},p.rangeRound=function(m){return e=Array.from(m),n=ty,d()},p.clamp=function(m){return arguments.length?(o=m?!0:xr,d()):o!==xr},p.interpolate=function(m){return arguments.length?(n=m,d()):n},p.unknown=function(m){return arguments.length?(a=m,p):a},function(m,_){return i=m,r=_,d()}}function nB(){return zx()(xr,xr)}function iB(t,e,n,i){var r=ec(t,e,n),a;switch(i=Bf(i??",f"),i.type){case"s":{var o=Math.max(Math.abs(t),Math.abs(e));return i.precision==null&&!isNaN(a=kP(r,o))&&(i.precision=a),BM(i,o)}case"":case"e":case"g":case"p":case"r":{i.precision==null&&!isNaN(a=OP(r,Math.max(Math.abs(t),Math.abs(e))))&&(i.precision=a-(i.type==="e"));break}case"f":case"%":{i.precision==null&&!isNaN(a=MP(r))&&(i.precision=a-(i.type==="%")*2);break}}return fx(i)}function fh(t){var e=t.domain;return t.ticks=function(n){var i=e();return lT(i[0],i[i.length-1],n??10)},t.tickFormat=function(n,i){var r=e();return iB(r[0],r[r.length-1],n??10,i)},t.nice=function(n){n==null&&(n=10);var i=e(),r=0,a=i.length-1,o=i[r],s=i[a],l,f,d=10;for(s<o&&(f=o,o=s,s=f,f=r,r=a,a=f);d-- >0;){if(f=cT(o,s,n),f===l)return i[r]=o,i[a]=s,e(i);if(f>0)o=Math.floor(o/f)*f,s=Math.ceil(s/f)*f;else if(f<0)o=Math.ceil(o*f)/f,s=Math.floor(s*f)/f;else break;l=f}return t},t}function rB(){var t=nB();return t.copy=function(){return ey(t,rB())},cs.apply(t,arguments),fh(t)}function aB(t){var e;function n(i){return i==null||isNaN(i=+i)?e:i}return n.invert=n,n.domain=n.range=function(i){return arguments.length?(t=Array.from(i,OT),n):t.slice()},n.unknown=function(i){return arguments.length?(e=i,n):e},n.copy=function(){return aB(t).unknown(e)},t=arguments.length?Array.from(t,OT):[0,1],fh(n)}function oB(t,e){t=t.slice();var n=0,i=t.length-1,r=t[n],a=t[i],o;return a<r&&(o=n,n=i,i=o,o=r,r=a,a=o),t[n]=e.floor(r),t[i]=e.ceil(a),t}function n5(t){return Math.log(t)}function i5(t){return Math.exp(t)}function Ktt(t){return-Math.log(-t)}function Jtt(t){return-Math.exp(-t)}function tet(t){return isFinite(t)?+("1e"+t):t<0?0:t}function eet(t){return t===10?tet:t===Math.E?Math.exp:e=>Math.pow(t,e)}function net(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function r5(t){return(e,n)=>-t(-e,n)}function Jk(t){const e=t(n5,i5),n=e.domain;let i=10,r,a;function o(){return r=net(i),a=eet(i),n()[0]<0?(r=r5(r),a=r5(a),t(Ktt,Jtt)):t(n5,i5),e}return e.base=function(s){return arguments.length?(i=+s,o()):i},e.domain=function(s){return arguments.length?(n(s),o()):n()},e.ticks=s=>{const l=n();let f=l[0],d=l[l.length-1];const p=d<f;p&&([f,d]=[d,f]);let m=r(f),_=r(d),b,x;const S=s==null?10:+s;let T=[];if(!(i%1)&&_-m<S){if(m=Math.floor(m),_=Math.ceil(_),f>0){for(;m<=_;++m)for(b=1;b<i;++b)if(x=m<0?b/a(-m):b*a(m),!(x<f)){if(x>d)break;T.push(x)}}else for(;m<=_;++m)for(b=i-1;b>=1;--b)if(x=m>0?b/a(-m):b*a(m),!(x<f)){if(x>d)break;T.push(x)}T.length*2<S&&(T=lT(f,d,S))}else T=lT(m,_,Math.min(_-m,S)).map(a);return p?T.reverse():T},e.tickFormat=(s,l)=>{if(s==null&&(s=10),l==null&&(l=i===10?"s":","),typeof l!="function"&&(!(i%1)&&(l=Bf(l)).precision==null&&(l.trim=!0),l=fx(l)),s===1/0)return l;const f=Math.max(1,i*s/e.ticks().length);return d=>{let p=d/a(Math.round(r(d)));return p*i<i-.5&&(p*=i),p<=f?l(d):""}},e.nice=()=>n(oB(n(),{floor:s=>a(Math.floor(r(s))),ceil:s=>a(Math.ceil(r(s)))})),e}function sB(){const t=Jk(zx()).domain([1,10]);return t.copy=()=>ey(t,sB()).base(t.base()),cs.apply(t,arguments),t}function a5(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function o5(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function tO(t){var e=1,n=t(a5(e),o5(e));return n.constant=function(i){return arguments.length?t(a5(e=+i),o5(e)):e},fh(n)}function uB(){var t=tO(zx());return t.copy=function(){return ey(t,uB()).constant(t.constant())},cs.apply(t,arguments)}function s5(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function iet(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function ret(t){return t<0?-t*t:t*t}function eO(t){var e=t(xr,xr),n=1;function i(){return n===1?t(xr,xr):n===.5?t(iet,ret):t(s5(n),s5(1/n))}return e.exponent=function(r){return arguments.length?(n=+r,i()):n},fh(e)}function nO(){var t=eO(zx());return t.copy=function(){return ey(t,nO()).exponent(t.exponent())},cs.apply(t,arguments),t}function aet(){return nO.apply(null,arguments).exponent(.5)}function lB(){var t=[],e=[],n=[],i;function r(){var o=0,s=Math.max(1,e.length);for(n=new Array(s-1);++o<s;)n[o-1]=wP(t,o/s);return a}function a(o){return o==null||isNaN(o=+o)?i:e[tc(n,o)]}return a.invertExtent=function(o){var s=e.indexOf(o);return s<0?[NaN,NaN]:[s>0?n[s-1]:t[0],s<n.length?n[s]:t[t.length-1]]},a.domain=function(o){if(!arguments.length)return t.slice();t=[];for(let s of o)s!=null&&!isNaN(s=+s)&&t.push(s);return t.sort(du),r()},a.range=function(o){return arguments.length?(e=Array.from(o),r()):e.slice()},a.unknown=function(o){return arguments.length?(i=o,a):i},a.quantiles=function(){return n.slice()},a.copy=function(){return lB().domain(t).range(e).unknown(i)},cs.apply(a,arguments)}function cB(){var t=0,e=1,n=1,i=[.5],r=[0,1],a;function o(l){return l!=null&&l<=l?r[tc(i,l,0,n)]:a}function s(){var l=-1;for(i=new Array(n);++l<n;)i[l]=((l+1)*e-(l-n)*t)/(n+1);return o}return o.domain=function(l){return arguments.length?([t,e]=l,t=+t,e=+e,s()):[t,e]},o.range=function(l){return arguments.length?(n=(r=Array.from(l)).length-1,s()):r.slice()},o.invertExtent=function(l){var f=r.indexOf(l);return f<0?[NaN,NaN]:f<1?[t,i[0]]:f>=n?[i[n-1],e]:[i[f-1],i[f]]},o.unknown=function(l){return arguments.length&&(a=l),o},o.thresholds=function(){return i.slice()},o.copy=function(){return cB().domain([t,e]).range(r).unknown(a)},cs.apply(fh(o),arguments)}function fB(){var t=[.5],e=[0,1],n,i=1;function r(a){return a!=null&&a<=a?e[tc(t,a,0,i)]:n}return r.domain=function(a){return arguments.length?(t=Array.from(a),i=Math.min(t.length,e.length-1),r):t.slice()},r.range=function(a){return arguments.length?(e=Array.from(a),i=Math.min(t.length,e.length-1),r):e.slice()},r.invertExtent=function(a){var o=e.indexOf(a);return[t[o-1],t[o]]},r.unknown=function(a){return arguments.length?(n=a,r):n},r.copy=function(){return fB().domain(t).range(e).unknown(n)},cs.apply(r,arguments)}function oet(t){return new Date(t)}function set(t){return t instanceof Date?+t:+new Date(+t)}function iO(t,e,n,i,r,a,o,s,l,f){var d=nB(),p=d.invert,m=d.domain,_=f(".%L"),b=f(":%S"),x=f("%I:%M"),S=f("%I %p"),T=f("%a %d"),M=f("%b %d"),k=f("%B"),$=f("%Y");function D(F){return(l(F)<F?_:s(F)<F?b:o(F)<F?x:a(F)<F?S:i(F)<F?r(F)<F?T:M:n(F)<F?k:$)(F)}return d.invert=function(F){return new Date(p(F))},d.domain=function(F){return arguments.length?m(Array.from(F,set)):m().map(oet)},d.ticks=function(F){var N=m();return t(N[0],N[N.length-1],F??10)},d.tickFormat=function(F,N){return N==null?D:f(N)},d.nice=function(F){var N=m();return(!F||typeof F.range!="function")&&(F=e(N[0],N[N.length-1],F??10)),F?m(oB(N,F)):d},d.copy=function(){return ey(d,iO(t,e,n,i,r,a,o,s,l,f))},d}function uet(){return cs.apply(iO(pV,gV,es,y0,Np,pu,px,hx,lu,HM).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function cet(){return cs.apply(iO(hV,dV,ns,v0,Lp,Wl,gx,dx,lu,GM).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Fx(){var t=0,e=1,n,i,r,a,o=xr,s=!1,l;function f(p){return p==null||isNaN(p=+p)?l:o(r===0?.5:(p=(a(p)-n)*r,s?Math.max(0,Math.min(1,p)):p))}f.domain=function(p){return arguments.length?([t,e]=p,n=a(t=+t),i=a(e=+e),r=n===i?0:1/(i-n),f):[t,e]},f.clamp=function(p){return arguments.length?(s=!!p,f):s},f.interpolator=function(p){return arguments.length?(o=p,f):o};function d(p){return function(m){var _,b;return arguments.length?([_,b]=m,o=p(_,b),f):[o(0),o(1)]}}return f.range=d(vc),f.rangeRound=d(ty),f.unknown=function(p){return arguments.length?(l=p,f):l},function(p){return a=p,n=p(t),i=p(e),r=n===i?0:1/(i-n),f}}function _c(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function rO(){var t=fh(Fx()(xr));return t.copy=function(){return _c(t,rO())},mc.apply(t,arguments)}function hB(){var t=Jk(Fx()).domain([1,10]);return t.copy=function(){return _c(t,hB()).base(t.base())},mc.apply(t,arguments)}function dB(){var t=tO(Fx());return t.copy=function(){return _c(t,dB()).constant(t.constant())},mc.apply(t,arguments)}function aO(){var t=eO(Fx());return t.copy=function(){return _c(t,aO()).exponent(t.exponent())},mc.apply(t,arguments)}function fet(){return aO.apply(null,arguments).exponent(.5)}function Px(){var t=0,e=.5,n=1,i=1,r,a,o,s,l,f=xr,d,p=!1,m;function _(x){return isNaN(x=+x)?m:(x=.5+((x=+d(x))-a)*(i*x<i*a?s:l),f(p?Math.max(0,Math.min(1,x)):x))}_.domain=function(x){return arguments.length?([t,e,n]=x,r=d(t=+t),a=d(e=+e),o=d(n=+n),s=r===a?0:.5/(a-r),l=a===o?0:.5/(o-a),i=a<r?-1:1,_):[t,e,n]},_.clamp=function(x){return arguments.length?(p=!!x,_):p},_.interpolator=function(x){return arguments.length?(f=x,_):f};function b(x){return function(S){var T,M,k;return arguments.length?([T,M,k]=S,f=Kk(x,[T,M,k]),_):[f(0),f(.5),f(1)]}}return _.range=b(vc),_.rangeRound=b(ty),_.unknown=function(x){return arguments.length?(m=x,_):m},function(x){return d=x,r=x(t),a=x(e),o=x(n),s=r===a?0:.5/(a-r),l=a===o?0:.5/(o-a),i=a<r?-1:1,_}}function pB(){var t=fh(Px()(xr));return t.copy=function(){return _c(t,pB())},mc.apply(t,arguments)}function gB(){var t=Jk(Px()).domain([.1,1,10]);return t.copy=function(){return _c(t,gB()).base(t.base())},mc.apply(t,arguments)}function mB(){var t=tO(Px());return t.copy=function(){return _c(t,mB()).constant(t.constant())},mc.apply(t,arguments)}function oO(){var t=eO(Px());return t.copy=function(){return _c(t,oO()).exponent(t.exponent())},mc.apply(t,arguments)}function het(){return oO.apply(null,arguments).exponent(.5)}function fs(t){for(var e=t.length/6|0,n=new Array(e),i=0;i<e;)n[i]="#"+t.slice(i*6,++i*6);return n}const det=fs("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),pet=fs("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),get=fs("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),met=fs("4269d0efb118ff725c6cc5b03ca951ff8ab7a463f297bbf59c6b4e9498a0"),yet=fs("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),vet=fs("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),_et=fs("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),bet=fs("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),xet=fs("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),wet=fs("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f");function sO(t,e,n){const i=t-e+n*2;return t?i>0?i:1:0}const Eet="identity",ep="linear",wu="log",ny="pow",iy="sqrt",Bx="symlog",If="time",qf="utc",Vo="sequential",Up="diverging",np="quantile",Ux="quantize",Ix="threshold",uO="ordinal",DT="point",yB="band",lO="bin-ordinal",jn="continuous",ry="discrete",ay="discretizing",Da="interpolating",cO="temporal";function Aet(t){return function(e){let n=e[0],i=e[1],r;return i<n&&(r=n,n=i,i=r),[t.invert(n),t.invert(i)]}}function Tet(t){return function(e){const n=t.range();let i=e[0],r=e[1],a=-1,o,s,l,f;for(r<i&&(s=i,i=r,r=s),l=0,f=n.length;l<f;++l)n[l]>=i&&n[l]<=r&&(a<0&&(a=l),o=l);if(!(a<0))return i=t.invertExtent(n[a]),r=t.invertExtent(n[o]),[i[0]===void 0?i[1]:i[0],r[1]===void 0?r[0]:r[1]]}}function fO(){const t=Yk().unknown(void 0),e=t.domain,n=t.range;let i=[0,1],r,a,o=!1,s=0,l=0,f=.5;delete t.unknown;function d(){const p=e().length,m=i[1]<i[0],_=i[1-m],b=sO(p,s,l);let x=i[m-0];r=(_-x)/(b||1),o&&(r=Math.floor(r)),x+=(_-x-r*(p-s))*f,a=r*(1-s),o&&(x=Math.round(x),a=Math.round(a));const S=Yr(p).map(T=>x+r*T);return n(m?S.reverse():S)}return t.domain=function(p){return arguments.length?(e(p),d()):e()},t.range=function(p){return arguments.length?(i=[+p[0],+p[1]],d()):i.slice()},t.rangeRound=function(p){return i=[+p[0],+p[1]],o=!0,d()},t.bandwidth=function(){return a},t.step=function(){return r},t.round=function(p){return arguments.length?(o=!!p,d()):o},t.padding=function(p){return arguments.length?(l=Math.max(0,Math.min(1,p)),s=l,d()):s},t.paddingInner=function(p){return arguments.length?(s=Math.max(0,Math.min(1,p)),d()):s},t.paddingOuter=function(p){return arguments.length?(l=Math.max(0,Math.min(1,p)),d()):l},t.align=function(p){return arguments.length?(f=Math.max(0,Math.min(1,p)),d()):f},t.invertRange=function(p){if(p[0]==null||p[1]==null)return;const m=i[1]<i[0],_=m?n().reverse():n(),b=_.length-1;let x=+p[0],S=+p[1],T,M,k;if(!(x!==x||S!==S)&&(S<x&&(k=x,x=S,S=k),!(S<_[0]||x>i[1-m])))return T=Math.max(0,tc(_,x)-1),M=x===S?T:tc(_,S)-1,x-_[T]>a+1e-10&&++T,m&&(k=T,T=b-M,M=b-k),T>M?void 0:e().slice(T,M+1)},t.invert=function(p){const m=t.invertRange([p,p]);return m&&m[0]},t.copy=function(){return fO().domain(e()).range(i).round(o).paddingInner(s).paddingOuter(l).align(f)},d()}function vB(t){const e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,t.copy=function(){return vB(e())},t}function Cet(){return vB(fO().paddingInner(1))}var Met=Array.prototype.map;function ket(t){return Met.call(t,Ri)}const Oet=Array.prototype.slice;function _B(){let t=[],e=[];function n(i){return i==null||i!==i?void 0:e[(tc(t,i)-1)%e.length]}return n.domain=function(i){return arguments.length?(t=ket(i),n):t.slice()},n.range=function(i){return arguments.length?(e=Oet.call(i),n):e.slice()},n.tickFormat=function(i,r){return iB(t[0],be(t),i??10,r)},n.copy=function(){return _B().domain(n.domain()).range(n.range())},n}const X_=new Map,bB=Symbol("vega_scale");function xB(t){return t[bB]=!0,t}function u5(t){return t&&t[bB]===!0}function $et(t,e,n){const i=function(){const a=e();return a.invertRange||(a.invertRange=a.invert?Aet(a):a.invertExtent?Tet(a):void 0),a.type=t,xB(a)};return i.metadata=oo(Nt(n)),i}function Oe(t,e,n){return arguments.length>1?(X_.set(t,$et(t,e,n)),this):wB(t)?X_.get(t):void 0}Oe(Eet,aB);Oe(ep,rB,jn);Oe(wu,sB,[jn,wu]);Oe(ny,nO,jn);Oe(iy,aet,jn);Oe(Bx,uB,jn);Oe(If,uet,[jn,cO]);Oe(qf,cet,[jn,cO]);Oe(Vo,rO,[jn,Da]);Oe(`${Vo}-${ep}`,rO,[jn,Da]);Oe(`${Vo}-${wu}`,hB,[jn,Da,wu]);Oe(`${Vo}-${ny}`,aO,[jn,Da]);Oe(`${Vo}-${iy}`,fet,[jn,Da]);Oe(`${Vo}-${Bx}`,dB,[jn,Da]);Oe(`${Up}-${ep}`,pB,[jn,Da]);Oe(`${Up}-${wu}`,gB,[jn,Da,wu]);Oe(`${Up}-${ny}`,oO,[jn,Da]);Oe(`${Up}-${iy}`,het,[jn,Da]);Oe(`${Up}-${Bx}`,mB,[jn,Da]);Oe(np,lB,[ay,np]);Oe(Ux,cB,ay);Oe(Ix,fB,ay);Oe(lO,_B,[ry,ay]);Oe(uO,Yk,ry);Oe(yB,fO,ry);Oe(DT,Cet,ry);function wB(t){return X_.has(t)}function hh(t,e){const n=X_.get(t);return n&&n.metadata[e]}function hO(t){return hh(t,jn)}function ip(t){return hh(t,ry)}function RT(t){return hh(t,ay)}function EB(t){return hh(t,wu)}function Det(t){return hh(t,cO)}function SB(t){return hh(t,Da)}function AB(t){return hh(t,np)}const Ret=["clamp","base","constant","exponent"];function TB(t,e){const n=e[0],i=be(e)-n;return function(r){return t(n+r*i)}}function qx(t,e,n){return Kk(dO(e||"rgb",n),t)}function CB(t,e){const n=new Array(e),i=e+1;for(let r=0;r<e;)n[r]=t(++r/i);return n}function MB(t,e,n){const i=n-e;let r,a,o;return!i||!Number.isFinite(i)?Ui(.5):(r=(a=t.type).indexOf("-"),a=r<0?a:a.slice(r+1),o=Oe(a)().domain([e,n]).range([0,1]),Ret.forEach(s=>t[s]?o[s](t[s]()):0),o)}function dO(t,e){const n=Ytt[Net(t)];return e!=null&&n&&n.gamma?n.gamma(e):n}function Net(t){return"interpolate"+t.toLowerCase().split("-").map(e=>e[0].toUpperCase()+e.slice(1)).join("")}const Let={blues:"cfe1f2bed8eca8cee58fc1de74b2d75ba3cf4592c63181bd206fb2125ca40a4a90",greens:"d3eecdc0e6baabdda594d3917bc77d60ba6c46ab5e329a512089430e7735036429",greys:"e2e2e2d4d4d4c4c4c4b1b1b19d9d9d8888887575756262624d4d4d3535351e1e1e",oranges:"fdd8b3fdc998fdb87bfda55efc9244f87f2cf06b18e4580bd14904b93d029f3303",purples:"e2e1efd4d4e8c4c5e0b4b3d6a3a0cc928ec3827cb97566ae684ea25c3696501f8c",reds:"fdc9b4fcb49afc9e80fc8767fa7051f6573fec3f2fdc2a25c81b1db21218970b13",blueGreen:"d5efedc1e8e0a7ddd18bd2be70c6a958ba9144ad77319c5d2089460e7736036429",bluePurple:"ccddecbad0e4a8c2dd9ab0d4919cc98d85be8b6db28a55a6873c99822287730f71",greenBlue:"d3eecec5e8c3b1e1bb9bd8bb82cec269c2ca51b2cd3c9fc7288abd1675b10b60a1",orangeRed:"fddcaffdcf9bfdc18afdad77fb9562f67d53ee6545e24932d32d1ebf130da70403",purpleBlue:"dbdaebc8cee4b1c3de97b7d87bacd15b9fc93a90c01e7fb70b70ab056199045281",purpleBlueGreen:"dbd8eac8cee4b0c3de93b7d872acd1549fc83892bb1c88a3097f8702736b016353",purpleRed:"dcc9e2d3b3d7ce9eccd186c0da6bb2e14da0e23189d91e6fc61159ab07498f023a",redPurple:"fccfccfcbec0faa9b8f98faff571a5ec539ddb3695c41b8aa908808d0179700174",yellowGreen:"e4f4acd1eca0b9e2949ed68880c97c62bb6e47aa5e3297502083440e723b036034",yellowOrangeBrown:"feeaa1fedd84fecc63feb746fca031f68921eb7215db5e0bc54c05ab3d038f3204",yellowOrangeRed:"fee087fed16ffebd59fea849fd903efc7335f9522bee3423de1b20ca0b22af0225",blueOrange:"134b852f78b35da2cb9dcae1d2e5eff2f0ebfce0bafbbf74e8932fc5690d994a07",brownBlueGreen:"704108a0651ac79548e3c78af3e6c6eef1eac9e9e48ed1c74da79e187a72025147",purpleGreen:"5b1667834792a67fb6c9aed3e6d6e8eff0efd9efd5aedda971bb75368e490e5e29",purpleOrange:"4114696647968f83b7b9b4d6dadbebf3eeeafce0bafbbf74e8932fc5690d994a07",redBlue:"8c0d25bf363adf745ef4ae91fbdbc9f2efeed2e5ef9dcae15da2cb2f78b3134b85",redGrey:"8c0d25bf363adf745ef4ae91fcdccbfaf4f1e2e2e2c0c0c0969696646464343434",yellowGreenBlue:"eff9bddbf1b4bde5b594d5b969c5be45b4c22c9ec02182b82163aa23479c1c3185",redYellowBlue:"a50026d4322cf16e43fcac64fedd90faf8c1dcf1ecabd6e875abd04a74b4313695",redYellowGreen:"a50026d4322cf16e43fcac63fedd8df9f7aed7ee8ea4d86e64bc6122964f006837",pinkYellowGreen:"8e0152c0267edd72adf0b3d6faddedf5f3efe1f2cab6de8780bb474f9125276419",spectral:"9e0142d13c4bf0704afcac63fedd8dfbf8b0e0f3a1a9dda269bda94288b55e4fa2",viridis:"440154470e61481a6c482575472f7d443a834144873d4e8a39568c35608d31688e2d708e2a788e27818e23888e21918d1f988b1fa08822a8842ab07f35b77943bf7154c56866cc5d7ad1518fd744a5db36bcdf27d2e21be9e51afde725",magma:"0000040404130b0924150e3720114b2c11603b0f704a107957157e651a80721f817f24828c29819a2e80a8327db6377ac43c75d1426fde4968e95462f1605df76f5cfa7f5efc8f65fe9f6dfeaf78febf84fece91fddea0fcedaffcfdbf",inferno:"0000040403130c0826170c3b240c4f330a5f420a68500d6c5d126e6b176e781c6d86216b932667a12b62ae305cbb3755c73e4cd24644dd513ae65c30ed6925f3771af8850ffb9506fca50afcb519fac62df6d645f2e661f3f484fcffa4",plasma:"0d088723069033059742039d5002a25d01a66a00a87801a88405a7900da49c179ea72198b12a90ba3488c33d80cb4779d35171da5a69e16462e76e5bed7953f2834cf68f44fa9a3dfca636fdb32ffec029fcce25f9dc24f5ea27f0f921",cividis:"00205100235800265d002961012b65042e670831690d346b11366c16396d1c3c6e213f6e26426e2c456e31476e374a6e3c4d6e42506e47536d4c566d51586e555b6e5a5e6e5e616e62646f66676f6a6a706e6d717270717573727976737c79747f7c75827f758682768985778c8877908b78938e789691789a94789e9778a19b78a59e77a9a177aea575b2a874b6ab73bbaf71c0b26fc5b66dc9b96acebd68d3c065d8c462ddc85fe2cb5ce7cf58ebd355f0d652f3da4ff7de4cfae249fce647",rainbow:"6e40aa883eb1a43db3bf3cafd83fa4ee4395fe4b83ff576eff6659ff7847ff8c38f3a130e2b72fcfcc36bee044aff05b8ff4576ff65b52f6673af27828ea8d1ddfa319d0b81cbecb23abd82f96e03d82e14c6edb5a5dd0664dbf6e40aa",sinebow:"ff4040fc582af47218e78d0bd5a703bfbf00a7d5038de70b72f41858fc2a40ff402afc5818f4720be78d03d5a700bfbf03a7d50b8de71872f42a58fc4040ff582afc7218f48d0be7a703d5bf00bfd503a7e70b8df41872fc2a58ff4040",turbo:"23171b32204a3e2a71453493493eae4b49c54a53d7485ee44569ee4074f53c7ff8378af93295f72e9ff42ba9ef28b3e926bce125c5d925cdcf27d5c629dcbc2de3b232e9a738ee9d3ff39347f68950f9805afc7765fd6e70fe667cfd5e88fc5795fb51a1f84badf545b9f140c5ec3cd0e637dae034e4d931ecd12ef4c92bfac029ffb626ffad24ffa223ff9821ff8d1fff821dff771cfd6c1af76118f05616e84b14df4111d5380fcb2f0dc0260ab61f07ac1805a313029b0f00950c00910b00",browns:"eedbbdecca96e9b97ae4a865dc9856d18954c7784cc0673fb85536ad44339f3632",tealBlues:"bce4d89dd3d181c3cb65b3c245a2b9368fae347da0306a932c5985",teals:"bbdfdfa2d4d58ac9c975bcbb61b0af4da5a43799982b8b8c1e7f7f127273006667",warmGreys:"dcd4d0cec5c1c0b8b4b3aaa7a59c9998908c8b827f7e7673726866665c5a59504e",goldGreen:"f4d166d5ca60b6c35c98bb597cb25760a6564b9c533f8f4f33834a257740146c36",goldOrange:"f4d166f8be5cf8aa4cf5983bf3852aef701be2621fd65322c54923b142239e3a26",goldRed:"f4d166f6be59f9aa51fc964ef6834bee734ae56249db5247cf4244c43141b71d3e",lightGreyRed:"efe9e6e1dad7d5cbc8c8bdb9bbaea9cd967ddc7b43e15f19df4011dc000b",lightGreyTeal:"e4eaead6dcddc8ced2b7c2c7a6b4bc64b0bf22a6c32295c11f85be1876bc",lightMulti:"e0f1f2c4e9d0b0de9fd0e181f6e072f6c053f3993ef77440ef4a3c",lightOrange:"f2e7daf7d5baf9c499fab184fa9c73f68967ef7860e8645bde515bd43d5b",lightTealBlue:"e3e9e0c0dccf9aceca7abfc859afc0389fb9328dad2f7ca0276b95255988",darkBlue:"3232322d46681a5c930074af008cbf05a7ce25c0dd38daed50f3faffffff",darkGold:"3c3c3c584b37725e348c7631ae8b2bcfa424ecc31ef9de30fff184ffffff",darkGreen:"3a3a3a215748006f4d048942489e4276b340a6c63dd2d836ffeb2cffffaa",darkMulti:"3737371f5287197d8c29a86995ce3fffe800ffffff",darkRed:"3434347036339e3c38cc4037e75d1eec8620eeab29f0ce32ffeb2c"},zet={accent:pet,category10:det,category20:"1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5",category20b:"393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6",category20c:"3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9",dark2:get,observable10:met,paired:yet,pastel1:vet,pastel2:_et,set1:bet,set2:xet,set3:wet,tableau10:"4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac",tableau20:"4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5"};function kB(t){if(gt(t))return t;const e=t.length/6|0,n=new Array(e);for(let i=0;i<e;)n[i]="#"+t.slice(i*6,++i*6);return n}function OB(t,e){for(const n in t)pO(n,e(t[n]))}const l5={};OB(zet,kB);OB(Let,t=>qx(kB(t)));function pO(t,e){return t=t&&t.toLowerCase(),arguments.length>1?(l5[t]=e,this):l5[t]}const o_="symbol",Fet="discrete",Pet="gradient",Bet=t=>gt(t)?t.map(e=>String(e)):String(t),Uet=(t,e)=>t[1]-e[1],Iet=(t,e)=>e[1]-t[1];function gO(t,e,n){let i;return Me(e)&&(t.bins&&(e=Math.max(e,t.bins.length)),n!=null&&(e=Math.min(e,Math.floor(W0(t.domain())/n||1)+1))),Rt(e)&&(i=e.step,e=e.interval),Dt(e)&&(e=t.type===If?zp(e):t.type==qf?Fp(e):dt("Only time and utc scales accept interval strings."),i&&(e=e.every(i))),e}function $B(t,e,n){let i=t.range(),r=i[0],a=be(i),o=Uet;if(r>a&&(i=a,a=r,r=i,o=Iet),r=Math.floor(r),a=Math.ceil(a),e=e.map(s=>[s,t(s)]).filter(s=>r<=s[1]&&s[1]<=a).sort(o).map(s=>s[0]),n>0&&e.length>1){const s=[e[0],be(e)];for(;e.length>n&&e.length>=3;)e=e.filter((l,f)=>!(f%2));e.length<3&&(e=s)}return e}function mO(t,e){return t.bins?$B(t,t.bins,e):t.ticks?t.ticks(e):t.domain()}function DB(t,e,n,i,r,a){const o=e.type;let s=Bet;if(o===If||r===If)s=t.timeFormat(i);else if(o===qf||r===qf)s=t.utcFormat(i);else if(EB(o)){const l=t.formatFloat(i);if(a||e.bins)s=l;else{const f=RB(e,n,!1);s=d=>f(d)?l(d):""}}else if(e.tickFormat){const l=e.domain();s=t.formatSpan(l[0],l[l.length-1],n,i)}else i&&(s=t.format(i));return s}function RB(t,e,n){const i=mO(t,e),r=t.base(),a=Math.log(r),o=Math.max(1,r*e/i.length),s=l=>{let f=l/Math.pow(r,Math.round(Math.log(l)/a));return f*r<r-.5&&(f*=r),f<=o};return n?i.filter(s):s}const NT={[np]:"quantiles",[Ux]:"thresholds",[Ix]:"domain"},NB={[np]:"quantiles",[Ux]:"domain"};function LB(t,e){return t.bins?Het(t.bins):t.type===wu?RB(t,e,!0):NT[t.type]?jet(t[NT[t.type]]()):mO(t,e)}function qet(t,e,n){const i=e[NB[e.type]](),r=i.length;let a=r>1?i[1]-i[0]:i[0],o;for(o=1;o<r;++o)a=Math.min(a,i[o]-i[o-1]);return t.formatSpan(0,a,3*10,n)}function jet(t){const e=[-1/0].concat(t);return e.max=1/0,e}function Het(t){const e=t.slice(0,-1);return e.max=be(t),e}const Get=t=>NT[t.type]||t.bins;function zB(t,e,n,i,r,a,o){const s=NB[e.type]&&a!==If&&a!==qf?qet(t,e,r):DB(t,e,n,r,a,o);return i===o_&&Get(e)?Zet(s):i===Fet?Yet(s):Xet(s)}const Zet=t=>(e,n,i)=>{const r=c5(i[n+1],c5(i.max,1/0)),a=f5(e,t),o=f5(r,t);return a&&o?a+"  "+o:o?"< "+o:" "+a},c5=(t,e)=>t??e,Yet=t=>(e,n)=>n?t(e):null,Xet=t=>e=>t(e),f5=(t,e)=>Number.isFinite(t)?e(t):null;function Wet(t){const e=t.domain(),n=e.length-1;let i=+e[0],r=+be(e),a=r-i;if(t.type===Ix){const o=n?a/n:.1;i-=o,r+=o,a=r-i}return o=>(o-i)/a}function Vet(t,e,n,i){const r=i||e.type;return Dt(n)&&Det(r)&&(n=n.replace(/%a/g,"%A").replace(/%b/g,"%B")),!n&&r===If?t.timeFormat("%A, %d %B %Y, %X"):!n&&r===qf?t.utcFormat("%A, %d %B %Y, %X UTC"):zB(t,e,5,null,n,i,!0)}function FB(t,e,n){n=n||{};const i=Math.max(3,n.maxlen||7),r=Vet(t,e,n.format,n.formatType);if(RT(e.type)){const a=LB(e).slice(1).map(r),o=a.length;return`${o} boundar${o===1?"y":"ies"}: ${a.join(", ")}`}else if(ip(e.type)){const a=e.domain(),o=a.length,s=o>i?a.slice(0,i-2).map(r).join(", ")+", ending with "+a.slice(-1).map(r):a.map(r).join(", ");return`${o} value${o===1?"":"s"}: ${s}`}else{const a=e.domain();return`values from ${r(a[0])} to ${r(be(a))}`}}let PB=0;function Qet(){PB=0}const W_="p_";function yO(t){return t&&t.gradient}function BB(t,e,n){const i=t.gradient;let r=t.id,a=i==="radial"?W_:"";return r||(r=t.id="gradient_"+PB++,i==="radial"?(t.x1=Fo(t.x1,.5),t.y1=Fo(t.y1,.5),t.r1=Fo(t.r1,0),t.x2=Fo(t.x2,.5),t.y2=Fo(t.y2,.5),t.r2=Fo(t.r2,.5),a=W_):(t.x1=Fo(t.x1,0),t.y1=Fo(t.y1,0),t.x2=Fo(t.x2,1),t.y2=Fo(t.y2,0))),e[r]=t,"url("+(n||"")+"#"+a+r+")"}function Fo(t,e){return t??e}function UB(t,e){var n=[],i;return i={gradient:"linear",x1:t?t[0]:0,y1:t?t[1]:0,x2:e?e[0]:1,y2:e?e[1]:0,stops:n,stop:function(r,a){return n.push({offset:r,color:a}),i}}}const h5={basis:{curve:GJ},"basis-closed":{curve:ZJ},"basis-open":{curve:YJ},bundle:{curve:XJ,tension:"beta",value:.85},cardinal:{curve:WJ,tension:"tension",value:0},"cardinal-open":{curve:QJ,tension:"tension",value:0},"cardinal-closed":{curve:VJ,tension:"tension",value:0},"catmull-rom":{curve:KJ,tension:"alpha",value:.5},"catmull-rom-closed":{curve:JJ,tension:"alpha",value:.5},"catmull-rom-open":{curve:ttt,tension:"alpha",value:.5},linear:{curve:qk},"linear-closed":{curve:ett},monotone:{horizontal:itt,vertical:ntt},natural:{curve:rtt},step:{curve:att},"step-after":{curve:stt},"step-before":{curve:ott}};function vO(t,e,n){var i=zt(h5,t)&&h5[t],r=null;return i&&(r=i.curve||i[e||"vertical"],i.tension&&n!=null&&(r=r[i.tension](n))),r}const Ket={m:2,l:2,h:1,v:1,z:0,c:6,s:4,q:4,t:2,a:7},Jet=/[mlhvzcsqta]([^mlhvzcsqta]+|$)/gi,tnt=/^[+-]?(([0-9]*\.[0-9]+)|([0-9]+\.)|([0-9]+))([eE][+-]?[0-9]+)?/,ent=/^((\s+,?\s*)|(,\s*))/,nnt=/^[01]/;function rp(t){const e=[];return(t.match(Jet)||[]).forEach(i=>{let r=i[0];const a=r.toLowerCase(),o=Ket[a],s=int(a,o,i.slice(1).trim()),l=s.length;if(l<o||l&&l%o!==0)throw Error("Invalid SVG path, incorrect parameter count");if(e.push([r,...s.slice(0,o)]),l!==o){a==="m"&&(r=r==="M"?"L":"l");for(let f=o;f<l;f+=o)e.push([r,...s.slice(f,f+o)])}}),e}function int(t,e,n){const i=[];for(let r=0;e&&r<n.length;)for(let a=0;a<e;++a){const o=t==="a"&&(a===3||a===4)?nnt:tnt,s=n.slice(r).match(o);if(s===null)throw Error("Invalid SVG path, incorrect parameter type");r+=s[0].length,i.push(+s[0]);const l=n.slice(r).match(ent);l!==null&&(r+=l[0].length)}return i}const ac=Math.PI/180,rnt=1e-14,xf=Math.PI/2,jo=Math.PI*2,md=Math.sqrt(3)/2;var PS={},BS={},IB=[].join;function ant(t,e,n,i,r,a,o,s,l){const f=IB.call(arguments);if(PS[f])return PS[f];const d=o*ac,p=Math.sin(d),m=Math.cos(d);n=Math.abs(n),i=Math.abs(i);const _=m*(s-t)*.5+p*(l-e)*.5,b=m*(l-e)*.5-p*(s-t)*.5;let x=_*_/(n*n)+b*b/(i*i);x>1&&(x=Math.sqrt(x),n*=x,i*=x);const S=m/n,T=p/n,M=-p/i,k=m/i,$=S*s+T*l,D=M*s+k*l,F=S*t+T*e,N=M*t+k*e;let q=1/((F-$)*(F-$)+(N-D)*(N-D))-.25;q<0&&(q=0);let Y=Math.sqrt(q);a==r&&(Y=-Y);const H=.5*($+F)-Y*(N-D),et=.5*(D+N)+Y*(F-$),nt=Math.atan2(D-et,$-H);let j=Math.atan2(N-et,F-H)-nt;j<0&&a===1?j+=jo:j>0&&a===0&&(j-=jo);const U=Math.ceil(Math.abs(j/(xf+.001))),X=[];for(let V=0;V<U;++V){const ot=nt+V*j/U,B=nt+(V+1)*j/U;X[V]=[H,et,ot,B,n,i,p,m]}return PS[f]=X}function ont(t){const e=IB.call(t);if(BS[e])return BS[e];var n=t[0],i=t[1],r=t[2],a=t[3],o=t[4],s=t[5],l=t[6],f=t[7];const d=f*o,p=-l*s,m=l*o,_=f*s,b=Math.cos(r),x=Math.sin(r),S=Math.cos(a),T=Math.sin(a),M=.5*(a-r),k=Math.sin(M*.5),$=8/3*k*k/Math.sin(M),D=n+b-$*x,F=i+x+$*b,N=n+S,I=i+T,q=N+$*T,Y=I-$*S;return BS[e]=[d*D+p*F,m*D+_*F,d*q+p*Y,m*q+_*Y,d*N+p*I,m*N+_*I]}const ga=["l",0,0,0,0,0,0,0];function snt(t,e,n){const i=ga[0]=t[0];if(i==="a"||i==="A")ga[1]=e*t[1],ga[2]=n*t[2],ga[3]=t[3],ga[4]=t[4],ga[5]=t[5],ga[6]=e*t[6],ga[7]=n*t[7];else if(i==="h"||i==="H")ga[1]=e*t[1];else if(i==="v"||i==="V")ga[1]=n*t[1];else for(var r=1,a=t.length;r<a;++r)ga[r]=(r%2==1?e:n)*t[r];return ga}function A0(t,e,n,i,r,a){var o,s=null,l=0,f=0,d=0,p=0,m,_,b,x,S=0,T=0;n==null&&(n=0),i==null&&(i=0),r==null&&(r=1),a==null&&(a=r),t.beginPath&&t.beginPath();for(var M=0,k=e.length;M<k;++M){switch(o=e[M],(r!==1||a!==1)&&(o=snt(o,r,a)),o[0]){case"l":l+=o[1],f+=o[2],t.lineTo(l+n,f+i);break;case"L":l=o[1],f=o[2],t.lineTo(l+n,f+i);break;case"h":l+=o[1],t.lineTo(l+n,f+i);break;case"H":l=o[1],t.lineTo(l+n,f+i);break;case"v":f+=o[1],t.lineTo(l+n,f+i);break;case"V":f=o[1],t.lineTo(l+n,f+i);break;case"m":l+=o[1],f+=o[2],S=l,T=f,t.moveTo(l+n,f+i);break;case"M":l=o[1],f=o[2],S=l,T=f,t.moveTo(l+n,f+i);break;case"c":m=l+o[5],_=f+o[6],d=l+o[3],p=f+o[4],t.bezierCurveTo(l+o[1]+n,f+o[2]+i,d+n,p+i,m+n,_+i),l=m,f=_;break;case"C":l=o[5],f=o[6],d=o[3],p=o[4],t.bezierCurveTo(o[1]+n,o[2]+i,d+n,p+i,l+n,f+i);break;case"s":m=l+o[3],_=f+o[4],d=2*l-d,p=2*f-p,t.bezierCurveTo(d+n,p+i,l+o[1]+n,f+o[2]+i,m+n,_+i),d=l+o[1],p=f+o[2],l=m,f=_;break;case"S":m=o[3],_=o[4],d=2*l-d,p=2*f-p,t.bezierCurveTo(d+n,p+i,o[1]+n,o[2]+i,m+n,_+i),l=m,f=_,d=o[1],p=o[2];break;case"q":m=l+o[3],_=f+o[4],d=l+o[1],p=f+o[2],t.quadraticCurveTo(d+n,p+i,m+n,_+i),l=m,f=_;break;case"Q":m=o[3],_=o[4],t.quadraticCurveTo(o[1]+n,o[2]+i,m+n,_+i),l=m,f=_,d=o[1],p=o[2];break;case"t":m=l+o[1],_=f+o[2],s[0].match(/[QqTt]/)===null?(d=l,p=f):s[0]==="t"?(d=2*l-b,p=2*f-x):s[0]==="q"&&(d=2*l-d,p=2*f-p),b=d,x=p,t.quadraticCurveTo(d+n,p+i,m+n,_+i),l=m,f=_,d=l+o[1],p=f+o[2];break;case"T":m=o[1],_=o[2],d=2*l-d,p=2*f-p,t.quadraticCurveTo(d+n,p+i,m+n,_+i),l=m,f=_;break;case"a":d5(t,l+n,f+i,[o[1],o[2],o[3],o[4],o[5],o[6]+l+n,o[7]+f+i]),l+=o[6],f+=o[7];break;case"A":d5(t,l+n,f+i,[o[1],o[2],o[3],o[4],o[5],o[6]+n,o[7]+i]),l=o[6],f=o[7];break;case"z":case"Z":l=S,f=T,t.closePath();break}s=o}}function d5(t,e,n,i){const r=ant(i[5],i[6],i[0],i[1],i[3],i[4],i[2],e,n);for(let a=0;a<r.length;++a){const o=ont(r[a]);t.bezierCurveTo(o[0],o[1],o[2],o[3],o[4],o[5])}}const p5=.5773502691896257,g5={circle:{draw:function(t,e){const n=Math.sqrt(e)/2;t.moveTo(n,0),t.arc(0,0,n,0,jo)}},cross:{draw:function(t,e){var n=Math.sqrt(e)/2,i=n/2.5;t.moveTo(-n,-i),t.lineTo(-n,i),t.lineTo(-i,i),t.lineTo(-i,n),t.lineTo(i,n),t.lineTo(i,i),t.lineTo(n,i),t.lineTo(n,-i),t.lineTo(i,-i),t.lineTo(i,-n),t.lineTo(-i,-n),t.lineTo(-i,-i),t.closePath()}},diamond:{draw:function(t,e){const n=Math.sqrt(e)/2;t.moveTo(-n,0),t.lineTo(0,-n),t.lineTo(n,0),t.lineTo(0,n),t.closePath()}},square:{draw:function(t,e){var n=Math.sqrt(e),i=-n/2;t.rect(i,i,n,n)}},arrow:{draw:function(t,e){var n=Math.sqrt(e)/2,i=n/7,r=n/2.5,a=n/8;t.moveTo(-i,n),t.lineTo(i,n),t.lineTo(i,-a),t.lineTo(r,-a),t.lineTo(0,-n),t.lineTo(-r,-a),t.lineTo(-i,-a),t.closePath()}},wedge:{draw:function(t,e){var n=Math.sqrt(e)/2,i=md*n,r=i-n*p5,a=n/4;t.moveTo(0,-i-r),t.lineTo(-a,i-r),t.lineTo(a,i-r),t.closePath()}},triangle:{draw:function(t,e){var n=Math.sqrt(e)/2,i=md*n,r=i-n*p5;t.moveTo(0,-i-r),t.lineTo(-n,i-r),t.lineTo(n,i-r),t.closePath()}},"triangle-up":{draw:function(t,e){var n=Math.sqrt(e)/2,i=md*n;t.moveTo(0,-i),t.lineTo(-n,i),t.lineTo(n,i),t.closePath()}},"triangle-down":{draw:function(t,e){var n=Math.sqrt(e)/2,i=md*n;t.moveTo(0,i),t.lineTo(-n,-i),t.lineTo(n,-i),t.closePath()}},"triangle-right":{draw:function(t,e){var n=Math.sqrt(e)/2,i=md*n;t.moveTo(i,0),t.lineTo(-i,-n),t.lineTo(-i,n),t.closePath()}},"triangle-left":{draw:function(t,e){var n=Math.sqrt(e)/2,i=md*n;t.moveTo(-i,0),t.lineTo(i,-n),t.lineTo(i,n),t.closePath()}},stroke:{draw:function(t,e){const n=Math.sqrt(e)/2;t.moveTo(-n,0),t.lineTo(n,0)}}};function qB(t){return zt(g5,t)?g5[t]:unt(t)}var US={};function unt(t){if(!zt(US,t)){const e=rp(t);US[t]={draw:function(n,i){A0(n,e,0,0,Math.sqrt(i)/2)}}}return US[t]}const kl=.448084975506;function lnt(t){return t.x}function cnt(t){return t.y}function fnt(t){return t.width}function hnt(t){return t.height}function Ks(t){return typeof t=="function"?t:()=>+t}function Sv(t,e,n){return Math.max(e,Math.min(t,n))}function jB(){var t=lnt,e=cnt,n=fnt,i=hnt,r=Ks(0),a=r,o=r,s=r,l=null;function f(d,p,m){var _,b=p??+t.call(this,d),x=m??+e.call(this,d),S=+n.call(this,d),T=+i.call(this,d),M=Math.min(S,T)/2,k=Sv(+r.call(this,d),0,M),$=Sv(+a.call(this,d),0,M),D=Sv(+o.call(this,d),0,M),F=Sv(+s.call(this,d),0,M);if(l||(l=_=kx()),k<=0&&$<=0&&D<=0&&F<=0)l.rect(b,x,S,T);else{var N=b+S,I=x+T;l.moveTo(b+k,x),l.lineTo(N-$,x),l.bezierCurveTo(N-kl*$,x,N,x+kl*$,N,x+$),l.lineTo(N,I-F),l.bezierCurveTo(N,I-kl*F,N-kl*F,I,N-F,I),l.lineTo(b+D,I),l.bezierCurveTo(b+kl*D,I,b,I-kl*D,b,I-D),l.lineTo(b,x+k),l.bezierCurveTo(b,x+kl*k,b+kl*k,x,b+k,x),l.closePath()}if(_)return l=null,_+""||null}return f.x=function(d){return arguments.length?(t=Ks(d),f):t},f.y=function(d){return arguments.length?(e=Ks(d),f):e},f.width=function(d){return arguments.length?(n=Ks(d),f):n},f.height=function(d){return arguments.length?(i=Ks(d),f):i},f.cornerRadius=function(d,p,m,_){return arguments.length?(r=Ks(d),a=p!=null?Ks(p):r,s=m!=null?Ks(m):r,o=_!=null?Ks(_):a,f):r},f.context=function(d){return arguments.length?(l=d??null,f):l},f}function HB(){var t,e,n,i,r=null,a,o,s,l;function f(p,m,_){const b=_/2;if(a){var x=s-m,S=p-o;if(x||S){var T=Math.hypot(x,S),M=(x/=T)*l,k=(S/=T)*l,$=Math.atan2(S,x);r.moveTo(o-M,s-k),r.lineTo(p-x*b,m-S*b),r.arc(p,m,b,$-Math.PI,$),r.lineTo(o+M,s+k),r.arc(o,s,l,$,$+Math.PI)}else r.arc(p,m,b,0,jo);r.closePath()}else a=1;o=p,s=m,l=b}function d(p){var m,_=p.length,b,x=!1,S;for(r==null&&(r=S=kx()),m=0;m<=_;++m)!(m<_&&i(b=p[m],m,p))===x&&(x=!x)&&(a=0),x&&f(+t(b,m,p),+e(b,m,p),+n(b,m,p));if(S)return r=null,S+""||null}return d.x=function(p){return arguments.length?(t=p,d):t},d.y=function(p){return arguments.length?(e=p,d):e},d.size=function(p){return arguments.length?(n=p,d):n},d.defined=function(p){return arguments.length?(i=p,d):i},d.context=function(p){return arguments.length?(p==null?r=null:r=p,d):r},d}function oy(t,e){return t??e}const sy=t=>t.x||0,uy=t=>t.y||0,dnt=t=>t.width||0,pnt=t=>t.height||0,gnt=t=>(t.x||0)+(t.width||0),mnt=t=>(t.y||0)+(t.height||0),ynt=t=>t.startAngle||0,vnt=t=>t.endAngle||0,_nt=t=>t.padAngle||0,bnt=t=>t.innerRadius||0,xnt=t=>t.outerRadius||0,wnt=t=>t.cornerRadius||0,Ent=t=>oy(t.cornerRadiusTopLeft,t.cornerRadius)||0,Snt=t=>oy(t.cornerRadiusTopRight,t.cornerRadius)||0,Ant=t=>oy(t.cornerRadiusBottomRight,t.cornerRadius)||0,Tnt=t=>oy(t.cornerRadiusBottomLeft,t.cornerRadius)||0,Cnt=t=>oy(t.size,64),Mnt=t=>t.size||1,jx=t=>t.defined!==!1,knt=t=>qB(t.shape||"circle"),Ont=qJ().startAngle(ynt).endAngle(vnt).padAngle(_nt).innerRadius(bnt).outerRadius(xnt).cornerRadius(wnt),$nt=_7().x(sy).y1(uy).y0(mnt).defined(jx),Dnt=_7().y(uy).x1(sy).x0(gnt).defined(jx),Rnt=v7().x(sy).y(uy).defined(jx),Nnt=jB().x(sy).y(uy).width(dnt).height(pnt).cornerRadius(Ent,Snt,Ant,Tnt),Lnt=HJ().type(knt).size(Cnt),znt=HB().x(sy).y(uy).defined(jx).size(Mnt);function _O(t){return t.cornerRadius||t.cornerRadiusTopLeft||t.cornerRadiusTopRight||t.cornerRadiusBottomRight||t.cornerRadiusBottomLeft}function Fnt(t,e){return Ont.context(t)(e)}function Pnt(t,e){const n=e[0],i=n.interpolate||"linear";return(n.orient==="horizontal"?Dnt:$nt).curve(vO(i,n.orient,n.tension)).context(t)(e)}function Bnt(t,e){const n=e[0],i=n.interpolate||"linear";return Rnt.curve(vO(i,n.orient,n.tension)).context(t)(e)}function Ip(t,e,n,i){return Nnt.context(t)(e,n,i)}function Unt(t,e){return(e.mark.shape||e.shape).context(t)(e)}function Int(t,e){return Lnt.context(t)(e)}function qnt(t,e){return znt.context(t)(e)}var GB=1;function jnt(){GB=1}function bO(t,e,n){var i=e.clip,r=t._defs,a=e.clip_id||(e.clip_id="clip"+GB++),o=r.clipping[a]||(r.clipping[a]={id:a});return se(i)?o.path=i(null):_O(n)?o.path=Ip(null,n,0,0):(o.width=n.width||0,o.height=n.height||0),"url(#"+a+")"}function Nn(t){this.clear(),t&&this.union(t)}Nn.prototype={clone(){return new Nn(this)},clear(){return this.x1=+Number.MAX_VALUE,this.y1=+Number.MAX_VALUE,this.x2=-Number.MAX_VALUE,this.y2=-Number.MAX_VALUE,this},empty(){return this.x1===+Number.MAX_VALUE&&this.y1===+Number.MAX_VALUE&&this.x2===-Number.MAX_VALUE&&this.y2===-Number.MAX_VALUE},equals(t){return this.x1===t.x1&&this.y1===t.y1&&this.x2===t.x2&&this.y2===t.y2},set(t,e,n,i){return n<t?(this.x2=t,this.x1=n):(this.x1=t,this.x2=n),i<e?(this.y2=e,this.y1=i):(this.y1=e,this.y2=i),this},add(t,e){return t<this.x1&&(this.x1=t),e<this.y1&&(this.y1=e),t>this.x2&&(this.x2=t),e>this.y2&&(this.y2=e),this},expand(t){return this.x1-=t,this.y1-=t,this.x2+=t,this.y2+=t,this},round(){return this.x1=Math.floor(this.x1),this.y1=Math.floor(this.y1),this.x2=Math.ceil(this.x2),this.y2=Math.ceil(this.y2),this},scale(t){return this.x1*=t,this.y1*=t,this.x2*=t,this.y2*=t,this},translate(t,e){return this.x1+=t,this.x2+=t,this.y1+=e,this.y2+=e,this},rotate(t,e,n){const i=this.rotatedPoints(t,e,n);return this.clear().add(i[0],i[1]).add(i[2],i[3]).add(i[4],i[5]).add(i[6],i[7])},rotatedPoints(t,e,n){var{x1:i,y1:r,x2:a,y2:o}=this,s=Math.cos(t),l=Math.sin(t),f=e-e*s+n*l,d=n-e*l-n*s;return[s*i-l*r+f,l*i+s*r+d,s*i-l*o+f,l*i+s*o+d,s*a-l*r+f,l*a+s*r+d,s*a-l*o+f,l*a+s*o+d]},union(t){return t.x1<this.x1&&(this.x1=t.x1),t.y1<this.y1&&(this.y1=t.y1),t.x2>this.x2&&(this.x2=t.x2),t.y2>this.y2&&(this.y2=t.y2),this},intersect(t){return t.x1>this.x1&&(this.x1=t.x1),t.y1>this.y1&&(this.y1=t.y1),t.x2<this.x2&&(this.x2=t.x2),t.y2<this.y2&&(this.y2=t.y2),this},encloses(t){return t&&this.x1<=t.x1&&this.x2>=t.x2&&this.y1<=t.y1&&this.y2>=t.y2},alignsWith(t){return t&&(this.x1==t.x1||this.x2==t.x2||this.y1==t.y1||this.y2==t.y2)},intersects(t){return t&&!(this.x2<t.x1||this.x1>t.x2||this.y2<t.y1||this.y1>t.y2)},contains(t,e){return!(t<this.x1||t>this.x2||e<this.y1||e>this.y2)},width(){return this.x2-this.x1},height(){return this.y2-this.y1}};function Hx(t){this.mark=t,this.bounds=this.bounds||new Nn}function Gx(t){Hx.call(this,t),this.items=this.items||[]}kt(Gx,Hx);class ZB{constructor(e){this._pending=0,this._loader=e||yx()}pending(){return this._pending}sanitizeURL(e){const n=this;return m5(n),n._loader.sanitize(e,{context:"href"}).then(i=>(gm(n),i)).catch(()=>(gm(n),null))}loadImage(e){const n=this,i=utt();return m5(n),n._loader.sanitize(e,{context:"image"}).then(r=>{const a=r.href;if(!a||!i)throw{url:a};const o=new i,s=zt(r,"crossOrigin")?r.crossOrigin:"anonymous";return s!=null&&(o.crossOrigin=s),o.onload=()=>gm(n),o.onerror=()=>gm(n),o.src=a,o}).catch(r=>(gm(n),{complete:!1,width:0,height:0,src:r&&r.url||""}))}ready(){const e=this;return new Promise(n=>{function i(r){e.pending()?setTimeout(()=>{i(!0)},10):n(r)}i(!1)})}}function m5(t){t._pending+=1}function gm(t){t._pending-=1}function Cu(t,e,n){if(e.stroke&&e.opacity!==0&&e.strokeOpacity!==0){const i=e.strokeWidth!=null?+e.strokeWidth:1;t.expand(i+(n?Hnt(e,i):0))}return t}function Hnt(t,e){return t.strokeJoin&&t.strokeJoin!=="miter"?0:e}const Gnt=jo-1e-8;let Zx,s_,u_,Cf,LT,l_,zT,FT;const Bl=(t,e)=>Zx.add(t,e),c_=(t,e)=>Bl(s_=t,u_=e),y5=t=>Bl(t,Zx.y1),v5=t=>Bl(Zx.x1,t),wf=(t,e)=>LT*t+zT*e,Ef=(t,e)=>l_*t+FT*e,IS=(t,e)=>Bl(wf(t,e),Ef(t,e)),qS=(t,e)=>c_(wf(t,e),Ef(t,e));function ly(t,e){return Zx=t,e?(Cf=e*ac,LT=FT=Math.cos(Cf),l_=Math.sin(Cf),zT=-l_):(LT=FT=1,Cf=l_=zT=0),Znt}const Znt={beginPath(){},closePath(){},moveTo:qS,lineTo:qS,rect(t,e,n,i){Cf?(IS(t+n,e),IS(t+n,e+i),IS(t,e+i),qS(t,e)):(Bl(t+n,e+i),c_(t,e))},quadraticCurveTo(t,e,n,i){const r=wf(t,e),a=Ef(t,e),o=wf(n,i),s=Ef(n,i);_5(s_,r,o,y5),_5(u_,a,s,v5),c_(o,s)},bezierCurveTo(t,e,n,i,r,a){const o=wf(t,e),s=Ef(t,e),l=wf(n,i),f=Ef(n,i),d=wf(r,a),p=Ef(r,a);b5(s_,o,l,d,y5),b5(u_,s,f,p,v5),c_(d,p)},arc(t,e,n,i,r,a){if(i+=Cf,r+=Cf,s_=n*Math.cos(r)+t,u_=n*Math.sin(r)+e,Math.abs(r-i)>Gnt)Bl(t-n,e-n),Bl(t+n,e+n);else{const o=f=>Bl(n*Math.cos(f)+t,n*Math.sin(f)+e);let s,l;if(o(i),o(r),r!==i)if(i=i%jo,i<0&&(i+=jo),r=r%jo,r<0&&(r+=jo),r<i&&(a=!a,s=i,i=r,r=s),a)for(r-=jo,s=i-i%xf,l=0;l<4&&s>r;++l,s-=xf)o(s);else for(s=i-i%xf+xf,l=0;l<4&&s<r;++l,s=s+xf)o(s)}}};function _5(t,e,n,i){const r=(t-e)/(t+n-2*e);0<r&&r<1&&i(t+(e-t)*r)}function b5(t,e,n,i,r){const a=i-t+3*e-3*n,o=t+n-2*e,s=t-e;let l=0,f=0,d;Math.abs(a)>rnt?(d=o*o+s*a,d>=0&&(d=Math.sqrt(d),l=(-o+d)/a,f=(-o-d)/a)):l=.5*s/o,0<l&&l<1&&r(x5(l,t,e,n,i)),0<f&&f<1&&r(x5(f,t,e,n,i))}function x5(t,e,n,i,r){const a=1-t,o=a*a,s=t*t;return o*a*e+3*o*t*n+3*a*s*i+s*t*r}var Kl=(Kl=Ql(1,1))?Kl.getContext("2d"):null;const PT=new Nn;function xO(t){return function(e,n){if(!Kl)return!0;t(Kl,e),PT.clear().union(e.bounds).intersect(n).round();const{x1:i,y1:r,x2:a,y2:o}=PT;for(let s=r;s<=o;++s)for(let l=i;l<=a;++l)if(Kl.isPointInPath(l,s))return!0;return!1}}function wO(t,e){return e.contains(t.x||0,t.y||0)}function YB(t,e){const n=t.x||0,i=t.y||0,r=t.width||0,a=t.height||0;return e.intersects(PT.set(n,i,n+r,i+a))}function XB(t,e){const n=t.x||0,i=t.y||0,r=t.x2!=null?t.x2:n,a=t.y2!=null?t.y2:i;return Od(e,n,i,r,a)}function Od(t,e,n,i,r){const{x1:a,y1:o,x2:s,y2:l}=t,f=i-e,d=r-n;let p=0,m=1,_,b,x,S;for(S=0;S<4;++S){if(S===0&&(_=-f,b=-(a-e)),S===1&&(_=f,b=s-e),S===2&&(_=-d,b=-(o-n)),S===3&&(_=d,b=l-n),Math.abs(_)<1e-10&&b<0)return!1;if(x=b/_,_<0){if(x>m)return!1;x>p&&(p=x)}else if(_>0){if(x<p)return!1;x<m&&(m=x)}}return!0}function ap(t,e){t.globalCompositeOperation=e.blend||"source-over"}function Za(t,e){return t??e}function w5(t,e){const n=e.length;for(let i=0;i<n;++i)t.addColorStop(e[i].offset,e[i].color);return t}function Ynt(t,e,n){const i=n.width(),r=n.height();let a;if(e.gradient==="radial")a=t.createRadialGradient(n.x1+Za(e.x1,.5)*i,n.y1+Za(e.y1,.5)*r,Math.max(i,r)*Za(e.r1,0),n.x1+Za(e.x2,.5)*i,n.y1+Za(e.y2,.5)*r,Math.max(i,r)*Za(e.r2,.5));else{const o=Za(e.x1,0),s=Za(e.y1,0),l=Za(e.x2,1),f=Za(e.y2,0);if(o===l||s===f||i===r)a=t.createLinearGradient(n.x1+o*i,n.y1+s*r,n.x1+l*i,n.y1+f*r);else{const d=Ql(Math.ceil(i),Math.ceil(r)),p=d.getContext("2d");return p.scale(i,r),p.fillStyle=w5(p.createLinearGradient(o,s,l,f),e.stops),p.fillRect(0,0,i,r),t.createPattern(d,"no-repeat")}}return w5(a,e.stops)}function WB(t,e,n){return yO(n)?Ynt(t,n,e.bounds):n}function V_(t,e,n){return n*=e.fillOpacity==null?1:e.fillOpacity,n>0?(t.globalAlpha=n,t.fillStyle=WB(t,e,e.fill),!0):!1}var Xnt=[];function op(t,e,n){var i=(i=e.strokeWidth)!=null?i:1;return i<=0?!1:(n*=e.strokeOpacity==null?1:e.strokeOpacity,n>0?(t.globalAlpha=n,t.strokeStyle=WB(t,e,e.stroke),t.lineWidth=i,t.lineCap=e.strokeCap||"butt",t.lineJoin=e.strokeJoin||"miter",t.miterLimit=e.strokeMiterLimit||10,t.setLineDash&&(t.setLineDash(e.strokeDash||Xnt),t.lineDashOffset=e.strokeDashOffset||0),!0):!1)}function Wnt(t,e){return t.zindex-e.zindex||t.index-e.index}function EO(t){if(!t.zdirty)return t.zitems;var e=t.items,n=[],i,r,a;for(r=0,a=e.length;r<a;++r)i=e[r],i.index=r,i.zindex&&n.push(i);return t.zdirty=!1,t.zitems=n.sort(Wnt)}function uo(t,e){var n=t.items,i,r;if(!n||!n.length)return;const a=EO(t);if(a&&a.length){for(i=0,r=n.length;i<r;++i)n[i].zindex||e(n[i]);n=a}for(i=0,r=n.length;i<r;++i)e(n[i])}function Q_(t,e){var n=t.items,i,r;if(!n||!n.length)return null;const a=EO(t);for(a&&a.length&&(n=a),r=n.length;--r>=0;)if(i=e(n[r]))return i;if(n===a){for(n=t.items,r=n.length;--r>=0;)if(!n[r].zindex&&(i=e(n[r])))return i}return null}function SO(t){return function(e,n,i){uo(n,r=>{(!i||i.intersects(r.bounds))&&VB(t,e,r,r)})}}function Vnt(t){return function(e,n,i){n.items.length&&(!i||i.intersects(n.bounds))&&VB(t,e,n.items[0],n.items)}}function VB(t,e,n,i){var r=n.opacity==null?1:n.opacity;r!==0&&(t(e,i)||(ap(e,n),n.fill&&V_(e,n,r)&&e.fill(),n.stroke&&op(e,n,r)&&e.stroke()))}function Yx(t){return t=t||Ta,function(e,n,i,r,a,o){return i*=e.pixelRatio,r*=e.pixelRatio,Q_(n,s=>{const l=s.bounds;if(!(l&&!l.contains(a,o)||!l)&&t(e,s,i,r,a,o))return s})}}function cy(t,e){return function(n,i,r,a){var o=Array.isArray(i)?i[0]:i,s=e??o.fill,l=o.stroke&&n.isPointInStroke,f,d;return l&&(f=o.strokeWidth,d=o.strokeCap,n.lineWidth=f??1,n.lineCap=d??"butt"),t(n,i)?!1:s&&n.isPointInPath(r,a)||l&&n.isPointInStroke(r,a)}}function AO(t){return Yx(cy(t))}function Df(t,e){return"translate("+t+","+e+")"}function TO(t){return"rotate("+t+")"}function Qnt(t,e){return"scale("+t+","+e+")"}function QB(t){return Df(t.x||0,t.y||0)}function Knt(t){return Df(t.x||0,t.y||0)+(t.angle?" "+TO(t.angle):"")}function Jnt(t){return Df(t.x||0,t.y||0)+(t.angle?" "+TO(t.angle):"")+(t.scaleX||t.scaleY?" "+Qnt(t.scaleX||1,t.scaleY||1):"")}function CO(t,e,n){function i(o,s){o("transform",Knt(s)),o("d",e(null,s))}function r(o,s){return e(ly(o,s.angle),s),Cu(o,s).translate(s.x||0,s.y||0)}function a(o,s){var l=s.x||0,f=s.y||0,d=s.angle||0;o.translate(l,f),d&&o.rotate(d*=ac),o.beginPath(),e(o,s),d&&o.rotate(-d),o.translate(-l,-f)}return{type:t,tag:"path",nested:!1,attr:i,bound:r,draw:SO(a),pick:AO(a),isect:n||xO(a)}}var tit=CO("arc",Fnt);function eit(t,e){for(var n=t[0].orient==="horizontal"?e[1]:e[0],i=t[0].orient==="horizontal"?"y":"x",r=t.length,a=1/0,o,s;--r>=0;)t[r].defined!==!1&&(s=Math.abs(t[r][i]-n),s<a&&(a=s,o=t[r]));return o}function nit(t,e){for(var n=Math.pow(t[0].strokeWidth||1,2),i=t.length,r,a,o;--i>=0;)if(t[i].defined!==!1&&(r=t[i].x-e[0],a=t[i].y-e[1],o=r*r+a*a,o<n))return t[i];return null}function iit(t,e){for(var n=t.length,i,r,a;--n>=0;)if(t[n].defined!==!1&&(i=t[n].x-e[0],r=t[n].y-e[1],a=i*i+r*r,i=t[n].size||1,a<i*i))return t[n];return null}function MO(t,e,n){function i(l,f){var d=f.mark.items;d.length&&l("d",e(null,d))}function r(l,f){var d=f.items;return d.length===0?l:(e(ly(l),d),Cu(l,d[0]))}function a(l,f){l.beginPath(),e(l,f)}const o=cy(a);function s(l,f,d,p,m,_){var b=f.items,x=f.bounds;return!b||!b.length||x&&!x.contains(m,_)?null:(d*=l.pixelRatio,p*=l.pixelRatio,o(l,b,d,p)?b[0]:null)}return{type:t,tag:"path",nested:!0,attr:i,bound:r,draw:Vnt(a),pick:s,isect:wO,tip:n}}var rit=MO("area",Pnt,eit);function ait(t,e){var n=e.clip;t.save(),se(n)?(t.beginPath(),n(t),t.clip()):KB(t,e.group)}function KB(t,e){t.beginPath(),_O(e)?Ip(t,e,0,0):t.rect(0,0,e.width||0,e.height||0),t.clip()}function JB(t){const e=Za(t.strokeWidth,1);return t.strokeOffset!=null?t.strokeOffset:t.stroke&&e>.5&&e<1.5?.5-Math.abs(e-1):0}function oit(t,e){t("transform",QB(e))}function tU(t,e){const n=JB(e);t("d",Ip(null,e,n,n))}function sit(t,e){t("class","background"),t("aria-hidden",!0),tU(t,e)}function uit(t,e){t("class","foreground"),t("aria-hidden",!0),e.strokeForeground?tU(t,e):t("d","")}function lit(t,e,n){const i=e.clip?bO(n,e,e):null;t("clip-path",i)}function cit(t,e){if(!e.clip&&e.items){const n=e.items,i=n.length;for(let r=0;r<i;++r)t.union(n[r].bounds)}return(e.clip||e.width||e.height)&&!e.noBound&&t.add(0,0).add(e.width||0,e.height||0),Cu(t,e),t.translate(e.x||0,e.y||0)}function T0(t,e,n,i){const r=JB(e);t.beginPath(),Ip(t,e,(n||0)+r,(i||0)+r)}const fit=cy(T0),hit=cy(T0,!1),dit=cy(T0,!0);function pit(t,e,n,i){uo(e,r=>{const a=r.x||0,o=r.y||0,s=r.strokeForeground,l=r.opacity==null?1:r.opacity;(r.stroke||r.fill)&&l&&(T0(t,r,a,o),ap(t,r),r.fill&&V_(t,r,l)&&t.fill(),r.stroke&&!s&&op(t,r,l)&&t.stroke()),t.save(),t.translate(a,o),r.clip&&KB(t,r),n&&n.translate(-a,-o),uo(r,f=>{(f.marktype==="group"||i==null||i.includes(f.marktype))&&this.draw(t,f,n,i)}),n&&n.translate(a,o),t.restore(),s&&r.stroke&&l&&(T0(t,r,a,o),ap(t,r),op(t,r,l)&&t.stroke())})}function git(t,e,n,i,r,a){if(e.bounds&&!e.bounds.contains(r,a)||!e.items)return null;const o=n*t.pixelRatio,s=i*t.pixelRatio;return Q_(e,l=>{let f,d,p;const m=l.bounds;if(m&&!m.contains(r,a))return;d=l.x||0,p=l.y||0;const _=d+(l.width||0),b=p+(l.height||0),x=l.clip;if(x&&(r<d||r>_||a<p||a>b))return;if(t.save(),t.translate(d,p),d=r-d,p=a-p,x&&_O(l)&&!dit(t,l,o,s))return t.restore(),null;const S=l.strokeForeground,T=e.interactive!==!1;return T&&S&&l.stroke&&hit(t,l,o,s)?(t.restore(),l):(f=Q_(l,M=>mit(M,d,p)?this.pick(M,n,i,d,p):null),!f&&T&&(l.fill||!S&&l.stroke)&&fit(t,l,o,s)&&(f=l),t.restore(),f||null)})}function mit(t,e,n){return(t.interactive!==!1||t.marktype==="group")&&t.bounds&&t.bounds.contains(e,n)}var yit={type:"group",tag:"g",nested:!1,attr:oit,bound:cit,draw:pit,pick:git,isect:YB,content:lit,background:sit,foreground:uit},C0={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1"};function kO(t,e){var n=t.image;return(!n||t.url&&t.url!==n.url)&&(n={complete:!1,width:0,height:0},e.loadImage(t.url).then(i=>{t.image=i,t.image.url=t.url})),n}function OO(t,e){return t.width!=null?t.width:!e||!e.width?0:t.aspect!==!1&&t.height?t.height*e.width/e.height:e.width}function $O(t,e){return t.height!=null?t.height:!e||!e.height?0:t.aspect!==!1&&t.width?t.width*e.height/e.width:e.height}function Xx(t,e){return t==="center"?e/2:t==="right"?e:0}function Wx(t,e){return t==="middle"?e/2:t==="bottom"?e:0}function vit(t,e,n){const i=kO(e,n),r=OO(e,i),a=$O(e,i),o=(e.x||0)-Xx(e.align,r),s=(e.y||0)-Wx(e.baseline,a),l=!i.src&&i.toDataURL?i.toDataURL():i.src||"";t("href",l,C0["xmlns:xlink"],"xlink:href"),t("transform",Df(o,s)),t("width",r),t("height",a),t("preserveAspectRatio",e.aspect===!1?"none":"xMidYMid")}function _it(t,e){const n=e.image,i=OO(e,n),r=$O(e,n),a=(e.x||0)-Xx(e.align,i),o=(e.y||0)-Wx(e.baseline,r);return t.set(a,o,a+i,o+r)}function bit(t,e,n){uo(e,i=>{if(n&&!n.intersects(i.bounds))return;const r=kO(i,this);let a=OO(i,r),o=$O(i,r);if(a===0||o===0)return;let s=(i.x||0)-Xx(i.align,a),l=(i.y||0)-Wx(i.baseline,o),f,d,p,m;i.aspect!==!1&&(d=r.width/r.height,p=i.width/i.height,d===d&&p===p&&d!==p&&(p<d?(m=a/d,l+=(o-m)/2,o=m):(m=o*d,s+=(a-m)/2,a=m))),(r.complete||r.toDataURL)&&(ap(t,i),t.globalAlpha=(f=i.opacity)!=null?f:1,t.imageSmoothingEnabled=i.smooth!==!1,t.drawImage(r,s,l,a,o))})}var xit={type:"image",tag:"image",nested:!1,attr:vit,bound:_it,draw:bit,pick:Yx(),isect:Ta,get:kO,xOffset:Xx,yOffset:Wx},wit=MO("line",Bnt,nit);function Eit(t,e){var n=e.scaleX||1,i=e.scaleY||1;(n!==1||i!==1)&&t("vector-effect","non-scaling-stroke"),t("transform",Jnt(e)),t("d",e.path)}function f_(t,e){var n=e.path;if(n==null)return!0;var i=e.x||0,r=e.y||0,a=e.scaleX||1,o=e.scaleY||1,s=(e.angle||0)*ac,l=e.pathCache;(!l||l.path!==n)&&((e.pathCache=l=rp(n)).path=n),s&&t.rotate&&t.translate?(t.translate(i,r),t.rotate(s),A0(t,l,0,0,a,o),t.rotate(-s),t.translate(-i,-r)):A0(t,l,i,r,a,o)}function Sit(t,e){return f_(ly(t,e.angle),e)?t.set(0,0,0,0):Cu(t,e,!0)}var Ait={type:"path",tag:"path",nested:!1,attr:Eit,bound:Sit,draw:SO(f_),pick:AO(f_),isect:xO(f_)};function Tit(t,e){t("d",Ip(null,e))}function Cit(t,e){var n,i;return Cu(t.set(n=e.x||0,i=e.y||0,n+e.width||0,i+e.height||0),e)}function E5(t,e){t.beginPath(),Ip(t,e)}var Mit={type:"rect",tag:"path",nested:!1,attr:Tit,bound:Cit,draw:SO(E5),pick:AO(E5),isect:YB};function kit(t,e){t("transform",QB(e)),t("x2",e.x2!=null?e.x2-(e.x||0):0),t("y2",e.y2!=null?e.y2-(e.y||0):0)}function Oit(t,e){var n,i;return Cu(t.set(n=e.x||0,i=e.y||0,e.x2!=null?e.x2:n,e.y2!=null?e.y2:i),e)}function eU(t,e,n){var i,r,a,o;return e.stroke&&op(t,e,n)?(i=e.x||0,r=e.y||0,a=e.x2!=null?e.x2:i,o=e.y2!=null?e.y2:r,t.beginPath(),t.moveTo(i,r),t.lineTo(a,o),!0):!1}function $it(t,e,n){uo(e,i=>{if(!(n&&!n.intersects(i.bounds))){var r=i.opacity==null?1:i.opacity;r&&eU(t,i,r)&&(ap(t,i),t.stroke())}})}function Dit(t,e,n,i){return t.isPointInStroke?eU(t,e,1)&&t.isPointInStroke(n,i):!1}var Rit={type:"rule",tag:"line",nested:!1,attr:kit,bound:Oit,draw:$it,pick:Yx(Dit),isect:XB},Nit=CO("shape",Unt),Lit=CO("symbol",Int,wO);const S5=lP();var Vr={height:hs,measureWidth:DO,estimateWidth:K_,width:K_,canvas:nU};nU(!0);function nU(t){Vr.width=t&&Kl?DO:K_}function K_(t,e){return iU(sc(t,e),hs(t))}function iU(t,e){return~~(.8*t.length*e)}function DO(t,e){return hs(t)<=0||!(e=sc(t,e))?0:rU(e,Vx(t))}function rU(t,e){const n=`(${e}) ${t}`;let i=S5.get(n);return i===void 0&&(Kl.font=e,i=Kl.measureText(t).width,S5.set(n,i)),i}function hs(t){return t.fontSize!=null?+t.fontSize||0:11}function oc(t){return t.lineHeight!=null?t.lineHeight:hs(t)+2}function zit(t){return gt(t)?t.length>1?t:t[0]:t}function fy(t){return zit(t.lineBreak&&t.text&&!gt(t.text)?t.text.split(t.lineBreak):t.text)}function RO(t){const e=fy(t);return(gt(e)?e.length-1:0)*oc(t)}function sc(t,e){const n=e==null?"":(e+"").trim();return t.limit>0&&n.length?Pit(t,n):n}function Fit(t){if(Vr.width===DO){const e=Vx(t);return n=>rU(n,e)}else if(Vr.width===K_){const e=hs(t);return n=>iU(n,e)}else return e=>Vr.width(t,e)}function Pit(t,e){var n=+t.limit,i=Fit(t);if(i(e)<n)return e;var r=t.ellipsis||"",a=t.dir==="rtl",o=0,s=e.length,l;if(n-=i(r),a){for(;o<s;)l=o+s>>>1,i(e.slice(l))>n?o=l+1:s=l;return r+e.slice(o)}else{for(;o<s;)l=1+(o+s>>>1),i(e.slice(0,l))<n?o=l:s=l-1;return e.slice(0,o)+r}}function hy(t,e){var n=t.font;return(e&&n?String(n).replace(/"/g,"'"):n)||"sans-serif"}function Vx(t,e){return(t.fontStyle?t.fontStyle+" ":"")+(t.fontVariant?t.fontVariant+" ":"")+(t.fontWeight?t.fontWeight+" ":"")+hs(t)+"px "+hy(t,e)}function NO(t){var e=t.baseline,n=hs(t);return Math.round(e==="top"?.79*n:e==="middle"?.3*n:e==="bottom"?-.21*n:e==="line-top"?.29*n+.5*oc(t):e==="line-bottom"?.29*n-.5*oc(t):0)}const Bit={left:"start",center:"middle",right:"end"},n0=new Nn;function Qx(t){var e=t.x||0,n=t.y||0,i=t.radius||0,r;return i&&(r=(t.theta||0)-xf,e+=i*Math.cos(r),n+=i*Math.sin(r)),n0.x1=e,n0.y1=n,n0}function Uit(t,e){var n=e.dx||0,i=(e.dy||0)+NO(e),r=Qx(e),a=r.x1,o=r.y1,s=e.angle||0,l;t("text-anchor",Bit[e.align]||"start"),s?(l=Df(a,o)+" "+TO(s),(n||i)&&(l+=" "+Df(n,i))):l=Df(a+n,o+i),t("transform",l)}function LO(t,e,n){var i=Vr.height(e),r=e.align,a=Qx(e),o=a.x1,s=a.y1,l=e.dx||0,f=(e.dy||0)+NO(e)-Math.round(.8*i),d=fy(e),p;if(gt(d)?(i+=oc(e)*(d.length-1),p=d.reduce((m,_)=>Math.max(m,Vr.width(e,_)),0)):p=Vr.width(e,d),r==="center"?l-=p/2:r==="right"&&(l-=p),t.set(l+=o,f+=s,l+p,f+i),e.angle&&!n)t.rotate(e.angle*ac,o,s);else if(n===2)return t.rotatedPoints(e.angle*ac,o,s);return t}function Iit(t,e,n){uo(e,i=>{var r=i.opacity==null?1:i.opacity,a,o,s,l,f,d,p;if(!(n&&!n.intersects(i.bounds)||r===0||i.fontSize<=0||i.text==null||i.text.length===0)){if(t.font=Vx(i),t.textAlign=i.align||"left",a=Qx(i),o=a.x1,s=a.y1,i.angle&&(t.save(),t.translate(o,s),t.rotate(i.angle*ac),o=s=0),o+=i.dx||0,s+=(i.dy||0)+NO(i),d=fy(i),ap(t,i),gt(d))for(f=oc(i),l=0;l<d.length;++l)p=sc(i,d[l]),i.fill&&V_(t,i,r)&&t.fillText(p,o,s),i.stroke&&op(t,i,r)&&t.strokeText(p,o,s),s+=f;else p=sc(i,d),i.fill&&V_(t,i,r)&&t.fillText(p,o,s),i.stroke&&op(t,i,r)&&t.strokeText(p,o,s);i.angle&&t.restore()}})}function qit(t,e,n,i,r,a){if(e.fontSize<=0)return!1;if(!e.angle)return!0;var o=Qx(e),s=o.x1,l=o.y1,f=LO(n0,e,1),d=-e.angle*ac,p=Math.cos(d),m=Math.sin(d),_=p*r-m*a+(s-p*s+m*l),b=m*r+p*a+(l-m*s-p*l);return f.contains(_,b)}function jit(t,e){const n=LO(n0,t,2);return Od(e,n[0],n[1],n[2],n[3])||Od(e,n[0],n[1],n[4],n[5])||Od(e,n[4],n[5],n[6],n[7])||Od(e,n[2],n[3],n[6],n[7])}var Hit={type:"text",tag:"text",nested:!1,attr:Uit,bound:LO,draw:Iit,pick:Yx(qit),isect:jit},Git=MO("trail",qnt,iit),na={arc:tit,area:rit,group:yit,image:xit,line:wit,path:Ait,rect:Mit,rule:Rit,shape:Nit,symbol:Lit,text:Hit,trail:Git};function BT(t,e,n){var i=na[t.mark.marktype],r=e||i.bound;return i.nested&&(t=t.mark),r(t.bounds||(t.bounds=new Nn),t,n)}var A5={mark:null};function aU(t,e,n){var i=na[t.marktype],r=i.bound,a=t.items,o=a&&a.length,s,l,f,d;if(i.nested)return o?f=a[0]:(A5.mark=t,f=A5),d=BT(f,r,n),e=e&&e.union(d)||d,e;if(e=e||t.bounds&&t.bounds.clear()||new Nn,o)for(s=0,l=a.length;s<l;++s)e.union(BT(a[s],r,n));return t.bounds=e}const Zit=["marktype","name","role","interactive","clip","items","zindex","x","y","width","height","align","baseline","fill","fillOpacity","opacity","blend","stroke","strokeOpacity","strokeWidth","strokeCap","strokeDash","strokeDashOffset","strokeForeground","strokeOffset","startAngle","endAngle","innerRadius","outerRadius","cornerRadius","padAngle","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight","interpolate","tension","orient","defined","url","aspect","smooth","path","scaleX","scaleY","x2","y2","size","shape","text","angle","theta","radius","dir","dx","dy","ellipsis","limit","lineBreak","lineHeight","font","fontSize","fontWeight","fontStyle","fontVariant","description","aria","ariaRole","ariaRoleDescription"];function oU(t,e){return JSON.stringify(t,Zit,e)}function sU(t){const e=typeof t=="string"?JSON.parse(t):t;return uU(e)}function uU(t){var e=t.marktype,n=t.items,i,r,a;if(n)for(r=0,a=n.length;r<a;++r)i=e?"mark":"group",n[r][i]=t,n[r].zindex&&(n[r][i].zdirty=!0),(e||i)==="group"&&uU(n[r]);return e&&aU(t),t}class lU{constructor(e){arguments.length?this.root=sU(e):(this.root=T5({marktype:"group",name:"root",role:"frame"}),this.root.items=[new Gx(this.root)])}toJSON(e){return oU(this.root,e||0)}mark(e,n,i){n=n||this.root.items[0];const r=T5(e,n);return n.items[i]=r,r.zindex&&(r.group.zdirty=!0),r}}function T5(t,e){const n={bounds:new Nn,clip:!!t.clip,group:e,interactive:t.interactive!==!1,items:[],marktype:t.marktype,name:t.name||void 0,role:t.role||void 0,zindex:t.zindex||0};return t.aria!=null&&(n.aria=t.aria),t.description&&(n.description=t.description),n}function Ul(t,e,n){return!t&&typeof document<"u"&&document.createElement&&(t=document),t?n?t.createElementNS(n,e):t.createElement(e):null}function zO(t,e){e=e.toLowerCase();for(var n=t.childNodes,i=0,r=n.length;i<r;++i)if(n[i].tagName.toLowerCase()===e)return n[i]}function Pn(t,e,n,i){var r=t.childNodes[e],a;return(!r||r.tagName.toLowerCase()!==n.toLowerCase())&&(a=r||null,r=Ul(t.ownerDocument,n,i),t.insertBefore(r,a)),r}function ya(t,e){for(var n=t.childNodes,i=n.length;i>e;)t.removeChild(n[--i]);return t}function cU(t){return"mark-"+t.marktype+(t.role?" role-"+t.role:"")+(t.name?" "+t.name:"")}function Kx(t,e){const n=e.getBoundingClientRect();return[t.clientX-n.left-(e.clientLeft||0),t.clientY-n.top-(e.clientTop||0)]}function Yit(t,e,n,i){var r=t&&t.mark,a,o;if(r&&(a=na[r.marktype]).tip){for(o=Kx(e,n),o[0]-=i[0],o[1]-=i[1];t=t.mark.group;)o[0]-=t.x||0,o[1]-=t.y||0;t=a.tip(r.items,o)}return t}let FO=class{constructor(e,n){this._active=null,this._handlers={},this._loader=e||yx(),this._tooltip=n||Xit}initialize(e,n,i){return this._el=e,this._obj=i||null,this.origin(n)}element(){return this._el}canvas(){return this._el&&this._el.firstChild}origin(e){return arguments.length?(this._origin=e||[0,0],this):this._origin.slice()}scene(e){return arguments.length?(this._scene=e,this):this._scene}on(){}off(){}_handlerIndex(e,n,i){for(let r=e?e.length:0;--r>=0;)if(e[r].type===n&&(!i||e[r].handler===i))return r;return-1}handlers(e){const n=this._handlers,i=[];if(e)i.push(...n[this.eventName(e)]);else for(const r in n)i.push(...n[r]);return i}eventName(e){const n=e.indexOf(".");return n<0?e:e.slice(0,n)}handleHref(e,n,i){this._loader.sanitize(i,{context:"href"}).then(r=>{const a=new MouseEvent(e.type,e),o=Ul(null,"a");for(const s in r)o.setAttribute(s,r[s]);o.dispatchEvent(a)}).catch(()=>{})}handleTooltip(e,n,i){if(n&&n.tooltip!=null){n=Yit(n,e,this.canvas(),this._origin);const r=i&&n&&n.tooltip||null;this._tooltip.call(this._obj,this,e,n,r)}}getItemBoundingClientRect(e){const n=this.canvas();if(!n)return;const i=n.getBoundingClientRect(),r=this._origin,a=e.bounds,o=a.width(),s=a.height();let l=a.x1+r[0]+i.left,f=a.y1+r[1]+i.top;for(;e.mark&&(e=e.mark.group);)l+=e.x||0,f+=e.y||0;return{x:l,y:f,width:o,height:s,left:l,top:f,right:l+o,bottom:f+s}}};function Xit(t,e,n,i){t.element().setAttribute("title",i||"")}class dy{constructor(e){this._el=null,this._bgcolor=null,this._loader=new ZB(e)}initialize(e,n,i,r,a){return this._el=e,this.resize(n,i,r,a)}element(){return this._el}canvas(){return this._el&&this._el.firstChild}background(e){return arguments.length===0?this._bgcolor:(this._bgcolor=e,this)}resize(e,n,i,r){return this._width=e,this._height=n,this._origin=i||[0,0],this._scale=r||1,this}dirty(){}render(e,n){const i=this;return i._call=function(){i._render(e,n)},i._call(),i._call=null,i}_render(){}renderAsync(e,n){const i=this.render(e,n);return this._ready?this._ready.then(()=>i):Promise.resolve(i)}_load(e,n){var i=this,r=i._loader[e](n);if(!i._ready){const a=i._call;i._ready=i._loader.ready().then(o=>{o&&a(),i._ready=null})}return r}sanitizeURL(e){return this._load("sanitizeURL",e)}loadImage(e){return this._load("loadImage",e)}}const Wit="keydown",Vit="keypress",Qit="keyup",fU="dragenter",h_="dragleave",hU="dragover",UT="pointerdown",Kit="pointerup",J_="pointermove",d_="pointerout",dU="pointerover",IT="mousedown",Jit="mouseup",pU="mousemove",tb="mouseout",gU="mouseover",eb="click",trt="dblclick",ert="wheel",mU="mousewheel",nb="touchstart",ib="touchmove",rb="touchend",nrt=[Wit,Vit,Qit,fU,h_,hU,UT,Kit,J_,d_,dU,IT,Jit,pU,tb,gU,eb,trt,ert,mU,nb,ib,rb],qT=J_,i0=tb,jT=eb;class py extends FO{constructor(e,n){super(e,n),this._down=null,this._touch=null,this._first=!0,this._events={},this.events=nrt,this.pointermove=M5([J_,pU],[dU,gU],[d_,tb]),this.dragover=M5([hU],[fU],[h_]),this.pointerout=k5([d_,tb]),this.dragleave=k5([h_])}initialize(e,n,i){return this._canvas=e&&zO(e,"canvas"),[eb,IT,UT,J_,d_,h_].forEach(r=>C5(this,r)),super.initialize(e,n,i)}canvas(){return this._canvas}context(){return this._canvas.getContext("2d")}DOMMouseScroll(e){this.fire(mU,e)}pointerdown(e){this._down=this._active,this.fire(UT,e)}mousedown(e){this._down=this._active,this.fire(IT,e)}click(e){this._down===this._active&&(this.fire(eb,e),this._down=null)}touchstart(e){this._touch=this.pickEvent(e.changedTouches[0]),this._first&&(this._active=this._touch,this._first=!1),this.fire(nb,e,!0)}touchmove(e){this.fire(ib,e,!0)}touchend(e){this.fire(rb,e,!0),this._touch=null}fire(e,n,i){const r=i?this._touch:this._active,a=this._handlers[e];if(n.vegaType=e,e===jT&&r&&r.href?this.handleHref(n,r,r.href):(e===qT||e===i0)&&this.handleTooltip(n,r,e!==i0),a)for(let o=0,s=a.length;o<s;++o)a[o].handler.call(this._obj,n,r)}on(e,n){const i=this.eventName(e),r=this._handlers;return this._handlerIndex(r[i],e,n)<0&&(C5(this,e),(r[i]||(r[i]=[])).push({type:e,handler:n})),this}off(e,n){const i=this.eventName(e),r=this._handlers[i],a=this._handlerIndex(r,e,n);return a>=0&&r.splice(a,1),this}pickEvent(e){const n=Kx(e,this._canvas),i=this._origin;return this.pick(this._scene,n[0],n[1],n[0]-i[0],n[1]-i[1])}pick(e,n,i,r,a){const o=this.context();return na[e.marktype].pick.call(this,o,e,n,i,r,a)}}const irt=t=>t===nb||t===ib||t===rb?[nb,ib,rb]:[t];function C5(t,e){irt(e).forEach(n=>rrt(t,n))}function rrt(t,e){const n=t.canvas();n&&!t._events[e]&&(t._events[e]=1,n.addEventListener(e,t[e]?i=>t[e](i):i=>t.fire(e,i)))}function Um(t,e,n){e.forEach(i=>t.fire(i,n))}function M5(t,e,n){return function(i){const r=this._active,a=this.pickEvent(i);a===r?Um(this,t,i):((!r||!r.exit)&&Um(this,n,i),this._active=a,Um(this,e,i),Um(this,t,i))}}function k5(t){return function(e){Um(this,t,e),this._active=null}}function art(){return typeof window<"u"&&window.devicePixelRatio||1}function ort(t,e,n,i,r,a){const o=typeof HTMLElement<"u"&&t instanceof HTMLElement&&t.parentNode!=null,s=t.getContext("2d"),l=o?art():r;t.width=e*l,t.height=n*l;for(const f in a)s[f]=a[f];return o&&l!==1&&(t.style.width=e+"px",t.style.height=n+"px"),s.pixelRatio=l,s.setTransform(l,0,0,l,l*i[0],l*i[1]),t}class ab extends dy{constructor(e){super(e),this._options={},this._redraw=!1,this._dirty=new Nn,this._tempb=new Nn}initialize(e,n,i,r,a,o){return this._options=o||{},this._canvas=this._options.externalContext?null:Ql(1,1,this._options.type),e&&this._canvas&&(ya(e,0).appendChild(this._canvas),this._canvas.setAttribute("class","marks")),super.initialize(e,n,i,r,a)}resize(e,n,i,r){if(super.resize(e,n,i,r),this._canvas)ort(this._canvas,this._width,this._height,this._origin,this._scale,this._options.context);else{const a=this._options.externalContext;a||dt("CanvasRenderer is missing a valid canvas or context"),a.scale(this._scale,this._scale),a.translate(this._origin[0],this._origin[1])}return this._redraw=!0,this}canvas(){return this._canvas}context(){return this._options.externalContext||(this._canvas?this._canvas.getContext("2d"):null)}dirty(e){const n=this._tempb.clear().union(e.bounds);let i=e.mark.group;for(;i;)n.translate(i.x||0,i.y||0),i=i.mark.group;this._dirty.union(n)}_render(e,n){const i=this.context(),r=this._origin,a=this._width,o=this._height,s=this._dirty,l=srt(r,a,o);i.save();const f=this._redraw||s.empty()?(this._redraw=!1,l.expand(1)):urt(i,l.intersect(s),r);return this.clear(-r[0],-r[1],a,o),this.draw(i,e,f,n),i.restore(),s.clear(),this}draw(e,n,i,r){if(n.marktype!=="group"&&r!=null&&!r.includes(n.marktype))return;const a=na[n.marktype];n.clip&&ait(e,n),a.draw.call(this,e,n,i,r),n.clip&&e.restore()}clear(e,n,i,r){const a=this._options,o=this.context();a.type!=="pdf"&&!a.externalContext&&o.clearRect(e,n,i,r),this._bgcolor!=null&&(o.fillStyle=this._bgcolor,o.fillRect(e,n,i,r))}}const srt=(t,e,n)=>new Nn().set(0,0,e,n).translate(-t[0],-t[1]);function urt(t,e,n){return e.expand(1).round(),t.pixelRatio%1&&e.scale(t.pixelRatio).round().scale(1/t.pixelRatio),e.translate(-(n[0]%1),-(n[1]%1)),t.beginPath(),t.rect(e.x1,e.y1,e.width(),e.height()),t.clip(),e}class yU extends FO{constructor(e,n){super(e,n);const i=this;i._hrefHandler=jS(i,(r,a)=>{a&&a.href&&i.handleHref(r,a,a.href)}),i._tooltipHandler=jS(i,(r,a)=>{i.handleTooltip(r,a,r.type!==i0)})}initialize(e,n,i){let r=this._svg;return r&&(r.removeEventListener(jT,this._hrefHandler),r.removeEventListener(qT,this._tooltipHandler),r.removeEventListener(i0,this._tooltipHandler)),this._svg=r=e&&zO(e,"svg"),r&&(r.addEventListener(jT,this._hrefHandler),r.addEventListener(qT,this._tooltipHandler),r.addEventListener(i0,this._tooltipHandler)),super.initialize(e,n,i)}canvas(){return this._svg}on(e,n){const i=this.eventName(e),r=this._handlers;if(this._handlerIndex(r[i],e,n)<0){const o={type:e,handler:n,listener:jS(this,n)};(r[i]||(r[i]=[])).push(o),this._svg&&this._svg.addEventListener(i,o.listener)}return this}off(e,n){const i=this.eventName(e),r=this._handlers[i],a=this._handlerIndex(r,e,n);return a>=0&&(this._svg&&this._svg.removeEventListener(i,r[a].listener),r.splice(a,1)),this}}const jS=(t,e)=>n=>{let i=n.target.__data__;i=Array.isArray(i)?i[0]:i,n.vegaType=n.type,e.call(t._obj,n,i)},vU="aria-hidden",PO="aria-label",BO="role",UO="aria-roledescription",_U="graphics-object",IO="graphics-symbol",bU=(t,e,n)=>({[BO]:t,[UO]:e,[PO]:n||void 0}),lrt=oo(["axis-domain","axis-grid","axis-label","axis-tick","axis-title","legend-band","legend-entry","legend-gradient","legend-label","legend-title","legend-symbol","title"]),O5={axis:{desc:"axis",caption:hrt},legend:{desc:"legend",caption:drt},"title-text":{desc:"title",caption:t=>`Title text '${D5(t)}'`},"title-subtitle":{desc:"subtitle",caption:t=>`Subtitle text '${D5(t)}'`}},$5={ariaRole:BO,ariaRoleDescription:UO,description:PO};function xU(t,e){const n=e.aria===!1;if(t(vU,n||void 0),n||e.description==null)for(const i in $5)t($5[i],void 0);else{const i=e.mark.marktype;t(PO,e.description),t(BO,e.ariaRole||(i==="group"?_U:IO)),t(UO,e.ariaRoleDescription||`${i} mark`)}}function wU(t){return t.aria===!1?{[vU]:!0}:lrt[t.role]?null:O5[t.role]?frt(t,O5[t.role]):crt(t)}function crt(t){const e=t.marktype,n=e==="group"||e==="text"||t.items.some(i=>i.description!=null&&i.aria!==!1);return bU(n?_U:IO,`${e} mark container`,t.description)}function frt(t,e){try{const n=t.items[0],i=e.caption||(()=>"");return bU(e.role||IO,e.desc,n.description||i(n))}catch{return null}}function D5(t){return Nt(t.text).join(" ")}function hrt(t){const e=t.datum,n=t.orient,i=e.title?EU(t):null,r=t.context,a=r.scales[e.scale].value,o=r.dataflow.locale(),s=a.type;return`${n==="left"||n==="right"?"Y":"X"}-axis`+(i?` titled '${i}'`:"")+` for a ${ip(s)?"discrete":s} scale with ${FB(o,a,t)}`}function drt(t){const e=t.datum,n=e.title?EU(t):null,i=`${e.type||""} legend`.trim(),r=e.scales,a=Object.keys(r),o=t.context,s=o.scales[r[a[0]]].value,l=o.dataflow.locale();return grt(i)+(n?` titled '${n}'`:"")+` for ${prt(a)} with ${FB(l,s,t)}`}function EU(t){try{return Nt(be(t.items).items[0].text).join(" ")}catch{return null}}function prt(t){return t=t.map(e=>e+(e==="fill"||e==="stroke"?" color":"")),t.length<2?t[0]:t.slice(0,-1).join(", ")+" and "+be(t)}function grt(t){return t.length?t[0].toUpperCase()+t.slice(1):t}const SU=t=>(t+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),mrt=t=>SU(t).replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;");function qO(){let t="",e="",n="";const i=[],r=()=>e=n="",a=l=>{e&&(t+=`${e}>${n}`,r()),i.push(l)},o=(l,f)=>(f!=null&&(e+=` ${l}="${mrt(f)}"`),s),s={open(l){a(l),e="<"+l;for(var f=arguments.length,d=new Array(f>1?f-1:0),p=1;p<f;p++)d[p-1]=arguments[p];for(const m of d)for(const _ in m)o(_,m[_]);return s},close(){const l=i.pop();return e?t+=e+(n?`>${n}</${l}>`:"/>"):t+=`</${l}>`,r(),s},attr:o,text:l=>(n+=SU(l),s),toString:()=>t};return s}const AU=t=>TU(qO(),t)+"";function TU(t,e){if(t.open(e.tagName),e.hasAttributes()){const n=e.attributes,i=n.length;for(let r=0;r<i;++r)t.attr(n[r].name,n[r].value)}if(e.hasChildNodes()){const n=e.childNodes;for(const i of n)i.nodeType===3?t.text(i.nodeValue):TU(t,i)}return t.close()}const ob={fill:"fill",fillOpacity:"fill-opacity",stroke:"stroke",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",strokeCap:"stroke-linecap",strokeJoin:"stroke-linejoin",strokeDash:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeMiterLimit:"stroke-miterlimit",opacity:"opacity"},sb={blend:"mix-blend-mode"},CU={fill:"none","stroke-miterlimit":10},mm=0,R5="http://www.w3.org/2000/xmlns/",Fn=C0.xmlns;class jO extends dy{constructor(e){super(e),this._dirtyID=0,this._dirty=[],this._svg=null,this._root=null,this._defs=null}initialize(e,n,i,r,a){return this._defs={},this._clearDefs(),e&&(this._svg=Pn(e,0,"svg",Fn),this._svg.setAttributeNS(R5,"xmlns",Fn),this._svg.setAttributeNS(R5,"xmlns:xlink",C0["xmlns:xlink"]),this._svg.setAttribute("version",C0.version),this._svg.setAttribute("class","marks"),ya(e,1),this._root=Pn(this._svg,mm,"g",Fn),Il(this._root,CU),ya(this._svg,mm+1)),this.background(this._bgcolor),super.initialize(e,n,i,r,a)}background(e){return arguments.length&&this._svg&&this._svg.style.setProperty("background-color",e),super.background(...arguments)}resize(e,n,i,r){return super.resize(e,n,i,r),this._svg&&(Il(this._svg,{width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}),this._root.setAttribute("transform",`translate(${this._origin})`)),this._dirty=[],this}canvas(){return this._svg}svg(){const e=this._svg,n=this._bgcolor;if(!e)return null;let i;n&&(e.removeAttribute("style"),i=Pn(e,mm,"rect",Fn),Il(i,{width:this._width,height:this._height,fill:n}));const r=AU(e);return n&&(e.removeChild(i),this._svg.style.setProperty("background-color",n)),r}_render(e,n){return this._dirtyCheck()&&(this._dirtyAll&&this._clearDefs(),this.mark(this._root,e,void 0,n),ya(this._root,1)),this.defs(),this._dirty=[],++this._dirtyID,this}dirty(e){e.dirty!==this._dirtyID&&(e.dirty=this._dirtyID,this._dirty.push(e))}isDirty(e){return this._dirtyAll||!e._svg||!e._svg.ownerSVGElement||e.dirty===this._dirtyID}_dirtyCheck(){this._dirtyAll=!0;const e=this._dirty;if(!e.length||!this._dirtyID)return!0;const n=++this._dirtyID;let i,r,a,o,s,l,f;for(s=0,l=e.length;s<l;++s)if(i=e[s],r=i.mark,r.marktype!==a&&(a=r.marktype,o=na[a]),r.zdirty&&r.dirty!==n&&(this._dirtyAll=!1,N5(i,n),r.items.forEach(d=>{d.dirty=n})),!r.zdirty){if(i.exit){o.nested&&r.items.length?(f=r.items[0],f._svg&&this._update(o,f._svg,f)):i._svg&&(f=i._svg.parentNode,f&&f.removeChild(i._svg)),i._svg=null;continue}i=o.nested?r.items[0]:i,i._update!==n&&(!i._svg||!i._svg.ownerSVGElement?(this._dirtyAll=!1,N5(i,n)):this._update(o,i._svg,i),i._update=n)}return!this._dirtyAll}mark(e,n,i,r){if(!this.isDirty(n))return n._svg;const a=this._svg,o=n.marktype,s=na[o],l=n.interactive===!1?"none":null,f=s.tag==="g",d=L5(n,e,i,"g",a);if(o!=="group"&&r!=null&&!r.includes(o))return ya(d,0),n._svg;d.setAttribute("class",cU(n));const p=wU(n);for(const x in p)Vi(d,x,p[x]);f||Vi(d,"pointer-events",l),Vi(d,"clip-path",n.clip?bO(this,n,n.group):null);let m=null,_=0;const b=x=>{const S=this.isDirty(x),T=L5(x,d,m,s.tag,a);S&&(this._update(s,T,x),f&&_rt(this,T,x,r)),m=T,++_};return s.nested?n.items.length&&b(n.items[0]):uo(n,b),ya(d,_),d}_update(e,n,i){fu=n,$i=n.__values__,xU(r0,i),e.attr(r0,i,this);const r=xrt[e.type];r&&r.call(this,e,n,i),fu&&this.style(fu,i)}style(e,n){if(n!=null){for(const i in ob){let r=i==="font"?hy(n):n[i];if(r===$i[i])continue;const a=ob[i];r==null?e.removeAttribute(a):(yO(r)&&(r=BB(r,this._defs.gradient,MU())),e.setAttribute(a,r+"")),$i[i]=r}for(const i in sb)p_(e,sb[i],n[i])}}defs(){const e=this._svg,n=this._defs;let i=n.el,r=0;for(const a in n.gradient)i||(n.el=i=Pn(e,mm+1,"defs",Fn)),r=yrt(i,n.gradient[a],r);for(const a in n.clipping)i||(n.el=i=Pn(e,mm+1,"defs",Fn)),r=vrt(i,n.clipping[a],r);i&&(r===0?(e.removeChild(i),n.el=null):ya(i,r))}_clearDefs(){const e=this._defs;e.gradient={},e.clipping={}}}function N5(t,e){for(;t&&t.dirty!==e;t=t.mark.group)if(t.dirty=e,t.mark&&t.mark.dirty!==e)t.mark.dirty=e;else return}function yrt(t,e,n){let i,r,a;if(e.gradient==="radial"){let o=Pn(t,n++,"pattern",Fn);Il(o,{id:W_+e.id,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),o=Pn(o,0,"rect",Fn),Il(o,{width:1,height:1,fill:`url(${MU()}#${e.id})`}),t=Pn(t,n++,"radialGradient",Fn),Il(t,{id:e.id,fx:e.x1,fy:e.y1,fr:e.r1,cx:e.x2,cy:e.y2,r:e.r2})}else t=Pn(t,n++,"linearGradient",Fn),Il(t,{id:e.id,x1:e.x1,x2:e.x2,y1:e.y1,y2:e.y2});for(i=0,r=e.stops.length;i<r;++i)a=Pn(t,i,"stop",Fn),a.setAttribute("offset",e.stops[i].offset),a.setAttribute("stop-color",e.stops[i].color);return ya(t,i),n}function vrt(t,e,n){let i;return t=Pn(t,n,"clipPath",Fn),t.setAttribute("id",e.id),e.path?(i=Pn(t,0,"path",Fn),i.setAttribute("d",e.path)):(i=Pn(t,0,"rect",Fn),Il(i,{x:0,y:0,width:e.width,height:e.height})),ya(t,1),n+1}function _rt(t,e,n,i){e=e.lastChild.previousSibling;let r,a=0;uo(n,o=>{r=t.mark(e,o,r,i),++a}),ya(e,1+a)}function L5(t,e,n,i,r){let a=t._svg,o;if(!a&&(o=e.ownerDocument,a=Ul(o,i,Fn),t._svg=a,t.mark&&(a.__data__=t,a.__values__={fill:"default"},i==="g"))){const s=Ul(o,"path",Fn);a.appendChild(s),s.__data__=t;const l=Ul(o,"g",Fn);a.appendChild(l),l.__data__=t;const f=Ul(o,"path",Fn);a.appendChild(f),f.__data__=t,f.__values__={fill:"default"}}return(a.ownerSVGElement!==r||brt(a,n))&&e.insertBefore(a,n?n.nextSibling:e.firstChild),a}function brt(t,e){return t.parentNode&&t.parentNode.childNodes.length>1&&t.previousSibling!=e}let fu=null,$i=null;const xrt={group(t,e,n){const i=fu=e.childNodes[2];$i=i.__values__,t.foreground(r0,n,this),$i=e.__values__,fu=e.childNodes[1],t.content(r0,n,this);const r=fu=e.childNodes[0];t.background(r0,n,this);const a=n.mark.interactive===!1?"none":null;if(a!==$i.events&&(Vi(i,"pointer-events",a),Vi(r,"pointer-events",a),$i.events=a),n.strokeForeground&&n.stroke){const o=n.fill;Vi(i,"display",null),this.style(r,n),Vi(r,"stroke",null),o&&(n.fill=null),$i=i.__values__,this.style(i,n),o&&(n.fill=o),fu=null}else Vi(i,"display","none")},image(t,e,n){n.smooth===!1?(p_(e,"image-rendering","optimizeSpeed"),p_(e,"image-rendering","pixelated")):p_(e,"image-rendering",null)},text(t,e,n){const i=fy(n);let r,a,o,s;gt(i)?(a=i.map(l=>sc(n,l)),r=a.join(`
`),r!==$i.text&&(ya(e,0),o=e.ownerDocument,s=oc(n),a.forEach((l,f)=>{const d=Ul(o,"tspan",Fn);d.__data__=n,d.textContent=l,f&&(d.setAttribute("x",0),d.setAttribute("dy",s)),e.appendChild(d)}),$i.text=r)):(a=sc(n,i),a!==$i.text&&(e.textContent=a,$i.text=a)),Vi(e,"font-family",hy(n)),Vi(e,"font-size",hs(n)+"px"),Vi(e,"font-style",n.fontStyle),Vi(e,"font-variant",n.fontVariant),Vi(e,"font-weight",n.fontWeight)}};function r0(t,e,n){e!==$i[t]&&(n?wrt(fu,t,e,n):Vi(fu,t,e),$i[t]=e)}function p_(t,e,n){n!==$i[e]&&(n==null?t.style.removeProperty(e):t.style.setProperty(e,n+""),$i[e]=n)}function Il(t,e){for(const n in e)Vi(t,n,e[n])}function Vi(t,e,n){n!=null?t.setAttribute(e,n):t.removeAttribute(e)}function wrt(t,e,n,i){n!=null?t.setAttributeNS(i,e,n):t.removeAttributeNS(i,e)}function MU(){let t;return typeof window>"u"?"":(t=window.location).hash?t.href.slice(0,-t.hash.length):t.href}class kU extends dy{constructor(e){super(e),this._text=null,this._defs={gradient:{},clipping:{}}}svg(){return this._text}_render(e){const n=qO();n.open("svg",oe({},C0,{class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}));const i=this._bgcolor;return i&&i!=="transparent"&&i!=="none"&&n.open("rect",{width:this._width,height:this._height,fill:i}).close(),n.open("g",CU,{transform:"translate("+this._origin+")"}),this.mark(n,e),n.close(),this.defs(n),this._text=n.close()+"",this}mark(e,n){const i=na[n.marktype],r=i.tag,a=[xU,i.attr];e.open("g",{class:cU(n),"clip-path":n.clip?bO(this,n,n.group):null},wU(n),{"pointer-events":r!=="g"&&n.interactive===!1?"none":null});const o=s=>{const l=this.href(s);if(l&&e.open("a",l),e.open(r,this.attr(n,s,a,r!=="g"?r:null)),r==="text"){const f=fy(s);if(gt(f)){const d={x:0,dy:oc(s)};for(let p=0;p<f.length;++p)e.open("tspan",p?d:null).text(sc(s,f[p])).close()}else e.text(sc(s,f))}else if(r==="g"){const f=s.strokeForeground,d=s.fill,p=s.stroke;f&&p&&(s.stroke=null),e.open("path",this.attr(n,s,i.background,"bgrect")).close(),e.open("g",this.attr(n,s,i.content)),uo(s,m=>this.mark(e,m)),e.close(),f&&p?(d&&(s.fill=null),s.stroke=p,e.open("path",this.attr(n,s,i.foreground,"bgrect")).close(),d&&(s.fill=d)):e.open("path",this.attr(n,s,i.foreground,"bgfore")).close()}e.close(),l&&e.close()};return i.nested?n.items&&n.items.length&&o(n.items[0]):uo(n,o),e.close()}href(e){const n=e.href;let i;if(n){if(i=this._hrefs&&this._hrefs[n])return i;this.sanitizeURL(n).then(r=>{r["xlink:href"]=r.href,r.href=null,(this._hrefs||(this._hrefs={}))[n]=r})}return null}attr(e,n,i,r){const a={},o=(s,l,f,d)=>{a[d||s]=l};return Array.isArray(i)?i.forEach(s=>s(o,n,this)):i(o,n,this),r&&Ert(a,n,e,r,this._defs),a}defs(e){const n=this._defs.gradient,i=this._defs.clipping;if(Object.keys(n).length+Object.keys(i).length!==0){e.open("defs");for(const a in n){const o=n[a],s=o.stops;o.gradient==="radial"?(e.open("pattern",{id:W_+a,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),e.open("rect",{width:"1",height:"1",fill:"url(#"+a+")"}).close(),e.close(),e.open("radialGradient",{id:a,fx:o.x1,fy:o.y1,fr:o.r1,cx:o.x2,cy:o.y2,r:o.r2})):e.open("linearGradient",{id:a,x1:o.x1,x2:o.x2,y1:o.y1,y2:o.y2});for(let l=0;l<s.length;++l)e.open("stop",{offset:s[l].offset,"stop-color":s[l].color}).close();e.close()}for(const a in i){const o=i[a];e.open("clipPath",{id:a}),o.path?e.open("path",{d:o.path}).close():e.open("rect",{x:0,y:0,width:o.width,height:o.height}).close(),e.close()}e.close()}}}function Ert(t,e,n,i,r){let a;if(e==null||(i==="bgrect"&&n.interactive===!1&&(t["pointer-events"]="none"),i==="bgfore"&&(n.interactive===!1&&(t["pointer-events"]="none"),t.display="none",e.fill!==null)))return t;i==="image"&&e.smooth===!1&&(a=["image-rendering: optimizeSpeed;","image-rendering: pixelated;"]),i==="text"&&(t["font-family"]=hy(e),t["font-size"]=hs(e)+"px",t["font-style"]=e.fontStyle,t["font-variant"]=e.fontVariant,t["font-weight"]=e.fontWeight);for(const o in ob){let s=e[o];const l=ob[o];s==="transparent"&&(l==="fill"||l==="stroke")||s!=null&&(yO(s)&&(s=BB(s,r.gradient,"")),t[l]=s)}for(const o in sb){const s=e[o];s!=null&&(a=a||[],a.push(`${sb[o]}: ${s};`))}return a&&(t.style=a.join(" ")),t}const Xa={svgMarkTypes:["text"],svgOnTop:!0,debug:!1};function Srt(t){Xa.svgMarkTypes=t.svgMarkTypes??["text"],Xa.svgOnTop=t.svgOnTop??!0,Xa.debug=t.debug??!1}class HT extends dy{constructor(e){super(e),this._svgRenderer=new jO(e),this._canvasRenderer=new ab(e)}initialize(e,n,i,r,a){this._root_el=Pn(e,0,"div");const o=Pn(this._root_el,0,"div"),s=Pn(this._root_el,1,"div");return this._root_el.style.position="relative",Xa.debug||(o.style.height="100%",s.style.position="absolute",s.style.top="0",s.style.left="0",s.style.height="100%",s.style.width="100%"),this._svgEl=Xa.svgOnTop?s:o,this._canvasEl=Xa.svgOnTop?o:s,this._svgEl.style.pointerEvents="none",this._canvasRenderer.initialize(this._canvasEl,n,i,r,a),this._svgRenderer.initialize(this._svgEl,n,i,r,a),super.initialize(e,n,i,r,a)}dirty(e){return Xa.svgMarkTypes.includes(e.mark.marktype)?this._svgRenderer.dirty(e):this._canvasRenderer.dirty(e),this}_render(e,n){const r=(n??["arc","area","image","line","path","rect","rule","shape","symbol","text","trail"]).filter(a=>!Xa.svgMarkTypes.includes(a));this._svgRenderer.render(e,Xa.svgMarkTypes),this._canvasRenderer.render(e,r)}resize(e,n,i,r){return super.resize(e,n,i,r),this._svgRenderer.resize(e,n,i,r),this._canvasRenderer.resize(e,n,i,r),this}background(e){return Xa.svgOnTop?this._canvasRenderer.background(e):this._svgRenderer.background(e),this}}class OU extends py{constructor(e,n){super(e,n)}initialize(e,n,i){const r=Pn(Pn(e,0,"div"),Xa.svgOnTop?0:1,"div");return super.initialize(r,n,i)}}const $U="canvas",DU="hybrid",RU="png",NU="svg",LU="none",ql={Canvas:$U,PNG:RU,SVG:NU,Hybrid:DU,None:LU},jf={};jf[$U]=jf[RU]={renderer:ab,headless:ab,handler:py};jf[NU]={renderer:jO,headless:kU,handler:yU};jf[DU]={renderer:HT,headless:HT,handler:OU};jf[LU]={};function Jx(t,e){return t=String(t||"").toLowerCase(),arguments.length>1?(jf[t]=e,this):jf[t]}function zU(t,e,n){const i=[],r=new Nn().union(e),a=t.marktype;return a?FU(t,r,n,i):a==="group"?PU(t,r,n,i):dt("Intersect scene must be mark node or group item.")}function FU(t,e,n,i){if(Art(t,e,n)){const r=t.items,a=t.marktype,o=r.length;let s=0;if(a==="group")for(;s<o;++s)PU(r[s],e,n,i);else for(const l=na[a].isect;s<o;++s){const f=r[s];BU(f,e,l)&&i.push(f)}}return i}function Art(t,e,n){return t.bounds&&e.intersects(t.bounds)&&(t.marktype==="group"||t.interactive!==!1&&(!n||n(t)))}function PU(t,e,n,i){n&&n(t.mark)&&BU(t,e,na.group.isect)&&i.push(t);const r=t.items,a=r&&r.length;if(a){const o=t.x||0,s=t.y||0;e.translate(-o,-s);for(let l=0;l<a;++l)FU(r[l],e,n,i);e.translate(o,s)}return i}function BU(t,e,n){const i=t.bounds;return e.encloses(i)||e.intersects(i)&&n(t,e)}const HS=new Nn;function UU(t){const e=t.clip;if(se(e))e(ly(HS.clear()));else if(e)HS.set(0,0,t.group.width,t.group.height);else return;t.bounds.intersect(HS)}const Trt=1e-9;function HO(t,e,n){return t===e?!0:n==="path"?IU(t,e):t instanceof Date&&e instanceof Date?+t==+e:Me(t)&&Me(e)?Math.abs(t-e)<=Trt:!t||!e||!Rt(t)&&!Rt(e)?t==e:Crt(t,e)}function IU(t,e){return HO(rp(t),rp(e))}function Crt(t,e){var n=Object.keys(t),i=Object.keys(e),r,a;if(n.length!==i.length)return!1;for(n.sort(),i.sort(),a=n.length-1;a>=0;a--)if(n[a]!=i[a])return!1;for(a=n.length-1;a>=0;a--)if(r=n[a],!HO(t[r],e[r],r))return!1;return typeof t==typeof e}function Mrt(){jnt(),Qet()}const sp="top",Ja="left",to="right",uc="bottom",krt="top-left",Ort="top-right",$rt="bottom-left",Drt="bottom-right",GO="start",GT="middle",Qi="end",Rrt="x",Nrt="y",t2="group",ZO="axis",YO="title",Lrt="frame",zrt="scope",XO="legend",qU="row-header",jU="row-footer",HU="row-title",GU="column-header",ZU="column-footer",YU="column-title",Frt="padding",Prt="symbol",XU="fit",WU="fit-x",VU="fit-y",Brt="pad",WO="none",Av="all",ZT="each",VO="flush",jl="column",Hl="row";function QU(t){ct.call(this,null,t)}kt(QU,ct,{transform(t,e){const n=e.dataflow,i=t.mark,r=i.marktype,a=na[r],o=a.bound;let s=i.bounds,l;if(a.nested)i.items.length&&n.dirty(i.items[0]),s=Tv(i,o),i.items.forEach(f=>{f.bounds.clear().union(s)});else if(r===t2||t.modified())switch(e.visit(e.MOD,f=>n.dirty(f)),s.clear(),i.items.forEach(f=>s.union(Tv(f,o))),i.role){case ZO:case XO:case YO:e.reflow()}else l=e.changed(e.REM),e.visit(e.ADD,f=>{s.union(Tv(f,o))}),e.visit(e.MOD,f=>{l=l||s.alignsWith(f.bounds),n.dirty(f),s.union(Tv(f,o))}),l&&(s.clear(),i.items.forEach(f=>s.union(f.bounds)));return UU(i),e.modifies("bounds")}});function Tv(t,e,n){return e(t.bounds.clear(),t,n)}const z5=":vega_identifier:";function QO(t){ct.call(this,0,t)}QO.Definition={type:"Identifier",metadata:{modifies:!0},params:[{name:"as",type:"string",required:!0}]};kt(QO,ct,{transform(t,e){const n=Urt(e.dataflow),i=t.as;let r=n.value;return e.visit(e.ADD,a=>a[i]=a[i]||++r),n.set(this.value=r),e}});function Urt(t){return t._signals[z5]||(t._signals[z5]=t.add(0))}function KU(t){ct.call(this,null,t)}kt(KU,ct,{transform(t,e){let n=this.value;n||(n=e.dataflow.scenegraph().mark(t.markdef,Irt(t),t.index),n.group.context=t.context,t.context.group||(t.context.group=n.group),n.source=this.source,n.clip=t.clip,n.interactive=t.interactive,this.value=n);const i=n.marktype===t2?Gx:Hx;return e.visit(e.ADD,r=>i.call(r,n)),(t.modified("clip")||t.modified("interactive"))&&(n.clip=t.clip,n.interactive=!!t.interactive,n.zdirty=!0,e.reflow()),n.items=e.source,e}});function Irt(t){const e=t.groups,n=t.parent;return e&&e.size===1?e.get(Object.keys(e.object)[0]):e&&n?e.lookup(n):null}function JU(t){ct.call(this,null,t)}const F5={parity:t=>t.filter((e,n)=>n%2?e.opacity=0:1),greedy:(t,e)=>{let n;return t.filter((i,r)=>!r||!tI(n.bounds,i.bounds,e)?(n=i,1):i.opacity=0)}},tI=(t,e,n)=>n>Math.max(e.x1-t.x2,t.x1-e.x2,e.y1-t.y2,t.y1-e.y2),P5=(t,e)=>{for(var n=1,i=t.length,r=t[0].bounds,a;n<i;r=a,++n)if(tI(r,a=t[n].bounds,e))return!0},qrt=t=>{const e=t.bounds;return e.width()>1&&e.height()>1},jrt=(t,e,n)=>{var i=t.range(),r=new Nn;return e===sp||e===uc?r.set(i[0],-1/0,i[1],1/0):r.set(-1/0,i[0],1/0,i[1]),r.expand(n||1),a=>r.encloses(a.bounds)},B5=t=>(t.forEach(e=>e.opacity=1),t),U5=(t,e)=>t.reflow(e.modified()).modifies("opacity");kt(JU,ct,{transform(t,e){const n=F5[t.method]||F5.parity,i=t.separation||0;let r=e.materialize(e.SOURCE).source,a,o;if(!r||!r.length)return;if(!t.method)return t.modified("method")&&(B5(r),e=U5(e,t)),e;if(r=r.filter(qrt),!r.length)return;if(t.sort&&(r=r.slice().sort(t.sort)),a=B5(r),e=U5(e,t),a.length>=3&&P5(a,i)){do a=n(a,i);while(a.length>=3&&P5(a,i));a.length<3&&!be(r).opacity&&(a.length>1&&(be(a).opacity=0),be(r).opacity=1)}t.boundScale&&t.boundTolerance>=0&&(o=jrt(t.boundScale,t.boundOrient,+t.boundTolerance),r.forEach(l=>{o(l)||(l.opacity=0)}));const s=a[0].mark.bounds.clear();return r.forEach(l=>{l.opacity&&s.union(l.bounds)}),e}});function eI(t){ct.call(this,null,t)}kt(eI,ct,{transform(t,e){const n=e.dataflow;if(e.visit(e.ALL,i=>n.dirty(i)),e.fields&&e.fields.zindex){const i=e.source&&e.source[0];i&&(i.mark.zdirty=!0)}}});const Oi=new Nn;function $d(t,e,n){return t[e]===n?0:(t[e]=n,1)}function Hrt(t){var e=t.items[0].orient;return e===Ja||e===to}function Grt(t){let e=+t.grid;return[t.ticks?e++:-1,t.labels?e++:-1,e+ +t.domain]}function Zrt(t,e,n,i){var r=e.items[0],a=r.datum,o=r.translate!=null?r.translate:.5,s=r.orient,l=Grt(a),f=r.range,d=r.offset,p=r.position,m=r.minExtent,_=r.maxExtent,b=a.title&&r.items[l[2]].items[0],x=r.titlePadding,S=r.bounds,T=b&&RO(b),M=0,k=0,$,D;switch(Oi.clear().union(S),S.clear(),($=l[0])>-1&&S.union(r.items[$].bounds),($=l[1])>-1&&S.union(r.items[$].bounds),s){case sp:M=p||0,k=-d,D=Math.max(m,Math.min(_,-S.y1)),S.add(0,-D).add(f,0),b&&Cv(t,b,D,x,T,0,-1,S);break;case Ja:M=-d,k=p||0,D=Math.max(m,Math.min(_,-S.x1)),S.add(-D,0).add(0,f),b&&Cv(t,b,D,x,T,1,-1,S);break;case to:M=n+d,k=p||0,D=Math.max(m,Math.min(_,S.x2)),S.add(0,0).add(D,f),b&&Cv(t,b,D,x,T,1,1,S);break;case uc:M=p||0,k=i+d,D=Math.max(m,Math.min(_,S.y2)),S.add(0,0).add(f,D),b&&Cv(t,b,D,x,0,0,1,S);break;default:M=r.x,k=r.y}return Cu(S.translate(M,k),r),$d(r,"x",M+o)|$d(r,"y",k+o)&&(r.bounds=Oi,t.dirty(r),r.bounds=S,t.dirty(r)),r.mark.bounds.clear().union(S)}function Cv(t,e,n,i,r,a,o,s){const l=e.bounds;if(e.auto){const f=o*(n+r+i);let d=0,p=0;t.dirty(e),a?d=(e.x||0)-(e.x=f):p=(e.y||0)-(e.y=f),e.mark.bounds.clear().union(l.translate(-d,-p)),t.dirty(e)}s.union(l)}const I5=(t,e)=>Math.floor(Math.min(t,e)),q5=(t,e)=>Math.ceil(Math.max(t,e));function Yrt(t){var e=t.items,n=e.length,i=0,r,a;const o={marks:[],rowheaders:[],rowfooters:[],colheaders:[],colfooters:[],rowtitle:null,coltitle:null};for(;i<n;++i)if(r=e[i],a=r.items,r.marktype===t2)switch(r.role){case ZO:case XO:case YO:break;case qU:o.rowheaders.push(...a);break;case jU:o.rowfooters.push(...a);break;case GU:o.colheaders.push(...a);break;case ZU:o.colfooters.push(...a);break;case HU:o.rowtitle=a[0];break;case YU:o.coltitle=a[0];break;default:o.marks.push(...a)}return o}function Xrt(t){return new Nn().set(0,0,t.width||0,t.height||0)}function Wrt(t){const e=t.bounds.clone();return e.empty()?e.set(0,0,0,0):e.translate(-(t.x||0),-(t.y||0))}function on(t,e,n){const i=Rt(t)?t[e]:t;return i??(n!==void 0?n:0)}function j5(t){return t<0?Math.ceil(-t):0}function nI(t,e,n){var i=!n.nodirty,r=n.bounds===VO?Xrt:Wrt,a=Oi.set(0,0,0,0),o=on(n.align,jl),s=on(n.align,Hl),l=on(n.padding,jl),f=on(n.padding,Hl),d=n.columns||e.length,p=d<=0?1:Math.ceil(e.length/d),m=e.length,_=Array(m),b=Array(d),x=0,S=Array(m),T=Array(p),M=0,k=Array(m),$=Array(m),D=Array(m),F,N,I,q,Y,H,et,nt,W,j,U;for(N=0;N<d;++N)b[N]=0;for(N=0;N<p;++N)T[N]=0;for(N=0;N<m;++N)H=e[N],Y=D[N]=r(H),H.x=H.x||0,k[N]=0,H.y=H.y||0,$[N]=0,I=N%d,q=~~(N/d),x=Math.max(x,et=Math.ceil(Y.x2)),M=Math.max(M,nt=Math.ceil(Y.y2)),b[I]=Math.max(b[I],et),T[q]=Math.max(T[q],nt),_[N]=l+j5(Y.x1),S[N]=f+j5(Y.y1),i&&t.dirty(e[N]);for(N=0;N<m;++N)N%d===0&&(_[N]=0),N<d&&(S[N]=0);if(o===ZT)for(I=1;I<d;++I){for(U=0,N=I;N<m;N+=d)U<_[N]&&(U=_[N]);for(N=I;N<m;N+=d)_[N]=U+b[I-1]}else if(o===Av){for(U=0,N=0;N<m;++N)N%d&&U<_[N]&&(U=_[N]);for(N=0;N<m;++N)N%d&&(_[N]=U+x)}else for(o=!1,I=1;I<d;++I)for(N=I;N<m;N+=d)_[N]+=b[I-1];if(s===ZT)for(q=1;q<p;++q){for(U=0,N=q*d,F=N+d;N<F;++N)U<S[N]&&(U=S[N]);for(N=q*d;N<F;++N)S[N]=U+T[q-1]}else if(s===Av){for(U=0,N=d;N<m;++N)U<S[N]&&(U=S[N]);for(N=d;N<m;++N)S[N]=U+M}else for(s=!1,q=1;q<p;++q)for(N=q*d,F=N+d;N<F;++N)S[N]+=T[q-1];for(W=0,N=0;N<m;++N)W=_[N]+(N%d?W:0),k[N]+=W-e[N].x;for(I=0;I<d;++I)for(j=0,N=I;N<m;N+=d)j+=S[N],$[N]+=j-e[N].y;if(o&&on(n.center,jl)&&p>1)for(N=0;N<m;++N)Y=o===Av?x:b[N%d],W=Y-D[N].x2-e[N].x-k[N],W>0&&(k[N]+=W/2);if(s&&on(n.center,Hl)&&d!==1)for(N=0;N<m;++N)Y=s===Av?M:T[~~(N/d)],j=Y-D[N].y2-e[N].y-$[N],j>0&&($[N]+=j/2);for(N=0;N<m;++N)a.union(D[N].translate(k[N],$[N]));switch(W=on(n.anchor,Rrt),j=on(n.anchor,Nrt),on(n.anchor,jl)){case Qi:W-=a.width();break;case GT:W-=a.width()/2}switch(on(n.anchor,Hl)){case Qi:j-=a.height();break;case GT:j-=a.height()/2}for(W=Math.round(W),j=Math.round(j),a.clear(),N=0;N<m;++N)e[N].mark.bounds.clear();for(N=0;N<m;++N)H=e[N],H.x+=k[N]+=W,H.y+=$[N]+=j,a.union(H.mark.bounds.union(H.bounds.translate(k[N],$[N]))),i&&t.dirty(H);return a}function Vrt(t,e,n){var i=Yrt(e),r=i.marks,a=n.bounds===VO?Qrt:Krt,o=n.offset,s=n.columns||r.length,l=s<=0?1:Math.ceil(r.length/s),f=l*s,d,p,m,_,b,x,S;const T=nI(t,r,n);T.empty()&&T.set(0,0,0,0),i.rowheaders&&(x=on(n.headerBand,Hl,null),d=Mv(t,i.rowheaders,r,s,l,-on(o,"rowHeader"),I5,0,a,"x1",0,s,1,x)),i.colheaders&&(x=on(n.headerBand,jl,null),p=Mv(t,i.colheaders,r,s,s,-on(o,"columnHeader"),I5,1,a,"y1",0,1,s,x)),i.rowfooters&&(x=on(n.footerBand,Hl,null),m=Mv(t,i.rowfooters,r,s,l,on(o,"rowFooter"),q5,0,a,"x2",s-1,s,1,x)),i.colfooters&&(x=on(n.footerBand,jl,null),_=Mv(t,i.colfooters,r,s,s,on(o,"columnFooter"),q5,1,a,"y2",f-s,1,s,x)),i.rowtitle&&(b=on(n.titleAnchor,Hl),S=on(o,"rowTitle"),S=b===Qi?m+S:d-S,x=on(n.titleBand,Hl,.5),H5(t,i.rowtitle,S,0,T,x)),i.coltitle&&(b=on(n.titleAnchor,jl),S=on(o,"columnTitle"),S=b===Qi?_+S:p-S,x=on(n.titleBand,jl,.5),H5(t,i.coltitle,S,1,T,x))}function Qrt(t,e){return e==="x1"?t.x||0:e==="y1"?t.y||0:e==="x2"?(t.x||0)+(t.width||0):e==="y2"?(t.y||0)+(t.height||0):void 0}function Krt(t,e){return t.bounds[e]}function Mv(t,e,n,i,r,a,o,s,l,f,d,p,m,_){var b=n.length,x=0,S=0,T,M,k,$,D,F,N,I,q;if(!b)return x;for(T=d;T<b;T+=p)n[T]&&(x=o(x,l(n[T],f)));if(!e.length)return x;for(e.length>r&&(t.warn("Grid headers exceed limit: "+r),e=e.slice(0,r)),x+=a,M=0,$=e.length;M<$;++M)t.dirty(e[M]),e[M].mark.bounds.clear();for(T=d,M=0,$=e.length;M<$;++M,T+=p){for(F=e[M],D=F.mark.bounds,k=T;k>=0&&(N=n[k])==null;k-=m);s?(I=_==null?N.x:Math.round(N.bounds.x1+_*N.bounds.width()),q=x):(I=x,q=_==null?N.y:Math.round(N.bounds.y1+_*N.bounds.height())),D.union(F.bounds.translate(I-(F.x||0),q-(F.y||0))),F.x=I,F.y=q,t.dirty(F),S=o(S,D[f])}return S}function H5(t,e,n,i,r,a){if(e){t.dirty(e);var o=n,s=n;i?o=Math.round(r.x1+a*r.width()):s=Math.round(r.y1+a*r.height()),e.bounds.translate(o-(e.x||0),s-(e.y||0)),e.mark.bounds.clear().union(e.bounds),e.x=o,e.y=s,t.dirty(e)}}function Jrt(t,e){const n=t[e]||{};return(i,r)=>n[i]!=null?n[i]:t[i]!=null?t[i]:r}function tat(t,e){let n=-1/0;return t.forEach(i=>{i.offset!=null&&(n=Math.max(n,i.offset))}),n>-1/0?n:e}function eat(t,e,n,i,r,a,o){const s=Jrt(n,e),l=tat(t,s("offset",0)),f=s("anchor",GO),d=f===Qi?1:f===GT?.5:0,p={align:ZT,bounds:s("bounds",VO),columns:s("direction")==="vertical"?1:t.length,padding:s("margin",8),center:s("center"),nodirty:!0};switch(e){case Ja:p.anchor={x:Math.floor(i.x1)-l,column:Qi,y:d*(o||i.height()+2*i.y1),row:f};break;case to:p.anchor={x:Math.ceil(i.x2)+l,y:d*(o||i.height()+2*i.y1),row:f};break;case sp:p.anchor={y:Math.floor(r.y1)-l,row:Qi,x:d*(a||r.width()+2*r.x1),column:f};break;case uc:p.anchor={y:Math.ceil(r.y2)+l,x:d*(a||r.width()+2*r.x1),column:f};break;case krt:p.anchor={x:l,y:l};break;case Ort:p.anchor={x:a-l,y:l,column:Qi};break;case $rt:p.anchor={x:l,y:o-l,row:Qi};break;case Drt:p.anchor={x:a-l,y:o-l,column:Qi,row:Qi};break}return p}function nat(t,e){var n=e.items[0],i=n.datum,r=n.orient,a=n.bounds,o=n.x,s=n.y,l,f;return n._bounds?n._bounds.clear().union(a):n._bounds=a.clone(),a.clear(),rat(t,n,n.items[0].items[0]),a=iat(n,a),l=2*n.padding,f=2*n.padding,a.empty()||(l=Math.ceil(a.width()+l),f=Math.ceil(a.height()+f)),i.type===Prt&&aat(n.items[0].items[0].items[0].items),r!==WO&&(n.x=o=0,n.y=s=0),n.width=l,n.height=f,Cu(a.set(o,s,o+l,s+f),n),n.mark.bounds.clear().union(a),n}function iat(t,e){return t.items.forEach(n=>e.union(n.bounds)),e.x1=t.padding,e.y1=t.padding,e}function rat(t,e,n){var i=e.padding,r=i-n.x,a=i-n.y;if(!e.datum.title)(r||a)&&ym(t,n,r,a);else{var o=e.items[1].items[0],s=o.anchor,l=e.titlePadding||0,f=i-o.x,d=i-o.y;switch(o.orient){case Ja:r+=Math.ceil(o.bounds.width())+l;break;case to:case uc:break;default:a+=o.bounds.height()+l}switch((r||a)&&ym(t,n,r,a),o.orient){case Ja:d+=yd(e,n,o,s,1,1);break;case to:f+=yd(e,n,o,Qi,0,0)+l,d+=yd(e,n,o,s,1,1);break;case uc:f+=yd(e,n,o,s,0,0),d+=yd(e,n,o,Qi,-1,0,1)+l;break;default:f+=yd(e,n,o,s,0,0)}(f||d)&&ym(t,o,f,d),(f=Math.round(o.bounds.x1-i))<0&&(ym(t,n,-f,0),ym(t,o,-f,0))}}function yd(t,e,n,i,r,a,o){const s=t.datum.type!=="symbol",l=n.datum.vgrad,f=s&&(a||!l)&&!o?e.items[0]:e,d=f.bounds[r?"y2":"x2"]-t.padding,p=l&&a?d:0,m=l&&a?0:d,_=r<=0?0:RO(n);return Math.round(i===GO?p:i===Qi?m-_:.5*(d-_))}function ym(t,e,n,i){e.x+=n,e.y+=i,e.bounds.translate(n,i),e.mark.bounds.translate(n,i),t.dirty(e)}function aat(t){const e=t.reduce((n,i)=>(n[i.column]=Math.max(i.bounds.x2-i.x,n[i.column]||0),n),{});t.forEach(n=>{n.width=e[n.column],n.height=n.bounds.y2-n.y})}function oat(t,e,n,i,r){var a=e.items[0],o=a.frame,s=a.orient,l=a.anchor,f=a.offset,d=a.padding,p=a.items[0].items[0],m=a.items[1]&&a.items[1].items[0],_=s===Ja||s===to?i:n,b=0,x=0,S=0,T=0,M=0,k;if(o!==t2?s===Ja?(b=r.y2,_=r.y1):s===to?(b=r.y1,_=r.y2):(b=r.x1,_=r.x2):s===Ja&&(b=i,_=0),k=l===GO?b:l===Qi?_:(b+_)/2,m&&m.text){switch(s){case sp:case uc:M=p.bounds.height()+d;break;case Ja:T=p.bounds.width()+d;break;case to:T=-p.bounds.width()-d;break}Oi.clear().union(m.bounds),Oi.translate(T-(m.x||0),M-(m.y||0)),$d(m,"x",T)|$d(m,"y",M)&&(t.dirty(m),m.bounds.clear().union(Oi),m.mark.bounds.clear().union(Oi),t.dirty(m)),Oi.clear().union(m.bounds)}else Oi.clear();switch(Oi.union(p.bounds),s){case sp:x=k,S=r.y1-Oi.height()-f;break;case Ja:x=r.x1-Oi.width()-f,S=k;break;case to:x=r.x2+Oi.width()+f,S=k;break;case uc:x=k,S=r.y2+f;break;default:x=a.x,S=a.y}return $d(a,"x",x)|$d(a,"y",S)&&(Oi.translate(x,S),t.dirty(a),a.bounds.clear().union(Oi),e.bounds.clear().union(Oi),t.dirty(a)),a.bounds}function iI(t){ct.call(this,null,t)}kt(iI,ct,{transform(t,e){const n=e.dataflow;return t.mark.items.forEach(i=>{t.layout&&Vrt(n,i,t.layout),uat(n,i,t)}),sat(t.mark.group)?e.reflow():e}});function sat(t){return t&&t.mark.role!=="legend-entry"}function uat(t,e,n){var i=e.items,r=Math.max(0,e.width||0),a=Math.max(0,e.height||0),o=new Nn().set(0,0,r,a),s=o.clone(),l=o.clone(),f=[],d,p,m,_,b,x;for(b=0,x=i.length;b<x;++b)switch(p=i[b],p.role){case ZO:_=Hrt(p)?s:l,_.union(Zrt(t,p,r,a));break;case YO:d=p;break;case XO:f.push(nat(t,p));break;case Lrt:case zrt:case qU:case jU:case HU:case GU:case ZU:case YU:s.union(p.bounds),l.union(p.bounds);break;default:o.union(p.bounds)}if(f.length){const S={};f.forEach(T=>{m=T.orient||to,m!==WO&&(S[m]||(S[m]=[])).push(T)});for(const T in S){const M=S[T];nI(t,M,eat(M,T,n.legends,s,l,r,a))}f.forEach(T=>{const M=T.bounds;if(M.equals(T._bounds)||(T.bounds=T._bounds,t.dirty(T),T.bounds=M,t.dirty(T)),n.autosize&&(n.autosize.type===XU||n.autosize.type===WU||n.autosize.type===VU))switch(T.orient){case Ja:case to:o.add(M.x1,0).add(M.x2,0);break;case sp:case uc:o.add(0,M.y1).add(0,M.y2)}else o.union(M)})}o.union(s).union(l),d&&o.union(oat(t,d,r,a,o)),e.clip&&o.set(0,0,e.width||0,e.height||0),lat(t,e,o,n)}function lat(t,e,n,i){const r=i.autosize||{},a=r.type;if(t._autosize<1||!a)return;let o=t._width,s=t._height,l=Math.max(0,e.width||0),f=Math.max(0,Math.ceil(-n.x1)),d=Math.max(0,e.height||0),p=Math.max(0,Math.ceil(-n.y1));const m=Math.max(0,Math.ceil(n.x2-l)),_=Math.max(0,Math.ceil(n.y2-d));if(r.contains===Frt){const b=t.padding();o-=b.left+b.right,s-=b.top+b.bottom}a===WO?(f=0,p=0,l=o,d=s):a===XU?(l=Math.max(0,o-f-m),d=Math.max(0,s-p-_)):a===WU?(l=Math.max(0,o-f-m),s=d+p+_):a===VU?(o=l+f+m,d=Math.max(0,s-p-_)):a===Brt&&(o=l+f+m,s=d+p+_),t._resizeView(o,s,l,d,[f,p],r.resize)}const cat=Object.freeze(Object.defineProperty({__proto__:null,bound:QU,identifier:QO,mark:KU,overlap:JU,render:eI,viewlayout:iI},Symbol.toStringTag,{value:"Module"}));function rI(t){ct.call(this,null,t)}kt(rI,ct,{transform(t,e){if(this.value&&!t.modified())return e.StopPropagation;var n=e.dataflow.locale(),i=e.fork(e.NO_SOURCE|e.NO_FIELDS),r=this.value,a=t.scale,o=t.count==null?t.values?t.values.length:10:t.count,s=gO(a,o,t.minstep),l=t.format||DB(n,a,s,t.formatSpecifier,t.formatType,!!t.values),f=t.values?$B(a,t.values,s):mO(a,s);return r&&(i.rem=r),r=f.map((d,p)=>De({index:p/(f.length-1||1),value:d,label:l(d)})),t.extra&&r.length&&r.push(De({index:-1,extra:{value:r[0].value},label:""})),i.source=r,i.add=r,this.value=r,i}});function aI(t){ct.call(this,null,t)}function fat(){return De({})}function hat(t){const e=Dp().test(n=>n.exit);return e.lookup=n=>e.get(t(n)),e}kt(aI,ct,{transform(t,e){var n=e.dataflow,i=e.fork(e.NO_SOURCE|e.NO_FIELDS),r=t.item||fat,a=t.key||Gt,o=this.value;return gt(i.encode)&&(i.encode=null),o&&(t.modified("key")||e.modified(a))&&dt("DataJoin does not support modified key function or fields."),o||(e=e.addAll(),this.value=o=hat(a)),e.visit(e.ADD,s=>{const l=a(s);let f=o.get(l);f?f.exit?(o.empty--,i.add.push(f)):i.mod.push(f):(f=r(s),o.set(l,f),i.add.push(f)),f.datum=s,f.exit=!1}),e.visit(e.MOD,s=>{const l=a(s),f=o.get(l);f&&(f.datum=s,i.mod.push(f))}),e.visit(e.REM,s=>{const l=a(s),f=o.get(l);s===f.datum&&!f.exit&&(i.rem.push(f),f.exit=!0,++o.empty)}),e.changed(e.ADD_MOD)&&i.modifies("datum"),(e.clean()||t.clean&&o.empty>n.cleanThreshold)&&n.runAfter(o.clean),i}});function oI(t){ct.call(this,null,t)}kt(oI,ct,{transform(t,e){var n=e.fork(e.ADD_REM),i=t.mod||!1,r=t.encoders,a=e.encode;if(gt(a))if(n.changed()||a.every(p=>r[p]))a=a[0],n.encode=null;else return e.StopPropagation;var o=a==="enter",s=r.update||Ol,l=r.enter||Ol,f=r.exit||Ol,d=(a&&!o?r[a]:s)||Ol;if(e.changed(e.ADD)&&(e.visit(e.ADD,p=>{l(p,t),s(p,t)}),n.modifies(l.output),n.modifies(s.output),d!==Ol&&d!==s&&(e.visit(e.ADD,p=>{d(p,t)}),n.modifies(d.output))),e.changed(e.REM)&&f!==Ol&&(e.visit(e.REM,p=>{f(p,t)}),n.modifies(f.output)),o||d!==Ol){const p=e.MOD|(t.modified()?e.REFLOW:0);o?(e.visit(p,m=>{const _=l(m,t)||i;(d(m,t)||_)&&n.mod.push(m)}),n.mod.length&&n.modifies(l.output)):e.visit(p,m=>{(d(m,t)||i)&&n.mod.push(m)}),n.mod.length&&n.modifies(d.output)}return n.changed()?n:e.StopPropagation}});function sI(t){ct.call(this,[],t)}kt(sI,ct,{transform(t,e){if(this.value!=null&&!t.modified())return e.StopPropagation;var n=e.dataflow.locale(),i=e.fork(e.NO_SOURCE|e.NO_FIELDS),r=this.value,a=t.type||o_,o=t.scale,s=+t.limit,l=gO(o,t.count==null?5:t.count,t.minstep),f=!!t.values||a===o_,d=t.format||zB(n,o,l,a,t.formatSpecifier,t.formatType,f),p=t.values||LB(o,l),m,_,b,x,S;return r&&(i.rem=r),a===o_?(s&&p.length>s?(e.dataflow.warn("Symbol legend count exceeds limit, filtering items."),r=p.slice(0,s-1),S=!0):r=p,se(b=t.size)?(!t.values&&o(r[0])===0&&(r=r.slice(1)),x=r.reduce((T,M)=>Math.max(T,b(M,t)),0)):b=Ui(x=b||8),r=r.map((T,M)=>De({index:M,label:d(T,M,r),value:T,offset:x,size:b(T,t)})),S&&(S=p[r.length],r.push(De({index:r.length,label:`${p.length-r.length} entries`,value:S,offset:x,size:b(S,t)})))):a===Pet?(m=o.domain(),_=MB(o,m[0],be(m)),p.length<3&&!t.values&&m[0]!==be(m)&&(p=[m[0],be(m)]),r=p.map((T,M)=>De({index:M,label:d(T,M,p),value:T,perc:_(T)}))):(b=p.length-1,_=Wet(o),r=p.map((T,M)=>De({index:M,label:d(T,M,p),value:T,perc:M?_(T):0,perc2:M===b?1:_(p[M+1])}))),i.source=r,i.add=r,this.value=r,i}});const dat=t=>t.source.x,pat=t=>t.source.y,gat=t=>t.target.x,mat=t=>t.target.y;function KO(t){ct.call(this,{},t)}KO.Definition={type:"LinkPath",metadata:{modifies:!0},params:[{name:"sourceX",type:"field",default:"source.x"},{name:"sourceY",type:"field",default:"source.y"},{name:"targetX",type:"field",default:"target.x"},{name:"targetY",type:"field",default:"target.y"},{name:"orient",type:"enum",default:"vertical",values:["horizontal","vertical","radial"]},{name:"shape",type:"enum",default:"line",values:["line","arc","curve","diagonal","orthogonal"]},{name:"require",type:"signal"},{name:"as",type:"string",default:"path"}]};kt(KO,ct,{transform(t,e){var n=t.sourceX||dat,i=t.sourceY||pat,r=t.targetX||gat,a=t.targetY||mat,o=t.as||"path",s=t.orient||"vertical",l=t.shape||"line",f=G5.get(l+"-"+s)||G5.get(l);return f||dt("LinkPath unsupported type: "+t.shape+(t.orient?"-"+t.orient:"")),e.visit(e.SOURCE,d=>{d[o]=f(n(d),i(d),r(d),a(d))}),e.reflow(t.modified()).modifies(o)}});const uI=(t,e,n,i)=>"M"+t+","+e+"L"+n+","+i,yat=(t,e,n,i)=>uI(e*Math.cos(t),e*Math.sin(t),i*Math.cos(n),i*Math.sin(n)),lI=(t,e,n,i)=>{var r=n-t,a=i-e,o=Math.hypot(r,a)/2,s=180*Math.atan2(a,r)/Math.PI;return"M"+t+","+e+"A"+o+","+o+" "+s+" 0 1 "+n+","+i},vat=(t,e,n,i)=>lI(e*Math.cos(t),e*Math.sin(t),i*Math.cos(n),i*Math.sin(n)),cI=(t,e,n,i)=>{const r=n-t,a=i-e,o=.2*(r+a),s=.2*(a-r);return"M"+t+","+e+"C"+(t+o)+","+(e+s)+" "+(n+s)+","+(i-o)+" "+n+","+i},_at=(t,e,n,i)=>cI(e*Math.cos(t),e*Math.sin(t),i*Math.cos(n),i*Math.sin(n)),bat=(t,e,n,i)=>"M"+t+","+e+"V"+i+"H"+n,xat=(t,e,n,i)=>"M"+t+","+e+"H"+n+"V"+i,wat=(t,e,n,i)=>{const r=Math.cos(t),a=Math.sin(t),o=Math.cos(n),s=Math.sin(n),l=Math.abs(n-t)>Math.PI?n<=t:n>t;return"M"+e*r+","+e*a+"A"+e+","+e+" 0 0,"+(l?1:0)+" "+e*o+","+e*s+"L"+i*o+","+i*s},Eat=(t,e,n,i)=>{const r=(t+n)/2;return"M"+t+","+e+"C"+r+","+e+" "+r+","+i+" "+n+","+i},Sat=(t,e,n,i)=>{const r=(e+i)/2;return"M"+t+","+e+"C"+t+","+r+" "+n+","+r+" "+n+","+i},Aat=(t,e,n,i)=>{const r=Math.cos(t),a=Math.sin(t),o=Math.cos(n),s=Math.sin(n),l=(e+i)/2;return"M"+e*r+","+e*a+"C"+l*r+","+l*a+" "+l*o+","+l*s+" "+i*o+","+i*s},G5=Dp({line:uI,"line-radial":yat,arc:lI,"arc-radial":vat,curve:cI,"curve-radial":_at,"orthogonal-horizontal":bat,"orthogonal-vertical":xat,"orthogonal-radial":wat,"diagonal-horizontal":Eat,"diagonal-vertical":Sat,"diagonal-radial":Aat});function JO(t){ct.call(this,null,t)}JO.Definition={type:"Pie",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"startAngle",type:"number",default:0},{name:"endAngle",type:"number",default:6.283185307179586},{name:"sort",type:"boolean",default:!1},{name:"as",type:"string",array:!0,length:2,default:["startAngle","endAngle"]}]};kt(JO,ct,{transform(t,e){var n=t.as||["startAngle","endAngle"],i=n[0],r=n[1],a=t.field||Mp,o=t.startAngle||0,s=t.endAngle!=null?t.endAngle:2*Math.PI,l=e.source,f=l.map(a),d=f.length,p=o,m=(s-o)/AP(f),_=Yr(d),b,x,S;for(t.sort&&_.sort((T,M)=>f[T]-f[M]),b=0;b<d;++b)S=f[_[b]],x=l[_[b]],x[i]=p,x[r]=p+=S*m;return this.value=f,e.reflow(t.modified()).modifies(n)}});const Tat=5;function Cat(t){const e=t.type;return!t.bins&&(e===ep||e===ny||e===iy)}function fI(t){return hO(t)&&t!==Vo}const Mat=oo(["set","modified","clear","type","scheme","schemeExtent","schemeCount","domain","domainMin","domainMid","domainMax","domainRaw","domainImplicit","nice","zero","bins","range","rangeStep","round","reverse","interpolate","interpolateGamma"]);function hI(t){ct.call(this,null,t),this.modified(!0)}kt(hI,ct,{transform(t,e){var n=e.dataflow,i=this.value,r=kat(t);(!i||r!==i.type)&&(this.value=i=Oe(r)());for(r in t)if(!Mat[r]){if(r==="padding"&&fI(i.type))continue;se(i[r])?i[r](t[r]):n.warn("Unsupported scale property: "+r)}return Lat(i,t,Nat(i,t,$at(i,t,n))),e.fork(e.NO_SOURCE|e.NO_FIELDS)}});function kat(t){var e=t.type,n="",i;return e===Vo?Vo+"-"+ep:(Oat(t)&&(i=t.rawDomain?t.rawDomain.length:t.domain?t.domain.length+ +(t.domainMid!=null):0,n=i===2?Vo+"-":i===3?Up+"-":""),(n+e||ep).toLowerCase())}function Oat(t){const e=t.type;return hO(e)&&e!==If&&e!==qf&&(t.scheme||t.range&&t.range.length&&t.range.every(Dt))}function $at(t,e,n){const i=Dat(t,e.domainRaw,n);if(i>-1)return i;var r=e.domain,a=t.type,o=e.zero||e.zero===void 0&&Cat(t),s,l;if(!r)return 0;if((o||e.domainMin!=null||e.domainMax!=null||e.domainMid!=null)&&(s=(r=r.slice()).length-1||1,o&&(r[0]>0&&(r[0]=0),r[s]<0&&(r[s]=0)),e.domainMin!=null&&(r[0]=e.domainMin),e.domainMax!=null&&(r[s]=e.domainMax),e.domainMid!=null)){l=e.domainMid;const f=l>r[s]?s+1:l<r[0]?0:s;f!==s&&n.warn("Scale domainMid exceeds domain min or max.",l),r.splice(f,0,l)}return fI(a)&&e.padding&&r[0]!==be(r)&&(r=Rat(a,r,e.range,e.padding,e.exponent,e.constant)),t.domain(dI(a,r,n)),a===uO&&t.unknown(e.domainImplicit?AT:void 0),e.nice&&t.nice&&t.nice(e.nice!==!0&&gO(t,e.nice)||null),r.length}function Dat(t,e,n){return e?(t.domain(dI(t.type,e,n)),e.length):-1}function Rat(t,e,n,i,r,a){var o=Math.abs(be(n)-n[0]),s=o/(o-2*i),l=t===wu?kM(e,null,s):t===iy?$_(e,null,s,.5):t===ny?$_(e,null,s,r||1):t===Bx?OM(e,null,s,a||1):MM(e,null,s);return e=e.slice(),e[0]=l[0],e[e.length-1]=l[1],e}function dI(t,e,n){if(EB(t)){var i=Math.abs(e.reduce((r,a)=>r+(a<0?-1:a>0?1:0),0));i!==e.length&&n.warn("Log scale domain includes zero: "+Mt(e))}return e}function Nat(t,e,n){let i=e.bins;if(i&&!gt(i)){const r=t.domain(),a=r[0],o=be(r),s=i.step;let l=i.start==null?a:i.start,f=i.stop==null?o:i.stop;s||dt("Scale bins parameter missing step property."),l<a&&(l=s*Math.ceil(a/s)),f>o&&(f=s*Math.floor(o/s)),i=Yr(l,f+s/2,s)}return i?t.bins=i:t.bins&&delete t.bins,t.type===lO&&(i?!e.domain&&!e.domainRaw&&(t.domain(i),n=i.length):t.bins=t.domain()),n}function Lat(t,e,n){var i=t.type,r=e.round||!1,a=e.range;if(e.rangeStep!=null)a=zat(i,e,n);else if(e.scheme&&(a=Fat(i,e,n),se(a))){if(t.interpolator)return t.interpolator(a);dt(`Scale type ${i} does not support interpolating color schemes.`)}if(a&&SB(i))return t.interpolator(qx(YT(a,e.reverse),e.interpolate,e.interpolateGamma));a&&e.interpolate&&t.interpolate?t.interpolate(dO(e.interpolate,e.interpolateGamma)):se(t.round)?t.round(r):se(t.rangeRound)&&t.interpolate(r?ty:vc),a&&t.range(YT(a,e.reverse))}function zat(t,e,n){t!==yB&&t!==DT&&dt("Only band and point scales support rangeStep.");var i=(e.paddingOuter!=null?e.paddingOuter:e.padding)||0,r=t===DT?1:(e.paddingInner!=null?e.paddingInner:e.padding)||0;return[0,e.rangeStep*sO(n,r,i)]}function Fat(t,e,n){var i=e.schemeExtent,r,a;return gt(e.scheme)?a=qx(e.scheme,e.interpolate,e.interpolateGamma):(r=e.scheme.toLowerCase(),a=pO(r),a||dt(`Unrecognized scheme name: ${e.scheme}`)),n=t===Ix?n+1:t===lO?n-1:t===np||t===Ux?+e.schemeCount||Tat:n,SB(t)?Z5(a,i,e.reverse):se(a)?CB(Z5(a,i),n):t===uO?a:a.slice(0,n)}function Z5(t,e,n){return se(t)&&(e||n)?TB(t,YT(e||[0,1],n)):t}function YT(t,e){return e?t.slice().reverse():t}function pI(t){ct.call(this,null,t)}kt(pI,ct,{transform(t,e){const n=t.modified("sort")||e.changed(e.ADD)||e.modified(t.sort.fields)||e.modified("datum");return n&&e.source.sort(lh(t.sort)),this.modified(n),e}});const Y5="zero",gI="center",mI="normalize",yI=["y0","y1"];function t3(t){ct.call(this,null,t)}t3.Definition={type:"Stack",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"groupby",type:"field",array:!0},{name:"sort",type:"compare"},{name:"offset",type:"enum",default:Y5,values:[Y5,gI,mI]},{name:"as",type:"string",array:!0,length:2,default:yI}]};kt(t3,ct,{transform(t,e){var n=t.as||yI,i=n[0],r=n[1],a=lh(t.sort),o=t.field||Mp,s=t.offset===gI?Pat:t.offset===mI?Bat:Uat,l,f,d,p;for(l=Iat(e.source,t.groupby,a,o),f=0,d=l.length,p=l.max;f<d;++f)s(l[f],p,o,i,r);return e.reflow(t.modified()).modifies(n)}});function Pat(t,e,n,i,r){for(var a=(e-t.sum)/2,o=t.length,s=0,l;s<o;++s)l=t[s],l[i]=a,l[r]=a+=Math.abs(n(l))}function Bat(t,e,n,i,r){for(var a=1/t.sum,o=0,s=t.length,l=0,f=0,d;l<s;++l)d=t[l],d[i]=o,d[r]=o=a*(f+=Math.abs(n(d)))}function Uat(t,e,n,i,r){for(var a=0,o=0,s=t.length,l=0,f,d;l<s;++l)d=t[l],f=+n(d),f<0?(d[i]=o,d[r]=o+=f):(d[i]=a,d[r]=a+=f)}function Iat(t,e,n,i){var r=[],a=x=>x(d),o,s,l,f,d,p,m,_,b;if(e==null)r.push(t.slice());else for(o={},s=0,l=t.length;s<l;++s)d=t[s],p=e.map(a),m=o[p],m||(o[p]=m=[],r.push(m)),m.push(d);for(p=0,b=0,f=r.length;p<f;++p){for(m=r[p],s=0,_=0,l=m.length;s<l;++s)_+=Math.abs(i(m[s]));m.sum=_,_>b&&(b=_),n&&m.sort(n)}return r.max=b,r}const qat=Object.freeze(Object.defineProperty({__proto__:null,axisticks:rI,datajoin:aI,encode:oI,legendentries:sI,linkpath:KO,pie:JO,scale:hI,sortitems:pI,stack:t3},Symbol.toStringTag,{value:"Module"}));var Xt=1e-6,XT=1e-12,de=Math.PI,bn=de/2,ub=de/4,or=de*2,An=180/de,ce=de/180,_e=Math.abs,qp=Math.atan,ka=Math.atan2,Yt=Math.cos,kv=Math.ceil,vI=Math.exp,WT=Math.hypot,lb=Math.log,GS=Math.pow,Zt=Math.sin,ba=Math.sign||function(t){return t>0?1:t<0?-1:0},sr=Math.sqrt,e3=Math.tan;function _I(t){return t>1?0:t<-1?de:Math.acos(t)}function Ar(t){return t>1?bn:t<-1?-bn:Math.asin(t)}function mi(){}function cb(t,e){t&&W5.hasOwnProperty(t.type)&&W5[t.type](t,e)}var X5={Feature:function(t,e){cb(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,i=-1,r=n.length;++i<r;)cb(n[i].geometry,e)}},W5={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)t=n[i],e.point(t[0],t[1],t[2])},LineString:function(t,e){VT(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)VT(n[i],e,0)},Polygon:function(t,e){V5(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)V5(n[i],e)},GeometryCollection:function(t,e){for(var n=t.geometries,i=-1,r=n.length;++i<r;)cb(n[i],e)}};function VT(t,e,n){var i=-1,r=t.length-n,a;for(e.lineStart();++i<r;)a=t[i],e.point(a[0],a[1],a[2]);e.lineEnd()}function V5(t,e){var n=-1,i=t.length;for(e.polygonStart();++n<i;)VT(t[n],e,1);e.polygonEnd()}function au(t,e){t&&X5.hasOwnProperty(t.type)?X5[t.type](t,e):cb(t,e)}var fb=new rr,hb=new rr,bI,xI,QT,KT,JT,rs={point:mi,lineStart:mi,lineEnd:mi,polygonStart:function(){fb=new rr,rs.lineStart=jat,rs.lineEnd=Hat},polygonEnd:function(){var t=+fb;hb.add(t<0?or+t:t),this.lineStart=this.lineEnd=this.point=mi},sphere:function(){hb.add(or)}};function jat(){rs.point=Gat}function Hat(){wI(bI,xI)}function Gat(t,e){rs.point=wI,bI=t,xI=e,t*=ce,e*=ce,QT=t,KT=Yt(e=e/2+ub),JT=Zt(e)}function wI(t,e){t*=ce,e*=ce,e=e/2+ub;var n=t-QT,i=n>=0?1:-1,r=i*n,a=Yt(e),o=Zt(e),s=JT*o,l=KT*a+s*Yt(r),f=s*i*Zt(r);fb.add(ka(f,l)),QT=t,KT=a,JT=o}function Zat(t){return hb=new rr,au(t,rs),hb*2}function db(t){return[ka(t[1],t[0]),Ar(t[2])]}function Hf(t){var e=t[0],n=t[1],i=Yt(n);return[i*Yt(e),i*Zt(e),Zt(n)]}function Ov(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function up(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function ZS(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function $v(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function pb(t){var e=sr(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}var dn,_r,vn,Gr,vf,EI,SI,Bd,a0,Ll,Eu,iu={point:tC,lineStart:Q5,lineEnd:K5,polygonStart:function(){iu.point=TI,iu.lineStart=Yat,iu.lineEnd=Xat,a0=new rr,rs.polygonStart()},polygonEnd:function(){rs.polygonEnd(),iu.point=tC,iu.lineStart=Q5,iu.lineEnd=K5,fb<0?(dn=-(vn=180),_r=-(Gr=90)):a0>Xt?Gr=90:a0<-1e-6&&(_r=-90),Eu[0]=dn,Eu[1]=vn},sphere:function(){dn=-(vn=180),_r=-(Gr=90)}};function tC(t,e){Ll.push(Eu=[dn=t,vn=t]),e<_r&&(_r=e),e>Gr&&(Gr=e)}function AI(t,e){var n=Hf([t*ce,e*ce]);if(Bd){var i=up(Bd,n),r=[i[1],-i[0],0],a=up(r,i);pb(a),a=db(a);var o=t-vf,s=o>0?1:-1,l=a[0]*An*s,f,d=_e(o)>180;d^(s*vf<l&&l<s*t)?(f=a[1]*An,f>Gr&&(Gr=f)):(l=(l+360)%360-180,d^(s*vf<l&&l<s*t)?(f=-a[1]*An,f<_r&&(_r=f)):(e<_r&&(_r=e),e>Gr&&(Gr=e))),d?t<vf?Hr(dn,t)>Hr(dn,vn)&&(vn=t):Hr(t,vn)>Hr(dn,vn)&&(dn=t):vn>=dn?(t<dn&&(dn=t),t>vn&&(vn=t)):t>vf?Hr(dn,t)>Hr(dn,vn)&&(vn=t):Hr(t,vn)>Hr(dn,vn)&&(dn=t)}else Ll.push(Eu=[dn=t,vn=t]);e<_r&&(_r=e),e>Gr&&(Gr=e),Bd=n,vf=t}function Q5(){iu.point=AI}function K5(){Eu[0]=dn,Eu[1]=vn,iu.point=tC,Bd=null}function TI(t,e){if(Bd){var n=t-vf;a0.add(_e(n)>180?n+(n>0?360:-360):n)}else EI=t,SI=e;rs.point(t,e),AI(t,e)}function Yat(){rs.lineStart()}function Xat(){TI(EI,SI),rs.lineEnd(),_e(a0)>Xt&&(dn=-(vn=180)),Eu[0]=dn,Eu[1]=vn,Bd=null}function Hr(t,e){return(e-=t)<0?e+360:e}function Wat(t,e){return t[0]-e[0]}function J5(t,e){return t[0]<=t[1]?t[0]<=e&&e<=t[1]:e<t[0]||t[1]<e}function Vat(t){var e,n,i,r,a,o,s;if(Gr=vn=-(dn=_r=1/0),Ll=[],au(t,iu),n=Ll.length){for(Ll.sort(Wat),e=1,i=Ll[0],a=[i];e<n;++e)r=Ll[e],J5(i,r[0])||J5(i,r[1])?(Hr(i[0],r[1])>Hr(i[0],i[1])&&(i[1]=r[1]),Hr(r[0],i[1])>Hr(i[0],i[1])&&(i[0]=r[0])):a.push(i=r);for(o=-1/0,n=a.length-1,e=0,i=a[n];e<=n;i=r,++e)r=a[e],(s=Hr(i[1],r[0]))>o&&(o=s,dn=r[0],vn=i[1])}return Ll=Eu=null,dn===1/0||_r===1/0?[[NaN,NaN],[NaN,NaN]]:[[dn,_r],[vn,Gr]]}var Im,gb,mb,yb,vb,_b,bb,xb,eC,nC,iC,CI,MI,Ki,Ji,tr,eo={sphere:mi,point:n3,lineStart:t6,lineEnd:e6,polygonStart:function(){eo.lineStart=Jat,eo.lineEnd=tot},polygonEnd:function(){eo.lineStart=t6,eo.lineEnd=e6}};function n3(t,e){t*=ce,e*=ce;var n=Yt(e);gy(n*Yt(t),n*Zt(t),Zt(e))}function gy(t,e,n){++Im,mb+=(t-mb)/Im,yb+=(e-yb)/Im,vb+=(n-vb)/Im}function t6(){eo.point=Qat}function Qat(t,e){t*=ce,e*=ce;var n=Yt(e);Ki=n*Yt(t),Ji=n*Zt(t),tr=Zt(e),eo.point=Kat,gy(Ki,Ji,tr)}function Kat(t,e){t*=ce,e*=ce;var n=Yt(e),i=n*Yt(t),r=n*Zt(t),a=Zt(e),o=ka(sr((o=Ji*a-tr*r)*o+(o=tr*i-Ki*a)*o+(o=Ki*r-Ji*i)*o),Ki*i+Ji*r+tr*a);gb+=o,_b+=o*(Ki+(Ki=i)),bb+=o*(Ji+(Ji=r)),xb+=o*(tr+(tr=a)),gy(Ki,Ji,tr)}function e6(){eo.point=n3}function Jat(){eo.point=eot}function tot(){kI(CI,MI),eo.point=n3}function eot(t,e){CI=t,MI=e,t*=ce,e*=ce,eo.point=kI;var n=Yt(e);Ki=n*Yt(t),Ji=n*Zt(t),tr=Zt(e),gy(Ki,Ji,tr)}function kI(t,e){t*=ce,e*=ce;var n=Yt(e),i=n*Yt(t),r=n*Zt(t),a=Zt(e),o=Ji*a-tr*r,s=tr*i-Ki*a,l=Ki*r-Ji*i,f=WT(o,s,l),d=Ar(f),p=f&&-d/f;eC.add(p*o),nC.add(p*s),iC.add(p*l),gb+=d,_b+=d*(Ki+(Ki=i)),bb+=d*(Ji+(Ji=r)),xb+=d*(tr+(tr=a)),gy(Ki,Ji,tr)}function not(t){Im=gb=mb=yb=vb=_b=bb=xb=0,eC=new rr,nC=new rr,iC=new rr,au(t,eo);var e=+eC,n=+nC,i=+iC,r=WT(e,n,i);return r<XT&&(e=_b,n=bb,i=xb,gb<Xt&&(e=mb,n=yb,i=vb),r=WT(e,n,i),r<XT)?[NaN,NaN]:[ka(n,e)*An,Ar(i/r)*An]}function rC(t,e){function n(i,r){return i=t(i,r),e(i[0],i[1])}return t.invert&&e.invert&&(n.invert=function(i,r){return i=e.invert(i,r),i&&t.invert(i[0],i[1])}),n}function aC(t,e){return _e(t)>de&&(t-=Math.round(t/or)*or),[t,e]}aC.invert=aC;function OI(t,e,n){return(t%=or)?e||n?rC(i6(t),r6(e,n)):i6(t):e||n?r6(e,n):aC}function n6(t){return function(e,n){return e+=t,_e(e)>de&&(e-=Math.round(e/or)*or),[e,n]}}function i6(t){var e=n6(t);return e.invert=n6(-t),e}function r6(t,e){var n=Yt(t),i=Zt(t),r=Yt(e),a=Zt(e);function o(s,l){var f=Yt(l),d=Yt(s)*f,p=Zt(s)*f,m=Zt(l),_=m*n+d*i;return[ka(p*r-_*a,d*n-m*i),Ar(_*r+p*a)]}return o.invert=function(s,l){var f=Yt(l),d=Yt(s)*f,p=Zt(s)*f,m=Zt(l),_=m*r-p*a;return[ka(p*r+m*a,d*n+_*i),Ar(_*n-d*i)]},o}function iot(t){t=OI(t[0]*ce,t[1]*ce,t.length>2?t[2]*ce:0);function e(n){return n=t(n[0]*ce,n[1]*ce),n[0]*=An,n[1]*=An,n}return e.invert=function(n){return n=t.invert(n[0]*ce,n[1]*ce),n[0]*=An,n[1]*=An,n},e}function rot(t,e,n,i,r,a){if(n){var o=Yt(e),s=Zt(e),l=i*n;r==null?(r=e+i*or,a=e-l/2):(r=a6(o,r),a=a6(o,a),(i>0?r<a:r>a)&&(r+=i*or));for(var f,d=r;i>0?d>a:d<a;d-=l)f=db([o,-s*Yt(d),-s*Zt(d)]),t.point(f[0],f[1])}}function a6(t,e){e=Hf(e),e[0]-=t,pb(e);var n=_I(-e[1]);return((-e[2]<0?-n:n)+or-Xt)%or}function $I(){var t=[],e;return{point:function(n,i,r){e.push([n,i,r])},lineStart:function(){t.push(e=[])},lineEnd:mi,rejoin:function(){t.length>1&&t.push(t.pop().concat(t.shift()))},result:function(){var n=t;return t=[],e=null,n}}}function g_(t,e){return _e(t[0]-e[0])<Xt&&_e(t[1]-e[1])<Xt}function Dv(t,e,n,i){this.x=t,this.z=e,this.o=n,this.e=i,this.v=!1,this.n=this.p=null}function DI(t,e,n,i,r){var a=[],o=[],s,l;if(t.forEach(function(b){if(!((x=b.length-1)<=0)){var x,S=b[0],T=b[x],M;if(g_(S,T)){if(!S[2]&&!T[2]){for(r.lineStart(),s=0;s<x;++s)r.point((S=b[s])[0],S[1]);r.lineEnd();return}T[0]+=2*Xt}a.push(M=new Dv(S,b,null,!0)),o.push(M.o=new Dv(S,null,M,!1)),a.push(M=new Dv(T,b,null,!1)),o.push(M.o=new Dv(T,null,M,!0))}}),!!a.length){for(o.sort(e),o6(a),o6(o),s=0,l=o.length;s<l;++s)o[s].e=n=!n;for(var f=a[0],d,p;;){for(var m=f,_=!0;m.v;)if((m=m.n)===f)return;d=m.z,r.lineStart();do{if(m.v=m.o.v=!0,m.e){if(_)for(s=0,l=d.length;s<l;++s)r.point((p=d[s])[0],p[1]);else i(m.x,m.n.x,1,r);m=m.n}else{if(_)for(d=m.p.z,s=d.length-1;s>=0;--s)r.point((p=d[s])[0],p[1]);else i(m.x,m.p.x,-1,r);m=m.p}m=m.o,d=m.z,_=!_}while(!m.v);r.lineEnd()}}}function o6(t){if(e=t.length){for(var e,n=0,i=t[0],r;++n<e;)i.n=r=t[n],r.p=i,i=r;i.n=r=t[0],r.p=i}}function YS(t){return _e(t[0])<=de?t[0]:ba(t[0])*((_e(t[0])+de)%or-de)}function aot(t,e){var n=YS(e),i=e[1],r=Zt(i),a=[Zt(n),-Yt(n),0],o=0,s=0,l=new rr;r===1?i=bn+Xt:r===-1&&(i=-bn-Xt);for(var f=0,d=t.length;f<d;++f)if(m=(p=t[f]).length)for(var p,m,_=p[m-1],b=YS(_),x=_[1]/2+ub,S=Zt(x),T=Yt(x),M=0;M<m;++M,b=$,S=F,T=N,_=k){var k=p[M],$=YS(k),D=k[1]/2+ub,F=Zt(D),N=Yt(D),I=$-b,q=I>=0?1:-1,Y=q*I,H=Y>de,et=S*F;if(l.add(ka(et*q*Zt(Y),T*N+et*Yt(Y))),o+=H?I+q*or:I,H^b>=n^$>=n){var nt=up(Hf(_),Hf(k));pb(nt);var W=up(a,nt);pb(W);var j=(H^I>=0?-1:1)*Ar(W[2]);(i>j||i===j&&(nt[0]||nt[1]))&&(s+=H^I>=0?1:-1)}}return(o<-1e-6||o<Xt&&l<-1e-12)^s&1}function RI(t,e,n,i){return function(r){var a=e(r),o=$I(),s=e(o),l=!1,f,d,p,m={point:_,lineStart:x,lineEnd:S,polygonStart:function(){m.point=T,m.lineStart=M,m.lineEnd=k,d=[],f=[]},polygonEnd:function(){m.point=_,m.lineStart=x,m.lineEnd=S,d=SP(d);var $=aot(f,i);d.length?(l||(r.polygonStart(),l=!0),DI(d,sot,$,n,r)):$&&(l||(r.polygonStart(),l=!0),r.lineStart(),n(null,null,1,r),r.lineEnd()),l&&(r.polygonEnd(),l=!1),d=f=null},sphere:function(){r.polygonStart(),r.lineStart(),n(null,null,1,r),r.lineEnd(),r.polygonEnd()}};function _($,D){t($,D)&&r.point($,D)}function b($,D){a.point($,D)}function x(){m.point=b,a.lineStart()}function S(){m.point=_,a.lineEnd()}function T($,D){p.push([$,D]),s.point($,D)}function M(){s.lineStart(),p=[]}function k(){T(p[0][0],p[0][1]),s.lineEnd();var $=s.clean(),D=o.result(),F,N=D.length,I,q,Y;if(p.pop(),f.push(p),p=null,!!N){if($&1){if(q=D[0],(I=q.length-1)>0){for(l||(r.polygonStart(),l=!0),r.lineStart(),F=0;F<I;++F)r.point((Y=q[F])[0],Y[1]);r.lineEnd()}return}N>1&&$&2&&D.push(D.pop().concat(D.shift())),d.push(D.filter(oot))}}return m}}function oot(t){return t.length>1}function sot(t,e){return((t=t.x)[0]<0?t[1]-bn-Xt:bn-t[1])-((e=e.x)[0]<0?e[1]-bn-Xt:bn-e[1])}const s6=RI(function(){return!0},uot,cot,[-de,-bn]);function uot(t){var e=NaN,n=NaN,i=NaN,r;return{lineStart:function(){t.lineStart(),r=1},point:function(a,o){var s=a>0?de:-de,l=_e(a-e);_e(l-de)<Xt?(t.point(e,n=(n+o)/2>0?bn:-bn),t.point(i,n),t.lineEnd(),t.lineStart(),t.point(s,n),t.point(a,n),r=0):i!==s&&l>=de&&(_e(e-i)<Xt&&(e-=i*Xt),_e(a-s)<Xt&&(a-=s*Xt),n=lot(e,n,a,o),t.point(i,n),t.lineEnd(),t.lineStart(),t.point(s,n),r=0),t.point(e=a,n=o),i=s},lineEnd:function(){t.lineEnd(),e=n=NaN},clean:function(){return 2-r}}}function lot(t,e,n,i){var r,a,o=Zt(t-n);return _e(o)>Xt?qp((Zt(e)*(a=Yt(i))*Zt(n)-Zt(i)*(r=Yt(e))*Zt(t))/(r*a*o)):(e+i)/2}function cot(t,e,n,i){var r;if(t==null)r=n*bn,i.point(-de,r),i.point(0,r),i.point(de,r),i.point(de,0),i.point(de,-r),i.point(0,-r),i.point(-de,-r),i.point(-de,0),i.point(-de,r);else if(_e(t[0]-e[0])>Xt){var a=t[0]<e[0]?de:-de;r=n*a/2,i.point(-a,r),i.point(0,r),i.point(a,r)}else i.point(e[0],e[1])}function fot(t){var e=Yt(t),n=2*ce,i=e>0,r=_e(e)>Xt;function a(d,p,m,_){rot(_,t,n,m,d,p)}function o(d,p){return Yt(d)*Yt(p)>e}function s(d){var p,m,_,b,x;return{lineStart:function(){b=_=!1,x=1},point:function(S,T){var M=[S,T],k,$=o(S,T),D=i?$?0:f(S,T):$?f(S+(S<0?de:-de),T):0;if(!p&&(b=_=$)&&d.lineStart(),$!==_&&(k=l(p,M),(!k||g_(p,k)||g_(M,k))&&(M[2]=1)),$!==_)x=0,$?(d.lineStart(),k=l(M,p),d.point(k[0],k[1])):(k=l(p,M),d.point(k[0],k[1],2),d.lineEnd()),p=k;else if(r&&p&&i^$){var F;!(D&m)&&(F=l(M,p,!0))&&(x=0,i?(d.lineStart(),d.point(F[0][0],F[0][1]),d.point(F[1][0],F[1][1]),d.lineEnd()):(d.point(F[1][0],F[1][1]),d.lineEnd(),d.lineStart(),d.point(F[0][0],F[0][1],3)))}$&&(!p||!g_(p,M))&&d.point(M[0],M[1]),p=M,_=$,m=D},lineEnd:function(){_&&d.lineEnd(),p=null},clean:function(){return x|(b&&_)<<1}}}function l(d,p,m){var _=Hf(d),b=Hf(p),x=[1,0,0],S=up(_,b),T=Ov(S,S),M=S[0],k=T-M*M;if(!k)return!m&&d;var $=e*T/k,D=-e*M/k,F=up(x,S),N=$v(x,$),I=$v(S,D);ZS(N,I);var q=F,Y=Ov(N,q),H=Ov(q,q),et=Y*Y-H*(Ov(N,N)-1);if(!(et<0)){var nt=sr(et),W=$v(q,(-Y-nt)/H);if(ZS(W,N),W=db(W),!m)return W;var j=d[0],U=p[0],X=d[1],V=p[1],ot;U<j&&(ot=j,j=U,U=ot);var B=U-j,J=_e(B-de)<Xt,lt=J||B<Xt;if(!J&&V<X&&(ot=X,X=V,V=ot),lt?J?X+V>0^W[1]<(_e(W[0]-j)<Xt?X:V):X<=W[1]&&W[1]<=V:B>de^(j<=W[0]&&W[0]<=U)){var ft=$v(q,(-Y+nt)/H);return ZS(ft,N),[W,db(ft)]}}}function f(d,p){var m=i?t:de-t,_=0;return d<-m?_|=1:d>m&&(_|=2),p<-m?_|=4:p>m&&(_|=8),_}return RI(o,s,a,i?[0,-t]:[-de,t-de])}function hot(t,e,n,i,r,a){var o=t[0],s=t[1],l=e[0],f=e[1],d=0,p=1,m=l-o,_=f-s,b;if(b=n-o,!(!m&&b>0)){if(b/=m,m<0){if(b<d)return;b<p&&(p=b)}else if(m>0){if(b>p)return;b>d&&(d=b)}if(b=r-o,!(!m&&b<0)){if(b/=m,m<0){if(b>p)return;b>d&&(d=b)}else if(m>0){if(b<d)return;b<p&&(p=b)}if(b=i-s,!(!_&&b>0)){if(b/=_,_<0){if(b<d)return;b<p&&(p=b)}else if(_>0){if(b>p)return;b>d&&(d=b)}if(b=a-s,!(!_&&b<0)){if(b/=_,_<0){if(b>p)return;b>d&&(d=b)}else if(_>0){if(b<d)return;b<p&&(p=b)}return d>0&&(t[0]=o+d*m,t[1]=s+d*_),p<1&&(e[0]=o+p*m,e[1]=s+p*_),!0}}}}}var Rv=1e9,Nv=-1e9;function NI(t,e,n,i){function r(f,d){return t<=f&&f<=n&&e<=d&&d<=i}function a(f,d,p,m){var _=0,b=0;if(f==null||(_=o(f,p))!==(b=o(d,p))||l(f,d)<0^p>0)do m.point(_===0||_===3?t:n,_>1?i:e);while((_=(_+p+4)%4)!==b);else m.point(d[0],d[1])}function o(f,d){return _e(f[0]-t)<Xt?d>0?0:3:_e(f[0]-n)<Xt?d>0?2:1:_e(f[1]-e)<Xt?d>0?1:0:d>0?3:2}function s(f,d){return l(f.x,d.x)}function l(f,d){var p=o(f,1),m=o(d,1);return p!==m?p-m:p===0?d[1]-f[1]:p===1?f[0]-d[0]:p===2?f[1]-d[1]:d[0]-f[0]}return function(f){var d=f,p=$I(),m,_,b,x,S,T,M,k,$,D,F,N={point:I,lineStart:et,lineEnd:nt,polygonStart:Y,polygonEnd:H};function I(j,U){r(j,U)&&d.point(j,U)}function q(){for(var j=0,U=0,X=_.length;U<X;++U)for(var V=_[U],ot=1,B=V.length,J=V[0],lt,ft,wt=J[0],bt=J[1];ot<B;++ot)lt=wt,ft=bt,J=V[ot],wt=J[0],bt=J[1],ft<=i?bt>i&&(wt-lt)*(i-ft)>(bt-ft)*(t-lt)&&++j:bt<=i&&(wt-lt)*(i-ft)<(bt-ft)*(t-lt)&&--j;return j}function Y(){d=p,m=[],_=[],F=!0}function H(){var j=q(),U=F&&j,X=(m=SP(m)).length;(U||X)&&(f.polygonStart(),U&&(f.lineStart(),a(null,null,1,f),f.lineEnd()),X&&DI(m,s,j,a,f),f.polygonEnd()),d=f,m=_=b=null}function et(){N.point=W,_&&_.push(b=[]),D=!0,$=!1,M=k=NaN}function nt(){m&&(W(x,S),T&&$&&p.rejoin(),m.push(p.result())),N.point=I,$&&d.lineEnd()}function W(j,U){var X=r(j,U);if(_&&b.push([j,U]),D)x=j,S=U,T=X,D=!1,X&&(d.lineStart(),d.point(j,U));else if(X&&$)d.point(j,U);else{var V=[M=Math.max(Nv,Math.min(Rv,M)),k=Math.max(Nv,Math.min(Rv,k))],ot=[j=Math.max(Nv,Math.min(Rv,j)),U=Math.max(Nv,Math.min(Rv,U))];hot(V,ot,t,e,n,i)?($||(d.lineStart(),d.point(V[0],V[1])),d.point(ot[0],ot[1]),X||d.lineEnd(),F=!1):X&&(d.lineStart(),d.point(j,U),F=!1)}M=j,k=U,$=X}return N}}function u6(t,e,n){var i=Yr(t,e-Xt,n).concat(e);return function(r){return i.map(function(a){return[r,a]})}}function l6(t,e,n){var i=Yr(t,e-Xt,n).concat(e);return function(r){return i.map(function(a){return[a,r]})}}function dot(){var t,e,n,i,r,a,o,s,l=10,f=l,d=90,p=360,m,_,b,x,S=2.5;function T(){return{type:"MultiLineString",coordinates:M()}}function M(){return Yr(kv(i/d)*d,n,d).map(b).concat(Yr(kv(s/p)*p,o,p).map(x)).concat(Yr(kv(e/l)*l,t,l).filter(function(k){return _e(k%d)>Xt}).map(m)).concat(Yr(kv(a/f)*f,r,f).filter(function(k){return _e(k%p)>Xt}).map(_))}return T.lines=function(){return M().map(function(k){return{type:"LineString",coordinates:k}})},T.outline=function(){return{type:"Polygon",coordinates:[b(i).concat(x(o).slice(1),b(n).reverse().slice(1),x(s).reverse().slice(1))]}},T.extent=function(k){return arguments.length?T.extentMajor(k).extentMinor(k):T.extentMinor()},T.extentMajor=function(k){return arguments.length?(i=+k[0][0],n=+k[1][0],s=+k[0][1],o=+k[1][1],i>n&&(k=i,i=n,n=k),s>o&&(k=s,s=o,o=k),T.precision(S)):[[i,s],[n,o]]},T.extentMinor=function(k){return arguments.length?(e=+k[0][0],t=+k[1][0],a=+k[0][1],r=+k[1][1],e>t&&(k=e,e=t,t=k),a>r&&(k=a,a=r,r=k),T.precision(S)):[[e,a],[t,r]]},T.step=function(k){return arguments.length?T.stepMajor(k).stepMinor(k):T.stepMinor()},T.stepMajor=function(k){return arguments.length?(d=+k[0],p=+k[1],T):[d,p]},T.stepMinor=function(k){return arguments.length?(l=+k[0],f=+k[1],T):[l,f]},T.precision=function(k){return arguments.length?(S=+k,m=u6(a,r,90),_=l6(e,t,S),b=u6(s,o,90),x=l6(i,n,S),T):S},T.extentMajor([[-180,-90+Xt],[180,90-Xt]]).extentMinor([[-180,-80-Xt],[180,80+Xt]])}const M0=t=>t;var XS=new rr,oC=new rr,LI,zI,sC,uC,ou={point:mi,lineStart:mi,lineEnd:mi,polygonStart:function(){ou.lineStart=pot,ou.lineEnd=mot},polygonEnd:function(){ou.lineStart=ou.lineEnd=ou.point=mi,XS.add(_e(oC)),oC=new rr},result:function(){var t=XS/2;return XS=new rr,t}};function pot(){ou.point=got}function got(t,e){ou.point=FI,LI=sC=t,zI=uC=e}function FI(t,e){oC.add(uC*t-sC*e),sC=t,uC=e}function mot(){FI(LI,zI)}var lp=1/0,wb=lp,k0=-lp,Eb=k0,Sb={point:yot,lineStart:mi,lineEnd:mi,polygonStart:mi,polygonEnd:mi,result:function(){var t=[[lp,wb],[k0,Eb]];return k0=Eb=-(wb=lp=1/0),t}};function yot(t,e){t<lp&&(lp=t),t>k0&&(k0=t),e<wb&&(wb=e),e>Eb&&(Eb=e)}var lC=0,cC=0,qm=0,Ab=0,Tb=0,Dd=0,fC=0,hC=0,jm=0,PI,BI,Ho,Go,va={point:Gf,lineStart:c6,lineEnd:f6,polygonStart:function(){va.lineStart=bot,va.lineEnd=xot},polygonEnd:function(){va.point=Gf,va.lineStart=c6,va.lineEnd=f6},result:function(){var t=jm?[fC/jm,hC/jm]:Dd?[Ab/Dd,Tb/Dd]:qm?[lC/qm,cC/qm]:[NaN,NaN];return lC=cC=qm=Ab=Tb=Dd=fC=hC=jm=0,t}};function Gf(t,e){lC+=t,cC+=e,++qm}function c6(){va.point=vot}function vot(t,e){va.point=_ot,Gf(Ho=t,Go=e)}function _ot(t,e){var n=t-Ho,i=e-Go,r=sr(n*n+i*i);Ab+=r*(Ho+t)/2,Tb+=r*(Go+e)/2,Dd+=r,Gf(Ho=t,Go=e)}function f6(){va.point=Gf}function bot(){va.point=wot}function xot(){UI(PI,BI)}function wot(t,e){va.point=UI,Gf(PI=Ho=t,BI=Go=e)}function UI(t,e){var n=t-Ho,i=e-Go,r=sr(n*n+i*i);Ab+=r*(Ho+t)/2,Tb+=r*(Go+e)/2,Dd+=r,r=Go*t-Ho*e,fC+=r*(Ho+t),hC+=r*(Go+e),jm+=r*3,Gf(Ho=t,Go=e)}function II(t){this._context=t}II.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(t,e){switch(this._point){case 0:{this._context.moveTo(t,e),this._point=1;break}case 1:{this._context.lineTo(t,e);break}default:{this._context.moveTo(t+this._radius,e),this._context.arc(t,e,this._radius,0,or);break}}},result:mi};var dC=new rr,WS,qI,jI,Hm,Gm,O0={point:mi,lineStart:function(){O0.point=Eot},lineEnd:function(){WS&&HI(qI,jI),O0.point=mi},polygonStart:function(){WS=!0},polygonEnd:function(){WS=null},result:function(){var t=+dC;return dC=new rr,t}};function Eot(t,e){O0.point=HI,qI=Hm=t,jI=Gm=e}function HI(t,e){Hm-=t,Gm-=e,dC.add(sr(Hm*Hm+Gm*Gm)),Hm=t,Gm=e}let h6,Cb,d6,p6;class g6{constructor(e){this._append=e==null?GI:Sot(e),this._radius=4.5,this._=""}pointRadius(e){return this._radius=+e,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(e,n){switch(this._point){case 0:{this._append`M${e},${n}`,this._point=1;break}case 1:{this._append`L${e},${n}`;break}default:{if(this._append`M${e},${n}`,this._radius!==d6||this._append!==Cb){const i=this._radius,r=this._;this._="",this._append`m0,${i}a${i},${i} 0 1,1 0,${-2*i}a${i},${i} 0 1,1 0,${2*i}z`,d6=i,Cb=this._append,p6=this._,this._=r}this._+=p6;break}}}result(){const e=this._;return this._="",e.length?e:null}}function GI(t){let e=1;this._+=t[0];for(const n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function Sot(t){const e=Math.floor(t);if(!(e>=0))throw new RangeError(`invalid digits: ${t}`);if(e>15)return GI;if(e!==h6){const n=10**e;h6=e,Cb=function(r){let a=1;this._+=r[0];for(const o=r.length;a<o;++a)this._+=Math.round(arguments[a]*n)/n+r[a]}}return Cb}function ZI(t,e){let n=3,i=4.5,r,a;function o(s){return s&&(typeof i=="function"&&a.pointRadius(+i.apply(this,arguments)),au(s,r(a))),a.result()}return o.area=function(s){return au(s,r(ou)),ou.result()},o.measure=function(s){return au(s,r(O0)),O0.result()},o.bounds=function(s){return au(s,r(Sb)),Sb.result()},o.centroid=function(s){return au(s,r(va)),va.result()},o.projection=function(s){return arguments.length?(r=s==null?(t=null,M0):(t=s).stream,o):t},o.context=function(s){return arguments.length?(a=s==null?(e=null,new g6(n)):new II(e=s),typeof i!="function"&&a.pointRadius(i),o):e},o.pointRadius=function(s){return arguments.length?(i=typeof s=="function"?s:(a.pointRadius(+s),+s),o):i},o.digits=function(s){if(!arguments.length)return n;if(s==null)n=null;else{const l=Math.floor(s);if(!(l>=0))throw new RangeError(`invalid digits: ${s}`);n=l}return e===null&&(a=new g6(n)),o},o.projection(t).digits(n).context(e)}function e2(t){return function(e){var n=new pC;for(var i in t)n[i]=t[i];return n.stream=e,n}}function pC(){}pC.prototype={constructor:pC,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function i3(t,e,n){var i=t.clipExtent&&t.clipExtent();return t.scale(150).translate([0,0]),i!=null&&t.clipExtent(null),au(n,t.stream(Sb)),e(Sb.result()),i!=null&&t.clipExtent(i),t}function n2(t,e,n){return i3(t,function(i){var r=e[1][0]-e[0][0],a=e[1][1]-e[0][1],o=Math.min(r/(i[1][0]-i[0][0]),a/(i[1][1]-i[0][1])),s=+e[0][0]+(r-o*(i[1][0]+i[0][0]))/2,l=+e[0][1]+(a-o*(i[1][1]+i[0][1]))/2;t.scale(150*o).translate([s,l])},n)}function r3(t,e,n){return n2(t,[[0,0],e],n)}function a3(t,e,n){return i3(t,function(i){var r=+e,a=r/(i[1][0]-i[0][0]),o=(r-a*(i[1][0]+i[0][0]))/2,s=-a*i[0][1];t.scale(150*a).translate([o,s])},n)}function o3(t,e,n){return i3(t,function(i){var r=+e,a=r/(i[1][1]-i[0][1]),o=-a*i[0][0],s=(r-a*(i[1][1]+i[0][1]))/2;t.scale(150*a).translate([o,s])},n)}var m6=16,Aot=Yt(30*ce);function y6(t,e){return+e?Cot(t,e):Tot(t)}function Tot(t){return e2({point:function(e,n){e=t(e,n),this.stream.point(e[0],e[1])}})}function Cot(t,e){function n(i,r,a,o,s,l,f,d,p,m,_,b,x,S){var T=f-i,M=d-r,k=T*T+M*M;if(k>4*e&&x--){var $=o+m,D=s+_,F=l+b,N=sr($*$+D*D+F*F),I=Ar(F/=N),q=_e(_e(F)-1)<Xt||_e(a-p)<Xt?(a+p)/2:ka(D,$),Y=t(q,I),H=Y[0],et=Y[1],nt=H-i,W=et-r,j=M*nt-T*W;(j*j/k>e||_e((T*nt+M*W)/k-.5)>.3||o*m+s*_+l*b<Aot)&&(n(i,r,a,o,s,l,H,et,q,$/=N,D/=N,F,x,S),S.point(H,et),n(H,et,q,$,D,F,f,d,p,m,_,b,x,S))}}return function(i){var r,a,o,s,l,f,d,p,m,_,b,x,S={point:T,lineStart:M,lineEnd:$,polygonStart:function(){i.polygonStart(),S.lineStart=D},polygonEnd:function(){i.polygonEnd(),S.lineStart=M}};function T(I,q){I=t(I,q),i.point(I[0],I[1])}function M(){p=NaN,S.point=k,i.lineStart()}function k(I,q){var Y=Hf([I,q]),H=t(I,q);n(p,m,d,_,b,x,p=H[0],m=H[1],d=I,_=Y[0],b=Y[1],x=Y[2],m6,i),i.point(p,m)}function $(){S.point=T,i.lineEnd()}function D(){M(),S.point=F,S.lineEnd=N}function F(I,q){k(r=I,q),a=p,o=m,s=_,l=b,f=x,S.point=k}function N(){n(p,m,d,_,b,x,a,o,r,s,l,f,m6,i),S.lineEnd=$,$()}return S}}var Mot=e2({point:function(t,e){this.stream.point(t*ce,e*ce)}});function kot(t){return e2({point:function(e,n){var i=t(e,n);return this.stream.point(i[0],i[1])}})}function Oot(t,e,n,i,r){function a(o,s){return o*=i,s*=r,[e+t*o,n-t*s]}return a.invert=function(o,s){return[(o-e)/t*i,(n-s)/t*r]},a}function v6(t,e,n,i,r,a){if(!a)return Oot(t,e,n,i,r);var o=Yt(a),s=Zt(a),l=o*t,f=s*t,d=o/t,p=s/t,m=(s*n-o*e)/t,_=(s*e+o*n)/t;function b(x,S){return x*=i,S*=r,[l*x-f*S+e,n-f*x-l*S]}return b.invert=function(x,S){return[i*(d*x-p*S+m),r*(_-p*x-d*S)]},b}function ds(t){return YI(function(){return t})()}function YI(t){var e,n=150,i=480,r=250,a=0,o=0,s=0,l=0,f=0,d,p=0,m=1,_=1,b=null,x=s6,S=null,T,M,k,$=M0,D=.5,F,N,I,q,Y;function H(j){return I(j[0]*ce,j[1]*ce)}function et(j){return j=I.invert(j[0],j[1]),j&&[j[0]*An,j[1]*An]}H.stream=function(j){return q&&Y===j?q:q=Mot(kot(d)(x(F($(Y=j)))))},H.preclip=function(j){return arguments.length?(x=j,b=void 0,W()):x},H.postclip=function(j){return arguments.length?($=j,S=T=M=k=null,W()):$},H.clipAngle=function(j){return arguments.length?(x=+j?fot(b=j*ce):(b=null,s6),W()):b*An},H.clipExtent=function(j){return arguments.length?($=j==null?(S=T=M=k=null,M0):NI(S=+j[0][0],T=+j[0][1],M=+j[1][0],k=+j[1][1]),W()):S==null?null:[[S,T],[M,k]]},H.scale=function(j){return arguments.length?(n=+j,nt()):n},H.translate=function(j){return arguments.length?(i=+j[0],r=+j[1],nt()):[i,r]},H.center=function(j){return arguments.length?(a=j[0]%360*ce,o=j[1]%360*ce,nt()):[a*An,o*An]},H.rotate=function(j){return arguments.length?(s=j[0]%360*ce,l=j[1]%360*ce,f=j.length>2?j[2]%360*ce:0,nt()):[s*An,l*An,f*An]},H.angle=function(j){return arguments.length?(p=j%360*ce,nt()):p*An},H.reflectX=function(j){return arguments.length?(m=j?-1:1,nt()):m<0},H.reflectY=function(j){return arguments.length?(_=j?-1:1,nt()):_<0},H.precision=function(j){return arguments.length?(F=y6(N,D=j*j),W()):sr(D)},H.fitExtent=function(j,U){return n2(H,j,U)},H.fitSize=function(j,U){return r3(H,j,U)},H.fitWidth=function(j,U){return a3(H,j,U)},H.fitHeight=function(j,U){return o3(H,j,U)};function nt(){var j=v6(n,0,0,m,_,p).apply(null,e(a,o)),U=v6(n,i-j[0],r-j[1],m,_,p);return d=OI(s,l,f),N=rC(e,U),I=rC(d,N),F=y6(N,D),W()}function W(){return q=Y=null,H}return function(){return e=t.apply(this,arguments),H.invert=e.invert&&et,nt()}}function s3(t){var e=0,n=de/3,i=YI(t),r=i(e,n);return r.parallels=function(a){return arguments.length?i(e=a[0]*ce,n=a[1]*ce):[e*An,n*An]},r}function $ot(t){var e=Yt(t);function n(i,r){return[i*e,Zt(r)/e]}return n.invert=function(i,r){return[i/e,Ar(r*e)]},n}function Dot(t,e){var n=Zt(t),i=(n+Zt(e))/2;if(_e(i)<Xt)return $ot(t);var r=1+n*(2*i-n),a=sr(r)/i;function o(s,l){var f=sr(r-2*i*Zt(l))/i;return[f*Zt(s*=i),a-f*Yt(s)]}return o.invert=function(s,l){var f=a-l,d=ka(s,_e(f))*ba(f);return f*i<0&&(d-=de*ba(s)*ba(f)),[d/i,Ar((r-(s*s+f*f)*i*i)/(2*i))]},o}function Mb(){return s3(Dot).scale(155.424).center([0,33.6442])}function XI(){return Mb().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function Rot(t){var e=t.length;return{point:function(n,i){for(var r=-1;++r<e;)t[r].point(n,i)},sphere:function(){for(var n=-1;++n<e;)t[n].sphere()},lineStart:function(){for(var n=-1;++n<e;)t[n].lineStart()},lineEnd:function(){for(var n=-1;++n<e;)t[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<e;)t[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<e;)t[n].polygonEnd()}}}function Not(){var t,e,n=XI(),i,r=Mb().rotate([154,0]).center([-2,58.5]).parallels([55,65]),a,o=Mb().rotate([157,0]).center([-3,19.9]).parallels([8,18]),s,l,f={point:function(m,_){l=[m,_]}};function d(m){var _=m[0],b=m[1];return l=null,i.point(_,b),l||(a.point(_,b),l)||(s.point(_,b),l)}d.invert=function(m){var _=n.scale(),b=n.translate(),x=(m[0]-b[0])/_,S=(m[1]-b[1])/_;return(S>=.12&&S<.234&&x>=-.425&&x<-.214?r:S>=.166&&S<.234&&x>=-.214&&x<-.115?o:n).invert(m)},d.stream=function(m){return t&&e===m?t:t=Rot([n.stream(e=m),r.stream(m),o.stream(m)])},d.precision=function(m){return arguments.length?(n.precision(m),r.precision(m),o.precision(m),p()):n.precision()},d.scale=function(m){return arguments.length?(n.scale(m),r.scale(m*.35),o.scale(m),d.translate(n.translate())):n.scale()},d.translate=function(m){if(!arguments.length)return n.translate();var _=n.scale(),b=+m[0],x=+m[1];return i=n.translate(m).clipExtent([[b-.455*_,x-.238*_],[b+.455*_,x+.238*_]]).stream(f),a=r.translate([b-.307*_,x+.201*_]).clipExtent([[b-.425*_+Xt,x+.12*_+Xt],[b-.214*_-Xt,x+.234*_-Xt]]).stream(f),s=o.translate([b-.205*_,x+.212*_]).clipExtent([[b-.214*_+Xt,x+.166*_+Xt],[b-.115*_-Xt,x+.234*_-Xt]]).stream(f),p()},d.fitExtent=function(m,_){return n2(d,m,_)},d.fitSize=function(m,_){return r3(d,m,_)},d.fitWidth=function(m,_){return a3(d,m,_)},d.fitHeight=function(m,_){return o3(d,m,_)};function p(){return t=e=null,d}return d.scale(1070)}function WI(t){return function(e,n){var i=Yt(e),r=Yt(n),a=t(i*r);return a===1/0?[2,0]:[a*r*Zt(e),a*Zt(n)]}}function my(t){return function(e,n){var i=sr(e*e+n*n),r=t(i),a=Zt(r),o=Yt(r);return[ka(e*a,i*o),Ar(i&&n*a/i)]}}var VI=WI(function(t){return sr(2/(1+t))});VI.invert=my(function(t){return 2*Ar(t/2)});function Lot(){return ds(VI).scale(124.75).clipAngle(180-.001)}var QI=WI(function(t){return(t=_I(t))&&t/Zt(t)});QI.invert=my(function(t){return t});function zot(){return ds(QI).scale(79.4188).clipAngle(180-.001)}function i2(t,e){return[t,lb(e3((bn+e)/2))]}i2.invert=function(t,e){return[t,2*qp(vI(e))-bn]};function Fot(){return KI(i2).scale(961/or)}function KI(t){var e=ds(t),n=e.center,i=e.scale,r=e.translate,a=e.clipExtent,o=null,s,l,f;e.scale=function(p){return arguments.length?(i(p),d()):i()},e.translate=function(p){return arguments.length?(r(p),d()):r()},e.center=function(p){return arguments.length?(n(p),d()):n()},e.clipExtent=function(p){return arguments.length?(p==null?o=s=l=f=null:(o=+p[0][0],s=+p[0][1],l=+p[1][0],f=+p[1][1]),d()):o==null?null:[[o,s],[l,f]]};function d(){var p=de*i(),m=e(iot(e.rotate()).invert([0,0]));return a(o==null?[[m[0]-p,m[1]-p],[m[0]+p,m[1]+p]]:t===i2?[[Math.max(m[0]-p,o),s],[Math.min(m[0]+p,l),f]]:[[o,Math.max(m[1]-p,s)],[l,Math.min(m[1]+p,f)]])}return d()}function Lv(t){return e3((bn+t)/2)}function Pot(t,e){var n=Yt(t),i=t===e?Zt(t):lb(n/Yt(e))/lb(Lv(e)/Lv(t)),r=n*GS(Lv(t),i)/i;if(!i)return i2;function a(o,s){r>0?s<-bn+Xt&&(s=-bn+Xt):s>bn-Xt&&(s=bn-Xt);var l=r/GS(Lv(s),i);return[l*Zt(i*o),r-l*Yt(i*o)]}return a.invert=function(o,s){var l=r-s,f=ba(i)*sr(o*o+l*l),d=ka(o,_e(l))*ba(l);return l*i<0&&(d-=de*ba(o)*ba(l)),[d/i,2*qp(GS(r/f,1/i))-bn]},a}function Bot(){return s3(Pot).scale(109.5).parallels([30,30])}function kb(t,e){return[t,e]}kb.invert=kb;function Uot(){return ds(kb).scale(152.63)}function Iot(t,e){var n=Yt(t),i=t===e?Zt(t):(n-Yt(e))/(e-t),r=n/i+t;if(_e(i)<Xt)return kb;function a(o,s){var l=r-s,f=i*o;return[l*Zt(f),r-l*Yt(f)]}return a.invert=function(o,s){var l=r-s,f=ka(o,_e(l))*ba(l);return l*i<0&&(f-=de*ba(o)*ba(l)),[f/i,r-ba(i)*sr(o*o+l*l)]},a}function qot(){return s3(Iot).scale(131.154).center([0,13.9389])}var o0=1.340264,s0=-.081106,u0=893e-6,l0=.003796,Ob=sr(3)/2,jot=12;function JI(t,e){var n=Ar(Ob*Zt(e)),i=n*n,r=i*i*i;return[t*Yt(n)/(Ob*(o0+3*s0*i+r*(7*u0+9*l0*i))),n*(o0+s0*i+r*(u0+l0*i))]}JI.invert=function(t,e){for(var n=e,i=n*n,r=i*i*i,a=0,o,s,l;a<jot&&(s=n*(o0+s0*i+r*(u0+l0*i))-e,l=o0+3*s0*i+r*(7*u0+9*l0*i),n-=o=s/l,i=n*n,r=i*i*i,!(_e(o)<XT));++a);return[Ob*t*(o0+3*s0*i+r*(7*u0+9*l0*i))/Yt(n),Ar(Zt(n)/Ob)]};function Hot(){return ds(JI).scale(177.158)}function tq(t,e){var n=Yt(e),i=Yt(t)*n;return[n*Zt(t)/i,Zt(e)/i]}tq.invert=my(qp);function Got(){return ds(tq).scale(144.049).clipAngle(60)}function Zot(){var t=1,e=0,n=0,i=1,r=1,a=0,o,s,l=null,f,d,p,m=1,_=1,b=e2({point:function($,D){var F=k([$,D]);this.stream.point(F[0],F[1])}}),x=M0,S,T;function M(){return m=t*i,_=t*r,S=T=null,k}function k($){var D=$[0]*m,F=$[1]*_;if(a){var N=F*o-D*s;D=D*o+F*s,F=N}return[D+e,F+n]}return k.invert=function($){var D=$[0]-e,F=$[1]-n;if(a){var N=F*o+D*s;D=D*o-F*s,F=N}return[D/m,F/_]},k.stream=function($){return S&&T===$?S:S=b(x(T=$))},k.postclip=function($){return arguments.length?(x=$,l=f=d=p=null,M()):x},k.clipExtent=function($){return arguments.length?(x=$==null?(l=f=d=p=null,M0):NI(l=+$[0][0],f=+$[0][1],d=+$[1][0],p=+$[1][1]),M()):l==null?null:[[l,f],[d,p]]},k.scale=function($){return arguments.length?(t=+$,M()):t},k.translate=function($){return arguments.length?(e=+$[0],n=+$[1],M()):[e,n]},k.angle=function($){return arguments.length?(a=$%360*ce,s=Zt(a),o=Yt(a),M()):a*An},k.reflectX=function($){return arguments.length?(i=$?-1:1,M()):i<0},k.reflectY=function($){return arguments.length?(r=$?-1:1,M()):r<0},k.fitExtent=function($,D){return n2(k,$,D)},k.fitSize=function($,D){return r3(k,$,D)},k.fitWidth=function($,D){return a3(k,$,D)},k.fitHeight=function($,D){return o3(k,$,D)},k}function eq(t,e){var n=e*e,i=n*n;return[t*(.8707-.131979*n+i*(-.013791+i*(.003971*n-.001529*i))),e*(1.007226+n*(.015085+i*(-.044475+.028874*n-.005916*i)))]}eq.invert=function(t,e){var n=e,i=25,r;do{var a=n*n,o=a*a;n-=r=(n*(1.007226+a*(.015085+o*(-.044475+.028874*a-.005916*o)))-e)/(1.007226+a*(.015085*3+o*(-.044475*7+.028874*9*a-.005916*11*o)))}while(_e(r)>Xt&&--i>0);return[t/(.8707+(a=n*n)*(-.131979+a*(-.013791+a*a*a*(.003971-.001529*a)))),n]};function Yot(){return ds(eq).scale(175.295)}function nq(t,e){return[Yt(e)*Zt(t),Zt(e)]}nq.invert=my(Ar);function Xot(){return ds(nq).scale(249.5).clipAngle(90+Xt)}function iq(t,e){var n=Yt(e),i=1+Yt(t)*n;return[n*Zt(t)/i,Zt(e)/i]}iq.invert=my(function(t){return 2*qp(t)});function Wot(){return ds(iq).scale(250).clipAngle(142)}function rq(t,e){return[lb(e3((bn+e)/2)),-t]}rq.invert=function(t,e){return[-e,2*qp(vI(t))-bn]};function Vot(){var t=KI(rq),e=t.center,n=t.rotate;return t.center=function(i){return arguments.length?e([-i[1],i[0]]):(i=e(),[i[1],-i[0]])},t.rotate=function(i){return arguments.length?n([i[0],i[1],i.length>2?i[2]+90:90]):(i=n(),[i[0],i[1],i[2]-90])},n([0,0,90]).scale(159.155)}var Qot=Math.abs,gC=Math.cos,$b=Math.sin,Kot=1e-6,aq=Math.PI,mC=aq/2,_6=Jot(2);function b6(t){return t>1?mC:t<-1?-mC:Math.asin(t)}function Jot(t){return t>0?Math.sqrt(t):0}function tst(t,e){var n=t*$b(e),i=30,r;do e-=r=(e+$b(e)-n)/(1+gC(e));while(Qot(r)>Kot&&--i>0);return e/2}function est(t,e,n){function i(r,a){return[t*r*gC(a=tst(n,a)),e*$b(a)]}return i.invert=function(r,a){return a=b6(a/e),[r/(t*gC(a)),b6((2*a+$b(2*a))/n)]},i}var nst=est(_6/mC,_6,aq);function ist(){return ds(nst).scale(169.529)}const rst=ZI(),yC=["clipAngle","clipExtent","scale","translate","center","rotate","parallels","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];function ast(t,e){return function n(){const i=e();return i.type=t,i.path=ZI().projection(i),i.copy=i.copy||function(){const r=n();return yC.forEach(a=>{i[a]&&r[a](i[a]())}),r.path.pointRadius(i.path.pointRadius()),r},xB(i)}}function u3(t,e){if(!t||typeof t!="string")throw new Error("Projection type must be a name string.");return t=t.toLowerCase(),arguments.length>1?(Db[t]=ast(t,e),this):Db[t]||null}function oq(t){return t&&t.path||rst}const Db={albers:XI,albersusa:Not,azimuthalequalarea:Lot,azimuthalequidistant:zot,conicconformal:Bot,conicequalarea:Mb,conicequidistant:qot,equalEarth:Hot,equirectangular:Uot,gnomonic:Got,identity:Zot,mercator:Fot,mollweide:ist,naturalEarth1:Yot,orthographic:Xot,stereographic:Wot,transversemercator:Vot};for(const t in Db)u3(t,Db[t]);function ost(){}const Js=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function sq(){var t=1,e=1,n=s;function i(l,f){return f.map(d=>r(l,d))}function r(l,f){var d=[],p=[];return a(l,f,m=>{n(m,l,f),sst(m)>0?d.push([m]):p.push(m)}),p.forEach(m=>{for(var _=0,b=d.length,x;_<b;++_)if(ust((x=d[_])[0],m)!==-1){x.push(m);return}}),{type:"MultiPolygon",value:f,coordinates:d}}function a(l,f,d){var p=[],m=[],_,b,x,S,T,M;for(_=b=-1,S=l[0]>=f,Js[S<<1].forEach(k);++_<t-1;)x=S,S=l[_+1]>=f,Js[x|S<<1].forEach(k);for(Js[S<<0].forEach(k);++b<e-1;){for(_=-1,S=l[b*t+t]>=f,T=l[b*t]>=f,Js[S<<1|T<<2].forEach(k);++_<t-1;)x=S,S=l[b*t+t+_+1]>=f,M=T,T=l[b*t+_+1]>=f,Js[x|S<<1|T<<2|M<<3].forEach(k);Js[S|T<<3].forEach(k)}for(_=-1,T=l[b*t]>=f,Js[T<<2].forEach(k);++_<t-1;)M=T,T=l[b*t+_+1]>=f,Js[T<<2|M<<3].forEach(k);Js[T<<3].forEach(k);function k($){var D=[$[0][0]+_,$[0][1]+b],F=[$[1][0]+_,$[1][1]+b],N=o(D),I=o(F),q,Y;(q=m[N])?(Y=p[I])?(delete m[q.end],delete p[Y.start],q===Y?(q.ring.push(F),d(q.ring)):p[q.start]=m[Y.end]={start:q.start,end:Y.end,ring:q.ring.concat(Y.ring)}):(delete m[q.end],q.ring.push(F),m[q.end=I]=q):(q=p[I])?(Y=m[N])?(delete p[q.start],delete m[Y.end],q===Y?(q.ring.push(F),d(q.ring)):p[Y.start]=m[q.end]={start:Y.start,end:q.end,ring:Y.ring.concat(q.ring)}):(delete p[q.start],q.ring.unshift(D),p[q.start=N]=q):p[N]=m[I]={start:N,end:I,ring:[D,F]}}}function o(l){return l[0]*2+l[1]*(t+1)*4}function s(l,f,d){l.forEach(p=>{var m=p[0],_=p[1],b=m|0,x=_|0,S,T=f[x*t+b];m>0&&m<t&&b===m&&(S=f[x*t+b-1],p[0]=m+(d-S)/(T-S)-.5),_>0&&_<e&&x===_&&(S=f[(x-1)*t+b],p[1]=_+(d-S)/(T-S)-.5)})}return i.contour=r,i.size=function(l){if(!arguments.length)return[t,e];var f=Math.floor(l[0]),d=Math.floor(l[1]);return f>=0&&d>=0||dt("invalid size"),t=f,e=d,i},i.smooth=function(l){return arguments.length?(n=l?s:ost,i):n===s},i}function sst(t){for(var e=0,n=t.length,i=t[n-1][1]*t[0][0]-t[n-1][0]*t[0][1];++e<n;)i+=t[e-1][1]*t[e][0]-t[e-1][0]*t[e][1];return i}function ust(t,e){for(var n=-1,i=e.length,r;++n<i;)if(r=lst(t,e[n]))return r;return 0}function lst(t,e){for(var n=e[0],i=e[1],r=-1,a=0,o=t.length,s=o-1;a<o;s=a++){var l=t[a],f=l[0],d=l[1],p=t[s],m=p[0],_=p[1];if(cst(l,p,e))return 0;d>i!=_>i&&n<(m-f)*(i-d)/(_-d)+f&&(r=-r)}return r}function cst(t,e,n){var i;return fst(t,e,n)&&hst(t[i=+(t[0]===e[0])],n[i],e[i])}function fst(t,e,n){return(e[0]-t[0])*(n[1]-t[1])===(n[0]-t[0])*(e[1]-t[1])}function hst(t,e,n){return t<=e&&e<=n||n<=e&&e<=t}function uq(t,e,n){return function(i){var r=ts(i),a=n?Math.min(r[0],0):r[0],o=r[1],s=o-a,l=e?ec(a,o,t):s/(t+1);return Yr(a+l,o,l)}}function l3(t){ct.call(this,null,t)}l3.Definition={type:"Isocontour",metadata:{generates:!0},params:[{name:"field",type:"field"},{name:"thresholds",type:"number",array:!0},{name:"levels",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"zero",type:"boolean",default:!0},{name:"smooth",type:"boolean",default:!0},{name:"scale",type:"number",expr:!0},{name:"translate",type:"number",array:!0,expr:!0},{name:"as",type:"string",null:!0,default:"contour"}]};kt(l3,ct,{transform(t,e){if(this.value&&!e.changed()&&!t.modified())return e.StopPropagation;var n=e.fork(e.NO_SOURCE|e.NO_FIELDS),i=e.materialize(e.SOURCE).source,r=t.field||Bi,a=sq().smooth(t.smooth!==!1),o=t.thresholds||dst(i,r,t),s=t.as===null?null:t.as||"contour",l=[];return i.forEach(f=>{const d=r(f),p=a.size([d.width,d.height])(d.values,gt(o)?o:o(d.values));pst(p,d,f,t),p.forEach(m=>{l.push(bx(f,De(s!=null?{[s]:m}:m)))})}),this.value&&(n.rem=this.value),this.value=n.source=n.add=l,n}});function dst(t,e,n){const i=uq(n.levels||10,n.nice,n.zero!==!1);return n.resolve!=="shared"?i:i(t.map(r=>kf(e(r).values)))}function pst(t,e,n,i){let r=i.scale||e.scale,a=i.translate||e.translate;if(se(r)&&(r=r(n,i)),se(a)&&(a=a(n,i)),(r===1||r==null)&&!a)return;const o=(Me(r)?r:r[0])||1,s=(Me(r)?r:r[1])||1,l=a&&a[0]||0,f=a&&a[1]||0;t.forEach(lq(e,o,s,l,f))}function lq(t,e,n,i,r){const a=t.x1||0,o=t.y1||0,s=e*n<0;function l(p){p.forEach(f)}function f(p){s&&p.reverse(),p.forEach(d)}function d(p){p[0]=(p[0]-a)*e+i,p[1]=(p[1]-o)*n+r}return function(p){return p.coordinates.forEach(l),p}}function x6(t,e,n){const i=t>=0?t:ek(e,n);return Math.round((Math.sqrt(4*i*i+1)-1)/2)}function VS(t){return se(t)?t:Ui(+t)}function cq(){var t=l=>l[0],e=l=>l[1],n=Mp,i=[-1,-1],r=960,a=500,o=2;function s(l,f){const d=x6(i[0],l,t)>>o,p=x6(i[1],l,e)>>o,m=d?d+2:0,_=p?p+2:0,b=2*m+(r>>o),x=2*_+(a>>o),S=new Float32Array(b*x),T=new Float32Array(b*x);let M=S;l.forEach($=>{const D=m+(+t($)>>o),F=_+(+e($)>>o);D>=0&&D<b&&F>=0&&F<x&&(S[D+F*b]+=+n($))}),d>0&&p>0?(vd(b,x,S,T,d),_d(b,x,T,S,p),vd(b,x,S,T,d),_d(b,x,T,S,p),vd(b,x,S,T,d),_d(b,x,T,S,p)):d>0?(vd(b,x,S,T,d),vd(b,x,T,S,d),vd(b,x,S,T,d),M=T):p>0&&(_d(b,x,S,T,p),_d(b,x,T,S,p),_d(b,x,S,T,p),M=T);const k=f?Math.pow(2,-2*o):1/AP(M);for(let $=0,D=b*x;$<D;++$)M[$]*=k;return{values:M,scale:1<<o,width:b,height:x,x1:m,y1:_,x2:m+(r>>o),y2:_+(a>>o)}}return s.x=function(l){return arguments.length?(t=VS(l),s):t},s.y=function(l){return arguments.length?(e=VS(l),s):e},s.weight=function(l){return arguments.length?(n=VS(l),s):n},s.size=function(l){if(!arguments.length)return[r,a];var f=+l[0],d=+l[1];return f>=0&&d>=0||dt("invalid size"),r=f,a=d,s},s.cellSize=function(l){return arguments.length?((l=+l)>=1||dt("invalid cell size"),o=Math.floor(Math.log(l)/Math.LN2),s):1<<o},s.bandwidth=function(l){return arguments.length?(l=Nt(l),l.length===1&&(l=[+l[0],+l[0]]),l.length!==2&&dt("invalid bandwidth"),i=l,s):i},s}function vd(t,e,n,i,r){const a=(r<<1)+1;for(let o=0;o<e;++o)for(let s=0,l=0;s<t+r;++s)s<t&&(l+=n[s+o*t]),s>=r&&(s>=a&&(l-=n[s-a+o*t]),i[s-r+o*t]=l/Math.min(s+1,t-1+a-s,a))}function _d(t,e,n,i,r){const a=(r<<1)+1;for(let o=0;o<t;++o)for(let s=0,l=0;s<e+r;++s)s<e&&(l+=n[o+s*t]),s>=r&&(s>=a&&(l-=n[o+(s-a)*t]),i[o+(s-r)*t]=l/Math.min(s+1,e-1+a-s,a))}function c3(t){ct.call(this,null,t)}c3.Definition={type:"KDE2D",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"weight",type:"field"},{name:"groupby",type:"field",array:!0},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number",array:!0,length:2},{name:"counts",type:"boolean",default:!1},{name:"as",type:"string",default:"grid"}]};const gst=["x","y","weight","size","cellSize","bandwidth"];function fq(t,e){return gst.forEach(n=>e[n]!=null?t[n](e[n]):0),t}kt(c3,ct,{transform(t,e){if(this.value&&!e.changed()&&!t.modified())return e.StopPropagation;var n=e.fork(e.NO_SOURCE|e.NO_FIELDS),i=e.materialize(e.SOURCE).source,r=mst(i,t.groupby),a=(t.groupby||[]).map(xn),o=fq(cq(),t),s=t.as||"grid",l=[];function f(d,p){for(let m=0;m<a.length;++m)d[a[m]]=p[m];return d}return l=r.map(d=>De(f({[s]:o(d,t.counts)},d.dims))),this.value&&(n.rem=this.value),this.value=n.source=n.add=l,n}});function mst(t,e){var n=[],i=d=>d(s),r,a,o,s,l,f;if(e==null)n.push(t);else for(r={},a=0,o=t.length;a<o;++a)s=t[a],l=e.map(i),f=r[l],f||(r[l]=f=[],f.dims=l,n.push(f)),f.push(s);return n}function f3(t){ct.call(this,null,t)}f3.Definition={type:"Contour",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"values",type:"number",array:!0},{name:"x",type:"field"},{name:"y",type:"field"},{name:"weight",type:"field"},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number"},{name:"count",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"thresholds",type:"number",array:!0},{name:"smooth",type:"boolean",default:!0}]};kt(f3,ct,{transform(t,e){if(this.value&&!e.changed()&&!t.modified())return e.StopPropagation;var n=e.fork(e.NO_SOURCE|e.NO_FIELDS),i=sq().smooth(t.smooth!==!1),r=t.values,a=t.thresholds||uq(t.count||10,t.nice,!!r),o=t.size,s,l;return r||(r=e.materialize(e.SOURCE).source,s=fq(cq(),t)(r,!0),l=lq(s,s.scale||1,s.scale||1,0,0),o=[s.width,s.height],r=s.values),a=gt(a)?a:a(r),r=i.size(o)(r,a),l&&r.forEach(l),this.value&&(n.rem=this.value),this.value=n.source=n.add=(r||[]).map(De),n}});const vC="Feature",h3="FeatureCollection",yst="MultiPoint";function d3(t){ct.call(this,null,t)}d3.Definition={type:"GeoJSON",metadata:{},params:[{name:"fields",type:"field",array:!0,length:2},{name:"geojson",type:"field"}]};kt(d3,ct,{transform(t,e){var n=this._features,i=this._points,r=t.fields,a=r&&r[0],o=r&&r[1],s=t.geojson||!r&&Bi,l=e.ADD,f;f=t.modified()||e.changed(e.REM)||e.modified(Li(s))||a&&e.modified(Li(a))||o&&e.modified(Li(o)),(!this.value||f)&&(l=e.SOURCE,this._features=n=[],this._points=i=[]),s&&e.visit(l,d=>n.push(s(d))),a&&o&&(e.visit(l,d=>{var p=a(d),m=o(d);p!=null&&m!=null&&(p=+p)===p&&(m=+m)===m&&i.push([p,m])}),n=n.concat({type:vC,geometry:{type:yst,coordinates:i}})),this.value={type:h3,features:n}}});function p3(t){ct.call(this,null,t)}p3.Definition={type:"GeoPath",metadata:{modifies:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"path"}]};kt(p3,ct,{transform(t,e){var n=e.fork(e.ALL),i=this.value,r=t.field||Bi,a=t.as||"path",o=n.SOURCE;!i||t.modified()?(this.value=i=oq(t.projection),n.materialize().reflow()):o=r===Bi||e.modified(r.fields)?n.ADD_MOD:n.ADD;const s=vst(i,t.pointRadius);return n.visit(o,l=>l[a]=i(r(l))),i.pointRadius(s),n.modifies(a)}});function vst(t,e){const n=t.pointRadius();return t.context(null),e!=null&&t.pointRadius(e),n}function g3(t){ct.call(this,null,t)}g3.Definition={type:"GeoPoint",metadata:{modifies:!0},params:[{name:"projection",type:"projection",required:!0},{name:"fields",type:"field",array:!0,required:!0,length:2},{name:"as",type:"string",array:!0,length:2,default:["x","y"]}]};kt(g3,ct,{transform(t,e){var n=t.projection,i=t.fields[0],r=t.fields[1],a=t.as||["x","y"],o=a[0],s=a[1],l;function f(d){const p=n([i(d),r(d)]);p?(d[o]=p[0],d[s]=p[1]):(d[o]=void 0,d[s]=void 0)}return t.modified()?e=e.materialize().reflow(!0).visit(e.SOURCE,f):(l=e.modified(i.fields)||e.modified(r.fields),e.visit(l?e.ADD_MOD:e.ADD,f)),e.modifies(a)}});function m3(t){ct.call(this,null,t)}m3.Definition={type:"GeoShape",metadata:{modifies:!0,nomod:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field",default:"datum"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"shape"}]};kt(m3,ct,{transform(t,e){var n=e.fork(e.ALL),i=this.value,r=t.as||"shape",a=n.ADD;return(!i||t.modified())&&(this.value=i=_st(oq(t.projection),t.field||Aa("datum"),t.pointRadius),n.materialize().reflow(),a=n.SOURCE),n.visit(a,o=>o[r]=i),n.modifies(r)}});function _st(t,e,n){const i=n==null?r=>t(e(r)):r=>{var a=t.pointRadius(),o=t.pointRadius(n)(e(r));return t.pointRadius(a),o};return i.context=r=>(t.context(r),i),i}function y3(t){ct.call(this,[],t),this.generator=dot()}y3.Definition={type:"Graticule",metadata:{changes:!0,generates:!0},params:[{name:"extent",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMajor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMinor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"step",type:"number",array:!0,length:2},{name:"stepMajor",type:"number",array:!0,length:2,default:[90,360]},{name:"stepMinor",type:"number",array:!0,length:2,default:[10,10]},{name:"precision",type:"number",default:2.5}]};kt(y3,ct,{transform(t,e){var n=this.value,i=this.generator,r;if(!n.length||t.modified())for(const a in t)se(i[a])&&i[a](t[a]);return r=i(),n.length?e.mod.push(b9(n[0],r)):e.add.push(De(r)),n[0]=r,e}});function v3(t){ct.call(this,null,t)}v3.Definition={type:"heatmap",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"color",type:"string",expr:!0},{name:"opacity",type:"number",expr:!0},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"as",type:"string",default:"image"}]};kt(v3,ct,{transform(t,e){if(!e.changed()&&!t.modified())return e.StopPropagation;var n=e.materialize(e.SOURCE).source,i=t.resolve==="shared",r=t.field||Bi,a=xst(t.opacity,t),o=bst(t.color,t),s=t.as||"image",l={$x:0,$y:0,$value:0,$max:i?kf(n.map(f=>kf(r(f).values))):0};return n.forEach(f=>{const d=r(f),p=oe({},f,l);i||(p.$max=kf(d.values||[])),f[s]=wst(d,p,o.dep?o:Ui(o(p)),a.dep?a:Ui(a(p)))}),e.reflow(!0).modifies(s)}});function bst(t,e){let n;return se(t)?(n=i=>rc(t(i,e)),n.dep=hq(t)):n=Ui(rc(t||"#888")),n}function xst(t,e){let n;return se(t)?(n=i=>t(i,e),n.dep=hq(t)):t?n=Ui(t):(n=i=>i.$value/i.$max||0,n.dep=!0),n}function hq(t){if(!se(t))return!1;const e=oo(Li(t));return e.$x||e.$y||e.$value||e.$max}function wst(t,e,n,i){const r=t.width,a=t.height,o=t.x1||0,s=t.y1||0,l=t.x2||r,f=t.y2||a,d=t.values,p=d?S=>d[S]:Pl,m=Ql(l-o,f-s),_=m.getContext("2d"),b=_.getImageData(0,0,l-o,f-s),x=b.data;for(let S=s,T=0;S<f;++S){e.$y=S-s;for(let M=o,k=S*r;M<l;++M,T+=4){e.$x=M-o,e.$value=p(M+k);const $=n(e);x[T+0]=$.r,x[T+1]=$.g,x[T+2]=$.b,x[T+3]=~~(255*i(e))}}return _.putImageData(b,0,0),m}function dq(t){ct.call(this,null,t),this.modified(!0)}kt(dq,ct,{transform(t,e){let n=this.value;return!n||t.modified("type")?(this.value=n=Sst(t.type),yC.forEach(i=>{t[i]!=null&&w6(n,i,t[i])})):yC.forEach(i=>{t.modified(i)&&w6(n,i,t[i])}),t.pointRadius!=null&&n.path.pointRadius(t.pointRadius),t.fit&&Est(n,t),e.fork(e.NO_SOURCE|e.NO_FIELDS)}});function Est(t,e){const n=Ast(e.fit);e.extent?t.fitExtent(e.extent,n):e.size&&t.fitSize(e.size,n)}function Sst(t){const e=u3((t||"mercator").toLowerCase());return e||dt("Unrecognized projection type: "+t),e()}function w6(t,e,n){se(t[e])&&t[e](n)}function Ast(t){return t=Nt(t),t.length===1?t[0]:{type:h3,features:t.reduce((e,n)=>e.concat(Tst(n)),[])}}function Tst(t){return t.type===h3?t.features:Nt(t).filter(e=>e!=null).map(e=>e.type===vC?e:{type:vC,geometry:e})}const Cst=Object.freeze(Object.defineProperty({__proto__:null,contour:f3,geojson:d3,geopath:p3,geopoint:g3,geoshape:m3,graticule:y3,heatmap:v3,isocontour:l3,kde2d:c3,projection:dq},Symbol.toStringTag,{value:"Module"}));function Mst(t,e){var n,i=1;t==null&&(t=0),e==null&&(e=0);function r(){var a,o=n.length,s,l=0,f=0;for(a=0;a<o;++a)s=n[a],l+=s.x,f+=s.y;for(l=(l/o-t)*i,f=(f/o-e)*i,a=0;a<o;++a)s=n[a],s.x-=l,s.y-=f}return r.initialize=function(a){n=a},r.x=function(a){return arguments.length?(t=+a,r):t},r.y=function(a){return arguments.length?(e=+a,r):e},r.strength=function(a){return arguments.length?(i=+a,r):i},r}function kst(t){const e=+this._x.call(null,t),n=+this._y.call(null,t);return pq(this.cover(e,n),e,n,t)}function pq(t,e,n,i){if(isNaN(e)||isNaN(n))return t;var r,a=t._root,o={data:i},s=t._x0,l=t._y0,f=t._x1,d=t._y1,p,m,_,b,x,S,T,M;if(!a)return t._root=o,t;for(;a.length;)if((x=e>=(p=(s+f)/2))?s=p:f=p,(S=n>=(m=(l+d)/2))?l=m:d=m,r=a,!(a=a[T=S<<1|x]))return r[T]=o,t;if(_=+t._x.call(null,a.data),b=+t._y.call(null,a.data),e===_&&n===b)return o.next=a,r?r[T]=o:t._root=o,t;do r=r?r[T]=new Array(4):t._root=new Array(4),(x=e>=(p=(s+f)/2))?s=p:f=p,(S=n>=(m=(l+d)/2))?l=m:d=m;while((T=S<<1|x)===(M=(b>=m)<<1|_>=p));return r[M]=a,r[T]=o,t}function Ost(t){var e,n,i=t.length,r,a,o=new Array(i),s=new Array(i),l=1/0,f=1/0,d=-1/0,p=-1/0;for(n=0;n<i;++n)isNaN(r=+this._x.call(null,e=t[n]))||isNaN(a=+this._y.call(null,e))||(o[n]=r,s[n]=a,r<l&&(l=r),r>d&&(d=r),a<f&&(f=a),a>p&&(p=a));if(l>d||f>p)return this;for(this.cover(l,f).cover(d,p),n=0;n<i;++n)pq(this,o[n],s[n],t[n]);return this}function $st(t,e){if(isNaN(t=+t)||isNaN(e=+e))return this;var n=this._x0,i=this._y0,r=this._x1,a=this._y1;if(isNaN(n))r=(n=Math.floor(t))+1,a=(i=Math.floor(e))+1;else{for(var o=r-n||1,s=this._root,l,f;n>t||t>=r||i>e||e>=a;)switch(f=(e<i)<<1|t<n,l=new Array(4),l[f]=s,s=l,o*=2,f){case 0:r=n+o,a=i+o;break;case 1:n=r-o,a=i+o;break;case 2:r=n+o,i=a-o;break;case 3:n=r-o,i=a-o;break}this._root&&this._root.length&&(this._root=s)}return this._x0=n,this._y0=i,this._x1=r,this._y1=a,this}function Dst(){var t=[];return this.visit(function(e){if(!e.length)do t.push(e.data);while(e=e.next)}),t}function Rst(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function er(t,e,n,i,r){this.node=t,this.x0=e,this.y0=n,this.x1=i,this.y1=r}function Nst(t,e,n){var i,r=this._x0,a=this._y0,o,s,l,f,d=this._x1,p=this._y1,m=[],_=this._root,b,x;for(_&&m.push(new er(_,r,a,d,p)),n==null?n=1/0:(r=t-n,a=e-n,d=t+n,p=e+n,n*=n);b=m.pop();)if(!(!(_=b.node)||(o=b.x0)>d||(s=b.y0)>p||(l=b.x1)<r||(f=b.y1)<a))if(_.length){var S=(o+l)/2,T=(s+f)/2;m.push(new er(_[3],S,T,l,f),new er(_[2],o,T,S,f),new er(_[1],S,s,l,T),new er(_[0],o,s,S,T)),(x=(e>=T)<<1|t>=S)&&(b=m[m.length-1],m[m.length-1]=m[m.length-1-x],m[m.length-1-x]=b)}else{var M=t-+this._x.call(null,_.data),k=e-+this._y.call(null,_.data),$=M*M+k*k;if($<n){var D=Math.sqrt(n=$);r=t-D,a=e-D,d=t+D,p=e+D,i=_.data}}return i}function Lst(t){if(isNaN(d=+this._x.call(null,t))||isNaN(p=+this._y.call(null,t)))return this;var e,n=this._root,i,r,a,o=this._x0,s=this._y0,l=this._x1,f=this._y1,d,p,m,_,b,x,S,T;if(!n)return this;if(n.length)for(;;){if((b=d>=(m=(o+l)/2))?o=m:l=m,(x=p>=(_=(s+f)/2))?s=_:f=_,e=n,!(n=n[S=x<<1|b]))return this;if(!n.length)break;(e[S+1&3]||e[S+2&3]||e[S+3&3])&&(i=e,T=S)}for(;n.data!==t;)if(r=n,!(n=n.next))return this;return(a=n.next)&&delete n.next,r?(a?r.next=a:delete r.next,this):e?(a?e[S]=a:delete e[S],(n=e[0]||e[1]||e[2]||e[3])&&n===(e[3]||e[2]||e[1]||e[0])&&!n.length&&(i?i[T]=n:this._root=n),this):(this._root=a,this)}function zst(t){for(var e=0,n=t.length;e<n;++e)this.remove(t[e]);return this}function Fst(){return this._root}function Pst(){var t=0;return this.visit(function(e){if(!e.length)do++t;while(e=e.next)}),t}function Bst(t){var e=[],n,i=this._root,r,a,o,s,l;for(i&&e.push(new er(i,this._x0,this._y0,this._x1,this._y1));n=e.pop();)if(!t(i=n.node,a=n.x0,o=n.y0,s=n.x1,l=n.y1)&&i.length){var f=(a+s)/2,d=(o+l)/2;(r=i[3])&&e.push(new er(r,f,d,s,l)),(r=i[2])&&e.push(new er(r,a,d,f,l)),(r=i[1])&&e.push(new er(r,f,o,s,d)),(r=i[0])&&e.push(new er(r,a,o,f,d))}return this}function Ust(t){var e=[],n=[],i;for(this._root&&e.push(new er(this._root,this._x0,this._y0,this._x1,this._y1));i=e.pop();){var r=i.node;if(r.length){var a,o=i.x0,s=i.y0,l=i.x1,f=i.y1,d=(o+l)/2,p=(s+f)/2;(a=r[0])&&e.push(new er(a,o,s,d,p)),(a=r[1])&&e.push(new er(a,d,s,l,p)),(a=r[2])&&e.push(new er(a,o,p,d,f)),(a=r[3])&&e.push(new er(a,d,p,l,f))}n.push(i)}for(;i=n.pop();)t(i.node,i.x0,i.y0,i.x1,i.y1);return this}function Ist(t){return t[0]}function qst(t){return arguments.length?(this._x=t,this):this._x}function jst(t){return t[1]}function Hst(t){return arguments.length?(this._y=t,this):this._y}function _3(t,e,n){var i=new b3(e??Ist,n??jst,NaN,NaN,NaN,NaN);return t==null?i:i.addAll(t)}function b3(t,e,n,i,r,a){this._x=t,this._y=e,this._x0=n,this._y0=i,this._x1=r,this._y1=a,this._root=void 0}function E6(t){for(var e={data:t.data},n=e;t=t.next;)n=n.next={data:t.data};return e}var lr=_3.prototype=b3.prototype;lr.copy=function(){var t=new b3(this._x,this._y,this._x0,this._y0,this._x1,this._y1),e=this._root,n,i;if(!e)return t;if(!e.length)return t._root=E6(e),t;for(n=[{source:e,target:t._root=new Array(4)}];e=n.pop();)for(var r=0;r<4;++r)(i=e.source[r])&&(i.length?n.push({source:i,target:e.target[r]=new Array(4)}):e.target[r]=E6(i));return t};lr.add=kst;lr.addAll=Ost;lr.cover=$st;lr.data=Dst;lr.extent=Rst;lr.find=Nst;lr.remove=Lst;lr.removeAll=zst;lr.root=Fst;lr.size=Pst;lr.visit=Bst;lr.visitAfter=Ust;lr.x=qst;lr.y=Hst;function nr(t){return function(){return t}}function Gl(t){return(t()-.5)*1e-6}function Gst(t){return t.x+t.vx}function Zst(t){return t.y+t.vy}function Yst(t){var e,n,i,r=1,a=1;typeof t!="function"&&(t=nr(t==null?1:+t));function o(){for(var f,d=e.length,p,m,_,b,x,S,T=0;T<a;++T)for(p=_3(e,Gst,Zst).visitAfter(s),f=0;f<d;++f)m=e[f],x=n[m.index],S=x*x,_=m.x+m.vx,b=m.y+m.vy,p.visit(M);function M(k,$,D,F,N){var I=k.data,q=k.r,Y=x+q;if(I){if(I.index>m.index){var H=_-I.x-I.vx,et=b-I.y-I.vy,nt=H*H+et*et;nt<Y*Y&&(H===0&&(H=Gl(i),nt+=H*H),et===0&&(et=Gl(i),nt+=et*et),nt=(Y-(nt=Math.sqrt(nt)))/nt*r,m.vx+=(H*=nt)*(Y=(q*=q)/(S+q)),m.vy+=(et*=nt)*Y,I.vx-=H*(Y=1-Y),I.vy-=et*Y)}return}return $>_+Y||F<_-Y||D>b+Y||N<b-Y}}function s(f){if(f.data)return f.r=n[f.data.index];for(var d=f.r=0;d<4;++d)f[d]&&f[d].r>f.r&&(f.r=f[d].r)}function l(){if(e){var f,d=e.length,p;for(n=new Array(d),f=0;f<d;++f)p=e[f],n[p.index]=+t(p,f,e)}}return o.initialize=function(f,d){e=f,i=d,l()},o.iterations=function(f){return arguments.length?(a=+f,o):a},o.strength=function(f){return arguments.length?(r=+f,o):r},o.radius=function(f){return arguments.length?(t=typeof f=="function"?f:nr(+f),l(),o):t},o}function Xst(t){return t.index}function S6(t,e){var n=t.get(e);if(!n)throw new Error("node not found: "+e);return n}function Wst(t){var e=Xst,n=p,i,r=nr(30),a,o,s,l,f,d=1;t==null&&(t=[]);function p(S){return 1/Math.min(s[S.source.index],s[S.target.index])}function m(S){for(var T=0,M=t.length;T<d;++T)for(var k=0,$,D,F,N,I,q,Y;k<M;++k)$=t[k],D=$.source,F=$.target,N=F.x+F.vx-D.x-D.vx||Gl(f),I=F.y+F.vy-D.y-D.vy||Gl(f),q=Math.sqrt(N*N+I*I),q=(q-a[k])/q*S*i[k],N*=q,I*=q,F.vx-=N*(Y=l[k]),F.vy-=I*Y,D.vx+=N*(Y=1-Y),D.vy+=I*Y}function _(){if(o){var S,T=o.length,M=t.length,k=new Map(o.map((D,F)=>[e(D,F,o),D])),$;for(S=0,s=new Array(T);S<M;++S)$=t[S],$.index=S,typeof $.source!="object"&&($.source=S6(k,$.source)),typeof $.target!="object"&&($.target=S6(k,$.target)),s[$.source.index]=(s[$.source.index]||0)+1,s[$.target.index]=(s[$.target.index]||0)+1;for(S=0,l=new Array(M);S<M;++S)$=t[S],l[S]=s[$.source.index]/(s[$.source.index]+s[$.target.index]);i=new Array(M),b(),a=new Array(M),x()}}function b(){if(o)for(var S=0,T=t.length;S<T;++S)i[S]=+n(t[S],S,t)}function x(){if(o)for(var S=0,T=t.length;S<T;++S)a[S]=+r(t[S],S,t)}return m.initialize=function(S,T){o=S,f=T,_()},m.links=function(S){return arguments.length?(t=S,_(),m):t},m.id=function(S){return arguments.length?(e=S,m):e},m.iterations=function(S){return arguments.length?(d=+S,m):d},m.strength=function(S){return arguments.length?(n=typeof S=="function"?S:nr(+S),b(),m):n},m.distance=function(S){return arguments.length?(r=typeof S=="function"?S:nr(+S),x(),m):r},m}var Vst={value:()=>{}};function gq(){for(var t=0,e=arguments.length,n={},i;t<e;++t){if(!(i=arguments[t]+"")||i in n||/[\s.]/.test(i))throw new Error("illegal type: "+i);n[i]=[]}return new m_(n)}function m_(t){this._=t}function Qst(t,e){return t.trim().split(/^|\s+/).map(function(n){var i="",r=n.indexOf(".");if(r>=0&&(i=n.slice(r+1),n=n.slice(0,r)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:i}})}m_.prototype=gq.prototype={constructor:m_,on:function(t,e){var n=this._,i=Qst(t+"",n),r,a=-1,o=i.length;if(arguments.length<2){for(;++a<o;)if((r=(t=i[a]).type)&&(r=Kst(n[r],t.name)))return r;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++a<o;)if(r=(t=i[a]).type)n[r]=A6(n[r],t.name,e);else if(e==null)for(r in n)n[r]=A6(n[r],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new m_(t)},call:function(t,e){if((r=arguments.length-2)>0)for(var n=new Array(r),i=0,r,a;i<r;++i)n[i]=arguments[i+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(a=this._[t],i=0,r=a.length;i<r;++i)a[i].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var i=this._[t],r=0,a=i.length;r<a;++r)i[r].value.apply(e,n)}};function Kst(t,e){for(var n=0,i=t.length,r;n<i;++n)if((r=t[n]).name===e)return r.value}function A6(t,e,n){for(var i=0,r=t.length;i<r;++i)if(t[i].name===e){t[i]=Vst,t=t.slice(0,i).concat(t.slice(i+1));break}return n!=null&&t.push({name:e,value:n}),t}var cp=0,Zm=0,vm=0,mq=1e3,Rb,Ym,Nb=0,Zf=0,r2=0,$0=typeof performance=="object"&&performance.now?performance:Date,yq=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function x3(){return Zf||(yq(Jst),Zf=$0.now()+r2)}function Jst(){Zf=0}function Lb(){this._call=this._time=this._next=null}Lb.prototype=vq.prototype={constructor:Lb,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?x3():+n)+(e==null?0:+e),!this._next&&Ym!==this&&(Ym?Ym._next=this:Rb=this,Ym=this),this._call=t,this._time=n,_C()},stop:function(){this._call&&(this._call=null,this._time=1/0,_C())}};function vq(t,e,n){var i=new Lb;return i.restart(t,e,n),i}function tut(){x3(),++cp;for(var t=Rb,e;t;)(e=Zf-t._time)>=0&&t._call.call(void 0,e),t=t._next;--cp}function T6(){Zf=(Nb=$0.now())+r2,cp=Zm=0;try{tut()}finally{cp=0,nut(),Zf=0}}function eut(){var t=$0.now(),e=t-Nb;e>mq&&(r2-=e,Nb=t)}function nut(){for(var t,e=Rb,n,i=1/0;e;)e._call?(i>e._time&&(i=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:Rb=n);Ym=t,_C(i)}function _C(t){if(!cp){Zm&&(Zm=clearTimeout(Zm));var e=t-Zf;e>24?(t<1/0&&(Zm=setTimeout(T6,t-$0.now()-r2)),vm&&(vm=clearInterval(vm))):(vm||(Nb=$0.now(),vm=setInterval(eut,mq)),cp=1,yq(T6))}}function iut(t,e,n){var i=new Lb,r=e;return e==null?(i.restart(t,e,n),i):(i._restart=i.restart,i.restart=function(a,o,s){o=+o,s=s==null?x3():+s,i._restart(function l(f){f+=r,i._restart(l,r+=o,s),a(f)},o,s)},i.restart(t,e,n),i)}const rut=1664525,aut=1013904223,C6=4294967296;function out(){let t=1;return()=>(t=(rut*t+aut)%C6)/C6}function sut(t){return t.x}function uut(t){return t.y}var lut=10,cut=Math.PI*(3-Math.sqrt(5));function fut(t){var e,n=1,i=.001,r=1-Math.pow(i,1/300),a=0,o=.6,s=new Map,l=vq(p),f=gq("tick","end"),d=out();t==null&&(t=[]);function p(){m(),f.call("tick",e),n<i&&(l.stop(),f.call("end",e))}function m(x){var S,T=t.length,M;x===void 0&&(x=1);for(var k=0;k<x;++k)for(n+=(a-n)*r,s.forEach(function($){$(n)}),S=0;S<T;++S)M=t[S],M.fx==null?M.x+=M.vx*=o:(M.x=M.fx,M.vx=0),M.fy==null?M.y+=M.vy*=o:(M.y=M.fy,M.vy=0);return e}function _(){for(var x=0,S=t.length,T;x<S;++x){if(T=t[x],T.index=x,T.fx!=null&&(T.x=T.fx),T.fy!=null&&(T.y=T.fy),isNaN(T.x)||isNaN(T.y)){var M=lut*Math.sqrt(.5+x),k=x*cut;T.x=M*Math.cos(k),T.y=M*Math.sin(k)}(isNaN(T.vx)||isNaN(T.vy))&&(T.vx=T.vy=0)}}function b(x){return x.initialize&&x.initialize(t,d),x}return _(),e={tick:m,restart:function(){return l.restart(p),e},stop:function(){return l.stop(),e},nodes:function(x){return arguments.length?(t=x,_(),s.forEach(b),e):t},alpha:function(x){return arguments.length?(n=+x,e):n},alphaMin:function(x){return arguments.length?(i=+x,e):i},alphaDecay:function(x){return arguments.length?(r=+x,e):+r},alphaTarget:function(x){return arguments.length?(a=+x,e):a},velocityDecay:function(x){return arguments.length?(o=1-x,e):1-o},randomSource:function(x){return arguments.length?(d=x,s.forEach(b),e):d},force:function(x,S){return arguments.length>1?(S==null?s.delete(x):s.set(x,b(S)),e):s.get(x)},find:function(x,S,T){var M=0,k=t.length,$,D,F,N,I;for(T==null?T=1/0:T*=T,M=0;M<k;++M)N=t[M],$=x-N.x,D=S-N.y,F=$*$+D*D,F<T&&(I=N,T=F);return I},on:function(x,S){return arguments.length>1?(f.on(x,S),e):f.on(x)}}}function hut(){var t,e,n,i,r=nr(-30),a,o=1,s=1/0,l=.81;function f(_){var b,x=t.length,S=_3(t,sut,uut).visitAfter(p);for(i=_,b=0;b<x;++b)e=t[b],S.visit(m)}function d(){if(t){var _,b=t.length,x;for(a=new Array(b),_=0;_<b;++_)x=t[_],a[x.index]=+r(x,_,t)}}function p(_){var b=0,x,S,T=0,M,k,$;if(_.length){for(M=k=$=0;$<4;++$)(x=_[$])&&(S=Math.abs(x.value))&&(b+=x.value,T+=S,M+=S*x.x,k+=S*x.y);_.x=M/T,_.y=k/T}else{x=_,x.x=x.data.x,x.y=x.data.y;do b+=a[x.data.index];while(x=x.next)}_.value=b}function m(_,b,x,S){if(!_.value)return!0;var T=_.x-e.x,M=_.y-e.y,k=S-b,$=T*T+M*M;if(k*k/l<$)return $<s&&(T===0&&(T=Gl(n),$+=T*T),M===0&&(M=Gl(n),$+=M*M),$<o&&($=Math.sqrt(o*$)),e.vx+=T*_.value*i/$,e.vy+=M*_.value*i/$),!0;if(_.length||$>=s)return;(_.data!==e||_.next)&&(T===0&&(T=Gl(n),$+=T*T),M===0&&(M=Gl(n),$+=M*M),$<o&&($=Math.sqrt(o*$)));do _.data!==e&&(k=a[_.data.index]*i/$,e.vx+=T*k,e.vy+=M*k);while(_=_.next)}return f.initialize=function(_,b){t=_,n=b,d()},f.strength=function(_){return arguments.length?(r=typeof _=="function"?_:nr(+_),d(),f):r},f.distanceMin=function(_){return arguments.length?(o=_*_,f):Math.sqrt(o)},f.distanceMax=function(_){return arguments.length?(s=_*_,f):Math.sqrt(s)},f.theta=function(_){return arguments.length?(l=_*_,f):Math.sqrt(l)},f}function dut(t){var e=nr(.1),n,i,r;typeof t!="function"&&(t=nr(t==null?0:+t));function a(s){for(var l=0,f=n.length,d;l<f;++l)d=n[l],d.vx+=(r[l]-d.x)*i[l]*s}function o(){if(n){var s,l=n.length;for(i=new Array(l),r=new Array(l),s=0;s<l;++s)i[s]=isNaN(r[s]=+t(n[s],s,n))?0:+e(n[s],s,n)}}return a.initialize=function(s){n=s,o()},a.strength=function(s){return arguments.length?(e=typeof s=="function"?s:nr(+s),o(),a):e},a.x=function(s){return arguments.length?(t=typeof s=="function"?s:nr(+s),o(),a):t},a}function put(t){var e=nr(.1),n,i,r;typeof t!="function"&&(t=nr(t==null?0:+t));function a(s){for(var l=0,f=n.length,d;l<f;++l)d=n[l],d.vy+=(r[l]-d.y)*i[l]*s}function o(){if(n){var s,l=n.length;for(i=new Array(l),r=new Array(l),s=0;s<l;++s)i[s]=isNaN(r[s]=+t(n[s],s,n))?0:+e(n[s],s,n)}}return a.initialize=function(s){n=s,o()},a.strength=function(s){return arguments.length?(e=typeof s=="function"?s:nr(+s),o(),a):e},a.y=function(s){return arguments.length?(t=typeof s=="function"?s:nr(+s),o(),a):t},a}const M6={center:Mst,collide:Yst,nbody:hut,link:Wst,x:dut,y:put},Xm="forces",bC=["alpha","alphaMin","alphaTarget","velocityDecay","forces"],gut=["static","iterations"],_q=["x","y","vx","vy"];function w3(t){ct.call(this,null,t)}w3.Definition={type:"Force",metadata:{modifies:!0},params:[{name:"static",type:"boolean",default:!1},{name:"restart",type:"boolean",default:!1},{name:"iterations",type:"number",default:300},{name:"alpha",type:"number",default:1},{name:"alphaMin",type:"number",default:.001},{name:"alphaTarget",type:"number",default:0},{name:"velocityDecay",type:"number",default:.4},{name:"forces",type:"param",array:!0,params:[{key:{force:"center"},params:[{name:"x",type:"number",default:0},{name:"y",type:"number",default:0}]},{key:{force:"collide"},params:[{name:"radius",type:"number",expr:!0},{name:"strength",type:"number",default:.7},{name:"iterations",type:"number",default:1}]},{key:{force:"nbody"},params:[{name:"strength",type:"number",default:-30,expr:!0},{name:"theta",type:"number",default:.9},{name:"distanceMin",type:"number",default:1},{name:"distanceMax",type:"number"}]},{key:{force:"link"},params:[{name:"links",type:"data"},{name:"id",type:"field"},{name:"distance",type:"number",default:30,expr:!0},{name:"strength",type:"number",expr:!0},{name:"iterations",type:"number",default:1}]},{key:{force:"x"},params:[{name:"strength",type:"number",default:.1},{name:"x",type:"field"}]},{key:{force:"y"},params:[{name:"strength",type:"number",default:.1},{name:"y",type:"field"}]}]},{name:"as",type:"string",array:!0,modify:!1,default:_q}]};kt(w3,ct,{transform(t,e){var n=this.value,i=e.changed(e.ADD_REM),r=t.modified(bC),a=t.iterations||300;if(n?(i&&(e.modifies("index"),n.nodes(e.source)),(r||e.changed(e.MOD))&&bq(n,t,0,e)):(this.value=n=yut(e.source,t),n.on("tick",mut(e.dataflow,this)),t.static||(i=!0,n.tick()),e.modifies("index")),r||i||t.modified(gut)||e.changed()&&t.restart){if(n.alpha(Math.max(n.alpha(),t.alpha||1)).alphaDecay(1-Math.pow(n.alphaMin(),1/a)),t.static)for(n.stop();--a>=0;)n.tick();else if(n.stopped()&&n.restart(),!i)return e.StopPropagation}return this.finish(t,e)},finish(t,e){const n=e.dataflow;for(let s=this._argops,l=0,f=s.length,d;l<f;++l)if(d=s[l],!(d.name!==Xm||d.op._argval.force!=="link")){for(var i=d.op._argops,r=0,a=i.length,o;r<a;++r)if(i[r].name==="links"&&(o=i[r].op.source)){n.pulse(o,n.changeset().reflow());break}}return e.reflow(t.modified()).modifies(_q)}});function mut(t,e){return()=>t.touch(e).run()}function yut(t,e){const n=fut(t),i=n.stop,r=n.restart;let a=!1;return n.stopped=()=>a,n.restart=()=>(a=!1,r()),n.stop=()=>(a=!0,i()),bq(n,e,!0).on("end",()=>a=!0)}function bq(t,e,n,i){var r=Nt(e.forces),a,o,s,l;for(a=0,o=bC.length;a<o;++a)s=bC[a],s!==Xm&&e.modified(s)&&t[s](e[s]);for(a=0,o=r.length;a<o;++a)l=Xm+a,s=n||e.modified(Xm,a)?_ut(r[a]):i&&vut(r[a],i)?t.force(l):null,s&&t.force(l,s);for(o=t.numForces||0;a<o;++a)t.force(Xm+a,null);return t.numForces=r.length,t}function vut(t,e){var n,i;for(n in t)if(se(i=t[n])&&e.modified(Li(i)))return 1;return 0}function _ut(t){var e,n;zt(M6,t.force)||dt("Unrecognized force: "+t.force),e=M6[t.force]();for(n in t)se(e[n])&&but(e[n],t[n],t);return e}function but(t,e,n){t(se(e)?i=>e(i,n):e)}const xut=Object.freeze(Object.defineProperty({__proto__:null,force:w3},Symbol.toStringTag,{value:"Module"}));function wut(t,e){return t.parent===e.parent?1:2}function Eut(t){return t.reduce(Sut,0)/t.length}function Sut(t,e){return t+e.x}function Aut(t){return 1+t.reduce(Tut,0)}function Tut(t,e){return Math.max(t,e.y)}function Cut(t){for(var e;e=t.children;)t=e[0];return t}function Mut(t){for(var e;e=t.children;)t=e[e.length-1];return t}function kut(){var t=wut,e=1,n=1,i=!1;function r(a){var o,s=0;a.eachAfter(function(m){var _=m.children;_?(m.x=Eut(_),m.y=Aut(_)):(m.x=o?s+=t(m,o):0,m.y=0,o=m)});var l=Cut(a),f=Mut(a),d=l.x-t(l,f)/2,p=f.x+t(f,l)/2;return a.eachAfter(i?function(m){m.x=(m.x-a.x)*e,m.y=(a.y-m.y)*n}:function(m){m.x=(m.x-d)/(p-d)*e,m.y=(1-(a.y?m.y/a.y:1))*n})}return r.separation=function(a){return arguments.length?(t=a,r):t},r.size=function(a){return arguments.length?(i=!1,e=+a[0],n=+a[1],r):i?null:[e,n]},r.nodeSize=function(a){return arguments.length?(i=!0,e=+a[0],n=+a[1],r):i?[e,n]:null},r}function Out(t){var e=0,n=t.children,i=n&&n.length;if(!i)e=1;else for(;--i>=0;)e+=n[i].value;t.value=e}function $ut(){return this.eachAfter(Out)}function Dut(t,e){let n=-1;for(const i of this)t.call(e,i,++n,this);return this}function Rut(t,e){for(var n=this,i=[n],r,a,o=-1;n=i.pop();)if(t.call(e,n,++o,this),r=n.children)for(a=r.length-1;a>=0;--a)i.push(r[a]);return this}function Nut(t,e){for(var n=this,i=[n],r=[],a,o,s,l=-1;n=i.pop();)if(r.push(n),a=n.children)for(o=0,s=a.length;o<s;++o)i.push(a[o]);for(;n=r.pop();)t.call(e,n,++l,this);return this}function Lut(t,e){let n=-1;for(const i of this)if(t.call(e,i,++n,this))return i}function zut(t){return this.eachAfter(function(e){for(var n=+t(e.data)||0,i=e.children,r=i&&i.length;--r>=0;)n+=i[r].value;e.value=n})}function Fut(t){return this.eachBefore(function(e){e.children&&e.children.sort(t)})}function Put(t){for(var e=this,n=But(e,t),i=[e];e!==n;)e=e.parent,i.push(e);for(var r=i.length;t!==n;)i.splice(r,0,t),t=t.parent;return i}function But(t,e){if(t===e)return t;var n=t.ancestors(),i=e.ancestors(),r=null;for(t=n.pop(),e=i.pop();t===e;)r=t,t=n.pop(),e=i.pop();return r}function Uut(){for(var t=this,e=[t];t=t.parent;)e.push(t);return e}function Iut(){return Array.from(this)}function qut(){var t=[];return this.eachBefore(function(e){e.children||t.push(e)}),t}function jut(){var t=this,e=[];return t.each(function(n){n!==t&&e.push({source:n.parent,target:n})}),e}function*Hut(){var t=this,e,n=[t],i,r,a;do for(e=n.reverse(),n=[];t=e.pop();)if(yield t,i=t.children)for(r=0,a=i.length;r<a;++r)n.push(i[r]);while(n.length)}function E3(t,e){t instanceof Map?(t=[void 0,t],e===void 0&&(e=Yut)):e===void 0&&(e=Zut);for(var n=new fp(t),i,r=[n],a,o,s,l;i=r.pop();)if((o=e(i.data))&&(l=(o=Array.from(o)).length))for(i.children=o,s=l-1;s>=0;--s)r.push(a=o[s]=new fp(o[s])),a.parent=i,a.depth=i.depth+1;return n.eachBefore(xq)}function Gut(){return E3(this).eachBefore(Xut)}function Zut(t){return t.children}function Yut(t){return Array.isArray(t)?t[1]:null}function Xut(t){t.data.value!==void 0&&(t.value=t.data.value),t.data=t.data.data}function xq(t){var e=0;do t.height=e;while((t=t.parent)&&t.height<++e)}function fp(t){this.data=t,this.depth=this.height=0,this.parent=null}fp.prototype=E3.prototype={constructor:fp,count:$ut,each:Dut,eachAfter:Nut,eachBefore:Rut,find:Lut,sum:zut,sort:Fut,path:Put,ancestors:Uut,descendants:Iut,leaves:qut,links:jut,copy:Gut,[Symbol.iterator]:Hut};function y_(t){return t==null?null:wq(t)}function wq(t){if(typeof t!="function")throw new Error;return t}function Sf(){return 0}function Td(t){return function(){return t}}const Wut=1664525,Vut=1013904223,k6=4294967296;function Qut(){let t=1;return()=>(t=(Wut*t+Vut)%k6)/k6}function Kut(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function Jut(t,e){let n=t.length,i,r;for(;n;)r=e()*n--|0,i=t[n],t[n]=t[r],t[r]=i;return t}function tlt(t,e){for(var n=0,i=(t=Jut(Array.from(t),e)).length,r=[],a,o;n<i;)a=t[n],o&&Eq(o,a)?++n:(o=nlt(r=elt(r,a)),n=0);return o}function elt(t,e){var n,i;if(QS(e,t))return[e];for(n=0;n<t.length;++n)if(zv(e,t[n])&&QS(Wm(t[n],e),t))return[t[n],e];for(n=0;n<t.length-1;++n)for(i=n+1;i<t.length;++i)if(zv(Wm(t[n],t[i]),e)&&zv(Wm(t[n],e),t[i])&&zv(Wm(t[i],e),t[n])&&QS(Sq(t[n],t[i],e),t))return[t[n],t[i],e];throw new Error}function zv(t,e){var n=t.r-e.r,i=e.x-t.x,r=e.y-t.y;return n<0||n*n<i*i+r*r}function Eq(t,e){var n=t.r-e.r+Math.max(t.r,e.r,1)*1e-9,i=e.x-t.x,r=e.y-t.y;return n>0&&n*n>i*i+r*r}function QS(t,e){for(var n=0;n<e.length;++n)if(!Eq(t,e[n]))return!1;return!0}function nlt(t){switch(t.length){case 1:return ilt(t[0]);case 2:return Wm(t[0],t[1]);case 3:return Sq(t[0],t[1],t[2])}}function ilt(t){return{x:t.x,y:t.y,r:t.r}}function Wm(t,e){var n=t.x,i=t.y,r=t.r,a=e.x,o=e.y,s=e.r,l=a-n,f=o-i,d=s-r,p=Math.sqrt(l*l+f*f);return{x:(n+a+l/p*d)/2,y:(i+o+f/p*d)/2,r:(p+r+s)/2}}function Sq(t,e,n){var i=t.x,r=t.y,a=t.r,o=e.x,s=e.y,l=e.r,f=n.x,d=n.y,p=n.r,m=i-o,_=i-f,b=r-s,x=r-d,S=l-a,T=p-a,M=i*i+r*r-a*a,k=M-o*o-s*s+l*l,$=M-f*f-d*d+p*p,D=_*b-m*x,F=(b*$-x*k)/(D*2)-i,N=(x*S-b*T)/D,I=(_*k-m*$)/(D*2)-r,q=(m*T-_*S)/D,Y=N*N+q*q-1,H=2*(a+F*N+I*q),et=F*F+I*I-a*a,nt=-(Math.abs(Y)>1e-6?(H+Math.sqrt(H*H-4*Y*et))/(2*Y):et/H);return{x:i+F+N*nt,y:r+I+q*nt,r:nt}}function O6(t,e,n){var i=t.x-e.x,r,a,o=t.y-e.y,s,l,f=i*i+o*o;f?(a=e.r+n.r,a*=a,l=t.r+n.r,l*=l,a>l?(r=(f+l-a)/(2*f),s=Math.sqrt(Math.max(0,l/f-r*r)),n.x=t.x-r*i-s*o,n.y=t.y-r*o+s*i):(r=(f+a-l)/(2*f),s=Math.sqrt(Math.max(0,a/f-r*r)),n.x=e.x+r*i-s*o,n.y=e.y+r*o+s*i)):(n.x=e.x+n.r,n.y=e.y)}function $6(t,e){var n=t.r+e.r-1e-6,i=e.x-t.x,r=e.y-t.y;return n>0&&n*n>i*i+r*r}function D6(t){var e=t._,n=t.next._,i=e.r+n.r,r=(e.x*n.r+n.x*e.r)/i,a=(e.y*n.r+n.y*e.r)/i;return r*r+a*a}function Fv(t){this._=t,this.next=null,this.previous=null}function rlt(t,e){if(!(a=(t=Kut(t)).length))return 0;var n,i,r,a,o,s,l,f,d,p,m;if(n=t[0],n.x=0,n.y=0,!(a>1))return n.r;if(i=t[1],n.x=-i.r,i.x=n.r,i.y=0,!(a>2))return n.r+i.r;O6(i,n,r=t[2]),n=new Fv(n),i=new Fv(i),r=new Fv(r),n.next=r.previous=i,i.next=n.previous=r,r.next=i.previous=n;t:for(l=3;l<a;++l){O6(n._,i._,r=t[l]),r=new Fv(r),f=i.next,d=n.previous,p=i._.r,m=n._.r;do if(p<=m){if($6(f._,r._)){i=f,n.next=i,i.previous=n,--l;continue t}p+=f._.r,f=f.next}else{if($6(d._,r._)){n=d,n.next=i,i.previous=n,--l;continue t}m+=d._.r,d=d.previous}while(f!==d.next);for(r.previous=n,r.next=i,n.next=i.previous=i=r,o=D6(n);(r=r.next)!==i;)(s=D6(r))<o&&(n=r,o=s);i=n.next}for(n=[i._],r=i;(r=r.next)!==i;)n.push(r._);for(r=tlt(n,e),l=0;l<a;++l)n=t[l],n.x-=r.x,n.y-=r.y;return r.r}function alt(t){return Math.sqrt(t.value)}function olt(){var t=null,e=1,n=1,i=Sf;function r(a){const o=Qut();return a.x=e/2,a.y=n/2,t?a.eachBefore(R6(t)).eachAfter(KS(i,.5,o)).eachBefore(N6(1)):a.eachBefore(R6(alt)).eachAfter(KS(Sf,1,o)).eachAfter(KS(i,a.r/Math.min(e,n),o)).eachBefore(N6(Math.min(e,n)/(2*a.r))),a}return r.radius=function(a){return arguments.length?(t=y_(a),r):t},r.size=function(a){return arguments.length?(e=+a[0],n=+a[1],r):[e,n]},r.padding=function(a){return arguments.length?(i=typeof a=="function"?a:Td(+a),r):i},r}function R6(t){return function(e){e.children||(e.r=Math.max(0,+t(e)||0))}}function KS(t,e,n){return function(i){if(r=i.children){var r,a,o=r.length,s=t(i)*e||0,l;if(s)for(a=0;a<o;++a)r[a].r+=s;if(l=rlt(r,n),s)for(a=0;a<o;++a)r[a].r-=s;i.r=l+s}}}function N6(t){return function(e){var n=e.parent;e.r*=t,n&&(e.x=n.x+t*e.x,e.y=n.y+t*e.y)}}function Aq(t){t.x0=Math.round(t.x0),t.y0=Math.round(t.y0),t.x1=Math.round(t.x1),t.y1=Math.round(t.y1)}function yy(t,e,n,i,r){for(var a=t.children,o,s=-1,l=a.length,f=t.value&&(i-e)/t.value;++s<l;)o=a[s],o.y0=n,o.y1=r,o.x0=e,o.x1=e+=o.value*f}function slt(){var t=1,e=1,n=0,i=!1;function r(o){var s=o.height+1;return o.x0=o.y0=n,o.x1=t,o.y1=e/s,o.eachBefore(a(e,s)),i&&o.eachBefore(Aq),o}function a(o,s){return function(l){l.children&&yy(l,l.x0,o*(l.depth+1)/s,l.x1,o*(l.depth+2)/s);var f=l.x0,d=l.y0,p=l.x1-n,m=l.y1-n;p<f&&(f=p=(f+p)/2),m<d&&(d=m=(d+m)/2),l.x0=f,l.y0=d,l.x1=p,l.y1=m}}return r.round=function(o){return arguments.length?(i=!!o,r):i},r.size=function(o){return arguments.length?(t=+o[0],e=+o[1],r):[t,e]},r.padding=function(o){return arguments.length?(n=+o,r):n},r}var ult={depth:-1},L6={},JS={};function llt(t){return t.id}function clt(t){return t.parentId}function z6(){var t=llt,e=clt,n;function i(r){var a=Array.from(r),o=t,s=e,l,f,d,p,m,_,b,x,S=new Map;if(n!=null){const T=a.map(($,D)=>flt(n($,D,r))),M=T.map(F6),k=new Set(T).add("");for(const $ of M)k.has($)||(k.add($),T.push($),M.push(F6($)),a.push(JS));o=($,D)=>T[D],s=($,D)=>M[D]}for(d=0,l=a.length;d<l;++d)f=a[d],_=a[d]=new fp(f),(b=o(f,d,r))!=null&&(b+="")&&(x=_.id=b,S.set(x,S.has(x)?L6:_)),(b=s(f,d,r))!=null&&(b+="")&&(_.parent=b);for(d=0;d<l;++d)if(_=a[d],b=_.parent){if(m=S.get(b),!m)throw new Error("missing: "+b);if(m===L6)throw new Error("ambiguous: "+b);m.children?m.children.push(_):m.children=[_],_.parent=m}else{if(p)throw new Error("multiple roots");p=_}if(!p)throw new Error("no root");if(n!=null){for(;p.data===JS&&p.children.length===1;)p=p.children[0],--l;for(let T=a.length-1;T>=0&&(_=a[T],_.data===JS);--T)_.data=null}if(p.parent=ult,p.eachBefore(function(T){T.depth=T.parent.depth+1,--l}).eachBefore(xq),p.parent=null,l>0)throw new Error("cycle");return p}return i.id=function(r){return arguments.length?(t=y_(r),i):t},i.parentId=function(r){return arguments.length?(e=y_(r),i):e},i.path=function(r){return arguments.length?(n=y_(r),i):n},i}function flt(t){t=`${t}`;let e=t.length;return xC(t,e-1)&&!xC(t,e-2)&&(t=t.slice(0,-1)),t[0]==="/"?t:`/${t}`}function F6(t){let e=t.length;if(e<2)return"";for(;--e>1&&!xC(t,e););return t.slice(0,e)}function xC(t,e){if(t[e]==="/"){let n=0;for(;e>0&&t[--e]==="\\";)++n;if((n&1)===0)return!0}return!1}function hlt(t,e){return t.parent===e.parent?1:2}function tA(t){var e=t.children;return e?e[0]:t.t}function eA(t){var e=t.children;return e?e[e.length-1]:t.t}function dlt(t,e,n){var i=n/(e.i-t.i);e.c-=i,e.s+=n,t.c+=i,e.z+=n,e.m+=n}function plt(t){for(var e=0,n=0,i=t.children,r=i.length,a;--r>=0;)a=i[r],a.z+=e,a.m+=e,e+=a.s+(n+=a.c)}function glt(t,e,n){return t.a.parent===e.parent?t.a:n}function v_(t,e){this._=t,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=e}v_.prototype=Object.create(fp.prototype);function mlt(t){for(var e=new v_(t,0),n,i=[e],r,a,o,s;n=i.pop();)if(a=n._.children)for(n.children=new Array(s=a.length),o=s-1;o>=0;--o)i.push(r=n.children[o]=new v_(a[o],o)),r.parent=n;return(e.parent=new v_(null,0)).children=[e],e}function ylt(){var t=hlt,e=1,n=1,i=null;function r(f){var d=mlt(f);if(d.eachAfter(a),d.parent.m=-d.z,d.eachBefore(o),i)f.eachBefore(l);else{var p=f,m=f,_=f;f.eachBefore(function(M){M.x<p.x&&(p=M),M.x>m.x&&(m=M),M.depth>_.depth&&(_=M)});var b=p===m?1:t(p,m)/2,x=b-p.x,S=e/(m.x+b+x),T=n/(_.depth||1);f.eachBefore(function(M){M.x=(M.x+x)*S,M.y=M.depth*T})}return f}function a(f){var d=f.children,p=f.parent.children,m=f.i?p[f.i-1]:null;if(d){plt(f);var _=(d[0].z+d[d.length-1].z)/2;m?(f.z=m.z+t(f._,m._),f.m=f.z-_):f.z=_}else m&&(f.z=m.z+t(f._,m._));f.parent.A=s(f,m,f.parent.A||p[0])}function o(f){f._.x=f.z+f.parent.m,f.m+=f.parent.m}function s(f,d,p){if(d){for(var m=f,_=f,b=d,x=m.parent.children[0],S=m.m,T=_.m,M=b.m,k=x.m,$;b=eA(b),m=tA(m),b&&m;)x=tA(x),_=eA(_),_.a=f,$=b.z+M-m.z-S+t(b._,m._),$>0&&(dlt(glt(b,f,p),f,$),S+=$,T+=$),M+=b.m,S+=m.m,k+=x.m,T+=_.m;b&&!eA(_)&&(_.t=b,_.m+=M-T),m&&!tA(x)&&(x.t=m,x.m+=S-k,p=f)}return p}function l(f){f.x*=e,f.y=f.depth*n}return r.separation=function(f){return arguments.length?(t=f,r):t},r.size=function(f){return arguments.length?(i=!1,e=+f[0],n=+f[1],r):i?null:[e,n]},r.nodeSize=function(f){return arguments.length?(i=!0,e=+f[0],n=+f[1],r):i?[e,n]:null},r}function a2(t,e,n,i,r){for(var a=t.children,o,s=-1,l=a.length,f=t.value&&(r-n)/t.value;++s<l;)o=a[s],o.x0=e,o.x1=i,o.y0=n,o.y1=n+=o.value*f}var Tq=(1+Math.sqrt(5))/2;function Cq(t,e,n,i,r,a){for(var o=[],s=e.children,l,f,d=0,p=0,m=s.length,_,b,x=e.value,S,T,M,k,$,D,F;d<m;){_=r-n,b=a-i;do S=s[p++].value;while(!S&&p<m);for(T=M=S,D=Math.max(b/_,_/b)/(x*t),F=S*S*D,$=Math.max(M/F,F/T);p<m;++p){if(S+=f=s[p].value,f<T&&(T=f),f>M&&(M=f),F=S*S*D,k=Math.max(M/F,F/T),k>$){S-=f;break}$=k}o.push(l={value:S,dice:_<b,children:s.slice(d,p)}),l.dice?yy(l,n,i,r,x?i+=b*S/x:a):a2(l,n,i,x?n+=_*S/x:r,a),x-=S,d=p}return o}const Mq=function t(e){function n(i,r,a,o,s){Cq(e,i,r,a,o,s)}return n.ratio=function(i){return t((i=+i)>1?i:1)},n}(Tq);function vlt(){var t=Mq,e=!1,n=1,i=1,r=[0],a=Sf,o=Sf,s=Sf,l=Sf,f=Sf;function d(m){return m.x0=m.y0=0,m.x1=n,m.y1=i,m.eachBefore(p),r=[0],e&&m.eachBefore(Aq),m}function p(m){var _=r[m.depth],b=m.x0+_,x=m.y0+_,S=m.x1-_,T=m.y1-_;S<b&&(b=S=(b+S)/2),T<x&&(x=T=(x+T)/2),m.x0=b,m.y0=x,m.x1=S,m.y1=T,m.children&&(_=r[m.depth+1]=a(m)/2,b+=f(m)-_,x+=o(m)-_,S-=s(m)-_,T-=l(m)-_,S<b&&(b=S=(b+S)/2),T<x&&(x=T=(x+T)/2),t(m,b,x,S,T))}return d.round=function(m){return arguments.length?(e=!!m,d):e},d.size=function(m){return arguments.length?(n=+m[0],i=+m[1],d):[n,i]},d.tile=function(m){return arguments.length?(t=wq(m),d):t},d.padding=function(m){return arguments.length?d.paddingInner(m).paddingOuter(m):d.paddingInner()},d.paddingInner=function(m){return arguments.length?(a=typeof m=="function"?m:Td(+m),d):a},d.paddingOuter=function(m){return arguments.length?d.paddingTop(m).paddingRight(m).paddingBottom(m).paddingLeft(m):d.paddingTop()},d.paddingTop=function(m){return arguments.length?(o=typeof m=="function"?m:Td(+m),d):o},d.paddingRight=function(m){return arguments.length?(s=typeof m=="function"?m:Td(+m),d):s},d.paddingBottom=function(m){return arguments.length?(l=typeof m=="function"?m:Td(+m),d):l},d.paddingLeft=function(m){return arguments.length?(f=typeof m=="function"?m:Td(+m),d):f},d}function _lt(t,e,n,i,r){var a=t.children,o,s=a.length,l,f=new Array(s+1);for(f[0]=l=o=0;o<s;++o)f[o+1]=l+=a[o].value;d(0,s,t.value,e,n,i,r);function d(p,m,_,b,x,S,T){if(p>=m-1){var M=a[p];M.x0=b,M.y0=x,M.x1=S,M.y1=T;return}for(var k=f[p],$=_/2+k,D=p+1,F=m-1;D<F;){var N=D+F>>>1;f[N]<$?D=N+1:F=N}$-f[D-1]<f[D]-$&&p+1<D&&--D;var I=f[D]-k,q=_-I;if(S-b>T-x){var Y=_?(b*q+S*I)/_:S;d(p,D,I,b,x,Y,T),d(D,m,q,Y,x,S,T)}else{var H=_?(x*q+T*I)/_:T;d(p,D,I,b,x,S,H),d(D,m,q,b,H,S,T)}}}function blt(t,e,n,i,r){(t.depth&1?a2:yy)(t,e,n,i,r)}const xlt=function t(e){function n(i,r,a,o,s){if((l=i._squarify)&&l.ratio===e)for(var l,f,d,p,m=-1,_,b=l.length,x=i.value;++m<b;){for(f=l[m],d=f.children,p=f.value=0,_=d.length;p<_;++p)f.value+=d[p].value;f.dice?yy(f,r,a,o,x?a+=(s-a)*f.value/x:s):a2(f,r,a,x?r+=(o-r)*f.value/x:o,s),x-=f.value}else i._squarify=l=Cq(e,i,r,a,o,s),l.ratio=e}return n.ratio=function(i){return t((i=+i)>1?i:1)},n}(Tq);function wC(t,e,n){const i={};return t.each(r=>{const a=r.data;n(a)&&(i[e(a)]=r)}),t.lookup=i,t}function S3(t){ct.call(this,null,t)}S3.Definition={type:"Nest",metadata:{treesource:!0,changes:!0},params:[{name:"keys",type:"field",array:!0},{name:"generate",type:"boolean"}]};const wlt=t=>t.values;kt(S3,ct,{transform(t,e){e.source||dt("Nest transform requires an upstream data source.");var n=t.generate,i=t.modified(),r=e.clone(),a=this.value;return(!a||i||e.changed())&&(a&&a.each(o=>{o.children&&_x(o.data)&&r.rem.push(o.data)}),this.value=a=E3({values:Nt(t.keys).reduce((o,s)=>(o.key(s),o),Elt()).entries(r.source)},wlt),n&&a.each(o=>{o.children&&(o=De(o.data),r.add.push(o),r.source.push(o))}),wC(a,Gt,Gt)),r.source.root=a,r}});function Elt(){const t=[],e={entries:r=>i(n(r,0),0),key:r=>(t.push(r),e)};function n(r,a){if(a>=t.length)return r;const o=r.length,s=t[a++],l={},f={};let d=-1,p,m,_;for(;++d<o;)p=s(m=r[d])+"",(_=l[p])?_.push(m):l[p]=[m];for(p in l)f[p]=n(l[p],a);return f}function i(r,a){if(++a>t.length)return r;const o=[];for(const s in r)o.push({key:s,values:i(r[s],a)});return o}return e}function Mu(t){ct.call(this,null,t)}const Slt=(t,e)=>t.parent===e.parent?1:2;kt(Mu,ct,{transform(t,e){(!e.source||!e.source.root)&&dt(this.constructor.name+" transform requires a backing tree data source.");const n=this.layout(t.method),i=this.fields,r=e.source.root,a=t.as||i;t.field?r.sum(t.field):r.count(),t.sort&&r.sort(lh(t.sort,o=>o.data)),Alt(n,this.params,t),n.separation&&n.separation(t.separation!==!1?Slt:Mp);try{this.value=n(r)}catch(o){dt(o)}return r.each(o=>Tlt(o,i,a)),e.reflow(t.modified()).modifies(a).modifies("leaf")}});function Alt(t,e,n){for(let i,r=0,a=e.length;r<a;++r)i=e[r],i in n&&t[i](n[i])}function Tlt(t,e,n){const i=t.data,r=e.length-1;for(let a=0;a<r;++a)i[n[a]]=t[e[a]];i[n[r]]=t.children?t.children.length:0}const EC=["x","y","r","depth","children"];function A3(t){Mu.call(this,t)}A3.Definition={type:"Pack",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"radius",type:"field",default:null},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:EC.length,default:EC}]};kt(A3,Mu,{layout:olt,params:["radius","size","padding"],fields:EC});const SC=["x0","y0","x1","y1","depth","children"];function T3(t){Mu.call(this,t)}T3.Definition={type:"Partition",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:SC.length,default:SC}]};kt(T3,Mu,{layout:slt,params:["size","round","padding"],fields:SC});function C3(t){ct.call(this,null,t)}C3.Definition={type:"Stratify",metadata:{treesource:!0},params:[{name:"key",type:"field",required:!0},{name:"parentKey",type:"field",required:!0}]};kt(C3,ct,{transform(t,e){e.source||dt("Stratify transform requires an upstream data source.");let n=this.value;const i=t.modified(),r=e.fork(e.ALL).materialize(e.SOURCE),a=!n||i||e.changed(e.ADD_REM)||e.modified(t.key.fields)||e.modified(t.parentKey.fields);return r.source=r.source.slice(),a&&(n=r.source.length?wC(z6().id(t.key).parentId(t.parentKey)(r.source),t.key,Ta):wC(z6()([{}]),t.key,t.key)),r.source.root=this.value=n,r}});const P6={tidy:ylt,cluster:kut},AC=["x","y","depth","children"];function M3(t){Mu.call(this,t)}M3.Definition={type:"Tree",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"tidy",values:["tidy","cluster"]},{name:"size",type:"number",array:!0,length:2},{name:"nodeSize",type:"number",array:!0,length:2},{name:"separation",type:"boolean",default:!0},{name:"as",type:"string",array:!0,length:AC.length,default:AC}]};kt(M3,Mu,{layout(t){const e=t||"tidy";if(zt(P6,e))return P6[e]();dt("Unrecognized Tree layout method: "+e)},params:["size","nodeSize"],fields:AC});function k3(t){ct.call(this,[],t)}k3.Definition={type:"TreeLinks",metadata:{tree:!0,generates:!0,changes:!0},params:[]};kt(k3,ct,{transform(t,e){const n=this.value,i=e.source&&e.source.root,r=e.fork(e.NO_SOURCE),a={};return i||dt("TreeLinks transform requires a tree data source."),e.changed(e.ADD_REM)?(r.rem=n,e.visit(e.SOURCE,o=>a[Gt(o)]=1),i.each(o=>{const s=o.data,l=o.parent&&o.parent.data;l&&a[Gt(s)]&&a[Gt(l)]&&r.add.push(De({source:l,target:s}))}),this.value=r.add):e.changed(e.MOD)&&(e.visit(e.MOD,o=>a[Gt(o)]=1),n.forEach(o=>{(a[Gt(o.source)]||a[Gt(o.target)])&&r.mod.push(o)})),r}});const B6={binary:_lt,dice:yy,slice:a2,slicedice:blt,squarify:Mq,resquarify:xlt},TC=["x0","y0","x1","y1","depth","children"];function O3(t){Mu.call(this,t)}O3.Definition={type:"Treemap",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"squarify",values:["squarify","resquarify","binary","dice","slice","slicedice"]},{name:"padding",type:"number",default:0},{name:"paddingInner",type:"number",default:0},{name:"paddingOuter",type:"number",default:0},{name:"paddingTop",type:"number",default:0},{name:"paddingRight",type:"number",default:0},{name:"paddingBottom",type:"number",default:0},{name:"paddingLeft",type:"number",default:0},{name:"ratio",type:"number",default:1.618033988749895},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:TC.length,default:TC}]};kt(O3,Mu,{layout(){const t=vlt();return t.ratio=e=>{const n=t.tile();n.ratio&&t.tile(n.ratio(e))},t.method=e=>{zt(B6,e)?t.tile(B6[e]):dt("Unrecognized Treemap layout method: "+e)},t},params:["method","ratio","size","round","padding","paddingInner","paddingOuter","paddingTop","paddingRight","paddingBottom","paddingLeft"],fields:TC});const Clt=Object.freeze(Object.defineProperty({__proto__:null,nest:S3,pack:A3,partition:T3,stratify:C3,tree:M3,treelinks:k3,treemap:O3},Symbol.toStringTag,{value:"Module"})),nA=4278190080;function Mlt(t,e){const n=t.bitmap();return(e||[]).forEach(i=>n.set(t(i.boundary[0]),t(i.boundary[3]))),[n,void 0]}function klt(t,e,n,i,r){const a=t.width,o=t.height,s=i||r,l=Ql(a,o).getContext("2d"),f=Ql(a,o).getContext("2d"),d=s&&Ql(a,o).getContext("2d");n.forEach(I=>__(l,I,!1)),__(f,e,!1),s&&__(d,e,!0);const p=iA(l,a,o),m=iA(f,a,o),_=s&&iA(d,a,o),b=t.bitmap(),x=s&&t.bitmap();let S,T,M,k,$,D,F,N;for(T=0;T<o;++T)for(S=0;S<a;++S)$=T*a+S,D=p[$]&nA,N=m[$]&nA,F=s&&_[$]&nA,(D||F||N)&&(M=t(S),k=t(T),!r&&(D||N)&&b.set(M,k),s&&(D||F)&&x.set(M,k));return[b,x]}function iA(t,e,n){return new Uint32Array(t.getImageData(0,0,e,n).data.buffer)}function __(t,e,n){if(!e.length)return;const i=e[0].mark.marktype;i==="group"?e.forEach(r=>{r.items.forEach(a=>__(t,a.items,n))}):na[i].draw(t,{items:n?e.map(Olt):e})}function Olt(t){const e=bx(t,{});return e.stroke&&e.strokeOpacity!==0||e.fill&&e.fillOpacity!==0?{...e,strokeOpacity:1,stroke:"#000",fillOpacity:0}:e}const tu=5,Xi=31,D0=32,zl=new Uint32Array(D0+1),Qa=new Uint32Array(D0+1);Qa[0]=0;zl[0]=~Qa[0];for(let t=1;t<=D0;++t)Qa[t]=Qa[t-1]<<1|1,zl[t]=~Qa[t];function $lt(t,e){const n=new Uint32Array(~~((t*e+D0)/D0));function i(a,o){n[a]|=o}function r(a,o){n[a]&=o}return{array:n,get:(a,o)=>{const s=o*t+a;return n[s>>>tu]&1<<(s&Xi)},set:(a,o)=>{const s=o*t+a;i(s>>>tu,1<<(s&Xi))},clear:(a,o)=>{const s=o*t+a;r(s>>>tu,~(1<<(s&Xi)))},getRange:(a,o,s,l)=>{let f=l,d,p,m,_;for(;f>=o;--f)if(d=f*t+a,p=f*t+s,m=d>>>tu,_=p>>>tu,m===_){if(n[m]&zl[d&Xi]&Qa[(p&Xi)+1])return!0}else{if(n[m]&zl[d&Xi]||n[_]&Qa[(p&Xi)+1])return!0;for(let b=m+1;b<_;++b)if(n[b])return!0}return!1},setRange:(a,o,s,l)=>{let f,d,p,m,_;for(;o<=l;++o)if(f=o*t+a,d=o*t+s,p=f>>>tu,m=d>>>tu,p===m)i(p,zl[f&Xi]&Qa[(d&Xi)+1]);else for(i(p,zl[f&Xi]),i(m,Qa[(d&Xi)+1]),_=p+1;_<m;++_)i(_,4294967295)},clearRange:(a,o,s,l)=>{let f,d,p,m,_;for(;o<=l;++o)if(f=o*t+a,d=o*t+s,p=f>>>tu,m=d>>>tu,p===m)r(p,Qa[f&Xi]|zl[(d&Xi)+1]);else for(r(p,Qa[f&Xi]),r(m,zl[(d&Xi)+1]),_=p+1;_<m;++_)r(_,0)},outOfBounds:(a,o,s,l)=>a<0||o<0||l>=e||s>=t}}function Dlt(t,e,n){const i=Math.max(1,Math.sqrt(t*e/1e6)),r=~~((t+2*n+i)/i),a=~~((e+2*n+i)/i),o=s=>~~((s+n)/i);return o.invert=s=>s*i-n,o.bitmap=()=>$lt(r,a),o.ratio=i,o.padding=n,o.width=t,o.height=e,o}function Rlt(t,e,n,i){const r=t.width,a=t.height;return function(o){const s=o.datum.datum.items[i].items,l=s.length,f=o.datum.fontSize,d=Vr.width(o.datum,o.datum.text);let p=0,m,_,b,x,S,T,M;for(let k=0;k<l;++k)m=s[k].x,b=s[k].y,_=s[k].x2===void 0?m:s[k].x2,x=s[k].y2===void 0?b:s[k].y2,S=(m+_)/2,T=(b+x)/2,M=Math.abs(_-m+x-b),M>=p&&(p=M,o.x=S,o.y=T);return S=d/2,T=f/2,m=o.x-S,_=o.x+S,b=o.y-T,x=o.y+T,o.align="center",m<0&&_<=r?o.align="left":0<=m&&r<_&&(o.align="right"),o.baseline="middle",b<0&&x<=a?o.baseline="top":0<=b&&a<x&&(o.baseline="bottom"),!0}}function zb(t,e,n,i,r,a){let o=n/2;return t-o<0||t+o>r||e-(o=i/2)<0||e+o>a}function Zl(t,e,n,i,r,a,o,s){const l=r*a/(i*2),f=t(e-l),d=t(e+l),p=t(n-(a=a/2)),m=t(n+a);return o.outOfBounds(f,p,d,m)||o.getRange(f,p,d,m)||s&&s.getRange(f,p,d,m)}function Nlt(t,e,n,i){const r=t.width,a=t.height,o=e[0],s=e[1];function l(f,d,p,m,_){const b=t.invert(f),x=t.invert(d);let S=p,T=a,M;if(!zb(b,x,m,_,r,a)&&!Zl(t,b,x,_,m,S,o,s)&&!Zl(t,b,x,_,m,_,o,null)){for(;T-S>=1;)M=(S+T)/2,Zl(t,b,x,_,m,M,o,s)?T=M:S=M;if(S>p)return[b,x,S,!0]}}return function(f){const d=f.datum.datum.items[i].items,p=d.length,m=f.datum.fontSize,_=Vr.width(f.datum,f.datum.text);let b=n?m:0,x=!1,S=!1,T=0,M,k,$,D,F,N,I,q,Y,H,et,nt,W,j,U,X,V;for(let ot=0;ot<p;++ot){for(M=d[ot].x,$=d[ot].y,k=d[ot].x2===void 0?M:d[ot].x2,D=d[ot].y2===void 0?$:d[ot].y2,M>k&&(V=M,M=k,k=V),$>D&&(V=$,$=D,D=V),Y=t(M),et=t(k),H=~~((Y+et)/2),nt=t($),j=t(D),W=~~((nt+j)/2),I=H;I>=Y;--I)for(q=W;q>=nt;--q)X=l(I,q,b,_,m),X&&([f.x,f.y,b,x]=X);for(I=H;I<=et;++I)for(q=W;q<=j;++q)X=l(I,q,b,_,m),X&&([f.x,f.y,b,x]=X);!x&&!n&&(U=Math.abs(k-M+D-$),F=(M+k)/2,N=($+D)/2,U>=T&&!zb(F,N,_,m,r,a)&&!Zl(t,F,N,m,_,m,o,null)&&(T=U,f.x=F,f.y=N,S=!0))}return x||S?(F=_/2,N=m/2,o.setRange(t(f.x-F),t(f.y-N),t(f.x+F),t(f.y+N)),f.align="center",f.baseline="middle",!0):!1}}const Llt=[-1,-1,1,1],zlt=[-1,1,-1,1];function Flt(t,e,n,i){const r=t.width,a=t.height,o=e[0],s=e[1],l=t.bitmap();return function(f){const d=f.datum.datum.items[i].items,p=d.length,m=f.datum.fontSize,_=Vr.width(f.datum,f.datum.text),b=[];let x=n?m:0,S=!1,T=!1,M=0,k,$,D,F,N,I,q,Y,H,et,nt,W;for(let j=0;j<p;++j){for(k=d[j].x,D=d[j].y,$=d[j].x2===void 0?k:d[j].x2,F=d[j].y2===void 0?D:d[j].y2,b.push([t((k+$)/2),t((D+F)/2)]);b.length;)if([q,Y]=b.pop(),!(o.get(q,Y)||s.get(q,Y)||l.get(q,Y))){l.set(q,Y);for(let U=0;U<4;++U)N=q+Llt[U],I=Y+zlt[U],l.outOfBounds(N,I,N,I)||b.push([N,I]);if(N=t.invert(q),I=t.invert(Y),H=x,et=a,!zb(N,I,_,m,r,a)&&!Zl(t,N,I,m,_,H,o,s)&&!Zl(t,N,I,m,_,m,o,null)){for(;et-H>=1;)nt=(H+et)/2,Zl(t,N,I,m,_,nt,o,s)?et=nt:H=nt;H>x&&(f.x=N,f.y=I,x=H,S=!0)}}!S&&!n&&(W=Math.abs($-k+F-D),N=(k+$)/2,I=(D+F)/2,W>=M&&!zb(N,I,_,m,r,a)&&!Zl(t,N,I,m,_,m,o,null)&&(M=W,f.x=N,f.y=I,T=!0))}return S||T?(N=_/2,I=m/2,o.setRange(t(f.x-N),t(f.y-I),t(f.x+N),t(f.y+I)),f.align="center",f.baseline="middle",!0):!1}}const Plt=["right","center","left"],Blt=["bottom","middle","top"];function Ult(t,e,n,i){const r=t.width,a=t.height,o=e[0],s=e[1],l=i.length;return function(f){const d=f.boundary,p=f.datum.fontSize;if(d[2]<0||d[5]<0||d[0]>r||d[3]>a)return!1;let m=f.textWidth??0,_,b,x,S,T,M,k,$,D,F,N,I,q,Y,H;for(let et=0;et<l;++et){if(_=(n[et]&3)-1,b=(n[et]>>>2&3)-1,x=_===0&&b===0||i[et]<0,S=_&&b?Math.SQRT1_2:1,T=i[et]<0?-1:1,M=d[1+_]+i[et]*_*S,N=d[4+b]+T*p*b/2+i[et]*b*S,$=N-p/2,D=N+p/2,I=t(M),Y=t($),H=t(D),!m)if(U6(I,I,Y,H,o,s,M,M,$,D,d,x))m=Vr.width(f.datum,f.datum.text);else continue;if(F=M+T*m*_/2,M=F-m/2,k=F+m/2,I=t(M),q=t(k),U6(I,q,Y,H,o,s,M,k,$,D,d,x))return f.x=_?_*T<0?k:M:F,f.y=b?b*T<0?D:$:N,f.align=Plt[_*T+1],f.baseline=Blt[b*T+1],o.setRange(I,Y,q,H),!0}return!1}}function U6(t,e,n,i,r,a,o,s,l,f,d,p){return!(r.outOfBounds(t,n,e,i)||(p&&a||r).getRange(t,n,e,i))}const rA=0,aA=4,oA=8,sA=0,uA=1,lA=2,Ilt={"top-left":rA+sA,top:rA+uA,"top-right":rA+lA,left:aA+sA,middle:aA+uA,right:aA+lA,"bottom-left":oA+sA,bottom:oA+uA,"bottom-right":oA+lA},qlt={naive:Rlt,"reduced-search":Nlt,floodfill:Flt};function jlt(t,e,n,i,r,a,o,s,l,f,d){if(!t.length)return t;const p=Math.max(i.length,r.length),m=Hlt(i,p),_=Glt(r,p),b=Zlt(t[0].datum),x=b==="group"&&t[0].datum.items[l].marktype,S=x==="area",T=Ylt(b,x,s,l),M=f===null||f===1/0,k=S&&d==="naive";let $=-1,D=-1;const F=t.map(Y=>{const H=M?Vr.width(Y,Y.text):void 0;return $=Math.max($,H),D=Math.max(D,Y.fontSize),{datum:Y,opacity:0,x:void 0,y:void 0,align:void 0,baseline:void 0,boundary:T(Y),textWidth:H}});f=f===null||f===1/0?Math.max($,D)+Math.max(...i):f;const N=Dlt(e[0],e[1],f);let I;if(!k){n&&F.sort((et,nt)=>n(et.datum,nt.datum));let Y=!1;for(let et=0;et<_.length&&!Y;++et)Y=_[et]===5||m[et]<0;const H=(b&&o||S)&&t.map(et=>et.datum);I=a.length||H?klt(N,H||[],a,Y,S):Mlt(N,o&&F)}const q=S?qlt[d](N,I,o,l):Ult(N,I,_,m);return F.forEach(Y=>Y.opacity=+q(Y)),F}function Hlt(t,e){const n=new Float64Array(e),i=t.length;for(let r=0;r<i;++r)n[r]=t[r]||0;for(let r=i;r<e;++r)n[r]=n[i-1];return n}function Glt(t,e){const n=new Int8Array(e),i=t.length;for(let r=0;r<i;++r)n[r]|=Ilt[t[r]];for(let r=i;r<e;++r)n[r]=n[i-1];return n}function Zlt(t){return t&&t.mark&&t.mark.marktype}function Ylt(t,e,n,i){const r=a=>[a.x,a.x,a.x,a.y,a.y,a.y];return t?t==="line"||t==="area"?a=>r(a.datum):e==="line"?a=>{const o=a.datum.items[i].items;return r(o.length?o[n==="start"?0:o.length-1]:{x:NaN,y:NaN})}:a=>{const o=a.datum.bounds;return[o.x1,(o.x1+o.x2)/2,o.x2,o.y1,(o.y1+o.y2)/2,o.y2]}:r}const CC=["x","y","opacity","align","baseline"],kq=["top-left","left","bottom-left","top","bottom","top-right","right","bottom-right"];function $3(t){ct.call(this,null,t)}$3.Definition={type:"Label",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"sort",type:"compare"},{name:"anchor",type:"string",array:!0,default:kq},{name:"offset",type:"number",array:!0,default:[1]},{name:"padding",type:"number",default:0,null:!0},{name:"lineAnchor",type:"string",values:["start","end"],default:"end"},{name:"markIndex",type:"number",default:0},{name:"avoidBaseMark",type:"boolean",default:!0},{name:"avoidMarks",type:"data",array:!0},{name:"method",type:"string",default:"naive"},{name:"as",type:"string",array:!0,length:CC.length,default:CC}]};kt($3,ct,{transform(t,e){function n(a){const o=t[a];return se(o)&&e.modified(o.fields)}const i=t.modified();if(!(i||e.changed(e.ADD_REM)||n("sort")))return;(!t.size||t.size.length!==2)&&dt("Size parameter should be specified as a [width, height] array.");const r=t.as||CC;return jlt(e.materialize(e.SOURCE).source||[],t.size,t.sort,Nt(t.offset==null?1:t.offset),Nt(t.anchor||kq),t.avoidMarks||[],t.avoidBaseMark!==!1,t.lineAnchor||"end",t.markIndex||0,t.padding===void 0?0:t.padding,t.method||"naive").forEach(a=>{const o=a.datum;o[r[0]]=a.x,o[r[1]]=a.y,o[r[2]]=a.opacity,o[r[3]]=a.align,o[r[4]]=a.baseline}),e.reflow(i).modifies(r)}});const Xlt=Object.freeze(Object.defineProperty({__proto__:null,label:$3},Symbol.toStringTag,{value:"Module"}));function Oq(t,e){var n=[],i=function(d){return d(s)},r,a,o,s,l,f;if(e==null)n.push(t);else for(r={},a=0,o=t.length;a<o;++a)s=t[a],l=e.map(i),f=r[l],f||(r[l]=f=[],f.dims=l,n.push(f)),f.push(s);return n}function D3(t){ct.call(this,null,t)}D3.Definition={type:"Loess",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"bandwidth",type:"number",default:.3},{name:"as",type:"string",array:!0}]};kt(D3,ct,{transform(t,e){const n=e.fork(e.NO_SOURCE|e.NO_FIELDS);if(!this.value||e.changed()||t.modified()){const i=e.materialize(e.SOURCE).source,r=Oq(i,t.groupby),a=(t.groupby||[]).map(xn),o=a.length,s=t.as||[xn(t.x),xn(t.y)],l=[];r.forEach(f=>{P9(f,t.x,t.y,t.bandwidth||.3).forEach(d=>{const p={};for(let m=0;m<o;++m)p[a[m]]=f.dims[m];p[s[0]]=d[0],p[s[1]]=d[1],l.push(De(p))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=l}return n}});const MC={constant:dk,linear:pk,log:N9,exp:L9,pow:z9,quad:gk,poly:F9},Wlt=(t,e)=>t==="poly"?e:t==="quad"?2:1;function R3(t){ct.call(this,null,t)}R3.Definition={type:"Regression",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"string",default:"linear",values:Object.keys(MC)},{name:"order",type:"number",default:3},{name:"extent",type:"number",array:!0,length:2},{name:"params",type:"boolean",default:!1},{name:"as",type:"string",array:!0}]};kt(R3,ct,{transform(t,e){const n=e.fork(e.NO_SOURCE|e.NO_FIELDS);if(!this.value||e.changed()||t.modified()){const i=e.materialize(e.SOURCE).source,r=Oq(i,t.groupby),a=(t.groupby||[]).map(xn),o=t.method||"linear",s=t.order==null?3:t.order,l=Wlt(o,s),f=t.as||[xn(t.x),xn(t.y)],d=MC[o],p=[];let m=t.extent;zt(MC,o)||dt("Invalid regression method: "+o),m!=null&&o==="log"&&m[0]<=0&&(e.dataflow.warn("Ignoring extent with values <= 0 for log regression."),m=null),r.forEach(_=>{if(_.length<=l){e.dataflow.warn("Skipping regression with more parameters than data points.");return}const x=d(_,t.x,t.y,s);if(t.params){p.push(De({keys:_.dims,coef:x.coef,rSquared:x.rSquared}));return}const S=m||ts(_,t.x),T=M=>{const k={};for(let $=0;$<a.length;++$)k[a[$]]=_.dims[$];k[f[0]]=M[0],k[f[1]]=M[1],p.push(De(k))};o==="linear"||o==="constant"?S.forEach(M=>T([M,x.predict(M)])):Cx(x.predict,S,25,200).forEach(T)}),this.value&&(n.rem=this.value),this.value=n.add=n.source=p}return n}});const Vlt=Object.freeze(Object.defineProperty({__proto__:null,loess:D3,regression:R3},Symbol.toStringTag,{value:"Module"})),gu=11102230246251565e-32,Mi=134217729,Qlt=(3+8*gu)*gu;function cA(t,e,n,i,r){let a,o,s,l,f=e[0],d=i[0],p=0,m=0;d>f==d>-f?(a=f,f=e[++p]):(a=d,d=i[++m]);let _=0;if(p<t&&m<n)for(d>f==d>-f?(o=f+a,s=a-(o-f),f=e[++p]):(o=d+a,s=a-(o-d),d=i[++m]),a=o,s!==0&&(r[_++]=s);p<t&&m<n;)d>f==d>-f?(o=a+f,l=o-a,s=a-(o-l)+(f-l),f=e[++p]):(o=a+d,l=o-a,s=a-(o-l)+(d-l),d=i[++m]),a=o,s!==0&&(r[_++]=s);for(;p<t;)o=a+f,l=o-a,s=a-(o-l)+(f-l),f=e[++p],a=o,s!==0&&(r[_++]=s);for(;m<n;)o=a+d,l=o-a,s=a-(o-l)+(d-l),d=i[++m],a=o,s!==0&&(r[_++]=s);return(a!==0||_===0)&&(r[_++]=a),_}function Klt(t,e){let n=e[0];for(let i=1;i<t;i++)n+=e[i];return n}function vy(t){return new Float64Array(t)}const Jlt=(3+16*gu)*gu,tct=(2+12*gu)*gu,ect=(9+64*gu)*gu*gu,bd=vy(4),I6=vy(8),q6=vy(12),j6=vy(16),Wi=vy(4);function nct(t,e,n,i,r,a,o){let s,l,f,d,p,m,_,b,x,S,T,M,k,$,D,F,N,I;const q=t-r,Y=n-r,H=e-a,et=i-a;$=q*et,m=Mi*q,_=m-(m-q),b=q-_,m=Mi*et,x=m-(m-et),S=et-x,D=b*S-($-_*x-b*x-_*S),F=H*Y,m=Mi*H,_=m-(m-H),b=H-_,m=Mi*Y,x=m-(m-Y),S=Y-x,N=b*S-(F-_*x-b*x-_*S),T=D-N,p=D-T,bd[0]=D-(T+p)+(p-N),M=$+T,p=M-$,k=$-(M-p)+(T-p),T=k-F,p=k-T,bd[1]=k-(T+p)+(p-F),I=M+T,p=I-M,bd[2]=M-(I-p)+(T-p),bd[3]=I;let nt=Klt(4,bd),W=tct*o;if(nt>=W||-nt>=W||(p=t-q,s=t-(q+p)+(p-r),p=n-Y,f=n-(Y+p)+(p-r),p=e-H,l=e-(H+p)+(p-a),p=i-et,d=i-(et+p)+(p-a),s===0&&l===0&&f===0&&d===0)||(W=ect*o+Qlt*Math.abs(nt),nt+=q*d+et*s-(H*f+Y*l),nt>=W||-nt>=W))return nt;$=s*et,m=Mi*s,_=m-(m-s),b=s-_,m=Mi*et,x=m-(m-et),S=et-x,D=b*S-($-_*x-b*x-_*S),F=l*Y,m=Mi*l,_=m-(m-l),b=l-_,m=Mi*Y,x=m-(m-Y),S=Y-x,N=b*S-(F-_*x-b*x-_*S),T=D-N,p=D-T,Wi[0]=D-(T+p)+(p-N),M=$+T,p=M-$,k=$-(M-p)+(T-p),T=k-F,p=k-T,Wi[1]=k-(T+p)+(p-F),I=M+T,p=I-M,Wi[2]=M-(I-p)+(T-p),Wi[3]=I;const j=cA(4,bd,4,Wi,I6);$=q*d,m=Mi*q,_=m-(m-q),b=q-_,m=Mi*d,x=m-(m-d),S=d-x,D=b*S-($-_*x-b*x-_*S),F=H*f,m=Mi*H,_=m-(m-H),b=H-_,m=Mi*f,x=m-(m-f),S=f-x,N=b*S-(F-_*x-b*x-_*S),T=D-N,p=D-T,Wi[0]=D-(T+p)+(p-N),M=$+T,p=M-$,k=$-(M-p)+(T-p),T=k-F,p=k-T,Wi[1]=k-(T+p)+(p-F),I=M+T,p=I-M,Wi[2]=M-(I-p)+(T-p),Wi[3]=I;const U=cA(j,I6,4,Wi,q6);$=s*d,m=Mi*s,_=m-(m-s),b=s-_,m=Mi*d,x=m-(m-d),S=d-x,D=b*S-($-_*x-b*x-_*S),F=l*f,m=Mi*l,_=m-(m-l),b=l-_,m=Mi*f,x=m-(m-f),S=f-x,N=b*S-(F-_*x-b*x-_*S),T=D-N,p=D-T,Wi[0]=D-(T+p)+(p-N),M=$+T,p=M-$,k=$-(M-p)+(T-p),T=k-F,p=k-T,Wi[1]=k-(T+p)+(p-F),I=M+T,p=I-M,Wi[2]=M-(I-p)+(T-p),Wi[3]=I;const X=cA(U,q6,4,Wi,j6);return j6[X-1]}function Pv(t,e,n,i,r,a){const o=(e-a)*(n-r),s=(t-r)*(i-a),l=o-s,f=Math.abs(o+s);return Math.abs(l)>=Jlt*f?l:-nct(t,e,n,i,r,a,f)}const H6=Math.pow(2,-52),Bv=new Uint32Array(512);class Fb{static from(e,n=sct,i=uct){const r=e.length,a=new Float64Array(r*2);for(let o=0;o<r;o++){const s=e[o];a[2*o]=n(s),a[2*o+1]=i(s)}return new Fb(a)}constructor(e){const n=e.length>>1;if(n>0&&typeof e[0]!="number")throw new Error("Expected coords to contain numbers.");this.coords=e;const i=Math.max(2*n-5,0);this._triangles=new Uint32Array(i*3),this._halfedges=new Int32Array(i*3),this._hashSize=Math.ceil(Math.sqrt(n)),this._hullPrev=new Uint32Array(n),this._hullNext=new Uint32Array(n),this._hullTri=new Uint32Array(n),this._hullHash=new Int32Array(this._hashSize),this._ids=new Uint32Array(n),this._dists=new Float64Array(n),this.update()}update(){const{coords:e,_hullPrev:n,_hullNext:i,_hullTri:r,_hullHash:a}=this,o=e.length>>1;let s=1/0,l=1/0,f=-1/0,d=-1/0;for(let q=0;q<o;q++){const Y=e[2*q],H=e[2*q+1];Y<s&&(s=Y),H<l&&(l=H),Y>f&&(f=Y),H>d&&(d=H),this._ids[q]=q}const p=(s+f)/2,m=(l+d)/2;let _,b,x;for(let q=0,Y=1/0;q<o;q++){const H=fA(p,m,e[2*q],e[2*q+1]);H<Y&&(_=q,Y=H)}const S=e[2*_],T=e[2*_+1];for(let q=0,Y=1/0;q<o;q++){if(q===_)continue;const H=fA(S,T,e[2*q],e[2*q+1]);H<Y&&H>0&&(b=q,Y=H)}let M=e[2*b],k=e[2*b+1],$=1/0;for(let q=0;q<o;q++){if(q===_||q===b)continue;const Y=act(S,T,M,k,e[2*q],e[2*q+1]);Y<$&&(x=q,$=Y)}let D=e[2*x],F=e[2*x+1];if($===1/0){for(let H=0;H<o;H++)this._dists[H]=e[2*H]-e[0]||e[2*H+1]-e[1];Rd(this._ids,this._dists,0,o-1);const q=new Uint32Array(o);let Y=0;for(let H=0,et=-1/0;H<o;H++){const nt=this._ids[H],W=this._dists[nt];W>et&&(q[Y++]=nt,et=W)}this.hull=q.subarray(0,Y),this.triangles=new Uint32Array(0),this.halfedges=new Uint32Array(0);return}if(Pv(S,T,M,k,D,F)<0){const q=b,Y=M,H=k;b=x,M=D,k=F,x=q,D=Y,F=H}const N=oct(S,T,M,k,D,F);this._cx=N.x,this._cy=N.y;for(let q=0;q<o;q++)this._dists[q]=fA(e[2*q],e[2*q+1],N.x,N.y);Rd(this._ids,this._dists,0,o-1),this._hullStart=_;let I=3;i[_]=n[x]=b,i[b]=n[_]=x,i[x]=n[b]=_,r[_]=0,r[b]=1,r[x]=2,a.fill(-1),a[this._hashKey(S,T)]=_,a[this._hashKey(M,k)]=b,a[this._hashKey(D,F)]=x,this.trianglesLen=0,this._addTriangle(_,b,x,-1,-1,-1);for(let q=0,Y,H;q<this._ids.length;q++){const et=this._ids[q],nt=e[2*et],W=e[2*et+1];if(q>0&&Math.abs(nt-Y)<=H6&&Math.abs(W-H)<=H6||(Y=nt,H=W,et===_||et===b||et===x))continue;let j=0;for(let B=0,J=this._hashKey(nt,W);B<this._hashSize&&(j=a[(J+B)%this._hashSize],!(j!==-1&&j!==i[j]));B++);j=n[j];let U=j,X;for(;X=i[U],Pv(nt,W,e[2*U],e[2*U+1],e[2*X],e[2*X+1])>=0;)if(U=X,U===j){U=-1;break}if(U===-1)continue;let V=this._addTriangle(U,et,i[U],-1,-1,r[U]);r[et]=this._legalize(V+2),r[U]=V,I++;let ot=i[U];for(;X=i[ot],Pv(nt,W,e[2*ot],e[2*ot+1],e[2*X],e[2*X+1])<0;)V=this._addTriangle(ot,et,X,r[et],-1,r[ot]),r[et]=this._legalize(V+2),i[ot]=ot,I--,ot=X;if(U===j)for(;X=n[U],Pv(nt,W,e[2*X],e[2*X+1],e[2*U],e[2*U+1])<0;)V=this._addTriangle(X,et,U,-1,r[U],r[X]),this._legalize(V+2),r[X]=V,i[U]=U,I--,U=X;this._hullStart=n[et]=U,i[U]=n[ot]=et,i[et]=ot,a[this._hashKey(nt,W)]=et,a[this._hashKey(e[2*U],e[2*U+1])]=U}this.hull=new Uint32Array(I);for(let q=0,Y=this._hullStart;q<I;q++)this.hull[q]=Y,Y=i[Y];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(e,n){return Math.floor(ict(e-this._cx,n-this._cy)*this._hashSize)%this._hashSize}_legalize(e){const{_triangles:n,_halfedges:i,coords:r}=this;let a=0,o=0;for(;;){const s=i[e],l=e-e%3;if(o=l+(e+2)%3,s===-1){if(a===0)break;e=Bv[--a];continue}const f=s-s%3,d=l+(e+1)%3,p=f+(s+2)%3,m=n[o],_=n[e],b=n[d],x=n[p];if(rct(r[2*m],r[2*m+1],r[2*_],r[2*_+1],r[2*b],r[2*b+1],r[2*x],r[2*x+1])){n[e]=x,n[s]=m;const T=i[p];if(T===-1){let k=this._hullStart;do{if(this._hullTri[k]===p){this._hullTri[k]=e;break}k=this._hullPrev[k]}while(k!==this._hullStart)}this._link(e,T),this._link(s,i[o]),this._link(o,p);const M=f+(s+1)%3;a<Bv.length&&(Bv[a++]=M)}else{if(a===0)break;e=Bv[--a]}}return o}_link(e,n){this._halfedges[e]=n,n!==-1&&(this._halfedges[n]=e)}_addTriangle(e,n,i,r,a,o){const s=this.trianglesLen;return this._triangles[s]=e,this._triangles[s+1]=n,this._triangles[s+2]=i,this._link(s,r),this._link(s+1,a),this._link(s+2,o),this.trianglesLen+=3,s}}function ict(t,e){const n=t/(Math.abs(t)+Math.abs(e));return(e>0?3-n:1+n)/4}function fA(t,e,n,i){const r=t-n,a=e-i;return r*r+a*a}function rct(t,e,n,i,r,a,o,s){const l=t-o,f=e-s,d=n-o,p=i-s,m=r-o,_=a-s,b=l*l+f*f,x=d*d+p*p,S=m*m+_*_;return l*(p*S-x*_)-f*(d*S-x*m)+b*(d*_-p*m)<0}function act(t,e,n,i,r,a){const o=n-t,s=i-e,l=r-t,f=a-e,d=o*o+s*s,p=l*l+f*f,m=.5/(o*f-s*l),_=(f*d-s*p)*m,b=(o*p-l*d)*m;return _*_+b*b}function oct(t,e,n,i,r,a){const o=n-t,s=i-e,l=r-t,f=a-e,d=o*o+s*s,p=l*l+f*f,m=.5/(o*f-s*l),_=t+(f*d-s*p)*m,b=e+(o*p-l*d)*m;return{x:_,y:b}}function Rd(t,e,n,i){if(i-n<=20)for(let r=n+1;r<=i;r++){const a=t[r],o=e[a];let s=r-1;for(;s>=n&&e[t[s]]>o;)t[s+1]=t[s--];t[s+1]=a}else{const r=n+i>>1;let a=n+1,o=i;_m(t,r,a),e[t[n]]>e[t[i]]&&_m(t,n,i),e[t[a]]>e[t[i]]&&_m(t,a,i),e[t[n]]>e[t[a]]&&_m(t,n,a);const s=t[a],l=e[s];for(;;){do a++;while(e[t[a]]<l);do o--;while(e[t[o]]>l);if(o<a)break;_m(t,a,o)}t[n+1]=t[o],t[o]=s,i-a+1>=o-n?(Rd(t,e,a,i),Rd(t,e,n,o-1)):(Rd(t,e,n,o-1),Rd(t,e,a,i))}}function _m(t,e,n){const i=t[e];t[e]=t[n],t[n]=i}function sct(t){return t[0]}function uct(t){return t[1]}const G6=1e-6;class Mf{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(e,n){this._+=`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(e,n){this._+=`L${this._x1=+e},${this._y1=+n}`}arc(e,n,i){e=+e,n=+n,i=+i;const r=e+i,a=n;if(i<0)throw new Error("negative radius");this._x1===null?this._+=`M${r},${a}`:(Math.abs(this._x1-r)>G6||Math.abs(this._y1-a)>G6)&&(this._+="L"+r+","+a),i&&(this._+=`A${i},${i},0,1,1,${e-i},${n}A${i},${i},0,1,1,${this._x1=r},${this._y1=a}`)}rect(e,n,i,r){this._+=`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${+i}v${+r}h${-i}Z`}value(){return this._||null}}class kC{constructor(){this._=[]}moveTo(e,n){this._.push([e,n])}closePath(){this._.push(this._[0].slice())}lineTo(e,n){this._.push([e,n])}value(){return this._.length?this._:null}}let lct=class{constructor(e,[n,i,r,a]=[0,0,960,500]){if(!((r=+r)>=(n=+n))||!((a=+a)>=(i=+i)))throw new Error("invalid bounds");this.delaunay=e,this._circumcenters=new Float64Array(e.points.length*2),this.vectors=new Float64Array(e.points.length*2),this.xmax=r,this.xmin=n,this.ymax=a,this.ymin=i,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points:e,hull:n,triangles:i},vectors:r}=this;let a,o;const s=this.circumcenters=this._circumcenters.subarray(0,i.length/3*2);for(let x=0,S=0,T=i.length,M,k;x<T;x+=3,S+=2){const $=i[x]*2,D=i[x+1]*2,F=i[x+2]*2,N=e[$],I=e[$+1],q=e[D],Y=e[D+1],H=e[F],et=e[F+1],nt=q-N,W=Y-I,j=H-N,U=et-I,X=(nt*U-W*j)*2;if(Math.abs(X)<1e-9){if(a===void 0){a=o=0;for(const ot of n)a+=e[ot*2],o+=e[ot*2+1];a/=n.length,o/=n.length}const V=1e9*Math.sign((a-N)*U-(o-I)*j);M=(N+H)/2-V*U,k=(I+et)/2+V*j}else{const V=1/X,ot=nt*nt+W*W,B=j*j+U*U;M=N+(U*ot-W*B)*V,k=I+(nt*B-j*ot)*V}s[S]=M,s[S+1]=k}let l=n[n.length-1],f,d=l*4,p,m=e[2*l],_,b=e[2*l+1];r.fill(0);for(let x=0;x<n.length;++x)l=n[x],f=d,p=m,_=b,d=l*4,m=e[2*l],b=e[2*l+1],r[f+2]=r[d]=_-b,r[f+3]=r[d+1]=m-p}render(e){const n=e==null?e=new Mf:void 0,{delaunay:{halfedges:i,inedges:r,hull:a},circumcenters:o,vectors:s}=this;if(a.length<=1)return null;for(let d=0,p=i.length;d<p;++d){const m=i[d];if(m<d)continue;const _=Math.floor(d/3)*2,b=Math.floor(m/3)*2,x=o[_],S=o[_+1],T=o[b],M=o[b+1];this._renderSegment(x,S,T,M,e)}let l,f=a[a.length-1];for(let d=0;d<a.length;++d){l=f,f=a[d];const p=Math.floor(r[f]/3)*2,m=o[p],_=o[p+1],b=l*4,x=this._project(m,_,s[b+2],s[b+3]);x&&this._renderSegment(m,_,x[0],x[1],e)}return n&&n.value()}renderBounds(e){const n=e==null?e=new Mf:void 0;return e.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),n&&n.value()}renderCell(e,n){const i=n==null?n=new Mf:void 0,r=this._clip(e);if(r===null||!r.length)return;n.moveTo(r[0],r[1]);let a=r.length;for(;r[0]===r[a-2]&&r[1]===r[a-1]&&a>1;)a-=2;for(let o=2;o<a;o+=2)(r[o]!==r[o-2]||r[o+1]!==r[o-1])&&n.lineTo(r[o],r[o+1]);return n.closePath(),i&&i.value()}*cellPolygons(){const{delaunay:{points:e}}=this;for(let n=0,i=e.length/2;n<i;++n){const r=this.cellPolygon(n);r&&(r.index=n,yield r)}}cellPolygon(e){const n=new kC;return this.renderCell(e,n),n.value()}_renderSegment(e,n,i,r,a){let o;const s=this._regioncode(e,n),l=this._regioncode(i,r);s===0&&l===0?(a.moveTo(e,n),a.lineTo(i,r)):(o=this._clipSegment(e,n,i,r,s,l))&&(a.moveTo(o[0],o[1]),a.lineTo(o[2],o[3]))}contains(e,n,i){return n=+n,n!==n||(i=+i,i!==i)?!1:this.delaunay._step(e,n,i)===e}*neighbors(e){const n=this._clip(e);if(n)for(const i of this.delaunay.neighbors(e)){const r=this._clip(i);if(r){t:for(let a=0,o=n.length;a<o;a+=2)for(let s=0,l=r.length;s<l;s+=2)if(n[a]===r[s]&&n[a+1]===r[s+1]&&n[(a+2)%o]===r[(s+l-2)%l]&&n[(a+3)%o]===r[(s+l-1)%l]){yield i;break t}}}}_cell(e){const{circumcenters:n,delaunay:{inedges:i,halfedges:r,triangles:a}}=this,o=i[e];if(o===-1)return null;const s=[];let l=o;do{const f=Math.floor(l/3);if(s.push(n[f*2],n[f*2+1]),l=l%3===2?l-2:l+1,a[l]!==e)break;l=r[l]}while(l!==o&&l!==-1);return s}_clip(e){if(e===0&&this.delaunay.hull.length===1)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const n=this._cell(e);if(n===null)return null;const{vectors:i}=this,r=e*4;return this._simplify(i[r]||i[r+1]?this._clipInfinite(e,n,i[r],i[r+1],i[r+2],i[r+3]):this._clipFinite(e,n))}_clipFinite(e,n){const i=n.length;let r=null,a,o,s=n[i-2],l=n[i-1],f,d=this._regioncode(s,l),p,m=0;for(let _=0;_<i;_+=2)if(a=s,o=l,s=n[_],l=n[_+1],f=d,d=this._regioncode(s,l),f===0&&d===0)p=m,m=0,r?r.push(s,l):r=[s,l];else{let b,x,S,T,M;if(f===0){if((b=this._clipSegment(a,o,s,l,f,d))===null)continue;[x,S,T,M]=b}else{if((b=this._clipSegment(s,l,a,o,d,f))===null)continue;[T,M,x,S]=b,p=m,m=this._edgecode(x,S),p&&m&&this._edge(e,p,m,r,r.length),r?r.push(x,S):r=[x,S]}p=m,m=this._edgecode(T,M),p&&m&&this._edge(e,p,m,r,r.length),r?r.push(T,M):r=[T,M]}if(r)p=m,m=this._edgecode(r[0],r[1]),p&&m&&this._edge(e,p,m,r,r.length);else if(this.contains(e,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return r}_clipSegment(e,n,i,r,a,o){const s=a<o;for(s&&([e,n,i,r,a,o]=[i,r,e,n,o,a]);;){if(a===0&&o===0)return s?[i,r,e,n]:[e,n,i,r];if(a&o)return null;let l,f,d=a||o;d&8?(l=e+(i-e)*(this.ymax-n)/(r-n),f=this.ymax):d&4?(l=e+(i-e)*(this.ymin-n)/(r-n),f=this.ymin):d&2?(f=n+(r-n)*(this.xmax-e)/(i-e),l=this.xmax):(f=n+(r-n)*(this.xmin-e)/(i-e),l=this.xmin),a?(e=l,n=f,a=this._regioncode(e,n)):(i=l,r=f,o=this._regioncode(i,r))}}_clipInfinite(e,n,i,r,a,o){let s=Array.from(n),l;if((l=this._project(s[0],s[1],i,r))&&s.unshift(l[0],l[1]),(l=this._project(s[s.length-2],s[s.length-1],a,o))&&s.push(l[0],l[1]),s=this._clipFinite(e,s))for(let f=0,d=s.length,p,m=this._edgecode(s[d-2],s[d-1]);f<d;f+=2)p=m,m=this._edgecode(s[f],s[f+1]),p&&m&&(f=this._edge(e,p,m,s,f),d=s.length);else this.contains(e,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(s=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return s}_edge(e,n,i,r,a){for(;n!==i;){let o,s;switch(n){case 5:n=4;continue;case 4:n=6,o=this.xmax,s=this.ymin;break;case 6:n=2;continue;case 2:n=10,o=this.xmax,s=this.ymax;break;case 10:n=8;continue;case 8:n=9,o=this.xmin,s=this.ymax;break;case 9:n=1;continue;case 1:n=5,o=this.xmin,s=this.ymin;break}(r[a]!==o||r[a+1]!==s)&&this.contains(e,o,s)&&(r.splice(a,0,o,s),a+=2)}return a}_project(e,n,i,r){let a=1/0,o,s,l;if(r<0){if(n<=this.ymin)return null;(o=(this.ymin-n)/r)<a&&(l=this.ymin,s=e+(a=o)*i)}else if(r>0){if(n>=this.ymax)return null;(o=(this.ymax-n)/r)<a&&(l=this.ymax,s=e+(a=o)*i)}if(i>0){if(e>=this.xmax)return null;(o=(this.xmax-e)/i)<a&&(s=this.xmax,l=n+(a=o)*r)}else if(i<0){if(e<=this.xmin)return null;(o=(this.xmin-e)/i)<a&&(s=this.xmin,l=n+(a=o)*r)}return[s,l]}_edgecode(e,n){return(e===this.xmin?1:e===this.xmax?2:0)|(n===this.ymin?4:n===this.ymax?8:0)}_regioncode(e,n){return(e<this.xmin?1:e>this.xmax?2:0)|(n<this.ymin?4:n>this.ymax?8:0)}_simplify(e){if(e&&e.length>4){for(let n=0;n<e.length;n+=2){const i=(n+2)%e.length,r=(n+4)%e.length;(e[n]===e[i]&&e[i]===e[r]||e[n+1]===e[i+1]&&e[i+1]===e[r+1])&&(e.splice(i,2),n-=2)}e.length||(e=null)}return e}};const cct=2*Math.PI,xd=Math.pow;function fct(t){return t[0]}function hct(t){return t[1]}function dct(t){const{triangles:e,coords:n}=t;for(let i=0;i<e.length;i+=3){const r=2*e[i],a=2*e[i+1],o=2*e[i+2];if((n[o]-n[r])*(n[a+1]-n[r+1])-(n[a]-n[r])*(n[o+1]-n[r+1])>1e-10)return!1}return!0}function pct(t,e,n){return[t+Math.sin(t+e)*n,e+Math.cos(t-e)*n]}class N3{static from(e,n=fct,i=hct,r){return new N3("length"in e?gct(e,n,i,r):Float64Array.from(mct(e,n,i,r)))}constructor(e){this._delaunator=new Fb(e),this.inedges=new Int32Array(e.length/2),this._hullIndex=new Int32Array(e.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const e=this._delaunator,n=this.points;if(e.hull&&e.hull.length>2&&dct(e)){this.collinear=Int32Array.from({length:n.length/2},(m,_)=>_).sort((m,_)=>n[2*m]-n[2*_]||n[2*m+1]-n[2*_+1]);const l=this.collinear[0],f=this.collinear[this.collinear.length-1],d=[n[2*l],n[2*l+1],n[2*f],n[2*f+1]],p=1e-8*Math.hypot(d[3]-d[1],d[2]-d[0]);for(let m=0,_=n.length/2;m<_;++m){const b=pct(n[2*m],n[2*m+1],p);n[2*m]=b[0],n[2*m+1]=b[1]}this._delaunator=new Fb(n)}else delete this.collinear;const i=this.halfedges=this._delaunator.halfedges,r=this.hull=this._delaunator.hull,a=this.triangles=this._delaunator.triangles,o=this.inedges.fill(-1),s=this._hullIndex.fill(-1);for(let l=0,f=i.length;l<f;++l){const d=a[l%3===2?l-2:l+1];(i[l]===-1||o[d]===-1)&&(o[d]=l)}for(let l=0,f=r.length;l<f;++l)s[r[l]]=l;r.length<=2&&r.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=r[0],o[r[0]]=1,r.length===2&&(o[r[1]]=0,this.triangles[1]=r[1],this.triangles[2]=r[1]))}voronoi(e){return new lct(this,e)}*neighbors(e){const{inedges:n,hull:i,_hullIndex:r,halfedges:a,triangles:o,collinear:s}=this;if(s){const p=s.indexOf(e);p>0&&(yield s[p-1]),p<s.length-1&&(yield s[p+1]);return}const l=n[e];if(l===-1)return;let f=l,d=-1;do{if(yield d=o[f],f=f%3===2?f-2:f+1,o[f]!==e)return;if(f=a[f],f===-1){const p=i[(r[e]+1)%i.length];p!==d&&(yield p);return}}while(f!==l)}find(e,n,i=0){if(e=+e,e!==e||(n=+n,n!==n))return-1;const r=i;let a;for(;(a=this._step(i,e,n))>=0&&a!==i&&a!==r;)i=a;return a}_step(e,n,i){const{inedges:r,hull:a,_hullIndex:o,halfedges:s,triangles:l,points:f}=this;if(r[e]===-1||!f.length)return(e+1)%(f.length>>1);let d=e,p=xd(n-f[e*2],2)+xd(i-f[e*2+1],2);const m=r[e];let _=m;do{let b=l[_];const x=xd(n-f[b*2],2)+xd(i-f[b*2+1],2);if(x<p&&(p=x,d=b),_=_%3===2?_-2:_+1,l[_]!==e)break;if(_=s[_],_===-1){if(_=a[(o[e]+1)%a.length],_!==b&&xd(n-f[_*2],2)+xd(i-f[_*2+1],2)<p)return _;break}}while(_!==m);return d}render(e){const n=e==null?e=new Mf:void 0,{points:i,halfedges:r,triangles:a}=this;for(let o=0,s=r.length;o<s;++o){const l=r[o];if(l<o)continue;const f=a[o]*2,d=a[l]*2;e.moveTo(i[f],i[f+1]),e.lineTo(i[d],i[d+1])}return this.renderHull(e),n&&n.value()}renderPoints(e,n){n===void 0&&(!e||typeof e.moveTo!="function")&&(n=e,e=null),n=n==null?2:+n;const i=e==null?e=new Mf:void 0,{points:r}=this;for(let a=0,o=r.length;a<o;a+=2){const s=r[a],l=r[a+1];e.moveTo(s+n,l),e.arc(s,l,n,0,cct)}return i&&i.value()}renderHull(e){const n=e==null?e=new Mf:void 0,{hull:i,points:r}=this,a=i[0]*2,o=i.length;e.moveTo(r[a],r[a+1]);for(let s=1;s<o;++s){const l=2*i[s];e.lineTo(r[l],r[l+1])}return e.closePath(),n&&n.value()}hullPolygon(){const e=new kC;return this.renderHull(e),e.value()}renderTriangle(e,n){const i=n==null?n=new Mf:void 0,{points:r,triangles:a}=this,o=a[e*=3]*2,s=a[e+1]*2,l=a[e+2]*2;return n.moveTo(r[o],r[o+1]),n.lineTo(r[s],r[s+1]),n.lineTo(r[l],r[l+1]),n.closePath(),i&&i.value()}*trianglePolygons(){const{triangles:e}=this;for(let n=0,i=e.length/3;n<i;++n)yield this.trianglePolygon(n)}trianglePolygon(e){const n=new kC;return this.renderTriangle(e,n),n.value()}}function gct(t,e,n,i){const r=t.length,a=new Float64Array(r*2);for(let o=0;o<r;++o){const s=t[o];a[o*2]=e.call(i,s,o,t),a[o*2+1]=n.call(i,s,o,t)}return a}function*mct(t,e,n,i){let r=0;for(const a of t)yield e.call(i,a,r,t),yield n.call(i,a,r,t),++r}function L3(t){ct.call(this,null,t)}L3.Definition={type:"Voronoi",metadata:{modifies:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"size",type:"number",array:!0,length:2},{name:"extent",type:"array",array:!0,length:2,default:[[-1e5,-1e5],[1e5,1e5]],content:{type:"number",array:!0,length:2}},{name:"as",type:"string",default:"path"}]};const yct=[-1e5,-1e5,1e5,1e5];kt(L3,ct,{transform(t,e){const n=t.as||"path",i=e.source;if(!i||!i.length)return e;let r=t.size;r=r?[0,0,r[0],r[1]]:(r=t.extent)?[r[0][0],r[0][1],r[1][0],r[1][1]]:yct;const a=this.value=N3.from(i,t.x,t.y).voronoi(r);for(let o=0,s=i.length;o<s;++o){const l=a.cellPolygon(o);i[o][n]=l&&!_ct(l)?vct(l):null}return e.reflow(t.modified()).modifies(n)}});function vct(t){const e=t[0][0],n=t[0][1];let i=t.length-1;for(;t[i][0]===e&&t[i][1]===n;--i);return"M"+t.slice(0,i+1).join("L")+"Z"}function _ct(t){return t.length===2&&t[0][0]===t[1][0]&&t[0][1]===t[1][1]}const bct=Object.freeze(Object.defineProperty({__proto__:null,voronoi:L3},Symbol.toStringTag,{value:"Module"}));var hA=Math.PI/180,Vm=64,b_=2048;function xct(){var t=[256,256],e,n,i,r,a,o,s,l=$q,f=[],d=Math.random,p={};p.layout=function(){for(var b=m(Ql()),x=Cct((t[0]>>5)*t[1]),S=null,T=f.length,M=-1,k=[],$=f.map(F=>({text:e(F),font:n(F),style:r(F),weight:a(F),rotate:o(F),size:~~(i(F)+1e-14),padding:s(F),xoff:0,yoff:0,x1:0,y1:0,x0:0,y0:0,hasText:!1,sprite:null,datum:F})).sort((F,N)=>N.size-F.size);++M<T;){var D=$[M];D.x=t[0]*(d()+.5)>>1,D.y=t[1]*(d()+.5)>>1,wct(b,D,$,M),D.hasText&&_(x,D,S)&&(k.push(D),S?Sct(S,D):S=[{x:D.x+D.x0,y:D.y+D.y0},{x:D.x+D.x1,y:D.y+D.y1}],D.x-=t[0]>>1,D.y-=t[1]>>1)}return k};function m(b){b.width=b.height=1;var x=Math.sqrt(b.getContext("2d").getImageData(0,0,1,1).data.length>>2);b.width=(Vm<<5)/x,b.height=b_/x;var S=b.getContext("2d");return S.fillStyle=S.strokeStyle="red",S.textAlign="center",{context:S,ratio:x}}function _(b,x,S){for(var T=x.x,M=x.y,k=Math.hypot(t[0],t[1]),$=l(t),D=d()<.5?1:-1,F=-D,N,I,q;(N=$(F+=D))&&(I=~~N[0],q=~~N[1],!(Math.min(Math.abs(I),Math.abs(q))>=k));)if(x.x=T+I,x.y=M+q,!(x.x+x.x0<0||x.y+x.y0<0||x.x+x.x1>t[0]||x.y+x.y1>t[1])&&(!S||!Ect(x,b,t[0]))&&(!S||Act(x,S))){for(var Y=x.sprite,H=x.width>>5,et=t[0]>>5,nt=x.x-(H<<4),W=nt&127,j=32-W,U=x.y1-x.y0,X=(x.y+x.y0)*et+(nt>>5),V,ot=0;ot<U;ot++){V=0;for(var B=0;B<=H;B++)b[X+B]|=V<<j|(B<H?(V=Y[ot*H+B])>>>W:0);X+=et}return x.sprite=null,!0}return!1}return p.words=function(b){return arguments.length?(f=b,p):f},p.size=function(b){return arguments.length?(t=[+b[0],+b[1]],p):t},p.font=function(b){return arguments.length?(n=sf(b),p):n},p.fontStyle=function(b){return arguments.length?(r=sf(b),p):r},p.fontWeight=function(b){return arguments.length?(a=sf(b),p):a},p.rotate=function(b){return arguments.length?(o=sf(b),p):o},p.text=function(b){return arguments.length?(e=sf(b),p):e},p.spiral=function(b){return arguments.length?(l=Mct[b]||b,p):l},p.fontSize=function(b){return arguments.length?(i=sf(b),p):i},p.padding=function(b){return arguments.length?(s=sf(b),p):s},p.random=function(b){return arguments.length?(d=b,p):d},p}function wct(t,e,n,i){if(!e.sprite){var r=t.context,a=t.ratio;r.clearRect(0,0,(Vm<<5)/a,b_/a);var o=0,s=0,l=0,f=n.length,d,p,m,_,b;for(--i;++i<f;){if(e=n[i],r.save(),r.font=e.style+" "+e.weight+" "+~~((e.size+1)/a)+"px "+e.font,d=r.measureText(e.text+"m").width*a,m=e.size<<1,e.rotate){var x=Math.sin(e.rotate*hA),S=Math.cos(e.rotate*hA),T=d*S,M=d*x,k=m*S,$=m*x;d=Math.max(Math.abs(T+$),Math.abs(T-$))+31>>5<<5,m=~~Math.max(Math.abs(M+k),Math.abs(M-k))}else d=d+31>>5<<5;if(m>l&&(l=m),o+d>=Vm<<5&&(o=0,s+=l,l=0),s+m>=b_)break;r.translate((o+(d>>1))/a,(s+(m>>1))/a),e.rotate&&r.rotate(e.rotate*hA),r.fillText(e.text,0,0),e.padding&&(r.lineWidth=2*e.padding,r.strokeText(e.text,0,0)),r.restore(),e.width=d,e.height=m,e.xoff=o,e.yoff=s,e.x1=d>>1,e.y1=m>>1,e.x0=-e.x1,e.y0=-e.y1,e.hasText=!0,o+=d}for(var D=r.getImageData(0,0,(Vm<<5)/a,b_/a).data,F=[];--i>=0;)if(e=n[i],!!e.hasText){for(d=e.width,p=d>>5,m=e.y1-e.y0,_=0;_<m*p;_++)F[_]=0;if(o=e.xoff,o==null)return;s=e.yoff;var N=0,I=-1;for(b=0;b<m;b++){for(_=0;_<d;_++){var q=p*b+(_>>5),Y=D[(s+b)*(Vm<<5)+(o+_)<<2]?1<<31-_%32:0;F[q]|=Y,N|=Y}N?I=b:(e.y0++,m--,b--,s++)}e.y1=e.y0+I,e.sprite=F.slice(0,(e.y1-e.y0)*p)}}}function Ect(t,e,n){n>>=5;for(var i=t.sprite,r=t.width>>5,a=t.x-(r<<4),o=a&127,s=32-o,l=t.y1-t.y0,f=(t.y+t.y0)*n+(a>>5),d,p=0;p<l;p++){d=0;for(var m=0;m<=r;m++)if((d<<s|(m<r?(d=i[p*r+m])>>>o:0))&e[f+m])return!0;f+=n}return!1}function Sct(t,e){var n=t[0],i=t[1];e.x+e.x0<n.x&&(n.x=e.x+e.x0),e.y+e.y0<n.y&&(n.y=e.y+e.y0),e.x+e.x1>i.x&&(i.x=e.x+e.x1),e.y+e.y1>i.y&&(i.y=e.y+e.y1)}function Act(t,e){return t.x+t.x1>e[0].x&&t.x+t.x0<e[1].x&&t.y+t.y1>e[0].y&&t.y+t.y0<e[1].y}function $q(t){var e=t[0]/t[1];return function(n){return[e*(n*=.1)*Math.cos(n),n*Math.sin(n)]}}function Tct(t){var e=4,n=e*t[0]/t[1],i=0,r=0;return function(a){var o=a<0?-1:1;switch(Math.sqrt(1+4*o*a)-o&3){case 0:i+=n;break;case 1:r+=e;break;case 2:i-=n;break;default:r-=e;break}return[i,r]}}function Cct(t){for(var e=[],n=-1;++n<t;)e[n]=0;return e}function sf(t){return typeof t=="function"?t:function(){return t}}var Mct={archimedean:$q,rectangular:Tct};const Dq=["x","y","font","fontSize","fontStyle","fontWeight","angle"],kct=["text","font","rotate","fontSize","fontStyle","fontWeight"];function z3(t){ct.call(this,xct(),t)}z3.Definition={type:"Wordcloud",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2},{name:"font",type:"string",expr:!0,default:"sans-serif"},{name:"fontStyle",type:"string",expr:!0,default:"normal"},{name:"fontWeight",type:"string",expr:!0,default:"normal"},{name:"fontSize",type:"number",expr:!0,default:14},{name:"fontSizeRange",type:"number",array:"nullable",default:[10,50]},{name:"rotate",type:"number",expr:!0,default:0},{name:"text",type:"field"},{name:"spiral",type:"string",values:["archimedean","rectangular"]},{name:"padding",type:"number",expr:!0},{name:"as",type:"string",array:!0,length:7,default:Dq}]};kt(z3,ct,{transform(t,e){t.size&&!(t.size[0]&&t.size[1])&&dt("Wordcloud size dimensions must be non-zero.");function n(b){const x=t[b];return se(x)&&e.modified(x.fields)}const i=t.modified();if(!(i||e.changed(e.ADD_REM)||kct.some(n)))return;const r=e.materialize(e.SOURCE).source,a=this.value,o=t.as||Dq;let s=t.fontSize||14,l;if(se(s)?l=t.fontSizeRange:s=Ui(s),l){const b=s,x=Oe("sqrt")().domain(ts(r,b)).range(l);s=S=>x(b(S))}r.forEach(b=>{b[o[0]]=NaN,b[o[1]]=NaN,b[o[3]]=0});const f=a.words(r).text(t.text).size(t.size||[500,500]).padding(t.padding||1).spiral(t.spiral||"archimedean").rotate(t.rotate||0).font(t.font||"sans-serif").fontStyle(t.fontStyle||"normal").fontWeight(t.fontWeight||"normal").fontSize(s).random(Ma).layout(),d=a.size(),p=d[0]>>1,m=d[1]>>1,_=f.length;for(let b=0,x,S;b<_;++b)x=f[b],S=x.datum,S[o[0]]=x.x+p,S[o[1]]=x.y+m,S[o[2]]=x.font,S[o[3]]=x.size,S[o[4]]=x.style,S[o[5]]=x.weight,S[o[6]]=x.rotate;return e.reflow(i).modifies(o)}});const Oct=Object.freeze(Object.defineProperty({__proto__:null,wordcloud:z3},Symbol.toStringTag,{value:"Module"})),$ct=t=>new Uint8Array(t),Dct=t=>new Uint16Array(t),c0=t=>new Uint32Array(t);function Rct(){let t=8,e=[],n=c0(0),i=Uv(0,t),r=Uv(0,t);return{data:()=>e,seen:()=>n=Nct(n,e.length),add(a){for(let o=0,s=e.length,l=a.length,f;o<l;++o)f=a[o],f._index=s++,e.push(f)},remove(a,o){const s=e.length,l=Array(s-a),f=e;let d,p,m;for(p=0;!o[p]&&p<s;++p)l[p]=e[p],f[p]=p;for(m=p;p<s;++p)d=e[p],o[p]?f[p]=-1:(f[p]=m,i[m]=i[p],r[m]=r[p],l[m]=d,d._index=m++),i[p]=0;return e=l,f},size:()=>e.length,curr:()=>i,prev:()=>r,reset:a=>r[a]=i[a],all:()=>t<257?255:t<65537?65535:4294967295,set(a,o){i[a]|=o},clear(a,o){i[a]&=~o},resize(a,o){const s=i.length;(a>s||o>t)&&(t=Math.max(o,t),i=Uv(a,t,i),r=Uv(a,t))}}}function Nct(t,e,n){return t.length>=e?t:(n=n||new t.constructor(e),n.set(t),n)}function Uv(t,e,n){const i=(e<257?$ct:e<65537?Dct:c0)(t);return n&&i.set(n),i}function Z6(t,e,n){const i=1<<e;return{one:i,zero:~i,range:n.slice(),bisect:t.bisect,index:t.index,size:t.size,onAdd(r,a){const o=this,s=o.bisect(o.range,r.value),l=r.index,f=s[0],d=s[1],p=l.length;let m;for(m=0;m<f;++m)a[l[m]]|=i;for(m=d;m<p;++m)a[l[m]]|=i;return o}}}function Y6(){let t=c0(0),e=[],n=0;function i(s,l,f){if(!l.length)return[];const d=n,p=l.length,m=c0(p);let _=Array(p),b,x,S;for(S=0;S<p;++S)_[S]=s(l[S]),m[S]=S;if(_=Lct(_,m),d)b=e,x=t,e=Array(d+p),t=c0(d+p),zct(f,b,x,d,_,m,p,e,t);else{if(f>0)for(S=0;S<p;++S)m[S]+=f;e=_,t=m}return n=d+p,{index:m,value:_}}function r(s,l){const f=n;let d,p,m;for(p=0;!l[t[p]]&&p<f;++p);for(m=p;p<f;++p)l[d=t[p]]||(t[m]=d,e[m]=e[p],++m);n=f-s}function a(s){for(let l=0,f=n;l<f;++l)t[l]=s[t[l]]}function o(s,l){let f;return l?f=l.length:(l=e,f=n),[PW(l,s[0],0,f),tc(l,s[1],0,f)]}return{insert:i,remove:r,bisect:o,reindex:a,index:()=>t,size:()=>n}}function Lct(t,e){return t.sort.call(e,(n,i)=>{const r=t[n],a=t[i];return r<a?-1:r>a?1:0}),IW(t,e)}function zct(t,e,n,i,r,a,o,s,l){let f=0,d=0,p;for(p=0;f<i&&d<o;++p)e[f]<r[d]?(s[p]=e[f],l[p]=n[f++]):(s[p]=r[d],l[p]=a[d++]+t);for(;f<i;++f,++p)s[p]=e[f],l[p]=n[f];for(;d<o;++d,++p)s[p]=r[d],l[p]=a[d]+t}function F3(t){ct.call(this,Rct(),t),this._indices=null,this._dims=null}F3.Definition={type:"CrossFilter",metadata:{},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"query",type:"array",array:!0,required:!0,content:{type:"number",array:!0,length:2}}]};kt(F3,ct,{transform(t,e){if(this._dims){var n=t.modified("fields")||t.fields.some(i=>e.modified(i.fields));return n?this.reinit(t,e):this.eval(t,e)}else return this.init(t,e)},init(t,e){const n=t.fields,i=t.query,r=this._indices={},a=this._dims=[],o=i.length;let s=0,l,f;for(;s<o;++s)l=n[s].fname,f=r[l]||(r[l]=Y6()),a.push(Z6(f,s,i[s]));return this.eval(t,e)},reinit(t,e){const n=e.materialize().fork(),i=t.fields,r=t.query,a=this._indices,o=this._dims,s=this.value,l=s.curr(),f=s.prev(),d=s.all(),p=n.rem=n.add,m=n.mod,_=r.length,b={};let x,S,T,M,k,$,D,F,N;if(f.set(l),e.rem.length&&(k=this.remove(t,e,n)),e.add.length&&s.add(e.add),e.mod.length)for($={},M=e.mod,D=0,F=M.length;D<F;++D)$[M[D]._index]=1;for(D=0;D<_;++D)N=i[D],(!o[D]||t.modified("fields",D)||e.modified(N.fields))&&(T=N.fname,(x=b[T])||(a[T]=S=Y6(),b[T]=x=S.insert(N,e.source,0)),o[D]=Z6(S,D,r[D]).onAdd(x,l));for(D=0,F=s.data().length;D<F;++D)k[D]||(f[D]!==l[D]?p.push(D):$[D]&&l[D]!==d&&m.push(D));return s.mask=(1<<_)-1,n},eval(t,e){const n=e.materialize().fork(),i=this._dims.length;let r=0;return e.rem.length&&(this.remove(t,e,n),r|=(1<<i)-1),t.modified("query")&&!t.modified("fields")&&(r|=this.update(t,e,n)),e.add.length&&(this.insert(t,e,n),r|=(1<<i)-1),e.mod.length&&(this.modify(e,n),r|=(1<<i)-1),this.value.mask=r,n},insert(t,e,n){const i=e.add,r=this.value,a=this._dims,o=this._indices,s=t.fields,l={},f=n.add,d=r.size()+i.length,p=a.length;let m=r.size(),_,b,x;r.resize(d,p),r.add(i);const S=r.curr(),T=r.prev(),M=r.all();for(_=0;_<p;++_)b=s[_].fname,x=l[b]||(l[b]=o[b].insert(s[_],i,m)),a[_].onAdd(x,S);for(;m<d;++m)T[m]=M,S[m]!==M&&f.push(m)},modify(t,e){const n=e.mod,i=this.value,r=i.curr(),a=i.all(),o=t.mod;let s,l,f;for(s=0,l=o.length;s<l;++s)f=o[s]._index,r[f]!==a&&n.push(f)},remove(t,e,n){const i=this._indices,r=this.value,a=r.curr(),o=r.prev(),s=r.all(),l={},f=n.rem,d=e.rem;let p,m,_,b;for(p=0,m=d.length;p<m;++p)_=d[p]._index,l[_]=1,o[_]=b=a[_],a[_]=s,b!==s&&f.push(_);for(_ in i)i[_].remove(m,l);return this.reindex(e,m,l),l},reindex(t,e,n){const i=this._indices,r=this.value;t.runAfter(()=>{const a=r.remove(e,n);for(const o in i)i[o].reindex(a)})},update(t,e,n){const i=this._dims,r=t.query,a=e.stamp,o=i.length;let s=0,l,f;for(n.filters=0,f=0;f<o;++f)t.modified("query",f)&&(l=f,++s);if(s===1)s=i[l].one,this.incrementOne(i[l],r[l],n.add,n.rem);else for(f=0,s=0;f<o;++f)t.modified("query",f)&&(s|=i[f].one,this.incrementAll(i[f],r[f],a,n.add),n.rem=n.add);return s},incrementAll(t,e,n,i){const r=this.value,a=r.seen(),o=r.curr(),s=r.prev(),l=t.index(),f=t.bisect(t.range),d=t.bisect(e),p=d[0],m=d[1],_=f[0],b=f[1],x=t.one;let S,T,M;if(p<_)for(S=p,T=Math.min(_,m);S<T;++S)M=l[S],a[M]!==n&&(s[M]=o[M],a[M]=n,i.push(M)),o[M]^=x;else if(p>_)for(S=_,T=Math.min(p,b);S<T;++S)M=l[S],a[M]!==n&&(s[M]=o[M],a[M]=n,i.push(M)),o[M]^=x;if(m>b)for(S=Math.max(p,b),T=m;S<T;++S)M=l[S],a[M]!==n&&(s[M]=o[M],a[M]=n,i.push(M)),o[M]^=x;else if(m<b)for(S=Math.max(_,m),T=b;S<T;++S)M=l[S],a[M]!==n&&(s[M]=o[M],a[M]=n,i.push(M)),o[M]^=x;t.range=e.slice()},incrementOne(t,e,n,i){const r=this.value,a=r.curr(),o=t.index(),s=t.bisect(t.range),l=t.bisect(e),f=l[0],d=l[1],p=s[0],m=s[1],_=t.one;let b,x,S;if(f<p)for(b=f,x=Math.min(p,d);b<x;++b)S=o[b],a[S]^=_,n.push(S);else if(f>p)for(b=p,x=Math.min(f,m);b<x;++b)S=o[b],a[S]^=_,i.push(S);if(d>m)for(b=Math.max(f,m),x=d;b<x;++b)S=o[b],a[S]^=_,n.push(S);else if(d<m)for(b=Math.max(p,d),x=m;b<x;++b)S=o[b],a[S]^=_,i.push(S);t.range=e.slice()}});function P3(t){ct.call(this,null,t)}P3.Definition={type:"ResolveFilter",metadata:{},params:[{name:"ignore",type:"number",required:!0,description:"A bit mask indicating which filters to ignore."},{name:"filter",type:"object",required:!0,description:"Per-tuple filter bitmaps from a CrossFilter transform."}]};kt(P3,ct,{transform(t,e){const n=~(t.ignore||0),i=t.filter,r=i.mask;if((r&n)===0)return e.StopPropagation;const a=e.fork(e.ALL),o=i.data(),s=i.curr(),l=i.prev(),f=d=>s[d]&n?null:o[d];return a.filter(a.MOD,f),r&r-1?(a.filter(a.ADD,d=>{const p=s[d]&n;return!p&&p^l[d]&n?o[d]:null}),a.filter(a.REM,d=>{const p=s[d]&n;return p&&!(p^(p^l[d]&n))?o[d]:null})):(a.filter(a.ADD,f),a.filter(a.REM,d=>(s[d]&n)===r?o[d]:null)),a.filter(a.SOURCE,d=>f(d._index))}});const Fct=Object.freeze(Object.defineProperty({__proto__:null,crossfilter:F3,resolvefilter:P3},Symbol.toStringTag,{value:"Module"})),Pct="RawCode",Yf="Literal",Bct="Property",Uct="Identifier",Ict="ArrayExpression",qct="BinaryExpression",Rq="CallExpression",jct="ConditionalExpression",Hct="LogicalExpression",Gct="MemberExpression",Zct="ObjectExpression",Yct="UnaryExpression";function po(t){this.type=t}po.prototype.visit=function(t){let e,n,i;if(t(this))return 1;for(e=Xct(this),n=0,i=e.length;n<i;++n)if(e[n].visit(t))return 1};function Xct(t){switch(t.type){case Ict:return t.elements;case qct:case Hct:return[t.left,t.right];case Rq:return[t.callee].concat(t.arguments);case jct:return[t.test,t.consequent,t.alternate];case Gct:return[t.object,t.property];case Zct:return t.properties;case Bct:return[t.key,t.value];case Yct:return[t.argument];case Uct:case Yf:case Pct:default:return[]}}var ps,Bt,ht,Fi,Pe,o2=1,_y=2,Xf=3,bc=4,s2=5,dh=6,vr=7,by=8,Wct=9;ps={};ps[o2]="Boolean";ps[_y]="<end>";ps[Xf]="Identifier";ps[bc]="Keyword";ps[s2]="Null";ps[dh]="Numeric";ps[vr]="Punctuator";ps[by]="String";ps[Wct]="RegularExpression";var Vct="ArrayExpression",Qct="BinaryExpression",Kct="CallExpression",Jct="ConditionalExpression",Nq="Identifier",tft="Literal",eft="LogicalExpression",nft="MemberExpression",ift="ObjectExpression",rft="Property",aft="UnaryExpression",Jn="Unexpected token %0",oft="Unexpected number",sft="Unexpected string",uft="Unexpected identifier",lft="Unexpected reserved word",cft="Unexpected end of input",OC="Invalid regular expression",dA="Invalid regular expression: missing /",Lq="Octal literals are not allowed in strict mode.",fft="Duplicate data property in object literal not allowed in strict mode",yi="ILLEGAL",R0="Disabled.",hft=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),dft=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B2\\u08E4-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58\\u0C59\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D60-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA69D\\uA69F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2D\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]");function u2(t,e){if(!t)throw new Error("ASSERT: "+e)}function ru(t){return t>=48&&t<=57}function B3(t){return"0123456789abcdefABCDEF".includes(t)}function f0(t){return"01234567".includes(t)}function pft(t){return t===32||t===9||t===11||t===12||t===160||t>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].includes(t)}function N0(t){return t===10||t===13||t===8232||t===8233}function xy(t){return t===36||t===95||t>=65&&t<=90||t>=97&&t<=122||t===92||t>=128&&hft.test(String.fromCharCode(t))}function Pb(t){return t===36||t===95||t>=65&&t<=90||t>=97&&t<=122||t>=48&&t<=57||t===92||t>=128&&dft.test(String.fromCharCode(t))}const gft={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1};function zq(){for(;ht<Fi;){const t=Bt.charCodeAt(ht);if(pft(t)||N0(t))++ht;else break}}function $C(t){var e,n,i,r=0;for(n=t==="u"?4:2,e=0;e<n;++e)ht<Fi&&B3(Bt[ht])?(i=Bt[ht++],r=r*16+"0123456789abcdef".indexOf(i.toLowerCase())):Ce({},Jn,yi);return String.fromCharCode(r)}function mft(){var t,e,n,i;for(t=Bt[ht],e=0,t==="}"&&Ce({},Jn,yi);ht<Fi&&(t=Bt[ht++],!!B3(t));)e=e*16+"0123456789abcdef".indexOf(t.toLowerCase());return(e>1114111||t!=="}")&&Ce({},Jn,yi),e<=65535?String.fromCharCode(e):(n=(e-65536>>10)+55296,i=(e-65536&1023)+56320,String.fromCharCode(n,i))}function Fq(){var t,e;for(t=Bt.charCodeAt(ht++),e=String.fromCharCode(t),t===92&&(Bt.charCodeAt(ht)!==117&&Ce({},Jn,yi),++ht,t=$C("u"),(!t||t==="\\"||!xy(t.charCodeAt(0)))&&Ce({},Jn,yi),e=t);ht<Fi&&(t=Bt.charCodeAt(ht),!!Pb(t));)++ht,e+=String.fromCharCode(t),t===92&&(e=e.substr(0,e.length-1),Bt.charCodeAt(ht)!==117&&Ce({},Jn,yi),++ht,t=$C("u"),(!t||t==="\\"||!Pb(t.charCodeAt(0)))&&Ce({},Jn,yi),e+=t);return e}function yft(){var t,e;for(t=ht++;ht<Fi;){if(e=Bt.charCodeAt(ht),e===92)return ht=t,Fq();if(Pb(e))++ht;else break}return Bt.slice(t,ht)}function vft(){var t,e,n;return t=ht,e=Bt.charCodeAt(ht)===92?Fq():yft(),e.length===1?n=Xf:gft.hasOwnProperty(e)?n=bc:e==="null"?n=s2:e==="true"||e==="false"?n=o2:n=Xf,{type:n,value:e,start:t,end:ht}}function pA(){var t=ht,e=Bt.charCodeAt(ht),n,i=Bt[ht],r,a,o;switch(e){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++ht,{type:vr,value:String.fromCharCode(e),start:t,end:ht};default:if(n=Bt.charCodeAt(ht+1),n===61)switch(e){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return ht+=2,{type:vr,value:String.fromCharCode(e)+String.fromCharCode(n),start:t,end:ht};case 33:case 61:return ht+=2,Bt.charCodeAt(ht)===61&&++ht,{type:vr,value:Bt.slice(t,ht),start:t,end:ht}}}if(o=Bt.substr(ht,4),o===">>>=")return ht+=4,{type:vr,value:o,start:t,end:ht};if(a=o.substr(0,3),a===">>>"||a==="<<="||a===">>=")return ht+=3,{type:vr,value:a,start:t,end:ht};if(r=a.substr(0,2),i===r[1]&&"+-<>&|".includes(i)||r==="=>")return ht+=2,{type:vr,value:r,start:t,end:ht};if(r==="//"&&Ce({},Jn,yi),"<>=!+-*%&|^/".includes(i))return++ht,{type:vr,value:i,start:t,end:ht};Ce({},Jn,yi)}function _ft(t){let e="";for(;ht<Fi&&B3(Bt[ht]);)e+=Bt[ht++];return e.length===0&&Ce({},Jn,yi),xy(Bt.charCodeAt(ht))&&Ce({},Jn,yi),{type:dh,value:parseInt("0x"+e,16),start:t,end:ht}}function bft(t){let e="0"+Bt[ht++];for(;ht<Fi&&f0(Bt[ht]);)e+=Bt[ht++];return(xy(Bt.charCodeAt(ht))||ru(Bt.charCodeAt(ht)))&&Ce({},Jn,yi),{type:dh,value:parseInt(e,8),octal:!0,start:t,end:ht}}function X6(){var t,e,n;if(n=Bt[ht],u2(ru(n.charCodeAt(0))||n===".","Numeric literal must start with a decimal digit or a decimal point"),e=ht,t="",n!=="."){if(t=Bt[ht++],n=Bt[ht],t==="0"){if(n==="x"||n==="X")return++ht,_ft(e);if(f0(n))return bft(e);n&&ru(n.charCodeAt(0))&&Ce({},Jn,yi)}for(;ru(Bt.charCodeAt(ht));)t+=Bt[ht++];n=Bt[ht]}if(n==="."){for(t+=Bt[ht++];ru(Bt.charCodeAt(ht));)t+=Bt[ht++];n=Bt[ht]}if(n==="e"||n==="E")if(t+=Bt[ht++],n=Bt[ht],(n==="+"||n==="-")&&(t+=Bt[ht++]),ru(Bt.charCodeAt(ht)))for(;ru(Bt.charCodeAt(ht));)t+=Bt[ht++];else Ce({},Jn,yi);return xy(Bt.charCodeAt(ht))&&Ce({},Jn,yi),{type:dh,value:parseFloat(t),start:e,end:ht}}function xft(){var t="",e,n,i,r,a=!1;for(e=Bt[ht],u2(e==="'"||e==='"',"String literal must starts with a quote"),n=ht,++ht;ht<Fi;)if(i=Bt[ht++],i===e){e="";break}else if(i==="\\")if(i=Bt[ht++],!i||!N0(i.charCodeAt(0)))switch(i){case"u":case"x":Bt[ht]==="{"?(++ht,t+=mft()):t+=$C(i);break;case"n":t+=`
`;break;case"r":t+="\r";break;case"t":t+="	";break;case"b":t+="\b";break;case"f":t+="\f";break;case"v":t+="\v";break;default:f0(i)?(r="01234567".indexOf(i),r!==0&&(a=!0),ht<Fi&&f0(Bt[ht])&&(a=!0,r=r*8+"01234567".indexOf(Bt[ht++]),"0123".includes(i)&&ht<Fi&&f0(Bt[ht])&&(r=r*8+"01234567".indexOf(Bt[ht++]))),t+=String.fromCharCode(r)):t+=i;break}else i==="\r"&&Bt[ht]===`
`&&++ht;else{if(N0(i.charCodeAt(0)))break;t+=i}return e!==""&&Ce({},Jn,yi),{type:by,value:t,octal:a,start:n,end:ht}}function wft(t,e){let n=t;e.includes("u")&&(n=n.replace(/\\u\{([0-9a-fA-F]+)\}/g,(i,r)=>{if(parseInt(r,16)<=1114111)return"x";Ce({},OC)}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{new RegExp(n)}catch{Ce({},OC)}try{return new RegExp(t,e)}catch{return null}}function Eft(){var t,e,n,i,r;for(t=Bt[ht],u2(t==="/","Regular expression literal must start with a slash"),e=Bt[ht++],n=!1,i=!1;ht<Fi;)if(t=Bt[ht++],e+=t,t==="\\")t=Bt[ht++],N0(t.charCodeAt(0))&&Ce({},dA),e+=t;else if(N0(t.charCodeAt(0)))Ce({},dA);else if(n)t==="]"&&(n=!1);else if(t==="/"){i=!0;break}else t==="["&&(n=!0);return i||Ce({},dA),r=e.substr(1,e.length-2),{value:r,literal:e}}function Sft(){var t,e,n;for(e="",n="";ht<Fi&&(t=Bt[ht],!!Pb(t.charCodeAt(0)));)++ht,t==="\\"&&ht<Fi?Ce({},Jn,yi):(n+=t,e+=t);return n.search(/[^gimuy]/g)>=0&&Ce({},OC,n),{value:n,literal:e}}function Aft(){var t,e,n,i;return Pe=null,zq(),t=ht,e=Eft(),n=Sft(),i=wft(e.value,n.value),{literal:e.literal+n.literal,value:i,regex:{pattern:e.value,flags:n.value},start:t,end:ht}}function Tft(t){return t.type===Xf||t.type===bc||t.type===o2||t.type===s2}function Pq(){if(zq(),ht>=Fi)return{type:_y,start:ht,end:ht};const t=Bt.charCodeAt(ht);return xy(t)?vft():t===40||t===41||t===59?pA():t===39||t===34?xft():t===46?ru(Bt.charCodeAt(ht+1))?X6():pA():ru(t)?X6():pA()}function br(){const t=Pe;return ht=t.end,Pe=Pq(),ht=t.end,t}function Bq(){const t=ht;Pe=Pq(),ht=t}function Cft(t){const e=new po(Vct);return e.elements=t,e}function W6(t,e,n){const i=new po(t==="||"||t==="&&"?eft:Qct);return i.operator=t,i.left=e,i.right=n,i}function Mft(t,e){const n=new po(Kct);return n.callee=t,n.arguments=e,n}function kft(t,e,n){const i=new po(Jct);return i.test=t,i.consequent=e,i.alternate=n,i}function U3(t){const e=new po(Nq);return e.name=t,e}function Qm(t){const e=new po(tft);return e.value=t.value,e.raw=Bt.slice(t.start,t.end),t.regex&&(e.raw==="//"&&(e.raw="/(?:)/"),e.regex=t.regex),e}function V6(t,e,n){const i=new po(nft);return i.computed=t==="[",i.object=e,i.property=n,i.computed||(n.member=!0),i}function Oft(t){const e=new po(ift);return e.properties=t,e}function Q6(t,e,n){const i=new po(rft);return i.key=e,i.value=n,i.kind=t,i}function $ft(t,e){const n=new po(aft);return n.operator=t,n.argument=e,n.prefix=!0,n}function Ce(t,e){var n,i=Array.prototype.slice.call(arguments,2),r=e.replace(/%(\d)/g,(a,o)=>(u2(o<i.length,"Message reference must be in range"),i[o]));throw n=new Error(r),n.index=ht,n.description=r,n}function l2(t){t.type===_y&&Ce(t,cft),t.type===dh&&Ce(t,oft),t.type===by&&Ce(t,sft),t.type===Xf&&Ce(t,uft),t.type===bc&&Ce(t,lft),Ce(t,Jn,t.value)}function Pi(t){const e=br();(e.type!==vr||e.value!==t)&&l2(e)}function tn(t){return Pe.type===vr&&Pe.value===t}function gA(t){return Pe.type===bc&&Pe.value===t}function Dft(){const t=[];for(ht=Pe.start,Pi("[");!tn("]");)tn(",")?(br(),t.push(null)):(t.push(Wf()),tn("]")||Pi(","));return br(),Cft(t)}function K6(){ht=Pe.start;const t=br();return t.type===by||t.type===dh?(t.octal&&Ce(t,Lq),Qm(t)):U3(t.value)}function Rft(){var t,e,n,i;if(ht=Pe.start,t=Pe,t.type===Xf)return n=K6(),Pi(":"),i=Wf(),Q6("init",n,i);if(t.type===_y||t.type===vr)l2(t);else return e=K6(),Pi(":"),i=Wf(),Q6("init",e,i)}function Nft(){var t=[],e,n,i,r={},a=String;for(ht=Pe.start,Pi("{");!tn("}");)e=Rft(),e.key.type===Nq?n=e.key.name:n=a(e.key.value),i="$"+n,Object.prototype.hasOwnProperty.call(r,i)?Ce({},fft):r[i]=!0,t.push(e),tn("}")||Pi(",");return Pi("}"),Oft(t)}function Lft(){Pi("(");const t=I3();return Pi(")"),t}const zft={if:1};function Fft(){var t,e,n;if(tn("("))return Lft();if(tn("["))return Dft();if(tn("{"))return Nft();if(t=Pe.type,ht=Pe.start,t===Xf||zft[Pe.value])n=U3(br().value);else if(t===by||t===dh)Pe.octal&&Ce(Pe,Lq),n=Qm(br());else{if(t===bc)throw new Error(R0);t===o2?(e=br(),e.value=e.value==="true",n=Qm(e)):t===s2?(e=br(),e.value=null,n=Qm(e)):tn("/")||tn("/=")?(n=Qm(Aft()),Bq()):l2(br())}return n}function Pft(){const t=[];if(Pi("("),!tn(")"))for(;ht<Fi&&(t.push(Wf()),!tn(")"));)Pi(",");return Pi(")"),t}function Bft(){ht=Pe.start;const t=br();return Tft(t)||l2(t),U3(t.value)}function Uft(){return Pi("."),Bft()}function Ift(){Pi("[");const t=I3();return Pi("]"),t}function qft(){var t,e,n;for(t=Fft();;)if(tn("."))n=Uft(),t=V6(".",t,n);else if(tn("("))e=Pft(),t=Mft(t,e);else if(tn("["))n=Ift(),t=V6("[",t,n);else break;return t}function J6(){const t=qft();if(Pe.type===vr&&(tn("++")||tn("--")))throw new Error(R0);return t}function x_(){var t,e;if(Pe.type!==vr&&Pe.type!==bc)e=J6();else{if(tn("++")||tn("--"))throw new Error(R0);if(tn("+")||tn("-")||tn("~")||tn("!"))t=br(),e=x_(),e=$ft(t.value,e);else{if(gA("delete")||gA("void")||gA("typeof"))throw new Error(R0);e=J6()}}return e}function t4(t){let e=0;if(t.type!==vr&&t.type!==bc)return 0;switch(t.value){case"||":e=1;break;case"&&":e=2;break;case"|":e=3;break;case"^":e=4;break;case"&":e=5;break;case"==":case"!=":case"===":case"!==":e=6;break;case"<":case">":case"<=":case">=":case"instanceof":case"in":e=7;break;case"<<":case">>":case">>>":e=8;break;case"+":case"-":e=9;break;case"*":case"/":case"%":e=11;break}return e}function jft(){var t,e,n,i,r,a,o,s,l,f;if(t=Pe,l=x_(),i=Pe,r=t4(i),r===0)return l;for(i.prec=r,br(),e=[t,Pe],o=x_(),a=[l,i,o];(r=t4(Pe))>0;){for(;a.length>2&&r<=a[a.length-2].prec;)o=a.pop(),s=a.pop().value,l=a.pop(),e.pop(),n=W6(s,l,o),a.push(n);i=br(),i.prec=r,a.push(i),e.push(Pe),n=x_(),a.push(n)}for(f=a.length-1,n=a[f],e.pop();f>1;)e.pop(),n=W6(a[f-1].value,a[f-2],n),f-=2;return n}function Wf(){var t,e,n;return t=jft(),tn("?")&&(br(),e=Wf(),Pi(":"),n=Wf(),t=kft(t,e,n)),t}function I3(){const t=Wf();if(tn(","))throw new Error(R0);return t}function q3(t){Bt=t,ht=0,Fi=Bt.length,Pe=null,Bq();const e=I3();if(Pe.type!==_y)throw new Error("Unexpect token after expression.");return e}var Uq={NaN:"NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2",MIN_VALUE:"Number.MIN_VALUE",MAX_VALUE:"Number.MAX_VALUE"};function Iq(t){function e(o,s,l,f){let d=t(s[0]);return l&&(d=l+"("+d+")",l.lastIndexOf("new ",0)===0&&(d="("+d+")")),d+"."+o+(f<0?"":f===0?"()":"("+s.slice(1).map(t).join(",")+")")}function n(o,s,l){return f=>e(o,f,s,l)}const i="new Date",r="String",a="RegExp";return{isNaN:"Number.isNaN",isFinite:"Number.isFinite",abs:"Math.abs",acos:"Math.acos",asin:"Math.asin",atan:"Math.atan",atan2:"Math.atan2",ceil:"Math.ceil",cos:"Math.cos",exp:"Math.exp",floor:"Math.floor",hypot:"Math.hypot",log:"Math.log",max:"Math.max",min:"Math.min",pow:"Math.pow",random:"Math.random",round:"Math.round",sin:"Math.sin",sqrt:"Math.sqrt",tan:"Math.tan",clamp:function(o){o.length<3&&dt("Missing arguments to clamp function."),o.length>3&&dt("Too many arguments to clamp function.");const s=o.map(t);return"Math.max("+s[1]+", Math.min("+s[2]+","+s[0]+"))"},now:"Date.now",utc:"Date.UTC",datetime:i,date:n("getDate",i,0),day:n("getDay",i,0),year:n("getFullYear",i,0),month:n("getMonth",i,0),hours:n("getHours",i,0),minutes:n("getMinutes",i,0),seconds:n("getSeconds",i,0),milliseconds:n("getMilliseconds",i,0),time:n("getTime",i,0),timezoneoffset:n("getTimezoneOffset",i,0),utcdate:n("getUTCDate",i,0),utcday:n("getUTCDay",i,0),utcyear:n("getUTCFullYear",i,0),utcmonth:n("getUTCMonth",i,0),utchours:n("getUTCHours",i,0),utcminutes:n("getUTCMinutes",i,0),utcseconds:n("getUTCSeconds",i,0),utcmilliseconds:n("getUTCMilliseconds",i,0),length:n("length",null,-1),parseFloat:"parseFloat",parseInt:"parseInt",upper:n("toUpperCase",r,0),lower:n("toLowerCase",r,0),substring:n("substring",r),split:n("split",r),trim:n("trim",r,0),btoa:"btoa",atob:"atob",regexp:a,test:n("test",a),if:function(o){o.length<3&&dt("Missing arguments to if function."),o.length>3&&dt("Too many arguments to if function.");const s=o.map(t);return"("+s[0]+"?"+s[1]+":"+s[2]+")"}}}function Hft(t){const e=t&&t.length-1;return e&&(t[0]==='"'&&t[e]==='"'||t[0]==="'"&&t[e]==="'")?t.slice(1,-1):t}function qq(t){t=t||{};const e=t.allowed?oo(t.allowed):{},n=t.forbidden?oo(t.forbidden):{},i=t.constants||Uq,r=(t.functions||Iq)(p),a=t.globalvar,o=t.fieldvar,s=se(a)?a:b=>`${a}["${b}"]`;let l={},f={},d=0;function p(b){if(Dt(b))return b;const x=m[b.type];return x==null&&dt("Unsupported type: "+b.type),x(b)}const m={Literal:b=>b.raw,Identifier:b=>{const x=b.name;return d>0?x:zt(n,x)?dt("Illegal identifier: "+x):zt(i,x)?i[x]:zt(e,x)?x:(l[x]=1,s(x))},MemberExpression:b=>{const x=!b.computed,S=p(b.object);x&&(d+=1);const T=p(b.property);return S===o&&(f[Hft(T)]=1),x&&(d-=1),S+(x?"."+T:"["+T+"]")},CallExpression:b=>{b.callee.type!=="Identifier"&&dt("Illegal callee type: "+b.callee.type);const x=b.callee.name,S=b.arguments,T=zt(r,x)&&r[x];return T||dt("Unrecognized function: "+x),se(T)?T(S):T+"("+S.map(p).join(",")+")"},ArrayExpression:b=>"["+b.elements.map(p).join(",")+"]",BinaryExpression:b=>"("+p(b.left)+" "+b.operator+" "+p(b.right)+")",UnaryExpression:b=>"("+b.operator+p(b.argument)+")",ConditionalExpression:b=>"("+p(b.test)+"?"+p(b.consequent)+":"+p(b.alternate)+")",LogicalExpression:b=>"("+p(b.left)+b.operator+p(b.right)+")",ObjectExpression:b=>"{"+b.properties.map(p).join(",")+"}",Property:b=>{d+=1;const x=p(b.key);return d-=1,x+":"+p(b.value)}};function _(b){const x={code:p(b),globals:Object.keys(l),fields:Object.keys(f)};return l={},f={},x}return _.functions=r,_.constants=i,_}const e4=Symbol("vega_selection_getter");function jq(t){return(!t.getter||!t.getter[e4])&&(t.getter=Aa(t.field),t.getter[e4]=!0),t.getter}const j3="intersect",n4="union",Gft="vlMulti",Zft="vlPoint",i4="or",Yft="and",qo="_vgsid_",L0=Aa(qo),Xft="E",Wft="R",Vft="R-E",Qft="R-LE",Kft="R-RE",Jft="E-LT",tht="E-LTE",eht="E-GT",nht="E-GTE",iht="E-VALID",rht="E-ONE",Bb="index:unit";function r4(t,e){for(var n=e.fields,i=e.values,r=n.length,a=0,o,s;a<r;++a)if(s=n[a],o=jq(s)(t),Xl(o)&&(o=Ri(o)),Xl(i[a])&&(i[a]=Ri(i[a])),gt(i[a])&&Xl(i[a][0])&&(i[a]=i[a].map(Ri)),s.type===Xft){if(gt(i[a])?!i[a].includes(o):o!==i[a])return!1}else if(s.type===Wft){if(!kd(o,i[a]))return!1}else if(s.type===Kft){if(!kd(o,i[a],!0,!1))return!1}else if(s.type===Vft){if(!kd(o,i[a],!1,!1))return!1}else if(s.type===Qft){if(!kd(o,i[a],!1,!0))return!1}else if(s.type===Jft){if(o>=i[a])return!1}else if(s.type===tht){if(o>i[a])return!1}else if(s.type===eht){if(o<=i[a])return!1}else if(s.type===nht){if(o<i[a])return!1}else if(s.type===iht){if(o===null||isNaN(o))return!1}else if(s.type===rht&&i[a].indexOf(o)===-1)return!1;return!0}function aht(t,e,n){for(var i=this.context.data[t],r=i?i.values.value:[],a=i?i[Bb]&&i[Bb].value:void 0,o=n===j3,s=r.length,l=0,f,d,p,m,_;l<s;++l)if(f=r[l],a&&o){if(d=d||{},p=d[m=f.unit]||0,p===-1)continue;if(_=r4(e,f),d[m]=_?-1:++p,_&&a.size===1)return!0;if(!_&&p===a.get(m).count)return!1}else if(_=r4(e,f),o^_)return _;return s&&o}const Hq=Rp(L0),oht=Hq.left,sht=Hq.right;function uht(t,e,n){const i=this.context.data[t],r=i?i.values.value:[],a=i?i[Bb]&&i[Bb].value:void 0,o=n===j3,s=L0(e),l=oht(r,s);if(l===r.length||L0(r[l])!==s)return!1;if(a&&o){if(a.size===1)return!0;if(sht(r,s)-l<a.size)return!1}return!0}function lht(t,e){return t.map(n=>oe(e.fields?{values:e.fields.map(i=>jq(i)(n.datum))}:{[qo]:L0(n.datum)},e))}function cht(t,e,n,i){for(var r=this.context.data[t],a=r?r.values.value:[],o={},s={},l={},f,d,p,m,_,b,x,S,T,M,k=a.length,$=0,D,F;$<k;++$)if(f=a[$],m=f.unit,d=f.fields,p=f.values,d&&p){for(D=0,F=d.length;D<F;++D)_=d[D],x=o[_.field]||(o[_.field]={}),S=x[m]||(x[m]=[]),l[_.field]=T=_.type.charAt(0),M=mA[`${T}_union`],x[m]=M(S,Nt(p[D]));n&&(S=s[m]||(s[m]=[]),S.push(Nt(p).reduce((N,I,q)=>(N[d[q].field]=I,N),{})))}else _=qo,b=L0(f),x=o[_]||(o[_]={}),S=x[m]||(x[m]=[]),S.push(b),n&&(S=s[m]||(s[m]=[]),S.push({[qo]:b}));if(e=e||n4,o[qo]?o[qo]=mA[`${qo}_${e}`](...Object.values(o[qo])):Object.keys(o).forEach(N=>{o[N]=Object.keys(o[N]).map(I=>o[N][I]).reduce((I,q)=>I===void 0?q:mA[`${l[N]}_${e}`](I,q))}),a=Object.keys(s),n&&a.length){const N=i?Zft:Gft;o[N]=e===n4?{[i4]:a.reduce((I,q)=>(I.push(...s[q]),I),[])}:{[Yft]:a.map(I=>({[i4]:s[I]}))}}return o}var mA={[`${qo}_union`]:VW,[`${qo}_intersect`]:XW,E_union:function(t,e){if(!t.length)return e;for(var n=0,i=e.length;n<i;++n)t.includes(e[n])||t.push(e[n]);return t},E_intersect:function(t,e){return t.length?t.filter(n=>e.includes(n)):e},R_union:function(t,e){var n=Ri(e[0]),i=Ri(e[1]);return n>i&&(n=e[1],i=e[0]),t.length?(t[0]>n&&(t[0]=n),t[1]<i&&(t[1]=i),t):[n,i]},R_intersect:function(t,e){var n=Ri(e[0]),i=Ri(e[1]);return n>i&&(n=e[1],i=e[0]),t.length?i<t[0]||t[1]<n?[]:(t[0]<n&&(t[0]=n),t[1]>i&&(t[1]=i),t):[n,i]}};const fht=":",hht="@";function H3(t,e,n,i){e[0].type!==Yf&&dt("First argument to selection functions must be a string literal.");const r=e[0].value,a=e.length>=2&&be(e).value,o="unit",s=hht+o,l=fht+r;a===j3&&!zt(i,s)&&(i[s]=n.getData(r).indataRef(n,o)),zt(i,l)||(i[l]=n.getData(r).tuplesRef())}function Gq(t){const e=this.context.data[t];return e?e.values.value:[]}function dht(t,e,n){const i=this.context.data[t]["index:"+e],r=i?i.value.get(n):void 0;return r&&r.count}function pht(t,e){const n=this.context.dataflow,i=this.context.data[t],r=i.input;return n.pulse(r,n.changeset().remove(Ta).insert(e)),1}function ght(t,e,n){if(t){const i=this.context.dataflow,r=t.mark.source;i.pulse(r,i.changeset().encode(t,e))}return n!==void 0?n:t}const wy=t=>function(e,n){const i=this.context.dataflow.locale();return e===null?"null":i[t](n)(e)},mht=wy("format"),Zq=wy("timeFormat"),yht=wy("utcFormat"),vht=wy("timeParse"),_ht=wy("utcParse"),Iv=new Date(2e3,0,1);function c2(t,e,n){return!Number.isInteger(t)||!Number.isInteger(e)?"":(Iv.setYear(2e3),Iv.setMonth(t),Iv.setDate(e),Zq.call(this,Iv,n))}function bht(t){return c2.call(this,t,1,"%B")}function xht(t){return c2.call(this,t,1,"%b")}function wht(t){return c2.call(this,0,2+t,"%A")}function Eht(t){return c2.call(this,0,2+t,"%a")}const Sht=":",Aht="@",DC="%",Yq="$";function G3(t,e,n,i){e[0].type!==Yf&&dt("First argument to data functions must be a string literal.");const r=e[0].value,a=Sht+r;if(!zt(a,i))try{i[a]=n.getData(r).tuplesRef()}catch{}}function Tht(t,e,n,i){e[0].type!==Yf&&dt("First argument to indata must be a string literal."),e[1].type!==Yf&&dt("Second argument to indata must be a string literal.");const r=e[0].value,a=e[1].value,o=Aht+a;zt(o,i)||(i[o]=n.getData(r).indataRef(n,a))}function ar(t,e,n,i){if(e[0].type===Yf)a4(n,i,e[0].value);else for(t in n.scales)a4(n,i,t)}function a4(t,e,n){const i=DC+n;if(!zt(e,i))try{e[i]=t.scaleRef(n)}catch{}}function gs(t,e){if(Dt(t)){const n=e.scales[t];return n&&u5(n.value)?n.value:void 0}else if(se(t))return u5(t)?t:void 0}function Cht(t,e,n){e.__bandwidth=r=>r&&r.bandwidth?r.bandwidth():0,n._bandwidth=ar,n._range=ar,n._scale=ar;const i=r=>"_["+(r.type===Yf?Mt(DC+r.value):Mt(DC)+"+"+t(r))+"]";return{_bandwidth:r=>`this.__bandwidth(${i(r[0])})`,_range:r=>`${i(r[0])}.range()`,_scale:r=>`${i(r[0])}(${t(r[1])})`}}function Z3(t,e){return function(n,i,r){if(n){const a=gs(n,(r||this).context);return a&&a.path[t](i)}else return e(i)}}const Mht=Z3("area",Zat),kht=Z3("bounds",Vat),Oht=Z3("centroid",not);function $ht(t,e){const n=gs(t,(e||this).context);return n&&n.scale()}function Dht(t){const e=this.context.group;let n=!1;if(e)for(;t;){if(t===e){n=!0;break}t=t.mark.group}return n}function Y3(t,e,n){try{t[e].apply(t,["EXPRESSION"].concat([].slice.call(n)))}catch(i){t.warn(i)}return n[n.length-1]}function Rht(){return Y3(this.context.dataflow,"warn",arguments)}function Nht(){return Y3(this.context.dataflow,"info",arguments)}function Lht(){return Y3(this.context.dataflow,"debug",arguments)}function yA(t){const e=t/255;return e<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4)}function RC(t){const e=rc(t),n=yA(e.r),i=yA(e.g),r=yA(e.b);return .2126*n+.7152*i+.0722*r}function zht(t,e){const n=RC(t),i=RC(e),r=Math.max(n,i),a=Math.min(n,i);return(r+.05)/(a+.05)}function Fht(){const t=[].slice.call(arguments);return t.unshift({}),oe(...t)}function Xq(t,e){return t===e||t!==t&&e!==e?!0:gt(t)?gt(e)&&t.length===e.length?Pht(t,e):!1:Rt(t)&&Rt(e)?Wq(t,e):!1}function Pht(t,e){for(let n=0,i=t.length;n<i;++n)if(!Xq(t[n],e[n]))return!1;return!0}function Wq(t,e){for(const n in t)if(!Xq(t[n],e[n]))return!1;return!0}function o4(t){return e=>Wq(t,e)}function Bht(t,e,n,i,r,a){const o=this.context.dataflow,s=this.context.data[t],l=s.input,f=o.stamp();let d=s.changes,p,m;if(o._trigger===!1||!(l.value.length||e||i))return 0;if((!d||d.stamp<f)&&(s.changes=d=o.changeset(),d.stamp=f,o.runAfter(()=>{s.modified=!0,o.pulse(l,d).run()},!0,1)),n&&(p=n===!0?Ta:gt(n)||_x(n)?n:o4(n),d.remove(p)),e&&d.insert(e),i&&(p=o4(i),l.value.some(p)?d.remove(p):d.insert(i)),r)for(m in a)d.modify(r,m,a[m]);return 1}function Uht(t){const e=t.touches,n=e[0].clientX-e[1].clientX,i=e[0].clientY-e[1].clientY;return Math.hypot(n,i)}function Iht(t){const e=t.touches;return Math.atan2(e[0].clientY-e[1].clientY,e[0].clientX-e[1].clientX)}const s4={};function qht(t,e){const n=s4[e]||(s4[e]=Aa(e));return gt(t)?t.map(n):n(t)}function f2(t){return gt(t)||ArrayBuffer.isView(t)?t:null}function X3(t){return f2(t)||(Dt(t)?t:null)}function jht(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return f2(t).join(...n)}function Hht(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return X3(t).indexOf(...n)}function Ght(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return X3(t).lastIndexOf(...n)}function Zht(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return X3(t).slice(...n)}function Yht(t,e,n){return se(n)&&dt("Function argument passed to replace."),!Dt(e)&&!RM(e)&&dt("Please pass a string or RegExp argument to replace."),String(t).replace(e,n)}function Xht(t){return f2(t).slice().reverse()}function Wht(t){return f2(t).slice().sort($p)}function Vht(t,e,n){return sO(t||0,e||0,n||0)}function Qht(t,e){const n=gs(t,(e||this).context);return n&&n.bandwidth?n.bandwidth():0}function Kht(t,e){const n=gs(t,(e||this).context);return n?n.copy():void 0}function Jht(t,e){const n=gs(t,(e||this).context);return n?n.domain():[]}function tdt(t,e,n){const i=gs(t,(n||this).context);return i?gt(e)?(i.invertRange||i.invert)(e):(i.invert||i.invertExtent)(e):void 0}function edt(t,e){const n=gs(t,(e||this).context);return n&&n.range?n.range():[]}function ndt(t,e,n){const i=gs(t,(n||this).context);return i?i(e):void 0}function idt(t,e,n,i,r){t=gs(t,(r||this).context);const a=UB(e,n);let o=t.domain(),s=o[0],l=be(o),f=Bi;return l-s?f=MB(t,s,l):t=(t.interpolator?Oe("sequential")().interpolator(t.interpolator()):Oe("linear")().interpolate(t.interpolate()).range(t.range())).domain([s=0,l=1]),t.ticks&&(o=t.ticks(+i||15),s!==o[0]&&o.unshift(s),l!==be(o)&&o.push(l)),o.forEach(d=>a.stop(f(d),t(d))),a}function rdt(t,e,n){const i=gs(t,(n||this).context);return function(r){return i?i.path.context(r)(e):""}}function adt(t){let e=null;return function(n){return n?A0(n,e=e||rp(t)):t}}const Vq=t=>t.data;function Qq(t,e){const n=Gq.call(e,t);return n.root&&n.root.lookup||{}}function odt(t,e,n){const i=Qq(t,this),r=i[e],a=i[n];return r&&a?r.path(a).map(Vq):void 0}function sdt(t,e){const n=Qq(t,this)[e];return n?n.ancestors().map(Vq):void 0}const Kq=()=>typeof window<"u"&&window||null;function udt(){const t=Kq();return t?t.screen:{}}function ldt(){const t=Kq();return t?[t.innerWidth,t.innerHeight]:[void 0,void 0]}function cdt(){const t=this.context.dataflow,e=t.container&&t.container();return e?[e.clientWidth,e.clientHeight]:[void 0,void 0]}function Jq(t,e,n){if(!t)return[];const[i,r]=t,a=new Nn().set(i[0],i[1],r[0],r[1]),o=n||this.context.dataflow.scenegraph().root;return zU(o,a,fdt(e))}function fdt(t){let e=null;if(t){const n=Nt(t.marktype),i=Nt(t.markname);e=r=>(!n.length||n.some(a=>r.marktype===a))&&(!i.length||i.some(a=>r.name===a))}return e}function hdt(t,e,n){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:5;t=Nt(t);const r=t[t.length-1];return r===void 0||Math.hypot(r[0]-e,r[1]-n)>i?[...t,[e,n]]:t}function ddt(t){return Nt(t).reduce((e,n,i)=>{let[r,a]=n;return e+=i==0?`M ${r},${a} `:i===t.length-1?" Z":`L ${r},${a} `},"")}function pdt(t,e,n){const{x:i,y:r,mark:a}=n,o=new Nn().set(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,Number.MIN_SAFE_INTEGER,Number.MIN_SAFE_INTEGER);for(const[l,f]of e)l<o.x1&&(o.x1=l),l>o.x2&&(o.x2=l),f<o.y1&&(o.y1=f),f>o.y2&&(o.y2=f);return o.translate(i,r),Jq([[o.x1,o.y1],[o.x2,o.y2]],t,a).filter(l=>gdt(l.x,l.y,e))}function gdt(t,e,n){let i=0;for(let r=0,a=n.length-1;r<n.length;a=r++){const[o,s]=n[a],[l,f]=n[r];f>e!=s>e&&t<(o-l)*(e-f)/(s-f)+l&&i++}return i&1}const z0={random(){return Ma()},cumulativeNormal:Sx,cumulativeLogNormal:sk,cumulativeUniform:fk,densityNormal:nk,densityLogNormal:ok,densityUniform:ck,quantileNormal:Ax,quantileLogNormal:uk,quantileUniform:hk,sampleNormal:Ex,sampleLogNormal:ak,sampleUniform:lk,isArray:gt,isBoolean:gc,isDate:Xl,isDefined(t){return t!==void 0},isNumber:Me,isObject:Rt,isRegExp:RM,isString:Dt,isTuple:_x,isValid(t){return t!=null&&t===t},toBoolean:LM,toDate(t){return zM(t)},toNumber:Ri,toString:FM,indexof:Hht,join:jht,lastindexof:Ght,replace:Yht,reverse:Xht,sort:Wht,slice:Zht,flush:oP,lerp:uP,merge:Fht,pad:fP,peek:be,pluck:qht,span:W0,inrange:kd,truncate:hP,rgb:rc,lab:Z_,hcl:Y_,hsl:H_,luminance:RC,contrast:zht,sequence:Yr,format:mht,utcFormat:yht,utcParse:_ht,utcOffset:GP,utcSequence:XP,timeFormat:Zq,timeParse:vht,timeOffset:HP,timeSequence:YP,timeUnitSpecifier:RP,monthFormat:bht,monthAbbrevFormat:xht,dayFormat:wht,dayAbbrevFormat:Eht,quarter:nP,utcquarter:iP,week:LP,utcweek:PP,dayofyear:NP,utcdayofyear:FP,warn:Rht,info:Nht,debug:Lht,extent(t){return ts(t)},inScope:Dht,intersect:Jq,clampRange:rP,pinchDistance:Uht,pinchAngle:Iht,screen:udt,containerSize:cdt,windowSize:ldt,bandspace:Vht,setdata:pht,pathShape:adt,panLinear:K8,panLog:J8,panPow:tP,panSymlog:eP,zoomLinear:MM,zoomLog:kM,zoomPow:$_,zoomSymlog:OM,encode:ght,modify:Bht,lassoAppend:hdt,lassoPath:ddt,intersectLasso:pdt},mdt=["view","item","group","xy","x","y"],ydt="event.vega.",tj="this.",W3={},ej={forbidden:["_"],allowed:["datum","event","item"],fieldvar:"datum",globalvar:t=>`_[${Mt(Yq+t)}]`,functions:vdt,constants:Uq,visitors:W3},NC=qq(ej);function vdt(t){const e=Iq(t);mdt.forEach(n=>e[n]=ydt+n);for(const n in z0)e[n]=tj+n;return oe(e,Cht(t,z0,W3)),e}function Mn(t,e,n){return arguments.length===1?z0[t]:(z0[t]=e,n&&(W3[t]=n),NC&&(NC.functions[t]=tj+t),this)}Mn("bandwidth",Qht,ar);Mn("copy",Kht,ar);Mn("domain",Jht,ar);Mn("range",edt,ar);Mn("invert",tdt,ar);Mn("scale",ndt,ar);Mn("gradient",idt,ar);Mn("geoArea",Mht,ar);Mn("geoBounds",kht,ar);Mn("geoCentroid",Oht,ar);Mn("geoShape",rdt,ar);Mn("geoScale",$ht,ar);Mn("indata",dht,Tht);Mn("data",Gq,G3);Mn("treePath",odt,G3);Mn("treeAncestors",sdt,G3);Mn("vlSelectionTest",aht,H3);Mn("vlSelectionIdTest",uht,H3);Mn("vlSelectionResolve",cht,H3);Mn("vlSelectionTuples",lht);function as(t,e){const n={};let i;try{t=Dt(t)?t:Mt(t)+"",i=q3(t)}catch{dt("Expression parse error: "+t)}i.visit(a=>{if(a.type!==Rq)return;const o=a.callee.name,s=ej.visitors[o];s&&s(o,a.arguments,e,n)});const r=NC(i);return r.globals.forEach(a=>{const o=Yq+a;!zt(n,o)&&e.getSignal(a)&&(n[o]=e.signalRef(a))}),{$expr:oe({code:r.code},e.options.ast?{ast:i}:null),$fields:r.fields,$params:n}}function _dt(t){const e=this,n=t.operators||[];return t.background&&(e.background=t.background),t.eventConfig&&(e.eventConfig=t.eventConfig),t.locale&&(e.locale=t.locale),n.forEach(i=>e.parseOperator(i)),n.forEach(i=>e.parseOperatorParameters(i)),(t.streams||[]).forEach(i=>e.parseStream(i)),(t.updates||[]).forEach(i=>e.parseUpdate(i)),e.resolve()}const bdt=oo(["rule"]),u4=oo(["group","image","rect"]);function xdt(t,e){let n="";return bdt[e]||(t.x2&&(t.x?(u4[e]&&(n+="if(o.x>o.x2)$=o.x,o.x=o.x2,o.x2=$;"),n+="o.width=o.x2-o.x;"):n+="o.x=o.x2-(o.width||0);"),t.xc&&(n+="o.x=o.xc-(o.width||0)/2;"),t.y2&&(t.y?(u4[e]&&(n+="if(o.y>o.y2)$=o.y,o.y=o.y2,o.y2=$;"),n+="o.height=o.y2-o.y;"):n+="o.y=o.y2-(o.height||0);"),t.yc&&(n+="o.y=o.yc-(o.height||0)/2;")),n}function V3(t){return(t+"").toLowerCase()}function wdt(t){return V3(t)==="operator"}function Edt(t){return V3(t)==="collect"}function bm(t,e,n){n.endsWith(";")||(n="return("+n+");");const i=Function(...e.concat(n));return t&&t.functions?i.bind(t.functions):i}function Sdt(t,e,n,i){return`((u = ${t}) < (v = ${e}) || u == null) && v != null ? ${n}
  : (u > v || v == null) && u != null ? ${i}
  : ((v = v instanceof Date ? +v : v), (u = u instanceof Date ? +u : u)) !== u && v === v ? ${n}
  : v !== v && u === u ? ${i} : `}var Adt={operator:(t,e)=>bm(t,["_"],e.code),parameter:(t,e)=>bm(t,["datum","_"],e.code),event:(t,e)=>bm(t,["event"],e.code),handler:(t,e)=>{const n=`var datum=event.item&&event.item.datum;return ${e.code};`;return bm(t,["_","event"],n)},encode:(t,e)=>{const{marktype:n,channels:i}=e;let r="var o=item,datum=o.datum,m=0,$;";for(const a in i){const o="o["+Mt(a)+"]";r+=`$=${i[a].code};if(${o}!==$)${o}=$,m=1;`}return r+=xdt(i,n),r+="return m;",bm(t,["item","_"],r)},codegen:{get(t){const e=`[${t.map(Mt).join("][")}]`,n=Function("_",`return _${e};`);return n.path=e,n},comparator(t,e){let n;const i=(a,o)=>{const s=e[o];let l,f;return a.path?(l=`a${a.path}`,f=`b${a.path}`):((n=n||{})["f"+o]=a,l=`this.f${o}(a)`,f=`this.f${o}(b)`),Sdt(l,f,-s,s)},r=Function("a","b","var u, v; return "+t.map(i).join("")+"0;");return n?r.bind(n):r}}};function Tdt(t){const e=this;wdt(t.type)||!t.type?e.operator(t,t.update?e.operatorExpression(t.update):null):e.transform(t,t.type)}function Cdt(t){const e=this;if(t.params){const n=e.get(t.id);n||dt("Invalid operator id: "+t.id),e.dataflow.connect(n,n.parameters(e.parseParameters(t.params),t.react,t.initonly))}}function Mdt(t,e){e=e||{};const n=this;for(const i in t){const r=t[i];e[i]=gt(r)?r.map(a=>l4(a,n,e)):l4(r,n,e)}return e}function l4(t,e,n){if(!t||!Rt(t))return t;for(let i=0,r=c4.length,a;i<r;++i)if(a=c4[i],zt(t,a.key))return a.parse(t,e,n);return t}var c4=[{key:"$ref",parse:kdt},{key:"$key",parse:$dt},{key:"$expr",parse:Odt},{key:"$field",parse:Ddt},{key:"$encode",parse:Ndt},{key:"$compare",parse:Rdt},{key:"$context",parse:Ldt},{key:"$subflow",parse:zdt},{key:"$tupleid",parse:Fdt}];function kdt(t,e){return e.get(t.$ref)||dt("Operator not defined: "+t.$ref)}function Odt(t,e,n){t.$params&&e.parseParameters(t.$params,n);const i="e:"+t.$expr.code;return e.fn[i]||(e.fn[i]=kr(e.parameterExpression(t.$expr),t.$fields))}function $dt(t,e){const n="k:"+t.$key+"_"+!!t.$flat;return e.fn[n]||(e.fn[n]=NM(t.$key,t.$flat,e.expr.codegen))}function Ddt(t,e){if(!t.$field)return null;const n="f:"+t.$field+"_"+t.$name;return e.fn[n]||(e.fn[n]=Aa(t.$field,t.$name,e.expr.codegen))}function Rdt(t,e){const n="c:"+t.$compare+"_"+t.$order,i=Nt(t.$compare).map(r=>r&&r.$tupleid?Gt:r);return e.fn[n]||(e.fn[n]=$M(i,t.$order,e.expr.codegen))}function Ndt(t,e){const n=t.$encode,i={};for(const r in n){const a=n[r];i[r]=kr(e.encodeExpression(a.$expr),a.$fields),i[r].output=a.$output}return i}function Ldt(t,e){return e}function zdt(t,e){const n=t.$subflow;return function(i,r,a){const o=e.fork().parse(n),s=o.get(n.operators[0].id),l=o.signals.parent;return l&&l.set(a),s.detachSubflow=()=>e.detach(o),s}}function Fdt(){return Gt}function Pdt(t){var e=this,n=t.filter!=null?e.eventExpression(t.filter):void 0,i=t.stream!=null?e.get(t.stream):void 0,r;t.source?i=e.events(t.source,t.type,n):t.merge&&(r=t.merge.map(a=>e.get(a)),i=r[0].merge.apply(r[0],r.slice(1))),t.between&&(r=t.between.map(a=>e.get(a)),i=i.between(r[0],r[1])),t.filter&&(i=i.filter(n)),t.throttle!=null&&(i=i.throttle(+t.throttle)),t.debounce!=null&&(i=i.debounce(+t.debounce)),i==null&&dt("Invalid stream definition: "+JSON.stringify(t)),t.consume&&i.consume(!0),e.stream(t,i)}function Bdt(t){var e=this,n=Rt(n=t.source)?n.$ref:n,i=e.get(n),r=null,a=t.update,o=void 0;i||dt("Source not defined: "+t.source),r=t.target&&t.target.$expr?e.eventExpression(t.target.$expr):e.get(t.target),a&&a.$expr&&(a.$params&&(o=e.parseParameters(a.$params)),a=e.handlerExpression(a.$expr)),e.update(t,i,r,a,o)}const Udt={skip:!0};function Idt(t){var e=this,n={};if(t.signals){var i=n.signals={};Object.keys(e.signals).forEach(a=>{const o=e.signals[a];t.signals(a,o)&&(i[a]=o.value)})}if(t.data){var r=n.data={};Object.keys(e.data).forEach(a=>{const o=e.data[a];t.data(a,o)&&(r[a]=o.input.value)})}return e.subcontext&&t.recurse!==!1&&(n.subcontext=e.subcontext.map(a=>a.getState(t))),n}function qdt(t){var e=this,n=e.dataflow,i=t.data,r=t.signals;Object.keys(r||{}).forEach(a=>{n.update(e.signals[a],r[a],Udt)}),Object.keys(i||{}).forEach(a=>{n.pulse(e.data[a].input,n.changeset().remove(Ta).insert(i[a]))}),(t.subcontext||[]).forEach((a,o)=>{const s=e.subcontext[o];s&&s.setState(a)})}function nj(t,e,n,i){return new ij(t,e,n,i)}function ij(t,e,n,i){this.dataflow=t,this.transforms=e,this.events=t.events.bind(t),this.expr=i||Adt,this.signals={},this.scales={},this.nodes={},this.data={},this.fn={},n&&(this.functions=Object.create(n),this.functions.context=this)}function f4(t){this.dataflow=t.dataflow,this.transforms=t.transforms,this.events=t.events,this.expr=t.expr,this.signals=Object.create(t.signals),this.scales=Object.create(t.scales),this.nodes=Object.create(t.nodes),this.data=Object.create(t.data),this.fn=Object.create(t.fn),t.functions&&(this.functions=Object.create(t.functions),this.functions.context=this)}ij.prototype=f4.prototype={fork(){const t=new f4(this);return(this.subcontext||(this.subcontext=[])).push(t),t},detach(t){this.subcontext=this.subcontext.filter(n=>n!==t);const e=Object.keys(t.nodes);for(const n of e)t.nodes[n]._targets=null;for(const n of e)t.nodes[n].detach();t.nodes=null},get(t){return this.nodes[t]},set(t,e){return this.nodes[t]=e},add(t,e){const n=this,i=n.dataflow,r=t.value;if(n.set(t.id,e),Edt(t.type)&&r&&(r.$ingest?i.ingest(e,r.$ingest,r.$format):r.$request?i.preload(e,r.$request,r.$format):i.pulse(e,i.changeset().insert(r))),t.root&&(n.root=e),t.parent){let a=n.get(t.parent.$ref);a?(i.connect(a,[e]),e.targets().add(a)):(n.unresolved=n.unresolved||[]).push(()=>{a=n.get(t.parent.$ref),i.connect(a,[e]),e.targets().add(a)})}if(t.signal&&(n.signals[t.signal]=e),t.scale&&(n.scales[t.scale]=e),t.data)for(const a in t.data){const o=n.data[a]||(n.data[a]={});t.data[a].forEach(s=>o[s]=e)}},resolve(){return(this.unresolved||[]).forEach(t=>t()),delete this.unresolved,this},operator(t,e){this.add(t,this.dataflow.add(t.value,e))},transform(t,e){this.add(t,this.dataflow.add(this.transforms[V3(e)]))},stream(t,e){this.set(t.id,e)},update(t,e,n,i,r){this.dataflow.on(e,n,i,r,t.options)},operatorExpression(t){return this.expr.operator(this,t)},parameterExpression(t){return this.expr.parameter(this,t)},eventExpression(t){return this.expr.event(this,t)},handlerExpression(t){return this.expr.handler(this,t)},encodeExpression(t){return this.expr.encode(this,t)},parse:_dt,parseOperator:Tdt,parseOperatorParameters:Cdt,parseParameters:Mdt,parseStream:Pdt,parseUpdate:Bdt,getState:Idt,setState:qdt};function jdt(t){const e=t.container();e&&(e.setAttribute("role","graphics-document"),e.setAttribute("aria-roleDescription","visualization"),rj(e,t.description()))}function rj(t,e){t&&(e==null?t.removeAttribute("aria-label"):t.setAttribute("aria-label",e))}function Hdt(t){t.add(null,e=>(t._background=e.bg,t._resize=1,e.bg),{bg:t._signals.background})}const vA="default";function Gdt(t){const e=t._signals.cursor||(t._signals.cursor=t.add({user:vA,item:null}));t.on(t.events("view","pointermove"),e,(n,i)=>{const r=e.value,a=r?Dt(r)?r:r.user:vA,o=i.item&&i.item.cursor||null;return r&&a===r.user&&o==r.item?r:{user:a,item:o}}),t.add(null,function(n){let i=n.cursor,r=this.value;return Dt(i)||(r=i.item,i=i.user),LC(t,i&&i!==vA?i:r||i),r},{cursor:e})}function LC(t,e){const n=t.globalCursor()?typeof document<"u"&&document.body:t.container();if(n)return e==null?n.style.removeProperty("cursor"):n.style.cursor=e}function Ub(t,e){var n=t._runtime.data;return zt(n,e)||dt("Unrecognized data set: "+e),n[e]}function Zdt(t,e){return arguments.length<2?Ub(this,t).values.value:h2.call(this,t,ch().remove(Ta).insert(e))}function h2(t,e){x9(e)||dt("Second argument to changes must be a changeset.");const n=Ub(this,t);return n.modified=!0,this.pulse(n.input,e)}function Ydt(t,e){return h2.call(this,t,ch().insert(e))}function Xdt(t,e){return h2.call(this,t,ch().remove(e))}function aj(t){var e=t.padding();return Math.max(0,t._viewWidth+e.left+e.right)}function oj(t){var e=t.padding();return Math.max(0,t._viewHeight+e.top+e.bottom)}function d2(t){var e=t.padding(),n=t._origin;return[e.left+n[0],e.top+n[1]]}function Wdt(t){var e=d2(t),n=aj(t),i=oj(t);t._renderer.background(t.background()),t._renderer.resize(n,i,e),t._handler.origin(e),t._resizeListeners.forEach(r=>{try{r(n,i)}catch(a){t.error(a)}})}function Vdt(t,e,n){var i=t._renderer,r=i&&i.canvas(),a,o,s;return r&&(s=d2(t),o=e.changedTouches?e.changedTouches[0]:e,a=Kx(o,r),a[0]-=s[0],a[1]-=s[1]),e.dataflow=t,e.item=n,e.vega=Qdt(t,n,a),e}function Qdt(t,e,n){const i=e?e.mark.marktype==="group"?e:e.mark.group:null;function r(o){var s=i,l;if(o){for(l=e;l;l=l.mark.group)if(l.mark.name===o){s=l;break}}return s&&s.mark&&s.mark.interactive?s:{}}function a(o){if(!o)return n;Dt(o)&&(o=r(o));const s=n.slice();for(;o;)s[0]-=o.x||0,s[1]-=o.y||0,o=o.mark&&o.mark.group;return s}return{view:Ui(t),item:Ui(e||{}),group:r,xy:a,x:o=>a(o)[0],y:o=>a(o)[1]}}const h4="view",Kdt="timer",Jdt="window",tpt={trap:!1};function ept(t){const e=oe({defaults:{}},t),n=(i,r)=>{r.forEach(a=>{gt(i[a])&&(i[a]=oo(i[a]))})};return n(e.defaults,["prevent","allow"]),n(e,["view","window","selector"]),e}function sj(t,e,n,i){t._eventListeners.push({type:n,sources:Nt(e),handler:i})}function npt(t,e){var n=t._eventConfig.defaults,i=n.prevent,r=n.allow;return i===!1||r===!0?!1:i===!0||r===!1?!0:i?i[e]:r?!r[e]:t.preventDefault()}function qv(t,e,n){const i=t._eventConfig&&t._eventConfig[e];return i===!1||Rt(i)&&!i[n]?(t.warn(`Blocked ${e} ${n} event listener.`),!1):!0}function ipt(t,e,n){var i=this,r=new wx(n),a=function(f,d){i.runAsync(null,()=>{t===h4&&npt(i,e)&&f.preventDefault(),r.receive(Vdt(i,f,d))})},o;if(t===Kdt)qv(i,"timer",e)&&i.timer(a,e);else if(t===h4)qv(i,"view",e)&&i.addEventListener(e,a,tpt);else if(t===Jdt?qv(i,"window",e)&&typeof window<"u"&&(o=[window]):typeof document<"u"&&qv(i,"selector",e)&&(o=Array.from(document.querySelectorAll(t))),!o)i.warn("Can not resolve event source: "+t);else{for(var s=0,l=o.length;s<l;++s)o[s].addEventListener(e,a);sj(i,o,e,a)}return r}function d4(t){return t.item}function p4(t){return t.item.mark.source}function g4(t){return function(e,n){return n.vega.view().changeset().encode(n.item,t)}}function rpt(t,e){return t=[t||"hover"],e=[e||"update",t[0]],this.on(this.events("view","pointerover",d4),p4,g4(t)),this.on(this.events("view","pointerout",d4),p4,g4(e)),this}function apt(){var t=this._tooltip,e=this._timers,n=this._handler.handlers(),i=this._eventListeners,r,a,o,s,l;for(r=e.length;--r>=0;)e[r].stop();for(r=i.length;--r>=0;)for(o=i[r],a=o.sources.length;--a>=0;)o.sources[a].removeEventListener(o.type,o.handler);for(t&&t.call(this,this._handler,null,null,null),r=n.length;--r>=0;)l=n[r].type,s=n[r].handler,this._handler.off(l,s);return this}function Qr(t,e,n){const i=document.createElement(t);for(const r in e)i.setAttribute(r,e[r]);return n!=null&&(i.textContent=n),i}const opt="vega-bind",spt="vega-bind-name",upt="vega-bind-radio";function lpt(t,e,n){if(!e)return;const i=n.param;let r=n.state;return r||(r=n.state={elements:null,active:!1,set:null,update:o=>{o!=t.signal(i.signal)&&t.runAsync(null,()=>{r.source=!0,t.signal(i.signal,o)})}},i.debounce&&(r.update=DM(i.debounce,r.update))),(i.input==null&&i.element?cpt:hpt)(r,e,i,t),r.active||(t.on(t._signals[i.signal],null,()=>{r.source?r.source=!1:r.set(t.signal(i.signal))}),r.active=!0),r}function cpt(t,e,n,i){const r=n.event||"input",a=()=>t.update(e.value);i.signal(n.signal,e.value),e.addEventListener(r,a),sj(i,e,r,a),t.set=o=>{e.value=o,e.dispatchEvent(fpt(r))}}function fpt(t){return typeof Event<"u"?new Event(t):{type:t}}function hpt(t,e,n,i){const r=i.signal(n.signal),a=Qr("div",{class:opt}),o=n.input==="radio"?a:a.appendChild(Qr("label"));o.appendChild(Qr("span",{class:spt},n.name||n.signal)),e.appendChild(a);let s=dpt;switch(n.input){case"checkbox":s=ppt;break;case"select":s=gpt;break;case"radio":s=mpt;break;case"range":s=ypt;break}s(t,o,n,r)}function dpt(t,e,n,i){const r=Qr("input");for(const a in n)a!=="signal"&&a!=="element"&&r.setAttribute(a==="input"?"type":a,n[a]);r.setAttribute("name",n.signal),r.value=i,e.appendChild(r),r.addEventListener("input",()=>t.update(r.value)),t.elements=[r],t.set=a=>r.value=a}function ppt(t,e,n,i){const r={type:"checkbox",name:n.signal};i&&(r.checked=!0);const a=Qr("input",r);e.appendChild(a),a.addEventListener("change",()=>t.update(a.checked)),t.elements=[a],t.set=o=>a.checked=!!o||null}function gpt(t,e,n,i){const r=Qr("select",{name:n.signal}),a=n.labels||[];n.options.forEach((o,s)=>{const l={value:o};Ib(o,i)&&(l.selected=!0),r.appendChild(Qr("option",l,(a[s]||o)+""))}),e.appendChild(r),r.addEventListener("change",()=>{t.update(n.options[r.selectedIndex])}),t.elements=[r],t.set=o=>{for(let s=0,l=n.options.length;s<l;++s)if(Ib(n.options[s],o)){r.selectedIndex=s;return}}}function mpt(t,e,n,i){const r=Qr("span",{class:upt}),a=n.labels||[];e.appendChild(r),t.elements=n.options.map((o,s)=>{const l={type:"radio",name:n.signal,value:o};Ib(o,i)&&(l.checked=!0);const f=Qr("input",l);f.addEventListener("change",()=>t.update(o));const d=Qr("label",{},(a[s]||o)+"");return d.prepend(f),r.appendChild(d),f}),t.set=o=>{const s=t.elements,l=s.length;for(let f=0;f<l;++f)Ib(s[f].value,o)&&(s[f].checked=!0)}}function ypt(t,e,n,i){i=i!==void 0?i:(+n.max+ +n.min)/2;const r=n.max!=null?n.max:Math.max(100,+i)||100,a=n.min||Math.min(0,r,+i)||0,o=n.step||ec(a,r,100),s=Qr("input",{type:"range",name:n.signal,min:a,max:r,step:o});s.value=i;const l=Qr("span",{},+i);e.appendChild(s),e.appendChild(l);const f=()=>{l.textContent=s.value,t.update(+s.value)};s.addEventListener("input",f),s.addEventListener("change",f),t.elements=[s],t.set=d=>{s.value=d,l.textContent=d}}function Ib(t,e){return t===e||t+""==e+""}function uj(t,e,n,i,r,a){return e=e||new i(t.loader()),e.initialize(n,aj(t),oj(t),d2(t),r,a).background(t.background())}function Q3(t,e){return e?function(){try{e.apply(this,arguments)}catch(n){t.error(n)}}:null}function vpt(t,e,n,i){const r=new i(t.loader(),Q3(t,t.tooltip())).scene(t.scenegraph().root).initialize(n,d2(t),t);return e&&e.handlers().forEach(a=>{r.on(a.type,a.handler)}),r}function _pt(t,e){const n=this,i=n._renderType,r=n._eventConfig.bind,a=Jx(i);t=n._el=t?_A(n,t,!0):null,jdt(n),a||n.error("Unrecognized renderer type: "+i);const o=a.handler||py,s=t?a.renderer:a.headless;return n._renderer=s?uj(n,n._renderer,t,s):null,n._handler=vpt(n,n._handler,t,o),n._redraw=!0,t&&r!=="none"&&(e=e?n._elBind=_A(n,e,!0):t.appendChild(Qr("form",{class:"vega-bindings"})),n._bind.forEach(l=>{l.param.element&&r!=="container"&&(l.element=_A(n,l.param.element,!!l.param.input))}),n._bind.forEach(l=>{lpt(n,l.element||e,l)})),n}function _A(t,e,n){if(typeof e=="string")if(typeof document<"u"){if(e=document.querySelector(e),!e)return t.error("Signal bind element not found: "+e),null}else return t.error("DOM document instance not found."),null;if(e&&n)try{e.textContent=""}catch(i){e=null,t.error(i)}return e}const xm=t=>+t||0,bpt=t=>({top:t,bottom:t,left:t,right:t});function m4(t){return Rt(t)?{top:xm(t.top),bottom:xm(t.bottom),left:xm(t.left),right:xm(t.right)}:bpt(xm(t))}async function K3(t,e,n,i){const r=Jx(e),a=r&&r.headless;return a||dt("Unrecognized renderer type: "+e),await t.runAsync(),uj(t,null,null,a,n,i).renderAsync(t._scenegraph.root)}async function xpt(t,e){t!==ql.Canvas&&t!==ql.SVG&&t!==ql.PNG&&dt("Unrecognized image type: "+t);const n=await K3(this,t,e);return t===ql.SVG?wpt(n.svg(),"image/svg+xml"):n.canvas().toDataURL("image/png")}function wpt(t,e){const n=new Blob([t],{type:e});return window.URL.createObjectURL(n)}async function Ept(t,e){return(await K3(this,ql.Canvas,t,e)).canvas()}async function Spt(t){return(await K3(this,ql.SVG,t)).svg()}function Apt(t,e,n){return nj(t,Kd,z0,n).parse(e)}function Tpt(t){var e=this._runtime.scales;return zt(e,t)||dt("Unrecognized scale or projection: "+t),e[t].value}var lj="width",cj="height",J3="padding",y4={skip:!0};function fj(t,e){var n=t.autosize(),i=t.padding();return e-(n&&n.contains===J3?i.left+i.right:0)}function hj(t,e){var n=t.autosize(),i=t.padding();return e-(n&&n.contains===J3?i.top+i.bottom:0)}function Cpt(t){var e=t._signals,n=e[lj],i=e[cj],r=e[J3];function a(){t._autosize=t._resize=1}t._resizeWidth=t.add(null,s=>{t._width=s.size,t._viewWidth=fj(t,s.size),a()},{size:n}),t._resizeHeight=t.add(null,s=>{t._height=s.size,t._viewHeight=hj(t,s.size),a()},{size:i});const o=t.add(null,a,{pad:r});t._resizeWidth.rank=n.rank+1,t._resizeHeight.rank=i.rank+1,o.rank=r.rank+1}function Mpt(t,e,n,i,r,a){this.runAfter(o=>{let s=0;o._autosize=0,o.width()!==n&&(s=1,o.signal(lj,n,y4),o._resizeWidth.skip(!0)),o.height()!==i&&(s=1,o.signal(cj,i,y4),o._resizeHeight.skip(!0)),o._viewWidth!==t&&(o._resize=1,o._viewWidth=t),o._viewHeight!==e&&(o._resize=1,o._viewHeight=e),(o._origin[0]!==r[0]||o._origin[1]!==r[1])&&(o._resize=1,o._origin=r),s&&o.run("enter"),a&&o.runAfter(l=>l.resize())},!1,1)}function kpt(t){return this._runtime.getState(t||{data:Opt,signals:$pt,recurse:!0})}function Opt(t,e){return e.modified&&gt(e.input.value)&&!t.startsWith("_:vega:_")}function $pt(t,e){return!(t==="parent"||e instanceof Kd.proxy)}function Dpt(t){return this.runAsync(null,e=>{e._trigger=!1,e._runtime.setState(t)},e=>{e._trigger=!0}),this}function Rpt(t,e){function n(i){t({timestamp:Date.now(),elapsed:i})}this._timers.push(iut(n,e))}function Npt(t,e,n,i){const r=t.element();r&&r.setAttribute("title",Lpt(i))}function Lpt(t){return t==null?"":gt(t)?dj(t):Rt(t)&&!Xl(t)?zpt(t):t+""}function zpt(t){return Object.keys(t).map(e=>{const n=t[e];return e+": "+(gt(n)?dj(n):pj(n))}).join(`
`)}function dj(t){return"["+t.map(pj).join(", ")+"]"}function pj(t){return gt(t)?"[]":Rt(t)&&!Xl(t)?"{}":t}function Fpt(){if(this.renderer()==="canvas"&&this._renderer._canvas){let t=null;const e=()=>{t!=null&&t();const n=matchMedia(`(resolution: ${window.devicePixelRatio}dppx)`);n.addEventListener("change",e),t=()=>{n.removeEventListener("change",e)},this._renderer._canvas.getContext("2d").pixelRatio=window.devicePixelRatio||1,this._redraw=!0,this._resize=1,this.resize().runAsync()};e()}}function gj(t,e){const n=this;if(e=e||{},zd.call(n),e.loader&&n.loader(e.loader),e.logger&&n.logger(e.logger),e.logLevel!=null&&n.logLevel(e.logLevel),e.locale||t.locale){const a=oe({},t.locale,e.locale);n.locale(f9(a.number,a.time))}n._el=null,n._elBind=null,n._renderType=e.renderer||ql.Canvas,n._scenegraph=new lU;const i=n._scenegraph.root;n._renderer=null,n._tooltip=e.tooltip||Npt,n._redraw=!0,n._handler=new py().scene(i),n._globalCursor=!1,n._preventDefault=!1,n._timers=[],n._eventListeners=[],n._resizeListeners=[],n._eventConfig=ept(t.eventConfig),n.globalCursor(n._eventConfig.globalCursor);const r=Apt(n,t,e.expr);n._runtime=r,n._signals=r.signals,n._bind=(t.bindings||[]).map(a=>({state:null,param:oe({},a)})),r.root&&r.root.set(i),i.source=r.data.root.input,n.pulse(r.data.root.input,n.changeset().insert(i.items)),n._width=n.width(),n._height=n.height(),n._viewWidth=fj(n,n._width),n._viewHeight=hj(n,n._height),n._origin=[0,0],n._resize=0,n._autosize=1,Cpt(n),Hdt(n),Gdt(n),n.description(t.description),e.hover&&n.hover(),e.container&&n.initialize(e.container,e.bind),e.watchPixelRatio&&n._watchPixelRatio()}function jv(t,e){return zt(t._signals,e)?t._signals[e]:dt("Unrecognized signal name: "+Mt(e))}function mj(t,e){const n=(t._targets||[]).filter(i=>i._update&&i._update.handler===e);return n.length?n[0]:null}function v4(t,e,n,i){let r=mj(n,i);return r||(r=Q3(t,()=>i(e,n.value)),r.handler=i,t.on(n,null,r)),t}function _4(t,e,n){const i=mj(e,n);return i&&e._targets.remove(i),t}kt(gj,zd,{async evaluate(t,e,n){if(await zd.prototype.evaluate.call(this,t,e),this._redraw||this._resize)try{this._renderer&&(this._resize&&(this._resize=0,Wdt(this)),await this._renderer.renderAsync(this._scenegraph.root)),this._redraw=!1}catch(i){this.error(i)}return n&&r_(this,n),this},dirty(t){this._redraw=!0,this._renderer&&this._renderer.dirty(t)},description(t){if(arguments.length){const e=t!=null?t+"":null;return e!==this._desc&&rj(this._el,this._desc=e),this}return this._desc},container(){return this._el},scenegraph(){return this._scenegraph},origin(){return this._origin.slice()},signal(t,e,n){const i=jv(this,t);return arguments.length===1?i.value:this.update(i,e,n)},width(t){return arguments.length?this.signal("width",t):this.signal("width")},height(t){return arguments.length?this.signal("height",t):this.signal("height")},padding(t){return arguments.length?this.signal("padding",m4(t)):m4(this.signal("padding"))},autosize(t){return arguments.length?this.signal("autosize",t):this.signal("autosize")},background(t){return arguments.length?this.signal("background",t):this.signal("background")},renderer(t){return arguments.length?(Jx(t)||dt("Unrecognized renderer type: "+t),t!==this._renderType&&(this._renderType=t,this._resetRenderer()),this):this._renderType},tooltip(t){return arguments.length?(t!==this._tooltip&&(this._tooltip=t,this._resetRenderer()),this):this._tooltip},loader(t){return arguments.length?(t!==this._loader&&(zd.prototype.loader.call(this,t),this._resetRenderer()),this):this._loader},resize(){return this._autosize=1,this.touch(jv(this,"autosize"))},_resetRenderer(){this._renderer&&(this._renderer=null,this.initialize(this._el,this._elBind))},_resizeView:Mpt,addEventListener(t,e,n){let i=e;return n&&n.trap===!1||(i=Q3(this,e),i.raw=e),this._handler.on(t,i),this},removeEventListener(t,e){for(var n=this._handler.handlers(t),i=n.length,r,a;--i>=0;)if(a=n[i].type,r=n[i].handler,t===a&&(e===r||e===r.raw)){this._handler.off(a,r);break}return this},addResizeListener(t){const e=this._resizeListeners;return e.includes(t)||e.push(t),this},removeResizeListener(t){var e=this._resizeListeners,n=e.indexOf(t);return n>=0&&e.splice(n,1),this},addSignalListener(t,e){return v4(this,t,jv(this,t),e)},removeSignalListener(t,e){return _4(this,jv(this,t),e)},addDataListener(t,e){return v4(this,t,Ub(this,t).values,e)},removeDataListener(t,e){return _4(this,Ub(this,t).values,e)},globalCursor(t){if(arguments.length){if(this._globalCursor!==!!t){const e=LC(this,null);this._globalCursor=!!t,e&&LC(this,e)}return this}else return this._globalCursor},preventDefault(t){return arguments.length?(this._preventDefault=t,this):this._preventDefault},timer:Rpt,events:ipt,finalize:apt,hover:rpt,data:Zdt,change:h2,insert:Ydt,remove:Xdt,scale:Tpt,initialize:_pt,toImageURL:xpt,toCanvas:Ept,toSVG:Spt,getState:kpt,setState:Dpt,_watchPixelRatio:Fpt});const Ppt="view",qb="[",jb="]",yj="{",vj="}",Bpt=":",_j=",",Upt="@",Ipt=">",qpt=/[[\]{}]/,jpt={"*":1,arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1};let bj,xj;function xc(t,e,n){return bj=e||Ppt,xj=n||jpt,wj(t.trim()).map(zC)}function Hpt(t){return xj[t]}function h0(t,e,n,i,r){const a=t.length;let o=0,s;for(;e<a;++e){if(s=t[e],!o&&s===n)return e;r&&r.includes(s)?--o:i&&i.includes(s)&&++o}return e}function wj(t){const e=[],n=t.length;let i=0,r=0;for(;r<n;)r=h0(t,r,_j,qb+yj,jb+vj),e.push(t.substring(i,r).trim()),i=++r;if(e.length===0)throw"Empty event selector: "+t;return e}function zC(t){return t[0]==="["?Gpt(t):Zpt(t)}function Gpt(t){const e=t.length;let n=1,i;if(n=h0(t,n,jb,qb,jb),n===e)throw"Empty between selector: "+t;if(i=wj(t.substring(1,n)),i.length!==2)throw"Between selector must have two elements: "+t;if(t=t.slice(n+1).trim(),t[0]!==Ipt)throw"Expected '>' after between selector: "+t;i=i.map(zC);const r=zC(t.slice(1).trim());return r.between?{between:i,stream:r}:(r.between=i,r)}function Zpt(t){const e={source:bj},n=[];let i=[0,0],r=0,a=0,o=t.length,s=0,l,f;if(t[o-1]===vj){if(s=t.lastIndexOf(yj),s>=0){try{i=Ypt(t.substring(s+1,o-1))}catch{throw"Invalid throttle specification: "+t}t=t.slice(0,s).trim(),o=t.length}else throw"Unmatched right brace: "+t;s=0}if(!o)throw t;if(t[0]===Upt&&(r=++s),l=h0(t,s,Bpt),l<o&&(n.push(t.substring(a,l).trim()),a=s=++l),s=h0(t,s,qb),s===o)n.push(t.substring(a,o).trim());else if(n.push(t.substring(a,s).trim()),f=[],a=++s,a===o)throw"Unmatched left bracket: "+t;for(;s<o;){if(s=h0(t,s,jb),s===o)throw"Unmatched left bracket: "+t;if(f.push(t.substring(a,s).trim()),s<o-1&&t[++s]!==qb)throw"Expected left bracket: "+t;a=++s}if(!(o=n.length)||qpt.test(n[o-1]))throw"Invalid event selector: "+t;return o>1?(e.type=n[1],r?e.markname=n[0].slice(1):Hpt(n[0])?e.marktype=n[0]:e.source=n[0]):e.type=n[0],e.type.slice(-1)==="!"&&(e.consume=!0,e.type=e.type.slice(0,-1)),f!=null&&(e.filter=f),i[0]&&(e.throttle=i[0]),i[1]&&(e.debounce=i[1]),e}function Ypt(t){const e=t.split(_j);if(!t.length||e.length>2)throw t;return e.map(n=>{const i=+n;if(i!==i)throw t;return i})}function Xpt(t){return Rt(t)?t:{type:t||"pad"}}const wm=t=>+t||0,Wpt=t=>({top:t,bottom:t,left:t,right:t});function Vpt(t){return Rt(t)?t.signal?t:{top:wm(t.top),bottom:wm(t.bottom),left:wm(t.left),right:wm(t.right)}:Wpt(wm(t))}const ti=t=>Rt(t)&&!gt(t)?oe({},t):{value:t};function b4(t,e,n,i){return n!=null?(Rt(n)&&!gt(n)||gt(n)&&n.length&&Rt(n[0])?t.update[e]=n:t[i||"enter"][e]={value:n},1):0}function _i(t,e,n){for(const i in e)b4(t,i,e[i]);for(const i in n)b4(t,i,n[i],"update")}function jp(t,e,n){for(const i in e)n&&zt(n,i)||(t[i]=oe(t[i]||{},e[i]));return t}function Cd(t,e){return e&&(e.enter&&e.enter[t]||e.update&&e.update[t])}const t$="mark",e$="frame",n$="scope",Qpt="axis",Kpt="axis-domain",Jpt="axis-grid",tgt="axis-label",egt="axis-tick",ngt="axis-title",igt="legend",rgt="legend-band",agt="legend-entry",ogt="legend-gradient",Ej="legend-label",sgt="legend-symbol",ugt="legend-title",lgt="title",cgt="title-text",fgt="title-subtitle";function hgt(t,e,n,i,r){const a={},o={};let s,l,f,d;l="lineBreak",e==="text"&&r[l]!=null&&!Cd(l,t)&&bA(a,l,r[l]),(n=="legend"||String(n).startsWith("axis"))&&(n=null),d=n===e$?r.group:n===t$?oe({},r.mark,r[e]):null;for(l in d)f=Cd(l,t)||(l==="fill"||l==="stroke")&&(Cd("fill",t)||Cd("stroke",t)),f||bA(a,l,d[l]);Nt(i).forEach(p=>{const m=r.style&&r.style[p];for(const _ in m)Cd(_,t)||bA(a,_,m[_])}),t=oe({},t);for(l in a)d=a[l],d.signal?(s=s||{})[l]=d:o[l]=d;return t.enter=oe(o,t.enter),s&&(t.update=oe(s,t.update)),t}function bA(t,e,n){t[e]=n&&n.signal?{signal:n.signal}:{value:n}}const Sj=t=>Dt(t)?Mt(t):t.signal?`(${t.signal})`:Aj(t);function p2(t){if(t.gradient!=null)return pgt(t);let e=t.signal?`(${t.signal})`:t.color?dgt(t.color):t.field!=null?Aj(t.field):t.value!==void 0?Mt(t.value):void 0;return t.scale!=null&&(e=ggt(t,e)),e===void 0&&(e=null),t.exponent!=null&&(e=`pow(${e},${w_(t.exponent)})`),t.mult!=null&&(e+=`*${w_(t.mult)}`),t.offset!=null&&(e+=`+${w_(t.offset)}`),t.round&&(e=`round(${e})`),e}const Hv=(t,e,n,i)=>`(${t}(${[e,n,i].map(p2).join(",")})+'')`;function dgt(t){return t.c?Hv("hcl",t.h,t.c,t.l):t.h||t.s?Hv("hsl",t.h,t.s,t.l):t.l||t.a?Hv("lab",t.l,t.a,t.b):t.r||t.g||t.b?Hv("rgb",t.r,t.g,t.b):null}function pgt(t){const e=[t.start,t.stop,t.count].map(n=>n==null?null:Mt(n));for(;e.length&&be(e)==null;)e.pop();return e.unshift(Sj(t.gradient)),`gradient(${e.join(",")})`}function w_(t){return Rt(t)?"("+p2(t)+")":t}function Aj(t){return Tj(Rt(t)?t:{datum:t})}function Tj(t){let e,n,i;if(t.signal)e="datum",i=t.signal;else if(t.group||t.parent){for(n=Math.max(1,t.level||1),e="item";n-- >0;)e+=".mark.group";t.parent?(i=t.parent,e+=".datum"):i=t.group}else t.datum?(e="datum",i=t.datum):dt("Invalid field reference: "+Mt(t));return t.signal||(i=Dt(i)?ls(i).map(Mt).join("]["):Tj(i)),e+"["+i+"]"}function ggt(t,e){const n=Sj(t.scale);return t.range!=null?e=`lerp(_range(${n}), ${+t.range})`:(e!==void 0&&(e=`_scale(${n}, ${e})`),t.band&&(e=(e?e+"+":"")+`_bandwidth(${n})`+(+t.band==1?"":"*"+w_(t.band)),t.extra&&(e=`(datum.extra ? _scale(${n}, datum.extra.value) : ${e})`)),e==null&&(e="0")),e}function mgt(t){let e="";return t.forEach(n=>{const i=p2(n);e+=n.test?`(${n.test})?${i}:`:i}),be(e)===":"&&(e+="null"),e}function Cj(t,e,n,i,r,a){const o={};a=a||{},a.encoders={$encode:o},t=hgt(t,e,n,i,r.config);for(const s in t)o[s]=ygt(t[s],e,a,r);return a}function ygt(t,e,n,i){const r={},a={};for(const o in t)t[o]!=null&&(r[o]=_gt(vgt(t[o]),i,n,a));return{$expr:{marktype:e,channels:r},$fields:Object.keys(a),$output:Object.keys(t)}}function vgt(t){return gt(t)?mgt(t):p2(t)}function _gt(t,e,n,i){const r=as(t,e);return r.$fields.forEach(a=>i[a]=1),oe(n,r.$params),r.$expr}const bgt="outer",xgt=["value","update","init","react","bind"];function x4(t,e){dt(t+' for "outer" push: '+Mt(e))}function Mj(t,e){const n=t.name;if(t.push===bgt)e.signals[n]||x4("No prior signal definition",n),xgt.forEach(i=>{t[i]!==void 0&&x4("Invalid property ",i)});else{const i=e.addSignal(n,t.value);t.react===!1&&(i.react=!1),t.bind&&e.addBinding(n,t.bind)}}function FC(t,e,n,i){this.id=-1,this.type=t,this.value=e,this.params=n,i&&(this.parent=i)}function g2(t,e,n,i){return new FC(t,e,n,i)}function Hb(t,e){return g2("operator",t,e)}function Ht(t){const e={$ref:t.id};return t.id<0&&(t.refs=t.refs||[]).push(e),e}function F0(t,e){return e?{$field:t,$name:e}:{$field:t}}const PC=F0("key");function w4(t,e){return{$compare:t,$order:e}}function wgt(t,e){const n={$key:t};return e&&(n.$flat=!0),n}const Egt="ascending",Sgt="descending";function Agt(t){return Rt(t)?(t.order===Sgt?"-":"+")+m2(t.op,t.field):""}function m2(t,e){return(t&&t.signal?"$"+t.signal:t||"")+(t&&e?"_":"")+(e&&e.signal?"$"+e.signal:e||"")}const i$="scope",BC="view";function In(t){return t&&t.signal}function Tgt(t){return t&&t.expr}function E_(t){if(In(t))return!0;if(Rt(t)){for(const e in t)if(E_(t[e]))return!0}return!1}function Wa(t,e){return t??e}function Rf(t){return t&&t.signal||t}const E4="timer";function P0(t,e){return(t.merge?Mgt:t.stream?kgt:t.type?Ogt:dt("Invalid stream specification: "+Mt(t)))(t,e)}function Cgt(t){return t===i$?BC:t||BC}function Mgt(t,e){const n=t.merge.map(r=>P0(r,e)),i=r$({merge:n},t,e);return e.addStream(i).id}function kgt(t,e){const n=P0(t.stream,e),i=r$({stream:n},t,e);return e.addStream(i).id}function Ogt(t,e){let n;t.type===E4?(n=e.event(E4,t.throttle),t={between:t.between,filter:t.filter}):n=e.event(Cgt(t.source),t.type);const i=r$({stream:n},t,e);return Object.keys(i).length===1?n:e.addStream(i).id}function r$(t,e,n){let i=e.between;return i&&(i.length!==2&&dt('Stream "between" parameter must have 2 entries: '+Mt(e)),t.between=[P0(i[0],n),P0(i[1],n)]),i=e.filter?[].concat(e.filter):[],(e.marktype||e.markname||e.markrole)&&i.push($gt(e.marktype,e.markname,e.markrole)),e.source===i$&&i.push("inScope(event.item)"),i.length&&(t.filter=as("("+i.join(")&&(")+")",n).$expr),(i=e.throttle)!=null&&(t.throttle=+i),(i=e.debounce)!=null&&(t.debounce=+i),e.consume&&(t.consume=!0),t}function $gt(t,e,n){const i="event.item";return i+(t&&t!=="*"?"&&"+i+".mark.marktype==='"+t+"'":"")+(n?"&&"+i+".mark.role==='"+n+"'":"")+(e?"&&"+i+".mark.name==='"+e+"'":"")}const Dgt={code:"_.$value",ast:{type:"Identifier",value:"value"}};function Rgt(t,e,n){const i=t.encode,r={target:n};let a=t.events,o=t.update,s=[];a||dt("Signal update missing events specification."),Dt(a)&&(a=xc(a,e.isSubscope()?i$:BC)),a=Nt(a).filter(l=>l.signal||l.scale?(s.push(l),0):1),s.length>1&&(s=[Lgt(s)]),a.length&&s.push(a.length>1?{merge:a}:a[0]),i!=null&&(o&&dt("Signal encode and update are mutually exclusive."),o="encode(item(),"+Mt(i)+")"),r.update=Dt(o)?as(o,e):o.expr!=null?as(o.expr,e):o.value!=null?o.value:o.signal!=null?{$expr:Dgt,$params:{$value:e.signalRef(o.signal)}}:dt("Invalid signal update specification."),t.force&&(r.options={force:!0}),s.forEach(l=>e.addUpdate(oe(Ngt(l,e),r)))}function Ngt(t,e){return{source:t.signal?e.signalRef(t.signal):t.scale?e.scaleRef(t.scale):P0(t,e)}}function Lgt(t){return{signal:"["+t.map(e=>e.scale?'scale("'+e.scale+'")':e.signal)+"]"}}function zgt(t,e){const n=e.getSignal(t.name);let i=t.update;t.init&&(i?dt("Signals can not include both init and update expressions."):(i=t.init,n.initonly=!0)),i&&(i=as(i,e),n.update=i.$expr,n.params=i.$params),t.on&&t.on.forEach(r=>Rgt(r,e,n.id))}const He=t=>(e,n,i)=>g2(t,n,e||void 0,i),kj=He("aggregate"),Fgt=He("axisticks"),Oj=He("bound"),go=He("collect"),S4=He("compare"),Pgt=He("datajoin"),$j=He("encode"),Bgt=He("expression"),Ugt=He("facet"),Igt=He("field"),qgt=He("key"),jgt=He("legendentries"),Hgt=He("load"),Ggt=He("mark"),Zgt=He("multiextent"),Ygt=He("multivalues"),Xgt=He("overlap"),Wgt=He("params"),Dj=He("prefacet"),Vgt=He("projection"),Qgt=He("proxy"),Kgt=He("relay"),Rj=He("render"),Jgt=He("scale"),ph=He("sieve"),tmt=He("sortitems"),Nj=He("viewlayout"),emt=He("values");let nmt=0;const Lj={min:"min",max:"max",count:"sum"};function imt(t,e){const n=t.type||"linear";wB(n)||dt("Unrecognized scale type: "+Mt(n)),e.addScale(t.name,{type:n,domain:void 0})}function rmt(t,e){const n=e.getScale(t.name).params;let i;n.domain=zj(t.domain,t,e),t.range!=null&&(n.range=Pj(t,e,n)),t.interpolate!=null&&pmt(t.interpolate,n),t.nice!=null&&(n.nice=dmt(t.nice,e)),t.bins!=null&&(n.bins=hmt(t.bins,e));for(i in t)zt(n,i)||i==="name"||(n[i]=xa(t[i],e))}function xa(t,e){return Rt(t)?t.signal?e.signalRef(t.signal):dt("Unsupported object: "+Mt(t)):t}function S_(t,e){return t.signal?e.signalRef(t.signal):t.map(n=>xa(n,e))}function y2(t){dt("Can not find data set: "+Mt(t))}function zj(t,e,n){if(!t){(e.domainMin!=null||e.domainMax!=null)&&dt("No scale domain defined for domainMin/domainMax to override.");return}return t.signal?n.signalRef(t.signal):(gt(t)?amt:t.fields?smt:omt)(t,e,n)}function amt(t,e,n){return t.map(i=>xa(i,n))}function omt(t,e,n){const i=n.getData(t.data);return i||y2(t.data),ip(e.type)?i.valuesRef(n,t.field,Fj(t.sort,!1)):AB(e.type)?i.domainRef(n,t.field):i.extentRef(n,t.field)}function smt(t,e,n){const i=t.data,r=t.fields.reduce((a,o)=>(o=Dt(o)?{data:i,field:o}:gt(o)||o.signal?umt(o,n):o,a.push(o),a),[]);return(ip(e.type)?lmt:AB(e.type)?cmt:fmt)(t,n,r)}function umt(t,e){const n="_:vega:_"+nmt++,i=go({});if(gt(t))i.value={$ingest:t};else if(t.signal){const r="setdata("+Mt(n)+","+t.signal+")";i.params.input=e.signalRef(r)}return e.addDataPipeline(n,[i,ph({})]),{data:n,field:"data"}}function lmt(t,e,n){const i=Fj(t.sort,!0);let r,a;const o=n.map(f=>{const d=e.getData(f.data);return d||y2(f.data),d.countsRef(e,f.field,i)}),s={groupby:PC,pulse:o};i&&(r=i.op||"count",a=i.field?m2(r,i.field):"count",s.ops=[Lj[r]],s.fields=[e.fieldRef(a)],s.as=[a]),r=e.add(kj(s));const l=e.add(go({pulse:Ht(r)}));return a=e.add(emt({field:PC,sort:e.sortRef(i),pulse:Ht(l)})),Ht(a)}function Fj(t,e){return t&&(!t.field&&!t.op?Rt(t)?t.field="key":t={field:"key"}:!t.field&&t.op!=="count"?dt("No field provided for sort aggregate op: "+t.op):e&&t.field&&t.op&&!Lj[t.op]&&dt("Multiple domain scales can not be sorted using "+t.op)),t}function cmt(t,e,n){const i=n.map(r=>{const a=e.getData(r.data);return a||y2(r.data),a.domainRef(e,r.field)});return Ht(e.add(Ygt({values:i})))}function fmt(t,e,n){const i=n.map(r=>{const a=e.getData(r.data);return a||y2(r.data),a.extentRef(e,r.field)});return Ht(e.add(Zgt({extents:i})))}function hmt(t,e){return t.signal||gt(t)?S_(t,e):e.objectProperty(t)}function dmt(t,e){return t.signal?e.signalRef(t.signal):Rt(t)?{interval:xa(t.interval),step:xa(t.step)}:xa(t)}function pmt(t,e){e.interpolate=xa(t.type||t),t.gamma!=null&&(e.interpolateGamma=xa(t.gamma))}function Pj(t,e,n){const i=e.config.range;let r=t.range;if(r.signal)return e.signalRef(r.signal);if(Dt(r)){if(i&&zt(i,r))return t=oe({},t,{range:i[r]}),Pj(t,e,n);r==="width"?r=[0,{signal:"width"}]:r==="height"?r=ip(t.type)?[0,{signal:"height"}]:[{signal:"height"},0]:dt("Unrecognized scale range value: "+Mt(r))}else if(r.scheme){n.scheme=gt(r.scheme)?S_(r.scheme,e):xa(r.scheme,e),r.extent&&(n.schemeExtent=S_(r.extent,e)),r.count&&(n.schemeCount=xa(r.count,e));return}else if(r.step){n.rangeStep=xa(r.step,e);return}else{if(ip(t.type)&&!gt(r))return zj(r,t,e);gt(r)||dt("Unsupported range type: "+Mt(r))}return r.map(a=>(gt(a)?S_:xa)(a,e))}function gmt(t,e){const n=e.config.projection||{},i={};for(const r in t)r!=="name"&&(i[r]=UC(t[r],r,e));for(const r in n)i[r]==null&&(i[r]=UC(n[r],r,e));e.addProjection(t.name,i)}function UC(t,e,n){return gt(t)?t.map(i=>UC(i,e,n)):Rt(t)?t.signal?n.signalRef(t.signal):e==="fit"?t:dt("Unsupported parameter object: "+Mt(t)):t}const mo="top",Hp="left",Gp="right",lc="bottom",Bj="center",mmt="vertical",ymt="start",vmt="middle",_mt="end",IC="index",a$="label",bmt="offset",hp="perc",xmt="perc2",Ea="value",Ey="guide-label",o$="guide-title",wmt="group-title",Emt="group-subtitle",A4="symbol",A_="gradient",qC="discrete",jC="size",Smt="shape",Amt="fill",Tmt="stroke",Cmt="strokeWidth",Mmt="strokeDash",kmt="opacity",s$=[jC,Smt,Amt,Tmt,Cmt,Mmt,kmt],Sy={name:1,style:1,interactive:1},Ee={value:0},Sa={value:1},v2="group",Uj="rect",u$="rule",Omt="symbol",gh="text";function B0(t){return t.type=v2,t.interactive=t.interactive||!1,t}function Or(t,e){const n=(i,r)=>Wa(t[i],Wa(e[i],r));return n.isVertical=i=>mmt===Wa(t.direction,e.direction||(i?e.symbolDirection:e.gradientDirection)),n.gradientLength=()=>Wa(t.gradientLength,e.gradientLength||e.gradientWidth),n.gradientThickness=()=>Wa(t.gradientThickness,e.gradientThickness||e.gradientHeight),n.entryColumns=()=>Wa(t.columns,Wa(e.columns,+n.isVertical(!0))),n}function Ij(t,e){const n=e&&(e.update&&e.update[t]||e.enter&&e.enter[t]);return n&&n.signal?n:n?n.value:null}function $mt(t,e,n){const i=e.config.style[n];return i&&i[t]}function _2(t,e,n){return`item.anchor === '${ymt}' ? ${t} : item.anchor === '${_mt}' ? ${e} : ${n}`}const l$=_2(Mt(Hp),Mt(Gp),Mt(Bj));function Dmt(t){const e=t("tickBand");let n=t("tickOffset"),i,r;return e?e.signal?(i={signal:`(${e.signal}) === 'extent' ? 1 : 0.5`},r={signal:`(${e.signal}) === 'extent'`},Rt(n)||(n={signal:`(${e.signal}) === 'extent' ? 0 : ${n}`})):e==="extent"?(i=1,r=!0,n=0):(i=.5,r=!1):(i=t("bandPosition"),r=t("tickExtra")),{extra:r,band:i,offset:n}}function qj(t,e){return e?t?Rt(t)?Object.assign({},t,{offset:qj(t.offset,e)}):{value:t,offset:e}:e:t}function ia(t,e){return e?(t.name=e.name,t.style=e.style||t.style,t.interactive=!!e.interactive,t.encode=jp(t.encode,e,Sy)):t.interactive=!1,t}function Rmt(t,e,n,i){const r=Or(t,n),a=r.isVertical(),o=r.gradientThickness(),s=r.gradientLength();let l,f,d,p,m;a?(f=[0,1],d=[0,0],p=o,m=s):(f=[0,0],d=[1,0],p=s,m=o);const _={enter:l={opacity:Ee,x:Ee,y:Ee,width:ti(p),height:ti(m)},update:oe({},l,{opacity:Sa,fill:{gradient:e,start:f,stop:d}}),exit:{opacity:Ee}};return _i(_,{stroke:r("gradientStrokeColor"),strokeWidth:r("gradientStrokeWidth")},{opacity:r("gradientOpacity")}),ia({type:Uj,role:ogt,encode:_},i)}function Nmt(t,e,n,i,r){const a=Or(t,n),o=a.isVertical(),s=a.gradientThickness(),l=a.gradientLength();let f,d,p,m,_="";o?(f="y",p="y2",d="x",m="width",_="1-"):(f="x",p="x2",d="y",m="height");const b={opacity:Ee,fill:{scale:e,field:Ea}};b[f]={signal:_+"datum."+hp,mult:l},b[d]=Ee,b[p]={signal:_+"datum."+xmt,mult:l},b[m]=ti(s);const x={enter:b,update:oe({},b,{opacity:Sa}),exit:{opacity:Ee}};return _i(x,{stroke:a("gradientStrokeColor"),strokeWidth:a("gradientStrokeWidth")},{opacity:a("gradientOpacity")}),ia({type:Uj,role:rgt,key:Ea,from:r,encode:x},i)}const Lmt=`datum.${hp}<=0?"${Hp}":datum.${hp}>=1?"${Gp}":"${Bj}"`,zmt=`datum.${hp}<=0?"${lc}":datum.${hp}>=1?"${mo}":"${vmt}"`;function T4(t,e,n,i){const r=Or(t,e),a=r.isVertical(),o=ti(r.gradientThickness()),s=r.gradientLength();let l=r("labelOverlap"),f,d,p,m,_="";const b={enter:f={opacity:Ee},update:d={opacity:Sa,text:{field:a$}},exit:{opacity:Ee}};return _i(b,{fill:r("labelColor"),fillOpacity:r("labelOpacity"),font:r("labelFont"),fontSize:r("labelFontSize"),fontStyle:r("labelFontStyle"),fontWeight:r("labelFontWeight"),limit:Wa(t.labelLimit,e.gradientLabelLimit)}),a?(f.align={value:"left"},f.baseline=d.baseline={signal:zmt},p="y",m="x",_="1-"):(f.align=d.align={signal:Lmt},f.baseline={value:"top"},p="x",m="y"),f[p]=d[p]={signal:_+"datum."+hp,mult:s},f[m]=d[m]=o,o.offset=Wa(t.labelOffset,e.gradientLabelOffset)||0,l=l?{separation:r("labelSeparation"),method:l,order:"datum."+IC}:void 0,ia({type:gh,role:Ej,style:Ey,key:Ea,from:i,encode:b,overlap:l},n)}function Fmt(t,e,n,i,r){const a=Or(t,e),o=n.entries,s=!!(o&&o.interactive),l=o?o.name:void 0,f=a("clipHeight"),d=a("symbolOffset"),p={data:"value"},m=`(${r}) ? datum.${bmt} : datum.${jC}`,_=f?ti(f):{field:jC},b=`datum.${IC}`,x=`max(1, ${r})`;let S,T,M,k,$;_.mult=.5,S={enter:T={opacity:Ee,x:{signal:m,mult:.5,offset:d},y:_},update:M={opacity:Sa,x:T.x,y:T.y},exit:{opacity:Ee}};let D=null,F=null;t.fill||(D=e.symbolBaseFillColor,F=e.symbolBaseStrokeColor),_i(S,{fill:a("symbolFillColor",D),shape:a("symbolType"),size:a("symbolSize"),stroke:a("symbolStrokeColor",F),strokeDash:a("symbolDash"),strokeDashOffset:a("symbolDashOffset"),strokeWidth:a("symbolStrokeWidth")},{opacity:a("symbolOpacity")}),s$.forEach(Y=>{t[Y]&&(M[Y]=T[Y]={scale:t[Y],field:Ea})});const N=ia({type:Omt,role:sgt,key:Ea,from:p,clip:f?!0:void 0,encode:S},n.symbols),I=ti(d);I.offset=a("labelOffset"),S={enter:T={opacity:Ee,x:{signal:m,offset:I},y:_},update:M={opacity:Sa,text:{field:a$},x:T.x,y:T.y},exit:{opacity:Ee}},_i(S,{align:a("labelAlign"),baseline:a("labelBaseline"),fill:a("labelColor"),fillOpacity:a("labelOpacity"),font:a("labelFont"),fontSize:a("labelFontSize"),fontStyle:a("labelFontStyle"),fontWeight:a("labelFontWeight"),limit:a("labelLimit")});const q=ia({type:gh,role:Ej,style:Ey,key:Ea,from:p,encode:S},n.labels);return S={enter:{noBound:{value:!f},width:Ee,height:f?ti(f):Ee,opacity:Ee},exit:{opacity:Ee},update:M={opacity:Sa,row:{signal:null},column:{signal:null}}},a.isVertical(!0)?(k=`ceil(item.mark.items.length / ${x})`,M.row.signal=`${b}%${k}`,M.column.signal=`floor(${b} / ${k})`,$={field:["row",b]}):(M.row.signal=`floor(${b} / ${x})`,M.column.signal=`${b} % ${x}`,$={field:b}),M.column.signal=`(${r})?${M.column.signal}:${b}`,i={facet:{data:i,name:"value",groupby:IC}},B0({role:n$,from:i,encode:jp(S,o,Sy),marks:[N,q],name:l,interactive:s,sort:$})}function Pmt(t,e){const n=Or(t,e);return{align:n("gridAlign"),columns:n.entryColumns(),center:{row:!0,column:!1},padding:{row:n("rowPadding"),column:n("columnPadding")}}}const c$='item.orient === "left"',f$='item.orient === "right"',b2=`(${c$} || ${f$})`,Bmt=`datum.vgrad && ${b2}`,Umt=_2('"top"','"bottom"','"middle"'),Imt=_2('"right"','"left"','"center"'),qmt=`datum.vgrad && ${f$} ? (${Imt}) : (${b2} && !(datum.vgrad && ${c$})) ? "left" : ${l$}`,jmt=`item._anchor || (${b2} ? "middle" : "start")`,Hmt=`${Bmt} ? (${c$} ? -90 : 90) : 0`,Gmt=`${b2} ? (datum.vgrad ? (${f$} ? "bottom" : "top") : ${Umt}) : "top"`;function Zmt(t,e,n,i){const r=Or(t,e),a={enter:{opacity:Ee},update:{opacity:Sa,x:{field:{group:"padding"}},y:{field:{group:"padding"}}},exit:{opacity:Ee}};return _i(a,{orient:r("titleOrient"),_anchor:r("titleAnchor"),anchor:{signal:jmt},angle:{signal:Hmt},align:{signal:qmt},baseline:{signal:Gmt},text:t.title,fill:r("titleColor"),fillOpacity:r("titleOpacity"),font:r("titleFont"),fontSize:r("titleFontSize"),fontStyle:r("titleFontStyle"),fontWeight:r("titleFontWeight"),limit:r("titleLimit"),lineHeight:r("titleLineHeight")},{align:r("titleAlign"),baseline:r("titleBaseline")}),ia({type:gh,role:ugt,style:o$,from:i,encode:a},n)}function Ymt(t,e){let n;return Rt(t)&&(t.signal?n=t.signal:t.path?n="pathShape("+C4(t.path)+")":t.sphere&&(n="geoShape("+C4(t.sphere)+', {type: "Sphere"})')),n?e.signalRef(n):!!t}function C4(t){return Rt(t)&&t.signal?t.signal:Mt(t)}function jj(t){const e=t.role||"";return e.startsWith("axis")||e.startsWith("legend")||e.startsWith("title")?e:t.type===v2?n$:e||t$}function Xmt(t){return{marktype:t.type,name:t.name||void 0,role:t.role||jj(t),zindex:+t.zindex||void 0,aria:t.aria,description:t.description}}function Wmt(t,e){return t&&t.signal?e.signalRef(t.signal):t!==!1}function h$(t,e){const n=S9(t.type);n||dt("Unrecognized transform type: "+Mt(t.type));const i=g2(n.type.toLowerCase(),null,Hj(n,t,e));return t.signal&&e.addSignal(t.signal,e.proxy(i)),i.metadata=n.metadata||{},i}function Hj(t,e,n){const i={},r=t.params.length;for(let a=0;a<r;++a){const o=t.params[a];i[o.name]=Vmt(o,e,n)}return i}function Vmt(t,e,n){const i=t.type,r=e[t.name];if(i==="index")return Qmt(t,e,n);if(r===void 0){t.required&&dt("Missing required "+Mt(e.type)+" parameter: "+Mt(t.name));return}else{if(i==="param")return Kmt(t,e,n);if(i==="projection")return n.projectionRef(e[t.name])}return t.array&&!In(r)?r.map(a=>M4(t,a,n)):M4(t,r,n)}function M4(t,e,n){const i=t.type;if(In(e))return O4(i)?dt("Expression references can not be signals."):xA(i)?n.fieldRef(e):$4(i)?n.compareRef(e):n.signalRef(e.signal);{const r=t.expr||xA(i);return r&&Jmt(e)?n.exprRef(e.expr,e.as):r&&t0t(e)?F0(e.field,e.as):O4(i)?as(e,n):e0t(i)?Ht(n.getData(e).values):xA(i)?F0(e):$4(i)?n.compareRef(e):e}}function Qmt(t,e,n){return Dt(e.from)||dt('Lookup "from" parameter must be a string literal.'),n.getData(e.from).lookupRef(n,e.key)}function Kmt(t,e,n){const i=e[t.name];return t.array?(gt(i)||dt("Expected an array of sub-parameters. Instead: "+Mt(i)),i.map(r=>k4(t,r,n))):k4(t,i,n)}function k4(t,e,n){const i=t.params.length;let r;for(let o=0;o<i;++o){r=t.params[o];for(const s in r.key)if(r.key[s]!==e[s]){r=null;break}if(r)break}r||dt("Unsupported parameter: "+Mt(e));const a=oe(Hj(r,e,n),r.key);return Ht(n.add(Wgt(a)))}const Jmt=t=>t&&t.expr,t0t=t=>t&&t.field,e0t=t=>t==="data",O4=t=>t==="expr",xA=t=>t==="field",$4=t=>t==="compare";function n0t(t,e,n){let i,r,a,o,s;return t?(i=t.facet)&&(e||dt("Only group marks can be faceted."),i.field!=null?o=s=T_(i,n):(t.data?s=Ht(n.getData(t.data).aggregate):(a=h$(oe({type:"aggregate",groupby:Nt(i.groupby)},i.aggregate),n),a.params.key=n.keyRef(i.groupby),a.params.pulse=T_(i,n),o=s=Ht(n.add(a))),r=n.keyRef(i.groupby,!0))):o=Ht(n.add(go(null,[{}]))),o||(o=T_(t,n)),{key:r,pulse:o,parent:s}}function T_(t,e){return t.$ref?t:t.data&&t.data.$ref?t.data:Ht(e.getData(t.data).output)}function Vf(t,e,n,i,r){this.scope=t,this.input=e,this.output=n,this.values=i,this.aggregate=r,this.index={}}Vf.fromEntries=function(t,e){const n=e.length,i=e[n-1],r=e[n-2];let a=e[0],o=null,s=1;for(a&&a.type==="load"&&(a=e[1]),t.add(e[0]);s<n;++s)e[s].params.pulse=Ht(e[s-1]),t.add(e[s]),e[s].type==="aggregate"&&(o=e[s]);return new Vf(t,a,r,i,o)};function Gj(t){return Dt(t)?t:null}function D4(t,e,n){const i=m2(n.op,n.field);let r;if(e.ops){for(let a=0,o=e.as.length;a<o;++a)if(e.as[a]===i)return}else e.ops=["count"],e.fields=[null],e.as=["count"];n.op&&(e.ops.push((r=n.op.signal)?t.signalRef(r):n.op),e.fields.push(t.fieldRef(n.field)),e.as.push(i))}function Em(t,e,n,i,r,a,o){const s=e[n]||(e[n]={}),l=Agt(a);let f=Gj(r),d,p;if(f!=null&&(t=e.scope,f=f+(l?"|"+l:""),d=s[f]),!d){const m=a?{field:PC,pulse:e.countsRef(t,r,a)}:{field:t.fieldRef(r),pulse:Ht(e.output)};l&&(m.sort=t.sortRef(a)),p=t.add(g2(i,void 0,m)),o&&(e.index[r]=p),d=Ht(p),f!=null&&(s[f]=d)}return d}Vf.prototype={countsRef(t,e,n){const i=this,r=i.counts||(i.counts={}),a=Gj(e);let o,s,l;return a!=null&&(t=i.scope,o=r[a]),o?n&&n.field&&D4(t,o.agg.params,n):(l={groupby:t.fieldRef(e,"key"),pulse:Ht(i.output)},n&&n.field&&D4(t,l,n),s=t.add(kj(l)),o=t.add(go({pulse:Ht(s)})),o={agg:s,ref:Ht(o)},a!=null&&(r[a]=o)),o.ref},tuplesRef(){return Ht(this.values)},extentRef(t,e){return Em(t,this,"extent","extent",e,!1)},domainRef(t,e){return Em(t,this,"domain","values",e,!1)},valuesRef(t,e,n){return Em(t,this,"vals","values",e,n||!0)},lookupRef(t,e){return Em(t,this,"lookup","tupleindex",e,!1)},indataRef(t,e){return Em(t,this,"indata","tupleindex",e,!0,!0)}};function i0t(t,e,n){const i=t.from.facet,r=i.name,a=T_(i,e);let o;i.name||dt("Facet must have a name: "+Mt(i)),i.data||dt("Facet must reference a data set: "+Mt(i)),i.field?o=e.add(Dj({field:e.fieldRef(i.field),pulse:a})):i.groupby?o=e.add(Ugt({key:e.keyRef(i.groupby),group:Ht(e.proxy(n.parent)),pulse:a})):dt("Facet must specify groupby or field: "+Mt(i));const s=e.fork(),l=s.add(go()),f=s.add(ph({pulse:Ht(l)}));s.addData(r,new Vf(s,l,l,f)),s.addSignal("parent",null),o.params.subflow={$subflow:s.parse(t).toRuntime()}}function r0t(t,e,n){const i=e.add(Dj({pulse:n.pulse})),r=e.fork();r.add(ph()),r.addSignal("parent",null),i.params.subflow={$subflow:r.parse(t).toRuntime()}}function Zj(t,e,n){const i=t.remove,r=t.insert,a=t.toggle,o=t.modify,s=t.values,l=e.add(Hb()),f="if("+t.trigger+',modify("'+n+'",'+[r,i,a,o,s].map(p=>p??"null").join(",")+"),0)",d=as(f,e);l.update=d.$expr,l.params=d.$params}function x2(t,e){const n=jj(t),i=t.type===v2,r=t.from&&t.from.facet,a=t.overlap;let o=t.layout||n===n$||n===e$,s,l,f,d,p,m,_;const b=n===t$||o||r,x=n0t(t.from,i,e);l=e.add(Pgt({key:x.key||(t.key?F0(t.key):void 0),pulse:x.pulse,clean:!i}));const S=Ht(l);l=f=e.add(go({pulse:S})),l=e.add(Ggt({markdef:Xmt(t),interactive:Wmt(t.interactive,e),clip:Ymt(t.clip,e),context:{$context:!0},groups:e.lookup(),parent:e.signals.parent?e.signalRef("parent"):null,index:e.markpath(),pulse:Ht(l)}));const T=Ht(l);l=d=e.add($j(Cj(t.encode,t.type,n,t.style,e,{mod:!1,pulse:T}))),l.params.parent=e.encode(),t.transform&&t.transform.forEach(F=>{const N=h$(F,e),I=N.metadata;(I.generates||I.changes)&&dt("Mark transforms should not generate new data."),I.nomod||(d.params.mod=!0),N.params.pulse=Ht(l),e.add(l=N)}),t.sort&&(l=e.add(tmt({sort:e.compareRef(t.sort),pulse:Ht(l)})));const M=Ht(l);(r||o)&&(o=e.add(Nj({layout:e.objectProperty(t.layout),legends:e.legends,mark:T,pulse:M})),m=Ht(o));const k=e.add(Oj({mark:T,pulse:m||M}));_=Ht(k),i&&(b&&(s=e.operators,s.pop(),o&&s.pop()),e.pushState(M,m||_,S),r?i0t(t,e,x):b?r0t(t,e,x):e.parse(t),e.popState(),b&&(o&&s.push(o),s.push(k))),a&&(_=a0t(a,_,e));const $=e.add(Rj({pulse:_})),D=e.add(ph({pulse:Ht($)},void 0,e.parent()));t.name!=null&&(p=t.name,e.addData(p,new Vf(e,f,$,D)),t.on&&t.on.forEach(F=>{(F.insert||F.remove||F.toggle)&&dt("Marks only support modify triggers."),Zj(F,e,p)}))}function a0t(t,e,n){const i=t.method,r=t.bound,a=t.separation,o={separation:In(a)?n.signalRef(a.signal):a,method:In(i)?n.signalRef(i.signal):i,pulse:e};if(t.order&&(o.sort=n.compareRef({field:t.order})),r){const s=r.tolerance;o.boundTolerance=In(s)?n.signalRef(s.signal):+s,o.boundScale=n.scaleRef(r.scale),o.boundOrient=r.orient}return Ht(n.add(Xgt(o)))}function o0t(t,e){const n=e.config.legend,i=t.encode||{},r=Or(t,n),a=i.legend||{},o=a.name||void 0,s=a.interactive,l=a.style,f={};let d=0,p,m,_;s$.forEach(k=>t[k]?(f[k]=t[k],d=d||t[k]):0),d||dt("Missing valid scale for legend.");const b=s0t(t,e.scaleType(d)),x={title:t.title!=null,scales:f,type:b,vgrad:b!=="symbol"&&r.isVertical()},S=Ht(e.add(go(null,[x]))),T={enter:{x:{value:0},y:{value:0}}},M=Ht(e.add(jgt(m={type:b,scale:e.scaleRef(d),count:e.objectProperty(r("tickCount")),limit:e.property(r("symbolLimit")),values:e.objectProperty(t.values),minstep:e.property(t.tickMinStep),formatType:e.property(t.formatType),formatSpecifier:e.property(t.format)})));return b===A_?(_=[Rmt(t,d,n,i.gradient),T4(t,n,i.labels,M)],m.count=m.count||e.signalRef(`max(2,2*floor((${Rf(r.gradientLength())})/100))`)):b===qC?_=[Nmt(t,d,n,i.gradient,M),T4(t,n,i.labels,M)]:(p=Pmt(t,n),_=[Fmt(t,n,i,M,Rf(p.columns))],m.size=c0t(t,e,_[0].marks)),_=[B0({role:agt,from:S,encode:T,marks:_,layout:p,interactive:s})],x.title&&_.push(Zmt(t,n,i.title,S)),x2(B0({role:igt,from:S,encode:jp(l0t(r,t,n),a,Sy),marks:_,aria:r("aria"),description:r("description"),zindex:r("zindex"),name:o,interactive:s,style:l}),e)}function s0t(t,e){let n=t.type||A4;return!t.type&&u0t(t)===1&&(t.fill||t.stroke)&&(n=hO(e)?A_:RT(e)?qC:A4),n!==A_?n:RT(e)?qC:A_}function u0t(t){return s$.reduce((e,n)=>e+(t[n]?1:0),0)}function l0t(t,e,n){const i={enter:{},update:{}};return _i(i,{orient:t("orient"),offset:t("offset"),padding:t("padding"),titlePadding:t("titlePadding"),cornerRadius:t("cornerRadius"),fill:t("fillColor"),stroke:t("strokeColor"),strokeWidth:n.strokeWidth,strokeDash:n.strokeDash,x:t("legendX"),y:t("legendY"),format:e.format,formatType:e.formatType}),i}function c0t(t,e,n){const i=Rf(R4("size",t,n)),r=Rf(R4("strokeWidth",t,n)),a=Rf(f0t(n[1].encode,e,Ey));return as(`max(ceil(sqrt(${i})+${r}),${a})`,e)}function R4(t,e,n){return e[t]?`scale("${e[t]}",datum)`:Ij(t,n[0].encode)}function f0t(t,e,n){return Ij("fontSize",t)||$mt("fontSize",e,n)}const h0t=`item.orient==="${Hp}"?-90:item.orient==="${Gp}"?90:0`;function d0t(t,e){t=Dt(t)?{text:t}:t;const n=Or(t,e.config.title),i=t.encode||{},r=i.group||{},a=r.name||void 0,o=r.interactive,s=r.style,l=[],f={},d=Ht(e.add(go(null,[f])));return l.push(m0t(t,n,p0t(t),d)),t.subtitle&&l.push(y0t(t,n,i.subtitle,d)),x2(B0({role:lgt,from:d,encode:g0t(n,r),marks:l,aria:n("aria"),description:n("description"),zindex:n("zindex"),name:a,interactive:o,style:s}),e)}function p0t(t){const e=t.encode;return e&&e.title||oe({name:t.name,interactive:t.interactive,style:t.style},e)}function g0t(t,e){const n={enter:{},update:{}};return _i(n,{orient:t("orient"),anchor:t("anchor"),align:{signal:l$},angle:{signal:h0t},limit:t("limit"),frame:t("frame"),offset:t("offset")||0,padding:t("subtitlePadding")}),jp(n,e,Sy)}function m0t(t,e,n,i){const r={value:0},a=t.text,o={enter:{opacity:r},update:{opacity:{value:1}},exit:{opacity:r}};return _i(o,{text:a,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:e("dx"),dy:e("dy"),fill:e("color"),font:e("font"),fontSize:e("fontSize"),fontStyle:e("fontStyle"),fontWeight:e("fontWeight"),lineHeight:e("lineHeight")},{align:e("align"),angle:e("angle"),baseline:e("baseline")}),ia({type:gh,role:cgt,style:wmt,from:i,encode:o},n)}function y0t(t,e,n,i){const r={value:0},a=t.subtitle,o={enter:{opacity:r},update:{opacity:{value:1}},exit:{opacity:r}};return _i(o,{text:a,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:e("dx"),dy:e("dy"),fill:e("subtitleColor"),font:e("subtitleFont"),fontSize:e("subtitleFontSize"),fontStyle:e("subtitleFontStyle"),fontWeight:e("subtitleFontWeight"),lineHeight:e("subtitleLineHeight")},{align:e("align"),angle:e("angle"),baseline:e("baseline")}),ia({type:gh,role:fgt,style:Emt,from:i,encode:o},n)}function v0t(t,e){const n=[];t.transform&&t.transform.forEach(i=>{n.push(h$(i,e))}),t.on&&t.on.forEach(i=>{Zj(i,e,t.name)}),e.addDataPipeline(t.name,_0t(t,e,n))}function _0t(t,e,n){const i=[];let r=null,a=!1,o=!1,s,l,f,d,p;for(t.values?In(t.values)||E_(t.format)?(i.push(N4(e,t)),i.push(r=uf())):i.push(r=uf({$ingest:t.values,$format:t.format})):t.url?E_(t.url)||E_(t.format)?(i.push(N4(e,t)),i.push(r=uf())):i.push(r=uf({$request:t.url,$format:t.format})):t.source&&(r=s=Nt(t.source).map(m=>Ht(e.getData(m).output)),i.push(null)),l=0,f=n.length;l<f;++l)d=n[l],p=d.metadata,!r&&!p.source&&i.push(r=uf()),i.push(d),p.generates&&(o=!0),p.modifies&&!o&&(a=!0),p.source?r=d:p.changes&&(r=null);return s&&(f=s.length-1,i[0]=Kgt({derive:a,pulse:f?s:s[0]}),(a||f)&&i.splice(1,0,uf())),r||i.push(uf()),i.push(ph({})),i}function uf(t){const e=go({},t);return e.metadata={source:!0},e}function N4(t,e){return Hgt({url:e.url?t.property(e.url):void 0,async:e.async?t.property(e.async):void 0,values:e.values?t.property(e.values):void 0,format:t.objectProperty(e.format)})}const Yj=t=>t===lc||t===mo,w2=(t,e,n)=>In(t)?E0t(t.signal,e,n):t===Hp||t===mo?e:n,ei=(t,e,n)=>In(t)?x0t(t.signal,e,n):Yj(t)?e:n,ro=(t,e,n)=>In(t)?w0t(t.signal,e,n):Yj(t)?n:e,Xj=(t,e,n)=>In(t)?S0t(t.signal,e,n):t===mo?{value:e}:{value:n},b0t=(t,e,n)=>In(t)?A0t(t.signal,e,n):t===Gp?{value:e}:{value:n},x0t=(t,e,n)=>Wj(`${t} === '${mo}' || ${t} === '${lc}'`,e,n),w0t=(t,e,n)=>Wj(`${t} !== '${mo}' && ${t} !== '${lc}'`,e,n),E0t=(t,e,n)=>d$(`${t} === '${Hp}' || ${t} === '${mo}'`,e,n),S0t=(t,e,n)=>d$(`${t} === '${mo}'`,e,n),A0t=(t,e,n)=>d$(`${t} === '${Gp}'`,e,n),Wj=(t,e,n)=>(e=e!=null?ti(e):e,n=n!=null?ti(n):n,L4(e)&&L4(n)?(e=e?e.signal||Mt(e.value):null,n=n?n.signal||Mt(n.value):null,{signal:`${t} ? (${e}) : (${n})`}):[oe({test:t},e)].concat(n||[])),L4=t=>t==null||Object.keys(t).length===1,d$=(t,e,n)=>({signal:`${t} ? (${Nd(e)}) : (${Nd(n)})`}),T0t=(t,e,n,i,r)=>({signal:(i!=null?`${t} === '${Hp}' ? (${Nd(i)}) : `:"")+(n!=null?`${t} === '${lc}' ? (${Nd(n)}) : `:"")+(r!=null?`${t} === '${Gp}' ? (${Nd(r)}) : `:"")+(e!=null?`${t} === '${mo}' ? (${Nd(e)}) : `:"")+"(null)"}),Nd=t=>In(t)?t.signal:t==null?null:Mt(t),C0t=(t,e)=>e===0?0:In(t)?{signal:`(${t.signal}) * ${e}`}:{value:t*e},Ud=(t,e)=>{const n=t.signal;return n&&n.endsWith("(null)")?{signal:n.slice(0,-6)+e.signal}:t};function wd(t,e,n,i){let r;if(e&&zt(e,t))return e[t];if(zt(n,t))return n[t];if(t.startsWith("title")){switch(t){case"titleColor":r="fill";break;case"titleFont":case"titleFontSize":case"titleFontWeight":r=t[5].toLowerCase()+t.slice(6)}return i[o$][r]}else if(t.startsWith("label")){switch(t){case"labelColor":r="fill";break;case"labelFont":case"labelFontSize":r=t[5].toLowerCase()+t.slice(6)}return i[Ey][r]}return null}function z4(t){const e={};for(const n of t)if(n)for(const i in n)e[i]=1;return Object.keys(e)}function M0t(t,e){var n=e.config,i=n.style,r=n.axis,a=e.scaleType(t.scale)==="band"&&n.axisBand,o=t.orient,s,l,f;if(In(o)){const p=z4([n.axisX,n.axisY]),m=z4([n.axisTop,n.axisBottom,n.axisLeft,n.axisRight]);s={};for(f of p)s[f]=ei(o,wd(f,n.axisX,r,i),wd(f,n.axisY,r,i));l={};for(f of m)l[f]=T0t(o.signal,wd(f,n.axisTop,r,i),wd(f,n.axisBottom,r,i),wd(f,n.axisLeft,r,i),wd(f,n.axisRight,r,i))}else s=o===mo||o===lc?n.axisX:n.axisY,l=n["axis"+o[0].toUpperCase()+o.slice(1)];return s||l||a?oe({},r,s,l,a):r}function k0t(t,e,n,i){const r=Or(t,e),a=t.orient;let o,s;const l={enter:o={opacity:Ee},update:s={opacity:Sa},exit:{opacity:Ee}};_i(l,{stroke:r("domainColor"),strokeCap:r("domainCap"),strokeDash:r("domainDash"),strokeDashOffset:r("domainDashOffset"),strokeWidth:r("domainWidth"),strokeOpacity:r("domainOpacity")});const f=F4(t,0),d=F4(t,1);return o.x=s.x=ei(a,f,Ee),o.x2=s.x2=ei(a,d),o.y=s.y=ro(a,f,Ee),o.y2=s.y2=ro(a,d),ia({type:u$,role:Kpt,from:i,encode:l},n)}function F4(t,e){return{scale:t.scale,range:e}}function O0t(t,e,n,i,r){const a=Or(t,e),o=t.orient,s=t.gridScale,l=w2(o,1,-1),f=$0t(t.offset,l);let d,p,m;const _={enter:d={opacity:Ee},update:m={opacity:Sa},exit:p={opacity:Ee}};_i(_,{stroke:a("gridColor"),strokeCap:a("gridCap"),strokeDash:a("gridDash"),strokeDashOffset:a("gridDashOffset"),strokeOpacity:a("gridOpacity"),strokeWidth:a("gridWidth")});const b={scale:t.scale,field:Ea,band:r.band,extra:r.extra,offset:r.offset,round:a("tickRound")},x=ei(o,{signal:"height"},{signal:"width"}),S=s?{scale:s,range:0,mult:l,offset:f}:{value:0,offset:f},T=s?{scale:s,range:1,mult:l,offset:f}:oe(x,{mult:l,offset:f});return d.x=m.x=ei(o,b,S),d.y=m.y=ro(o,b,S),d.x2=m.x2=ro(o,T),d.y2=m.y2=ei(o,T),p.x=ei(o,b),p.y=ro(o,b),ia({type:u$,role:Jpt,key:Ea,from:i,encode:_},n)}function $0t(t,e){if(e!==1)if(!Rt(t))t=In(e)?{signal:`(${e.signal}) * (${t||0})`}:e*(t||0);else{let n=t=oe({},t);for(;n.mult!=null;)if(Rt(n.mult))n=n.mult=oe({},n.mult);else return n.mult=In(e)?{signal:`(${n.mult}) * (${e.signal})`}:n.mult*e,t;n.mult=e}return t}function D0t(t,e,n,i,r,a){const o=Or(t,e),s=t.orient,l=w2(s,-1,1);let f,d,p;const m={enter:f={opacity:Ee},update:p={opacity:Sa},exit:d={opacity:Ee}};_i(m,{stroke:o("tickColor"),strokeCap:o("tickCap"),strokeDash:o("tickDash"),strokeDashOffset:o("tickDashOffset"),strokeOpacity:o("tickOpacity"),strokeWidth:o("tickWidth")});const _=ti(r);_.mult=l;const b={scale:t.scale,field:Ea,band:a.band,extra:a.extra,offset:a.offset,round:o("tickRound")};return p.y=f.y=ei(s,Ee,b),p.y2=f.y2=ei(s,_),d.x=ei(s,b),p.x=f.x=ro(s,Ee,b),p.x2=f.x2=ro(s,_),d.y=ro(s,b),ia({type:u$,role:egt,key:Ea,from:i,encode:m},n)}function wA(t,e,n,i,r){return{signal:'flush(range("'+t+'"), scale("'+t+'", datum.value), '+e+","+n+","+i+","+r+")"}}function R0t(t,e,n,i,r,a){const o=Or(t,e),s=t.orient,l=t.scale,f=w2(s,-1,1),d=Rf(o("labelFlush")),p=Rf(o("labelFlushOffset")),m=o("labelAlign"),_=o("labelBaseline");let b=d===0||!!d,x;const S=ti(r);S.mult=f,S.offset=ti(o("labelPadding")||0),S.offset.mult=f;const T={scale:l,field:Ea,band:.5,offset:qj(a.offset,o("labelOffset"))},M=ei(s,b?wA(l,d,'"left"','"right"','"center"'):{value:"center"},b0t(s,"left","right")),k=ei(s,Xj(s,"bottom","top"),b?wA(l,d,'"top"','"bottom"','"middle"'):{value:"middle"}),$=wA(l,d,`-(${p})`,p,0);b=b&&p;const D={opacity:Ee,x:ei(s,T,S),y:ro(s,T,S)},F={enter:D,update:x={opacity:Sa,text:{field:a$},x:D.x,y:D.y,align:M,baseline:k},exit:{opacity:Ee,x:D.x,y:D.y}};_i(F,{dx:!m&&b?ei(s,$):null,dy:!_&&b?ro(s,$):null}),_i(F,{angle:o("labelAngle"),fill:o("labelColor"),fillOpacity:o("labelOpacity"),font:o("labelFont"),fontSize:o("labelFontSize"),fontWeight:o("labelFontWeight"),fontStyle:o("labelFontStyle"),limit:o("labelLimit"),lineHeight:o("labelLineHeight")},{align:m,baseline:_});const N=o("labelBound");let I=o("labelOverlap");return I=I||N?{separation:o("labelSeparation"),method:I,order:"datum.index",bound:N?{scale:l,orient:s,tolerance:N}:null}:void 0,x.align!==M&&(x.align=Ud(x.align,M)),x.baseline!==k&&(x.baseline=Ud(x.baseline,k)),ia({type:gh,role:tgt,style:Ey,key:Ea,from:i,encode:F,overlap:I},n)}function N0t(t,e,n,i){const r=Or(t,e),a=t.orient,o=w2(a,-1,1);let s,l;const f={enter:s={opacity:Ee,anchor:ti(r("titleAnchor",null)),align:{signal:l$}},update:l=oe({},s,{opacity:Sa,text:ti(t.title)}),exit:{opacity:Ee}},d={signal:`lerp(range("${t.scale}"), ${_2(0,1,.5)})`};return l.x=ei(a,d),l.y=ro(a,d),s.angle=ei(a,Ee,C0t(o,90)),s.baseline=ei(a,Xj(a,lc,mo),{value:lc}),l.angle=s.angle,l.baseline=s.baseline,_i(f,{fill:r("titleColor"),fillOpacity:r("titleOpacity"),font:r("titleFont"),fontSize:r("titleFontSize"),fontStyle:r("titleFontStyle"),fontWeight:r("titleFontWeight"),limit:r("titleLimit"),lineHeight:r("titleLineHeight")},{align:r("titleAlign"),angle:r("titleAngle"),baseline:r("titleBaseline")}),L0t(r,a,f,n),f.update.align=Ud(f.update.align,s.align),f.update.angle=Ud(f.update.angle,s.angle),f.update.baseline=Ud(f.update.baseline,s.baseline),ia({type:gh,role:ngt,style:o$,from:i,encode:f},n)}function L0t(t,e,n,i){const r=(s,l)=>s!=null?(n.update[l]=Ud(ti(s),n.update[l]),!1):!Cd(l,i),a=r(t("titleX"),"x"),o=r(t("titleY"),"y");n.enter.auto=o===a?ti(o):ei(e,ti(o),ti(a))}function z0t(t,e){const n=M0t(t,e),i=t.encode||{},r=i.axis||{},a=r.name||void 0,o=r.interactive,s=r.style,l=Or(t,n),f=Dmt(l),d={scale:t.scale,ticks:!!l("ticks"),labels:!!l("labels"),grid:!!l("grid"),domain:!!l("domain"),title:t.title!=null},p=Ht(e.add(go({},[d]))),m=Ht(e.add(Fgt({scale:e.scaleRef(t.scale),extra:e.property(f.extra),count:e.objectProperty(t.tickCount),values:e.objectProperty(t.values),minstep:e.property(t.tickMinStep),formatType:e.property(t.formatType),formatSpecifier:e.property(t.format)}))),_=[];let b;return d.grid&&_.push(O0t(t,n,i.grid,m,f)),d.ticks&&(b=l("tickSize"),_.push(D0t(t,n,i.ticks,m,b,f))),d.labels&&(b=d.ticks?b:0,_.push(R0t(t,n,i.labels,m,b,f))),d.domain&&_.push(k0t(t,n,i.domain,p)),d.title&&_.push(N0t(t,n,i.title,p)),x2(B0({role:Qpt,from:p,encode:jp(F0t(l,t),r,Sy),marks:_,aria:l("aria"),description:l("description"),zindex:l("zindex"),name:a,interactive:o,style:s}),e)}function F0t(t,e){const n={enter:{},update:{}};return _i(n,{orient:t("orient"),offset:t("offset")||0,position:Wa(e.position,0),titlePadding:t("titlePadding"),minExtent:t("minExtent"),maxExtent:t("maxExtent"),range:{signal:`abs(span(range("${e.scale}")))`},translate:t("translate"),format:e.format,formatType:e.formatType}),n}function Vj(t,e,n){const i=Nt(t.signals),r=Nt(t.scales);return n||i.forEach(a=>Mj(a,e)),Nt(t.projections).forEach(a=>gmt(a,e)),r.forEach(a=>imt(a,e)),Nt(t.data).forEach(a=>v0t(a,e)),r.forEach(a=>rmt(a,e)),(n||i).forEach(a=>zgt(a,e)),Nt(t.axes).forEach(a=>z0t(a,e)),Nt(t.marks).forEach(a=>x2(a,e)),Nt(t.legends).forEach(a=>o0t(a,e)),t.title&&d0t(t.title,e),e.parseLambdas(),e}const P0t=t=>jp({enter:{x:{value:0},y:{value:0}},update:{width:{signal:"width"},height:{signal:"height"}}},t);function B0t(t,e){const n=e.config,i=Ht(e.root=e.add(Hb())),r=U0t(t,n);r.forEach(f=>Mj(f,e)),e.description=t.description||n.description,e.eventConfig=n.events,e.legends=e.objectProperty(n.legend&&n.legend.layout),e.locale=n.locale;const a=e.add(go()),o=e.add($j(Cj(P0t(t.encode),v2,e$,t.style,e,{pulse:Ht(a)}))),s=e.add(Nj({layout:e.objectProperty(t.layout),legends:e.legends,autosize:e.signalRef("autosize"),mark:i,pulse:Ht(o)}));e.operators.pop(),e.pushState(Ht(o),Ht(s),null),Vj(t,e,r),e.operators.push(s);let l=e.add(Oj({mark:i,pulse:Ht(s)}));return l=e.add(Rj({pulse:Ht(l)})),l=e.add(ph({pulse:Ht(l)})),e.addData("root",new Vf(e,a,a,l)),e}function Sm(t,e){return e&&e.signal?{name:t,update:e.signal}:{name:t,value:e}}function U0t(t,e){const n=o=>Wa(t[o],e[o]),i=[Sm("background",n("background")),Sm("autosize",Xpt(n("autosize"))),Sm("padding",Vpt(n("padding"))),Sm("width",n("width")||0),Sm("height",n("height")||0)],r=i.reduce((o,s)=>(o[s.name]=s,o),{}),a={};return Nt(t.signals).forEach(o=>{zt(r,o.name)?o=oe(r[o.name],o):i.push(o),a[o.name]=o}),Nt(e.signals).forEach(o=>{!zt(a,o.name)&&!zt(r,o.name)&&i.push(o)}),i}function Qj(t,e){this.config=t||{},this.options=e||{},this.bindings=[],this.field={},this.signals={},this.lambdas={},this.scales={},this.events={},this.data={},this.streams=[],this.updates=[],this.operators=[],this.eventConfig=null,this.locale=null,this._id=0,this._subid=0,this._nextsub=[0],this._parent=[],this._encode=[],this._lookup=[],this._markpath=[]}function P4(t){this.config=t.config,this.options=t.options,this.legends=t.legends,this.field=Object.create(t.field),this.signals=Object.create(t.signals),this.lambdas=Object.create(t.lambdas),this.scales=Object.create(t.scales),this.events=Object.create(t.events),this.data=Object.create(t.data),this.streams=[],this.updates=[],this.operators=[],this._id=0,this._subid=++t._nextsub[0],this._nextsub=t._nextsub,this._parent=t._parent.slice(),this._encode=t._encode.slice(),this._lookup=t._lookup.slice(),this._markpath=t._markpath}Qj.prototype=P4.prototype={parse(t){return Vj(t,this)},fork(){return new P4(this)},isSubscope(){return this._subid>0},toRuntime(){return this.finish(),{description:this.description,operators:this.operators,streams:this.streams,updates:this.updates,bindings:this.bindings,eventConfig:this.eventConfig,locale:this.locale}},id(){return(this._subid?this._subid+":":0)+this._id++},add(t){return this.operators.push(t),t.id=this.id(),t.refs&&(t.refs.forEach(e=>{e.$ref=t.id}),t.refs=null),t},proxy(t){const e=t instanceof FC?Ht(t):t;return this.add(Qgt({value:e}))},addStream(t){return this.streams.push(t),t.id=this.id(),t},addUpdate(t){return this.updates.push(t),t},finish(){let t,e;this.root&&(this.root.root=!0);for(t in this.signals)this.signals[t].signal=t;for(t in this.scales)this.scales[t].scale=t;function n(i,r,a){let o,s;i&&(o=i.data||(i.data={}),s=o[r]||(o[r]=[]),s.push(a))}for(t in this.data){e=this.data[t],n(e.input,t,"input"),n(e.output,t,"output"),n(e.values,t,"values");for(const i in e.index)n(e.index[i],t,"index:"+i)}return this},pushState(t,e,n){this._encode.push(Ht(this.add(ph({pulse:t})))),this._parent.push(e),this._lookup.push(n?Ht(this.proxy(n)):null),this._markpath.push(-1)},popState(){this._encode.pop(),this._parent.pop(),this._lookup.pop(),this._markpath.pop()},parent(){return be(this._parent)},encode(){return be(this._encode)},lookup(){return be(this._lookup)},markpath(){const t=this._markpath;return++t[t.length-1]},fieldRef(t,e){if(Dt(t))return F0(t,e);t.signal||dt("Unsupported field reference: "+Mt(t));const n=t.signal;let i=this.field[n];if(!i){const r={name:this.signalRef(n)};e&&(r.as=e),this.field[n]=i=Ht(this.add(Igt(r)))}return i},compareRef(t){let e=!1;const n=a=>In(a)?(e=!0,this.signalRef(a.signal)):Tgt(a)?(e=!0,this.exprRef(a.expr)):a,i=Nt(t.field).map(n),r=Nt(t.order).map(n);return e?Ht(this.add(S4({fields:i,orders:r}))):w4(i,r)},keyRef(t,e){let n=!1;const i=a=>In(a)?(n=!0,Ht(r[a.signal])):a,r=this.signals;return t=Nt(t).map(i),n?Ht(this.add(qgt({fields:t,flat:e}))):wgt(t,e)},sortRef(t){if(!t)return t;const e=m2(t.op,t.field),n=t.order||Egt;return n.signal?Ht(this.add(S4({fields:e,orders:this.signalRef(n.signal)}))):w4(e,n)},event(t,e){const n=t+":"+e;if(!this.events[n]){const i=this.id();this.streams.push({id:i,source:t,type:e}),this.events[n]=i}return this.events[n]},hasOwnSignal(t){return zt(this.signals,t)},addSignal(t,e){this.hasOwnSignal(t)&&dt("Duplicate signal name: "+Mt(t));const n=e instanceof FC?e:this.add(Hb(e));return this.signals[t]=n},getSignal(t){return this.signals[t]||dt("Unrecognized signal name: "+Mt(t)),this.signals[t]},signalRef(t){return this.signals[t]?Ht(this.signals[t]):(zt(this.lambdas,t)||(this.lambdas[t]=this.add(Hb(null))),Ht(this.lambdas[t]))},parseLambdas(){const t=Object.keys(this.lambdas);for(let e=0,n=t.length;e<n;++e){const i=t[e],r=as(i,this),a=this.lambdas[i];a.params=r.$params,a.update=r.$expr}},property(t){return t&&t.signal?this.signalRef(t.signal):t},objectProperty(t){return!t||!Rt(t)?t:this.signalRef(t.signal||p$(t))},exprRef(t,e){const n={expr:as(t,this)};return e&&(n.expr.$name=e),Ht(this.add(Bgt(n)))},addBinding(t,e){this.bindings||dt("Nested signals do not support binding: "+Mt(t)),this.bindings.push(oe({signal:t},e))},addScaleProj(t,e){zt(this.scales,t)&&dt("Duplicate scale or projection name: "+Mt(t)),this.scales[t]=this.add(e)},addScale(t,e){this.addScaleProj(t,Jgt(e))},addProjection(t,e){this.addScaleProj(t,Vgt(e))},getScale(t){return this.scales[t]||dt("Unrecognized scale name: "+Mt(t)),this.scales[t]},scaleRef(t){return Ht(this.getScale(t))},scaleType(t){return this.getScale(t).params.type},projectionRef(t){return this.scaleRef(t)},projectionType(t){return this.scaleType(t)},addData(t,e){return zt(this.data,t)&&dt("Duplicate data set name: "+Mt(t)),this.data[t]=e},getData(t){return this.data[t]||dt("Undefined data set name: "+Mt(t)),this.data[t]},addDataPipeline(t,e){return zt(this.data,t)&&dt("Duplicate data set name: "+Mt(t)),this.addData(t,Vf.fromEntries(this,e))}};function p$(t){return(gt(t)?I0t:q0t)(t)}function I0t(t){const e=t.length;let n="[";for(let i=0;i<e;++i){const r=t[i];n+=(i>0?",":"")+(Rt(r)?r.signal||p$(r):Mt(r))}return n+"]"}function q0t(t){let e="{",n=0,i,r;for(i in t)r=t[i],e+=(++n>1?",":"")+Mt(i)+":"+(Rt(r)?r.signal||p$(r):Mt(r));return e+"}"}function j0t(){const t="sans-serif",i="#4c78a8",r="#000",a="#888",o="#ddd";return{description:"Vega visualization",padding:0,autosize:"pad",background:null,events:{defaults:{allow:["wheel"]}},group:null,mark:null,arc:{fill:i},area:{fill:i},image:null,line:{stroke:i,strokeWidth:2},path:{stroke:i},rect:{fill:i},rule:{stroke:r},shape:{stroke:i},symbol:{fill:i,size:64},text:{fill:r,font:t,fontSize:11},trail:{fill:i,size:2},style:{"guide-label":{fill:r,font:t,fontSize:10},"guide-title":{fill:r,font:t,fontSize:11,fontWeight:"bold"},"group-title":{fill:r,font:t,fontSize:13,fontWeight:"bold"},"group-subtitle":{fill:r,font:t,fontSize:12},point:{size:30,strokeWidth:2,shape:"circle"},circle:{size:30,strokeWidth:2},square:{size:30,strokeWidth:2,shape:"square"},cell:{fill:"transparent",stroke:o},view:{fill:"transparent"}},title:{orient:"top",anchor:"middle",offset:4,subtitlePadding:3},axis:{minExtent:0,maxExtent:200,bandPosition:.5,domain:!0,domainWidth:1,domainColor:a,grid:!1,gridWidth:1,gridColor:o,labels:!0,labelAngle:0,labelLimit:180,labelOffset:0,labelPadding:2,ticks:!0,tickColor:a,tickOffset:0,tickRound:!0,tickSize:5,tickWidth:1,titlePadding:4},axisBand:{tickOffset:-.5},projection:{type:"mercator"},legend:{orient:"right",padding:0,gridAlign:"each",columnPadding:10,rowPadding:2,symbolDirection:"vertical",gradientDirection:"vertical",gradientLength:200,gradientThickness:16,gradientStrokeColor:o,gradientStrokeWidth:0,gradientLabelOffset:2,labelAlign:"left",labelBaseline:"middle",labelLimit:160,labelOffset:4,labelOverlap:!0,symbolLimit:30,symbolType:"circle",symbolSize:100,symbolOffset:0,symbolStrokeWidth:1.5,symbolBaseFillColor:"transparent",symbolBaseStrokeColor:a,titleLimit:180,titleOrient:"top",titlePadding:5,layout:{offset:18,direction:"horizontal",left:{direction:"vertical"},right:{direction:"vertical"}}},range:{category:{scheme:"tableau10"},ordinal:{scheme:"blues"},heatmap:{scheme:"yellowgreenblue"},ramp:{scheme:"blues"},diverging:{scheme:"blueorange",extent:[1,0]},symbol:["circle","square","triangle-up","cross","diamond","triangle-right","triangle-down","triangle-left"]}}}function H0t(t,e,n){return Rt(t)||dt("Input Vega specification must be an object."),e=kp(j0t(),e,t.config),B0t(t,new Qj(e,n)).toRuntime()}var G0t="6.1.2";oe(Kd,$J,cat,qat,Cst,xut,Xlt,Clt,Vlt,bct,Oct,Fct);const Z0t=G0t,Y0t=Object.freeze(Object.defineProperty({__proto__:null,Bounds:Nn,CanvasHandler:py,CanvasRenderer:ab,DATE:Sr,DAY:Di,DAYOFYEAR:is,Dataflow:zd,Debug:Y8,Error:AM,EventStream:wx,Gradient:UB,GroupItem:Gx,HOURS:ta,Handler:FO,HybridHandler:OU,HybridRenderer:HT,Info:Z8,Item:Hx,MILLISECONDS:so,MINUTES:ea,MONTH:zi,Marks:na,MultiPulse:QM,None:G8,Operator:Ze,Parameters:xx,Pulse:Vl,QUARTER:Er,RenderType:ql,Renderer:dy,ResourceLoader:ZB,SECONDS:Ca,SVGHandler:yU,SVGRenderer:jO,SVGStringRenderer:kU,Scenegraph:lU,TIME_UNITS:IM,Transform:ct,View:gj,WEEK:Bn,Warn:TM,YEAR:vi,accessor:kr,accessorFields:Li,accessorName:xn,array:Nt,ascending:$p,bandwidthNRD:ek,bin:C9,bootstrapCI:M9,boundClip:UU,boundContext:ly,boundItem:BT,boundMark:aU,boundStroke:Cu,changeset:ch,clampRange:rP,codegenExpression:qq,compare:$M,constant:Ui,cumulativeLogNormal:sk,cumulativeNormal:Sx,cumulativeUniform:fk,dayofyear:NP,debounce:DM,defaultLocale:ZM,definition:S9,densityLogNormal:ok,densityNormal:nk,densityUniform:ck,domChild:Pn,domClear:ya,domCreate:Ul,domFind:zO,dotbin:k9,error:dt,expressionFunction:Mn,extend:oe,extent:ts,extentIndex:aP,falsy:Ol,fastmap:Dp,field:Aa,flush:oP,font:Vx,fontFamily:hy,fontSize:hs,format:i_,formatLocale:F_,formats:WM,hasOwnProperty:zt,id:X0,identity:Bi,inferType:d9,inferTypes:p9,ingest:De,inherits:kt,inrange:kd,interpolate:dO,interpolateColors:qx,interpolateRange:TB,intersect:zU,intersectBoxLine:Od,intersectPath:xO,intersectPoint:wO,intersectRule:XB,isArray:gt,isBoolean:gc,isDate:Xl,isFunction:se,isIterable:sP,isNumber:Me,isObject:Rt,isRegExp:RM,isString:Dt,isTuple:_x,key:NM,lerp:uP,lineHeight:oc,loader:yx,locale:f9,logger:CM,lruCache:lP,markup:qO,merge:cP,mergeConfig:kp,multiLineOffset:RO,one:Mp,pad:fP,panLinear:K8,panLog:J8,panPow:tP,panSymlog:eP,parse:H0t,parseExpression:q3,parseSelector:xc,path:kx,pathCurves:vO,pathEqual:IU,pathParse:rp,pathRectangle:jB,pathRender:A0,pathSymbols:qB,pathTrail:HB,peek:be,point:Kx,projection:u3,quantileLogNormal:uk,quantileNormal:Ax,quantileUniform:hk,quantiles:JM,quantizeInterpolator:CB,quarter:nP,quartiles:tk,get random(){return Ma},randomInteger:LK,randomKDE:rk,randomLCG:NK,randomLogNormal:$9,randomMixture:D9,randomNormal:ik,randomUniform:R9,read:y9,regressionConstant:dk,regressionExp:L9,regressionLinear:pk,regressionLoess:P9,regressionLog:N9,regressionPoly:F9,regressionPow:z9,regressionQuad:gk,renderModule:Jx,repeat:Dm,resetDefaultLocale:$Q,resetSVGDefIds:Mrt,responseType:m9,runtimeContext:nj,sampleCurve:Cx,sampleLogNormal:ak,sampleNormal:Ex,sampleUniform:lk,scale:Oe,sceneEqual:HO,sceneFromJSON:sU,scenePickVisit:Q_,sceneToJSON:oU,sceneVisit:uo,sceneZOrder:EO,scheme:pO,serializeXML:AU,setHybridRendererOptions:Srt,setRandom:DK,span:W0,splitAccessPath:ls,stringValue:Mt,textMetrics:Vr,timeBin:QP,timeFloor:IP,timeFormatLocale:_0,timeInterval:zp,timeOffset:HP,timeSequence:YP,timeUnitSpecifier:RP,timeUnits:qM,toBoolean:LM,toDate:zM,toNumber:Ri,toSet:oo,toString:FM,transform:A9,transforms:Kd,truncate:hP,truthy:Ta,tupleid:Gt,typeParsers:xT,utcFloor:qP,utcInterval:Fp,utcOffset:GP,utcSequence:XP,utcdayofyear:FP,utcquarter:iP,utcweek:PP,version:Z0t,visitArray:Rl,week:LP,writeConfig:Op,zero:Pl,zoomLinear:MM,zoomLog:kM,zoomPow:$_,zoomSymlog:OM},Symbol.toStringTag,{value:"Module"}));function X0t(t,e,n){let i;e.x2&&(e.x?(n&&t.x>t.x2&&(i=t.x,t.x=t.x2,t.x2=i),t.width=t.x2-t.x):t.x=t.x2-(t.width||0)),e.xc&&(t.x=t.xc-(t.width||0)/2),e.y2&&(e.y?(n&&t.y>t.y2&&(i=t.y,t.y=t.y2,t.y2=i),t.height=t.y2-t.y):t.y=t.y2-(t.height||0)),e.yc&&(t.y=t.yc-(t.height||0)/2)}var W0t={NaN:NaN,E:Math.E,LN2:Math.LN2,LN10:Math.LN10,LOG2E:Math.LOG2E,LOG10E:Math.LOG10E,PI:Math.PI,SQRT1_2:Math.SQRT1_2,SQRT2:Math.SQRT2,MIN_VALUE:Number.MIN_VALUE,MAX_VALUE:Number.MAX_VALUE},V0t={"*":(t,e)=>t*e,"+":(t,e)=>t+e,"-":(t,e)=>t-e,"/":(t,e)=>t/e,"%":(t,e)=>t%e,">":(t,e)=>t>e,"<":(t,e)=>t<e,"<=":(t,e)=>t<=e,">=":(t,e)=>t>=e,"==":(t,e)=>t==e,"!=":(t,e)=>t!=e,"===":(t,e)=>t===e,"!==":(t,e)=>t!==e,"&":(t,e)=>t&e,"|":(t,e)=>t|e,"^":(t,e)=>t^e,"<<":(t,e)=>t<<e,">>":(t,e)=>t>>e,">>>":(t,e)=>t>>>e},Q0t={"+":t=>+t,"-":t=>-t,"~":t=>~t,"!":t=>!t};const K0t=Array.prototype.slice,lf=(t,e,n)=>{const i=n?n(e[0]):e[0];return i[t].apply(i,K0t.call(e,1))},J0t=function(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,r=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0,a=arguments.length>5&&arguments[5]!==void 0?arguments[5]:0,o=arguments.length>6&&arguments[6]!==void 0?arguments[6]:0;return Dt(t)?new Date(t):new Date(t,e,n,i,r,a,o)};var tyt={isNaN:Number.isNaN,isFinite:Number.isFinite,abs:Math.abs,acos:Math.acos,asin:Math.asin,atan:Math.atan,atan2:Math.atan2,ceil:Math.ceil,cos:Math.cos,exp:Math.exp,floor:Math.floor,log:Math.log,max:Math.max,min:Math.min,pow:Math.pow,random:Math.random,round:Math.round,sin:Math.sin,sqrt:Math.sqrt,tan:Math.tan,clamp:(t,e,n)=>Math.max(e,Math.min(n,t)),now:Date.now,utc:Date.UTC,datetime:J0t,date:t=>new Date(t).getDate(),day:t=>new Date(t).getDay(),year:t=>new Date(t).getFullYear(),month:t=>new Date(t).getMonth(),hours:t=>new Date(t).getHours(),minutes:t=>new Date(t).getMinutes(),seconds:t=>new Date(t).getSeconds(),milliseconds:t=>new Date(t).getMilliseconds(),time:t=>new Date(t).getTime(),timezoneoffset:t=>new Date(t).getTimezoneOffset(),utcdate:t=>new Date(t).getUTCDate(),utcday:t=>new Date(t).getUTCDay(),utcyear:t=>new Date(t).getUTCFullYear(),utcmonth:t=>new Date(t).getUTCMonth(),utchours:t=>new Date(t).getUTCHours(),utcminutes:t=>new Date(t).getUTCMinutes(),utcseconds:t=>new Date(t).getUTCSeconds(),utcmilliseconds:t=>new Date(t).getUTCMilliseconds(),length:t=>t.length,join:function(){return lf("join",arguments)},indexof:function(){return lf("indexOf",arguments)},lastindexof:function(){return lf("lastIndexOf",arguments)},slice:function(){return lf("slice",arguments)},reverse:t=>t.slice().reverse(),sort:t=>t.slice().sort($p),parseFloat,parseInt,upper:t=>String(t).toUpperCase(),lower:t=>String(t).toLowerCase(),substring:function(){return lf("substring",arguments,String)},split:function(){return lf("split",arguments,String)},replace:function(){return lf("replace",arguments,String)},trim:t=>String(t).trim(),btoa:t=>btoa(t),atob:t=>atob(t),regexp:RegExp,test:(t,e)=>RegExp(t).test(e)};const eyt=["view","item","group","xy","x","y"],HC=new Set([Function,eval,setTimeout,setInterval]);typeof setImmediate=="function"&&HC.add(setImmediate);const nyt={Literal:(t,e)=>e.value,Identifier:(t,e)=>{const n=e.name;return t.memberDepth>0?n:n==="datum"?t.datum:n==="event"?t.event:n==="item"?t.item:W0t[n]||t.params["$"+n]},MemberExpression:(t,e)=>{const n=!e.computed,i=t(e.object);n&&(t.memberDepth+=1);const r=t(e.property);if(n&&(t.memberDepth-=1),HC.has(i[r])){console.error(`Prevented interpretation of member "${r}" which could lead to insecure code execution`);return}return i[r]},CallExpression:(t,e)=>{const n=e.arguments;let i=e.callee.name;return i.startsWith("_")&&(i=i.slice(1)),i==="if"?t(n[0])?t(n[1]):t(n[2]):(t.fn[i]||tyt[i]).apply(t.fn,n.map(t))},ArrayExpression:(t,e)=>e.elements.map(t),BinaryExpression:(t,e)=>V0t[e.operator](t(e.left),t(e.right)),UnaryExpression:(t,e)=>Q0t[e.operator](t(e.argument)),ConditionalExpression:(t,e)=>t(e.test)?t(e.consequent):t(e.alternate),LogicalExpression:(t,e)=>e.operator==="&&"?t(e.left)&&t(e.right):t(e.left)||t(e.right),ObjectExpression:(t,e)=>e.properties.reduce((n,i)=>{t.memberDepth+=1;const r=t(i.key);return t.memberDepth-=1,HC.has(t(i.value))?console.error(`Prevented interpretation of property "${r}" which could lead to insecure code execution`):n[r]=t(i.value),n},{})};function Am(t,e,n,i,r,a){const o=s=>nyt[s.type](o,s);return o.memberDepth=0,o.fn=Object.create(e),o.params=n,o.datum=i,o.event=r,o.item=a,eyt.forEach(s=>o.fn[s]=function(){return r.vega[s](...arguments)}),o(t)}var iyt={operator(t,e){const n=e.ast,i=t.functions;return r=>Am(n,i,r)},parameter(t,e){const n=e.ast,i=t.functions;return(r,a)=>Am(n,i,a,r)},event(t,e){const n=e.ast,i=t.functions;return r=>Am(n,i,void 0,void 0,r)},handler(t,e){const n=e.ast,i=t.functions;return(r,a)=>{const o=a.item&&a.item.datum;return Am(n,i,r,o,a)}},encode(t,e){const{marktype:n,channels:i}=e,r=t.functions,a=n==="group"||n==="image"||n==="rect";return(o,s)=>{const l=o.datum;let f=0,d;for(const p in i)d=Am(i[p].ast,r,s,l,void 0,o),o[p]!==d&&(o[p]=d,f=1);return n!=="rule"&&X0t(o,i,a),f}}},ryt="6.1.0",ayt={version:ryt};function g$(t){return St(t,"or")}function m$(t){return St(t,"and")}function y$(t){return St(t,"not")}function C_(t,e){if(y$(t))C_(t.not,e);else if(m$(t))for(const n of t.and)C_(n,e);else if(g$(t))for(const n of t.or)C_(n,e);else e(t)}function Id(t,e){return y$(t)?{not:Id(t.not,e)}:m$(t)?{and:t.and.map(n=>Id(n,e))}:g$(t)?{or:t.or.map(n=>Id(n,e))}:e(t)}const ee=structuredClone;function Kj(t){throw new Error(t)}function dp(t,e){const n={};for(const i of e)zt(t,i)&&(n[i]=t[i]);return n}function Kr(t,e){const n={...t};for(const i of e)delete n[i];return n}Set.prototype.toJSON=function(){return`Set(${[...this].map(t=>Ne(t)).join(",")})`};function ye(t){if(Me(t))return t;const e=Dt(t)?t:Ne(t);if(e.length<250)return e;let n=0;for(let i=0;i<e.length;i++){const r=e.charCodeAt(i);n=(n<<5)-n+r,n=n&n}return n}function GC(t){return t===!1||t===null}function pe(t,e){return t.includes(e)}function pp(t,e){let n=0;for(const[i,r]of t.entries())if(e(r,i,n++))return!0;return!1}function v$(t,e){let n=0;for(const[i,r]of t.entries())if(!e(r,i,n++))return!1;return!0}function Jj(t,...e){for(const n of e)oyt(t,n??{});return t}function oyt(t,e){for(const n of Et(e))Op(t,n,e[n],!0)}function Zo(t,e){const n=[],i={};let r;for(const a of t)r=e(a),!(r in i)&&(i[r]=1,n.push(a));return n}function syt(t,e){const n=Et(t),i=Et(e);if(n.length!==i.length)return!1;for(const r of n)if(t[r]!==e[r])return!1;return!0}function tH(t,e){if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0}function _$(t,e){for(const n of t)if(e.has(n))return!0;return!1}function ZC(t){const e=new Set;for(const n of t){const r=ls(n).map((o,s)=>s===0?o:`[${o}]`),a=r.map((o,s)=>r.slice(0,s+1).join(""));for(const o of a)e.add(o)}return e}function b$(t,e){return t===void 0||e===void 0?!0:_$(ZC(t),ZC(e))}function Ye(t){return Et(t).length===0}const Et=Object.keys,Rn=Object.values,cc=Object.entries;function U0(t){return t===!0||t===!1}function sn(t){const e=t.replace(/\W/g,"_");return(t.match(/^\d+/)?"_":"")+e}function d0(t,e){return y$(t)?`!(${d0(t.not,e)})`:m$(t)?`(${t.and.map(n=>d0(n,e)).join(") && (")})`:g$(t)?`(${t.or.map(n=>d0(n,e)).join(") || (")})`:e(t)}function Gb(t,e){if(e.length===0)return!0;const n=e.shift();return n in t&&Gb(t[n],e)&&delete t[n],Ye(t)}function Ay(t){return t.charAt(0).toUpperCase()+t.substr(1)}function x$(t,e="datum"){const n=ls(t),i=[];for(let r=1;r<=n.length;r++){const a=`[${n.slice(0,r).map(Mt).join("][")}]`;i.push(`${e}${a}`)}return i.join(" && ")}function eH(t,e="datum"){return`${e}[${Mt(ls(t).join("."))}]`}function Fe(t){return`datum['${t.replaceAll("'","\\'")}']`}function uyt(t){return t.replace(/(\[|\]|\.|'|")/g,"\\$1")}function Oa(t){return`${ls(t).map(uyt).join("\\.")}`}function Qf(t,e,n){return t.replace(new RegExp(e.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"),"g"),n)}function Zp(t){return`${ls(t).join(".")}`}function gp(t){return t?ls(t).length:0}function Tn(...t){return t.find(e=>e!==void 0)}let nH=42;function iH(t){const e=++nH;return t?String(t)+e:e}function lyt(){nH=42}function rH(t){return aH(t)?t:`__${t}`}function aH(t){return t.startsWith("__")}function I0(t){if(t!==void 0)return(t%360+360)%360}function E2(t){return Me(t)?!0:!isNaN(t)&&!isNaN(parseFloat(t))}const B4=Object.getPrototypeOf(structuredClone({}));function Xr(t,e){if(t===e)return!0;if(t&&e&&typeof t=="object"&&typeof e=="object"){if(t.constructor.name!==e.constructor.name)return!1;let n,i;if(Array.isArray(t)){if(n=t.length,n!=e.length)return!1;for(i=n;i--!==0;)if(!Xr(t[i],e[i]))return!1;return!0}if(t instanceof Map&&e instanceof Map){if(t.size!==e.size)return!1;for(const a of t.entries())if(!e.has(a[0]))return!1;for(const a of t.entries())if(!Xr(a[1],e.get(a[0])))return!1;return!0}if(t instanceof Set&&e instanceof Set){if(t.size!==e.size)return!1;for(const a of t.entries())if(!e.has(a[0]))return!1;return!0}if(ArrayBuffer.isView(t)&&ArrayBuffer.isView(e)){if(n=t.length,n!=e.length)return!1;for(i=n;i--!==0;)if(t[i]!==e[i])return!1;return!0}if(t.constructor===RegExp)return t.source===e.source&&t.flags===e.flags;if(t.valueOf!==Object.prototype.valueOf&&t.valueOf!==B4.valueOf)return t.valueOf()===e.valueOf();if(t.toString!==Object.prototype.toString&&t.toString!==B4.toString)return t.toString()===e.toString();const r=Object.keys(t);if(n=r.length,n!==Object.keys(e).length)return!1;for(i=n;i--!==0;)if(!Object.prototype.hasOwnProperty.call(e,r[i]))return!1;for(i=n;i--!==0;){const a=r[i];if(!Xr(t[a],e[a]))return!1}return!0}return t!==t&&e!==e}function Ne(t){const e=[];return function n(i){if(i!=null&&i.toJSON&&typeof i.toJSON=="function"&&(i=i.toJSON()),i===void 0)return;if(typeof i=="number")return isFinite(i)?`${i}`:"null";if(typeof i!="object")return JSON.stringify(i);let r,a;if(Array.isArray(i)){for(a="[",r=0;r<i.length;r++)r&&(a+=","),a+=n(i[r])||"null";return`${a}]`}if(i===null)return"null";if(e.includes(i))throw new TypeError("Converting circular structure to JSON");const o=e.push(i)-1,s=Object.keys(i).sort();for(a="",r=0;r<s.length;r++){const l=s[r],f=n(i[l]);f&&(a&&(a+=","),a+=`${JSON.stringify(l)}:${f}`)}return e.splice(o,1),`{${a}}`}(t)}function St(t,e){return Rt(t)&&zt(t,e)&&t[e]!==void 0}const mu="row",yu="column",S2="facet",un="x",ai="y",yo="x2",ms="y2",wc="xOffset",Yp="yOffset",vo="radius",ku="radius2",Ra="theta",Ou="theta2",_o="latitude",bo="longitude",xo="latitude2",$a="longitude2",Ec="time",Tr="color",ys="fill",vs="stroke",Cr="shape",$u="size",mh="angle",Du="opacity",Sc="fillOpacity",Ac="strokeOpacity",Tc="strokeWidth",Cc="strokeDash",Ty="text",mp="order",Cy="detail",A2="key",Kf="tooltip",T2="href",C2="url",M2="description",cyt={x:1,y:1,x2:1,y2:1},oH={theta:1,theta2:1,radius:1,radius2:1};function sH(t){return zt(oH,t)}const w$={longitude:1,longitude2:1,latitude:1,latitude2:1};function uH(t){switch(t){case _o:return"y";case xo:return"y2";case bo:return"x";case $a:return"x2"}}function lH(t){return zt(w$,t)}const fyt=Et(w$),E$={...cyt,...oH,...w$,xOffset:1,yOffset:1,color:1,fill:1,stroke:1,time:1,opacity:1,fillOpacity:1,strokeOpacity:1,strokeWidth:1,strokeDash:1,size:1,angle:1,shape:1,order:1,text:1,detail:1,key:1,tooltip:1,href:1,url:1,description:1};function qd(t){return t===Tr||t===ys||t===vs}const cH={row:1,column:1,facet:1},wa=Et(cH),S$={...E$,...cH},hyt=Et(S$),{order:oTt,detail:sTt,tooltip:uTt,...dyt}=S$,{row:lTt,column:cTt,facet:fTt,...pyt}=dyt;function gyt(t){return zt(pyt,t)}function fH(t){return zt(S$,t)}const myt=[yo,ms,xo,$a,Ou,ku];function hH(t){return yh(t)!==t}function yh(t){switch(t){case yo:return un;case ms:return ai;case xo:return _o;case $a:return bo;case Ou:return Ra;case ku:return vo}return t}function fc(t){if(sH(t))switch(t){case Ra:return"startAngle";case Ou:return"endAngle";case vo:return"outerRadius";case ku:return"innerRadius"}return t}function _s(t){switch(t){case un:return yo;case ai:return ms;case _o:return xo;case bo:return $a;case Ra:return Ou;case vo:return ku}}function Mr(t){switch(t){case un:case yo:return"width";case ai:case ms:return"height"}}function dH(t){switch(t){case un:return"xOffset";case ai:return"yOffset";case yo:return"x2Offset";case ms:return"y2Offset";case Ra:return"thetaOffset";case vo:return"radiusOffset";case Ou:return"theta2Offset";case ku:return"radius2Offset"}}function A$(t){switch(t){case un:return"xOffset";case ai:return"yOffset"}}function yyt(t){switch(t){case"xOffset":return"x";case"yOffset":return"y"}}const vyt=Et(E$),{x:hTt,y:dTt,x2:pTt,y2:gTt,xOffset:mTt,yOffset:yTt,latitude:vTt,longitude:_Tt,latitude2:bTt,longitude2:xTt,theta:wTt,theta2:ETt,radius:STt,radius2:ATt,...T$}=E$,_yt=Et(T$),C$={x:1,y:1},Ru=Et(C$);function Cn(t){return zt(C$,t)}const M$={theta:1,radius:1},byt=Et(M$);function k2(t){return t==="width"?un:ai}const pH={xOffset:1,yOffset:1};function My(t){return zt(pH,t)}const xyt={time:1};function EA(t){return t in xyt}const{text:TTt,tooltip:CTt,href:MTt,url:kTt,description:OTt,detail:$Tt,key:DTt,order:RTt,...gH}=T$,wyt=Et(gH);function Eyt(t){return zt(T$,t)}function Syt(t){switch(t){case Tr:case ys:case vs:case $u:case Cr:case Du:case Tc:case Cc:return!0;case Sc:case Ac:case mh:case Ec:return!1}}const mH={...C$,...M$,...pH,...gH},k$=Et(mH);function bs(t){return zt(mH,t)}function Ayt(t,e){return Cyt(t)[e]}const yH={arc:"always",area:"always",bar:"always",circle:"always",geoshape:"always",image:"always",line:"always",rule:"always",point:"always",rect:"always",square:"always",trail:"always",text:"always",tick:"always"},{geoshape:NTt,...Tyt}=yH;function Cyt(t){switch(t){case Tr:case ys:case vs:case M2:case Cy:case A2:case Kf:case T2:case mp:case Du:case Sc:case Ac:case Tc:case S2:case mu:case yu:return yH;case un:case ai:case wc:case Yp:case _o:case bo:case Ec:return Tyt;case yo:case ms:case xo:case $a:return{area:"always",bar:"always",image:"always",rect:"always",rule:"always",circle:"binned",point:"binned",square:"binned",tick:"binned",line:"binned",trail:"binned"};case $u:return{point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",text:"always",line:"always",trail:"always"};case Cc:return{line:"always",point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",geoshape:"always"};case Cr:return{point:"always",geoshape:"always"};case Ty:return{text:"always"};case mh:return{point:"always",square:"always",text:"always"};case C2:return{image:"always"};case Ra:return{text:"always",arc:"always"};case vo:return{text:"always",arc:"always"};case Ou:case ku:return{arc:"always"}}}function SA(t){switch(t){case un:case ai:case Ra:case vo:case wc:case Yp:case $u:case mh:case Tc:case Du:case Sc:case Ac:case Ec:case yo:case ms:case Ou:case ku:return;case S2:case mu:case yu:case Cr:case Cc:case Ty:case Kf:case T2:case C2:case M2:return"discrete";case Tr:case ys:case vs:return"flexible";case _o:case bo:case xo:case $a:case Cy:case A2:case mp:return}}const Myt={argmax:1,argmin:1,average:1,count:1,distinct:1,exponential:1,exponentialb:1,product:1,max:1,mean:1,median:1,min:1,missing:1,q1:1,q3:1,ci0:1,ci1:1,stderr:1,stdev:1,stdevp:1,sum:1,valid:1,values:1,variance:1,variancep:1},kyt={count:1,min:1,max:1};function Su(t){return St(t,"argmin")}function Mc(t){return St(t,"argmax")}function O$(t){return Dt(t)&&zt(Myt,t)}const Oyt=new Set(["count","valid","missing","distinct"]);function O2(t){return Dt(t)&&Oyt.has(t)}function $yt(t){return Dt(t)&&pe(["min","max"],t)}const Dyt=new Set(["count","sum","distinct","valid","missing"]),Ryt=new Set(["mean","average","median","q1","q3","min","max"]);function vH(t){return gc(t)&&(t=q2(t,void 0)),`bin${Et(t).map(e=>$2(t[e])?sn(`_${e}_${cc(t[e])}`):sn(`_${e}_${t[e]}`)).join("")}`}function Ke(t){return t===!0||vh(t)&&!t.binned}function hi(t){return t==="binned"||vh(t)&&t.binned===!0}function vh(t){return Rt(t)}function $2(t){return St(t,"param")}function U4(t){switch(t){case mu:case yu:case $u:case Tr:case ys:case vs:case Tc:case Du:case Sc:case Ac:case Cr:return 6;case Cc:return 4;default:return 10}}function ky(t){return St(t,"expr")}function di(t,{level:e}={level:0}){const n=Et(t||{}),i={};for(const r of n)i[r]=e===0?Zr(t[r]):di(t[r],{level:e-1});return i}function _H(t){const{anchor:e,frame:n,offset:i,orient:r,angle:a,limit:o,color:s,subtitleColor:l,subtitleFont:f,subtitleFontSize:d,subtitleFontStyle:p,subtitleFontWeight:m,subtitleLineHeight:_,subtitlePadding:b,...x}=t,S={...x,...s?{fill:s}:{}},T={...e?{anchor:e}:{},...n?{frame:n}:{},...i?{offset:i}:{},...r?{orient:r}:{},...a!==void 0?{angle:a}:{},...o!==void 0?{limit:o}:{}},M={...l?{subtitleColor:l}:{},...f?{subtitleFont:f}:{},...d?{subtitleFontSize:d}:{},...p?{subtitleFontStyle:p}:{},...m?{subtitleFontWeight:m}:{},..._?{subtitleLineHeight:_}:{},...b?{subtitlePadding:b}:{}},k=dp(t,["align","baseline","dx","dy","limit"]);return{titleMarkConfig:S,subtitleMarkConfig:k,nonMarkTitleProperties:T,subtitle:M}}function Fl(t){return Dt(t)||gt(t)&&Dt(t[0])}function It(t){return St(t,"signal")}function _h(t){return St(t,"step")}function Nyt(t){return gt(t)?!1:St(t,"fields")&&!St(t,"data")}function Lyt(t){return gt(t)?!1:St(t,"fields")&&St(t,"data")}function hu(t){return gt(t)?!1:St(t,"field")&&St(t,"data")}const zyt={aria:1,description:1,ariaRole:1,ariaRoleDescription:1,blend:1,opacity:1,fill:1,fillOpacity:1,stroke:1,strokeCap:1,strokeWidth:1,strokeOpacity:1,strokeDash:1,strokeDashOffset:1,strokeJoin:1,strokeOffset:1,strokeMiterLimit:1,startAngle:1,endAngle:1,padAngle:1,innerRadius:1,outerRadius:1,size:1,shape:1,interpolate:1,tension:1,orient:1,align:1,baseline:1,text:1,dir:1,dx:1,dy:1,ellipsis:1,limit:1,radius:1,theta:1,angle:1,font:1,fontSize:1,fontWeight:1,fontStyle:1,lineBreak:1,lineHeight:1,cursor:1,href:1,tooltip:1,cornerRadius:1,cornerRadiusTopLeft:1,cornerRadiusTopRight:1,cornerRadiusBottomLeft:1,cornerRadiusBottomRight:1,aspect:1,width:1,height:1,url:1,smooth:1},Fyt=Et(zyt),Pyt={arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1},YC=["cornerRadius","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight"];function bH(t){const e=gt(t.condition)?t.condition.map(I4):I4(t.condition);return{...Zr(t),condition:e}}function Zr(t){if(ky(t)){const{expr:e,...n}=t;return{signal:e,...n}}return t}function I4(t){if(ky(t)){const{expr:e,...n}=t;return{signal:e,...n}}return t}function en(t){if(ky(t)){const{expr:e,...n}=t;return{signal:e,...n}}return It(t)?t:t!==void 0?{value:t}:void 0}function Byt(t){return It(t)?t.signal:Mt(t)}function q4(t){return It(t)?t.signal:Mt(t.value)}function no(t){return It(t)?t.signal:t==null?null:Mt(t)}function Uyt(t,e,n){for(const i of n){const r=os(i,e.markDef,e.config);r!==void 0&&(t[i]=en(r))}return t}function xH(t){return[].concat(t.type,t.style??[])}function je(t,e,n,i={}){const{vgChannel:r,ignoreVgConfig:a}=i;return r&&St(e,r)?e[r]:e[t]!==void 0?e[t]:a&&(!r||r===t)?void 0:os(t,e,n,i)}function os(t,e,n,{vgChannel:i}={}){const r=XC(t,e,n.style);return Tn(i?r:void 0,r,i?n[e.type][i]:void 0,n[e.type][t],i?n.mark[i]:n.mark[t])}function XC(t,e,n){return wH(t,xH(e),n)}function wH(t,e,n){e=Nt(e);let i;for(const r of e){const a=n[r];St(a,t)&&(i=a[t])}return i}function EH(t,e){return Nt(t).reduce((n,i)=>(n.field.push(Ot(i,e)),n.order.push(i.sort??"ascending"),n),{field:[],order:[]})}function SH(t,e){const n=[...t];return e.forEach(i=>{for(const r of n)if(Xr(r,i))return;n.push(i)}),n}function AH(t,e){return Xr(t,e)||!e?t:t?[...Nt(t),...Nt(e)].join(", "):e}function TH(t,e){const n=t.value,i=e.value;if(n==null||i===null)return{explicit:t.explicit,value:null};if((Fl(n)||It(n))&&(Fl(i)||It(i)))return{explicit:t.explicit,value:AH(n,i)};if(Fl(n)||It(n))return{explicit:t.explicit,value:n};if(Fl(i)||It(i))return{explicit:t.explicit,value:i};if(!Fl(n)&&!It(n)&&!Fl(i)&&!It(i))return{explicit:t.explicit,value:SH(n,i)};throw new Error("It should never reach here")}function $$(t){return`Invalid specification ${Ne(t)}. Make sure the specification includes at least one of the following properties: "mark", "layer", "facet", "hconcat", "vconcat", "concat", or "repeat".`}const Iyt='Autosize "fit" only works for single views and layered views.';function j4(t){return`${t=="width"?"Width":"Height"} "container" only works for single views and layered views.`}function H4(t){const e=t=="width"?"Width":"Height",n=t=="width"?"x":"y";return`${e} "container" only works well with autosize "fit" or "fit-${n}".`}function G4(t){return t?`Dropping "fit-${t}" because spec has discrete ${Mr(t)}.`:'Dropping "fit" because spec has discrete size.'}function D$(t){return`Unknown field for ${t}. Cannot calculate view size.`}function Z4(t){return`Cannot project a selection on encoding channel "${t}", which has no field.`}function qyt(t,e){return`Cannot project a selection on encoding channel "${t}" as it uses an aggregate function ("${e}").`}function jyt(t){return`The "nearest" transform is not supported for ${t} marks.`}function CH(t){return`Selection not supported for ${t} yet.`}function Hyt(t){return`Cannot find a selection named "${t}".`}const Gyt="Scale bindings are currently only supported for scales with unbinned, continuous domains.",Zyt="Sequntial scales are deprecated. The available quantitative scale type values are linear, log, pow, sqrt, symlog, time and utc",Yyt="Legend bindings are only supported for selections over an individual field or encoding channel.";function Xyt(t){return`Lookups can only be performed on selection parameters. "${t}" is a variable parameter.`}function Wyt(t){return`Cannot define and lookup the "${t}" selection in the same view. Try moving the lookup into a second, layered view?`}const Vyt="The same selection must be used to override scale domains in a layered view.",Qyt='Interval selections should be initialized using "x", "y", "longitude", or "latitude" keys.';function Kyt(t){return`Unknown repeated value "${t}".`}function Y4(t){return`The "columns" property cannot be used when "${t}" has nested row/column.`}const Jyt="Multiple timer selections in one unit spec are not supported. Ignoring all but the first.",R$="Animation involving facet, layer, or concat is currently unsupported.";function t1t(t){return`A "field" or "encoding" must be specified when using a selection as a scale domain. Using "field": ${Mt(t)}.`}function e1t(t,e,n,i){return`${t.length?"Multiple ":"No "}matching ${Mt(e)} encoding found for selection ${Mt(n.param)}. Using "field": ${Mt(i)}.`}const n1t="Axes cannot be shared in concatenated or repeated views yet (https://github.com/vega/vega-lite/issues/2415).";function i1t(t){return`Unrecognized parse "${t}".`}function X4(t,e,n){return`An ancestor parsed field "${t}" as ${n} but a child wants to parse the field as ${e}.`}const r1t="Attempt to add the same child twice.";function a1t(t){return`Ignoring an invalid transform: ${Ne(t)}.`}const o1t='If "from.fields" is not specified, "as" has to be a string that specifies the key to be used for the data from the secondary source.';function W4(t){return`Config.customFormatTypes is not true, thus custom format type and format for channel ${t} are dropped.`}function s1t(t){const{parentProjection:e,projection:n}=t;return`Layer's shared projection ${Ne(e)} is overridden by a child projection ${Ne(n)}.`}const u1t="Arc marks uses theta channel rather than angle, replacing angle with theta.";function l1t(t){return`${t}Offset dropped because ${t} is continuous`}function c1t(t,e,n){return`Channel ${t} is a ${e}. Converted to {value: ${Ne(n)}}.`}function MH(t){return`Invalid field type "${t}".`}function f1t(t,e){return`Invalid field type "${t}" for aggregate: "${e}", using "quantitative" instead.`}function h1t(t){return`Invalid aggregation operator "${t}".`}function kH(t,e){const{fill:n,stroke:i}=e;return`Dropping color ${t} as the plot also has ${n&&i?"fill and stroke":n?"fill":"stroke"}.`}function d1t(t){return`Position range does not support relative band size for ${t}.`}function WC(t,e){return`Dropping ${Ne(t)} from channel "${e}" since it does not contain any data field, datum, value, or signal.`}const p1t="Line marks cannot encode size with a non-groupby field. You may want to use trail marks instead.";function D2(t,e,n){return`${t} dropped as it is incompatible with "${e}".`}function g1t(t){return`${t}-encoding is dropped as ${t} is not a valid encoding channel.`}function m1t(t){return`${t} encoding should be discrete (ordinal / nominal / binned).`}function y1t(t){return`${t} encoding should be discrete (ordinal / nominal / binned) or use a discretizing scale (e.g. threshold).`}function v1t(t){return`Facet encoding dropped as ${t.join(" and ")} ${t.length>1?"are":"is"} also specified.`}function AA(t,e){return`Using discrete channel "${t}" to encode "${e}" field can be misleading as it does not encode ${e==="ordinal"?"order":"magnitude"}.`}function _1t(t){return`The ${t} for range marks cannot be an expression`}function b1t(t,e){return`Line mark is for continuous lines and thus cannot be used with ${t&&e?"x2 and y2":t?"x2":"y2"}. We will use the rule mark (line segments) instead.`}function x1t(t,e){return`Specified orient "${t}" overridden with "${e}".`}function w1t(t){return`Cannot use the scale property "${t}" with non-color channel.`}function E1t(t){return`Cannot use the relative band size with ${t} scale.`}function S1t(t){return`Using unaggregated domain with raw field has no effect (${Ne(t)}).`}function A1t(t){return`Unaggregated domain not applicable for "${t}" since it produces values outside the origin domain of the source data.`}function T1t(t){return`Unaggregated domain is currently unsupported for log scale (${Ne(t)}).`}function C1t(t){return`Cannot apply size to non-oriented mark "${t}".`}function M1t(t,e,n){return`Channel "${t}" does not work with "${e}" scale. We are using "${n}" scale instead.`}function k1t(t,e){return`FieldDef does not work with "${t}" scale. We are using "${e}" scale instead.`}function OH(t,e,n){return`${n}-scale's "${e}" is dropped as it does not work with ${t} scale.`}function $H(t){return`The step for "${t}" is dropped because the ${t==="width"?"x":"y"} is continuous.`}function O1t(t,e,n,i){return`Conflicting ${e.toString()} property "${t.toString()}" (${Ne(n)} and ${Ne(i)}). Using ${Ne(n)}.`}function $1t(t,e,n,i){return`Conflicting ${e.toString()} property "${t.toString()}" (${Ne(n)} and ${Ne(i)}). Using the union of the two domains.`}function D1t(t){return`Setting the scale to be independent for "${t}" means we also have to set the guide (axis or legend) to be independent.`}function R1t(t){return`Dropping sort property ${Ne(t)} as unioned domains only support boolean or op "count", "min", and "max".`}const V4="Domains that should be unioned has conflicting sort properties. Sort will be set to true.",N1t="Detected faceted independent scales that union domain of multiple fields from different data sources. We will use the first field. The result view size may be incorrect.",L1t="Detected faceted independent scales that union domain of the same fields from different source. We will assume that this is the same field from a different fork of the same data source. However, if this is not the case, the result view size may be incorrect.",z1t="Detected faceted independent scales that union domain of multiple fields from the same data source. We will use the first field. The result view size may be incorrect.";function F1t(t){return`Cannot stack "${t}" if there is already "${t}2".`}function P1t(t){return`Stack is applied to a non-linear scale (${t}).`}function B1t(t){return`Stacking is applied even though the aggregate function is non-summative ("${t}").`}function Zb(t,e){return`Invalid ${t}: ${Ne(e)}.`}function U1t(t){return`Dropping day from datetime ${Ne(t)} as day cannot be combined with other units.`}function I1t(t,e){return`${e?"extent ":""}${e&&t?"and ":""}${t?"center ":""}${e&&t?"are ":"is "}not needed when data are aggregated.`}function q1t(t,e,n){return`${t} is not usually used with ${e} for ${n}.`}function j1t(t,e){return`Continuous axis should not have customized aggregation function ${t}; ${e} already agregates the axis.`}function Q4(t){return`1D error band does not support ${t}.`}function DH(t){return`Channel ${t} is required for "binned" bin.`}function H1t(t){return`Channel ${t} should not be used with "binned" bin.`}function G1t(t){return`Domain for ${t} is required for threshold scale.`}const RH=CM(TM);let Jf=RH;function Z1t(t){return Jf=t,Jf}function Y1t(){return Jf=RH,Jf}function N$(...t){Jf.error(...t)}function Tt(...t){Jf.warn(...t)}function X1t(...t){Jf.debug(...t)}function bh(t){if(t&&Rt(t)){for(const e of z$)if(St(t,e))return!0}return!1}const NH=["january","february","march","april","may","june","july","august","september","october","november","december"],W1t=NH.map(t=>t.substr(0,3)),LH=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],V1t=LH.map(t=>t.substr(0,3));function Q1t(t){if(E2(t)&&(t=+t),Me(t))return t>4&&Tt(Zb("quarter",t)),t-1;throw new Error(Zb("quarter",t))}function K1t(t){if(E2(t)&&(t=+t),Me(t))return t-1;{const e=t.toLowerCase(),n=NH.indexOf(e);if(n!==-1)return n;const i=e.substr(0,3),r=W1t.indexOf(i);if(r!==-1)return r;throw new Error(Zb("month",t))}}function J1t(t){if(E2(t)&&(t=+t),Me(t))return t%7;{const e=t.toLowerCase(),n=LH.indexOf(e);if(n!==-1)return n;const i=e.substr(0,3),r=V1t.indexOf(i);if(r!==-1)return r;throw new Error(Zb("day",t))}}function L$(t,e){const n=[];if(e&&t.day!==void 0&&Et(t).length>1&&(Tt(U1t(t)),t=ee(t),delete t.day),t.year!==void 0?n.push(t.year):n.push(2012),t.month!==void 0){const i=e?K1t(t.month):t.month;n.push(i)}else if(t.quarter!==void 0){const i=e?Q1t(t.quarter):t.quarter;n.push(Me(i)?i*3:`${i}*3`)}else n.push(0);if(t.date!==void 0)n.push(t.date);else if(t.day!==void 0){const i=e?J1t(t.day):t.day;n.push(Me(i)?i+1:`${i}+1`)}else n.push(1);for(const i of["hours","minutes","seconds","milliseconds"]){const r=t[i];n.push(typeof r>"u"?0:r)}return n}function th(t){const n=L$(t,!0).join(", ");return t.utc?`utc(${n})`:`datetime(${n})`}function tvt(t){const n=L$(t,!1).join(", ");return t.utc?`utc(${n})`:`datetime(${n})`}function evt(t){const e=L$(t,!0);return t.utc?+new Date(Date.UTC(...e)):+new Date(...e)}const zH={year:1,quarter:1,month:1,week:1,day:1,dayofyear:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1},z$=Et(zH);function nvt(t){return zt(zH,t)}function xh(t){return Rt(t)?t.binned:FH(t)}function FH(t){return t==null?void 0:t.startsWith("binned")}function F$(t){return t.startsWith("utc")}function ivt(t){return t.substring(3)}const rvt={"year-month":"%b %Y ","year-month-date":"%b %d, %Y "};function R2(t){return z$.filter(e=>BH(t,e))}function PH(t){const e=R2(t);return e[e.length-1]}function BH(t,e){const n=t.indexOf(e);return!(n<0||n>0&&e==="seconds"&&t.charAt(n-1)==="i"||t.length>n+3&&e==="day"&&t.charAt(n+3)==="o"||n>0&&e==="year"&&t.charAt(n-1)==="f")}function avt(t,e,{end:n}={end:!1}){const i=x$(e),r=F$(t)?"utc":"";function a(l){return l==="quarter"?`(${r}quarter(${i})-1)`:`${r}${l}(${i})`}let o;const s={};for(const l of z$)BH(t,l)&&(s[l]=a(l),o=l);return n&&(s[o]+="+1"),tvt(s)}function UH(t){if(!t)return;const e=R2(t);return`timeUnitSpecifier(${Ne(e)}, ${Ne(rvt)})`}function ovt(t,e,n){if(!t)return;const i=UH(t);return`${n||F$(t)?"utc":"time"}Format(${e}, ${i})`}function ni(t){if(!t)return;let e;return Dt(t)?FH(t)?e={unit:t.substring(6),binned:!0}:e={unit:t}:Rt(t)&&(e={...t,...t.unit?{unit:t.unit}:{}}),F$(e.unit)&&(e.utc=!0,e.unit=ivt(e.unit)),e}function svt(t){const{utc:e,...n}=ni(t);return n.unit?(e?"utc":"")+Et(n).map(i=>sn(`${i==="unit"?"":`_${i}_`}${n[i]}`)).join(""):`${e?"utc":""}timeunit${Et(n).map(i=>sn(`_${i}_${n[i]}`)).join("")}`}function IH(t,e=n=>n){const n=ni(t),i=PH(n.unit);if(i&&i!=="day"){const r={year:2001,month:1,date:1,hours:0,minutes:0,seconds:0,milliseconds:0},{step:a,part:o}=qH(i,n.step),s={...r,[o]:+r[o]+a};return`${e(th(s))} - ${e(th(r))}`}}const uvt={year:1,month:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1};function lvt(t){return zt(uvt,t)}function qH(t,e=1){if(lvt(t))return{part:t,step:e};switch(t){case"day":case"dayofyear":return{part:"date",step:e};case"quarter":return{part:"month",step:e*3};case"week":return{part:"date",step:e*7}}}function cvt(t){return St(t,"param")}function P$(t){return!!(t!=null&&t.field)&&t.equal!==void 0}function B$(t){return!!(t!=null&&t.field)&&t.lt!==void 0}function U$(t){return!!(t!=null&&t.field)&&t.lte!==void 0}function I$(t){return!!(t!=null&&t.field)&&t.gt!==void 0}function q$(t){return!!(t!=null&&t.field)&&t.gte!==void 0}function j$(t){if(t!=null&&t.field){if(gt(t.range)&&t.range.length===2)return!0;if(It(t.range))return!0}return!1}function H$(t){return!!(t!=null&&t.field)&&(gt(t.oneOf)||gt(t.in))}function fvt(t){return!!(t!=null&&t.field)&&t.valid!==void 0}function jH(t){return H$(t)||P$(t)||j$(t)||B$(t)||I$(t)||U$(t)||q$(t)}function Po(t,e){return j2(t,{timeUnit:e,wrapTime:!0})}function hvt(t,e){return t.map(n=>Po(n,e))}function HH(t,e=!0){const{field:n}=t,i=ni(t.timeUnit),{unit:r,binned:a}=i||{},o=Ot(t,{expr:"datum"}),s=r?`time(${a?o:avt(r,n)})`:o;if(P$(t))return`${s}===${Po(t.equal,r)}`;if(B$(t)){const l=t.lt;return`${s}<${Po(l,r)}`}else if(I$(t)){const l=t.gt;return`${s}>${Po(l,r)}`}else if(U$(t)){const l=t.lte;return`${s}<=${Po(l,r)}`}else if(q$(t)){const l=t.gte;return`${s}>=${Po(l,r)}`}else{if(H$(t))return`indexof([${hvt(t.oneOf,r).join(",")}], ${s}) !== -1`;if(fvt(t))return N2(s,t.valid);if(j$(t)){const{range:l}=di(t),f=It(l)?{signal:`${l.signal}[0]`}:l[0],d=It(l)?{signal:`${l.signal}[1]`}:l[1];if(f!==null&&d!==null&&e)return`inrange(${s}, [${Po(f,r)}, ${Po(d,r)}])`;const p=[];return f!==null&&p.push(`${s} >= ${Po(f,r)}`),d!==null&&p.push(`${s} <= ${Po(d,r)}`),p.length>0?p.join(" && "):"true"}}throw new Error(`Invalid field predicate: ${Ne(t)}`)}function N2(t,e=!0){return e?`isValid(${t}) && isFinite(+${t})`:`!isValid(${t}) || !isFinite(+${t})`}function dvt(t){return jH(t)&&t.timeUnit?{...t,timeUnit:ni(t.timeUnit)}:t}const Oy={quantitative:"quantitative",ordinal:"ordinal",temporal:"temporal",nominal:"nominal",geojson:"geojson"};function pvt(t){return t==="quantitative"||t==="temporal"}function GH(t){return t==="ordinal"||t==="nominal"}const eh=Oy.quantitative,G$=Oy.ordinal,yp=Oy.temporal,Z$=Oy.nominal,Xp=Oy.geojson;function gvt(t){if(t)switch(t=t.toLowerCase(),t){case"q":case eh:return"quantitative";case"t":case yp:return"temporal";case"o":case G$:return"ordinal";case"n":case Z$:return"nominal";case Xp:return"geojson"}}const pi={LINEAR:"linear",LOG:"log",POW:"pow",SQRT:"sqrt",TIME:"time",UTC:"utc",POINT:"point",BAND:"band"},VC={linear:"numeric",log:"numeric",pow:"numeric",sqrt:"numeric",symlog:"numeric",identity:"numeric",sequential:"numeric",time:"time",utc:"time",ordinal:"ordinal","bin-ordinal":"bin-ordinal",point:"ordinal-position",band:"ordinal-position",quantile:"discretizing",quantize:"discretizing",threshold:"discretizing"};function mvt(t,e){const n=VC[t],i=VC[e];return n===i||n==="ordinal-position"&&i==="time"||i==="ordinal-position"&&n==="time"}const yvt={linear:0,log:1,pow:1,sqrt:1,symlog:1,identity:1,sequential:1,time:0,utc:0,point:10,band:11,ordinal:0,"bin-ordinal":0,quantile:0,quantize:0,threshold:0};function K4(t){return yvt[t]}const ZH=new Set(["linear","log","pow","sqrt","symlog"]),YH=new Set([...ZH,"time","utc"]);function XH(t){return ZH.has(t)}const WH=new Set(["quantile","quantize","threshold"]),vvt=new Set([...YH,...WH,"sequential","identity"]),_vt=new Set(["ordinal","bin-ordinal","point","band"]);function ii(t){return _vt.has(t)}function lo(t){return vvt.has(t)}function Yo(t){return YH.has(t)}function vp(t){return WH.has(t)}const bvt={pointPadding:.5,barBandPaddingInner:.1,rectBandPaddingInner:0,tickBandPaddingInner:.25,bandWithNestedOffsetPaddingInner:.2,bandWithNestedOffsetPaddingOuter:.2,minBandSize:2,minFontSize:8,maxFontSize:40,minOpacity:.3,maxOpacity:.8,minSize:4,minStrokeWidth:1,maxStrokeWidth:4,quantileCount:4,quantizeCount:4,zero:!0,framesPerSecond:2,animationDuration:5};function xvt(t){return!Dt(t)&&St(t,"name")}function VH(t){return St(t,"param")}function wvt(t){return St(t,"unionWith")}function Evt(t){return Rt(t)&&"field"in t}const Svt={type:1,domain:1,domainMax:1,domainMin:1,domainMid:1,domainRaw:1,align:1,range:1,rangeMax:1,rangeMin:1,scheme:1,bins:1,reverse:1,round:1,clamp:1,nice:1,base:1,exponent:1,constant:1,interpolate:1,zero:1,padding:1,paddingInner:1,paddingOuter:1},{type:LTt,domain:zTt,range:FTt,rangeMax:PTt,rangeMin:BTt,scheme:UTt,...Avt}=Svt,Tvt=Et(Avt);function QC(t,e){switch(e){case"type":case"domain":case"reverse":case"range":return!0;case"scheme":case"interpolate":return!["point","band","identity"].includes(t);case"bins":return!["point","band","identity","ordinal"].includes(t);case"round":return Yo(t)||t==="band"||t==="point";case"padding":case"rangeMin":case"rangeMax":return Yo(t)||["point","band"].includes(t);case"paddingOuter":case"align":return["point","band"].includes(t);case"paddingInner":return t==="band";case"domainMax":case"domainMid":case"domainMin":case"domainRaw":case"clamp":return Yo(t);case"nice":return Yo(t)||t==="quantize"||t==="threshold";case"exponent":return t==="pow";case"base":return t==="log";case"constant":return t==="symlog";case"zero":return lo(t)&&!pe(["log","time","utc","threshold","quantile"],t)}}function QH(t,e){switch(e){case"interpolate":case"scheme":case"domainMid":return qd(t)?void 0:w1t(e);case"align":case"type":case"bins":case"domain":case"domainMax":case"domainMin":case"domainRaw":case"range":case"base":case"exponent":case"constant":case"nice":case"padding":case"paddingInner":case"paddingOuter":case"rangeMax":case"rangeMin":case"reverse":case"round":case"clamp":case"zero":return}}function Cvt(t,e){return pe([G$,Z$],e)?t===void 0||ii(t):e===yp?pe([pi.TIME,pi.UTC,void 0],t):e===eh?XH(t)||vp(t)||t===void 0:!0}function Mvt(t,e,n=!1){if(!bs(t))return!1;switch(t){case un:case ai:case wc:case Yp:case Ra:case vo:return Yo(e)||e==="band"?!0:e==="point"?!n:!1;case Ec:return pe(["linear","band"],e);case $u:case Tc:case Du:case Sc:case Ac:case mh:return Yo(e)||vp(e)||pe(["band","point","ordinal"],e);case Tr:case ys:case vs:return e!=="band";case Cc:case Cr:return e==="ordinal"||vp(e)}}function kvt(t){return Rt(t)&&"value"in t}const cr={arc:"arc",area:"area",bar:"bar",image:"image",line:"line",point:"point",rect:"rect",rule:"rule",text:"text",tick:"tick",trail:"trail",circle:"circle",square:"square",geoshape:"geoshape"},KH=cr.arc,L2=cr.area,z2=cr.bar,Ovt=cr.image,F2=cr.line,P2=cr.point,$vt=cr.rect,Yb=cr.rule,JH=cr.text,Y$=cr.tick,Dvt=cr.trail,X$=cr.circle,W$=cr.square,tG=cr.geoshape;function kc(t){return["line","area","trail"].includes(t)}function q0(t){return["rect","bar","image","arc","tick"].includes(t)}const Rvt=new Set(Et(cr));function ss(t){return St(t,"type")}const Nvt=["stroke","strokeWidth","strokeDash","strokeDashOffset","strokeOpacity","strokeJoin","strokeMiterLimit"],Lvt=["fill","fillOpacity"],zvt=[...Nvt,...Lvt],Fvt={color:1,filled:1,invalid:1,order:1,radius2:1,theta2:1,timeUnitBandSize:1,timeUnitBandPosition:1},J4=Et(Fvt),TA=["binSpacing","continuousBandSize","discreteBandSize","minBandSize"],Pvt={area:["line","point"],bar:TA,rect:TA,line:["point"],tick:["bandSize","thickness",...TA]},Bvt={color:"#4c78a8",invalid:"break-paths-show-path-domains",timeUnitBandSize:1},Uvt={mark:1,arc:1,area:1,bar:1,circle:1,image:1,line:1,point:1,rect:1,rule:1,square:1,text:1,tick:1,trail:1,geoshape:1},eG=Et(Uvt);function nh(t){return St(t,"band")}const Ivt={horizontal:["cornerRadiusTopRight","cornerRadiusBottomRight"],vertical:["cornerRadiusTopLeft","cornerRadiusTopRight"]},qvt=5,V$={binSpacing:0,continuousBandSize:qvt,minBandSize:.25,timeUnitBandPosition:.5},jvt={...V$,binSpacing:1},Hvt={...V$,thickness:1};function Gvt(t){return ss(t)?t.type:t}function nG(t,{isPath:e}){return t===void 0||t==="break-paths-show-path-domains"?e?"break-paths-show-domains":"filter":t===null?"show":t}function Q$({markDef:t,config:e,scaleChannel:n,scaleType:i,isCountAggregate:r}){var s,l;if(!i||!lo(i)||r)return"always-valid";const a=nG(je("invalid",t,e),{isPath:kc(t.type)});return((l=(s=e.scale)==null?void 0:s.invalid)==null?void 0:l[n])!==void 0?"show":a}function Zvt(t){return t==="break-paths-filter-domains"||t==="break-paths-show-domains"}function iG({scaleName:t,scale:e,mode:n}){const i=`domain('${t}')`;if(!e||!t)return;const r=`${i}[0]`,a=`peek(${i})`,o=e.domainHasZero();return o==="definitely"?{scale:t,value:0}:o==="maybe"?{signal:`scale('${t}', inrange(0, ${i}) ? 0 : ${n==="zeroOrMin"?r:a})`}:{signal:`scale('${t}', ${n==="zeroOrMin"?r:a})`}}function rG({scaleChannel:t,channelDef:e,scale:n,scaleName:i,markDef:r,config:a}){var d;const o=n==null?void 0:n.get("type"),s=fo(e),l=O2(s==null?void 0:s.aggregate),f=Q$({scaleChannel:t,markDef:r,config:a,scaleType:o,isCountAggregate:l});if(s&&f==="show"){const p=((d=a.scale.invalid)==null?void 0:d[t])??"zero-or-min";return{test:N2(Ot(s,{expr:"datum"}),!1),...Yvt(p,n,i)}}}function Yvt(t,e,n){if(kvt(t)){const{value:i}=t;return It(i)?{signal:i.signal}:{value:i}}return iG({scale:e,scaleName:n,mode:"zeroOrMin"})}function K$(t){const{channel:e,channelDef:n,markDef:i,scale:r,scaleName:a,config:o}=t,s=yh(e),l=J$(t),f=rG({scaleChannel:s,channelDef:n,scale:r,scaleName:a,markDef:i,config:o});return f!==void 0?[f,l]:l}function Xvt(t){const{datum:e}=t;return bh(e)?th(e):`${Ne(e)}`}function Nf(t,e,n,i){const r={};if(e&&(r.scale=e),xs(t)){const{datum:a}=t;bh(a)?r.signal=th(a):It(a)?r.signal=a.signal:ky(a)?r.signal=a.expr:r.value=a}else r.field=Ot(t,n);if(i){const{offset:a,band:o}=i;a&&(r.offset=a),o&&(r.band=o)}return r}function Xb({scaleName:t,fieldOrDatumDef:e,fieldOrDatumDef2:n,offset:i,startSuffix:r,endSuffix:a="end",bandPosition:o=.5}){const s=!It(o)&&0<o&&o<1?"datum":void 0,l=Ot(e,{expr:s,suffix:r}),f=n!==void 0?Ot(n,{expr:s}):Ot(e,{suffix:a,expr:s}),d={};if(o===0||o===1){d.scale=t;const p=o===0?l:f;d.field=p}else{const p=It(o)?`(1-${o.signal}) * ${l} + ${o.signal} * ${f}`:`${1-o} * ${l} + ${o} * ${f}`;d.signal=`scale("${t}", ${p})`}return i&&(d.offset=i),d}function Wvt({scaleName:t,fieldDef:e}){const n=Ot(e,{expr:"datum"}),i=Ot(e,{expr:"datum",suffix:"end"});return`abs(scale("${t}", ${i}) - scale("${t}", ${n}))`}function J$({channel:t,channelDef:e,channel2Def:n,markDef:i,config:r,scaleName:a,scale:o,stack:s,offset:l,defaultRef:f,bandPosition:d}){if(e){if(ie(e)){const p=o==null?void 0:o.get("type");if(ur(e)){d??(d=hc({fieldDef:e,fieldDef2:n,markDef:i,config:r}));const{bin:m,timeUnit:_,type:b}=e;if(Ke(m)||d&&_&&b===yp)return s!=null&&s.impute?Nf(e,a,{binSuffix:"mid"},{offset:l}):d&&!ii(p)?Xb({scaleName:a,fieldOrDatumDef:e,bandPosition:d,offset:l}):Nf(e,a,Ly(e,t)?{binSuffix:"range"}:{},{offset:l});if(hi(m)){if(Ct(n))return Xb({scaleName:a,fieldOrDatumDef:e,fieldOrDatumDef2:n,bandPosition:d,offset:l});Tt(DH(t===un?yo:ms))}}return Nf(e,a,ii(p)?{binSuffix:"range"}:{},{offset:l,band:p==="band"?d??e.bandPosition??.5:void 0})}else if(co(e)){const p=e.value,m=l?{offset:l}:{};return{...p0(t,p),...m}}}return se(f)&&(f=f()),f&&{...f,...l?{offset:l}:{}}}function p0(t,e){return pe(["x","x2"],t)&&e==="width"?{field:{group:"width"}}:pe(["y","y2"],t)&&e==="height"?{field:{group:"height"}}:en(e)}function ih(t){return t&&t!=="number"&&t!=="time"}function aG(t,e,n){return`${t}(${e}${n?`, ${Ne(n)}`:""})`}const Vvt="  ";function tD({fieldOrDatumDef:t,format:e,formatType:n,expr:i,normalizeStack:r,config:a}){var l,f;if(ih(n))return io({fieldOrDatumDef:t,format:e,formatType:n,expr:i,config:a});const o=oG(t,i,r),s=_p(t);if(e===void 0&&n===void 0&&a.customFormatTypes){if(s==="quantitative"){if(r&&a.normalizedNumberFormatType)return io({fieldOrDatumDef:t,format:a.normalizedNumberFormat,formatType:a.normalizedNumberFormatType,expr:i,config:a});if(a.numberFormatType)return io({fieldOrDatumDef:t,format:a.numberFormat,formatType:a.numberFormatType,expr:i,config:a})}if(s==="temporal"&&a.timeFormatType&&Ct(t)&&t.timeUnit===void 0)return io({fieldOrDatumDef:t,format:a.timeFormat,formatType:a.timeFormatType,expr:i,config:a})}if(xp(t)){const d=Kvt({field:o,timeUnit:Ct(t)?(l=ni(t.timeUnit))==null?void 0:l.unit:void 0,format:e,formatType:a.timeFormatType,rawTimeFormat:a.timeFormat,isUTCScale:wh(t)&&((f=t.scale)==null?void 0:f.type)===pi.UTC});return d?{signal:d}:void 0}if(e=KC({type:s,specifiedFormat:e,config:a,normalizeStack:r}),Ct(t)&&Ke(t.bin)){const d=Ot(t,{expr:i,binSuffix:"end"});return{signal:$y(o,d,e,n,a)}}else return e||_p(t)==="quantitative"?{signal:`${lG(o,e)}`}:{signal:`isValid(${o}) ? ${o} : ""+${o}`}}function oG(t,e,n){return Ct(t)?n?`${Ot(t,{expr:e,suffix:"end"})}-${Ot(t,{expr:e,suffix:"start"})}`:Ot(t,{expr:e}):Xvt(t)}function io({fieldOrDatumDef:t,format:e,formatType:n,expr:i,normalizeStack:r,config:a,field:o}){if(o??(o=oG(t,i,r)),o!=="datum.value"&&Ct(t)&&Ke(t.bin)){const s=Ot(t,{expr:i,binSuffix:"end"});return{signal:$y(o,s,e,n,a)}}return{signal:aG(n,o,e)}}function sG(t,e,n,i,r,a){var o;if(!(Dt(i)&&ih(i))&&!(n===void 0&&i===void 0&&r.customFormatTypes&&_p(t)==="quantitative"&&(r.normalizedNumberFormatType&&bp(t)&&t.stack==="normalize"||r.numberFormatType))){if(bp(t)&&t.stack==="normalize"&&r.normalizedNumberFormat)return KC({type:"quantitative",config:r,normalizeStack:!0});if(xp(t)){const s=Ct(t)?(o=ni(t.timeUnit))==null?void 0:o.unit:void 0;return s===void 0&&r.customFormatTypes&&r.timeFormatType?void 0:Qvt({specifiedFormat:n,timeUnit:s,config:r,omitTimeFormatConfig:a})}return KC({type:e,specifiedFormat:n,config:r})}}function uG(t,e,n){var i;if(t&&(It(t)||t==="number"||t==="time"))return t;if(xp(e)&&n!=="time"&&n!=="utc")return Ct(e)&&((i=ni(e==null?void 0:e.timeUnit))!=null&&i.utc)?"utc":"time"}function KC({type:t,specifiedFormat:e,config:n,normalizeStack:i}){if(Dt(e))return e;if(t===eh)return i?n.normalizedNumberFormat:n.numberFormat}function Qvt({specifiedFormat:t,timeUnit:e,config:n,omitTimeFormatConfig:i}){return t||(e?{signal:UH(e)}:i?void 0:n.timeFormat)}function lG(t,e){return`format(${t}, "${e||""}")`}function tF(t,e,n,i){return ih(n)?aG(n,t,e):lG(t,(Dt(e)?e:void 0)??i.numberFormat)}function $y(t,e,n,i,r){if(n===void 0&&i===void 0&&r.customFormatTypes&&r.numberFormatType)return $y(t,e,r.numberFormat,r.numberFormatType,r);const a=tF(t,n,i,r),o=tF(e,n,i,r);return`${N2(t,!1)} ? "null" : ${a} + "${Vvt}" + ${o}`}function Kvt({field:t,timeUnit:e,format:n,formatType:i,rawTimeFormat:r,isUTCScale:a}){return!e||n?!e&&i?`${i}(${t}, ${Ne(n)})`:(n=Dt(n)?n:r,`${a?"utc":"time"}Format(${t}, ${Ne(n)})`):ovt(e,t,a)}const B2="min",Jvt={x:1,y:1,color:1,fill:1,stroke:1,strokeWidth:1,size:1,shape:1,fillOpacity:1,strokeOpacity:1,opacity:1,text:1};function eF(t){return zt(Jvt,t)}function t_t(t){return St(t,"encoding")}function vu(t){return t&&(t.op==="count"||St(t,"field"))}function cG(t){return t&&gt(t)}function Dy(t){return St(t,"row")||St(t,"column")}function eD(t){return St(t,"header")}function U2(t){return St(t,"facet")}function e_t(t){return St(t,"param")}function n_t(t){return!Dt(t)&&St(t,"repeat")}function nF(t){const{field:e,timeUnit:n,bin:i,aggregate:r}=t;return{...n?{timeUnit:n}:{},...i?{bin:i}:{},...r?{aggregate:r}:{},field:e}}function nD(t){return St(t,"sort")}function hc({fieldDef:t,fieldDef2:e,markDef:n,config:i}){if(ie(t)&&t.bandPosition!==void 0)return t.bandPosition;if(Ct(t)){const{timeUnit:r,bin:a}=t;if(r&&!e)return os("timeUnitBandPosition",n,i);if(Ke(a))return .5}}function fG({channel:t,fieldDef:e,fieldDef2:n,markDef:i,config:r,scaleType:a,useVlSizeChannel:o}){var f,d,p;const s=Mr(t),l=je(o?"size":s,i,r,{vgChannel:s});if(l!==void 0)return l;if(Ct(e)){const{timeUnit:m,bin:_}=e;if(m&&!n)return{band:os("timeUnitBandSize",i,r)};if(Ke(_)&&!ii(a))return{band:1}}if(q0(i.type))return a?ii(a)?((f=r[i.type])==null?void 0:f.discreteBandSize)||{band:1}:(d=r[i.type])==null?void 0:d.continuousBandSize:(p=r[i.type])==null?void 0:p.discreteBandSize}function hG(t,e,n,i){return Ke(t.bin)||t.timeUnit&&ur(t)&&t.type==="temporal"?hc({fieldDef:t,fieldDef2:e,markDef:n,config:i})!==void 0:!1}function dG(t){return St(t,"sort")&&!St(t,"field")}function Ry(t){return St(t,"condition")}function I2(t){const e=t==null?void 0:t.condition;return!!e&&!gt(e)&&Ct(e)}function Ny(t){const e=t==null?void 0:t.condition;return!!e&&!gt(e)&&ie(e)}function i_t(t){const e=t==null?void 0:t.condition;return!!e&&(gt(e)||co(e))}function Ct(t){return St(t,"field")||(t==null?void 0:t.aggregate)==="count"}function _p(t){return t==null?void 0:t.type}function xs(t){return St(t,"datum")}function Yl(t){return ur(t)&&!Vb(t)||Wb(t)}function iF(t){return ur(t)&&t.type==="quantitative"&&!t.bin||Wb(t)}function Wb(t){return xs(t)&&Me(t.datum)}function ie(t){return Ct(t)||xs(t)}function ur(t){return t&&(St(t,"field")||t.aggregate==="count")&&St(t,"type")}function co(t){return St(t,"value")}function wh(t){return St(t,"scale")||St(t,"sort")}function bp(t){return St(t,"axis")||St(t,"stack")||St(t,"impute")}function pG(t){return St(t,"legend")}function gG(t){return St(t,"format")||St(t,"formatType")}function r_t(t){return Kr(t,["legend","axis","header","scale"])}function a_t(t){return St(t,"op")}function Ot(t,e={}){let n=t.field;const i=e.prefix;let r=e.suffix,a="";if(s_t(t))n=rH("count");else{let o;if(!e.nofn)if(a_t(t))o=t.op;else{const{bin:s,aggregate:l,timeUnit:f}=t;Ke(s)?(o=vH(s),r=(e.binSuffix??"")+(e.suffix??"")):l?Mc(l)?(a=`["${n}"]`,n=`argmax_${l.argmax}`):Su(l)?(a=`["${n}"]`,n=`argmin_${l.argmin}`):o=String(l):f&&!xh(f)&&(o=svt(f),r=(!["range","mid"].includes(e.binSuffix)&&e.binSuffix||"")+(e.suffix??""))}o&&(n=n?`${o}_${n}`:o)}return r&&(n=`${n}_${r}`),i&&(n=`${i}_${n}`),e.forAs?Zp(n):e.expr?eH(n,e.expr)+a:Oa(n)+a}function Vb(t){switch(t.type){case"nominal":case"ordinal":case"geojson":return!0;case"quantitative":return Ct(t)&&!!t.bin;case"temporal":return!1}throw new Error(MH(t.type))}function o_t(t){var e;return wh(t)&&vp((e=t.scale)==null?void 0:e.type)}function s_t(t){return t.aggregate==="count"}function u_t(t,e){var o;const{field:n,bin:i,timeUnit:r,aggregate:a}=t;if(a==="count")return e.countTitle;if(Ke(i))return`${n} (binned)`;if(r&&!xh(r)){const s=(o=ni(r))==null?void 0:o.unit;if(s)return`${n} (${R2(s).join("-")})`}else if(a)return Mc(a)?`${n} for max ${a.argmax}`:Su(a)?`${n} for min ${a.argmin}`:`${Ay(a)} of ${n}`;return n}function l_t(t){const{aggregate:e,bin:n,timeUnit:i,field:r}=t;if(Mc(e))return`${r} for argmax(${e.argmax})`;if(Su(e))return`${r} for argmin(${e.argmin})`;const a=i&&!xh(i)?ni(i):void 0,o=e||(a==null?void 0:a.unit)||(a==null?void 0:a.maxbins)&&"timeunit"||Ke(n)&&"bin";return o?`${o.toUpperCase()}(${r})`:r}const mG=(t,e)=>{switch(e.fieldTitle){case"plain":return t.field;case"functional":return l_t(t);default:return u_t(t,e)}};let yG=mG;function vG(t){yG=t}function c_t(){vG(mG)}function jd(t,e,{allowDisabling:n,includeDefault:i=!0}){var s;const r=(s=iD(t))==null?void 0:s.title;if(!Ct(t))return r??t.title;const a=t,o=i?rD(a,e):void 0;return n?Tn(r,a.title,o):r??a.title??o}function iD(t){if(bp(t)&&t.axis)return t.axis;if(pG(t)&&t.legend)return t.legend;if(eD(t)&&t.header)return t.header}function rD(t,e){return yG(t,e)}function Qb(t){if(gG(t)){const{format:e,formatType:n}=t;return{format:e,formatType:n}}else{const e=iD(t)??{},{format:n,formatType:i}=e;return{format:n,formatType:i}}}function f_t(t,e){var a;switch(e){case"latitude":case"longitude":return"quantitative";case"row":case"column":case"facet":case"shape":case"strokeDash":return"nominal";case"order":return"ordinal"}if(nD(t)&&gt(t.sort))return"ordinal";const{aggregate:n,bin:i,timeUnit:r}=t;if(r)return"temporal";if(i||n&&!Mc(n)&&!Su(n))return"quantitative";if(wh(t)&&((a=t.scale)!=null&&a.type))switch(VC[t.scale.type]){case"numeric":case"discretizing":return"quantitative";case"time":return"temporal"}return"nominal"}function fo(t){if(Ct(t))return t;if(I2(t))return t.condition}function Un(t){if(ie(t))return t;if(Ny(t))return t.condition}function _G(t,e,n,i={}){if(Dt(t)||Me(t)||gc(t)){const r=Dt(t)?"string":Me(t)?"number":"boolean";return Tt(c1t(e,r,t)),{value:t}}return ie(t)?Kb(t,e,n,i):Ny(t)?{...t,condition:Kb(t.condition,e,n,i)}:t}function Kb(t,e,n,i){if(gG(t)){const{format:r,formatType:a,...o}=t;if(ih(a)&&!n.customFormatTypes)return Tt(W4(e)),Kb(o,e,n,i)}else{const r=bp(t)?"axis":pG(t)?"legend":eD(t)?"header":null;if(r&&t[r]){const{format:a,formatType:o,...s}=t[r];if(ih(o)&&!n.customFormatTypes)return Tt(W4(e)),Kb({...t,[r]:s},e,n,i)}}return Ct(t)?aD(t,e,i):h_t(t)}function h_t(t){let e=t.type;if(e)return t;const{datum:n}=t;return e=Me(n)?"quantitative":Dt(n)?"nominal":bh(n)?"temporal":void 0,{...t,type:e}}function aD(t,e,{compositeMark:n=!1}={}){const{aggregate:i,timeUnit:r,bin:a,field:o}=t,s={...t};if(!n&&i&&!O$(i)&&!Mc(i)&&!Su(i)&&(Tt(h1t(i)),delete s.aggregate),r&&(s.timeUnit=ni(r)),o&&(s.field=`${o}`),Ke(a)&&(s.bin=q2(a,e)),hi(a)&&!Cn(e)&&Tt(H1t(e)),ur(s)){const{type:l}=s,f=gvt(l);l!==f&&(s.type=f),l!=="quantitative"&&O2(i)&&(Tt(f1t(l,i)),s.type="quantitative")}else if(!hH(e)){const l=f_t(s,e);s.type=l}if(ur(s)){const{compatible:l,warning:f}=d_t(s,e)||{};l===!1&&Tt(f)}if(nD(s)&&Dt(s.sort)){const{sort:l}=s;if(eF(l))return{...s,sort:{encoding:l}};const f=l.substring(1);if(l.charAt(0)==="-"&&eF(f))return{...s,sort:{encoding:f,order:"descending"}}}if(eD(s)){const{header:l}=s;if(l){const{orient:f,...d}=l;if(f)return{...s,header:{...d,labelOrient:l.labelOrient||f,titleOrient:l.titleOrient||f}}}}return s}function q2(t,e){return gc(t)?{maxbins:U4(e)}:t==="binned"?{binned:!0}:!t.maxbins&&!t.step?{...t,maxbins:U4(e)}:t}const Ed={compatible:!0};function d_t(t,e){const n=t.type;if(n==="geojson"&&e!=="shape")return{compatible:!1,warning:`Channel ${e} should not be used with a geojson data.`};switch(e){case mu:case yu:case S2:return Vb(t)?Ed:{compatible:!1,warning:m1t(e)};case un:case ai:case wc:case Yp:case Tr:case ys:case vs:case Ty:case Cy:case A2:case Kf:case T2:case C2:case mh:case Ra:case vo:case M2:return Ed;case bo:case $a:case _o:case xo:return n!==eh?{compatible:!1,warning:`Channel ${e} should be used with a quantitative field only, not ${t.type} field.`}:Ed;case Du:case Sc:case Ac:case Tc:case $u:case Ou:case ku:case yo:case ms:case Ec:return n==="nominal"&&!t.sort?{compatible:!1,warning:`Channel ${e} should not be used with an unsorted discrete field.`}:Ed;case Cr:case Cc:return!Vb(t)&&!o_t(t)?{compatible:!1,warning:y1t(e)}:Ed;case mp:return t.type==="nominal"&&!("sort"in t)?{compatible:!1,warning:"Channel order is inappropriate for nominal field, which has no inherent order."}:Ed}}function xp(t){const{formatType:e}=Qb(t);return e==="time"||!e&&p_t(t)}function p_t(t){return t&&(t.type==="temporal"||Ct(t)&&!!t.timeUnit)}function j2(t,{timeUnit:e,type:n,wrapTime:i,undefinedIfExprNotRequired:r}){var l;const a=e&&((l=ni(e))==null?void 0:l.unit);let o=a||n==="temporal",s;return ky(t)?s=t.expr:It(t)?s=t.signal:bh(t)?(o=!0,s=th(t)):(Dt(t)||Me(t))&&o&&(s=`datetime(${Ne(t)})`,nvt(a)&&(Me(t)&&t<1e4||Dt(t)&&isNaN(Date.parse(t)))&&(s=th({[a]:t}))),s?i&&o?`time(${s})`:s:r?void 0:Ne(t)}function bG(t,e){const{type:n}=t;return e.map(i=>{const r=Ct(t)&&!xh(t.timeUnit)?t.timeUnit:void 0,a=j2(i,{timeUnit:r,type:n,undefinedIfExprNotRequired:!0});return a!==void 0?{signal:a}:i})}function Ly(t,e){return Ke(t.bin)?bs(e)&&["ordinal","nominal"].includes(t.type):(console.warn("Only call this method for binned field defs."),!1)}const rF={labelAlign:{part:"labels",vgProp:"align"},labelBaseline:{part:"labels",vgProp:"baseline"},labelColor:{part:"labels",vgProp:"fill"},labelFont:{part:"labels",vgProp:"font"},labelFontSize:{part:"labels",vgProp:"fontSize"},labelFontStyle:{part:"labels",vgProp:"fontStyle"},labelFontWeight:{part:"labels",vgProp:"fontWeight"},labelOpacity:{part:"labels",vgProp:"opacity"},labelOffset:null,labelPadding:null,gridColor:{part:"grid",vgProp:"stroke"},gridDash:{part:"grid",vgProp:"strokeDash"},gridDashOffset:{part:"grid",vgProp:"strokeDashOffset"},gridOpacity:{part:"grid",vgProp:"opacity"},gridWidth:{part:"grid",vgProp:"strokeWidth"},tickColor:{part:"ticks",vgProp:"stroke"},tickDash:{part:"ticks",vgProp:"strokeDash"},tickDashOffset:{part:"ticks",vgProp:"strokeDashOffset"},tickOpacity:{part:"ticks",vgProp:"opacity"},tickSize:null,tickWidth:{part:"ticks",vgProp:"strokeWidth"}};function zy(t){return t==null?void 0:t.condition}const xG=["domain","grid","labels","ticks","title"],g_t={grid:"grid",gridCap:"grid",gridColor:"grid",gridDash:"grid",gridDashOffset:"grid",gridOpacity:"grid",gridScale:"grid",gridWidth:"grid",orient:"main",bandPosition:"both",aria:"main",description:"main",domain:"main",domainCap:"main",domainColor:"main",domainDash:"main",domainDashOffset:"main",domainOpacity:"main",domainWidth:"main",format:"main",formatType:"main",labelAlign:"main",labelAngle:"main",labelBaseline:"main",labelBound:"main",labelColor:"main",labelFlush:"main",labelFlushOffset:"main",labelFont:"main",labelFontSize:"main",labelFontStyle:"main",labelFontWeight:"main",labelLimit:"main",labelLineHeight:"main",labelOffset:"main",labelOpacity:"main",labelOverlap:"main",labelPadding:"main",labels:"main",labelSeparation:"main",maxExtent:"main",minExtent:"main",offset:"both",position:"main",tickCap:"main",tickColor:"main",tickDash:"main",tickDashOffset:"main",tickMinStep:"both",tickOffset:"both",tickOpacity:"main",tickRound:"both",ticks:"main",tickSize:"main",tickWidth:"both",title:"main",titleAlign:"main",titleAnchor:"main",titleAngle:"main",titleBaseline:"main",titleColor:"main",titleFont:"main",titleFontSize:"main",titleFontStyle:"main",titleFontWeight:"main",titleLimit:"main",titleLineHeight:"main",titleOpacity:"main",titlePadding:"main",titleX:"main",titleY:"main",encode:"both",scale:"both",tickBand:"both",tickCount:"both",tickExtra:"both",translate:"both",values:"both",zindex:"both"},wG={orient:1,aria:1,bandPosition:1,description:1,domain:1,domainCap:1,domainColor:1,domainDash:1,domainDashOffset:1,domainOpacity:1,domainWidth:1,format:1,formatType:1,grid:1,gridCap:1,gridColor:1,gridDash:1,gridDashOffset:1,gridOpacity:1,gridWidth:1,labelAlign:1,labelAngle:1,labelBaseline:1,labelBound:1,labelColor:1,labelFlush:1,labelFlushOffset:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelLineHeight:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labels:1,labelSeparation:1,maxExtent:1,minExtent:1,offset:1,position:1,tickBand:1,tickCap:1,tickColor:1,tickCount:1,tickDash:1,tickDashOffset:1,tickExtra:1,tickMinStep:1,tickOffset:1,tickOpacity:1,tickRound:1,ticks:1,tickSize:1,tickWidth:1,title:1,titleAlign:1,titleAnchor:1,titleAngle:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titlePadding:1,titleX:1,titleY:1,translate:1,values:1,zindex:1},m_t={...wG,style:1,labelExpr:1,encoding:1};function aF(t){return zt(m_t,t)}const y_t={axis:1,axisBand:1,axisBottom:1,axisDiscrete:1,axisLeft:1,axisPoint:1,axisQuantitative:1,axisRight:1,axisTemporal:1,axisTop:1,axisX:1,axisXBand:1,axisXDiscrete:1,axisXPoint:1,axisXQuantitative:1,axisXTemporal:1,axisY:1,axisYBand:1,axisYDiscrete:1,axisYPoint:1,axisYQuantitative:1,axisYTemporal:1},EG=Et(y_t);function Nu(t){return St(t,"mark")}class H2{constructor(e,n){yt(this,"name");yt(this,"run");this.name=e,this.run=n}hasMatchingType(e){return Nu(e)?Gvt(e.mark)===this.name:!1}}function Lf(t,e){const n=t==null?void 0:t[e];return n?gt(n)?pp(n,i=>!!i.field):Ct(n)||I2(n):!1}function SG(t,e){const n=t==null?void 0:t[e];return n?gt(n)?pp(n,i=>!!i.field):Ct(n)||xs(n)||Ny(n):!1}function AG(t,e){if(Cn(e)){const n=t[e];if((Ct(n)||xs(n))&&(GH(n.type)||Ct(n)&&n.timeUnit)){const i=A$(e);return SG(t,i)}}return!1}function TG(t){return pp(hyt,e=>{if(Lf(t,e)){const n=t[e];if(gt(n))return pp(n,i=>!!i.aggregate);{const i=fo(n);return i&&!!i.aggregate}}return!1})}function CG(t,e){const n=[],i=[],r=[],a=[],o={};return oD(t,(s,l)=>{if(Ct(s)){const{field:f,aggregate:d,bin:p,timeUnit:m,..._}=s;if(d||m||p){const b=iD(s),x=b==null?void 0:b.title;let S=Ot(s,{forAs:!0});const T={...x?[]:{title:jd(s,e,{allowDisabling:!0})},..._,field:S};if(d){let M;if(Mc(d)?(M="argmax",S=Ot({op:"argmax",field:d.argmax},{forAs:!0}),T.field=`${S}.${f}`):Su(d)?(M="argmin",S=Ot({op:"argmin",field:d.argmin},{forAs:!0}),T.field=`${S}.${f}`):d!=="boxplot"&&d!=="errorbar"&&d!=="errorband"&&(M=d),M){const k={op:M,as:S};f&&(k.field=f),a.push(k)}}else if(n.push(S),ur(s)&&Ke(p)){if(i.push({bin:p,field:f,as:S}),n.push(Ot(s,{binSuffix:"end"})),Ly(s,l)&&n.push(Ot(s,{binSuffix:"range"})),Cn(l)){const M={field:`${S}_end`};o[`${l}2`]=M}T.bin="binned",hH(l)||(T.type=eh)}else if(m&&!xh(m)){r.push({timeUnit:m,field:f,as:S});const M=ur(s)&&s.type!==yp&&"time";M&&(l===Ty||l===Kf?T.formatType=M:Eyt(l)?T.legend={formatType:M,...T.legend}:Cn(l)&&(T.axis={formatType:M,...T.axis}))}o[l]=T}else n.push(f),o[l]=t[l]}else o[l]=t[l]}),{bins:i,timeUnits:r,aggregate:a,groupby:n,encoding:o}}function v_t(t,e,n){const i=Ayt(e,n);if(i){if(i==="binned"){const r=t[e===yo?un:ai];return!!(Ct(r)&&Ct(t[e])&&hi(r.bin))}}else return!1;return!0}function __t(t,e,n,i){const r={};for(const a of Et(t))fH(a)||Tt(g1t(a));for(let a of vyt){if(!t[a])continue;const o=t[a];if(My(a)){const s=yyt(a),l=r[s];if(Ct(l)&&pvt(l.type)&&Ct(o)&&!l.timeUnit){Tt(l1t(s));continue}}if(a==="angle"&&e==="arc"&&!t.theta&&(Tt(u1t),a=Ra),!v_t(t,a,e)){Tt(D2(a,e));continue}if(a===$u&&e==="line"){const s=fo(t[a]);if(s!=null&&s.aggregate){Tt(p1t);continue}}if(a===Tr&&(n?"fill"in t:"stroke"in t)){Tt(kH("encoding",{fill:"fill"in t,stroke:"stroke"in t}));continue}if(a===Cy||a===mp&&!gt(o)&&!co(o)||a===Kf&&gt(o)){if(o){if(a===mp){const s=t[a];if(dG(s)){r[a]=s;continue}}r[a]=Nt(o).reduce((s,l)=>(Ct(l)?s.push(aD(l,a)):Tt(WC(l,a)),s),[])}}else{if(a===Kf&&o===null)r[a]=null;else if(!Ct(o)&&!xs(o)&&!co(o)&&!Ry(o)&&!It(o)){Tt(WC(o,a));continue}r[a]=_G(o,a,i)}}return r}function G2(t,e){const n={};for(const i of Et(t)){const r=_G(t[i],i,e,{compositeMark:!0});n[i]=r}return n}function b_t(t){const e=[];for(const n of Et(t))if(Lf(t,n)){const i=t[n],r=Nt(i);for(const a of r)Ct(a)?e.push(a):I2(a)&&e.push(a.condition)}return e}function oD(t,e,n){if(t)for(const i of Et(t)){const r=t[i];if(gt(r))for(const a of r)e.call(n,a,i);else e.call(n,r,i)}}function x_t(t,e,n,i){return t?Et(t).reduce((r,a)=>{const o=t[a];return gt(o)?o.reduce((s,l)=>e.call(i,s,l,a),r):e.call(i,r,o,a)},n):n}function MG(t,e){return Et(e).reduce((n,i)=>{switch(i){case un:case ai:case T2:case M2:case C2:case yo:case ms:case wc:case Yp:case Ra:case Ou:case vo:case ku:case Ec:case _o:case bo:case xo:case $a:case Ty:case Cr:case mh:case Kf:return n;case mp:if(t==="line"||t==="trail")return n;case Cy:case A2:{const r=e[i];if(gt(r)||Ct(r))for(const a of Nt(r))a.aggregate||n.push(Ot(a,{}));return n}case $u:if(t==="trail")return n;case Tr:case ys:case vs:case Du:case Sc:case Ac:case Cc:case Tc:{const r=fo(e[i]);return r&&!r.aggregate&&n.push(Ot(r,{})),n}}},[])}function w_t(t){const{tooltip:e,...n}=t;if(!e)return{filteredEncoding:n};let i,r;if(gt(e)){for(const a of e)a.aggregate?(i||(i=[]),i.push(a)):(r||(r=[]),r.push(a));i&&(n.tooltip=i)}else e.aggregate?n.tooltip=e:r=e;return gt(r)&&r.length===1&&(r=r[0]),{customTooltipWithoutAggregatedField:r,filteredEncoding:n}}function JC(t,e,n,i=!0){if("tooltip"in n)return{tooltip:n.tooltip};const r=t.map(({fieldPrefix:o,titlePrefix:s})=>{const l=i?` of ${sD(e)}`:"";return{field:o+e.field,type:e.type,title:It(s)?{signal:`${s}"${escape(l)}"`}:s+l}}),a=b_t(n).map(r_t);return{tooltip:[...r,...Zo(a,ye)]}}function sD(t){const{title:e,field:n}=t;return Tn(e,n)}function uD(t,e,n,i,r){const{scale:a,axis:o}=n;return({partName:s,mark:l,positionPrefix:f,endPositionPrefix:d=void 0,extraEncoding:p={}})=>{const m=sD(n);return kG(t,s,r,{mark:l,encoding:{[e]:{field:`${f}_${n.field}`,type:n.type,...m!==void 0?{title:m}:{},...a!==void 0?{scale:a}:{},...o!==void 0?{axis:o}:{}},...Dt(d)?{[`${e}2`]:{field:`${d}_${n.field}`}}:{},...i,...p}})}}function kG(t,e,n,i){const{clip:r,color:a,opacity:o}=t,s=t.type;return t[e]||t[e]===void 0&&n[e]?[{...i,mark:{...n[e],...r?{clip:r}:{},...a?{color:a}:{},...o?{opacity:o}:{},...ss(i.mark)?i.mark:{type:i.mark},style:`${s}-${String(e)}`,...gc(t[e])?{}:t[e]}}]:[]}function OG(t,e,n){const{encoding:i}=t,r=e==="vertical"?"y":"x",a=i[r],o=i[`${r}2`],s=i[`${r}Error`],l=i[`${r}Error2`];return{continuousAxisChannelDef:Gv(a,n),continuousAxisChannelDef2:Gv(o,n),continuousAxisChannelDefError:Gv(s,n),continuousAxisChannelDefError2:Gv(l,n),continuousAxis:r}}function Gv(t,e){if(t!=null&&t.aggregate){const{aggregate:n,...i}=t;return n!==e&&Tt(j1t(n,e)),i}else return t}function $G(t,e){const{mark:n,encoding:i}=t,{x:r,y:a}=i;if(ss(n)&&n.orient)return n.orient;if(Yl(r)){if(Yl(a)){const o=Ct(r)&&r.aggregate,s=Ct(a)&&a.aggregate;if(!o&&s===e)return"vertical";if(!s&&o===e)return"horizontal";if(o===e&&s===e)throw new Error("Both x and y cannot have aggregate");return xp(a)&&!xp(r)?"horizontal":"vertical"}return"horizontal"}else{if(Yl(a))return"vertical";throw new Error(`Need a valid continuous axis for ${e}s`)}}const Jb="boxplot",E_t=["box","median","outliers","rule","ticks"],S_t=new H2(Jb,RG);function DG(t){return Me(t)?"tukey":t}function RG(t,{config:e}){t={...t,encoding:G2(t.encoding,e)};const{mark:n,encoding:i,params:r,projection:a,...o}=t,s=ss(n)?n:{type:n};r&&Tt(CH("boxplot"));const l=s.extent??e.boxplot.extent,f=je("size",s,e),d=s.invalid,p=DG(l),{bins:m,timeUnits:_,transform:b,continuousAxisChannelDef:x,continuousAxis:S,groupby:T,aggregate:M,encodingWithoutContinuousAxis:k,ticksOrient:$,boxOrient:D,customTooltipWithoutAggregatedField:F}=A_t(t,l,e),N=Zp(x.field),{color:I,size:q,...Y}=k,H=nn=>uD(s,S,x,nn,e.boxplot),et=H(Y),nt=H(k),W=(Rt(e.boxplot.box)?e.boxplot.box.color:e.mark.color)||"#4c78a8",j=H({...Y,...q?{size:q}:{},color:{condition:{test:`${Fe(`lower_box_${x.field}`)} >= ${Fe(`upper_box_${x.field}`)}`,...I||{value:W}}}}),U=JC([{fieldPrefix:p==="min-max"?"upper_whisker_":"max_",titlePrefix:"Max"},{fieldPrefix:"upper_box_",titlePrefix:"Q3"},{fieldPrefix:"mid_box_",titlePrefix:"Median"},{fieldPrefix:"lower_box_",titlePrefix:"Q1"},{fieldPrefix:p==="min-max"?"lower_whisker_":"min_",titlePrefix:"Min"}],x,k),X={type:"tick",color:"black",opacity:1,orient:$,invalid:d,aria:!1},V=p==="min-max"?U:JC([{fieldPrefix:"upper_whisker_",titlePrefix:"Upper Whisker"},{fieldPrefix:"lower_whisker_",titlePrefix:"Lower Whisker"}],x,k),ot=[...et({partName:"rule",mark:{type:"rule",invalid:d,aria:!1},positionPrefix:"lower_whisker",endPositionPrefix:"lower_box",extraEncoding:V}),...et({partName:"rule",mark:{type:"rule",invalid:d,aria:!1},positionPrefix:"upper_box",endPositionPrefix:"upper_whisker",extraEncoding:V}),...et({partName:"ticks",mark:X,positionPrefix:"lower_whisker",extraEncoding:V}),...et({partName:"ticks",mark:X,positionPrefix:"upper_whisker",extraEncoding:V})],B=[...p!=="tukey"?ot:[],...nt({partName:"box",mark:{type:"bar",...f?{size:f}:{},orient:D,invalid:d,ariaRoleDescription:"box"},positionPrefix:"lower_box",endPositionPrefix:"upper_box",extraEncoding:U}),...j({partName:"median",mark:{type:"tick",invalid:d,...Rt(e.boxplot.median)&&e.boxplot.median.color?{color:e.boxplot.median.color}:{},...f?{size:f}:{},orient:$,aria:!1},positionPrefix:"mid_box",extraEncoding:U})];if(p==="min-max")return{...o,transform:(o.transform??[]).concat(b),layer:B};const J=Fe(`lower_box_${x.field}`),lt=Fe(`upper_box_${x.field}`),ft=`(${lt} - ${J})`,wt=`${J} - ${l} * ${ft}`,bt=`${lt} + ${l} * ${ft}`,At=Fe(x.field),$e={joinaggregate:NG(x.field),groupby:T},ae={transform:[{filter:`(${wt} <= ${At}) && (${At} <= ${bt})`},{aggregate:[{op:"min",field:x.field,as:`lower_whisker_${N}`},{op:"max",field:x.field,as:`upper_whisker_${N}`},{op:"min",field:`lower_box_${x.field}`,as:`lower_box_${N}`},{op:"max",field:`upper_box_${x.field}`,as:`upper_box_${N}`},...M],groupby:T}],layer:ot},{tooltip:$t,...Qt}=Y,{scale:Jt,axis:xt}=x,Je=sD(x),ve=kG(s,"outliers",e.boxplot,{transform:[{filter:`(${At} < ${wt}) || (${At} > ${bt})`}],mark:"point",encoding:{[S]:{field:x.field,type:x.type,...Je!==void 0?{title:Je}:{},...Jt!==void 0?{scale:Jt}:{},...xt!==void 0?{axis:xt}:{}},...Qt,...I?{color:I}:{},...F?{tooltip:F}:{}}})[0];let ln;const wn=[...m,..._,$e];return ve?ln={transform:wn,layer:[ve,ae]}:(ln=ae,ln.transform.unshift(...wn)),{...o,layer:[ln,{transform:b,layer:B}]}}function NG(t){const e=Zp(t);return[{op:"q1",field:t,as:`lower_box_${e}`},{op:"q3",field:t,as:`upper_box_${e}`}]}function A_t(t,e,n){const i=$G(t,Jb),{continuousAxisChannelDef:r,continuousAxis:a}=OG(t,i,Jb),o=r.field,s=Zp(o),l=DG(e),f=[...NG(o),{op:"median",field:o,as:`mid_box_${s}`},{op:"min",field:o,as:(l==="min-max"?"lower_whisker_":"min_")+s},{op:"max",field:o,as:(l==="min-max"?"upper_whisker_":"max_")+s}],d=l==="min-max"||l==="tukey"?[]:[{calculate:`${Fe(`upper_box_${s}`)} - ${Fe(`lower_box_${s}`)}`,as:`iqr_${s}`},{calculate:`min(${Fe(`upper_box_${s}`)} + ${Fe(`iqr_${s}`)} * ${e}, ${Fe(`max_${s}`)})`,as:`upper_whisker_${s}`},{calculate:`max(${Fe(`lower_box_${s}`)} - ${Fe(`iqr_${s}`)} * ${e}, ${Fe(`min_${s}`)})`,as:`lower_whisker_${s}`}],{[a]:p,...m}=t.encoding,{customTooltipWithoutAggregatedField:_,filteredEncoding:b}=w_t(m),{bins:x,timeUnits:S,aggregate:T,groupby:M,encoding:k}=CG(b,n),$=i==="vertical"?"horizontal":"vertical",D=i,F=[...x,...S,{aggregate:[...T,...f],groupby:M},...d];return{bins:x,timeUnits:S,transform:F,groupby:M,aggregate:T,continuousAxisChannelDef:r,continuousAxis:a,encodingWithoutContinuousAxis:k,ticksOrient:$,boxOrient:D,customTooltipWithoutAggregatedField:_}}const lD="errorbar",T_t=["ticks","rule"],C_t=new H2(lD,LG);function LG(t,{config:e}){t={...t,encoding:G2(t.encoding,e)};const{transform:n,continuousAxisChannelDef:i,continuousAxis:r,encodingWithoutContinuousAxis:a,ticksOrient:o,markDef:s,outerSpec:l,tooltipEncoding:f}=zG(t,lD,e);delete a.size;const d=uD(s,r,i,a,e.errorbar),p=s.thickness,m=s.size,_={type:"tick",orient:o,aria:!1,...p!==void 0?{thickness:p}:{},...m!==void 0?{size:m}:{}},b=[...d({partName:"ticks",mark:_,positionPrefix:"lower",extraEncoding:f}),...d({partName:"ticks",mark:_,positionPrefix:"upper",extraEncoding:f}),...d({partName:"rule",mark:{type:"rule",ariaRoleDescription:"errorbar",...p!==void 0?{size:p}:{}},positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:f})];return{...l,transform:n,...b.length>1?{layer:b}:{...b[0]}}}function M_t(t,e){const{encoding:n}=t;if(k_t(n))return{orient:$G(t,e),inputType:"raw"};const i=O_t(n),r=$_t(n),a=n.x,o=n.y;if(i){if(r)throw new Error(`${e} cannot be both type aggregated-upper-lower and aggregated-error`);const s=n.x2,l=n.y2;if(ie(s)&&ie(l))throw new Error(`${e} cannot have both x2 and y2`);if(ie(s)){if(Yl(a))return{orient:"horizontal",inputType:"aggregated-upper-lower"};throw new Error(`Both x and x2 have to be quantitative in ${e}`)}else if(ie(l)){if(Yl(o))return{orient:"vertical",inputType:"aggregated-upper-lower"};throw new Error(`Both y and y2 have to be quantitative in ${e}`)}throw new Error("No ranged axis")}else{const s=n.xError,l=n.xError2,f=n.yError,d=n.yError2;if(ie(l)&&!ie(s))throw new Error(`${e} cannot have xError2 without xError`);if(ie(d)&&!ie(f))throw new Error(`${e} cannot have yError2 without yError`);if(ie(s)&&ie(f))throw new Error(`${e} cannot have both xError and yError with both are quantiative`);if(ie(s)){if(Yl(a))return{orient:"horizontal",inputType:"aggregated-error"};throw new Error("All x, xError, and xError2 (if exist) have to be quantitative")}else if(ie(f)){if(Yl(o))return{orient:"vertical",inputType:"aggregated-error"};throw new Error("All y, yError, and yError2 (if exist) have to be quantitative")}throw new Error("No ranged axis")}}function k_t(t){return(ie(t.x)||ie(t.y))&&!ie(t.x2)&&!ie(t.y2)&&!ie(t.xError)&&!ie(t.xError2)&&!ie(t.yError)&&!ie(t.yError2)}function O_t(t){return ie(t.x2)||ie(t.y2)}function $_t(t){return ie(t.xError)||ie(t.xError2)||ie(t.yError)||ie(t.yError2)}function zG(t,e,n){const{mark:i,encoding:r,params:a,projection:o,...s}=t,l=ss(i)?i:{type:i};a&&Tt(CH(e));const{orient:f,inputType:d}=M_t(t,e),{continuousAxisChannelDef:p,continuousAxisChannelDef2:m,continuousAxisChannelDefError:_,continuousAxisChannelDefError2:b,continuousAxis:x}=OG(t,f,e),{errorBarSpecificAggregate:S,postAggregateCalculates:T,tooltipSummary:M,tooltipTitleWithFieldName:k}=D_t(l,p,m,_,b,d,e,n),{[x]:$,[x==="x"?"x2":"y2"]:D,[x==="x"?"xError":"yError"]:F,[x==="x"?"xError2":"yError2"]:N,...I}=r,{bins:q,timeUnits:Y,aggregate:H,groupby:et,encoding:nt}=CG(I,n),W=[...H,...S],j=d!=="raw"?[]:et,U=JC(M,p,nt,k);return{transform:[...s.transform??[],...q,...Y,...W.length===0?[]:[{aggregate:W,groupby:j}],...T],groupby:j,continuousAxisChannelDef:p,continuousAxis:x,encodingWithoutContinuousAxis:nt,ticksOrient:f==="vertical"?"horizontal":"vertical",markDef:l,outerSpec:s,tooltipEncoding:U}}function D_t(t,e,n,i,r,a,o,s){let l=[],f=[];const d=e.field;let p,m=!1;if(a==="raw"){const _=t.center?t.center:t.extent?t.extent==="iqr"?"median":"mean":s.errorbar.center,b=t.extent?t.extent:_==="mean"?"stderr":"iqr";if(_==="median"!=(b==="iqr")&&Tt(q1t(_,b,o)),b==="stderr"||b==="stdev")l=[{op:b,field:d,as:`extent_${d}`},{op:_,field:d,as:`center_${d}`}],f=[{calculate:`${Fe(`center_${d}`)} + ${Fe(`extent_${d}`)}`,as:`upper_${d}`},{calculate:`${Fe(`center_${d}`)} - ${Fe(`extent_${d}`)}`,as:`lower_${d}`}],p=[{fieldPrefix:"center_",titlePrefix:Ay(_)},{fieldPrefix:"upper_",titlePrefix:oF(_,b,"+")},{fieldPrefix:"lower_",titlePrefix:oF(_,b,"-")}],m=!0;else{let x,S,T;b==="ci"?(x="mean",S="ci0",T="ci1"):(x="median",S="q1",T="q3"),l=[{op:S,field:d,as:`lower_${d}`},{op:T,field:d,as:`upper_${d}`},{op:x,field:d,as:`center_${d}`}],p=[{fieldPrefix:"upper_",titlePrefix:jd({field:d,aggregate:T,type:"quantitative"},s,{allowDisabling:!1})},{fieldPrefix:"lower_",titlePrefix:jd({field:d,aggregate:S,type:"quantitative"},s,{allowDisabling:!1})},{fieldPrefix:"center_",titlePrefix:jd({field:d,aggregate:x,type:"quantitative"},s,{allowDisabling:!1})}]}}else{(t.center||t.extent)&&Tt(I1t(t.center,t.extent)),a==="aggregated-upper-lower"?(p=[],f=[{calculate:Fe(n.field),as:`upper_${d}`},{calculate:Fe(d),as:`lower_${d}`}]):a==="aggregated-error"&&(p=[{fieldPrefix:"",titlePrefix:d}],f=[{calculate:`${Fe(d)} + ${Fe(i.field)}`,as:`upper_${d}`}],r?f.push({calculate:`${Fe(d)} + ${Fe(r.field)}`,as:`lower_${d}`}):f.push({calculate:`${Fe(d)} - ${Fe(i.field)}`,as:`lower_${d}`}));for(const _ of f)p.push({fieldPrefix:_.as.substring(0,6),titlePrefix:Qf(Qf(_.calculate,"datum['",""),"']","")})}return{postAggregateCalculates:f,errorBarSpecificAggregate:l,tooltipSummary:p,tooltipTitleWithFieldName:m}}function oF(t,e,n){return`${Ay(t)} ${n} ${e}`}const cD="errorband",R_t=["band","borders"],N_t=new H2(cD,FG);function FG(t,{config:e}){t={...t,encoding:G2(t.encoding,e)};const{transform:n,continuousAxisChannelDef:i,continuousAxis:r,encodingWithoutContinuousAxis:a,markDef:o,outerSpec:s,tooltipEncoding:l}=zG(t,cD,e),f=o,d=uD(f,r,i,a,e.errorband),p=t.encoding.x!==void 0&&t.encoding.y!==void 0;let m={type:p?"area":"rect"},_={type:p?"line":"rule"};const b={...f.interpolate?{interpolate:f.interpolate}:{},...f.tension&&f.interpolate?{tension:f.tension}:{}};return p?(m={...m,...b,ariaRoleDescription:"errorband"},_={..._,...b,aria:!1}):f.interpolate?Tt(Q4("interpolate")):f.tension&&Tt(Q4("tension")),{...s,transform:n,layer:[...d({partName:"band",mark:m,positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:l}),...d({partName:"borders",mark:_,positionPrefix:"lower",extraEncoding:l}),...d({partName:"borders",mark:_,positionPrefix:"upper",extraEncoding:l})]}}const PG={};function fD(t,e,n){const i=new H2(t,e);PG[t]={normalizer:i,parts:n}}function L_t(){return Et(PG)}fD(Jb,RG,E_t);fD(lD,LG,T_t);fD(cD,FG,R_t);const z_t=["gradientHorizontalMaxLength","gradientHorizontalMinLength","gradientVerticalMaxLength","gradientVerticalMinLength","unselectedOpacity"],BG={titleAlign:"align",titleAnchor:"anchor",titleAngle:"angle",titleBaseline:"baseline",titleColor:"color",titleFont:"font",titleFontSize:"fontSize",titleFontStyle:"fontStyle",titleFontWeight:"fontWeight",titleLimit:"limit",titleLineHeight:"lineHeight",titleOrient:"orient",titlePadding:"offset"},UG={labelAlign:"align",labelAnchor:"anchor",labelAngle:"angle",labelBaseline:"baseline",labelColor:"color",labelFont:"font",labelFontSize:"fontSize",labelFontStyle:"fontStyle",labelFontWeight:"fontWeight",labelLimit:"limit",labelLineHeight:"lineHeight",labelOrient:"orient",labelPadding:"offset"},F_t=Et(BG),P_t=Et(UG),B_t={header:1,headerRow:1,headerColumn:1,headerFacet:1},IG=Et(B_t),qG=["size","shape","fill","stroke","strokeDash","strokeWidth","opacity"],U_t={gradientHorizontalMaxLength:200,gradientHorizontalMinLength:100,gradientVerticalMaxLength:200,gradientVerticalMinLength:64,unselectedOpacity:.35},I_t={aria:1,clipHeight:1,columnPadding:1,columns:1,cornerRadius:1,description:1,direction:1,fillColor:1,format:1,formatType:1,gradientLength:1,gradientOpacity:1,gradientStrokeColor:1,gradientStrokeWidth:1,gradientThickness:1,gridAlign:1,labelAlign:1,labelBaseline:1,labelColor:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labelSeparation:1,legendX:1,legendY:1,offset:1,orient:1,padding:1,rowPadding:1,strokeColor:1,symbolDash:1,symbolDashOffset:1,symbolFillColor:1,symbolLimit:1,symbolOffset:1,symbolOpacity:1,symbolSize:1,symbolStrokeColor:1,symbolStrokeWidth:1,symbolType:1,tickCount:1,tickMinStep:1,title:1,titleAlign:1,titleAnchor:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titleOrient:1,titlePadding:1,type:1,values:1,zindex:1},ho="_vgsid_",q_t={point:{on:"click",fields:[ho],toggle:"event.shiftKey",resolve:"global",clear:"dblclick"},interval:{on:"[pointerdown, window:pointerup] > window:pointermove!",encodings:["x","y"],translate:"[pointerdown, window:pointerup] > window:pointermove!",zoom:"wheel!",mark:{fill:"#333",fillOpacity:.125,stroke:"white"},resolve:"global",clear:"dblclick"}};function hD(t){return t==="legend"||!!(t!=null&&t.legend)}function CA(t){return hD(t)&&Rt(t)}function dD(t){return!!(t!=null&&t.select)}function jG(t){const e=[];for(const n of t||[]){if(dD(n))continue;const{expr:i,bind:r,...a}=n;if(r&&i){const o={...a,bind:r,init:i};e.push(o)}else{const o={...a,...i?{update:i}:{},...r?{bind:r}:{}};e.push(o)}}return e}function j_t(t){return Z2(t)||gD(t)||pD(t)}function pD(t){return St(t,"concat")}function Z2(t){return St(t,"vconcat")}function gD(t){return St(t,"hconcat")}function HG({step:t,offsetIsDiscrete:e}){return e?t.for??"offset":"position"}function us(t){return St(t,"step")}function sF(t){return St(t,"view")||St(t,"width")||St(t,"height")}const uF=20,H_t={align:1,bounds:1,center:1,columns:1,spacing:1},G_t=Et(H_t);function Z_t(t,e,n){const i=n[e],r={},{spacing:a,columns:o}=i;a!==void 0&&(r.spacing=a),o!==void 0&&(U2(t)&&!Dy(t.facet)||pD(t))&&(r.columns=o),Z2(t)&&(r.columns=1);for(const s of G_t)if(t[s]!==void 0)if(s==="spacing"){const l=t[s];r[s]=Me(l)?l:{row:l.row??a,column:l.column??a}}else r[s]=t[s];return r}function tM(t,e){return t[e]??t[e==="width"?"continuousWidth":"continuousHeight"]}function eM(t,e){const n=tx(t,e);return us(n)?n.step:GG}function tx(t,e){const n=t[e]??t[e==="width"?"discreteWidth":"discreteHeight"];return Tn(n,{step:t.step})}const GG=20,Y_t={continuousWidth:300,continuousHeight:300,step:GG},X_t={background:"white",padding:5,timeFormat:"%b %d, %Y",countTitle:"Count of Records",view:Y_t,mark:Bvt,arc:{},area:{},bar:jvt,circle:{},geoshape:{},image:{},line:{},point:{},rect:V$,rule:{color:"black"},square:{},text:{color:"black"},tick:Hvt,trail:{},boxplot:{size:14,extent:1.5,box:{},median:{color:"white"},outliers:{},rule:{},ticks:null},errorbar:{center:"mean",rule:!0,ticks:!1},errorband:{band:{opacity:.3},borders:!1},scale:bvt,projection:{},legend:U_t,header:{titlePadding:10,labelPadding:10},headerColumn:{},headerRow:{},headerFacet:{},selection:q_t,style:{},title:{},facet:{spacing:uF},concat:{spacing:uF},normalizedNumberFormat:".0%"},eu=["#4c78a8","#f58518","#e45756","#72b7b2","#54a24b","#eeca3b","#b279a2","#ff9da6","#9d755d","#bab0ac"],lF={text:11,guideLabel:10,guideTitle:11,groupTitle:13,groupSubtitle:12},cF={blue:eu[0],orange:eu[1],red:eu[2],teal:eu[3],green:eu[4],yellow:eu[5],purple:eu[6],pink:eu[7],brown:eu[8],gray0:"#000",gray1:"#111",gray2:"#222",gray3:"#333",gray4:"#444",gray5:"#555",gray6:"#666",gray7:"#777",gray8:"#888",gray9:"#999",gray10:"#aaa",gray11:"#bbb",gray12:"#ccc",gray13:"#ddd",gray14:"#eee",gray15:"#fff"};function W_t(t={}){return{signals:[{name:"color",value:Rt(t)?{...cF,...t}:cF}],mark:{color:{signal:"color.blue"}},rule:{color:{signal:"color.gray0"}},text:{color:{signal:"color.gray0"}},style:{"guide-label":{fill:{signal:"color.gray0"}},"guide-title":{fill:{signal:"color.gray0"}},"group-title":{fill:{signal:"color.gray0"}},"group-subtitle":{fill:{signal:"color.gray0"}},cell:{stroke:{signal:"color.gray8"}}},axis:{domainColor:{signal:"color.gray13"},gridColor:{signal:"color.gray8"},tickColor:{signal:"color.gray13"}},range:{category:[{signal:"color.blue"},{signal:"color.orange"},{signal:"color.red"},{signal:"color.teal"},{signal:"color.green"},{signal:"color.yellow"},{signal:"color.purple"},{signal:"color.pink"},{signal:"color.brown"},{signal:"color.grey8"}]}}}function V_t(t){return{signals:[{name:"fontSize",value:Rt(t)?{...lF,...t}:lF}],text:{fontSize:{signal:"fontSize.text"}},style:{"guide-label":{fontSize:{signal:"fontSize.guideLabel"}},"guide-title":{fontSize:{signal:"fontSize.guideTitle"}},"group-title":{fontSize:{signal:"fontSize.groupTitle"}},"group-subtitle":{fontSize:{signal:"fontSize.groupSubtitle"}}}}}function Q_t(t){return{text:{font:t},style:{"guide-label":{font:t},"guide-title":{font:t},"group-title":{font:t},"group-subtitle":{font:t}}}}function ZG(t){const e=Et(t||{}),n={};for(const i of e){const r=t[i];n[i]=zy(r)?bH(r):Zr(r)}return n}function K_t(t){const e=Et(t),n={};for(const i of e)n[i]=ZG(t[i]);return n}const J_t=[...eG,...EG,...IG,"background","padding","legend","lineBreak","scale","style","title","view"];function YG(t={}){const{color:e,font:n,fontSize:i,selection:r,...a}=t,o=kp({},ee(X_t),n?Q_t(n):{},e?W_t(e):{},i?V_t(i):{},a||{});r&&Op(o,"selection",r,!0);const s=Kr(o,J_t);for(const l of["background","lineBreak","padding"])o[l]&&(s[l]=Zr(o[l]));for(const l of eG)o[l]&&(s[l]=di(o[l]));for(const l of EG)o[l]&&(s[l]=ZG(o[l]));for(const l of IG)o[l]&&(s[l]=di(o[l]));if(o.legend&&(s.legend=di(o.legend)),o.scale){const{invalid:l,...f}=o.scale,d=di(l,{level:1});s.scale={...di(f),...Et(d).length>0?{invalid:d}:{}}}return o.style&&(s.style=K_t(o.style)),o.title&&(s.title=di(o.title)),o.view&&(s.view=di(o.view)),s}const tbt=new Set(["view",...Rvt]),ebt=["color","fontSize","background","padding","facet","concat","numberFormat","numberFormatType","normalizedNumberFormat","normalizedNumberFormatType","timeFormat","countTitle","header","axisQuantitative","axisTemporal","axisDiscrete","axisPoint","axisXBand","axisXPoint","axisXDiscrete","axisXQuantitative","axisXTemporal","axisYBand","axisYPoint","axisYDiscrete","axisYQuantitative","axisYTemporal","scale","selection","overlay"],nbt={view:["continuousWidth","continuousHeight","discreteWidth","discreteHeight","step"],...Pvt};function ibt(t){t=ee(t);for(const e of ebt)delete t[e];if(t.axis)for(const e in t.axis)zy(t.axis[e])&&delete t.axis[e];if(t.legend)for(const e of z_t)delete t.legend[e];if(t.mark){for(const e of J4)delete t.mark[e];t.mark.tooltip&&Rt(t.mark.tooltip)&&delete t.mark.tooltip}t.params&&(t.signals=(t.signals||[]).concat(jG(t.params)),delete t.params);for(const e of tbt){for(const i of J4)delete t[e][i];const n=nbt[e];if(n)for(const i of n)delete t[e][i];abt(t,e)}for(const e of L_t())delete t[e];rbt(t);for(const e in t)Rt(t[e])&&Ye(t[e])&&delete t[e];return Ye(t)?void 0:t}function rbt(t){const{titleMarkConfig:e,subtitleMarkConfig:n,subtitle:i}=_H(t.title);Ye(e)||(t.style["group-title"]={...t.style["group-title"],...e}),Ye(n)||(t.style["group-subtitle"]={...t.style["group-subtitle"],...n}),Ye(i)?delete t.title:t.title=i}function abt(t,e,n,i){const r=t[e];e==="view"&&(n="cell");const a={...r,...t.style[n??e]};Ye(a)||(t.style[n??e]=a),delete t[e]}function Y2(t){return St(t,"layer")}function obt(t){return St(t,"repeat")}function sbt(t){return!gt(t.repeat)&&St(t.repeat,"layer")}class mD{map(e,n){return U2(e)?this.mapFacet(e,n):obt(e)?this.mapRepeat(e,n):gD(e)?this.mapHConcat(e,n):Z2(e)?this.mapVConcat(e,n):pD(e)?this.mapConcat(e,n):this.mapLayerOrUnit(e,n)}mapLayerOrUnit(e,n){if(Y2(e))return this.mapLayer(e,n);if(Nu(e))return this.mapUnit(e,n);throw new Error($$(e))}mapLayer(e,n){return{...e,layer:e.layer.map(i=>this.mapLayerOrUnit(i,n))}}mapHConcat(e,n){return{...e,hconcat:e.hconcat.map(i=>this.map(i,n))}}mapVConcat(e,n){return{...e,vconcat:e.vconcat.map(i=>this.map(i,n))}}mapConcat(e,n){const{concat:i,...r}=e;return{...r,concat:i.map(a=>this.map(a,n))}}mapFacet(e,n){return{...e,spec:this.map(e.spec,n)}}mapRepeat(e,n){return{...e,spec:this.map(e.spec,n)}}}const ubt={zero:1,center:1,normalize:1};function lbt(t){return zt(ubt,t)}const cbt=new Set([KH,z2,L2,Yb,P2,X$,W$,F2,JH,Y$]),fbt=new Set([z2,L2,KH]);function Sd(t){return Ct(t)&&_p(t)==="quantitative"&&!t.bin}function fF(t,e,{orient:n,type:i}){const r=e==="x"?"y":"radius",a=e==="x"&&["bar","area"].includes(i),o=t[e],s=t[r];if(Ct(o)&&Ct(s))if(Sd(o)&&Sd(s)){if(o.stack)return e;if(s.stack)return r;const l=Ct(o)&&!!o.aggregate,f=Ct(s)&&!!s.aggregate;if(l!==f)return l?e:r;if(a){if(n==="vertical")return r;if(n==="horizontal")return e}}else{if(Sd(o))return e;if(Sd(s))return r}else{if(Sd(o))return a&&n==="vertical"?void 0:e;if(Sd(s))return a&&n==="horizontal"?void 0:r}}function hbt(t){switch(t){case"x":return"y";case"y":return"x";case"theta":return"radius";case"radius":return"theta"}}function XG(t,e){var x,S;const n=ss(t)?t:{type:t},i=n.type;if(!cbt.has(i))return null;const r=fF(e,"x",n)||fF(e,"theta",n);if(!r)return null;const a=e[r],o=Ct(a)?Ot(a,{}):void 0,s=hbt(r),l=[],f=new Set;if(e[s]){const T=e[s],M=Ct(T)?Ot(T,{}):void 0;M&&M!==o&&(l.push(s),f.add(M))}const d=s==="x"?"xOffset":"yOffset",p=e[d],m=Ct(p)?Ot(p,{}):void 0;m&&m!==o&&(l.push(d),f.add(m));const _=_yt.reduce((T,M)=>{if(M!=="tooltip"&&Lf(e,M)){const k=e[M];for(const $ of Nt(k)){const D=fo($);if(D.aggregate)continue;const F=Ot(D,{});(!F||!f.has(F))&&T.push({channel:M,fieldDef:D})}}return T},[]);let b;return a.stack!==void 0?gc(a.stack)?b=a.stack?"zero":null:b=a.stack:fbt.has(i)&&(b="zero"),!b||!lbt(b)||TG(e)&&_.length===0?null:((x=a==null?void 0:a.scale)!=null&&x.type&&((S=a==null?void 0:a.scale)==null?void 0:S.type)!==pi.LINEAR&&a!=null&&a.stack&&Tt(P1t(a.scale.type)),ie(e[_s(r)])?(a.stack!==void 0&&Tt(F1t(r)),null):(Ct(a)&&a.aggregate&&!Dyt.has(a.aggregate)&&Tt(B1t(a.aggregate)),{groupbyChannels:l,groupbyFields:f,fieldChannel:r,impute:a.impute===null?!1:kc(i),stackBy:_,offset:b}))}function WG(t,e,n){const i=di(t),r=je("orient",i,n);if(i.orient=mbt(i.type,e,r),r!==void 0&&r!==i.orient&&Tt(x1t(i.orient,r)),i.type==="bar"&&i.orient){const l=je("cornerRadiusEnd",i,n);if(l!==void 0){const f=i.orient==="horizontal"&&e.x2||i.orient==="vertical"&&e.y2?["cornerRadius"]:Ivt[i.orient];for(const d of f)i[d]=l;i.cornerRadiusEnd!==void 0&&delete i.cornerRadiusEnd}}const a=je("opacity",i,n),o=je("fillOpacity",i,n);return a===void 0&&o===void 0&&(i.opacity=pbt(i.type,e)),je("cursor",i,n)===void 0&&(i.cursor=dbt(i,e,n)),i}function dbt(t,e,n){return e.href||t.href||je("href",t,n)?"pointer":t.cursor}function pbt(t,e){if(pe([P2,Y$,X$,W$],t)&&!TG(e))return .7}function gbt(t,e,{graticule:n}){if(n)return!1;const i=os("filled",t,e),r=t.type;return Tn(i,r!==P2&&r!==F2&&r!==Yb)}function mbt(t,e,n){switch(t){case P2:case X$:case W$:case JH:case $vt:case Ovt:return}const{x:i,y:r,x2:a,y2:o}=e;switch(t){case z2:if(Ct(i)&&(hi(i.bin)||Ct(r)&&r.aggregate&&!i.aggregate))return"vertical";if(Ct(r)&&(hi(r.bin)||Ct(i)&&i.aggregate&&!r.aggregate))return"horizontal";if(o||a){if(n)return n;if(!a)return(Ct(i)&&i.type===eh&&!Ke(i.bin)||Wb(i))&&Ct(r)&&hi(r.bin)?"horizontal":"vertical";if(!o)return(Ct(r)&&r.type===eh&&!Ke(r.bin)||Wb(r))&&Ct(i)&&hi(i.bin)?"vertical":"horizontal"}case Yb:if(a&&!(Ct(i)&&hi(i.bin))&&o&&!(Ct(r)&&hi(r.bin)))return;case L2:if(o)return Ct(r)&&hi(r.bin)?"horizontal":"vertical";if(a)return Ct(i)&&hi(i.bin)?"vertical":"horizontal";if(t===Yb){if(i&&!r)return"vertical";if(r&&!i)return"horizontal"}case F2:case Y$:{const s=iF(i),l=iF(r);if(n)return n;if(s&&!l)return t!=="tick"?"horizontal":"vertical";if(!s&&l)return t!=="tick"?"vertical":"horizontal";if(s&&l)return"vertical";{const f=ur(i)&&i.type===yp,d=ur(r)&&r.type===yp;if(f&&!d)return"vertical";if(!f&&d)return"horizontal"}return}}return"vertical"}function ybt(t){const{point:e,line:n,...i}=t;return Et(i).length>1?i:i.type}function vbt(t){for(const e of["line","area","rule","trail"])t[e]&&(t={...t,[e]:Kr(t[e],["point","line"])});return t}function MA(t,e={},n){return t.point==="transparent"?{opacity:0}:t.point?Rt(t.point)?t.point:{}:t.point!==void 0?null:e.point||n.shape?Rt(e.point)?e.point:{}:void 0}function hF(t,e={}){return t.line?t.line===!0?{}:t.line:t.line!==void 0?null:e.line?e.line===!0?{}:e.line:void 0}class _bt{constructor(){yt(this,"name","path-overlay")}hasMatchingType(e,n){if(Nu(e)){const{mark:i,encoding:r}=e,a=ss(i)?i:{type:i};switch(a.type){case"line":case"rule":case"trail":return!!MA(a,n[a.type],r);case"area":return!!MA(a,n[a.type],r)||!!hF(a,n[a.type])}}return!1}run(e,n,i){const{config:r}=n,{params:a,projection:o,mark:s,name:l,encoding:f,...d}=e,p=G2(f,r),m=ss(s)?s:{type:s},_=MA(m,r[m.type],p),b=m.type==="area"&&hF(m,r[m.type]),x=[{name:l,...a?{params:a}:{},mark:ybt({...m.type==="area"&&m.opacity===void 0&&m.fillOpacity===void 0?{opacity:.7}:{},...m}),encoding:Kr(p,["shape"])}],S=XG(WG(m,p,r),p);let T=p;if(S){const{fieldChannel:M,offset:k}=S;T={...p,[M]:{...p[M],...k?{stack:k}:{}}}}return T=Kr(T,["y2","x2"]),b&&x.push({...o?{projection:o}:{},mark:{type:"line",...dp(m,["clip","interpolate","tension","tooltip"]),...b},encoding:T}),_&&x.push({...o?{projection:o}:{},mark:{type:"point",opacity:1,filled:!0,...dp(m,["clip","tooltip"]),..._},encoding:T}),i({...d,layer:x},{...n,config:vbt(r)})}}function bbt(t,e){return e?Dy(t)?QG(t,e):VG(t,e):t}function kA(t,e){return e?QG(t,e):t}function nM(t,e,n){const i=e[t];if(n_t(i)){if(i.repeat in n)return{...e,[t]:n[i.repeat]};Tt(Kyt(i.repeat));return}return e}function VG(t,e){if(t=nM("field",t,e),t!==void 0){if(t===null)return null;if(nD(t)&&vu(t.sort)){const n=nM("field",t.sort,e);t={...t,...n?{sort:n}:{}}}return t}}function dF(t,e){if(Ct(t))return VG(t,e);{const n=nM("datum",t,e);return n!==t&&!n.type&&(n.type="nominal"),n}}function pF(t,e){if(ie(t)){const n=dF(t,e);if(n)return n;if(Ry(t))return{condition:t.condition}}else{if(Ny(t)){const n=dF(t.condition,e);if(n)return{...t,condition:n};{const{condition:i,...r}=t;return r}}return t}}function QG(t,e){const n={};for(const i in t)if(St(t,i)){const r=t[i];if(gt(r))n[i]=r.map(a=>pF(a,e)).filter(a=>a);else{const a=pF(r,e);a!==void 0&&(n[i]=a)}}return n}class xbt{constructor(){yt(this,"name","RuleForRangedLine")}hasMatchingType(e){if(Nu(e)){const{encoding:n,mark:i}=e;if(i==="line"||ss(i)&&i.type==="line")for(const r of myt){const a=yh(r),o=n[a];if(n[r]&&(Ct(o)&&!hi(o.bin)||xs(o)))return!0}}return!1}run(e,n,i){const{encoding:r,mark:a}=e;return Tt(b1t(!!r.x2,!!r.y2)),i({...e,mark:Rt(a)?{...a,type:"rule"}:"rule"},n)}}class wbt extends mD{constructor(){super(...arguments);yt(this,"nonFacetUnitNormalizers",[S_t,C_t,N_t,new _bt,new xbt])}map(n,i){if(Nu(n)){const r=Lf(n.encoding,mu),a=Lf(n.encoding,yu),o=Lf(n.encoding,S2);if(r||a||o)return this.mapFacetedUnit(n,i)}return super.map(n,i)}mapUnit(n,i){const{parentEncoding:r,parentProjection:a}=i,o=kA(n.encoding,i.repeater),s={...n,...n.name?{name:[i.repeaterPrefix,n.name].filter(f=>f).join("_")}:{},...o?{encoding:o}:{}};if(r||a)return this.mapUnitWithParentEncodingOrProjection(s,i);const l=this.mapLayerOrUnit.bind(this);for(const f of this.nonFacetUnitNormalizers)if(f.hasMatchingType(s,i.config))return f.run(s,i,l);return s}mapRepeat(n,i){return sbt(n)?this.mapLayerRepeat(n,i):this.mapNonLayerRepeat(n,i)}mapLayerRepeat(n,i){const{repeat:r,spec:a,...o}=n,{row:s,column:l,layer:f}=r,{repeater:d={},repeaterPrefix:p=""}=i;return s||l?this.mapRepeat({...n,repeat:{...s?{row:s}:{},...l?{column:l}:{}},spec:{repeat:{layer:f},spec:a}},i):{...o,layer:f.map(m=>{const _={...d,layer:m},b=`${(a.name?`${a.name}_`:"")+p}child__layer_${sn(m)}`,x=this.mapLayerOrUnit(a,{...i,repeater:_,repeaterPrefix:b});return x.name=b,x})}}mapNonLayerRepeat(n,i){const{repeat:r,spec:a,data:o,...s}=n;!gt(r)&&n.columns&&(n=Kr(n,["columns"]),Tt(Y4("repeat")));const l=[],{repeater:f={},repeaterPrefix:d=""}=i,p=!gt(r)&&r.row||[f?f.row:null],m=!gt(r)&&r.column||[f?f.column:null],_=gt(r)&&r||[f?f.repeat:null];for(const x of _)for(const S of p)for(const T of m){const M={repeat:x,row:S,column:T,layer:f.layer},k=`${(a.name?`${a.name}_`:"")+d}child__${gt(r)?`${sn(x)}`:(r.row?`row_${sn(S)}`:"")+(r.column?`column_${sn(T)}`:"")}`,$=this.map(a,{...i,repeater:M,repeaterPrefix:k});$.name=k,l.push(Kr($,["data"]))}const b=gt(r)?n.columns:r.column?r.column.length:1;return{data:a.data??o,align:"all",...s,columns:b,concat:l}}mapFacet(n,i){const{facet:r}=n;return Dy(r)&&n.columns&&(n=Kr(n,["columns"]),Tt(Y4("facet"))),super.mapFacet(n,i)}mapUnitWithParentEncodingOrProjection(n,i){const{encoding:r,projection:a}=n,{parentEncoding:o,parentProjection:s,config:l}=i,f=mF({parentProjection:s,projection:a}),d=gF({parentEncoding:o,encoding:kA(r,i.repeater)});return this.mapUnit({...n,...f?{projection:f}:{},...d?{encoding:d}:{}},{config:l})}mapFacetedUnit(n,i){const{row:r,column:a,facet:o,...s}=n.encoding,{mark:l,width:f,projection:d,height:p,view:m,params:_,encoding:b,...x}=n,{facetMapping:S,layout:T}=this.getFacetMappingAndLayout({row:r,column:a,facet:o},i),M=kA(s,i.repeater);return this.mapFacet({...x,...T,facet:S,spec:{...f?{width:f}:{},...p?{height:p}:{},...m?{view:m}:{},...d?{projection:d}:{},mark:l,encoding:M,..._?{params:_}:{}}},i)}getFacetMappingAndLayout(n,i){const{row:r,column:a,facet:o}=n;if(r||a){o&&Tt(v1t([...r?[mu]:[],...a?[yu]:[]]));const s={},l={};for(const f of[mu,yu]){const d=n[f];if(d){const{align:p,center:m,spacing:_,columns:b,...x}=d;s[f]=x;for(const S of["align","center","spacing"])d[S]!==void 0&&(l[S]??(l[S]={}),l[S][f]=d[S])}}return{facetMapping:s,layout:l}}else{const{align:s,center:l,spacing:f,columns:d,...p}=o;return{facetMapping:bbt(p,i.repeater),layout:{...s?{align:s}:{},...l?{center:l}:{},...f?{spacing:f}:{},...d?{columns:d}:{}}}}}mapLayer(n,{parentEncoding:i,parentProjection:r,...a}){const{encoding:o,projection:s,...l}=n,f={...a,parentEncoding:gF({parentEncoding:i,encoding:o,layer:!0}),parentProjection:mF({parentProjection:r,projection:s})};return super.mapLayer({...l,...n.name?{name:[f.repeaterPrefix,n.name].filter(d=>d).join("_")}:{}},f)}}function gF({parentEncoding:t,encoding:e={},layer:n}){let i={};if(t){const r=new Set([...Et(t),...Et(e)]);for(const a of r){const o=e[a],s=t[a];if(ie(o)){const l={...s,...o};i[a]=l}else Ny(o)?i[a]={...o,condition:{...s,...o.condition}}:o||o===null?i[a]=o:(n||co(s)||It(s)||ie(s)||gt(s))&&(i[a]=s)}}else i=e;return!i||Ye(i)?void 0:i}function mF(t){const{parentProjection:e,projection:n}=t;return e&&n&&Tt(s1t({parentProjection:e,projection:n})),n??e}function yD(t){return St(t,"filter")}function Ebt(t){return St(t,"stop")}function KG(t){return St(t,"lookup")}function Sbt(t){return St(t,"data")}function Abt(t){return St(t,"param")}function Tbt(t){return St(t,"pivot")}function Cbt(t){return St(t,"density")}function Mbt(t){return St(t,"quantile")}function kbt(t){return St(t,"regression")}function Obt(t){return St(t,"loess")}function $bt(t){return St(t,"sample")}function Dbt(t){return St(t,"window")}function Rbt(t){return St(t,"joinaggregate")}function Nbt(t){return St(t,"flatten")}function Lbt(t){return St(t,"calculate")}function JG(t){return St(t,"bin")}function zbt(t){return St(t,"impute")}function Fbt(t){return St(t,"timeUnit")}function Pbt(t){return St(t,"aggregate")}function Bbt(t){return St(t,"stack")}function Ubt(t){return St(t,"fold")}function Ibt(t){return St(t,"extent")&&!St(t,"density")&&!St(t,"regression")}function qbt(t){return t.map(e=>yD(e)?{filter:Id(e.filter,dvt)}:e)}class jbt extends mD{map(e,n){return n.emptySelections??(n.emptySelections={}),n.selectionPredicates??(n.selectionPredicates={}),e=yF(e,n),super.map(e,n)}mapLayerOrUnit(e,n){if(e=yF(e,n),e.encoding){const i={};for(const[r,a]of cc(e.encoding))i[r]=tZ(a,n);e={...e,encoding:i}}return super.mapLayerOrUnit(e,n)}mapUnit(e,n){const{selection:i,...r}=e;return i?{...r,params:cc(i).map(([a,o])=>{const{init:s,bind:l,empty:f,...d}=o;d.type==="single"?(d.type="point",d.toggle=!1):d.type==="multi"&&(d.type="point"),n.emptySelections[a]=f!=="none";for(const p of Rn(n.selectionPredicates[a]??{}))p.empty=f!=="none";return{name:a,value:s,select:d,bind:l}})}:e}}function yF(t,e){const{transform:n,...i}=t;if(n){const r=n.map(a=>{if(yD(a))return{filter:iM(a,e)};if(JG(a)&&vh(a.bin))return{...a,bin:eZ(a.bin)};if(KG(a)){const{selection:o,...s}=a.from;return o?{...a,from:{param:o,...s}}:a}return a});return{...i,transform:r}}return t}function tZ(t,e){var i,r;const n=ee(t);if(Ct(n)&&vh(n.bin)&&(n.bin=eZ(n.bin)),wh(n)&&((r=(i=n.scale)==null?void 0:i.domain)!=null&&r.selection)){const{selection:a,...o}=n.scale.domain;n.scale.domain={...o,...a?{param:a}:{}}}if(Ry(n))if(gt(n.condition))n.condition=n.condition.map(a=>{const{selection:o,param:s,test:l,...f}=a;return s?a:{...f,test:iM(a,e)}});else{const{selection:a,param:o,test:s,...l}=tZ(n.condition,e);n.condition=o?n.condition:{...l,test:iM(n.condition,e)}}return n}function eZ(t){const e=t.extent;if(e!=null&&e.selection){const{selection:n,...i}=e;return{...t,extent:{...i,param:n}}}return t}function iM(t,e){const n=i=>Id(i,r=>{var s;const a=e.emptySelections[r]??!0,o={param:r,empty:a};return(s=e.selectionPredicates)[r]??(s[r]=[]),e.selectionPredicates[r].push(o),o});return t.selection?n(t.selection):Id(t.test||t.filter,i=>i.selection?n(i.selection):i)}class rM extends mD{map(e,n){const i=n.selections??[];if(e.params&&!Nu(e)){const r=[];for(const a of e.params)dD(a)?i.push(a):r.push(a);e.params=r}return n.selections=i,super.map(e,n)}mapUnit(e,n){const i=n.selections;if(!i||!i.length)return e;const r=(n.path??[]).concat(e.name),a=[];for(const o of i)if(!o.views||!o.views.length)a.push(o);else for(const s of o.views)(Dt(s)&&(s===e.name||r.includes(s))||gt(s)&&s.map(l=>r.indexOf(l)).every((l,f,d)=>l!==-1&&(f===0||l>d[f-1])))&&a.push(o);return a.length&&(e.params=a),e}}for(const t of["mapFacet","mapRepeat","mapHConcat","mapVConcat","mapLayer"]){const e=rM.prototype[t];rM.prototype[t]=function(n,i){return e.call(this,n,Hbt(n,i))}}function Hbt(t,e){return t.name?{...e,path:(e.path??[]).concat(t.name)}:e}function nZ(t,e){e===void 0&&(e=YG(t.config));const n=Xbt(t,e),{width:i,height:r}=t,a=Wbt(n,{width:i,height:r,autosize:t.autosize},e);return{...n,...a?{autosize:a}:{}}}const Gbt=new wbt,Zbt=new jbt,Ybt=new rM;function Xbt(t,e={}){const n={config:e};return Ybt.map(Gbt.map(Zbt.map(t,n),n),n)}function vF(t){return Dt(t)?{type:t}:t??{}}function Wbt(t,e,n){let{width:i,height:r}=e;const a=Nu(t)||Y2(t),o={};a?i=="container"&&r=="container"?(o.type="fit",o.contains="padding"):i=="container"?(o.type="fit-x",o.contains="padding"):r=="container"&&(o.type="fit-y",o.contains="padding"):(i=="container"&&(Tt(j4("width")),i=void 0),r=="container"&&(Tt(j4("height")),r=void 0));const s={type:"pad",...o,...n?vF(n.autosize):{},...vF(t.autosize)};if(s.type==="fit"&&!a&&(Tt(Iyt),s.type="pad"),i=="container"&&!(s.type=="fit"||s.type=="fit-x")&&Tt(H4("width")),r=="container"&&!(s.type=="fit"||s.type=="fit-y")&&Tt(H4("height")),!Xr(s,{type:"pad"}))return s}function Vbt(t){return["fit","fit-x","fit-y"].includes(t)}function Qbt(t){return t?`fit-${k2(t)}`:"fit"}const Kbt=["background","padding"];function _F(t,e){const n={};for(const i of Kbt)t&&t[i]!==void 0&&(n[i]=Zr(t[i]));return e&&(n.params=t.params),n}class Lu{constructor(e={},n={}){yt(this,"explicit");yt(this,"implicit");this.explicit=e,this.implicit=n}clone(){return new Lu(ee(this.explicit),ee(this.implicit))}combine(){return{...this.explicit,...this.implicit}}get(e){return Tn(this.explicit[e],this.implicit[e])}getWithExplicit(e){return this.explicit[e]!==void 0?{explicit:!0,value:this.explicit[e]}:this.implicit[e]!==void 0?{explicit:!1,value:this.implicit[e]}:{explicit:!1,value:void 0}}setWithExplicit(e,{value:n,explicit:i}){n!==void 0&&this.set(e,n,i)}set(e,n,i){return delete this[i?"implicit":"explicit"][e],this[i?"explicit":"implicit"][e]=n,this}copyKeyFromSplit(e,{explicit:n,implicit:i}){n[e]!==void 0?this.set(e,n[e],!0):i[e]!==void 0&&this.set(e,i[e],!1)}copyKeyFromObject(e,n){n[e]!==void 0&&this.set(e,n[e],!0)}copyAll(e){for(const n of Et(e.combine())){const i=e.getWithExplicit(n);this.setWithExplicit(n,i)}}}function Io(t){return{explicit:!0,value:t}}function jr(t){return{explicit:!1,value:t}}function iZ(t){return(e,n,i,r)=>{const a=t(e.value,n.value);return a>0?e:a<0?n:X2(e,n,i,r)}}function X2(t,e,n,i){return t.explicit&&e.explicit&&Tt(O1t(n,i,t.value,e.value)),t}function dc(t,e,n,i,r=X2){return t===void 0||t.value===void 0?e:t.explicit&&!e.explicit?t:e.explicit&&!t.explicit?e:Xr(t.value,e.value)?t:r(t,e,n,i)}class Jbt extends Lu{constructor(n={},i={},r=!1){super(n,i);yt(this,"explicit");yt(this,"implicit");yt(this,"parseNothing");this.explicit=n,this.implicit=i,this.parseNothing=r}clone(){const n=super.clone();return n.parseNothing=this.parseNothing,n}}function wp(t){return St(t,"url")}function j0(t){return St(t,"values")}function rZ(t){return St(t,"name")&&!wp(t)&&!j0(t)&&!Jl(t)}function Jl(t){return t&&(aZ(t)||oZ(t)||vD(t))}function aZ(t){return St(t,"sequence")}function oZ(t){return St(t,"sphere")}function vD(t){return St(t,"graticule")}var gn;(function(t){t[t.Raw=0]="Raw",t[t.Main=1]="Main",t[t.Row=2]="Row",t[t.Column=3]="Column",t[t.Lookup=4]="Lookup",t[t.PreFilterInvalid=5]="PreFilterInvalid",t[t.PostFilterInvalid=6]="PostFilterInvalid"})(gn||(gn={}));function sZ({invalid:t,isPath:e}){switch(nG(t,{isPath:e})){case"filter":return{marks:"exclude-invalid-values",scales:"exclude-invalid-values"};case"break-paths-show-domains":return{marks:e?"include-invalid-values":"exclude-invalid-values",scales:"include-invalid-values"};case"break-paths-filter-domains":return{marks:e?"include-invalid-values":"exclude-invalid-values",scales:"exclude-invalid-values"};case"show":return{marks:"include-invalid-values",scales:"include-invalid-values"}}}function txt(t){const{marks:e,scales:n}=sZ(t);return e===n?gn.Main:n==="include-invalid-values"?gn.PreFilterInvalid:gn.PostFilterInvalid}class Be{constructor(e,n){yt(this,"debugName");yt(this,"_children",[]);yt(this,"_parent",null);yt(this,"_hash");this.debugName=n,e&&(this.parent=e)}clone(){throw new Error("Cannot clone node")}get parent(){return this._parent}set parent(e){this._parent=e,e&&e.addChild(this)}get children(){return this._children}numChildren(){return this._children.length}addChild(e,n){if(this._children.includes(e)){Tt(r1t);return}n!==void 0?this._children.splice(n,0,e):this._children.push(e)}removeChild(e){const n=this._children.indexOf(e);return this._children.splice(n,1),n}remove(){let e=this._parent.removeChild(this);for(const n of this._children)n._parent=this._parent,this._parent.addChild(n,e++)}insertAsParentOf(e){const n=e.parent;n.removeChild(this),this.parent=n,e.parent=this}swapWithParent(){const e=this._parent,n=e.parent;for(const r of this._children)r.parent=e;this._children=[],e.removeChild(this);const i=e.parent.removeChild(e);this._parent=n,n.addChild(this,i),e.parent=this}}class wr extends Be{constructor(n,i,r,a){super(n,i);yt(this,"type");yt(this,"refCounts");yt(this,"_source");yt(this,"_name");this.type=r,this.refCounts=a,this._source=this._name=i,this.refCounts&&!(this._name in this.refCounts)&&(this.refCounts[this._name]=0)}clone(){const n=new this.constructor;return n.debugName=`clone_${this.debugName}`,n._source=this._source,n._name=`clone_${this._name}`,n.type=this.type,n.refCounts=this.refCounts,n.refCounts[n._name]=0,n}dependentFields(){return new Set}producedFields(){return new Set}hash(){return this._hash===void 0&&(this._hash=`Output ${iH()}`),this._hash}getSource(){return this.refCounts[this._name]++,this._source}isRequired(){return!!this.refCounts[this._name]}setSource(n){this._source=n}}function OA(t){return t.as!==void 0}function bF(t){return`${t}_end`}class Qo extends Be{constructor(n,i){super(n);yt(this,"timeUnits");this.timeUnits=i}clone(){return new Qo(null,ee(this.timeUnits))}static makeFromEncoding(n,i){const r=i.reduceFieldDef((a,o,s)=>{const{field:l,timeUnit:f}=o;if(f){let d;if(xh(f)){if(pn(i)){const{mark:p,markDef:m,config:_}=i,b=hc({fieldDef:o,markDef:m,config:_});(q0(p)||b)&&(d={timeUnit:ni(f),field:l})}}else d={as:Ot(o,{forAs:!0}),field:l,timeUnit:f};if(pn(i)){const{mark:p,markDef:m,config:_}=i,b=hc({fieldDef:o,markDef:m,config:_});q0(p)&&Cn(s)&&b!==.5&&(d.rectBandPosition=b)}d&&(a[ye(d)]=d)}return a},{});return Ye(r)?null:new Qo(n,r)}static makeFromTransform(n,i){const{timeUnit:r,...a}={...i},o=ni(r),s={...a,timeUnit:o};return new Qo(n,{[ye(s)]:s})}merge(n){this.timeUnits={...this.timeUnits};for(const i in n.timeUnits)this.timeUnits[i]||(this.timeUnits[i]=n.timeUnits[i]);for(const i of n.children)n.removeChild(i),i.parent=this;n.remove()}removeFormulas(n){const i={};for(const[r,a]of cc(this.timeUnits)){const o=OA(a)?a.as:`${a.field}_end`;n.has(o)||(i[r]=a)}this.timeUnits=i}producedFields(){return new Set(Rn(this.timeUnits).map(n=>OA(n)?n.as:bF(n.field)))}dependentFields(){return new Set(Rn(this.timeUnits).map(n=>n.field))}hash(){return`TimeUnit ${ye(this.timeUnits)}`}assemble(){const n=[];for(const i of Rn(this.timeUnits)){const{rectBandPosition:r}=i,a=ni(i.timeUnit);if(OA(i)){const{field:o,as:s}=i,{unit:l,utc:f,...d}=a,p=[s,`${s}_end`];n.push({field:Oa(o),type:"timeunit",...l?{units:R2(l)}:{},...f?{timezone:"utc"}:{},...d,as:p}),n.push(...xF(p,r,a))}else if(i){const{field:o}=i,s=o.replaceAll("\\.","."),l=uZ({timeUnit:a,field:s}),f=bF(s);n.push({type:"formula",expr:l,as:f}),n.push(...xF([s,f],r,a))}}return n}}const W2="offsetted_rect_start",V2="offsetted_rect_end";function uZ({timeUnit:t,field:e,reverse:n}){const{unit:i,utc:r}=t,a=PH(i),{part:o,step:s}=qH(a,t.step);return`${r?"utcOffset":"timeOffset"}('${o}', ${Fe(e)}, ${n?-s:s})`}function xF([t,e],n,i){if(n!==void 0&&n!==.5){const r=Fe(t),a=Fe(e);return[{type:"formula",expr:wF([uZ({timeUnit:i,field:t,reverse:!0}),r],n+.5),as:`${t}_${W2}`},{type:"formula",expr:wF([r,a],n+.5),as:`${t}_${V2}`}]}return[]}function wF([t,e],n){return`${1-n} * ${t} + ${n} * ${e}`}const Fy="_tuple_fields";class ext{constructor(...e){yt(this,"hasChannel");yt(this,"hasField");yt(this,"hasSelectionId");yt(this,"timeUnit");yt(this,"items");this.items=e,this.hasChannel={},this.hasField={},this.hasSelectionId=!1}}const nxt={defined:()=>!0,parse:(t,e,n)=>{const i=e.name,r=e.project??(e.project=new ext),a={},o={},s=new Set,l=(b,x)=>{const S=x==="visual"?b.channel:b.field;let T=sn(`${i}_${S}`);for(let M=1;s.has(T);M++)T=sn(`${i}_${S}_${M}`);return s.add(T),{[x]:T}},f=e.type,d=t.config.selection[f],p=n.value!==void 0?Nt(n.value):null;let{fields:m,encodings:_}=Rt(n.select)?n.select:{};if(!m&&!_&&p){for(const b of p)if(Rt(b))for(const x of Et(b))gyt(x)?(_||(_=[])).push(x):f==="interval"?(Tt(Qyt),_=d.encodings):(m??(m=[])).push(x)}!m&&!_&&(_=d.encodings,"fields"in d&&(m=d.fields));for(const b of _??[]){const x=t.fieldDef(b);if(x){let S=x.field;if(x.aggregate){Tt(qyt(b,x.aggregate));continue}else if(!S){Tt(Z4(b));continue}if(x.timeUnit&&!xh(x.timeUnit)){S=t.vgField(b);const T={timeUnit:x.timeUnit,as:S,field:x.field};o[ye(T)]=T}if(!a[S]){const T=f==="interval"&&bs(b)&&lo(t.getScaleComponent(b).get("type"))?"R":x.bin?"R-RE":"E",M={field:S,channel:b,type:T,index:r.items.length};M.signals={...l(M,"data"),...l(M,"visual")},r.items.push(a[S]=M),r.hasField[S]=a[S],r.hasSelectionId=r.hasSelectionId||S===ho,lH(b)?(M.geoChannel=b,M.channel=uH(b),r.hasChannel[M.channel]=a[S]):r.hasChannel[b]=a[S]}}else Tt(Z4(b))}for(const b of m??[]){if(r.hasField[b])continue;const x={type:"E",field:b,index:r.items.length};x.signals={...l(x,"data")},r.items.push(x),r.hasField[b]=x,r.hasSelectionId=r.hasSelectionId||b===ho}p&&(e.init=p.map(b=>r.items.map(x=>Rt(b)?b[x.geoChannel||x.channel]!==void 0?b[x.geoChannel||x.channel]:b[x.field]:b))),Ye(o)||(r.timeUnit=new Qo(null,o))},signals:(t,e,n)=>{const i=e.name+Fy;return n.filter(a=>a.name===i).length>0||e.project.hasSelectionId?n:n.concat({name:i,value:e.project.items.map(hZ)})}},lZ="_curr",M_="anim_value",Md="anim_clock",aM="eased_anim_clock",cZ="min_extent",fZ="max_range_extent",$A="last_tick_at",DA="is_playing",ixt=1/60*1e3,rxt=(t,e)=>[{name:aM,update:Md},{name:`${t}_domain`,init:`domain('${e}')`},{name:cZ,init:`extent(${t}_domain)[0]`},{name:fZ,init:`extent(range('${e}'))[1]`},{name:M_,update:`invert('${e}', ${aM})`}],axt={defined:t=>t.type==="point",topLevelSignals:(t,e,n)=>(Ko(e)&&(n=n.concat([{name:Md,init:"0",on:[{events:{type:"timer",throttle:ixt},update:`${DA} ? (${Md} + (now() - ${$A}) > ${fZ} ? 0 : ${Md} + (now() - ${$A})) : ${Md}`}]},{name:$A,init:"now()",on:[{events:[{signal:Md},{signal:DA}],update:"now()"}]},{name:DA,init:"true"}])),n),signals:(t,e,n)=>{const i=e.name,r=i+Fy,a=e.project,o="(item().isVoronoi ? datum.datum : datum)",s=Rn(t.component.selection??{}).reduce((d,p)=>p.type==="interval"?d.concat(p.name+Hd):d,[]).map(d=>`indexof(item().mark.name, '${d}') < 0`).join(" && "),l=`datum && item().mark.marktype !== 'group' && indexof(item().mark.role, 'legend') < 0${s?` && ${s}`:""}`;let f=`unit: ${zf(t)}, `;if(e.project.hasSelectionId)f+=`${ho}: ${o}[${Mt(ho)}]`;else if(Ko(e))f+=`fields: ${r}, values: [${M_} ? ${M_} : ${cZ}]`;else{const d=a.items.map(p=>{const m=t.fieldDef(p.channel);return m!=null&&m.bin?`[${o}[${Mt(t.vgField(p.channel,{}))}], ${o}[${Mt(t.vgField(p.channel,{binSuffix:"end"}))}]]`:`${o}[${Mt(p.field)}]`}).join(", ");f+=`fields: ${r}, values: [${d}]`}if(Ko(e))return n.concat(rxt(e.name,t.scaleName(Ec)),[{name:i+Tu,on:[{events:[{signal:aM},{signal:M_}],update:`{${f}}`,force:!0}]}]);{const d=e.events;return n.concat([{name:i+Tu,on:d?[{events:d,update:`${l} ? {${f}} : null`,force:!0}]:[]}])}}};function hZ(t){const{signals:e,hasLegend:n,index:i,...r}=t;return r.field=Oa(r.field),r}function rh(t,e=!0,n=Bi){if(gt(t)){const i=t.map(r=>rh(r,e,n));return e?`[${i.join(", ")}]`:i}else if(bh(t))return n(e?th(t):evt(t));return e?n(Ne(t)):t}function oxt(t,e){for(const n of Rn(t.component.selection??{})){const i=n.name;let r=`${i}${Tu}, ${n.resolve==="global"?"true":`{unit: ${zf(t)}}`}`;for(const a of K2)a.defined(n)&&(a.signals&&(e=a.signals(t,n,e)),a.modifyExpr&&(r=a.modifyExpr(t,n,r)));e.push({name:i+Rxt,on:[{events:{signal:n.name+Tu},update:`modify(${Mt(n.name+ah)}, ${r})`}]})}return _D(e)}function sxt(t,e){if(t.component.selection&&Et(t.component.selection).length){const n=Mt(t.getName("cell"));e.unshift({name:"facet",value:{},on:[{events:xc("pointermove","scope"),update:`isTuple(facet) ? facet : group(${n}).datum`}]})}return _D(e)}function uxt(t,e){let n=!1;for(const i of Rn(t.component.selection??{})){const r=i.name,a=Mt(r+ah);if(e.filter(s=>s.name===r).length===0){const s=i.resolve==="global"?"union":i.resolve,l=i.type==="point"?", true, true)":")";e.push({name:i.name,update:`${kZ}(${a}, ${Mt(s)}${l}`})}n=!0;for(const s of K2)s.defined(i)&&s.topLevelSignals&&(e=s.topLevelSignals(t,i,e))}return n&&e.filter(r=>r.name==="unit").length===0&&e.unshift({name:"unit",value:{},on:[{events:"pointermove",update:"isTuple(group()) ? group() : unit"}]}),_D(e)}function lxt(t,e){const n=[],i=[],r=zf(t,{escape:!1});for(const a of Rn(t.component.selection??{})){const o={name:a.name+ah};if(a.project.hasSelectionId&&(o.transform=[{type:"collect",sort:{field:ho}}]),a.init){const l=a.project.items.map(hZ);o.values=a.project.hasSelectionId?a.init.map(f=>({unit:r,[ho]:rh(f,!1)[0]})):a.init.map(f=>({unit:r,fields:l,values:rh(f,!1)}))}if([...n,...e].filter(l=>l.name===a.name+ah).length||n.push(o),Ko(a)&&e.length){const l=t.lookupDataSource(t.getDataName(gn.Main)),f=e.find(p=>p.name===l),d=f.transform.find(p=>p.type==="filter"&&p.expr.includes("vlSelectionTest"));if(d){f.transform=f.transform.filter(m=>m!==d);const p={name:f.name+lZ,source:f.name,transform:[d]};i.push(p)}}}return n.concat(e,i)}function dZ(t,e){for(const n of Rn(t.component.selection??{}))for(const i of K2)i.defined(n)&&i.marks&&(e=i.marks(t,n,e));return e}function cxt(t,e){for(const n of t.children)pn(n)&&(e=dZ(n,e));return e}function fxt(t,e,n,i){const r=NZ(t,e.param,e);return{signal:lo(n.get("type"))&&gt(i)&&i[0]>i[1]?`isValid(${r}) && reverse(${r})`:r}}function _D(t){return t.map(e=>(e.on&&!e.on.length&&delete e.on,e))}const _u={defined:t=>t.type==="interval"&&t.resolve==="global"&&t.bind&&t.bind==="scales",parse:(t,e)=>{const n=e.scales=[];for(const i of e.project.items){const r=i.channel;if(!bs(r))continue;const a=t.getScaleComponent(r),o=a?a.get("type"):void 0;if(o=="sequential"&&Tt(Zyt),!a||!lo(o)){Tt(Gyt);continue}a.set("selectionExtent",{param:e.name,field:i.field},!0),n.push(i)}},topLevelSignals:(t,e,n)=>{const i=e.scales.filter(o=>n.filter(s=>s.name===o.signals.data).length===0);if(!t.parent||sM(t)||i.length===0)return n;const r=n.find(o=>o.name===e.name);let a=r.update;if(a.includes(kZ))r.update=`{${i.map(o=>`${Mt(Oa(o.field))}: ${o.signals.data}`).join(", ")}}`;else{for(const o of i){const s=`${Mt(Oa(o.field))}: ${o.signals.data}`;a.includes(s)||(a=`${a.substring(0,a.length-1)}, ${s}}`)}r.update=a}return n.concat(i.map(o=>({name:o.signals.data})))},signals:(t,e,n)=>{if(t.parent&&!sM(t))for(const i of e.scales){const r=n.find(a=>a.name===i.signals.data);r.push="outer",delete r.value,delete r.update}return n}};function oM(t,e){return`domain(${Mt(t.scaleName(e))})`}function sM(t){return t.parent&&Jp(t.parent)&&(!t.parent.parent||sM(t.parent.parent))}const Hd="_brush",pZ="_scale_trigger",Tm="geo_interval_init_tick",gZ="_init",hxt="_center",dxt={defined:t=>t.type==="interval",parse:(t,e,n)=>{var i;if(t.hasProjection){const r={...Rt(n.select)?n.select:{}};r.fields=[ho],r.encodings||(r.encodings=n.value?Et(n.value):[bo,_o]),n.select={type:"interval",...r}}if(e.translate&&!_u.defined(e)){const r=`!event.item || event.item.mark.name !== ${Mt(e.name+Hd)}`;for(const a of e.events){if(!a.between){Tt(`${a} is not an ordered event stream for interval selections.`);continue}const o=Nt((i=a.between[0]).filter??(i.filter=[]));o.includes(r)||o.push(r)}}},signals:(t,e,n)=>{const i=e.name,r=i+Tu,a=Rn(e.project.hasChannel).filter(s=>s.channel===un||s.channel===ai),o=e.init?e.init[0]:null;if(n.push(...a.reduce((s,l)=>s.concat(pxt(t,e,l,o==null?void 0:o[l.index])),[])),t.hasProjection){const s=Mt(t.projectionName()),l=t.projectionName()+hxt,{x:f,y:d}=e.project.hasChannel,p=f==null?void 0:f.signals.visual,m=d==null?void 0:d.signals.visual,_=f?o==null?void 0:o[f.index]:`${l}[0]`,b=d?o==null?void 0:o[d.index]:`${l}[1]`,x=D=>t.getSizeSignalRef(D).signal,S=`[[${p?`${p}[0]`:"0"}, ${m?`${m}[0]`:"0"}],[${p?`${p}[1]`:x("width")}, ${m?`${m}[1]`:x("height")}]]`;o&&(n.unshift({name:i+gZ,init:`[scale(${s}, [${f?_[0]:_}, ${d?b[0]:b}]), scale(${s}, [${f?_[1]:_}, ${d?b[1]:b}])]`}),(!f||!d)&&(n.find(F=>F.name===l)||n.unshift({name:l,update:`invert(${s}, [${x("width")}/2, ${x("height")}/2])`})));const T=`intersect(${S}, {markname: ${Mt(t.getName("marks"))}}, unit.mark)`,M=`{unit: ${zf(t)}}`,k=`vlSelectionTuples(${T}, ${M})`,$=a.map(D=>D.signals.visual);return n.concat({name:r,on:[{events:[...$.length?[{signal:$.join(" || ")}]:[],...o?[{signal:Tm}]:[]],update:k}]})}else{if(!_u.defined(e)){const f=i+pZ,d=a.map(p=>{const m=p.channel,{data:_,visual:b}=p.signals,x=Mt(t.scaleName(m)),S=t.getScaleComponent(m).get("type"),T=lo(S)?"+":"";return`(!isArray(${_}) || (${T}invert(${x}, ${b})[0] === ${T}${_}[0] && ${T}invert(${x}, ${b})[1] === ${T}${_}[1]))`});d.length&&n.push({name:f,value:{},on:[{events:a.map(p=>({scale:t.scaleName(p.channel)})),update:`${d.join(" && ")} ? ${f} : {}`}]})}const s=a.map(f=>f.signals.data),l=`unit: ${zf(t)}, fields: ${i+Fy}, values`;return n.concat({name:r,...o?{init:`{${l}: ${rh(o)}}`}:{},...s.length?{on:[{events:[{signal:s.join(" || ")}],update:`${s.join(" && ")} ? {${l}: [${s}]} : null`}]}:{}})}},topLevelSignals:(t,e,n)=>(pn(t)&&t.hasProjection&&e.init&&(n.filter(r=>r.name===Tm).length||n.unshift({name:Tm,value:null,on:[{events:"timer{1}",update:`${Tm} === null ? {} : ${Tm}`}]})),n),marks:(t,e,n)=>{const i=e.name,{x:r,y:a}=e.project.hasChannel,o=r==null?void 0:r.signals.visual,s=a==null?void 0:a.signals.visual,l=`data(${Mt(e.name+ah)})`;if(_u.defined(e)||!r&&!a)return n;const f={x:r!==void 0?{signal:`${o}[0]`}:{value:0},y:a!==void 0?{signal:`${s}[0]`}:{value:0},x2:r!==void 0?{signal:`${o}[1]`}:{field:{group:"width"}},y2:a!==void 0?{signal:`${s}[1]`}:{field:{group:"height"}}};if(e.resolve==="global")for(const S of Et(f))f[S]=[{test:`${l}.length && ${l}[0].unit === ${zf(t)}`,...f[S]},{value:0}];const{fill:d,fillOpacity:p,cursor:m,..._}=e.mark,b=Et(_).reduce((S,T)=>(S[T]=[{test:[r!==void 0&&`${o}[0] !== ${o}[1]`,a!==void 0&&`${s}[0] !== ${s}[1]`].filter(M=>M).join(" && "),value:_[T]},{value:null}],S),{}),x=m??(e.translate?"move":null);return[{name:`${i+Hd}_bg`,type:"rect",clip:!0,encode:{enter:{fill:{value:d},fillOpacity:{value:p}},update:f}},...n,{name:i+Hd,type:"rect",clip:!0,encode:{enter:{...x?{cursor:{value:x}}:{},fill:{value:"transparent"}},update:{...f,...b}}}]}};function pxt(t,e,n,i){const r=!t.hasProjection,a=n.channel,o=n.signals.visual,s=Mt(r?t.scaleName(a):t.projectionName()),l=m=>`scale(${s}, ${m})`,f=t.getSizeSignalRef(a===un?"width":"height").signal,d=`${a}(unit)`,p=e.events.reduce((m,_)=>[...m,{events:_.between[0],update:`[${d}, ${d}]`},{events:_,update:`[${o}[0], clamp(${d}, 0, ${f})]`}],[]);if(r){const m=n.signals.data,_=_u.defined(e),b=t.getScaleComponent(a),x=b?b.get("type"):void 0,S=i?{init:rh(i,!0,l)}:{value:[]};return p.push({events:{signal:e.name+pZ},update:lo(x)?`[${l(`${m}[0]`)}, ${l(`${m}[1]`)}]`:"[0, 0]"}),_?[{name:m,on:[]}]:[{name:o,...S,on:p},{name:m,...i?{init:rh(i)}:{},on:[{events:{signal:o},update:`${o}[0] === ${o}[1] ? null : invert(${s}, ${o})`}]}]}else{const m=a===un?0:1,_=e.name+gZ,b=i?{init:`[${_}[0][${m}], ${_}[1][${m}]]`}:{value:[]};return[{name:o,...b,on:p}]}}function Wp({model:t,channelDef:e,vgChannel:n,invalidValueRef:i,mainRefFn:r}){const a=Ry(e)&&e.condition;let o=[];a&&(o=Nt(a).map(f=>{const d=r(f);if(e_t(f)){const{param:p,empty:m}=f;return{test:RZ(t,{param:p,empty:m}),...d}}else return{test:ix(t,f.test),...d}})),i!==void 0&&o.push(i);const s=r(e);return s!==void 0&&o.push(s),o.length>1||o.length===1&&o[0].test?{[n]:o}:o.length===1?{[n]:o[0]}:{}}function bD(t,e="text"){const n=t.encoding[e];return Wp({model:t,channelDef:n,vgChannel:e,mainRefFn:i=>Q2(i,t.config),invalidValueRef:void 0})}function Q2(t,e,n="datum"){if(t){if(co(t))return en(t.value);if(ie(t)){const{format:i,formatType:r}=Qb(t);return tD({fieldOrDatumDef:t,format:i,formatType:r,expr:n,config:e})}}}function mZ(t,e={}){const{encoding:n,markDef:i,config:r,stack:a}=t,o=n.tooltip;if(gt(o))return{tooltip:EF({tooltip:o},a,r,e)};{const s=e.reactiveGeom?"datum.datum":"datum";return Wp({model:t,channelDef:o,vgChannel:"tooltip",mainRefFn:f=>{const d=Q2(f,r,s);if(d)return d;if(f===null)return;let p=je("tooltip",i,r);if(p===!0&&(p={content:"encoding"}),Dt(p))return{value:p};if(Rt(p))return It(p)?p:p.content==="encoding"?EF(n,a,r,e):{signal:s}},invalidValueRef:void 0})}}function yZ(t,e,n,{reactiveGeom:i}={}){const r={...n,...n.tooltipFormat},a=new Set,o=i?"datum.datum":"datum",s=[];function l(d,p){const m=yh(p),_=ur(d)?d:{...d,type:t[m].type},b=_.title||rD(_,r),x=Nt(b).join(", ").replaceAll(/"/g,'\\"');let S;if(Cn(p)){const T=p==="x"?"x2":"y2",M=fo(t[T]);if(hi(_.bin)&&M){const k=Ot(_,{expr:o}),$=Ot(M,{expr:o}),{format:D,formatType:F}=Qb(_);S=$y(k,$,D,F,r),a.add(T)}}if((Cn(p)||p===Ra||p===vo)&&e&&e.fieldChannel===p&&e.offset==="normalize"){const{format:T,formatType:M}=Qb(_);S=tD({fieldOrDatumDef:_,format:T,formatType:M,expr:o,config:r,normalizeStack:!0}).signal}S??(S=Q2(_,r,o).signal),s.push({channel:p,key:x,value:S})}oD(t,(d,p)=>{Ct(d)?l(d,p):I2(d)&&l(d.condition,p)});const f={};for(const{channel:d,key:p,value:m}of s)!a.has(d)&&!f[p]&&(f[p]=m);return f}function EF(t,e,n,{reactiveGeom:i}={}){const r=yZ(t,e,n,{reactiveGeom:i}),a=cc(r).map(([o,s])=>`"${o}": ${s}`);return a.length>0?{signal:`{${a.join(", ")}}`}:void 0}function gxt(t){const{markDef:e,config:n}=t,i=je("aria",e,n);return i===!1?{}:{...i?{aria:i}:{},...mxt(t),...yxt(t)}}function mxt(t){const{mark:e,markDef:n,config:i}=t;if(i.aria===!1)return{};const r=je("ariaRoleDescription",n,i);return r!=null?{ariaRoleDescription:{value:r}}:zt(Pyt,e)?{}:{ariaRoleDescription:{value:e}}}function yxt(t){const{encoding:e,markDef:n,config:i,stack:r}=t,a=e.description;if(a)return Wp({model:t,channelDef:a,vgChannel:"description",mainRefFn:l=>Q2(l,t.config),invalidValueRef:void 0});const o=je("description",n,i);if(o!=null)return{description:en(o)};if(i.aria===!1)return{};const s=yZ(e,r,i);if(!Ye(s))return{description:{signal:cc(s).map(([l,f],d)=>`"${d>0?"; ":""}${l}: " + (${f})`).join(" + ")}}}function gi(t,e,n={}){const{markDef:i,encoding:r,config:a}=e,{vgChannel:o}=n;let{defaultRef:s,defaultValue:l}=n;const f=r[t];s===void 0&&(l??(l=je(t,i,a,{vgChannel:o,ignoreVgConfig:!Ry(f)})),l!==void 0&&(s=en(l)));const d={markDef:i,config:a,scaleName:e.scaleName(t),scale:e.getScaleComponent(t)},p=rG({...d,scaleChannel:t,channelDef:f});return Wp({model:e,channelDef:f,vgChannel:o??t,invalidValueRef:p,mainRefFn:_=>J$({...d,channel:t,channelDef:_,stack:null,defaultRef:s})})}function vZ(t,e={filled:void 0}){const{markDef:n,encoding:i,config:r}=t,{type:a}=n,o=e.filled??je("filled",n,r),s=pe(["bar","point","circle","square","geoshape"],a)?"transparent":void 0,l=je(o===!0?"color":void 0,n,r,{vgChannel:"fill"})??r.mark[o===!0&&"color"]??s,f=je(o===!1?"color":void 0,n,r,{vgChannel:"stroke"})??r.mark[o===!1&&"color"],d=o?"fill":"stroke",p={...l?{fill:en(l)}:{},...f?{stroke:en(f)}:{}};return n.color&&(o?n.fill:n.stroke)&&Tt(kH("property",{fill:"fill"in n,stroke:"stroke"in n})),{...p,...gi("color",t,{vgChannel:d,defaultValue:o?l:f}),...gi("fill",t,{defaultValue:i.fill?l:void 0}),...gi("stroke",t,{defaultValue:i.stroke?f:void 0})}}function vxt(t){const{encoding:e,mark:n}=t,i=e.order;return!kc(n)&&co(i)?Wp({model:t,channelDef:i,vgChannel:"zindex",mainRefFn:r=>en(r.value),invalidValueRef:void 0}):{}}function Ep({channel:t,markDef:e,encoding:n={},model:i,bandPosition:r}){const a=`${t}Offset`,o=e[a],s=n[a];if((a==="xOffset"||a==="yOffset")&&s)return{offsetType:"encoding",offset:J$({channel:a,channelDef:s,markDef:e,config:i==null?void 0:i.config,scaleName:i.scaleName(a),scale:i.getScaleComponent(a),stack:null,defaultRef:en(o),bandPosition:r})};const l=e[a];return l?{offsetType:"visual",offset:l}:{}}function ir(t,e,{defaultPos:n,vgChannel:i}){const{encoding:r,markDef:a,config:o,stack:s}=e,l=r[t],f=r[_s(t)],d=e.scaleName(t),p=e.getScaleComponent(t),{offset:m,offsetType:_}=Ep({channel:t,markDef:a,encoding:r,model:e,bandPosition:.5}),b=xD({model:e,defaultPos:n,channel:t,scaleName:d,scale:p}),x=!l&&Cn(t)&&(r.latitude||r.longitude)?{field:e.getName(t)}:_xt({channel:t,channelDef:l,channel2Def:f,markDef:a,config:o,scaleName:d,scale:p,stack:s,offset:m,defaultRef:b,bandPosition:_==="encoding"?0:void 0});return x?{[i||t]:x}:void 0}function _xt(t){const{channel:e,channelDef:n,scaleName:i,stack:r,offset:a,markDef:o}=t;if(ie(n)&&r&&e===r.fieldChannel){if(Ct(n)){let s=n.bandPosition;if(s===void 0&&o.type==="text"&&(e==="radius"||e==="theta")&&(s=.5),s!==void 0)return Xb({scaleName:i,fieldOrDatumDef:n,startSuffix:"start",bandPosition:s,offset:a})}return Nf(n,i,{suffix:"end"},{offset:a})}return K$(t)}function xD({model:t,defaultPos:e,channel:n,scaleName:i,scale:r}){const{markDef:a,config:o}=t;return()=>{const s=yh(n),l=fc(n),f=je(n,a,o,{vgChannel:l});if(f!==void 0)return p0(n,f);switch(e){case"zeroOrMin":return SF({scaleName:i,scale:r,mode:"zeroOrMin",mainChannel:s,config:o});case"zeroOrMax":return SF({scaleName:i,scale:r,mode:{zeroOrMax:{widthSignal:t.width.signal,heightSignal:t.height.signal}},mainChannel:s,config:o});case"mid":return{...t[Mr(n)],mult:.5}}}}function SF({mainChannel:t,config:e,...n}){const i=iG(n),{mode:r}=n;if(i)return i;switch(t){case"radius":{if(r==="zeroOrMin")return{value:0};const{widthSignal:a,heightSignal:o}=r.zeroOrMax;return{signal:`min(${a},${o})/2`}}case"theta":return r==="zeroOrMin"?{value:0}:{signal:"2*PI"};case"x":return r==="zeroOrMin"?{value:0}:{field:{group:"width"}};case"y":return r==="zeroOrMin"?{field:{group:"height"}}:{value:0}}}const bxt={left:"x",center:"xc",right:"x2"},xxt={top:"y",middle:"yc",bottom:"y2"};function _Z(t,e,n,i="middle"){if(t==="radius"||t==="theta")return fc(t);const r=t==="x"?"align":"baseline",a=je(r,e,n);let o;return It(a)?(Tt(_1t(r)),o=void 0):o=a,t==="x"?bxt[o||(i==="top"?"left":"center")]:xxt[o||i]}function ex(t,e,{defaultPos:n,defaultPos2:i,range:r}){return r?bZ(t,e,{defaultPos:n,defaultPos2:i}):ir(t,e,{defaultPos:n})}function bZ(t,e,{defaultPos:n,defaultPos2:i}){const{markDef:r,config:a}=e,o=_s(t),s=Mr(t),l=wxt(e,i,o),f=l[s]?_Z(t,r,a):fc(t);return{...ir(t,e,{defaultPos:n,vgChannel:f}),...l}}function wxt(t,e,n){const{encoding:i,mark:r,markDef:a,stack:o,config:s}=t,l=yh(n),f=Mr(n),d=fc(n),p=i[l],m=t.scaleName(l),_=t.getScaleComponent(l),{offset:b}=n in i||n in a?Ep({channel:n,markDef:a,encoding:i,model:t}):Ep({channel:l,markDef:a,encoding:i,model:t});if(!p&&(n==="x2"||n==="y2")&&(i.latitude||i.longitude)){const S=Mr(n),T=t.markDef[S];return T!=null?{[S]:{value:T}}:{[d]:{field:t.getName(n)}}}const x=Ext({channel:n,channelDef:p,channel2Def:i[n],markDef:a,config:s,scaleName:m,scale:_,stack:o,offset:b,defaultRef:void 0});return x!==void 0?{[d]:x}:Zv(n,a)||Zv(n,{[n]:XC(n,a,s.style),[f]:XC(f,a,s.style)})||Zv(n,s[r])||Zv(n,s.mark)||{[d]:xD({model:t,defaultPos:e,channel:n,scaleName:m,scale:_})()}}function Ext({channel:t,channelDef:e,channel2Def:n,markDef:i,config:r,scaleName:a,scale:o,stack:s,offset:l,defaultRef:f}){return ie(e)&&s&&t.charAt(0)===s.fieldChannel.charAt(0)?Nf(e,a,{suffix:"start"},{offset:l}):K$({channel:t,channelDef:n,scaleName:a,scale:o,stack:s,markDef:i,config:r,offset:l,defaultRef:f})}function Zv(t,e){const n=Mr(t),i=fc(t);if(e[i]!==void 0)return{[i]:p0(t,e[i])};if(e[t]!==void 0)return{[i]:p0(t,e[t])};if(e[n]){const r=e[n];if(nh(r))Tt(d1t(n));else return{[n]:p0(t,r)}}}function Au(t,e){const{config:n,encoding:i,markDef:r}=t,a=r.type,o=_s(e),s=Mr(e),l=i[e],f=i[o],d=t.getScaleComponent(e),p=d?d.get("type"):void 0,m=r.orient,_=i[s]??i.size??je("size",r,n,{vgChannel:s}),b=dH(e),x=a==="bar"&&(e==="x"?m==="vertical":m==="horizontal")||a==="tick"&&(e==="y"?m==="vertical":m==="horizontal");return Ct(l)&&(Ke(l.bin)||hi(l.bin)||l.timeUnit&&!f)&&!(_&&!nh(_))&&!i[b]&&!ii(p)?Txt({fieldDef:l,fieldDef2:f,channel:e,model:t}):(ie(l)&&ii(p)||x)&&!f?Axt(l,e,t):bZ(e,t,{defaultPos:"zeroOrMax",defaultPos2:"zeroOrMin"})}function Sxt(t,e,n,i,r,a,o){if(nh(r))if(n){const l=n.get("type");if(l==="band"){let f=`bandwidth('${e}')`;r.band!==1&&(f=`${r.band} * ${f}`);const d=os("minBandSize",{type:o},i);return{signal:d?`max(${no(d)}, ${f})`:f}}else r.band!==1&&(Tt(E1t(l)),r=void 0)}else return{mult:r.band,field:{group:t}};else{if(It(r))return r;if(r)return{value:r}}if(n){const l=n.get("range");if(_h(l)&&Me(l.step))return{value:l.step-2}}if(!a){const{bandPaddingInner:l,barBandPaddingInner:f,rectBandPaddingInner:d,tickBandPaddingInner:p}=i.scale,m=Tn(l,o==="tick"?p:o==="bar"?f:d);if(It(m))return{signal:`(1 - (${m.signal})) * ${t}`};if(Me(m))return{signal:`${1-m} * ${t}`}}return{value:eM(i.view,t)-2}}function Axt(t,e,n){var q,Y;const{markDef:i,encoding:r,config:a,stack:o}=n,s=i.orient,l=n.scaleName(e),f=n.getScaleComponent(e),d=Mr(e),p=_s(e),m=dH(e),_=n.scaleName(m),b=n.getScaleComponent(A$(e)),x=i.type==="tick"||s==="horizontal"&&e==="y"||s==="vertical"&&e==="x";let S;(r.size||i.size)&&(x?S=gi("size",n,{vgChannel:d,defaultRef:en(i.size)}):Tt(C1t(i.type)));const T=!!S,M=fG({channel:e,fieldDef:t,markDef:i,config:a,scaleType:(q=f||b)==null?void 0:q.get("type"),useVlSizeChannel:x});S=S||{[d]:Sxt(d,_||l,b||f,a,M,!!t,i.type)};const k=((Y=f||b)==null?void 0:Y.get("type"))==="band"&&nh(M)&&!T?"top":"middle",$=_Z(e,i,a,k),D=$==="xc"||$==="yc",{offset:F,offsetType:N}=Ep({channel:e,markDef:i,encoding:r,model:n,bandPosition:D?.5:0}),I=K$({channel:e,channelDef:t,markDef:i,config:a,scaleName:l,scale:f,stack:o,offset:F,defaultRef:xD({model:n,defaultPos:"mid",channel:e,scaleName:l,scale:f}),bandPosition:D?N==="encoding"?0:.5:It(M)?{signal:`(1-${M})/2`}:nh(M)?(1-M.band)/2:0});if(d)return{[$]:I,...S};{const H=fc(p),et=S[d],nt=F?{...et,offset:F}:et;return{[$]:I,[H]:gt(I)?[I[0],{...I[1],offset:nt}]:{...I,offset:nt}}}}function AF(t,e,n,i,r,a,o){if(sH(t))return 0;const s=t==="x"||t==="y2",l=s?-e/2:e/2;if(It(n)||It(r)||It(i)||a){const f=no(n),d=no(r),p=no(i),m=no(a),b=a?`(${o} < ${m} ? ${s?"":"-"}0.5 * (${m} - (${o})) : ${l})`:l,x=p?`${p} + `:"",S=f?`(${f} ? -1 : 1) * `:"",T=d?`(${d} + ${b})`:b;return{signal:x+S+T}}else return r=r||0,i+(n?-r-l:+r+l)}function Txt({fieldDef:t,fieldDef2:e,channel:n,model:i}){var Y;const{config:r,markDef:a,encoding:o}=i,s=i.getScaleComponent(n),l=i.scaleName(n),f=s?s.get("type"):void 0,d=s.get("reverse"),p=fG({channel:n,fieldDef:t,markDef:a,config:r,scaleType:f}),m=(Y=i.component.axes[n])==null?void 0:Y[0],_=(m==null?void 0:m.get("translate"))??.5,b=Cn(n)?je("binSpacing",a,r)??0:0,x=_s(n),S=fc(n),T=fc(x),M=os("minBandSize",a,r),{offset:k}=Ep({channel:n,markDef:a,encoding:o,model:i,bandPosition:0}),{offset:$}=Ep({channel:x,markDef:a,encoding:o,model:i,bandPosition:0}),D=Wvt({fieldDef:t,scaleName:l}),F=AF(n,b,d,_,k,M,D),N=AF(x,b,d,_,$??k,M,D),I=It(p)?{signal:`(1-${p.signal})/2`}:nh(p)?(1-p.band)/2:.5,q=hc({fieldDef:t,fieldDef2:e,markDef:a,config:r});if(Ke(t.bin)||t.timeUnit){const H=t.timeUnit&&q!==.5;return{[T]:TF({fieldDef:t,scaleName:l,bandPosition:I,offset:N,useRectOffsetField:H}),[S]:TF({fieldDef:t,scaleName:l,bandPosition:It(I)?{signal:`1-${I.signal}`}:1-I,offset:F,useRectOffsetField:H})}}else if(hi(t.bin)){const H=Nf(t,l,{},{offset:N});if(Ct(e))return{[T]:H,[S]:Nf(e,l,{},{offset:F})};if(vh(t.bin)&&t.bin.step)return{[T]:H,[S]:{signal:`scale("${l}", ${Ot(t,{expr:"datum"})} + ${t.bin.step})`,offset:F}}}Tt(DH(x))}function TF({fieldDef:t,scaleName:e,bandPosition:n,offset:i,useRectOffsetField:r}){return Xb({scaleName:e,fieldOrDatumDef:t,bandPosition:n,offset:i,...r?{startSuffix:W2,endSuffix:V2}:{}})}const Cxt=new Set(["aria","width","height"]);function Na(t,e){const{fill:n=void 0,stroke:i=void 0}=e.color==="include"?vZ(t):{};return{...Mxt(t.markDef,e),...CF("fill",n),...CF("stroke",i),...gi("opacity",t),...gi("fillOpacity",t),...gi("strokeOpacity",t),...gi("strokeWidth",t),...gi("strokeDash",t),...vxt(t),...mZ(t),...bD(t,"href"),...gxt(t)}}function CF(t,e){return e?{[t]:e}:{}}function Mxt(t,e){return Fyt.reduce((n,i)=>(!Cxt.has(i)&&St(t,i)&&e[i]!=="ignore"&&(n[i]=en(t[i])),n),{})}function wD(t){const{config:e,markDef:n}=t,i=new Set;if(t.forEachFieldDef((r,a)=>{var f;let o;if(!bs(a)||!(o=t.getScaleType(a)))return;const s=O2(r.aggregate),l=Q$({scaleChannel:a,markDef:n,config:e,scaleType:o,isCountAggregate:s});if(Zvt(l)){const d=t.vgField(a,{expr:"datum",binSuffix:(f=t.stack)!=null&&f.impute?"mid":void 0});d&&i.add(d)}}),i.size>0)return{defined:{signal:[...i].map(a=>N2(a,!0)).join(" && ")}}}function MF(t,e){if(e!==void 0)return{[t]:en(e)}}const RA="voronoi",xZ={defined:t=>t.type==="point"&&t.nearest,parse:(t,e)=>{if(e.events)for(const n of e.events)n.markname=t.getName(RA)},marks:(t,e,n)=>{const{x:i,y:r}=e.project.hasChannel,a=t.mark;if(kc(a))return Tt(jyt(a)),n;const o={name:t.getName(RA),type:"path",interactive:!0,from:{data:t.getName("marks")},encode:{update:{fill:{value:"transparent"},strokeWidth:{value:.35},stroke:{value:"transparent"},isVoronoi:{value:!0},...mZ(t,{reactiveGeom:!0})}},transform:[{type:"voronoi",x:{expr:i||!r?"datum.datum.x || 0":"0"},y:{expr:r||!i?"datum.datum.y || 0":"0"},size:[t.getSizeSignalRef("width"),t.getSizeSignalRef("height")]}]};let s=0,l=!1;return n.forEach((f,d)=>{const p=f.name??"";p===t.component.mark[0].name?s=d:p.includes(RA)&&(l=!0)}),l||n.splice(s+1,0,o),n}},wZ={defined:t=>t.type==="point"&&t.resolve==="global"&&t.bind&&t.bind!=="scales"&&!hD(t.bind),parse:(t,e,n)=>OZ(e,n),topLevelSignals:(t,e,n)=>{var l;const i=e.name,r=e.project,a=e.bind,o=(l=e.init)==null?void 0:l[0],s=xZ.defined(e)?"(item().isVoronoi ? datum.datum : datum)":"datum";return r.items.forEach((f,d)=>{const p=sn(`${i}_${f.field}`);n.filter(_=>_.name===p).length||n.unshift({name:p,...o?{init:rh(o[d])}:{value:null},on:e.events?[{events:e.events,update:`datum && item().mark.marktype !== 'group' ? ${s}[${Mt(f.field)}] : null`}]:[],bind:a[f.field]??a[f.channel]??a})}),n},signals:(t,e,n)=>{const i=e.name,r=e.project,a=n.find(f=>f.name===i+Tu),o=i+Fy,s=r.items.map(f=>sn(`${i}_${f.field}`)),l=s.map(f=>`${f} !== null`).join(" && ");return s.length&&(a.update=`${l} ? {fields: ${o}, values: [${s.join(", ")}]} : null`),delete a.value,delete a.on,n}},nx="_toggle",EZ={defined:t=>t.type==="point"&&!Ko(t)&&!!t.toggle,signals:(t,e,n)=>n.concat({name:e.name+nx,value:!1,on:[{events:e.events,update:e.toggle}]}),modifyExpr:(t,e)=>{const n=e.name+Tu,i=e.name+nx;return`${i} ? null : ${n}, ${e.resolve==="global"?`${i} ? null : true, `:`${i} ? null : {unit: ${zf(t)}}, `}${i} ? ${n} : null`}},kxt={defined:t=>t.clear!==void 0&&t.clear!==!1&&!Ko(t),parse:(t,e)=>{e.clear&&(e.clear=Dt(e.clear)?xc(e.clear,"view"):e.clear)},topLevelSignals:(t,e,n)=>{if(wZ.defined(e))for(const i of e.project.items){const r=n.findIndex(a=>a.name===sn(`${e.name}_${i.field}`));r!==-1&&n[r].on.push({events:e.clear,update:"null"})}return n},signals:(t,e,n)=>{function i(r,a){r!==-1&&n[r].on&&n[r].on.push({events:e.clear,update:a})}if(e.type==="interval")for(const r of e.project.items){const a=n.findIndex(o=>o.name===r.signals.visual);if(i(a,"[0, 0]"),a===-1){const o=n.findIndex(s=>s.name===r.signals.data);i(o,"null")}}else{let r=n.findIndex(a=>a.name===e.name+Tu);i(r,"null"),EZ.defined(e)&&(r=n.findIndex(a=>a.name===e.name+nx),i(r,"false"))}return n}},SZ={defined:t=>{const e=t.resolve==="global"&&t.bind&&hD(t.bind),n=t.project.items.length===1&&t.project.items[0].field!==ho;return e&&!n&&Tt(Yyt),e&&n},parse:(t,e,n)=>{const i=ee(n);if(i.select=Dt(i.select)?{type:i.select,toggle:e.toggle}:{...i.select,toggle:e.toggle},OZ(e,i),Rt(n.select)&&(n.select.on||n.select.clear)){const o='event.item && indexof(event.item.mark.role, "legend") < 0';for(const s of e.events)s.filter=Nt(s.filter??[]),s.filter.includes(o)||s.filter.push(o)}const r=CA(e.bind)?e.bind.legend:"click",a=Dt(r)?xc(r,"view"):Nt(r);e.bind={legend:{merge:a}}},topLevelSignals:(t,e,n)=>{const i=e.name,r=CA(e.bind)&&e.bind.legend,a=o=>s=>{const l=ee(s);return l.markname=o,l};for(const o of e.project.items){if(!o.hasLegend)continue;const s=`${sn(o.field)}_legend`,l=`${i}_${s}`;if(n.filter(d=>d.name===l).length===0){const d=r.merge.map(a(`${s}_symbols`)).concat(r.merge.map(a(`${s}_labels`))).concat(r.merge.map(a(`${s}_entries`)));n.unshift({name:l,...e.init?{}:{value:null},on:[{events:d,update:"isDefined(datum.value) ? datum.value : item().items[0].items[0].datum.value",force:!0},{events:r.merge,update:`!event.item || !datum ? null : ${l}`,force:!0}]})}}return n},signals:(t,e,n)=>{const i=e.name,r=e.project,a=n.find(m=>m.name===i+Tu),o=i+Fy,s=r.items.filter(m=>m.hasLegend).map(m=>sn(`${i}_${sn(m.field)}_legend`)),f=`${s.map(m=>`${m} !== null`).join(" && ")} ? {fields: ${o}, values: [${s.join(", ")}]} : null`;e.events&&s.length>0?a.on.push({events:s.map(m=>({signal:m})),update:f}):s.length>0&&(a.update=f,delete a.value,delete a.on);const d=n.find(m=>m.name===i+nx),p=CA(e.bind)&&e.bind.legend;return d&&(e.events?d.on.push({...d.on[0],events:p}):d.on[0].events=p),n}};function Oxt(t,e,n){var r;const i=(r=t.fieldDef(e))==null?void 0:r.field;for(const a of Rn(t.component.selection??{})){const o=a.project.hasField[i]??a.project.hasChannel[e];if(o&&SZ.defined(a)){const s=n.get("selections")??[];s.push(a.name),n.set("selections",s,!1),o.hasLegend=!0}}}const AZ="_translate_anchor",TZ="_translate_delta",$xt={defined:t=>t.type==="interval"&&t.translate,signals:(t,e,n)=>{const i=e.name,r=_u.defined(e),a=i+AZ,{x:o,y:s}=e.project.hasChannel;let l=xc(e.translate,"scope");return r||(l=l.map(f=>(f.between[0].markname=i+Hd,f))),n.push({name:a,value:{},on:[{events:l.map(f=>f.between[0]),update:`{x: x(unit), y: y(unit)${o!==void 0?`, extent_x: ${r?oM(t,un):`slice(${o.signals.visual})`}`:""}${s!==void 0?`, extent_y: ${r?oM(t,ai):`slice(${s.signals.visual})`}`:""}}`}]},{name:i+TZ,value:{},on:[{events:l,update:`{x: ${a}.x - x(unit), y: ${a}.y - y(unit)}`}]}),o!==void 0&&kF(t,e,o,"width",n),s!==void 0&&kF(t,e,s,"height",n),n}};function kF(t,e,n,i,r){const a=e.name,o=a+AZ,s=a+TZ,l=n.channel,f=_u.defined(e),d=r.find(D=>D.name===n.signals[f?"data":"visual"]),p=t.getSizeSignalRef(i).signal,m=t.getScaleComponent(l),_=m==null?void 0:m.get("type"),b=m==null?void 0:m.get("reverse"),x=f?l===un?b?"":"-":b?"-":"":"",S=`${o}.extent_${l}`,T=`${x}${s}.${l} / ${f?`${p}`:`span(${S})`}`,M=!f||!m?"panLinear":_==="log"?"panLog":_==="symlog"?"panSymlog":_==="pow"?"panPow":"panLinear",k=f?_==="pow"?`, ${m.get("exponent")??1}`:_==="symlog"?`, ${m.get("constant")??1}`:"":"",$=`${M}(${S}, ${T}${k})`;d.on.push({events:{signal:s},update:f?$:`clampRange(${$}, 0, ${p})`})}const CZ="_zoom_anchor",MZ="_zoom_delta",Dxt={defined:t=>t.type==="interval"&&t.zoom,signals:(t,e,n)=>{const i=e.name,r=_u.defined(e),a=i+MZ,{x:o,y:s}=e.project.hasChannel,l=Mt(t.scaleName(un)),f=Mt(t.scaleName(ai));let d=xc(e.zoom,"scope");return r||(d=d.map(p=>(p.markname=i+Hd,p))),n.push({name:i+CZ,on:[{events:d,update:r?`{${[l?`x: invert(${l}, x(unit))`:"",f?`y: invert(${f}, y(unit))`:""].filter(p=>p).join(", ")}}`:"{x: x(unit), y: y(unit)}"}]},{name:a,on:[{events:d,force:!0,update:"pow(1.001, event.deltaY * pow(16, event.deltaMode))"}]}),o!==void 0&&OF(t,e,o,"width",n),s!==void 0&&OF(t,e,s,"height",n),n}};function OF(t,e,n,i,r){const a=e.name,o=n.channel,s=_u.defined(e),l=r.find(M=>M.name===n.signals[s?"data":"visual"]),f=t.getSizeSignalRef(i).signal,d=t.getScaleComponent(o),p=d==null?void 0:d.get("type"),m=s?oM(t,o):l.name,_=a+MZ,b=`${a}${CZ}.${o}`,x=!s||!d?"zoomLinear":p==="log"?"zoomLog":p==="symlog"?"zoomSymlog":p==="pow"?"zoomPow":"zoomLinear",S=s?p==="pow"?`, ${d.get("exponent")??1}`:p==="symlog"?`, ${d.get("constant")??1}`:"":"",T=`${x}(${m}, ${b}, ${_}${S})`;l.on.push({events:{signal:_},update:s?T:`clampRange(${T}, 0, ${f})`})}const ah="_store",Tu="_tuple",Rxt="_modify",kZ="vlSelectionResolve",K2=[axt,dxt,nxt,EZ,wZ,_u,SZ,kxt,$xt,Dxt,xZ];function Nxt(t){let e=t.parent;for(;e&&!Jr(e);)e=e.parent;return e}function zf(t,{escape:e}={escape:!0}){let n=e?Mt(t.name):t.name;const i=Nxt(t);if(i){const{facet:r}=i;for(const a of wa)r[a]&&(n+=` + '__facet_${a}_' + (facet[${Mt(i.vgField(a))}])`)}return n}function ED(t){return Rn(t.component.selection??{}).reduce((e,n)=>e||n.project.hasSelectionId,!1)}function OZ(t,e){(Dt(e.select)||!e.select.on)&&delete t.events,(Dt(e.select)||!e.select.clear)&&delete t.clear,(Dt(e.select)||!e.select.toggle)&&delete t.toggle}function Ko(t){var e;return(e=t.events)==null?void 0:e.find(n=>"type"in n&&n.type==="timer")}function uM(t){const e=[];return t.type==="Identifier"?[t.name]:t.type==="Literal"?[t.value]:(t.type==="MemberExpression"&&(e.push(...uM(t.object)),e.push(...uM(t.property))),e)}function $Z(t){return t.object.type==="MemberExpression"?$Z(t.object):t.object.name==="datum"}function DZ(t){const e=q3(t),n=new Set;return e.visit(i=>{i.type==="MemberExpression"&&$Z(i)&&n.add(uM(i).slice(1).join("."))}),n}class Vp extends Be{constructor(n,i,r){super(n);yt(this,"model");yt(this,"filter");yt(this,"expr");yt(this,"_dependentFields");this.model=i,this.filter=r,this.expr=ix(this.model,this.filter,this),this._dependentFields=DZ(this.expr)}clone(){return new Vp(null,this.model,ee(this.filter))}dependentFields(){return this._dependentFields}producedFields(){return new Set}assemble(){return{type:"filter",expr:this.expr}}hash(){return`Filter ${this.expr}`}}function Lxt(t,e){const n={},i=t.config.selection;if(!e||!e.length)return n;let r=0;for(const a of e){const o=sn(a.name),s=a.select,l=Dt(s)?s:s.type,f=Rt(s)?ee(s):{type:l},d=i[l];for(const _ in d)_==="fields"||_==="encodings"||(_==="mark"&&(f.mark={...d.mark,...f.mark}),(f[_]===void 0||f[_]===!0)&&(f[_]=ee(d[_]??f[_])));const p=n[o]={...f,name:o,type:l,init:a.value,bind:a.bind,events:Dt(f.on)?xc(f.on,"scope"):Nt(ee(f.on))};if(Ko(p)&&(r++,r>1)){delete n[o];continue}const m=ee(a);for(const _ of K2)_.defined(p)&&_.parse&&_.parse(t,p,m)}return r>1&&Tt(Jyt),n}function RZ(t,e,n,i="datum"){const r=Dt(e)?e:e.param,a=sn(r),o=Mt(a+ah);let s;try{s=t.getSelectionComponent(a,r)}catch{return`!!${a}`}if(s.project.timeUnit){const m=n??t.component.data.raw,_=s.project.timeUnit.clone();m.parent?_.insertAsParentOf(m):m.parent=_}const l=s.project.hasSelectionId?"vlSelectionIdTest(":"vlSelectionTest(",f=s.resolve==="global"?")":`, ${Mt(s.resolve)})`,d=`${l}${o}, ${i}${f}`,p=`length(data(${o}))`;return e.empty===!1?`${p} && ${d}`:`!${p} || ${d}`}function NZ(t,e,n){const i=sn(e),r=n.encoding;let a=n.field,o;try{o=t.getSelectionComponent(i,e)}catch{return i}if(!r&&!a)a=o.project.items[0].field,o.project.items.length>1&&Tt(t1t(a));else if(r&&!a){const s=o.project.items.filter(l=>l.channel===r);!s.length||s.length>1?(a=o.project.items[0].field,Tt(e1t(s,r,n,a))):a=s[0].field}return`${o.name}[${Mt(Oa(a))}]`}function zxt(t,e){for(const[n,i]of cc(t.component.selection??{})){const r=t.getName(`lookup_${n}`);t.component.data.outputNodes[r]=i.materialized=new wr(new Vp(e,t,{param:n}),r,gn.Lookup,t.component.data.outputNodeRefCounts)}}function ix(t,e,n){return d0(e,i=>Dt(i)?i:cvt(i)?RZ(t,i,n):HH(i))}function Fxt(t,e){if(t)return gt(t)&&!Fl(t)?t.map(n=>rD(n,e)).join(", "):t}function NA(t,e,n,i){var r,a;t.encode??(t.encode={}),(r=t.encode)[e]??(r[e]={}),(a=t.encode[e]).update??(a.update={}),t.encode[e].update[n]=i}function Km(t,e,n,i={header:!1}){var p,m;const{disable:r,orient:a,scale:o,labelExpr:s,title:l,zindex:f,...d}=t.combine();if(!r){for(const _ in d){const b=_,x=g_t[b],S=d[b];if(x&&x!==e&&x!=="both")delete d[b];else if(zy(S)){const{condition:T,...M}=S,k=Nt(T),$=rF[b];if($){const{vgProp:D,part:F}=$,N=[...k.map(I=>{const{test:q,...Y}=I;return{test:ix(null,q),...Y}}),M];NA(d,F,D,N),delete d[b]}else if($===null){const D={signal:k.map(F=>{const{test:N,...I}=F;return`${ix(null,N)} ? ${q4(I)} : `}).join("")+q4(M)};d[b]=D}}else if(It(S)){const T=rF[b];if(T){const{vgProp:M,part:k}=T;NA(d,k,M,S),delete d[b]}}pe(["labelAlign","labelBaseline"],b)&&d[b]===null&&delete d[b]}if(e==="grid"){if(!d.grid)return;if(d.encode){const{grid:_}=d.encode;d.encode={..._?{grid:_}:{}},Ye(d.encode)&&delete d.encode}return{scale:o,orient:a,...d,domain:!1,labels:!1,aria:!1,maxExtent:0,minExtent:0,ticks:!1,zindex:Tn(f,0)}}else{if(!i.header&&t.mainExtracted)return;if(s!==void 0){let b=s;(m=(p=d.encode)==null?void 0:p.labels)!=null&&m.update&&It(d.encode.labels.update.text)&&(b=Qf(s,"datum.label",d.encode.labels.update.text.signal)),NA(d,"labels","text",{signal:b})}if(d.labelAlign===null&&delete d.labelAlign,d.encode){for(const b of xG)t.hasAxisPart(b)||delete d.encode[b];Ye(d.encode)&&delete d.encode}const _=Fxt(l,n);return{scale:o,orient:a,grid:!1,..._?{title:_}:{},...d,...n.aria===!1?{aria:!1}:{},zindex:Tn(f,0)}}}}function LZ(t){const{axes:e}=t.component,n=[];for(const i of Ru)if(e[i]){for(const r of e[i])if(!r.get("disable")&&!r.get("gridScale")){const a=i==="x"?"height":"width",o=t.getSizeSignalRef(a).signal;a!==o&&n.push({name:a,update:o})}}return n}function Pxt(t,e){const{x:n=[],y:i=[]}=t;return[...n.map(r=>Km(r,"grid",e)),...i.map(r=>Km(r,"grid",e)),...n.map(r=>Km(r,"main",e)),...i.map(r=>Km(r,"main",e))].filter(r=>r)}function $F(t,e,n,i){return Object.assign.apply(null,[{},...t.map(r=>{if(r==="axisOrient"){const a=n==="x"?"bottom":"left",o=e[n==="x"?"axisBottom":"axisLeft"]||{},s=e[n==="x"?"axisTop":"axisRight"]||{},l=new Set([...Et(o),...Et(s)]),f={};for(const d of l.values())f[d]={signal:`${i.signal} === "${a}" ? ${no(o[d])} : ${no(s[d])}`};return f}return e[r]})])}function Bxt(t,e,n,i){const r=e==="band"?["axisDiscrete","axisBand"]:e==="point"?["axisDiscrete","axisPoint"]:XH(e)?["axisQuantitative"]:e==="time"||e==="utc"?["axisTemporal"]:[],a=t==="x"?"axisX":"axisY",o=It(n)?"axisOrient":`axis${Ay(n)}`,s=[...r,...r.map(f=>a+f.substr(4))],l=["axis",o,a];return{vlOnlyAxisConfig:$F(s,i,t,n),vgAxisConfig:$F(l,i,t,n),axisConfigStyle:Uxt([...l,...s],i)}}function Uxt(t,e){var i;const n=[{}];for(const r of t){let a=(i=e[r])==null?void 0:i.style;if(a){a=Nt(a);for(const o of a)n.push(e.style[o])}}return Object.assign.apply(null,n)}function lM(t,e,n,i={}){var a;const r=wH(t,n,e);if(r!==void 0)return{configFrom:"style",configValue:r};for(const o of["vlOnlyAxisConfig","vgAxisConfig","axisConfigStyle"])if(((a=i[o])==null?void 0:a[t])!==void 0)return{configFrom:o,configValue:i[o][t]};return{}}const DF={scale:({model:t,channel:e})=>t.scaleName(e),format:({format:t})=>t,formatType:({formatType:t})=>t,grid:({fieldOrDatumDef:t,axis:e,scaleType:n})=>e.grid??Ixt(n,t),gridScale:({model:t,channel:e})=>qxt(t,e),labelAlign:({axis:t,labelAngle:e,orient:n,channel:i})=>t.labelAlign||FZ(e,n,i),labelAngle:({labelAngle:t})=>t,labelBaseline:({axis:t,labelAngle:e,orient:n,channel:i})=>t.labelBaseline||zZ(e,n,i),labelFlush:({axis:t,fieldOrDatumDef:e,channel:n})=>t.labelFlush??Hxt(e.type,n),labelOverlap:({axis:t,fieldOrDatumDef:e,scaleType:n})=>t.labelOverlap??Gxt(e.type,n,Ct(e)&&!!e.timeUnit,Ct(e)?e.sort:void 0),orient:({orient:t})=>t,tickCount:({channel:t,model:e,axis:n,fieldOrDatumDef:i,scaleType:r})=>{const a=t==="x"?"width":t==="y"?"height":void 0,o=a?e.getSizeSignalRef(a):void 0;return n.tickCount??Yxt({fieldOrDatumDef:i,scaleType:r,size:o,values:n.values})},tickMinStep:({axis:t,format:e,fieldOrDatumDef:n})=>t.tickMinStep??Xxt({format:e,fieldOrDatumDef:n}),title:({axis:t,model:e,channel:n})=>{if(t.title!==void 0)return t.title;const i=PZ(e,n);if(i!==void 0)return i;const r=e.typedFieldDef(n),a=n==="x"?"x2":"y2",o=e.fieldDef(a);return SH(r?[nF(r)]:[],Ct(o)?[nF(o)]:[])},values:({axis:t,fieldOrDatumDef:e})=>Wxt(t,e),zindex:({axis:t,fieldOrDatumDef:e,mark:n})=>t.zindex??Vxt(n,e)};function Ixt(t,e){return!ii(t)&&Ct(e)&&!Ke(e==null?void 0:e.bin)&&!hi(e==null?void 0:e.bin)}function qxt(t,e){const n=e==="x"?"y":"x";if(t.getScaleComponent(n))return t.scaleName(n)}function jxt(t,e,n,i,r){const a=e==null?void 0:e.labelAngle;if(a!==void 0)return It(a)?a:I0(a);{const{configValue:o}=lM("labelAngle",i,e==null?void 0:e.style,r);return o!==void 0?I0(o):n===un&&pe([Z$,G$],t.type)&&!(Ct(t)&&t.timeUnit)?270:void 0}}function cM(t){return`(((${t.signal} % 360) + 360) % 360)`}function zZ(t,e,n,i){if(t!==void 0)if(n==="x"){if(It(t)){const r=cM(t),a=It(e)?`(${e.signal} === "top")`:e==="top";return{signal:`(45 < ${r} && ${r} < 135) || (225 < ${r} && ${r} < 315) ? "middle" :(${r} <= 45 || 315 <= ${r}) === ${a} ? "bottom" : "top"`}}if(45<t&&t<135||225<t&&t<315)return"middle";if(It(e)){const r=t<=45||315<=t?"===":"!==";return{signal:`${e.signal} ${r} "top" ? "bottom" : "top"`}}return(t<=45||315<=t)==(e==="top")?"bottom":"top"}else{if(It(t)){const r=cM(t),a=It(e)?`(${e.signal} === "left")`:e==="left";return{signal:`${r} <= 45 || 315 <= ${r} || (135 <= ${r} && ${r} <= 225) ? ${i?'"middle"':"null"} : (45 <= ${r} && ${r} <= 135) === ${a} ? "top" : "bottom"`}}if(t<=45||315<=t||135<=t&&t<=225)return i?"middle":null;if(It(e)){const r=45<=t&&t<=135?"===":"!==";return{signal:`${e.signal} ${r} "left" ? "top" : "bottom"`}}return(45<=t&&t<=135)==(e==="left")?"top":"bottom"}}function FZ(t,e,n){if(t===void 0)return;const i=n==="x",r=i?0:90,a=i?"bottom":"left";if(It(t)){const o=cM(t),s=It(e)?`(${e.signal} === "${a}")`:e===a;return{signal:`(${r?`(${o} + 90)`:o} % 180 === 0) ? ${i?null:'"center"'} :(${r} < ${o} && ${o} < ${180+r}) === ${s} ? "left" : "right"`}}if((t+r)%180===0)return i?null:"center";if(It(e)){const o=r<t&&t<180+r?"===":"!==";return{signal:`${`${e.signal} ${o} "${a}"`} ? "left" : "right"`}}return(r<t&&t<180+r)==(e===a)?"left":"right"}function Hxt(t,e){if(e==="x"&&pe(["quantitative","temporal"],t))return!0}function Gxt(t,e,n,i){if(n&&!Rt(i)||t!=="nominal"&&t!=="ordinal")return e==="log"||e==="symlog"?"greedy":!0}function Zxt(t){return t==="x"?"bottom":"left"}function Yxt({fieldOrDatumDef:t,scaleType:e,size:n,values:i}){var r;if(!i&&!ii(e)&&e!=="log"){if(Ct(t)){if(Ke(t.bin))return{signal:`ceil(${n.signal}/10)`};if(t.timeUnit&&pe(["month","hours","day","quarter"],(r=ni(t.timeUnit))==null?void 0:r.unit))return}return{signal:`ceil(${n.signal}/40)`}}}function Xxt({format:t,fieldOrDatumDef:e}){if(t==="d")return 1;if(Ct(e)){const{timeUnit:n}=e;if(n){const i=IH(n);if(i)return{signal:i}}}}function PZ(t,e){const n=e==="x"?"x2":"y2",i=t.fieldDef(e),r=t.fieldDef(n),a=i?i.title:void 0,o=r?r.title:void 0;if(a&&o)return AH(a,o);if(a)return a;if(o)return o;if(a!==void 0)return a;if(o!==void 0)return o}function Wxt(t,e){const n=t.values;if(gt(n))return bG(e,n);if(It(n))return n}function Vxt(t,e){return t==="rect"&&Vb(e)?1:0}class Sp extends Be{constructor(n,i){super(n);yt(this,"transform");yt(this,"_dependentFields");this.transform=i,this._dependentFields=DZ(this.transform.calculate)}clone(){return new Sp(null,ee(this.transform))}static parseAllForSortIndex(n,i){return i.forEachFieldDef((r,a)=>{if(wh(r)&&cG(r.sort)){const{field:o,timeUnit:s}=r,l=r.sort,f=l.map((d,p)=>`${HH({field:o,timeUnit:s,equal:d})} ? ${p} : `).join("")+l.length;n=new Sp(n,{calculate:f,as:Ap(r,a,{forAs:!0})})}}),n}producedFields(){return new Set([this.transform.as])}dependentFields(){return this._dependentFields}assemble(){return{type:"formula",expr:this.transform.calculate,as:this.transform.as}}hash(){return`Calculate ${ye(this.transform)}`}}function Ap(t,e,n){return Ot(t,{prefix:e,suffix:"sort_index",...n})}function J2(t,e){return pe(["top","bottom"],e)?"column":pe(["left","right"],e)||t==="row"?"row":"column"}function Tp(t,e,n,i){const r=i==="row"?n.headerRow:i==="column"?n.headerColumn:n.headerFacet;return Tn((e||{})[t],r[t],n.header[t])}function tw(t,e,n,i){const r={};for(const a of t){const o=Tp(a,e||{},n,i);o!==void 0&&(r[a]=o)}return r}const SD=["row","column"],AD=["header","footer"];function Qxt(t,e){const n=t.component.layoutHeaders[e].title,i=t.config?t.config:void 0,r=t.component.layoutHeaders[e].facetFieldDef?t.component.layoutHeaders[e].facetFieldDef:void 0,{titleAnchor:a,titleAngle:o,titleOrient:s}=tw(["titleAnchor","titleAngle","titleOrient"],r.header,i,e),l=J2(e,s),f=I0(o);return{name:`${e}-title`,type:"group",role:`${l}-title`,title:{text:n,...e==="row"?{orient:"left"}:{},style:"guide-title",...UZ(f,l),...BZ(l,f,a),...IZ(i,r,e,F_t,BG)}}}function BZ(t,e,n="middle"){switch(n){case"start":return{align:"left"};case"end":return{align:"right"}}const i=FZ(e,t==="row"?"left":"top",t==="row"?"y":"x");return i?{align:i}:{}}function UZ(t,e){const n=zZ(t,e==="row"?"left":"top",e==="row"?"y":"x",!0);return n?{baseline:n}:{}}function Kxt(t,e){const n=t.component.layoutHeaders[e],i=[];for(const r of AD)if(n[r])for(const a of n[r]){const o=t2t(t,e,r,n,a);o!=null&&i.push(o)}return i}function Jxt(t,e){const{sort:n}=t;return vu(n)?{field:Ot(n,{expr:"datum"}),order:n.order??"ascending"}:gt(n)?{field:Ap(t,e,{expr:"datum"}),order:"ascending"}:{field:Ot(t,{expr:"datum"}),order:n??"ascending"}}function fM(t,e,n){const{format:i,formatType:r,labelAngle:a,labelAnchor:o,labelOrient:s,labelExpr:l}=tw(["format","formatType","labelAngle","labelAnchor","labelOrient","labelExpr"],t.header,n,e),f=tD({fieldOrDatumDef:t,format:i,formatType:r,expr:"parent",config:n}).signal,d=J2(e,s);return{text:{signal:l?Qf(Qf(l,"datum.label",f),"datum.value",Ot(t,{expr:"parent"})):f},...e==="row"?{orient:"left"}:{},style:"guide-label",frame:"group",...UZ(a,d),...BZ(d,a,o),...IZ(n,t,e,P_t,UG)}}function t2t(t,e,n,i,r){if(r){let a=null;const{facetFieldDef:o}=i,s=t.config?t.config:void 0;if(o&&r.labels){const{labelOrient:p}=tw(["labelOrient"],o.header,s,e);(e==="row"&&!pe(["top","bottom"],p)||e==="column"&&!pe(["left","right"],p))&&(a=fM(o,e,s))}const l=Jr(t)&&!Dy(t.facet),f=r.axes,d=(f==null?void 0:f.length)>0;if(a||d){const p=e==="row"?"height":"width";return{name:t.getName(`${e}_${n}`),type:"group",role:`${e}-${n}`,...i.facetFieldDef?{from:{data:t.getName(`${e}_domain`)},sort:Jxt(o,e)}:{},...d&&l?{from:{data:t.getName(`facet_domain_${e}`)}}:{},...a?{title:a}:{},...r.sizeSignal?{encode:{update:{[p]:r.sizeSignal}}}:{},...d?{axes:f}:{}}}}return null}const e2t={column:{start:0,end:1},row:{start:1,end:0}};function n2t(t,e){return e2t[e][t]}function i2t(t,e){const n={};for(const i of wa){const r=t[i];if(r!=null&&r.facetFieldDef){const{titleAnchor:a,titleOrient:o}=tw(["titleAnchor","titleOrient"],r.facetFieldDef.header,e,i),s=J2(i,o),l=n2t(a,s);l!==void 0&&(n[s]=l)}}return Ye(n)?void 0:n}function IZ(t,e,n,i,r){const a={};for(const o of i){if(!r[o])continue;const s=Tp(o,e==null?void 0:e.header,t,n);s!==void 0&&(a[r[o]]=s)}return a}function TD(t){return[...Yv(t,"width"),...Yv(t,"height"),...Yv(t,"childWidth"),...Yv(t,"childHeight")]}function Yv(t,e){const n=e==="width"?"x":"y",i=t.component.layoutSize.get(e);if(!i||i==="merged")return[];const r=t.getSizeSignalRef(e).signal;if(i==="step"){const a=t.getScaleComponent(n);if(a){const o=a.get("type"),s=a.get("range");if(ii(o)&&_h(s)){const l=t.scaleName(n);return Jr(t.parent)&&t.parent.component.resolve.scale[n]==="independent"?[RF(l,s)]:[RF(l,s),{name:r,update:qZ(l,a,`domain('${l}').length`)}]}}throw new Error("layout size is step although width/height is not step.")}else if(i=="container"){const a=r.endsWith("width"),o=a?"containerSize()[0]":"containerSize()[1]",s=tM(t.config.view,a?"width":"height"),l=`isFinite(${o}) ? ${o} : ${s}`;return[{name:r,init:l,on:[{update:l,events:"window:resize"}]}]}else return[{name:r,value:i}]}function RF(t,e){const n=`${t}_step`;return It(e.step)?{name:n,update:e.step.signal}:{name:n,value:e.step}}function qZ(t,e,n){const i=e.get("type"),r=e.get("padding"),a=Tn(e.get("paddingOuter"),r);let o=e.get("paddingInner");return o=i==="band"?o!==void 0?o:r:1,`bandspace(${n}, ${no(o)}, ${no(a)}) * ${t}_step`}function jZ(t){return t==="childWidth"?"width":t==="childHeight"?"height":t}function HZ(t,e){return Et(t).reduce((n,i)=>({...n,...Wp({model:e,channelDef:t[i],vgChannel:i,mainRefFn:r=>en(r.value),invalidValueRef:void 0})}),{})}function GZ(t,e){if(Jr(e))return t==="theta"?"independent":"shared";if(Jp(e))return"shared";if(RD(e))return Cn(t)||t==="theta"||t==="radius"?"independent":"shared";throw new Error("invalid model type for resolve")}function CD(t,e){const n=t.scale[e],i=Cn(e)?"axis":"legend";return n==="independent"?(t[i][e]==="shared"&&Tt(D1t(e)),"independent"):t[i][e]||"shared"}const r2t={...I_t,disable:1,labelExpr:1,selections:1,opacity:1,shape:1,stroke:1,fill:1,size:1,strokeWidth:1,strokeDash:1,encode:1},ZZ=Et(r2t);class a2t extends Lu{}const NF={symbols:o2t,gradient:s2t,labels:u2t,entries:l2t};function o2t(t,{fieldOrDatumDef:e,model:n,channel:i,legendCmpt:r,legendType:a}){if(a!=="symbol")return;const{markDef:o,encoding:s,config:l,mark:f}=n,d=o.filled&&f!=="trail";let p={...Uyt({},n,zvt),...vZ(n,{filled:d})};const m=r.get("symbolOpacity")??l.legend.symbolOpacity,_=r.get("symbolFillColor")??l.legend.symbolFillColor,b=r.get("symbolStrokeColor")??l.legend.symbolStrokeColor,x=m===void 0?YZ(s.opacity)??o.opacity:void 0;if(p.fill){if(i==="fill"||d&&i===Tr)delete p.fill;else if(St(p.fill,"field"))_?delete p.fill:(p.fill=en(l.legend.symbolBaseFillColor??"black"),p.fillOpacity=en(x??1));else if(gt(p.fill)){const S=hM(s.fill??s.color)??o.fill??(d&&o.color);S&&(p.fill=en(S))}}if(p.stroke){if(i==="stroke"||!d&&i===Tr)delete p.stroke;else if(St(p.stroke,"field")||b)delete p.stroke;else if(gt(p.stroke)){const S=Tn(hM(s.stroke||s.color),o.stroke,d?o.color:void 0);S&&(p.stroke={value:S})}}if(i!==Du){const S=Ct(e)&&WZ(n,r,e);S?p.opacity=[{test:S,...en(x??1)},en(l.legend.unselectedOpacity)]:x&&(p.opacity=en(x))}return p={...p,...t},Ye(p)?void 0:p}function s2t(t,{model:e,legendType:n,legendCmpt:i}){if(n!=="gradient")return;const{config:r,markDef:a,encoding:o}=e;let s={};const f=(i.get("gradientOpacity")??r.legend.gradientOpacity)===void 0?YZ(o.opacity)||a.opacity:void 0;return f&&(s.opacity=en(f)),s={...s,...t},Ye(s)?void 0:s}function u2t(t,{fieldOrDatumDef:e,model:n,channel:i,legendCmpt:r}){const a=n.legend(i)||{},o=n.config,s=Ct(e)?WZ(n,r,e):void 0,l=s?[{test:s,value:1},{value:o.legend.unselectedOpacity}]:void 0,{format:f,formatType:d}=a;let p;ih(d)?p=io({fieldOrDatumDef:e,field:"datum.value",format:f,formatType:d,config:o}):f===void 0&&d===void 0&&o.customFormatTypes&&(e.type==="quantitative"&&o.numberFormatType?p=io({fieldOrDatumDef:e,field:"datum.value",format:o.numberFormat,formatType:o.numberFormatType,config:o}):e.type==="temporal"&&o.timeFormatType&&Ct(e)&&e.timeUnit===void 0&&(p=io({fieldOrDatumDef:e,field:"datum.value",format:o.timeFormat,formatType:o.timeFormatType,config:o})));const m={...l?{opacity:l}:{},...p?{text:p}:{},...t};return Ye(m)?void 0:m}function l2t(t,{legendCmpt:e}){const n=e.get("selections");return n!=null&&n.length?{...t,fill:{value:"transparent"}}:t}function YZ(t){return XZ(t,(e,n)=>Math.max(e,n.value))}function hM(t){return XZ(t,(e,n)=>Tn(e,n.value))}function XZ(t,e){if(i_t(t))return Nt(t.condition).reduce(e,t.value);if(co(t))return t.value}function WZ(t,e,n){const i=e.get("selections");if(!(i!=null&&i.length))return;const r=Mt(n.field);return i.map(a=>`(!length(data(${Mt(sn(a)+ah)})) || (${a}[${r}] && indexof(${a}[${r}], datum.value) >= 0))`).join(" || ")}const LF={direction:({direction:t})=>t,format:({fieldOrDatumDef:t,legend:e,config:n})=>{const{format:i,formatType:r}=e;return sG(t,t.type,i,r,n,!1)},formatType:({legend:t,fieldOrDatumDef:e,scaleType:n})=>{const{formatType:i}=t;return uG(i,e,n)},gradientLength:t=>{const{legend:e,legendConfig:n}=t;return e.gradientLength??n.gradientLength??m2t(t)},labelOverlap:({legend:t,legendConfig:e,scaleType:n})=>t.labelOverlap??e.labelOverlap??y2t(n),symbolType:({legend:t,markDef:e,channel:n,encoding:i})=>t.symbolType??f2t(e.type,n,i.shape,e.shape),title:({fieldOrDatumDef:t,config:e})=>jd(t,e,{allowDisabling:!0}),type:({legendType:t,scaleType:e,channel:n})=>{if(qd(n)&&Yo(e)){if(t==="gradient")return}else if(t==="symbol")return;return t},values:({fieldOrDatumDef:t,legend:e})=>c2t(e,t)};function c2t(t,e){const n=t.values;if(gt(n))return bG(e,n);if(It(n))return n}function f2t(t,e,n,i){if(e!=="shape"){const r=hM(n)??i;if(r)return r}switch(t){case"bar":case"rect":case"image":case"square":return"square";case"line":case"trail":case"rule":return"stroke";case"arc":case"point":case"circle":case"tick":case"geoshape":case"area":case"text":return"circle"}}function h2t(t){const{legend:e}=t;return Tn(e.type,d2t(t))}function d2t({channel:t,timeUnit:e,scaleType:n}){if(qd(t)){if(pe(["quarter","month","day"],e))return"symbol";if(Yo(n))return"gradient"}return"symbol"}function p2t({legendConfig:t,legendType:e,orient:n,legend:i}){return i.direction??t[e?"gradientDirection":"symbolDirection"]??g2t(n,e)}function g2t(t,e){switch(t){case"top":case"bottom":return"horizontal";case"left":case"right":case"none":case void 0:return;default:return e==="gradient"?"horizontal":void 0}}function m2t({legendConfig:t,model:e,direction:n,orient:i,scaleType:r}){const{gradientHorizontalMaxLength:a,gradientHorizontalMinLength:o,gradientVerticalMaxLength:s,gradientVerticalMinLength:l}=t;if(Yo(r))return n==="horizontal"?i==="top"||i==="bottom"?zF(e,"width",o,a):o:zF(e,"height",l,s)}function zF(t,e,n,i){return{signal:`clamp(${t.getSizeSignalRef(e).signal}, ${n}, ${i})`}}function y2t(t){if(pe(["quantile","threshold","log","symlog"],t))return"greedy"}function VZ(t){const e=pn(t)?v2t(t):w2t(t);return t.component.legends=e,e}function v2t(t){const{encoding:e}=t,n={};for(const i of[Tr,...qG]){const r=Un(e[i]);!r||!t.getScaleComponent(i)||i===Cr&&Ct(r)&&r.type===Xp||(n[i]=x2t(t,i))}return n}function _2t(t,e){const n=t.scaleName(e);if(t.mark==="trail"){if(e==="color")return{stroke:n};if(e==="size")return{strokeWidth:n}}return e==="color"?t.markDef.filled?{fill:n}:{stroke:n}:{[e]:n}}function b2t(t,e,n,i){switch(e){case"disable":return n!==void 0;case"values":return!!(n!=null&&n.values);case"title":if(e==="title"&&t===(i==null?void 0:i.title))return!0}return t===(n||{})[e]}function x2t(t,e){var $;let n=t.legend(e);const{markDef:i,encoding:r,config:a}=t,o=a.legend,s=new a2t({},_2t(t,e));Oxt(t,e,s);const l=n!==void 0?!n:o.disable;if(s.set("disable",l,n!==void 0),l)return s;n=n||{};const f=t.getScaleComponent(e).get("type"),d=Un(r[e]),p=Ct(d)?($=ni(d.timeUnit))==null?void 0:$.unit:void 0,m=n.orient||a.legend.orient||"right",_=h2t({legend:n,channel:e,timeUnit:p,scaleType:f}),b=p2t({legend:n,legendType:_,orient:m,legendConfig:o}),x={legend:n,channel:e,model:t,markDef:i,encoding:r,fieldOrDatumDef:d,legendConfig:o,config:a,scaleType:f,orient:m,legendType:_,direction:b};for(const D of ZZ){if(_==="gradient"&&D.startsWith("symbol")||_==="symbol"&&D.startsWith("gradient"))continue;const F=D in LF?LF[D](x):n[D];if(F!==void 0){const N=b2t(F,D,n,t.fieldDef(e));(N||a.legend[D]===void 0)&&s.set(D,F,N)}}const S=(n==null?void 0:n.encoding)??{},T=s.get("selections"),M={},k={fieldOrDatumDef:d,model:t,channel:e,legendCmpt:s,legendType:_};for(const D of["labels","legend","title","symbols","gradient","entries"]){const F=HZ(S[D]??{},t),N=D in NF?NF[D](F,k):F;N!==void 0&&!Ye(N)&&(M[D]={...T!=null&&T.length&&Ct(d)?{name:`${sn(d.field)}_legend_${D}`}:{},...T!=null&&T.length?{interactive:!!T}:{},update:N})}return Ye(M)||s.set("encode",M,!!(n!=null&&n.encoding)),s}function w2t(t){const{legends:e,resolve:n}=t.component;for(const i of t.children){VZ(i);for(const r of Et(i.component.legends))n.legend[r]=CD(t.component.resolve,r),n.legend[r]==="shared"&&(e[r]=QZ(e[r],i.component.legends[r]),e[r]||(n.legend[r]="independent",delete e[r]))}for(const i of Et(e))for(const r of t.children)r.component.legends[i]&&n.legend[i]==="shared"&&delete r.component.legends[i];return e}function QZ(t,e){var a,o,s,l;if(!t)return e.clone();const n=t.getWithExplicit("orient"),i=e.getWithExplicit("orient");if(n.explicit&&i.explicit&&n.value!==i.value)return;let r=!1;for(const f of ZZ){const d=dc(t.getWithExplicit(f),e.getWithExplicit(f),f,"legend",(p,m)=>{switch(f){case"symbolType":return E2t(p,m);case"title":return TH(p,m);case"type":return r=!0,jr("symbol")}return X2(p,m,f,"legend")});t.setWithExplicit(f,d)}return r&&((o=(a=t.implicit)==null?void 0:a.encode)!=null&&o.gradient&&Gb(t.implicit,["encode","gradient"]),(l=(s=t.explicit)==null?void 0:s.encode)!=null&&l.gradient&&Gb(t.explicit,["encode","gradient"])),t}function E2t(t,e){return e.value==="circle"?e:t}function S2t(t,e,n,i){var r,a;t.encode??(t.encode={}),(r=t.encode)[e]??(r[e]={}),(a=t.encode[e]).update??(a.update={}),t.encode[e].update[n]=i}function KZ(t){const e=t.component.legends,n={};for(const r of Et(e)){const a=t.getScaleComponent(r),o=Ne(a.get("domains"));if(n[o])for(const s of n[o])QZ(s,e[r])||n[o].push(e[r]);else n[o]=[e[r].clone()]}return Rn(n).flat().map(r=>A2t(r,t.config)).filter(r=>r!==void 0)}function A2t(t,e){var o,s,l;const{disable:n,labelExpr:i,selections:r,...a}=t.combine();if(!n){if(e.aria===!1&&a.aria==null&&(a.aria=!1),(o=a.encode)!=null&&o.symbols){const f=a.encode.symbols.update;f.fill&&f.fill.value!=="transparent"&&!f.stroke&&!a.stroke&&(f.stroke={value:"transparent"});for(const d of qG)a[d]&&delete f[d]}if(a.title||delete a.title,i!==void 0){let f=i;(l=(s=a.encode)==null?void 0:s.labels)!=null&&l.update&&It(a.encode.labels.update.text)&&(f=Qf(i,"datum.label",a.encode.labels.update.text.signal)),S2t(a,"labels","text",{signal:f})}return a}}function T2t(t){return Jp(t)||RD(t)?C2t(t):JZ(t)}function C2t(t){return t.children.reduce((e,n)=>e.concat(n.assembleProjections()),JZ(t))}function JZ(t){const e=t.component.projection;if(!e||e.merged)return[];const n=e.combine(),{name:i}=n;if(e.data){const r={signal:`[${e.size.map(o=>o.signal).join(", ")}]`},a=e.data.reduce((o,s)=>{const l=It(s)?s.signal:`data('${t.lookupDataSource(s)}')`;return pe(o,l)||o.push(l),o},[]);if(a.length<=0)throw new Error("Projection's fit didn't find any data sources");return[{name:i,size:r,fit:{signal:a.length>1?`[${a.join(", ")}]`:a[0]},...n}]}else return[{name:i,translate:{signal:"[width / 2, height / 2]"},...n}]}const M2t=["type","clipAngle","clipExtent","center","rotate","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];class tY extends Lu{constructor(n,i,r,a){super({...i},{name:n});yt(this,"specifiedProjection");yt(this,"size");yt(this,"data");yt(this,"merged",!1);this.specifiedProjection=i,this.size=r,this.data=a}get isFit(){return!!this.data}}function eY(t){t.component.projection=pn(t)?k2t(t):D2t(t)}function k2t(t){if(t.hasProjection){const e=di(t.specifiedProjection),n=!(e&&(e.scale!=null||e.translate!=null)),i=n?[t.getSizeSignalRef("width"),t.getSizeSignalRef("height")]:void 0,r=n?O2t(t):void 0,a=new tY(t.projectionName(!0),{...di(t.config.projection),...e},i,r);return a.get("type")||a.set("type","equalEarth",!1),a}}function O2t(t){const e=[],{encoding:n}=t;for(const i of[[bo,_o],[$a,xo]])(Un(n[i[0]])||Un(n[i[1]]))&&e.push({signal:t.getName(`geojson_${e.length}`)});return t.channelHasField(Cr)&&t.typedFieldDef(Cr).type===Xp&&e.push({signal:t.getName(`geojson_${e.length}`)}),e.length===0&&e.push(t.requestDataName(gn.Main)),e}function $2t(t,e){const n=v$(M2t,r=>!!(!zt(t.explicit,r)&&!zt(e.explicit,r)||zt(t.explicit,r)&&zt(e.explicit,r)&&Xr(t.get(r),e.get(r))));if(Xr(t.size,e.size)){if(n)return t;if(Xr(t.explicit,{}))return e;if(Xr(e.explicit,{}))return t}return null}function D2t(t){if(t.children.length===0)return;let e;for(const i of t.children)eY(i);const n=v$(t.children,i=>{const r=i.component.projection;if(r)if(e){const a=$2t(e,r);return a&&(e=a),!!a}else return e=r,!0;else return!0});if(e&&n){const i=t.projectionName(!0),r=new tY(i,e.specifiedProjection,e.size,ee(e.data));for(const a of t.children){const o=a.component.projection;o&&(o.isFit&&r.data.push(...a.component.projection.data),a.renameProjection(o.get("name"),i),o.merged=!0)}return r}}function R2t(t,e,n,i){if(Ly(e,n)){const r=pn(t)?t.axis(n)??t.legend(n)??{}:{},a=Ot(e,{expr:"datum"}),o=Ot(e,{expr:"datum",binSuffix:"end"});return{formulaAs:Ot(e,{binSuffix:"range",forAs:!0}),formula:$y(a,o,r.format,r.formatType,i)}}return{}}function nY(t,e){return`${vH(t)}_${e}`}function N2t(t,e){return{signal:t.getName(`${e}_bins`),extentSignal:t.getName(`${e}_extent`)}}function MD(t,e,n){const i=q2(n,void 0)??{},r=nY(i,e);return t.getName(`${r}_bins`)}function L2t(t){return"as"in t}function FF(t,e,n){let i,r;L2t(t)?i=Dt(t.as)?[t.as,`${t.as}_end`]:[t.as[0],t.as[1]]:i=[Ot(t,{forAs:!0}),Ot(t,{binSuffix:"end",forAs:!0})];const a={...q2(e,void 0)},o=nY(a,t.field),{signal:s,extentSignal:l}=N2t(n,o);if($2(a.extent)){const d=a.extent;r=NZ(n,d.param,d),delete a.extent}const f={bin:a,field:t.field,as:[i],...s?{signal:s}:{},...l?{extentSignal:l}:{},...r?{span:r}:{}};return{key:o,binComponent:f}}class Jo extends Be{constructor(n,i){super(n);yt(this,"bins");this.bins=i}clone(){return new Jo(null,ee(this.bins))}static makeFromEncoding(n,i){const r=i.reduceFieldDef((a,o,s)=>{if(ur(o)&&Ke(o.bin)){const{key:l,binComponent:f}=FF(o,o.bin,i);a[l]={...f,...a[l],...R2t(i,o,s,i.config)}}return a},{});return Ye(r)?null:new Jo(n,r)}static makeFromTransform(n,i,r){const{key:a,binComponent:o}=FF(i,i.bin,r);return new Jo(n,{[a]:o})}merge(n,i){for(const r of Et(n.bins))r in this.bins?(i(n.bins[r].signal,this.bins[r].signal),this.bins[r].as=Zo([...this.bins[r].as,...n.bins[r].as],ye)):this.bins[r]=n.bins[r];for(const r of n.children)n.removeChild(r),r.parent=this;n.remove()}producedFields(){return new Set(Rn(this.bins).map(n=>n.as).flat(2))}dependentFields(){return new Set(Rn(this.bins).map(n=>n.field))}hash(){return`Bin ${ye(this.bins)}`}assemble(){return Rn(this.bins).flatMap(n=>{const i=[],[r,...a]=n.as,{extent:o,...s}=n.bin,l={type:"bin",field:Oa(n.field),as:r,signal:n.signal,...$2(o)?{extent:null}:{extent:o},...n.span?{span:{signal:`span(${n.span})`}}:{},...s};!o&&n.extentSignal&&(i.push({type:"extent",field:Oa(n.field),signal:n.extentSignal}),l.extent={signal:n.extentSignal}),i.push(l);for(const f of a)for(let d=0;d<2;d++)i.push({type:"formula",expr:Ot({field:r[d]},{expr:"datum"}),as:f[d]});return n.formula&&i.push({type:"formula",expr:n.formula,as:n.formulaAs}),i})}}function z2t(t,e,n,i){var a;const r=pn(i)?i.encoding[_s(e)]:void 0;if(ur(n)&&pn(i)&&hG(n,r,i.markDef,i.config)){t.add(Ot(n,{})),t.add(Ot(n,{suffix:"end"}));const{mark:o,markDef:s,config:l}=i,f=hc({fieldDef:n,markDef:s,config:l});q0(o)&&f!==.5&&Cn(e)&&(t.add(Ot(n,{suffix:W2})),t.add(Ot(n,{suffix:V2}))),n.bin&&Ly(n,e)&&t.add(Ot(n,{binSuffix:"range"}))}else if(lH(e)){const o=uH(e);t.add(i.getName(o))}else t.add(Ot(n));return wh(n)&&Evt((a=n.scale)==null?void 0:a.range)&&t.add(n.scale.range.field),t}function F2t(t,e){for(const n of Et(e)){const i=e[n];for(const r of Et(i))n in t?t[n][r]=new Set([...t[n][r]??[],...i[r]]):t[n]={[r]:i[r]}}}class ao extends Be{constructor(n,i,r){super(n);yt(this,"dimensions");yt(this,"measures");this.dimensions=i,this.measures=r}clone(){return new ao(null,new Set(this.dimensions),ee(this.measures))}get groupBy(){return this.dimensions}static makeFromEncoding(n,i){let r=!1;i.forEachFieldDef(s=>{s.aggregate&&(r=!0)});const a={},o=new Set;return!r||(i.forEachFieldDef((s,l)=>{const{aggregate:f,field:d}=s;if(f)if(f==="count")a["*"]??(a["*"]={}),a["*"].count=new Set([Ot(s,{forAs:!0})]);else{if(Su(f)||Mc(f)){const p=Su(f)?"argmin":"argmax",m=f[p];a[m]??(a[m]={}),a[m][p]=new Set([Ot({op:p,field:m},{forAs:!0})])}else a[d]??(a[d]={}),a[d][f]=new Set([Ot(s,{forAs:!0})]);bs(l)&&i.scaleDomain(l)==="unaggregated"&&(a[d]??(a[d]={}),a[d].min=new Set([Ot({field:d,aggregate:"min"},{forAs:!0})]),a[d].max=new Set([Ot({field:d,aggregate:"max"},{forAs:!0})]))}else z2t(o,l,s,i)}),o.size+Et(a).length===0)?null:new ao(n,o,a)}static makeFromTransform(n,i){var o;const r=new Set,a={};for(const s of i.aggregate){const{op:l,field:f,as:d}=s;l&&(l==="count"?(a["*"]??(a["*"]={}),a["*"].count=new Set([d||Ot(s,{forAs:!0})])):(a[f]??(a[f]={}),(o=a[f])[l]??(o[l]=new Set),a[f][l].add(d||Ot(s,{forAs:!0}))))}for(const s of i.groupby??[])r.add(s);return r.size+Et(a).length===0?null:new ao(n,r,a)}merge(n){return tH(this.dimensions,n.dimensions)?(F2t(this.measures,n.measures),!0):(X1t("different dimensions, cannot merge"),!1)}addDimensions(n){n.forEach(this.dimensions.add,this.dimensions)}dependentFields(){return new Set([...this.dimensions,...Et(this.measures)])}producedFields(){const n=new Set;for(const i of Et(this.measures))for(const r of Et(this.measures[i])){const a=this.measures[i][r];a.size===0?n.add(`${r}_${i}`):a.forEach(n.add,n)}return n}hash(){return`Aggregate ${ye({dimensions:this.dimensions,measures:this.measures})}`}assemble(){const n=[],i=[],r=[];for(const o of Et(this.measures))for(const s of Et(this.measures[o]))for(const l of this.measures[o][s])r.push(l),n.push(s),i.push(o==="*"?null:Oa(o));return{type:"aggregate",groupby:[...this.dimensions].map(Oa),ops:n,fields:i,as:r}}}class Qp extends Be{constructor(n,i,r,a){super(n);yt(this,"model");yt(this,"name");yt(this,"data");yt(this,"column");yt(this,"row");yt(this,"facet");yt(this,"childModel");this.model=i,this.name=r,this.data=a;for(const o of wa){const s=i.facet[o];if(s){const{bin:l,sort:f}=s;this[o]={name:i.getName(`${o}_domain`),fields:[Ot(s),...Ke(l)?[Ot(s,{binSuffix:"end"})]:[]],...vu(f)?{sortField:f}:gt(f)?{sortIndexField:Ap(s,o)}:{}}}}this.childModel=i.child}hash(){let n="Facet";for(const i of wa)this[i]&&(n+=` ${i.charAt(0)}:${ye(this[i])}`);return n}get fields(){var i;const n=[];for(const r of wa)(i=this[r])!=null&&i.fields&&n.push(...this[r].fields);return n}dependentFields(){const n=new Set(this.fields);for(const i of wa)this[i]&&(this[i].sortField&&n.add(this[i].sortField.field),this[i].sortIndexField&&n.add(this[i].sortIndexField));return n}producedFields(){return new Set}getSource(){return this.name}getChildIndependentFieldsWithStep(){const n={};for(const i of Ru){const r=this.childModel.component.scales[i];if(r&&!r.merged){const a=r.get("type"),o=r.get("range");if(ii(a)&&_h(o)){const s=ew(this.childModel,i),l=DD(s);l?n[i]=l:Tt(D$(i))}}}return n}assembleRowColumnHeaderData(n,i,r){const a={row:"y",column:"x",facet:void 0}[n],o=[],s=[],l=[];a&&r&&r[a]&&(i?(o.push(`distinct_${r[a]}`),s.push("max")):(o.push(r[a]),s.push("distinct")),l.push(`distinct_${r[a]}`));const{sortField:f,sortIndexField:d}=this[n];if(f){const{op:p=B2,field:m}=f;o.push(m),s.push(p),l.push(Ot(f,{forAs:!0}))}else d&&(o.push(d),s.push("max"),l.push(d));return{name:this[n].name,source:i??this.data,transform:[{type:"aggregate",groupby:this[n].fields,...o.length?{fields:o,ops:s,as:l}:{}}]}}assembleFacetHeaderData(n){var f,d;const{columns:i}=this.model.layout,{layoutHeaders:r}=this.model.component,a=[],o={};for(const p of SD){for(const m of AD){const _=((f=r[p])==null?void 0:f[m])??[];for(const b of _)if(((d=b.axes)==null?void 0:d.length)>0){o[p]=!0;break}}if(o[p]){const m=`length(data("${this.facet.name}"))`,_=p==="row"?i?{signal:`ceil(${m} / ${i})`}:1:i?{signal:`min(${m}, ${i})`}:{signal:m};a.push({name:`${this.facet.name}_${p}`,transform:[{type:"sequence",start:0,stop:_}]})}}const{row:s,column:l}=o;return(s||l)&&a.unshift(this.assembleRowColumnHeaderData("facet",null,n)),a}assemble(){const n=[];let i=null;const r=this.getChildIndependentFieldsWithStep(),{column:a,row:o,facet:s}=this;if(a&&o&&(r.x||r.y)){i=`cross_${this.column.name}_${this.row.name}`;const l=[].concat(r.x??[],r.y??[]),f=l.map(()=>"distinct");n.push({name:i,source:this.data,transform:[{type:"aggregate",groupby:this.fields,fields:l,ops:f}]})}for(const l of[yu,mu])this[l]&&n.push(this.assembleRowColumnHeaderData(l,i,r));if(s){const l=this.assembleFacetHeaderData(r);l&&n.push(...l)}return n}}function PF(t){return t.startsWith("'")&&t.endsWith("'")||t.startsWith('"')&&t.endsWith('"')?t.slice(1,-1):t}function P2t(t,e){const n=x$(t);if(e==="number")return`toNumber(${n})`;if(e==="boolean")return`toBoolean(${n})`;if(e==="string")return`toString(${n})`;if(e==="date")return`toDate(${n})`;if(e==="flatten")return n;if(e.startsWith("date:")){const i=PF(e.slice(5,e.length));return`timeParse(${n},'${i}')`}else if(e.startsWith("utc:")){const i=PF(e.slice(4,e.length));return`utcParse(${n},'${i}')`}else return Tt(i1t(e)),null}function B2t(t){const e={};return C_(t.filter,n=>{if(jH(n)){let i=null;P$(n)?i=Zr(n.equal):U$(n)?i=Zr(n.lte):B$(n)?i=Zr(n.lt):I$(n)?i=Zr(n.gt):q$(n)?i=Zr(n.gte):j$(n)?i=n.range[0]:H$(n)&&(i=(n.oneOf??n.in)[0]),i&&(bh(i)?e[n.field]="date":Me(i)?e[n.field]="number":Dt(i)&&(e[n.field]="string")),n.timeUnit&&(e[n.field]="date")}}),e}function U2t(t){const e={};function n(i){xp(i)?e[i.field]="date":i.type==="quantitative"&&$yt(i.aggregate)?e[i.field]="number":gp(i.field)>1?i.field in e||(e[i.field]="flatten"):wh(i)&&vu(i.sort)&&gp(i.sort.field)>1&&(i.sort.field in e||(e[i.sort.field]="flatten"))}if((pn(t)||Jr(t))&&t.forEachFieldDef((i,r)=>{if(ur(i))n(i);else{const a=yh(r),o=t.fieldDef(a);n({...i,type:o.type})}}),pn(t)){const{mark:i,markDef:r,encoding:a}=t;if(kc(i)&&!t.encoding.order){const o=r.orient==="horizontal"?"y":"x",s=a[o];Ct(s)&&s.type==="quantitative"&&!(s.field in e)&&(e[s.field]="number")}}return e}function I2t(t){const e={};if(pn(t)&&t.component.selection)for(const n of Et(t.component.selection)){const i=t.component.selection[n];for(const r of i.project.items)!r.channel&&gp(r.field)>1&&(e[r.field]="flatten")}return e}class Ni extends Be{constructor(n,i){super(n);yt(this,"_parse");this._parse=i}clone(){return new Ni(null,ee(this._parse))}hash(){return`Parse ${ye(this._parse)}`}static makeExplicit(n,i,r){var s;let a={};const o=i.data;return!Jl(o)&&((s=o==null?void 0:o.format)!=null&&s.parse)&&(a=o.format.parse),this.makeWithAncestors(n,a,{},r)}static makeWithAncestors(n,i,r,a){for(const l of Et(r)){const f=a.getWithExplicit(l);f.value!==void 0&&(f.explicit||f.value===r[l]||f.value==="derived"||r[l]==="flatten"?delete r[l]:Tt(X4(l,r[l],f.value)))}for(const l of Et(i)){const f=a.get(l);f!==void 0&&(f===i[l]?delete i[l]:Tt(X4(l,i[l],f)))}const o=new Lu(i,r);a.copyAll(o);const s={};for(const l of Et(o.combine())){const f=o.get(l);f!==null&&(s[l]=f)}return Et(s).length===0||a.parseNothing?null:new Ni(n,s)}get parse(){return this._parse}merge(n){this._parse={...this._parse,...n.parse},n.remove()}assembleFormatParse(){const n={};for(const i of Et(this._parse)){const r=this._parse[i];gp(i)===1&&(n[i]=r)}return n}producedFields(){return new Set(Et(this._parse))}dependentFields(){return new Set(Et(this._parse))}assembleTransforms(n=!1){return Et(this._parse).filter(i=>n?gp(i)>1:!0).map(i=>{const r=P2t(i,this._parse[i]);return r?{type:"formula",expr:r,as:Zp(i)}:null}).filter(i=>i!==null)}}class pc extends Be{clone(){return new pc(null)}constructor(e){super(e)}dependentFields(){return new Set}producedFields(){return new Set([ho])}hash(){return"Identifier"}assemble(){return{type:"identifier",as:ho}}}class Py extends Be{constructor(n,i){super(n);yt(this,"params");this.params=i}clone(){return new Py(null,this.params)}dependentFields(){return new Set}producedFields(){}hash(){return`Graticule ${ye(this.params)}`}assemble(){return{type:"graticule",...this.params===!0?{}:this.params}}}class By extends Be{constructor(n,i){super(n);yt(this,"params");this.params=i}clone(){return new By(null,this.params)}dependentFields(){return new Set}producedFields(){return new Set([this.params.as??"data"])}hash(){return`Hash ${ye(this.params)}`}assemble(){return{type:"sequence",...this.params}}}class oh extends Be{constructor(n){super(null);yt(this,"_data");yt(this,"_name");yt(this,"_generator");n??(n={name:"source"});let i;if(Jl(n)||(i=n.format?{...Kr(n.format,["parse"])}:{}),j0(n))this._data={values:n.values};else if(wp(n)){if(this._data={url:n.url},!i.type){let r=/(?:\.([^.]+))?$/.exec(n.url)[1];pe(["json","csv","tsv","dsv","topojson"],r)||(r="json"),i.type=r}}else oZ(n)?this._data={values:[{type:"Sphere"}]}:(rZ(n)||Jl(n))&&(this._data={});this._generator=Jl(n),n.name&&(this._name=n.name),i&&!Ye(i)&&(this._data.format=i)}dependentFields(){return new Set}producedFields(){}get data(){return this._data}hasName(){return!!this._name}get isGenerator(){return this._generator}get dataName(){return this._name}set dataName(n){this._name=n}set parent(n){throw new Error("Source nodes have to be roots.")}remove(){throw new Error("Source nodes are roots and cannot be removed.")}hash(){throw new Error("Cannot hash sources")}assemble(){return{name:this._name,...this._data,transform:[]}}}function kD(t){return t instanceof oh||t instanceof Py||t instanceof By}var Zd;class OD{constructor(){jL(this,Zd);cS(this,Zd,!1)}setModified(){cS(this,Zd,!0)}get modifiedFlag(){return qL(this,Zd)}}Zd=new WeakMap;class Eh extends OD{getNodeDepths(e,n,i){i.set(e,n);for(const r of e.children)this.getNodeDepths(r,n+1,i);return i}optimize(e){const i=[...this.getNodeDepths(e,0,new Map).entries()].sort((r,a)=>a[1]-r[1]);for(const r of i)this.run(r[0]);return this.modifiedFlag}}class $D extends OD{optimize(e){this.run(e);for(const n of e.children)this.optimize(n);return this.modifiedFlag}}class q2t extends $D{mergeNodes(e,n){const i=n.shift();for(const r of n)e.removeChild(r),r.parent=i,r.remove()}run(e){const n=e.children.map(r=>r.hash()),i={};for(let r=0;r<n.length;r++)i[n[r]]===void 0?i[n[r]]=[e.children[r]]:i[n[r]].push(e.children[r]);for(const r of Et(i))i[r].length>1&&(this.setModified(),this.mergeNodes(e,i[r]))}}class j2t extends $D{constructor(n){super();yt(this,"requiresSelectionId");this.requiresSelectionId=n&&ED(n)}run(n){n instanceof pc&&(this.requiresSelectionId&&(kD(n.parent)||n.parent instanceof ao||n.parent instanceof Ni)||(this.setModified(),n.remove()))}}class H2t extends OD{optimize(e){return this.run(e,new Set),this.modifiedFlag}run(e,n){let i=new Set;e instanceof Qo&&(i=e.producedFields(),_$(i,n)&&(this.setModified(),e.removeFormulas(n),e.producedFields.length===0&&e.remove()));for(const r of e.children)this.run(r,new Set([...n,...i]))}}class G2t extends $D{constructor(){super()}run(e){e instanceof wr&&!e.isRequired()&&(this.setModified(),e.remove())}}class Z2t extends Eh{run(e){if(!kD(e)&&!(e.numChildren()>1)){for(const n of e.children)if(n instanceof Ni)if(e instanceof Ni)this.setModified(),e.merge(n);else{if(b$(e.producedFields(),n.dependentFields()))continue;this.setModified(),n.swapWithParent()}}}}class Y2t extends Eh{run(e){const n=[...e.children],i=e.children.filter(r=>r instanceof Ni);if(e.numChildren()>1&&i.length>=1){const r={},a=new Set;for(const o of i){const s=o.parse;for(const l of Et(s))l in r?r[l]!==s[l]&&a.add(l):r[l]=s[l]}for(const o of a)delete r[o];if(!Ye(r)){this.setModified();const o=new Ni(e,r);for(const s of n){if(s instanceof Ni)for(const l of Et(r))delete s.parse[l];e.removeChild(s),s.parent=o,s instanceof Ni&&Et(s.parse).length===0&&s.remove()}}}}}class X2t extends Eh{run(e){e instanceof wr||e.numChildren()>0||e instanceof Qp||e instanceof oh||(this.setModified(),e.remove())}}class W2t extends Eh{run(e){const n=e.children.filter(r=>r instanceof Qo),i=n.pop();for(const r of n)this.setModified(),i.merge(r)}}class V2t extends Eh{run(e){const n=e.children.filter(r=>r instanceof ao),i={};for(const r of n){const a=ye(r.groupBy);a in i||(i[a]=[]),i[a].push(r)}for(const r of Et(i)){const a=i[r];if(a.length>1){const o=a.pop();for(const s of a)o.merge(s)&&(e.removeChild(s),s.parent=o,s.remove(),this.setModified())}}}}class Q2t extends Eh{constructor(n){super();yt(this,"model");this.model=n}run(n){const i=!(kD(n)||n instanceof Vp||n instanceof Ni||n instanceof pc),r=[],a=[];for(const o of n.children)o instanceof Jo&&(i&&!b$(n.producedFields(),o.dependentFields())?r.push(o):a.push(o));if(r.length>0){const o=r.pop();for(const s of r)o.merge(s,this.model.renameSignal.bind(this.model));this.setModified(),n instanceof Jo?n.merge(o,this.model.renameSignal.bind(this.model)):o.swapWithParent()}if(a.length>1){const o=a.pop();for(const s of a)o.merge(s,this.model.renameSignal.bind(this.model));this.setModified()}}}class K2t extends Eh{run(e){const n=[...e.children];if(!pp(n,o=>o instanceof wr)||e.numChildren()<=1)return;const r=[];let a;for(const o of n)if(o instanceof wr){let s=o;for(;s.numChildren()===1;){const[l]=s.children;if(l instanceof wr)s=l;else break}r.push(...s.children),a?(e.removeChild(o),o.parent=a.parent,a.parent.removeChild(a),a.parent=s,this.setModified()):a=s}else r.push(o);if(r.length){this.setModified();for(const o of r)o.parent.removeChild(o),o.parent=a}}}class Sh extends Be{constructor(n,i){super(n);yt(this,"transform");this.transform=i}clone(){return new Sh(null,ee(this.transform))}addDimensions(n){this.transform.groupby=Zo(this.transform.groupby.concat(n),i=>i)}dependentFields(){const n=new Set;return this.transform.groupby&&this.transform.groupby.forEach(n.add,n),this.transform.joinaggregate.map(i=>i.field).filter(i=>i!==void 0).forEach(n.add,n),n}producedFields(){return new Set(this.transform.joinaggregate.map(this.getDefaultName))}getDefaultName(n){return n.as??Ot(n)}hash(){return`JoinAggregateTransform ${ye(this.transform)}`}assemble(){const n=[],i=[],r=[];for(const o of this.transform.joinaggregate)i.push(o.op),r.push(this.getDefaultName(o)),n.push(o.field===void 0?null:o.field);const a=this.transform.groupby;return{type:"joinaggregate",as:r,ops:i,fields:n,...a!==void 0?{groupby:a}:{}}}}class Cp extends Be{constructor(n,i){super(n);yt(this,"filter");this.filter=i}clone(){return new Cp(null,{...this.filter})}static make(n,i,r){const{config:a,markDef:o}=i,{marks:s,scales:l}=r;if(s==="include-invalid-values"&&l==="include-invalid-values")return null;const f=i.reduceFieldDef((d,p,m)=>{const _=bs(m)&&i.getScaleComponent(m);if(_){const b=_.get("type"),{aggregate:x}=p,S=Q$({scaleChannel:m,markDef:o,config:a,scaleType:b,isCountAggregate:O2(x)});S!=="show"&&S!=="always-valid"&&(d[p.field]=p)}return d},{});return Et(f).length?new Cp(n,f):null}dependentFields(){return new Set(Et(this.filter))}producedFields(){return new Set}hash(){return`FilterInvalid ${ye(this.filter)}`}assemble(){const n=Et(this.filter).reduce((i,r)=>{const a=this.filter[r],o=Ot(a,{expr:"datum"});return a!==null&&(a.type==="temporal"?i.push(`(isDate(${o}) || (${dM(o)}))`):a.type==="quantitative"&&i.push(dM(o))),i},[]);return n.length>0?{type:"filter",expr:n.join(" && ")}:null}}function dM(t){return`isValid(${t}) && isFinite(+${t})`}function J2t(t){return t.stack.stackBy.reduce((e,n)=>{const i=n.fieldDef,r=Ot(i);return r&&e.push(r),e},[])}function twt(t){return gt(t)&&t.every(e=>Dt(e))&&t.length>1}class bu extends Be{constructor(n,i){super(n);yt(this,"_stack");this._stack=i}clone(){return new bu(null,ee(this._stack))}static makeFromTransform(n,i){const{stack:r,groupby:a,as:o,offset:s="zero"}=i,l=[],f=[];if(i.sort!==void 0)for(const m of i.sort)l.push(m.field),f.push(Tn(m.order,"ascending"));const d={field:l,order:f};let p;return twt(o)?p=o:Dt(o)?p=[o,`${o}_end`]:p=[`${i.stack}_start`,`${i.stack}_end`],new bu(n,{dimensionFieldDefs:[],stackField:r,groupby:a,offset:s,sort:d,facetby:[],as:p})}static makeFromEncoding(n,i){const r=i.stack,{encoding:a}=i;if(!r)return null;const{groupbyChannels:o,fieldChannel:s,offset:l,impute:f}=r,d=o.map(b=>{const x=a[b];return fo(x)}).filter(b=>!!b),p=J2t(i),m=i.encoding.order;let _;if(gt(m)||Ct(m))_=EH(m);else{const b=dG(m)?m.sort:s==="y"?"descending":"ascending";_=p.reduce((x,S)=>(x.field.includes(S)||(x.field.push(S),x.order.push(b)),x),{field:[],order:[]})}return new bu(n,{dimensionFieldDefs:d,stackField:i.vgField(s),facetby:[],stackby:p,sort:_,offset:l,impute:f,as:[i.vgField(s,{suffix:"start",forAs:!0}),i.vgField(s,{suffix:"end",forAs:!0})]})}get stack(){return this._stack}addDimensions(n){this._stack.facetby.push(...n)}dependentFields(){const n=new Set;return n.add(this._stack.stackField),this.getGroupbyFields().forEach(n.add,n),this._stack.facetby.forEach(n.add,n),this._stack.sort.field.forEach(n.add,n),n}producedFields(){return new Set(this._stack.as)}hash(){return`Stack ${ye(this._stack)}`}getGroupbyFields(){const{dimensionFieldDefs:n,impute:i,groupby:r}=this._stack;return n.length>0?n.map(a=>a.bin?i?[Ot(a,{binSuffix:"mid"})]:[Ot(a,{}),Ot(a,{binSuffix:"end"})]:[Ot(a)]).flat():r??[]}assemble(){const n=[],{facetby:i,dimensionFieldDefs:r,stackField:a,stackby:o,sort:s,offset:l,impute:f,as:d}=this._stack;if(f)for(const p of r){const{bandPosition:m=.5,bin:_}=p;if(_){const b=Ot(p,{expr:"datum"}),x=Ot(p,{expr:"datum",binSuffix:"end"});n.push({type:"formula",expr:`${dM(b)} ? ${m}*${b}+${1-m}*${x} : ${b}`,as:Ot(p,{binSuffix:"mid",forAs:!0})})}n.push({type:"impute",field:a,groupby:[...o,...i],key:Ot(p,{binSuffix:"mid"}),method:"value",value:0})}return n.push({type:"stack",groupby:[...this.getGroupbyFields(),...i],field:a,sort:s,as:d,offset:l}),n}}class Kp extends Be{constructor(n,i){super(n);yt(this,"transform");this.transform=i}clone(){return new Kp(null,ee(this.transform))}addDimensions(n){this.transform.groupby=Zo(this.transform.groupby.concat(n),i=>i)}dependentFields(){const n=new Set;return(this.transform.groupby??[]).forEach(n.add,n),(this.transform.sort??[]).forEach(i=>n.add(i.field)),this.transform.window.map(i=>i.field).filter(i=>i!==void 0).forEach(n.add,n),n}producedFields(){return new Set(this.transform.window.map(this.getDefaultName))}getDefaultName(n){return n.as??Ot(n)}hash(){return`WindowTransform ${ye(this.transform)}`}assemble(){const n=[],i=[],r=[],a=[];for(const m of this.transform.window)i.push(m.op),r.push(this.getDefaultName(m)),a.push(m.param===void 0?null:m.param),n.push(m.field===void 0?null:m.field);const o=this.transform.frame,s=this.transform.groupby;if(o&&o[0]===null&&o[1]===null&&i.every(m=>O$(m)))return{type:"joinaggregate",as:r,ops:i,fields:n,...s!==void 0?{groupby:s}:{}};const l=[],f=[];if(this.transform.sort!==void 0)for(const m of this.transform.sort)l.push(m.field),f.push(m.order??"ascending");const d={field:l,order:f},p=this.transform.ignorePeers;return{type:"window",params:a,as:r,ops:i,fields:n,sort:d,...p!==void 0?{ignorePeers:p}:{},...s!==void 0?{groupby:s}:{},...o!==void 0?{frame:o}:{}}}}function ewt(t){function e(n){if(!(n instanceof Qp)){const i=n.clone();if(i instanceof wr){const r=gM+i.getSource();i.setSource(r),t.model.component.data.outputNodes[r]=i}else(i instanceof ao||i instanceof bu||i instanceof Kp||i instanceof Sh)&&i.addDimensions(t.fields);for(const r of n.children.flatMap(e))r.parent=i;return[i]}return n.children.flatMap(e)}return e}function pM(t){if(t instanceof Qp)if(t.numChildren()===1&&!(t.children[0]instanceof wr)){const e=t.children[0];(e instanceof ao||e instanceof bu||e instanceof Kp||e instanceof Sh)&&e.addDimensions(t.fields),e.swapWithParent(),pM(t)}else{const e=t.model.component.data.main;iY(e);const n=ewt(t),i=t.children.map(n).flat();for(const r of i)r.parent=e}else t.children.map(pM)}function iY(t){if(t instanceof wr&&t.type===gn.Main&&t.numChildren()===1){const e=t.children[0];e instanceof Qp||(e.swapWithParent(),iY(t))}}const gM="scale_",Xv=5;function mM(t){for(const e of t){for(const n of e.children)if(n.parent!==e)return!1;if(!mM(e.children))return!1}return!0}function Ga(t,e){let n=!1;for(const i of e)n=t.optimize(i)||n;return n}function BF(t,e,n){let i=t.sources,r=!1;return r=Ga(new G2t,i)||r,r=Ga(new j2t(e),i)||r,i=i.filter(a=>a.numChildren()>0),r=Ga(new X2t,i)||r,i=i.filter(a=>a.numChildren()>0),n||(r=Ga(new Z2t,i)||r,r=Ga(new Q2t(e),i)||r,r=Ga(new H2t,i)||r,r=Ga(new Y2t,i)||r,r=Ga(new V2t,i)||r,r=Ga(new W2t,i)||r,r=Ga(new q2t,i)||r,r=Ga(new K2t,i)||r),t.sources=i,r}function nwt(t,e){mM(t.sources);let n=0,i=0;for(let r=0;r<Xv&&BF(t,e,!0);r++)n++;t.sources.map(pM);for(let r=0;r<Xv&&BF(t,e,!1);r++)i++;mM(t.sources),Math.max(n,i)===Xv&&Tt(`Maximum optimization runs(${Xv}) reached.`)}class Vn{constructor(e){yt(this,"signal");Object.defineProperty(this,"signal",{enumerable:!0,get:e})}static fromName(e,n){return new Vn(()=>e(n))}}function rY(t){pn(t)?iwt(t):rwt(t)}function iwt(t){const e=t.component.scales;for(const n of Et(e)){const i=owt(t,n);if(e[n].setWithExplicit("domains",i),uwt(t,n),t.component.data.isFaceted){let a=t;for(;!Jr(a)&&a.parent;)a=a.parent;if(a.component.resolve.scale[n]==="shared")for(const s of i.value)hu(s)&&(s.data=gM+s.data.replace(gM,""))}}}function rwt(t){for(const n of t.children)rY(n);const e=t.component.scales;for(const n of Et(e)){let i,r=null;for(const a of t.children){const o=a.component.scales[n];if(o){i===void 0?i=o.getWithExplicit("domains"):i=dc(i,o.getWithExplicit("domains"),"domains","scale",yM);const s=o.get("selectionExtent");r&&s&&r.param!==s.param&&Tt(Vyt),r=s}}e[n].setWithExplicit("domains",i),r&&e[n].set("selectionExtent",r,!0)}}function awt(t,e,n,i){if(t==="unaggregated"){const{valid:r,reason:a}=UF(e,n);if(!r){Tt(a);return}}else if(t===void 0&&i.useUnaggregatedDomain){const{valid:r}=UF(e,n);if(r)return"unaggregated"}return t}function owt(t,e){const n=t.getScaleComponent(e).get("type"),{encoding:i}=t,r=awt(t.scaleDomain(e),t.typedFieldDef(e),n,t.config.scale);return r!==t.scaleDomain(e)&&(t.specifiedScales[e]={...t.specifiedScales[e],domain:r}),e==="x"&&Un(i.x2)?Un(i.x)?dc(Dl(n,r,t,"x"),Dl(n,r,t,"x2"),"domain","scale",yM):Dl(n,r,t,"x2"):e==="y"&&Un(i.y2)?Un(i.y)?dc(Dl(n,r,t,"y"),Dl(n,r,t,"y2"),"domain","scale",yM):Dl(n,r,t,"y2"):Dl(n,r,t,e)}function swt(t,e,n){return t.map(i=>({signal:`{data: ${j2(i,{timeUnit:n,type:e})}}`}))}function LA(t,e,n){var r;const i=(r=ni(n))==null?void 0:r.unit;return e==="temporal"||i?swt(t,e,i):[t]}function Dl(t,e,n,i){const{encoding:r,markDef:a,mark:o,config:s,stack:l}=n,f=Un(r[i]),{type:d}=f,p=f.timeUnit,m=txt({invalid:os("invalid",a,s),isPath:kc(o)});if(wvt(e)){const x=Dl(t,void 0,n,i),S=LA(e.unionWith,d,p);return Io([...S,...x.value])}else{if(It(e))return Io([e]);if(e&&e!=="unaggregated"&&!VH(e))return Io(LA(e,d,p))}if(l&&i===l.fieldChannel){if(l.offset==="normalize")return jr([[0,1]]);const x=n.requestDataName(m);return jr([{data:x,field:n.vgField(i,{suffix:"start"})},{data:x,field:n.vgField(i,{suffix:"end"})}])}const _=bs(i)&&Ct(f)?lwt(n,i,t):void 0;if(xs(f)){const x=LA([f.datum],d,p);return jr(x)}const b=f;if(e==="unaggregated"){const{field:x}=f;return jr([{data:n.requestDataName(m),field:Ot({field:x,aggregate:"min"})},{data:n.requestDataName(m),field:Ot({field:x,aggregate:"max"})}])}else if(Ke(b.bin)){if(ii(t))return jr(t==="bin-ordinal"?[]:[{data:U0(_)?n.requestDataName(m):n.requestDataName(gn.Raw),field:n.vgField(i,Ly(b,i)?{binSuffix:"range"}:{}),sort:_===!0||!Rt(_)?{field:n.vgField(i,{}),op:"min"}:_}]);{const{bin:x}=b;if(Ke(x)){const S=MD(n,b.field,x);return jr([new Vn(()=>{const T=n.getSignalName(S);return`[${T}.start, ${T}.stop]`})])}else return jr([{data:n.requestDataName(m),field:n.vgField(i,{})}])}}else if(b.timeUnit&&pe(["time","utc"],t)){const x=r[_s(i)];if(hG(b,x,a,s)){const S=n.requestDataName(m),T=hc({fieldDef:b,fieldDef2:x,markDef:a,config:s}),M=q0(o)&&T!==.5&&Cn(i);return jr([{data:S,field:n.vgField(i,M?{suffix:W2}:{})},{data:S,field:n.vgField(i,{suffix:M?V2:"end"})}])}}return jr(_?[{data:U0(_)?n.requestDataName(m):n.requestDataName(gn.Raw),field:n.vgField(i),sort:_}]:[{data:n.requestDataName(m),field:n.vgField(i)}])}function zA(t,e){const{op:n,field:i,order:r}=t;return{op:n??(e?"sum":B2),...i?{field:Oa(i)}:{},...r?{order:r}:{}}}function uwt(t,e){var s;const n=t.component.scales[e],i=t.specifiedScales[e].domain,r=(s=t.fieldDef(e))==null?void 0:s.bin,a=VH(i)?i:void 0,o=vh(r)&&$2(r.extent)?r.extent:void 0;(a||o)&&n.set("selectionExtent",a??o,!0)}function lwt(t,e,n){if(!ii(n))return;const i=t.fieldDef(e),r=i.sort;if(cG(r))return{op:"min",field:Ap(i,e),order:"ascending"};const{stack:a}=t,o=a?new Set([...a.groupbyFields,...a.stackBy.map(s=>s.fieldDef.field)]):void 0;if(vu(r)){const s=a&&!o.has(r.field);return zA(r,s)}else if(t_t(r)){const{encoding:s,order:l}=r,f=t.fieldDef(s),{aggregate:d,field:p}=f,m=a&&!o.has(p);if(Su(d)||Mc(d))return zA({field:Ot(f),order:l},m);if(O$(d)||!d)return zA({op:d,field:p,order:l},m)}else{if(r==="descending")return{op:"min",field:t.vgField(e),order:"descending"};if(pe(["ascending",void 0],r))return!0}}function UF(t,e){const{aggregate:n,type:i}=t;return n?Dt(n)&&!Ryt.has(n)?{valid:!1,reason:A1t(n)}:i==="quantitative"&&e==="log"?{valid:!1,reason:T1t(t)}:{valid:!0}:{valid:!1,reason:S1t(t)}}function yM(t,e,n,i){return t.explicit&&e.explicit&&Tt($1t(n,i,t.value,e.value)),{explicit:t.explicit,value:[...t.value,...e.value]}}function cwt(t){const e=Zo(t.map(o=>{if(hu(o)){const{sort:s,...l}=o;return l}return o}),ye),n=Zo(t.map(o=>{if(hu(o)){const s=o.sort;return s!==void 0&&!U0(s)&&("op"in s&&s.op==="count"&&delete s.field,s.order==="ascending"&&delete s.order),s}}).filter(o=>o!==void 0),ye);if(e.length===0)return;if(e.length===1){const o=t[0];if(hu(o)&&n.length>0){let s=n[0];if(n.length>1){Tt(V4);const l=n.filter(f=>Rt(f)&&"op"in f&&f.op!=="min");n.every(f=>Rt(f)&&"op"in f)&&l.length===1?s=l[0]:s=!0}else if(Rt(s)&&"field"in s){const l=s.field;o.field===l&&(s=s.order?{order:s.order}:!0)}return{...o,sort:s}}return o}const i=Zo(n.map(o=>U0(o)||!("op"in o)||Dt(o.op)&&zt(kyt,o.op)?o:(Tt(R1t(o)),!0)),ye);let r;i.length===1?r=i[0]:i.length>1&&(Tt(V4),r=!0);const a=Zo(t.map(o=>hu(o)?o.data:null),o=>o);return a.length===1&&a[0]!==null?{data:a[0],fields:e.map(s=>s.field),...r?{sort:r}:{}}:{fields:e,...r?{sort:r}:{}}}function DD(t){if(hu(t)&&Dt(t.field))return t.field;if(Nyt(t)){let e;for(const n of t.fields)if(hu(n)&&Dt(n.field)){if(!e)e=n.field;else if(e!==n.field)return Tt(N1t),e}return Tt(L1t),e}else if(Lyt(t)){Tt(z1t);const e=t.fields[0];return Dt(e)?e:void 0}}function ew(t,e){const i=t.component.scales[e].get("domains").map(r=>(hu(r)&&(r.data=t.lookupDataSource(r.data)),r));return cwt(i)}function aY(t){return Jp(t)||RD(t)?t.children.reduce((e,n)=>e.concat(aY(n)),IF(t)):IF(t)}function IF(t){return Et(t.component.scales).reduce((e,n)=>{const i=t.component.scales[n];if(i.merged)return e;const r=i.combine(),{name:a,type:o,selectionExtent:s,domains:l,range:f,reverse:d,...p}=r,m=fwt(r.range,a,n,t),_=ew(t,n),b=s?fxt(t,s,i,_):null;return e.push({name:a,type:o,..._?{domain:_}:{},...b?{domainRaw:b}:{},range:m,...d!==void 0?{reverse:d}:{},...p}),e},[])}function fwt(t,e,n,i){if(Cn(n)){if(_h(t))return{step:{signal:`${e}_step`}}}else if(Rt(t)&&hu(t))return{...t,data:i.lookupDataSource(t.data)};return t}class oY extends Lu{constructor(n,i){super({},{name:n});yt(this,"merged",!1);this.setWithExplicit("type",i)}domainHasZero(){const n=this.get("type");if(pe([pi.LOG,pi.TIME,pi.UTC],n))return"definitely-not";const i=this.get("zero");if(i===!0||i===void 0&&pe([pi.LINEAR,pi.SQRT,pi.POW],n))return"definitely";const r=this.get("domains");if(r.length>0){let a=!1,o=!1,s=!1;for(const l of r){if(gt(l)){const f=l[0],d=l[l.length-1];if(Me(f)&&Me(d))if(f<=0&&d>=0){a=!0;continue}else{o=!0;continue}}s=!0}if(a)return"definitely";if(o&&!s)return"definitely-not"}return"maybe"}}const hwt=["range","scheme"];function dwt(t){const e=t.component.scales;for(const n of k$){const i=e[n];if(!i)continue;const r=pwt(n,t);i.setWithExplicit("range",r)}}function qF(t,e){const n=t.fieldDef(e);if(n!=null&&n.bin){const{bin:i,field:r}=n,a=Mr(e),o=t.getName(a);if(Rt(i)&&i.binned&&i.step!==void 0)return new Vn(()=>{const s=t.scaleName(e),l=`(domain("${s}")[1] - domain("${s}")[0]) / ${i.step}`;return`${t.getSignalName(o)} / (${l})`});if(Ke(i)){const s=MD(t,r,i);return new Vn(()=>{const l=t.getSignalName(s),f=`(${l}.stop - ${l}.start) / ${l}.step`;return`${t.getSignalName(o)} / (${f})`})}}}function pwt(t,e){const n=e.specifiedScales[t],{size:i}=e,a=e.getScaleComponent(t).get("type");for(const p of hwt)if(n[p]!==void 0){const m=QC(a,p),_=QH(t,p);if(!m)Tt(OH(a,p,t));else if(_)Tt(_);else switch(p){case"range":{const b=n.range;if(gt(b)){if(Cn(t))return Io(b.map(x=>{if(x==="width"||x==="height"){const S=e.getName(x),T=e.getSignalName.bind(e);return Vn.fromName(T,S)}return x}))}else if(Rt(b))return Io({data:e.requestDataName(gn.Main),field:b.field,sort:{op:"min",field:e.vgField(t)}});return Io(b)}case"scheme":return Io(gwt(n[p]))}}const o=t===un||t==="xOffset"?"width":"height",s=i[o];if(us(s)){if(Cn(t))if(ii(a)){const p=uY(s,e,t);if(p)return Io({step:p})}else Tt($H(o));else if(My(t)){const p=t===wc?"x":"y";if(e.getScaleComponent(p).get("type")==="band"){const b=lY(s,a);if(b)return Io(b)}}}const{rangeMin:l,rangeMax:f}=n,d=mwt(t,e);return(l!==void 0||f!==void 0)&&QC(a,"rangeMin")&&gt(d)&&d.length===2?Io([l??d[0],f??d[1]]):jr(d)}function gwt(t){return xvt(t)?{scheme:t.name,...Kr(t,["name"])}:{scheme:t}}function sY(t,e,n,{center:i}={}){const r=Mr(t),a=e.getName(r),o=e.getSignalName.bind(e);return t===ai&&lo(n)?i?[Vn.fromName(s=>`${o(s)}/2`,a),Vn.fromName(s=>`-${o(s)}/2`,a)]:[Vn.fromName(o,a),0]:i?[Vn.fromName(s=>`-${o(s)}/2`,a),Vn.fromName(s=>`${o(s)}/2`,a)]:[0,Vn.fromName(o,a)]}function mwt(t,e){const{size:n,config:i,mark:r,encoding:a}=e,{type:o}=Un(a[t]),l=e.getScaleComponent(t).get("type"),{domain:f,domainMid:d}=e.specifiedScales[t];switch(t){case un:case ai:{if(pe(["point","band"],l)){const p=cY(t,n,i.view);if(us(p))return{step:uY(p,e,t)}}return sY(t,e,l)}case wc:case Yp:return ywt(t,e,l);case $u:{const p=bwt(r,i),m=xwt(r,n,e,i);return vp(l)?_wt(p,m,vwt(l,i,f,t)):[p,m]}case Ra:return[0,Math.PI*2];case mh:return[0,360];case vo:return[0,new Vn(()=>{const p=e.getSignalName(Jr(e.parent)?"child_width":"width"),m=e.getSignalName(Jr(e.parent)?"child_height":"height");return`min(${p},${m})/2`})];case Ec:return{step:1e3/i.scale.framesPerSecond};case Tc:return[i.scale.minStrokeWidth,i.scale.maxStrokeWidth];case Cc:return[[1,0],[4,2],[2,1],[1,1],[1,2,4,2]];case Cr:return"symbol";case Tr:case ys:case vs:return l==="ordinal"?o==="nominal"?"category":"ordinal":d!==void 0?"diverging":r==="rect"||r==="geoshape"?"heatmap":"ramp";case Du:case Sc:case Ac:return[i.scale.minOpacity,i.scale.maxOpacity]}}function uY(t,e,n){const{encoding:i}=e,r=e.getScaleComponent(n),a=A$(n),o=i[a];if(HG({step:t,offsetIsDiscrete:ie(o)&&GH(o.type)})==="offset"&&SG(i,a)){const l=e.getScaleComponent(a);let d=`domain('${e.scaleName(a)}').length`;if(l.get("type")==="band"){const m=l.get("paddingInner")??l.get("padding")??0,_=l.get("paddingOuter")??l.get("padding")??0;d=`bandspace(${d}, ${m}, ${_})`}const p=r.get("paddingInner")??r.get("padding");return{signal:`${t.step} * ${d} / (1-${Byt(p)})`}}else return t.step}function lY(t,e){if(HG({step:t,offsetIsDiscrete:ii(e)})==="offset")return{step:t.step}}function ywt(t,e,n){const i=t===wc?"x":"y",r=e.getScaleComponent(i);if(!r)return sY(i,e,n,{center:!0});const a=r.get("type"),o=e.scaleName(i),{markDef:s,config:l}=e;if(a==="band"){const f=cY(i,e.size,e.config.view);if(us(f)){const d=lY(f,n);if(d)return d}return[0,{signal:`bandwidth('${o}')`}]}else{const f=e.encoding[i];if(Ct(f)&&f.timeUnit){const d=IH(f.timeUnit,b=>`scale('${o}', ${b})`),p=e.config.scale.bandWithNestedOffsetPaddingInner,m=hc({fieldDef:f,markDef:s,config:l})-.5,_=m!==0?` + ${m}`:"";if(p){const b=It(p)?`${p.signal}/2${_}`:`${p/2+m}`,x=It(p)?`(1 - ${p.signal}/2)${_}`:`${1-p/2+m}`;return[{signal:`${b} * (${d})`},{signal:`${x} * (${d})`}]}return[0,{signal:d}]}return Kj(`Cannot use ${t} scale if ${i} scale is not discrete.`)}}function cY(t,e,n){const i=t===un?"width":"height",r=e[i];return r||tx(n,i)}function vwt(t,e,n,i){switch(t){case"quantile":return e.scale.quantileCount;case"quantize":return e.scale.quantizeCount;case"threshold":return n!==void 0&&gt(n)?n.length+1:(Tt(G1t(i)),3)}}function _wt(t,e,n){const i=()=>{const r=no(e),a=no(t),o=`(${r} - ${a}) / (${n} - 1)`;return`sequence(${a}, ${r} + ${o}, ${o})`};return It(e)?new Vn(i):{signal:i()}}function bwt(t,e){switch(t){case"bar":case"tick":return e.scale.minBandSize;case"line":case"trail":case"rule":return e.scale.minStrokeWidth;case"text":return e.scale.minFontSize;case"point":case"square":case"circle":return e.scale.minSize}throw new Error(D2("size",t))}const jF=.95;function xwt(t,e,n,i){const r={x:qF(n,"x"),y:qF(n,"y")};switch(t){case"bar":case"tick":{if(i.scale.maxBandSize!==void 0)return i.scale.maxBandSize;const a=HF(e,r,i.view);return Me(a)?a-1:new Vn(()=>`${a.signal} - 1`)}case"line":case"trail":case"rule":return i.scale.maxStrokeWidth;case"text":return i.scale.maxFontSize;case"point":case"square":case"circle":{if(i.scale.maxSize)return i.scale.maxSize;const a=HF(e,r,i.view);return Me(a)?Math.pow(jF*a,2):new Vn(()=>`pow(${jF} * ${a.signal}, 2)`)}}throw new Error(D2("size",t))}function HF(t,e,n){const i=us(t.width)?t.width.step:eM(n,"width"),r=us(t.height)?t.height.step:eM(n,"height");return e.x||e.y?new Vn(()=>`min(${[e.x?e.x.signal:i,e.y?e.y.signal:r].join(", ")})`):Math.min(i,r)}function fY(t,e){pn(t)?wwt(t,e):dY(t,e)}function wwt(t,e){const n=t.component.scales,{config:i,encoding:r,markDef:a,specifiedScales:o}=t;for(const s of Et(n)){const l=o[s],f=n[s],d=t.getScaleComponent(s),p=Un(r[s]),m=l[e],_=d.get("type"),b=d.get("padding"),x=d.get("paddingInner"),S=QC(_,e),T=QH(s,e);if(m!==void 0&&(S?T&&Tt(T):Tt(OH(_,e,s))),S&&T===void 0)if(m!==void 0){const M=p.timeUnit,k=p.type;switch(e){case"domainMax":case"domainMin":bh(l[e])||k==="temporal"||M?f.set(e,{signal:j2(l[e],{type:k,timeUnit:M})},!0):f.set(e,l[e],!0);break;default:f.copyKeyFromObject(e,l)}}else{const M=St(GF,e)?GF[e]({model:t,channel:s,fieldOrDatumDef:p,scaleType:_,scalePadding:b,scalePaddingInner:x,domain:l.domain,domainMin:l.domainMin,domainMax:l.domainMax,markDef:a,config:i,hasNestedOffsetScale:AG(r,s),hasSecondaryRangeChannel:!!r[_s(s)]}):i.scale[e];M!==void 0&&f.set(e,M,!1)}}}const GF={bins:({model:t,fieldOrDatumDef:e})=>Ct(e)?Ewt(t,e):void 0,interpolate:({channel:t,fieldOrDatumDef:e})=>Swt(t,e.type),nice:({scaleType:t,channel:e,domain:n,domainMin:i,domainMax:r,fieldOrDatumDef:a})=>Awt(t,e,n,i,r,a),padding:({channel:t,scaleType:e,fieldOrDatumDef:n,markDef:i,config:r})=>Twt(t,e,r.scale,n,i,r.bar),paddingInner:({scalePadding:t,channel:e,markDef:n,scaleType:i,config:r,hasNestedOffsetScale:a})=>Cwt(t,e,n.type,i,r.scale,a),paddingOuter:({scalePadding:t,channel:e,scaleType:n,scalePaddingInner:i,config:r,hasNestedOffsetScale:a})=>Mwt(t,e,n,i,r.scale,a),reverse:({fieldOrDatumDef:t,scaleType:e,channel:n,config:i})=>{const r=Ct(t)?t.sort:void 0;return kwt(e,r,n,i.scale)},zero:({channel:t,fieldOrDatumDef:e,domain:n,markDef:i,scaleType:r,config:a,hasSecondaryRangeChannel:o})=>Owt(t,e,n,i,r,a.scale,o)};function hY(t){pn(t)?dwt(t):dY(t,"range")}function dY(t,e){const n=t.component.scales;for(const i of t.children)e==="range"?hY(i):fY(i,e);for(const i of Et(n)){let r;for(const a of t.children){const o=a.component.scales[i];if(o){const s=o.getWithExplicit(e);r=dc(r,s,e,"scale",iZ((l,f)=>{switch(e){case"range":return l.step&&f.step?l.step-f.step:0}return 0}))}}n[i].setWithExplicit(e,r)}}function Ewt(t,e){const n=e.bin;if(Ke(n)){const i=MD(t,e.field,n);return new Vn(()=>t.getSignalName(i))}else if(hi(n)&&vh(n)&&n.step!==void 0)return{step:n.step}}function Swt(t,e){if(pe([Tr,ys,vs],t)&&e!=="nominal")return"hcl"}function Awt(t,e,n,i,r,a){var o;if(!((o=fo(a))!=null&&o.bin||gt(n)||r!=null||i!=null||pe([pi.TIME,pi.UTC],t)))return Cn(e)?!0:void 0}function Twt(t,e,n,i,r,a){if(Cn(t)){if(Yo(e)){if(n.continuousPadding!==void 0)return n.continuousPadding;const{type:o,orient:s}=r;if(o==="bar"&&!(Ct(i)&&(i.bin||i.timeUnit))&&(s==="vertical"&&t==="x"||s==="horizontal"&&t==="y"))return a.continuousBandSize}if(e===pi.POINT)return n.pointPadding}}function Cwt(t,e,n,i,r,a=!1){if(t===void 0){if(Cn(e)){const{bandPaddingInner:o,barBandPaddingInner:s,rectBandPaddingInner:l,tickBandPaddingInner:f,bandWithNestedOffsetPaddingInner:d}=r;return a?d:Tn(o,n==="bar"?s:n==="tick"?f:l)}else if(My(e)&&i===pi.BAND)return r.offsetBandPaddingInner}}function Mwt(t,e,n,i,r,a=!1){if(t===void 0){if(Cn(e)){const{bandPaddingOuter:o,bandWithNestedOffsetPaddingOuter:s}=r;if(a)return s;if(n===pi.BAND)return Tn(o,It(i)?{signal:`${i.signal}/2`}:i/2)}else if(My(e)){if(n===pi.POINT)return .5;if(n===pi.BAND)return r.offsetBandPaddingOuter}}}function kwt(t,e,n,i){if(n==="x"&&i.xReverse!==void 0)return lo(t)&&e==="descending"?It(i.xReverse)?{signal:`!${i.xReverse.signal}`}:!i.xReverse:i.xReverse;if(lo(t)&&e==="descending")return!0}function Owt(t,e,n,i,r,a,o){if(!!n&&n!=="unaggregated"&&lo(r)){if(gt(n)){const l=n[0],f=n[n.length-1];if(Me(l)&&l<=0&&Me(f)&&f>=0)return!0}return!1}if(t==="size"&&e.type==="quantitative"&&!vp(r))return!0;if(!(Ct(e)&&e.bin)&&pe([...Ru,...byt],t)){const{orient:l,type:f}=i;return pe(["bar","area","line","trail"],f)&&(l==="horizontal"&&t==="y"||l==="vertical"&&t==="x")?!1:pe(["bar","area"],f)&&!o?!0:a==null?void 0:a.zero}return!1}function $wt(t,e,n,i,r=!1){const a=Dwt(e,n,i,r),{type:o}=t;return bs(e)?o!==void 0?Mvt(e,o)?Ct(n)&&!Cvt(o,n.type)?(Tt(k1t(o,a)),a):o:(Tt(M1t(e,o,a)),a):a:null}function Dwt(t,e,n,i){var r;switch(e.type){case"nominal":case"ordinal":{if(qd(t)||SA(t)==="discrete")return t==="shape"&&e.type==="ordinal"&&Tt(AA(t,"ordinal")),"ordinal";if(EA(t))return"band";if(Cn(t)||My(t)){if(pe(["rect","bar","image","rule","tick"],n.type)||i)return"band"}else if(n.type==="arc"&&t in M$)return"band";const a=n[Mr(t)];return nh(a)||bp(e)&&((r=e.axis)!=null&&r.tickBand)?"band":"point"}case"temporal":return qd(t)?"time":SA(t)==="discrete"?(Tt(AA(t,"temporal")),"ordinal"):Ct(e)&&e.timeUnit&&ni(e.timeUnit).utc?"utc":EA(t)?"band":"time";case"quantitative":return qd(t)?Ct(e)&&Ke(e.bin)?"bin-ordinal":"linear":SA(t)==="discrete"?(Tt(AA(t,"quantitative")),"ordinal"):EA(t)?"band":"linear";case"geojson":return}throw new Error(MH(e.type))}function Rwt(t,{ignoreRange:e}={}){pY(t),rY(t);for(const n of Tvt)fY(t,n);e||hY(t)}function pY(t){pn(t)?t.component.scales=Nwt(t):t.component.scales=zwt(t)}function Nwt(t){const{encoding:e,mark:n,markDef:i}=t,r={};for(const a of k$){const o=Un(e[a]);if(o&&n===tG&&a===Cr&&o.type===Xp)continue;let s=o&&o.scale;if(o&&s!==null&&s!==!1){s??(s={});const l=AG(e,a),f=$wt(s,a,o,i,l);r[a]=new oY(t.scaleName(`${a}`,!0),{value:f,explicit:s.type===f})}}return r}const Lwt=iZ((t,e)=>K4(t)-K4(e));function zwt(t){var r;const e=t.component.scales={},n={},i=t.component.resolve;for(const a of t.children){pY(a);for(const o of Et(a.component.scales))if((r=i.scale)[o]??(r[o]=GZ(o,t)),i.scale[o]==="shared"){const s=n[o],l=a.component.scales[o].getWithExplicit("type");s?mvt(s.value,l.value)?n[o]=dc(s,l,"type","scale",Lwt):(i.scale[o]="independent",delete n[o]):n[o]=l}}for(const a of Et(n)){const o=t.scaleName(a,!0),s=n[a];e[a]=new oY(o,s);for(const l of t.children){const f=l.component.scales[a];f&&(l.renameScale(f.get("name"),o),f.merged=!0)}}return e}class FA{constructor(){yt(this,"nameMap");this.nameMap={}}rename(e,n){this.nameMap[e]=n}has(e){return this.nameMap[e]!==void 0}get(e){for(;this.nameMap[e]&&e!==this.nameMap[e];)e=this.nameMap[e];return e}}function pn(t){return(t==null?void 0:t.type)==="unit"}function Jr(t){return(t==null?void 0:t.type)==="facet"}function RD(t){return(t==null?void 0:t.type)==="concat"}function Jp(t){return(t==null?void 0:t.type)==="layer"}class ND{constructor(e,n,i,r,a,o,s){yt(this,"type");yt(this,"parent");yt(this,"config");yt(this,"name");yt(this,"size");yt(this,"title");yt(this,"description");yt(this,"data");yt(this,"transforms");yt(this,"layout");yt(this,"scaleNameMap");yt(this,"projectionNameMap");yt(this,"signalNameMap");yt(this,"component");yt(this,"view");this.type=n,this.parent=i,this.config=a,this.parent=i,this.config=a,this.view=di(s),this.name=e.name??r,this.title=Fl(e.title)?{text:e.title}:e.title?di(e.title):void 0,this.scaleNameMap=i?i.scaleNameMap:new FA,this.projectionNameMap=i?i.projectionNameMap:new FA,this.signalNameMap=i?i.signalNameMap:new FA,this.data=e.data,this.description=e.description,this.transforms=qbt(e.transform??[]),this.layout=n==="layer"||n==="unit"?{}:Z_t(e,n,a),this.component={data:{sources:i?i.component.data.sources:[],outputNodes:i?i.component.data.outputNodes:{},outputNodeRefCounts:i?i.component.data.outputNodeRefCounts:{},isFaceted:U2(e)||(i==null?void 0:i.component.data.isFaceted)&&e.data===void 0},layoutSize:new Lu,layoutHeaders:{row:{},column:{},facet:{}},mark:null,resolve:{scale:{},axis:{},legend:{},...o?ee(o):{}},selection:null,scales:null,projection:null,axes:{},legends:{}}}get width(){return this.getSizeSignalRef("width")}get height(){return this.getSizeSignalRef("height")}parse(){this.parseScale(),this.parseLayoutSize(),this.renameTopLevelLayoutSizeSignal(),this.parseSelections(),this.parseProjection(),this.parseData(),this.parseAxesAndHeaders(),this.parseLegends(),this.parseMarkGroup()}parseScale(){Rwt(this)}parseProjection(){eY(this)}renameTopLevelLayoutSizeSignal(){this.getName("width")!=="width"&&this.renameSignal(this.getName("width"),"width"),this.getName("height")!=="height"&&this.renameSignal(this.getName("height"),"height")}parseLegends(){VZ(this)}assembleEncodeFromView(e){const{style:n,...i}=e,r={};for(const a of Et(i)){const o=i[a];o!==void 0&&(r[a]=en(o))}return r}assembleGroupEncodeEntry(e){let n={};return this.view&&(n=this.assembleEncodeFromView(this.view)),!e&&(this.description&&(n.description=en(this.description)),this.type==="unit"||this.type==="layer")?{width:this.getSizeSignalRef("width"),height:this.getSizeSignalRef("height"),...n}:Ye(n)?void 0:n}assembleLayout(){if(!this.layout)return;const{spacing:e,...n}=this.layout,{component:i,config:r}=this,a=i2t(i.layoutHeaders,r);return{padding:e,...this.assembleDefaultLayout(),...n,...a?{titleBand:a}:{}}}assembleDefaultLayout(){return{}}assembleHeaderMarks(){const{layoutHeaders:e}=this.component;let n=[];for(const i of wa)e[i].title&&n.push(Qxt(this,i));for(const i of SD)n=n.concat(Kxt(this,i));return n}assembleAxes(){return Pxt(this.component.axes,this.config)}assembleLegends(){return KZ(this)}assembleProjections(){return T2t(this)}assembleTitle(){const{encoding:e,...n}=this.title??{},i={..._H(this.config.title).nonMarkTitleProperties,...n,...e?{encode:{update:e}}:{}};if(i.text)return pe(["unit","layer"],this.type)?pe(["middle",void 0],i.anchor)&&(i.frame??(i.frame="group")):i.anchor??(i.anchor="start"),Ye(i)?void 0:i}assembleGroup(e=[]){const n={};e=e.concat(this.assembleSignals()),e.length>0&&(n.signals=e);const i=this.assembleLayout();i&&(n.layout=i),n.marks=[].concat(this.assembleHeaderMarks(),this.assembleMarks());const r=!this.parent||Jr(this.parent)?aY(this):[];r.length>0&&(n.scales=r);const a=this.assembleAxes();a.length>0&&(n.axes=a);const o=this.assembleLegends();return o.length>0&&(n.legends=o),n}getName(e){return sn((this.name?`${this.name}_`:"")+e)}getDataName(e){return this.getName(gn[e].toLowerCase())}requestDataName(e){const n=this.getDataName(e),i=this.component.data.outputNodeRefCounts;return i[n]=(i[n]||0)+1,n}getSizeSignalRef(e){if(Jr(this.parent)){const n=jZ(e),i=k2(n),r=this.component.scales[i];if(r&&!r.merged){const a=r.get("type"),o=r.get("range");if(ii(a)&&_h(o)){const s=r.get("name"),l=ew(this,i),f=DD(l);if(f){const d=Ot({aggregate:"distinct",field:f},{expr:"datum"});return{signal:qZ(s,r,d)}}else return Tt(D$(i)),null}}}return{signal:this.signalNameMap.get(this.getName(e))}}lookupDataSource(e){const n=this.component.data.outputNodes[e];return n?n.getSource():e}getSignalName(e){return this.signalNameMap.get(e)}renameSignal(e,n){this.signalNameMap.rename(e,n)}renameScale(e,n){this.scaleNameMap.rename(e,n)}renameProjection(e,n){this.projectionNameMap.rename(e,n)}scaleName(e,n){if(n)return this.getName(e);if(fH(e)&&bs(e)&&this.component.scales[e]||this.scaleNameMap.has(this.getName(e)))return this.scaleNameMap.get(this.getName(e))}projectionName(e){if(e)return this.getName("projection");if(this.component.projection&&!this.component.projection.merged||this.projectionNameMap.has(this.getName("projection")))return this.projectionNameMap.get(this.getName("projection"))}getScaleComponent(e){if(!this.component.scales)throw new Error("getScaleComponent cannot be called before parseScale(). Make sure you have called parseScale or use parseUnitModelWithScale().");const n=this.component.scales[e];return n&&!n.merged?n:this.parent?this.parent.getScaleComponent(e):void 0}getScaleType(e){const n=this.getScaleComponent(e);return n?n.get("type"):void 0}getSelectionComponent(e,n){let i=this.component.selection[e];if(!i&&this.parent&&(i=this.parent.getSelectionComponent(e,n)),!i)throw new Error(Hyt(n));return i}hasAxisOrientSignalRef(){var e,n;return((e=this.component.axes.x)==null?void 0:e.some(i=>i.hasOrientSignalRef()))||((n=this.component.axes.y)==null?void 0:n.some(i=>i.hasOrientSignalRef()))}}class gY extends ND{vgField(e,n={}){const i=this.fieldDef(e);if(i)return Ot(i,n)}reduceFieldDef(e,n){return x_t(this.getMapping(),(i,r,a)=>{const o=fo(r);return o?e(i,o,a):i},n)}forEachFieldDef(e,n){oD(this.getMapping(),(i,r)=>{const a=fo(i);a&&e(a,r)},n)}}class nw extends Be{constructor(n,i){super(n);yt(this,"transform");this.transform=i,this.transform=ee(i);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"value",r[1]??"density"];const a=this.transform.resolve??"shared";this.transform.resolve=a}clone(){return new nw(null,ee(this.transform))}dependentFields(){return new Set([this.transform.density,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`DensityTransform ${ye(this.transform)}`}assemble(){const{density:n,...i}=this.transform,r={type:"kde",field:n,...i};return r.resolve=this.transform.resolve,r}}class iw extends Be{constructor(n,i){super(n);yt(this,"transform");this.transform=i,this.transform=ee(i)}clone(){return new iw(null,ee(this.transform))}dependentFields(){return new Set([this.transform.extent])}producedFields(){return new Set([])}hash(){return`ExtentTransform ${ye(this.transform)}`}assemble(){const{extent:n,param:i}=this.transform;return{type:"extent",field:n,signal:i}}}class rw extends Be{constructor(n,i){super(n);yt(this,"transform");this.transform=i,this.transform=ee(i);const{flatten:r,as:a=[]}=this.transform;this.transform.as=r.map((o,s)=>a[s]??o)}clone(){return new rw(this.parent,ee(this.transform))}dependentFields(){return new Set(this.transform.flatten)}producedFields(){return new Set(this.transform.as)}hash(){return`FlattenTransform ${ye(this.transform)}`}assemble(){const{flatten:n,as:i}=this.transform;return{type:"flatten",fields:n,as:i}}}class aw extends Be{constructor(n,i){super(n);yt(this,"transform");this.transform=i,this.transform=ee(i);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"key",r[1]??"value"]}clone(){return new aw(null,ee(this.transform))}dependentFields(){return new Set(this.transform.fold)}producedFields(){return new Set(this.transform.as)}hash(){return`FoldTransform ${ye(this.transform)}`}assemble(){const{fold:n,as:i}=this.transform;return{type:"fold",fields:n,as:i}}}class Gd extends Be{constructor(n,i,r,a){super(n);yt(this,"fields");yt(this,"geojson");yt(this,"signal");this.fields=i,this.geojson=r,this.signal=a}clone(){return new Gd(null,ee(this.fields),this.geojson,this.signal)}static parseAll(n,i){if(i.component.projection&&!i.component.projection.isFit)return n;let r=0;for(const a of[[bo,_o],[$a,xo]]){const o=a.map(s=>{const l=Un(i.encoding[s]);return Ct(l)?l.field:xs(l)?{expr:`${l.datum}`}:co(l)?{expr:`${l.value}`}:void 0});(o[0]||o[1])&&(n=new Gd(n,o,null,i.getName(`geojson_${r++}`)))}if(i.channelHasField(Cr)){const a=i.typedFieldDef(Cr);a.type===Xp&&(n=new Gd(n,null,a.field,i.getName(`geojson_${r++}`)))}return n}dependentFields(){const n=(this.fields??[]).filter(Dt);return new Set([...this.geojson?[this.geojson]:[],...n])}producedFields(){return new Set}hash(){return`GeoJSON ${this.geojson} ${this.signal} ${ye(this.fields)}`}assemble(){return[...this.geojson?[{type:"filter",expr:`isValid(datum["${this.geojson}"])`}]:[],{type:"geojson",...this.fields?{fields:this.fields}:{},...this.geojson?{geojson:this.geojson}:{},signal:this.signal}]}}class H0 extends Be{constructor(n,i,r,a){super(n);yt(this,"projection");yt(this,"fields");yt(this,"as");this.projection=i,this.fields=r,this.as=a}clone(){return new H0(null,this.projection,ee(this.fields),ee(this.as))}static parseAll(n,i){if(!i.projectionName())return n;for(const r of[[bo,_o],[$a,xo]]){const a=r.map(s=>{const l=Un(i.encoding[s]);return Ct(l)?l.field:xs(l)?{expr:`${l.datum}`}:co(l)?{expr:`${l.value}`}:void 0}),o=r[0]===$a?"2":"";(a[0]||a[1])&&(n=new H0(n,i.projectionName(),a,[i.getName(`x${o}`),i.getName(`y${o}`)]))}return n}dependentFields(){return new Set(this.fields.filter(Dt))}producedFields(){return new Set(this.as)}hash(){return`Geopoint ${this.projection} ${ye(this.fields)} ${ye(this.as)}`}assemble(){return{type:"geopoint",projection:this.projection,fields:this.fields,as:this.as}}}class Ff extends Be{constructor(n,i){super(n);yt(this,"transform");this.transform=i}clone(){return new Ff(null,ee(this.transform))}dependentFields(){return new Set([this.transform.impute,this.transform.key,...this.transform.groupby??[]])}producedFields(){return new Set([this.transform.impute])}processSequence(n){const{start:i=0,stop:r,step:a}=n;return{signal:`sequence(${[i,r,...a?[a]:[]].join(",")})`}}static makeFromTransform(n,i){return new Ff(n,i)}static makeFromEncoding(n,i){const r=i.encoding,a=r.x,o=r.y;if(Ct(a)&&Ct(o)){const s=a.impute?a:o.impute?o:void 0;if(s===void 0)return;const l=a.impute?o:o.impute?a:void 0,{method:f,value:d,frame:p,keyvals:m}=s.impute,_=MG(i.mark,r);return new Ff(n,{impute:s.field,key:l.field,...f?{method:f}:{},...d!==void 0?{value:d}:{},...p?{frame:p}:{},...m!==void 0?{keyvals:m}:{},..._.length?{groupby:_}:{}})}return null}hash(){return`Impute ${ye(this.transform)}`}assemble(){const{impute:n,key:i,keyvals:r,method:a,groupby:o,value:s,frame:l=[null,null]}=this.transform,f={type:"impute",field:n,key:i,...r?{keyvals:Ebt(r)?this.processSequence(r):r}:{},method:"value",...o?{groupby:o}:{},value:!a||a==="value"?s:null};if(a&&a!=="value"){const d={type:"window",as:[`imputed_${n}_value`],ops:[a],fields:[n],frame:l,ignorePeers:!1,...o?{groupby:o}:{}},p={type:"formula",expr:`datum.${n} === null ? datum.imputed_${n}_value : datum.${n}`,as:n};return[f,d,p]}else return[f]}}class ow extends Be{constructor(n,i){super(n);yt(this,"transform");this.transform=i,this.transform=ee(i);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??i.on,r[1]??i.loess]}clone(){return new ow(null,ee(this.transform))}dependentFields(){return new Set([this.transform.loess,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`LoessTransform ${ye(this.transform)}`}assemble(){const{loess:n,on:i,...r}=this.transform;return{type:"loess",x:i,y:n,...r}}}class G0 extends Be{constructor(n,i,r){super(n);yt(this,"transform");yt(this,"secondary");this.transform=i,this.secondary=r}clone(){return new G0(null,ee(this.transform),this.secondary)}static make(n,i,r,a){const o=i.component.data.sources,{from:s}=r;let l=null;if(Sbt(s)){let f=vY(s.data,o);f||(f=new oh(s.data),o.push(f));const d=i.getName(`lookup_${a}`);l=new wr(f,d,gn.Lookup,i.component.data.outputNodeRefCounts),i.component.data.outputNodes[d]=l}else if(Abt(s)){const f=s.param;r={as:f,...r};let d;try{d=i.getSelectionComponent(sn(f),f)}catch{throw new Error(Xyt(f))}if(l=d.materialized,!l)throw new Error(Wyt(f))}return new G0(n,r,l.getSource())}dependentFields(){return new Set([this.transform.lookup])}producedFields(){return new Set(this.transform.as?Nt(this.transform.as):this.transform.from.fields)}hash(){return`Lookup ${ye({transform:this.transform,secondary:this.secondary})}`}assemble(){let n;if(this.transform.from.fields)n={values:this.transform.from.fields,...this.transform.as?{as:Nt(this.transform.as)}:{}};else{let i=this.transform.as;Dt(i)||(Tt(o1t),i="_lookup"),n={as:[i]}}return{type:"lookup",from:this.secondary,key:this.transform.from.key,fields:[this.transform.lookup],...n,...this.transform.default?{default:this.transform.default}:{}}}}class sw extends Be{constructor(n,i){super(n);yt(this,"transform");this.transform=i,this.transform=ee(i);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"prob",r[1]??"value"]}clone(){return new sw(null,ee(this.transform))}dependentFields(){return new Set([this.transform.quantile,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`QuantileTransform ${ye(this.transform)}`}assemble(){const{quantile:n,...i}=this.transform;return{type:"quantile",field:n,...i}}}class uw extends Be{constructor(n,i){super(n);yt(this,"transform");this.transform=i,this.transform=ee(i);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??i.on,r[1]??i.regression]}clone(){return new uw(null,ee(this.transform))}dependentFields(){return new Set([this.transform.regression,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`RegressionTransform ${ye(this.transform)}`}assemble(){const{regression:n,on:i,...r}=this.transform;return{type:"regression",x:i,y:n,...r}}}class lw extends Be{constructor(n,i){super(n);yt(this,"transform");this.transform=i}clone(){return new lw(null,ee(this.transform))}addDimensions(n){this.transform.groupby=Zo((this.transform.groupby??[]).concat(n),i=>i)}producedFields(){}dependentFields(){return new Set([this.transform.pivot,this.transform.value,...this.transform.groupby??[]])}hash(){return`PivotTransform ${ye(this.transform)}`}assemble(){const{pivot:n,value:i,groupby:r,limit:a,op:o}=this.transform;return{type:"pivot",field:n,value:i,...a!==void 0?{limit:a}:{},...o!==void 0?{op:o}:{},...r!==void 0?{groupby:r}:{}}}}class cw extends Be{constructor(n,i){super(n);yt(this,"transform");this.transform=i}clone(){return new cw(null,ee(this.transform))}dependentFields(){return new Set}producedFields(){return new Set}hash(){return`SampleTransform ${ye(this.transform)}`}assemble(){return{type:"sample",size:this.transform.sample}}}function mY(t){let e=0;function n(i,r){if(i instanceof oh&&!i.isGenerator&&!wp(i.data)&&(t.push(r),r={name:null,source:r.name,transform:[]}),i instanceof Ni&&(i.parent instanceof oh&&!r.source?(r.format={...r.format,parse:i.assembleFormatParse()},r.transform.push(...i.assembleTransforms(!0))):r.transform.push(...i.assembleTransforms())),i instanceof Qp){r.name||(r.name=`data_${e++}`),!r.source||r.transform.length>0?(t.push(r),i.data=r.name):i.data=r.source,t.push(...i.assemble());return}switch((i instanceof Py||i instanceof By||i instanceof Cp||i instanceof Vp||i instanceof Sp||i instanceof H0||i instanceof ao||i instanceof G0||i instanceof Kp||i instanceof Sh||i instanceof aw||i instanceof rw||i instanceof nw||i instanceof ow||i instanceof sw||i instanceof uw||i instanceof pc||i instanceof cw||i instanceof lw||i instanceof iw)&&r.transform.push(i.assemble()),(i instanceof Jo||i instanceof Qo||i instanceof Ff||i instanceof bu||i instanceof Gd)&&r.transform.push(...i.assemble()),i instanceof wr&&(r.source&&r.transform.length===0?i.setSource(r.source):i.parent instanceof wr?i.setSource(r.name):(r.name||(r.name=`data_${e++}`),i.setSource(r.name),i.numChildren()===1&&(t.push(r),r={name:null,source:r.name,transform:[]}))),i.numChildren()){case 0:i instanceof wr&&(!r.source||r.transform.length>0)&&t.push(r);break;case 1:n(i.children[0],r);break;default:{r.name||(r.name=`data_${e++}`);let a=r.name;!r.source||r.transform.length>0?t.push(r):a=r.source;for(const o of i.children)n(o,{name:null,source:a,transform:[]});break}}}return n}function Fwt(t){const e=[],n=mY(e);for(const i of t.children)n(i,{source:t.name,name:null,transform:[]});return e}function Pwt(t,e){const n=[],i=mY(n);let r=0;for(const o of t.sources){o.hasName()||(o.dataName=`source_${r++}`);const s=o.assemble();i(o,s)}for(const o of n)o.transform.length===0&&delete o.transform;let a=0;for(const[o,s]of n.entries())(s.transform??[]).length===0&&!s.source&&n.splice(a++,0,n.splice(o,1)[0]);for(const o of n)for(const s of o.transform??[])s.type==="lookup"&&(s.from=t.outputNodes[s.from].getSource());for(const o of n)o.name in e&&(o.values=e[o.name]);return n}function Bwt(t){return t==="top"||t==="left"||It(t)?"header":"footer"}function Uwt(t){for(const e of wa)Iwt(t,e);ZF(t,"x"),ZF(t,"y")}function Iwt(t,e){var o;const{facet:n,config:i,child:r,component:a}=t;if(t.channelHasField(e)){const s=n[e],l=Tp("title",null,i,e);let f=jd(s,i,{allowDisabling:!0,includeDefault:l===void 0||!!l});r.component.layoutHeaders[e].title&&(f=gt(f)?f.join(", "):f,f+=` / ${r.component.layoutHeaders[e].title}`,r.component.layoutHeaders[e].title=null);const d=Tp("labelOrient",s.header,i,e),p=s.header!==null?Tn((o=s.header)==null?void 0:o.labels,i.header.labels,!0):!1,m=pe(["bottom","right"],d)?"footer":"header";a.layoutHeaders[e]={title:s.header!==null?f:null,facetFieldDef:s,[m]:e==="facet"?[]:[yY(t,e,p)]}}}function yY(t,e,n){const i=e==="row"?"height":"width";return{labels:n,sizeSignal:t.child.component.layoutSize.get(i)?t.child.getSizeSignalRef(i):void 0,axes:[]}}function ZF(t,e){const{child:n}=t;if(n.component.axes[e]){const{layoutHeaders:i,resolve:r}=t.component;if(r.axis[e]=CD(r,e),r.axis[e]==="shared"){const a=e==="x"?"column":"row",o=i[a];for(const s of n.component.axes[e]){const l=Bwt(s.get("orient"));o[l]??(o[l]=[yY(t,a,!1)]);const f=Km(s,"main",t.config,{header:!0});f&&o[l][0].axes.push(f),s.mainExtracted=!0}}}}function qwt(t){LD(t),rx(t,"width"),rx(t,"height")}function jwt(t){LD(t);const e=t.layout.columns===1?"width":"childWidth",n=t.layout.columns===void 0?"height":"childHeight";rx(t,e),rx(t,n)}function LD(t){for(const e of t.children)e.parseLayoutSize()}function rx(t,e){const n=jZ(e),i=k2(n),r=t.component.resolve,a=t.component.layoutSize;let o;for(const s of t.children){const l=s.component.layoutSize.getWithExplicit(n),f=r.scale[i]??GZ(i,t);if(f==="independent"&&l.value==="step"){o=void 0;break}if(o){if(f==="independent"&&o.value!==l.value){o=void 0;break}o=dc(o,l,n,"")}else o=l}if(o){for(const s of t.children)t.renameSignal(s.getName(n),t.getName(e)),s.component.layoutSize.set(n,"merged",!1);a.setWithExplicit(e,o)}else a.setWithExplicit(e,{explicit:!1,value:void 0})}function Hwt(t){const{size:e,component:n}=t;for(const i of Ru){const r=Mr(i);if(e[r]){const a=e[r];n.layoutSize.set(r,us(a)?"step":a,!0)}else{const a=Gwt(t,r);n.layoutSize.set(r,a,!1)}}}function Gwt(t,e){const n=e==="width"?"x":"y",i=t.config,r=t.getScaleComponent(n);if(r){const a=r.get("type"),o=r.get("range");if(ii(a)){const s=tx(i.view,e);return _h(o)||us(s)?"step":s}else return tM(i.view,e)}else{if(t.hasProjection||t.mark==="arc")return tM(i.view,e);{const a=tx(i.view,e);return us(a)?a.step:a}}}function vM(t,e,n){return Ot(e,{suffix:`by_${Ot(t)}`,...n})}class g0 extends gY{constructor(n,i,r,a){super(n,"facet",i,r,a,n.resolve);yt(this,"facet");yt(this,"child");yt(this,"children");this.child=UD(n.spec,this,this.getName("child"),void 0,a),this.children=[this.child],this.facet=this.initFacet(n.facet)}initFacet(n){if(!Dy(n))return{facet:this.initFacetFieldDef(n,"facet")};const i=Et(n),r={};for(const a of i){if(![mu,yu].includes(a)){Tt(D2(a,"facet"));break}const o=n[a];if(o.field===void 0){Tt(WC(o,a));break}r[a]=this.initFacetFieldDef(o,a)}return r}initFacetFieldDef(n,i){const r=aD(n,i);return r.header?r.header=di(r.header):r.header===null&&(r.header=null),r}channelHasField(n){return St(this.facet,n)}fieldDef(n){return this.facet[n]}parseData(){this.component.data=fw(this),this.child.parseData()}parseLayoutSize(){LD(this)}parseSelections(){this.child.parseSelections(),this.component.selection=this.child.component.selection,Rn(this.component.selection).some(n=>Ko(n))&&N$(R$)}parseMarkGroup(){this.child.parseMarkGroup()}parseAxesAndHeaders(){this.child.parseAxesAndHeaders(),Uwt(this)}assembleSelectionTopLevelSignals(n){return this.child.assembleSelectionTopLevelSignals(n)}assembleSignals(){return this.child.assembleSignals(),[]}assembleSelectionData(n){return this.child.assembleSelectionData(n)}getHeaderLayoutMixins(){const n={};for(const i of wa)for(const r of AD){const a=this.component.layoutHeaders[i],o=a[r],{facetFieldDef:s}=a;if(s){const l=Tp("titleOrient",s.header,this.config,i);if(["right","bottom"].includes(l)){const f=J2(i,l);n.titleAnchor??(n.titleAnchor={}),n.titleAnchor[f]="end"}}if(o!=null&&o[0]){const l=i==="row"?"height":"width",f=r==="header"?"headerBand":"footerBand";i!=="facet"&&!this.child.component.layoutSize.get(l)&&(n[f]??(n[f]={}),n[f][i]=.5),a.title&&(n.offset??(n.offset={}),n.offset[i==="row"?"rowTitle":"columnTitle"]=10)}}return n}assembleDefaultLayout(){const{column:n,row:i}=this.facet,r=n?this.columnDistinctSignal():i?1:void 0;let a="all";return(!i&&this.component.resolve.scale.x==="independent"||!n&&this.component.resolve.scale.y==="independent")&&(a="none"),{...this.getHeaderLayoutMixins(),...r?{columns:r}:{},bounds:"full",align:a}}assembleLayoutSignals(){return this.child.assembleLayoutSignals()}columnDistinctSignal(){if(!(this.parent&&this.parent instanceof g0))return{signal:`length(data('${this.getName("column_domain")}'))`}}assembleGroupStyle(){}assembleGroup(n){return this.parent&&this.parent instanceof g0?{...this.channelHasField("column")?{encode:{update:{columns:{field:Ot(this.facet.column,{prefix:"distinct"})}}}}:{},...super.assembleGroup(n)}:super.assembleGroup(n)}getCardinalityAggregateForChild(){const n=[],i=[],r=[];if(this.child instanceof g0){if(this.child.channelHasField("column")){const a=Ot(this.child.facet.column);n.push(a),i.push("distinct"),r.push(`distinct_${a}`)}}else for(const a of Ru){const o=this.child.component.scales[a];if(o&&!o.merged){const s=o.get("type"),l=o.get("range");if(ii(s)&&_h(l)){const f=ew(this.child,a),d=DD(f);d?(n.push(d),i.push("distinct"),r.push(`distinct_${d}`)):Tt(D$(a))}}}return{fields:n,ops:i,as:r}}assembleFacet(){const{name:n,data:i}=this.component.data.facetRoot,{row:r,column:a}=this.facet,{fields:o,ops:s,as:l}=this.getCardinalityAggregateForChild(),f=[];for(const p of wa){const m=this.facet[p];if(m){f.push(Ot(m));const{bin:_,sort:b}=m;if(Ke(_)&&f.push(Ot(m,{binSuffix:"end"})),vu(b)){const{field:x,op:S=B2}=b,T=vM(m,b);r&&a?(o.push(T),s.push("max"),l.push(T)):(o.push(x),s.push(S),l.push(T))}else if(gt(b)){const x=Ap(m,p);o.push(x),s.push("max"),l.push(x)}}}const d=!!r&&!!a;return{name:n,data:i,groupby:f,...d||o.length>0?{aggregate:{...d?{cross:d}:{},...o.length?{fields:o,ops:s,as:l}:{}}}:{}}}facetSortFields(n){const{facet:i}=this,r=i[n];return r?vu(r.sort)?[vM(r,r.sort,{expr:"datum"})]:gt(r.sort)?[Ap(r,n,{expr:"datum"})]:[Ot(r,{expr:"datum"})]:[]}facetSortOrder(n){const{facet:i}=this,r=i[n];if(r){const{sort:a}=r;return[(vu(a)?a.order:!gt(a)&&a)||"ascending"]}return[]}assembleLabelTitle(){var a;const{facet:n,config:i}=this;if(n.facet)return fM(n.facet,"facet",i);const r={row:["top","bottom"],column:["left","right"]};for(const o of SD)if(n[o]){const s=Tp("labelOrient",(a=n[o])==null?void 0:a.header,i,o);if(r[o].includes(s))return fM(n[o],o,i)}}assembleMarks(){const{child:n}=this,i=this.component.data.facetRoot,r=Fwt(i),a=n.assembleGroupEncodeEntry(!1),o=this.assembleLabelTitle()||n.assembleTitle(),s=n.assembleGroupStyle();return[{name:this.getName("cell"),type:"group",...o?{title:o}:{},...s?{style:s}:{},from:{facet:this.assembleFacet()},sort:{field:wa.map(f=>this.facetSortFields(f)).flat(),order:wa.map(f=>this.facetSortOrder(f)).flat()},...r.length>0?{data:r}:{},...a?{encode:{update:a}}:{},...n.assembleGroup(sxt(this,[]))}]}getMapping(){return this.facet}}function Zwt(t,e){const{row:n,column:i}=e;if(n&&i){let r=null;for(const a of[n,i])if(vu(a.sort)){const{field:o,op:s=B2}=a.sort;t=r=new Sh(t,{joinaggregate:[{op:s,field:o,as:vM(a,a.sort,{forAs:!0})}],groupby:[Ot(a)]})}return r}return null}function vY(t,e){var n,i,r,a;for(const o of e){const s=o.data;if(t.name&&o.hasName()&&t.name!==o.dataName)continue;const l=(n=t.format)==null?void 0:n.mesh,f=(i=s.format)==null?void 0:i.feature;if(l&&f)continue;const d=(r=t.format)==null?void 0:r.feature;if((d||f)&&d!==f)continue;const p=(a=s.format)==null?void 0:a.mesh;if(!((l||p)&&l!==p)){if(j0(t)&&j0(s)){if(Xr(t.values,s.values))return o}else if(wp(t)&&wp(s)){if(t.url===s.url)return o}else if(rZ(t)&&t.name===o.dataName)return o}}return null}function Ywt(t,e){if(t.data||!t.parent){if(t.data===null){const i=new oh({values:[]});return e.push(i),i}const n=vY(t.data,e);if(n)return Jl(t.data)||(n.data.format=Jj({},t.data.format,n.data.format)),!n.hasName()&&t.data.name&&(n.dataName=t.data.name),n;{const i=new oh(t.data);return e.push(i),i}}else return t.parent.component.data.facetRoot?t.parent.component.data.facetRoot:t.parent.component.data.main}function Xwt(t,e,n){let i=0;for(const r of e.transforms){let a,o;if(Lbt(r))o=t=new Sp(t,r),a="derived";else if(yD(r)){const s=B2t(r);o=t=Ni.makeWithAncestors(t,{},s,n)??t,t=new Vp(t,e,r.filter)}else if(JG(r))o=t=Jo.makeFromTransform(t,r,e),a="number";else if(Fbt(r))a="date",n.getWithExplicit(r.field).value===void 0&&(t=new Ni(t,{[r.field]:a}),n.set(r.field,a,!1)),o=t=Qo.makeFromTransform(t,r);else if(Pbt(r))o=t=ao.makeFromTransform(t,r),a="number",ED(e)&&(t=new pc(t));else if(KG(r))o=t=G0.make(t,e,r,i++),a="derived";else if(Dbt(r))o=t=new Kp(t,r),a="number";else if(Rbt(r))o=t=new Sh(t,r),a="number";else if(Bbt(r))o=t=bu.makeFromTransform(t,r),a="derived";else if(Ubt(r))o=t=new aw(t,r),a="derived";else if(Ibt(r))o=t=new iw(t,r),a="derived";else if(Nbt(r))o=t=new rw(t,r),a="derived";else if(Tbt(r))o=t=new lw(t,r),a="derived";else if($bt(r))t=new cw(t,r);else if(zbt(r))o=t=Ff.makeFromTransform(t,r),a="derived";else if(Cbt(r))o=t=new nw(t,r),a="derived";else if(Mbt(r))o=t=new sw(t,r),a="derived";else if(kbt(r))o=t=new uw(t,r),a="derived";else if(Obt(r))o=t=new ow(t,r),a="derived";else{Tt(a1t(r));continue}if(o&&a!==void 0)for(const s of o.producedFields()??[])n.set(s,a,!1)}return t}function fw(t){var S;let e=Ywt(t,t.component.data.sources);const{outputNodes:n,outputNodeRefCounts:i}=t.component.data,r=t.data,o=!(r&&(Jl(r)||wp(r)||j0(r)))&&t.parent?t.parent.component.data.ancestorParse.clone():new Jbt;Jl(r)?(aZ(r)?e=new By(e,r.sequence):vD(r)&&(e=new Py(e,r.graticule)),o.parseNothing=!0):((S=r==null?void 0:r.format)==null?void 0:S.parse)===null&&(o.parseNothing=!0),e=Ni.makeExplicit(e,t,o)??e,e=new pc(e);const s=t.parent&&Jp(t.parent);(pn(t)||Jr(t))&&s&&(e=Jo.makeFromEncoding(e,t)??e),t.transforms.length>0&&(e=Xwt(e,t,o));const l=I2t(t),f=U2t(t);e=Ni.makeWithAncestors(e,{},{...l,...f},o)??e,pn(t)&&(e=Gd.parseAll(e,t),e=H0.parseAll(e,t)),(pn(t)||Jr(t))&&(s||(e=Jo.makeFromEncoding(e,t)??e),e=Qo.makeFromEncoding(e,t)??e,e=Sp.parseAllForSortIndex(e,t));const d=e=Wv(gn.Raw,t,e);if(pn(t)){const T=ao.makeFromEncoding(e,t);T&&(e=T,ED(t)&&(e=new pc(e))),e=Ff.makeFromEncoding(e,t)??e,e=bu.makeFromEncoding(e,t)??e}let p,m;if(pn(t)){const{markDef:T,mark:M,config:k}=t,$=je("invalid",T,k),{marks:D,scales:F}=m=sZ({invalid:$,isPath:kc(M)});D!==F&&F==="include-invalid-values"&&(p=e=Wv(gn.PreFilterInvalid,t,e)),D==="exclude-invalid-values"&&(e=Cp.make(e,t,m)??e)}const _=e=Wv(gn.Main,t,e);let b;if(pn(t)&&m){const{marks:T,scales:M}=m;T==="include-invalid-values"&&M==="exclude-invalid-values"&&(e=Cp.make(e,t,m)??e,b=e=Wv(gn.PostFilterInvalid,t,e))}pn(t)&&zxt(t,_);let x=null;if(Jr(t)){const T=t.getName("facet");e=Zwt(e,t.facet)??e,x=new Qp(e,t,T,_.getSource()),n[T]=x}return{...t.component.data,outputNodes:n,outputNodeRefCounts:i,raw:d,main:_,facetRoot:x,ancestorParse:o,preFilterInvalid:p,postFilterInvalid:b}}function Wv(t,e,n){const{outputNodes:i,outputNodeRefCounts:r}=e.component.data,a=e.getDataName(t),o=new wr(n,a,t,r);return i[a]=o,o}class Wwt extends ND{constructor(n,i,r,a){var o,s,l,f;super(n,"concat",i,r,a,n.resolve);yt(this,"children");(((s=(o=n.resolve)==null?void 0:o.axis)==null?void 0:s.x)==="shared"||((f=(l=n.resolve)==null?void 0:l.axis)==null?void 0:f.y)==="shared")&&Tt(n1t),this.children=this.getChildren(n).map((d,p)=>UD(d,this,this.getName(`concat_${p}`),void 0,a))}parseData(){this.component.data=fw(this);for(const n of this.children)n.parseData()}parseSelections(){this.component.selection={};for(const n of this.children){n.parseSelections();for(const i of Et(n.component.selection))this.component.selection[i]=n.component.selection[i]}Rn(this.component.selection).some(n=>Ko(n))&&N$(R$)}parseMarkGroup(){for(const n of this.children)n.parseMarkGroup()}parseAxesAndHeaders(){for(const n of this.children)n.parseAxesAndHeaders()}getChildren(n){return Z2(n)?n.vconcat:gD(n)?n.hconcat:n.concat}parseLayoutSize(){jwt(this)}parseAxisGroup(){return null}assembleSelectionTopLevelSignals(n){return this.children.reduce((i,r)=>r.assembleSelectionTopLevelSignals(i),n)}assembleSignals(){return this.children.forEach(n=>n.assembleSignals()),[]}assembleLayoutSignals(){const n=TD(this);for(const i of this.children)n.push(...i.assembleLayoutSignals());return n}assembleSelectionData(n){return this.children.reduce((i,r)=>r.assembleSelectionData(i),n)}assembleMarks(){return this.children.map(n=>{const i=n.assembleTitle(),r=n.assembleGroupStyle(),a=n.assembleGroupEncodeEntry(!1);return{type:"group",name:n.getName("group"),...i?{title:i}:{},...r?{style:r}:{},...a?{encode:{update:a}}:{},...n.assembleGroup()}})}assembleGroupStyle(){}assembleDefaultLayout(){const n=this.layout.columns;return{...n!=null?{columns:n}:{},bounds:"full",align:"each"}}}function Vwt(t){return t===!1||t===null}const Qwt={disable:1,gridScale:1,scale:1,...wG,labelExpr:1,encode:1},_Y=Et(Qwt);class zD extends Lu{constructor(n={},i={},r=!1){super();yt(this,"explicit");yt(this,"implicit");yt(this,"mainExtracted");this.explicit=n,this.implicit=i,this.mainExtracted=r}clone(){return new zD(ee(this.explicit),ee(this.implicit),this.mainExtracted)}hasAxisPart(n){return n==="axis"?!0:n==="grid"||n==="title"?!!this.get(n):!Vwt(this.get(n))}hasOrientSignalRef(){return It(this.explicit.orient)}}function Kwt(t,e,n){const{encoding:i,config:r}=t,a=Un(i[e])??Un(i[_s(e)]),o=t.axis(e)||{},{format:s,formatType:l}=o;if(ih(l))return{text:io({fieldOrDatumDef:a,field:"datum.value",format:s,formatType:l,config:r}),...n};if(s===void 0&&l===void 0&&r.customFormatTypes){if(_p(a)==="quantitative"){if(bp(a)&&a.stack==="normalize"&&r.normalizedNumberFormatType)return{text:io({fieldOrDatumDef:a,field:"datum.value",format:r.normalizedNumberFormat,formatType:r.normalizedNumberFormatType,config:r}),...n};if(r.numberFormatType)return{text:io({fieldOrDatumDef:a,field:"datum.value",format:r.numberFormat,formatType:r.numberFormatType,config:r}),...n}}if(_p(a)==="temporal"&&r.timeFormatType&&Ct(a)&&!a.timeUnit)return{text:io({fieldOrDatumDef:a,field:"datum.value",format:r.timeFormat,formatType:r.timeFormatType,config:r}),...n}}return n}function Jwt(t){return Ru.reduce((e,n)=>(t.component.scales[n]&&(e[n]=[oEt(n,t)]),e),{})}const tEt={bottom:"top",top:"bottom",left:"right",right:"left"};function eEt(t){const{axes:e,resolve:n}=t.component,i={top:0,bottom:0,right:0,left:0};for(const r of t.children){r.parseAxesAndHeaders();for(const a of Et(r.component.axes))n.axis[a]=CD(t.component.resolve,a),n.axis[a]==="shared"&&(e[a]=nEt(e[a],r.component.axes[a]),e[a]||(n.axis[a]="independent",delete e[a]))}for(const r of Ru){for(const a of t.children)if(a.component.axes[r]){if(n.axis[r]==="independent"){e[r]=(e[r]??[]).concat(a.component.axes[r]);for(const o of a.component.axes[r]){const{value:s,explicit:l}=o.getWithExplicit("orient");if(!It(s)){if(i[s]>0&&!l){const f=tEt[s];i[s]>i[f]&&o.set("orient",f,!1)}i[s]++}}}delete a.component.axes[r]}if(n.axis[r]==="independent"&&e[r]&&e[r].length>1)for(const[a,o]of(e[r]||[]).entries())a>0&&o.get("grid")&&!o.explicit.grid&&(o.implicit.grid=!1)}}function nEt(t,e){if(t){if(t.length!==e.length)return;const n=t.length;for(let i=0;i<n;i++){const r=t[i],a=e[i];if(!!r!=!!a)return;if(r&&a){const o=r.getWithExplicit("orient"),s=a.getWithExplicit("orient");if(o.explicit&&s.explicit&&o.value!==s.value)return;t[i]=iEt(r,a)}}}else return e.map(n=>n.clone());return t}function iEt(t,e){for(const n of _Y){const i=dc(t.getWithExplicit(n),e.getWithExplicit(n),n,"axis",(r,a)=>{switch(n){case"title":return TH(r,a);case"gridScale":return{explicit:r.explicit,value:Tn(r.value,a.value)}}return X2(r,a,n,"axis")});t.setWithExplicit(n,i)}return t}function rEt(t,e,n,i,r){if(e==="disable")return n!==void 0;switch(n=n||{},e){case"titleAngle":case"labelAngle":return t===(It(n.labelAngle)?n.labelAngle:I0(n.labelAngle));case"values":return!!n.values;case"encode":return!!n.encoding||!!n.labelAngle;case"title":if(t===PZ(i,r))return!0}return t===n[e]}const aEt=new Set(["grid","translate","format","formatType","orient","labelExpr","tickCount","position","tickMinStep"]);function oEt(t,e){var T,M;let n=e.axis(t);const i=new zD,r=Un(e.encoding[t]),{mark:a,config:o}=e,s=(n==null?void 0:n.orient)||((T=o[t==="x"?"axisX":"axisY"])==null?void 0:T.orient)||((M=o.axis)==null?void 0:M.orient)||Zxt(t),l=e.getScaleComponent(t).get("type"),f=Bxt(t,l,s,e.config),d=n!==void 0?!n:lM("disable",o.style,n==null?void 0:n.style,f).configValue;if(i.set("disable",d,n!==void 0),d)return i;n=n||{};const p=jxt(r,n,t,o.style,f),m=uG(n.formatType,r,l),_=sG(r,r.type,n.format,n.formatType,o,!0),b={fieldOrDatumDef:r,axis:n,channel:t,model:e,scaleType:l,orient:s,labelAngle:p,format:_,formatType:m,mark:a,config:o};for(const k of _Y){const $=k in DF?DF[k](b):aF(k)?n[k]:void 0,D=$!==void 0,F=rEt($,k,n,e,t);if(D&&F)i.set(k,$,F);else{const{configValue:N=void 0,configFrom:I=void 0}=aF(k)&&k!=="values"?lM(k,o.style,n.style,f):{},q=N!==void 0;D&&!q?i.set(k,$,F):(I!=="vgAxisConfig"||aEt.has(k)&&q||zy(N)||It(N))&&i.set(k,N,!1)}}const x=n.encoding??{},S=xG.reduce((k,$)=>{if(!i.hasAxisPart($))return k;const D=HZ(x[$]??{},e),F=$==="labels"?Kwt(e,t,D):D;return F!==void 0&&!Ye(F)&&(k[$]={update:F}),k},{});return Ye(S)||i.set("encode",S,!!n.encoding||n.labelAngle!==void 0),i}function sEt({encoding:t,size:e}){for(const n of Ru){const i=Mr(n);us(e[i])&&Yl(t[n])&&(delete e[i],Tt($H(i)))}return e}const uEt={vgMark:"arc",encodeEntry:t=>({...Na(t,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...ir("x",t,{defaultPos:"mid"}),...ir("y",t,{defaultPos:"mid"}),...Au(t,"radius"),...Au(t,"theta")})},lEt={vgMark:"area",encodeEntry:t=>({...Na(t,{align:"ignore",baseline:"ignore",color:"include",orient:"include",size:"ignore",theta:"ignore"}),...ex("x",t,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:t.markDef.orient==="horizontal"}),...ex("y",t,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:t.markDef.orient==="vertical"}),...wD(t)})},cEt={vgMark:"rect",encodeEntry:t=>({...Na(t,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...Au(t,"x"),...Au(t,"y")})},fEt={vgMark:"shape",encodeEntry:t=>({...Na(t,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"})}),postEncodingTransform:t=>{const{encoding:e}=t,n=e.shape;return[{type:"geoshape",projection:t.projectionName(),...n&&Ct(n)&&n.type===Xp?{field:Ot(n,{expr:"datum"})}:{}}]}},hEt={vgMark:"image",encodeEntry:t=>({...Na(t,{align:"ignore",baseline:"ignore",color:"ignore",orient:"ignore",size:"ignore",theta:"ignore"}),...Au(t,"x"),...Au(t,"y"),...bD(t,"url")})},dEt={vgMark:"line",encodeEntry:t=>({...Na(t,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...ir("x",t,{defaultPos:"mid"}),...ir("y",t,{defaultPos:"mid"}),...gi("size",t,{vgChannel:"strokeWidth"}),...wD(t)})},pEt={vgMark:"trail",encodeEntry:t=>({...Na(t,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...ir("x",t,{defaultPos:"mid"}),...ir("y",t,{defaultPos:"mid"}),...gi("size",t),...wD(t)})};function FD(t,e){const{config:n}=t;return{...Na(t,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...ir("x",t,{defaultPos:"mid"}),...ir("y",t,{defaultPos:"mid"}),...gi("size",t),...gi("angle",t),...gEt(t,n,e)}}function gEt(t,e,n){return n?{shape:{value:n}}:gi("shape",t)}const mEt={vgMark:"symbol",encodeEntry:t=>FD(t)},yEt={vgMark:"symbol",encodeEntry:t=>FD(t,"circle")},vEt={vgMark:"symbol",encodeEntry:t=>FD(t,"square")},_Et={vgMark:"rect",encodeEntry:t=>({...Na(t,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...Au(t,"x"),...Au(t,"y")})},bEt={vgMark:"rule",encodeEntry:t=>{const{markDef:e}=t,n=e.orient;return!t.encoding.x&&!t.encoding.y&&!t.encoding.latitude&&!t.encoding.longitude?{}:{...Na(t,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...ex("x",t,{defaultPos:n==="horizontal"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="vertical"}),...ex("y",t,{defaultPos:n==="vertical"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="horizontal"}),...gi("size",t,{vgChannel:"strokeWidth"})}}},xEt={vgMark:"text",encodeEntry:t=>{const{config:e,encoding:n}=t;return{...Na(t,{align:"include",baseline:"include",color:"include",size:"ignore",orient:"ignore",theta:"include"}),...ir("x",t,{defaultPos:"mid"}),...ir("y",t,{defaultPos:"mid"}),...bD(t),...gi("size",t,{vgChannel:"fontSize"}),...gi("angle",t),...MF("align",wEt(t.markDef,n,e)),...MF("baseline",EEt(t.markDef,n,e)),...ir("radius",t,{defaultPos:null}),...ir("theta",t,{defaultPos:null})}}};function wEt(t,e,n){if(je("align",t,n)===void 0)return"center"}function EEt(t,e,n){if(je("baseline",t,n)===void 0)return"middle"}const SEt={vgMark:"rect",encodeEntry:t=>{const{config:e,markDef:n}=t,i=n.orient,r=i==="horizontal"?"x":"y",a=i==="horizontal"?"y":"x",o=i==="horizontal"?"height":"width";return{...Na(t,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...Au(t,r),...ir(a,t,{defaultPos:"mid",vgChannel:a==="y"?"yc":"xc"}),[o]:en(je("thickness",n,e))}}},Vv={arc:uEt,area:lEt,bar:cEt,circle:yEt,geoshape:fEt,image:hEt,line:dEt,point:mEt,rect:_Et,rule:bEt,square:vEt,text:xEt,tick:SEt,trail:pEt};function AEt(t){if(pe([F2,L2,Dvt],t.mark)){const e=MG(t.mark,t.encoding);if(e.length>0)return TEt(t,e)}else if(t.mark===z2){const e=YC.some(n=>je(n,t.markDef,t.config));if(t.stack&&!t.fieldDef("size")&&e)return CEt(t)}return PD(t)}const YF="faceted_path_";function TEt(t,e){return[{name:t.getName("pathgroup"),type:"group",from:{facet:{name:YF+t.requestDataName(gn.Main),data:t.requestDataName(gn.Main),groupby:e}},encode:{update:{width:{field:{group:"width"}},height:{field:{group:"height"}}}},marks:PD(t,{fromPrefix:YF})}]}const XF="stack_group_";function CEt(t){var f;const[e]=PD(t,{fromPrefix:XF}),n=t.scaleName(t.stack.fieldChannel),i=(d={})=>t.vgField(t.stack.fieldChannel,d),r=(d,p)=>{const m=[i({prefix:"min",suffix:"start",expr:p}),i({prefix:"max",suffix:"start",expr:p}),i({prefix:"min",suffix:"end",expr:p}),i({prefix:"max",suffix:"end",expr:p})];return`${d}(${m.map(_=>`scale('${n}',${_})`).join(",")})`};let a,o;t.stack.fieldChannel==="x"?(a={...dp(e.encode.update,["y","yc","y2","height",...YC]),x:{signal:r("min","datum")},x2:{signal:r("max","datum")},clip:{value:!0}},o={x:{field:{group:"x"},mult:-1},height:{field:{group:"height"}}},e.encode.update={...Kr(e.encode.update,["y","yc","y2"]),height:{field:{group:"height"}}}):(a={...dp(e.encode.update,["x","xc","x2","width"]),y:{signal:r("min","datum")},y2:{signal:r("max","datum")},clip:{value:!0}},o={y:{field:{group:"y"},mult:-1},width:{field:{group:"width"}}},e.encode.update={...Kr(e.encode.update,["x","xc","x2"]),width:{field:{group:"width"}}});for(const d of YC){const p=os(d,t.markDef,t.config);e.encode.update[d]?(a[d]=e.encode.update[d],delete e.encode.update[d]):p&&(a[d]=en(p)),p&&(e.encode.update[d]={value:0})}const s=[];if(((f=t.stack.groupbyChannels)==null?void 0:f.length)>0)for(const d of t.stack.groupbyChannels){const p=t.fieldDef(d),m=Ot(p);m&&s.push(m),(p!=null&&p.bin||p!=null&&p.timeUnit)&&s.push(Ot(p,{binSuffix:"end"}))}return a=["stroke","strokeWidth","strokeJoin","strokeCap","strokeDash","strokeDashOffset","strokeMiterLimit","strokeOpacity"].reduce((d,p)=>{if(e.encode.update[p])return{...d,[p]:e.encode.update[p]};{const m=os(p,t.markDef,t.config);return m!==void 0?{...d,[p]:en(m)}:d}},a),a.stroke&&(a.strokeForeground={value:!0},a.strokeOffset={value:0}),[{type:"group",from:{facet:{data:t.requestDataName(gn.Main),name:XF+t.requestDataName(gn.Main),groupby:s,aggregate:{fields:[i({suffix:"start"}),i({suffix:"start"}),i({suffix:"end"}),i({suffix:"end"})],ops:["min","max","min","max"]}}},encode:{update:a},marks:[{type:"group",encode:{update:o},marks:[e]}]}]}function MEt(t){const{encoding:e,stack:n,mark:i,markDef:r,config:a}=t,o=e.order;if(!(!gt(o)&&co(o)&&GC(o.value)||!o&&GC(je("order",r,a)))){if((gt(o)||Ct(o))&&!n)return EH(o,{expr:"datum"});if(kc(i)){const s=r.orient==="horizontal"?"y":"x",l=e[s];if(Ct(l))return{field:s}}}}function PD(t,e={fromPrefix:""}){const{mark:n,markDef:i,encoding:r,config:a}=t,o=Tn(i.clip,kEt(t),OEt(t)),s=xH(i),l=r.key,f=MEt(t),d=$Et(t),p=je("aria",i,a),m=Vv[n].postEncodingTransform?Vv[n].postEncodingTransform(t):null;return[{name:t.getName("marks"),type:Vv[n].vgMark,...o?{clip:o}:{},...s?{style:s}:{},...l?{key:l.field}:{},...f?{sort:f}:{},...d||{},...p===!1?{aria:p}:{},from:{data:e.fromPrefix+t.requestDataName(gn.Main)},encode:{update:Vv[n].encodeEntry(t)},...m?{transform:m}:{}}]}function kEt(t){const e=t.getScaleComponent("x"),n=t.getScaleComponent("y");return e!=null&&e.get("selectionExtent")||n!=null&&n.get("selectionExtent")?!0:void 0}function OEt(t){const e=t.component.projection;return e&&!e.isFit?!0:void 0}function $Et(t){if(!t.component.selection)return null;const e=Et(t.component.selection).length;let n=e,i=t.parent;for(;i&&n===0;)n=Et(i.component.selection).length,i=i.parent;return n?{interactive:e>0||t.mark==="geoshape"||!!t.encoding.tooltip||!!t.markDef.tooltip}:null}class bY extends gY{constructor(n,i,r,a={},o){super(n,"unit",i,r,o,void 0,sF(n)?n.view:void 0);yt(this,"markDef");yt(this,"encoding");yt(this,"specifiedScales",{});yt(this,"stack");yt(this,"specifiedAxes",{});yt(this,"specifiedLegends",{});yt(this,"specifiedProjection",{});yt(this,"selection",[]);yt(this,"children",[]);yt(this,"correctDataNames",n=>{var i,r,a;return(i=n.from)!=null&&i.data&&(n.from.data=this.lookupDataSource(n.from.data),"time"in this.encoding&&(n.from.data=n.from.data+lZ)),(a=(r=n.from)==null?void 0:r.facet)!=null&&a.data&&(n.from.facet.data=this.lookupDataSource(n.from.facet.data)),n});const s=ss(n.mark)?{...n.mark}:{type:n.mark},l=s.type;s.filled===void 0&&(s.filled=gbt(s,o,{graticule:n.data&&vD(n.data)}));const f=this.encoding=__t(n.encoding||{},l,s.filled,o);this.markDef=WG(s,f,o),this.size=sEt({encoding:f,size:sF(n)?{...a,...n.width?{width:n.width}:{},...n.height?{height:n.height}:{}}:a}),this.stack=XG(this.markDef,f),this.specifiedScales=this.initScales(l,f),this.specifiedAxes=this.initAxes(f),this.specifiedLegends=this.initLegends(f),this.specifiedProjection=n.projection,this.selection=(n.params??[]).filter(d=>dD(d))}get hasProjection(){const{encoding:n}=this,i=this.mark===tG,r=n&&fyt.some(a=>ie(n[a]));return i||r}scaleDomain(n){const i=this.specifiedScales[n];return i?i.domain:void 0}axis(n){return this.specifiedAxes[n]}legend(n){return this.specifiedLegends[n]}initScales(n,i){return k$.reduce((r,a)=>{const o=Un(i[a]);return o&&(r[a]=this.initScale(o.scale??{})),r},{})}initScale(n){const{domain:i,range:r}=n,a=di(n);return gt(i)&&(a.domain=i.map(Zr)),gt(r)&&(a.range=r.map(Zr)),a}initAxes(n){return Ru.reduce((i,r)=>{const a=n[r];if(ie(a)||r===un&&ie(n.x2)||r===ai&&ie(n.y2)){const o=ie(a)?a.axis:void 0;i[r]=o&&this.initAxis({...o})}return i},{})}initAxis(n){const i=Et(n),r={};for(const a of i){const o=n[a];r[a]=zy(o)?bH(o):Zr(o)}return r}initLegends(n){return wyt.reduce((i,r)=>{const a=Un(n[r]);if(a&&Syt(r)){const o=a.legend;i[r]=o&&di(o)}return i},{})}parseData(){this.component.data=fw(this)}parseLayoutSize(){Hwt(this)}parseSelections(){this.component.selection=Lxt(this,this.selection)}parseMarkGroup(){this.component.mark=AEt(this)}parseAxesAndHeaders(){this.component.axes=Jwt(this)}assembleSelectionTopLevelSignals(n){return uxt(this,n)}assembleSignals(){return[...LZ(this),...oxt(this,[])]}assembleSelectionData(n){return lxt(this,n)}assembleLayout(){return null}assembleLayoutSignals(){return TD(this)}assembleMarks(){let n=this.component.mark??[];return(!this.parent||!Jp(this.parent))&&(n=dZ(this,n)),n.map(this.correctDataNames)}assembleGroupStyle(){const{style:n}=this.view||{};return n!==void 0?n:this.encoding.x||this.encoding.y?"cell":"view"}getMapping(){return this.encoding}get mark(){return this.markDef.type}channelHasField(n){return Lf(this.encoding,n)}fieldDef(n){const i=this.encoding[n];return fo(i)}typedFieldDef(n){const i=this.fieldDef(n);return ur(i)?i:null}}class BD extends ND{constructor(n,i,r,a,o){super(n,"layer",i,r,o,n.resolve,n.view);yt(this,"children");const s={...a,...n.width?{width:n.width}:{},...n.height?{height:n.height}:{}};this.children=n.layer.map((l,f)=>{if(Y2(l))return new BD(l,this,this.getName(`layer_${f}`),s,o);if(Nu(l))return new bY(l,this,this.getName(`layer_${f}`),s,o);throw new Error($$(l))})}parseData(){this.component.data=fw(this);for(const n of this.children)n.parseData()}parseLayoutSize(){qwt(this)}parseSelections(){this.component.selection={};for(const n of this.children){n.parseSelections();for(const i of Et(n.component.selection))this.component.selection[i]=n.component.selection[i]}Rn(this.component.selection).some(n=>Ko(n))&&N$(R$)}parseMarkGroup(){for(const n of this.children)n.parseMarkGroup()}parseAxesAndHeaders(){eEt(this)}assembleSelectionTopLevelSignals(n){return this.children.reduce((i,r)=>r.assembleSelectionTopLevelSignals(i),n)}assembleSignals(){return this.children.reduce((n,i)=>n.concat(i.assembleSignals()),LZ(this))}assembleLayoutSignals(){return this.children.reduce((n,i)=>n.concat(i.assembleLayoutSignals()),TD(this))}assembleSelectionData(n){return this.children.reduce((i,r)=>r.assembleSelectionData(i),n)}assembleGroupStyle(){const n=new Set;for(const r of this.children)for(const a of Nt(r.assembleGroupStyle()))n.add(a);const i=Array.from(n);return i.length>1?i:i.length===1?i[0]:void 0}assembleTitle(){let n=super.assembleTitle();if(n)return n;for(const i of this.children)if(n=i.assembleTitle(),n)return n}assembleLayout(){return null}assembleMarks(){return cxt(this,this.children.flatMap(n=>n.assembleMarks()))}assembleLegends(){return this.children.reduce((n,i)=>n.concat(i.assembleLegends()),KZ(this))}}function UD(t,e,n,i,r){if(U2(t))return new g0(t,e,n,r);if(Y2(t))return new BD(t,e,n,i,r);if(Nu(t))return new bY(t,e,n,i,r);if(j_t(t))return new Wwt(t,e,n,r);throw new Error($$(t))}function DEt(t,e={}){e.logger&&Z1t(e.logger),e.fieldTitle&&vG(e.fieldTitle);try{const n=YG(kp(e.config,t.config)),i=nZ(t,n),r=UD(i,null,"",void 0,n);return r.parse(),nwt(r.component.data,r),{spec:NEt(r,REt(t,i.autosize,n,r),t.datasets,t.usermeta),normalized:i}}finally{e.logger&&Y1t(),e.fieldTitle&&c_t()}}function REt(t,e,n,i){const r=i.component.layoutSize.get("width"),a=i.component.layoutSize.get("height");if(e===void 0?(e={type:"pad"},i.hasAxisOrientSignalRef()&&(e.resize=!0)):Dt(e)&&(e={type:e}),r&&a&&Vbt(e.type)){if(r==="step"&&a==="step")Tt(G4()),e.type="pad";else if(r==="step"||a==="step"){const o=r==="step"?"width":"height";Tt(G4(k2(o)));const s=o==="width"?"height":"width";e.type=Qbt(s)}}return{...Et(e).length===1&&e.type?e.type==="pad"?{}:{autosize:e.type}:{autosize:e},..._F(n,!1),..._F(t,!0)}}function NEt(t,e,n={},i){const r=t.config?ibt(t.config):void 0,a=Pwt(t.component.data,n),o=t.assembleSelectionData(a),s=t.assembleProjections(),l=t.assembleTitle(),f=t.assembleGroupStyle(),d=t.assembleGroupEncodeEntry(!0);let p=t.assembleLayoutSignals();p=p.filter(b=>(b.name==="width"||b.name==="height")&&b.value!==void 0?(e[b.name]=+b.value,!1):!0);const{params:m,..._}=e;return{$schema:"https://vega.github.io/schema/vega/v6.json",...t.description?{description:t.description}:{},..._,...l?{title:l}:{},...f?{style:f}:{},...d?{encode:{update:d}}:{},data:o,...s.length>0?{projections:s}:{},...t.assembleGroup([...p,...t.assembleSelectionTopLevelSignals([]),...jG(m)]),...r?{config:r}:{},...i?{usermeta:i}:{}}}const LEt=ayt.version,zEt=Object.freeze(Object.defineProperty({__proto__:null,accessPathDepth:gp,accessPathWithDatum:x$,accessWithDatumToUnescapedPath:Fe,compile:DEt,contains:pe,deepEqual:Xr,deleteNestedProperty:Gb,duplicate:ee,entries:cc,every:v$,fieldIntersection:b$,flatAccessWithDatum:eH,getFirstDefined:Tn,hasIntersection:_$,hasProperty:St,hash:ye,internalField:rH,isBoolean:U0,isEmpty:Ye,isEqual:syt,isInternalField:aH,isNullOrFalse:GC,isNumeric:E2,keys:Et,logicalExpr:d0,mergeDeep:Jj,never:Kj,normalize:nZ,normalizeAngle:I0,omit:Kr,pick:dp,prefixGenerator:ZC,removePathFromField:Zp,replaceAll:Qf,replacePathInField:Oa,resetIdCounter:lyt,setEqual:tH,some:pp,stringify:Ne,titleCase:Ay,unique:Zo,uniqueId:iH,vals:Rn,varName:sn,version:LEt},Symbol.toStringTag,{value:"Module"}));function xY(t){const[e,n]=/schema\/([\w-]+)\/([\w\.\-]+)\.json$/g.exec(t).slice(1,3);return{library:e,version:n}}var FEt="3.0.0",PEt={version:FEt};const Ad="#fff",WF="#888",BEt={background:"#333",view:{stroke:WF},title:{color:Ad,subtitleColor:Ad},style:{"guide-label":{fill:Ad},"guide-title":{fill:Ad}},axis:{domainColor:Ad,gridColor:WF,tickColor:Ad}},cf="#4572a7",UEt={background:"#fff",arc:{fill:cf},area:{fill:cf},line:{stroke:cf,strokeWidth:2},path:{stroke:cf},rect:{fill:cf},shape:{stroke:cf},symbol:{fill:cf,strokeWidth:1.5,size:50},axis:{bandPosition:.5,grid:!0,gridColor:"#000000",gridOpacity:1,gridWidth:.5,labelPadding:10,tickSize:5,tickWidth:.5},axisBand:{grid:!1,tickExtra:!0},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:50,symbolType:"square"},range:{category:["#4572a7","#aa4643","#8aa453","#71598e","#4598ae","#d98445","#94aace","#d09393","#b9cc98","#a99cbc"]}},ff="#30a2da",PA="#cbcbcb",IEt="#999",qEt="#333",VF="#f0f0f0",QF="#333",jEt={arc:{fill:ff},area:{fill:ff},axis:{domainColor:PA,grid:!0,gridColor:PA,gridWidth:1,labelColor:IEt,labelFontSize:10,titleColor:qEt,tickColor:PA,tickSize:10,titleFontSize:14,titlePadding:10,labelPadding:4},axisBand:{grid:!1},background:VF,group:{fill:VF},legend:{labelColor:QF,labelFontSize:11,padding:1,symbolSize:30,symbolType:"square",titleColor:QF,titleFontSize:14,titlePadding:10},line:{stroke:ff,strokeWidth:2},path:{stroke:ff,strokeWidth:.5},rect:{fill:ff},range:{category:["#30a2da","#fc4f30","#e5ae38","#6d904f","#8b8b8b","#b96db8","#ff9e27","#56cc60","#52d2ca","#52689e","#545454","#9fe4f8"],diverging:["#cc0020","#e77866","#f6e7e1","#d6e8ed","#91bfd9","#1d78b5"],heatmap:["#d6e8ed","#cee0e5","#91bfd9","#549cc6","#1d78b5"]},point:{filled:!0,shape:"circle"},shape:{stroke:ff},bar:{binSpacing:2,fill:ff,stroke:null},title:{anchor:"start",fontSize:24,fontWeight:600,offset:20}},hf="#000",HEt={group:{fill:"#e5e5e5"},arc:{fill:hf},area:{fill:hf},line:{stroke:hf},path:{stroke:hf},rect:{fill:hf},shape:{stroke:hf},symbol:{fill:hf,size:40},axis:{domain:!1,grid:!0,gridColor:"#FFFFFF",gridOpacity:1,labelColor:"#7F7F7F",labelPadding:4,tickColor:"#7F7F7F",tickSize:5.67,titleFontSize:16,titleFontWeight:"normal"},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:40},range:{category:["#000000","#7F7F7F","#1A1A1A","#999999","#333333","#B0B0B0","#4D4D4D","#C9C9C9","#666666","#DCDCDC"]}},GEt=22,ZEt="normal",KF="Benton Gothic, sans-serif",JF=11.5,YEt="normal",df="#82c6df",BA="Benton Gothic Bold, sans-serif",t8="normal",e8=13,Cm={"category-6":["#ec8431","#829eb1","#c89d29","#3580b1","#adc839","#ab7fb4"],"fire-7":["#fbf2c7","#f9e39c","#f8d36e","#f4bb6a","#e68a4f","#d15a40","#ab4232"],"fireandice-6":["#e68a4f","#f4bb6a","#f9e39c","#dadfe2","#a6b7c6","#849eae"]},XEt={background:"#ffffff",title:{anchor:"start",color:"#000000",font:BA,fontSize:GEt,fontWeight:ZEt},arc:{fill:df},area:{fill:df},line:{stroke:df,strokeWidth:2},path:{stroke:df},rect:{fill:df},shape:{stroke:df},symbol:{fill:df,size:30},axis:{labelFont:KF,labelFontSize:JF,labelFontWeight:YEt,titleFont:BA,titleFontSize:e8,titleFontWeight:t8},axisX:{labelAngle:0,labelPadding:4,tickSize:3},axisY:{labelBaseline:"middle",maxExtent:45,minExtent:45,tickSize:2,titleAlign:"left",titleAngle:0,titleX:-45,titleY:-11},legend:{labelFont:KF,labelFontSize:JF,symbolType:"square",titleFont:BA,titleFontSize:e8,titleFontWeight:t8},range:{category:Cm["category-6"],diverging:Cm["fireandice-6"],heatmap:Cm["fire-7"],ordinal:Cm["fire-7"],ramp:Cm["fire-7"]}},pf="#ab5787",Qv="#979797",WEt={background:"#f9f9f9",arc:{fill:pf},area:{fill:pf},line:{stroke:pf},path:{stroke:pf},rect:{fill:pf},shape:{stroke:pf},symbol:{fill:pf,size:30},axis:{domainColor:Qv,domainWidth:.5,gridWidth:.2,labelColor:Qv,tickColor:Qv,tickWidth:.2,titleColor:Qv},axisBand:{grid:!1},axisX:{grid:!0,tickSize:10},axisY:{domain:!1,grid:!0,tickSize:0},legend:{labelFontSize:11,padding:1,symbolSize:30,symbolType:"square"},range:{category:["#ab5787","#51b2e5","#703c5c","#168dd9","#d190b6","#00609f","#d365ba","#154866","#666666","#c4c4c4"]}},gf="#3e5c69",VEt={background:"#fff",arc:{fill:gf},area:{fill:gf},line:{stroke:gf},path:{stroke:gf},rect:{fill:gf},shape:{stroke:gf},symbol:{fill:gf},axis:{domainWidth:.5,grid:!0,labelPadding:2,tickSize:5,tickWidth:.5,titleFontWeight:"normal"},axisBand:{grid:!1},axisX:{gridWidth:.2},axisY:{gridDash:[3],gridWidth:.4},legend:{labelFontSize:11,padding:1,symbolType:"square"},range:{category:["#3e5c69","#6793a6","#182429","#0570b0","#3690c0","#74a9cf","#a6bddb","#e2ddf2"]}},ma="#1696d2",n8="#000000",QEt="#FFFFFF",Kv="Lato",UA="Lato",KEt="Lato",JEt="#DEDDDD",tSt=18,Mm={"shades-blue":["#CFE8F3","#A2D4EC","#73BFE2","#46ABDB","#1696D2","#12719E","#0A4C6A","#062635"],"six-groups-cat-1":["#1696d2","#ec008b","#fdbf11","#000000","#d2d2d2","#55b748"],"six-groups-seq":["#cfe8f3","#a2d4ec","#73bfe2","#46abdb","#1696d2","#12719e"],"diverging-colors":["#ca5800","#fdbf11","#fdd870","#fff2cf","#cfe8f3","#73bfe2","#1696d2","#0a4c6a"]},eSt={background:QEt,title:{anchor:"start",fontSize:tSt,font:Kv},axisX:{domain:!0,domainColor:n8,domainWidth:1,grid:!1,labelFontSize:12,labelFont:UA,labelAngle:0,tickColor:n8,tickSize:5,titleFontSize:12,titlePadding:10,titleFont:Kv},axisY:{domain:!1,domainWidth:1,grid:!0,gridColor:JEt,gridWidth:1,labelFontSize:12,labelFont:UA,labelPadding:8,ticks:!1,titleFontSize:12,titlePadding:10,titleFont:Kv,titleAngle:0,titleY:-10,titleX:18},legend:{labelFontSize:12,labelFont:UA,symbolSize:100,titleFontSize:12,titlePadding:10,titleFont:Kv,orient:"right",offset:10},view:{stroke:"transparent"},range:{category:Mm["six-groups-cat-1"],diverging:Mm["diverging-colors"],heatmap:Mm["diverging-colors"],ordinal:Mm["six-groups-seq"],ramp:Mm["shades-blue"]},area:{fill:ma},rect:{fill:ma},line:{color:ma,stroke:ma,strokeWidth:5},trail:{color:ma,stroke:ma,strokeWidth:0,size:1},path:{stroke:ma,strokeWidth:.5},point:{filled:!0},text:{font:KEt,color:ma,fontSize:11,align:"center",fontWeight:400,size:11},style:{bar:{fill:ma,stroke:null}},arc:{fill:ma},shape:{stroke:ma},symbol:{fill:ma,size:30}},mf="#3366CC",i8="#ccc",Jv="Arial, sans-serif",nSt={arc:{fill:mf},area:{fill:mf},path:{stroke:mf},rect:{fill:mf},shape:{stroke:mf},symbol:{stroke:mf},circle:{fill:mf},background:"#fff",padding:{top:10,right:10,bottom:10,left:10},style:{"guide-label":{font:Jv,fontSize:12},"guide-title":{font:Jv,fontSize:12},"group-title":{font:Jv,fontSize:12}},title:{font:Jv,fontSize:14,fontWeight:"bold",dy:-3,anchor:"start"},axis:{gridColor:i8,tickColor:i8,domain:!1,grid:!0},range:{category:["#4285F4","#DB4437","#F4B400","#0F9D58","#AB47BC","#00ACC1","#FF7043","#9E9D24","#5C6BC0","#F06292","#00796B","#C2185B"],heatmap:["#c6dafc","#5e97f6","#2a56c6"]}},ID=t=>t*(1/3+1),r8=ID(9),a8=ID(10),o8=ID(12),km="Segoe UI",s8="wf_standard-font, helvetica, arial, sans-serif",u8="#252423",Om="#605E5C",l8="transparent",iSt="#C8C6C4",Ya="#118DFF",rSt="#12239E",aSt="#E66C37",oSt="#6B007B",sSt="#E044A7",uSt="#744EC2",lSt="#D9B300",cSt="#D64550",wY=Ya,EY="#DEEFFF",c8=[EY,wY],fSt=[EY,"#c7e4ff","#b0d9ff","#9aceff","#83c3ff","#6cb9ff","#55aeff","#3fa3ff","#2898ff",wY],hSt={view:{stroke:l8},background:l8,font:km,header:{titleFont:s8,titleFontSize:o8,titleColor:u8,labelFont:km,labelFontSize:a8,labelColor:Om},axis:{ticks:!1,grid:!1,domain:!1,labelColor:Om,labelFontSize:r8,titleFont:s8,titleColor:u8,titleFontSize:o8,titleFontWeight:"normal"},axisQuantitative:{tickCount:3,grid:!0,gridColor:iSt,gridDash:[1,5],labelFlush:!1},axisBand:{tickExtra:!0},axisX:{labelPadding:5},axisY:{labelPadding:10},bar:{fill:Ya},line:{stroke:Ya,strokeWidth:3,strokeCap:"round",strokeJoin:"round"},text:{font:km,fontSize:r8,fill:Om},arc:{fill:Ya},area:{fill:Ya,line:!0,opacity:.6},path:{stroke:Ya},rect:{fill:Ya},point:{fill:Ya,filled:!0,size:75},shape:{stroke:Ya},symbol:{fill:Ya,strokeWidth:1.5,size:50},legend:{titleFont:km,titleFontWeight:"bold",titleColor:Om,labelFont:km,labelFontSize:a8,labelColor:Om,symbolType:"circle",symbolSize:75},range:{category:[Ya,rSt,aSt,oSt,sSt,uSt,lSt,cSt],diverging:c8,heatmap:c8,ordinal:fSt}},IA='IBM Plex Sans,system-ui,-apple-system,BlinkMacSystemFont,".sfnstext-regular",sans-serif',dSt='IBM Plex Sans Condensed, system-ui, -apple-system, BlinkMacSystemFont, ".SFNSText-Regular", sans-serif',qA=400,t_={textPrimary:{g90:"#f4f4f4",g100:"#f4f4f4",white:"#161616",g10:"#161616"},textSecondary:{g90:"#c6c6c6",g100:"#c6c6c6",white:"#525252",g10:"#525252"},layerAccent01:{white:"#e0e0e0",g10:"#e0e0e0",g90:"#525252",g100:"#393939"},gridBg:{white:"#ffffff",g10:"#ffffff",g90:"#161616",g100:"#161616"}},pSt=["#8a3ffc","#33b1ff","#007d79","#ff7eb6","#fa4d56","#fff1f1","#6fdc8c","#4589ff","#d12771","#d2a106","#08bdba","#bae6ff","#ba4e00","#d4bbff"],gSt=["#6929c4","#1192e8","#005d5d","#9f1853","#fa4d56","#570408","#198038","#002d9c","#ee538b","#b28600","#009d9a","#012749","#8a3800","#a56eff"];function hw({theme:t,background:e}){const n=["white","g10"].includes(t)?"light":"dark",i=t_.gridBg[t],r=t_.textPrimary[t],a=t_.textSecondary[t],o=n==="dark"?pSt:gSt,s=n==="dark"?"#d4bbff":"#6929c4";return{background:e,arc:{fill:s},area:{fill:s},path:{stroke:s},rect:{fill:s},shape:{stroke:s},symbol:{stroke:s},circle:{fill:s},view:{fill:i,stroke:i},group:{fill:i},title:{color:r,anchor:"start",dy:-15,fontSize:16,font:IA,fontWeight:600},axis:{labelColor:a,labelFontSize:12,labelFont:dSt,labelFontWeight:qA,titleColor:r,titleFontWeight:600,titleFontSize:12,grid:!0,gridColor:t_.layerAccent01[t],labelAngle:0},axisX:{titlePadding:10},axisY:{titlePadding:2.5},style:{"guide-label":{font:IA,fill:a,fontWeight:qA},"guide-title":{font:IA,fill:a,fontWeight:qA}},range:{category:o,diverging:["#750e13","#a2191f","#da1e28","#fa4d56","#ff8389","#ffb3b8","#ffd7d9","#fff1f1","#e5f6ff","#bae6ff","#82cfff","#33b1ff","#1192e8","#0072c3","#00539a","#003a6d"],heatmap:["#f6f2ff","#e8daff","#d4bbff","#be95ff","#a56eff","#8a3ffc","#6929c4","#491d8b","#31135e","#1c0f30"]}}}const mSt=hw({theme:"white",background:"#ffffff"}),ySt=hw({theme:"g10",background:"#f4f4f4"}),vSt=hw({theme:"g90",background:"#262626"}),_St=hw({theme:"g100",background:"#161616"}),bSt=PEt.version,xSt=Object.freeze(Object.defineProperty({__proto__:null,carbong10:ySt,carbong100:_St,carbong90:vSt,carbonwhite:mSt,dark:BEt,excel:UEt,fivethirtyeight:jEt,ggplot2:HEt,googlecharts:nSt,latimes:XEt,powerbi:hSt,quartz:WEt,urbaninstitute:eSt,version:bSt,vox:VEt},Symbol.toStringTag,{value:"Module"}));function wSt(t,e,n,i){if(gt(t))return`[${t.map(r=>e(Dt(r)?r:f8(r,n))).join(", ")}]`;if(Rt(t)){let r="";const{title:a,image:o,...s}=t;a&&(r+=`<h2>${e(a)}</h2>`),o&&(r+=`<img src="${new URL(e(o),i||location.href).href}">`);const l=Object.keys(s);if(l.length>0){r+="<table>";for(const f of l){let d=s[f];d!==void 0&&(Rt(d)&&(d=f8(d,n)),r+=`<tr><td class="key">${e(f)}</td><td class="value">${e(d)}</td></tr>`)}r+="</table>"}return r||"{}"}return e(t)}function ESt(t){const e=[];return function(n,i){if(typeof i!="object"||i===null)return i;const r=e.indexOf(this)+1;return e.length=r,e.length>t?"[Object]":e.indexOf(i)>=0?"[Circular]":(e.push(i),i)}}function f8(t,e){return JSON.stringify(t,ESt(e))}var SSt=`#vg-tooltip-element {
  visibility: hidden;
  padding: 8px;
  position: fixed;
  z-index: 1000;
  font-family: sans-serif;
  font-size: 11px;
  border-radius: 3px;
  box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
  /* The default theme is the light theme. */
  background-color: rgba(255, 255, 255, 0.95);
  border: 1px solid #d9d9d9;
  color: black;
}
#vg-tooltip-element.visible {
  visibility: visible;
}
#vg-tooltip-element h2 {
  margin-top: 0;
  margin-bottom: 10px;
  font-size: 13px;
}
#vg-tooltip-element table {
  border-spacing: 0;
}
#vg-tooltip-element table tr {
  border: none;
}
#vg-tooltip-element table tr td {
  overflow: hidden;
  text-overflow: ellipsis;
  padding-top: 2px;
  padding-bottom: 2px;
}
#vg-tooltip-element table tr td.key {
  color: #808080;
  max-width: 150px;
  text-align: right;
  padding-right: 4px;
}
#vg-tooltip-element table tr td.value {
  display: block;
  max-width: 300px;
  max-height: 7em;
  text-align: left;
}
#vg-tooltip-element.dark-theme {
  background-color: rgba(32, 32, 32, 0.9);
  border: 1px solid #f5f5f5;
  color: white;
}
#vg-tooltip-element.dark-theme td.key {
  color: #bfbfbf;
}
`;const SY="vg-tooltip-element",ASt={offsetX:10,offsetY:10,id:SY,styleId:"vega-tooltip-style",theme:"light",disableDefaultStyle:!1,sanitize:TSt,maxDepth:2,formatTooltip:wSt,baseURL:"",anchor:"cursor",position:["top","bottom","left","right","top-left","top-right","bottom-left","bottom-right"]};function TSt(t){return String(t).replace(/&/g,"&amp;").replace(/</g,"&lt;")}function CSt(t){if(!/^[A-Za-z]+[-:.\w]*$/.test(t))throw new Error("Invalid HTML ID");return SSt.toString().replaceAll(SY,t)}function AY(t,e,{offsetX:n,offsetY:i}){const r=TY({x1:t.clientX,x2:t.clientX,y1:t.clientY,y2:t.clientY},e,n,i),a=["bottom-right","bottom-left","top-right","top-left"];for(const o of a)if(CY(r[o],e))return r[o];return r["top-left"]}function MSt(t,e,n,i,r){const{position:a,offsetX:o,offsetY:s}=r,l=t._el.getBoundingClientRect(),f=t._origin,d=kSt(l,f,n),p=TY(d,i,o,s),m=Array.isArray(a)?a:[a];for(const _ of m)if(CY(p[_],i)&&!OSt(e,p[_],i))return p[_];return AY(e,i,r)}function kSt(t,e,n){const i=n.isVoronoi?n.datum.bounds:n.bounds;let r=t.left+e[0]+i.x1,a=t.top+e[1]+i.y1,o=n;for(;o.mark.group;)o=o.mark.group,r+=o.x??0,a+=o.y??0;const s=i.x2-i.x1,l=i.y2-i.y1;return{x1:r,x2:r+s,y1:a,y2:a+l}}function TY(t,e,n,i){const r=(t.x1+t.x2)/2,a=(t.y1+t.y2)/2,o=t.x1-e.width-n,s=r-e.width/2,l=t.x2+n,f=t.y1-e.height-i,d=a-e.height/2,p=t.y2+i;return{top:{x:s,y:f},bottom:{x:s,y:p},left:{x:o,y:d},right:{x:l,y:d},"top-left":{x:o,y:f},"top-right":{x:l,y:f},"bottom-left":{x:o,y:p},"bottom-right":{x:l,y:p}}}function CY(t,e){return t.x>=0&&t.y>=0&&t.x+e.width<=window.innerWidth&&t.y+e.height<=window.innerHeight}function OSt(t,e,n){return t.clientX>=e.x&&t.clientX<=e.x+n.width&&t.clientY>=e.y&&t.clientY<=e.y+n.height}class $St{constructor(e){yt(this,"call");yt(this,"options");yt(this,"el");this.options={...ASt,...e};const n=this.options.id;if(this.el=null,this.call=this.tooltipHandler.bind(this),!this.options.disableDefaultStyle&&!document.getElementById(this.options.styleId)){const i=document.createElement("style");i.setAttribute("id",this.options.styleId),i.innerHTML=CSt(n);const r=document.head;r.childNodes.length>0?r.insertBefore(i,r.childNodes[0]):r.appendChild(i)}}tooltipHandler(e,n,i,r){if(this.el=document.getElementById(this.options.id),this.el||(this.el=document.createElement("div"),this.el.setAttribute("id",this.options.id),this.el.classList.add("vg-tooltip"),(document.fullscreenElement??document.body).appendChild(this.el)),r==null||r===""){this.el.classList.remove("visible",`${this.options.theme}-theme`);return}this.el.innerHTML=this.options.formatTooltip(r,this.options.sanitize,this.options.maxDepth,this.options.baseURL),this.el.classList.add("visible",`${this.options.theme}-theme`);const{x:a,y:o}=this.options.anchor==="mark"?MSt(e,n,i,this.el.getBoundingClientRect(),this.options):AY(n,this.el.getBoundingClientRect(),this.options);this.el.style.top=`${o}px`,this.el.style.left=`${a}px`}}var jA={};/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2022 Joachim Wester
 * MIT licensed
 */var DSt=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)r.hasOwnProperty(a)&&(i[a]=r[a])},t(e,n)};return function(e,n){t(e,n);function i(){this.constructor=e}e.prototype=n===null?Object.create(n):(i.prototype=n.prototype,new i)}}(),RSt=Object.prototype.hasOwnProperty;function _M(t,e){return RSt.call(t,e)}function bM(t){if(Array.isArray(t)){for(var e=new Array(t.length),n=0;n<e.length;n++)e[n]=""+n;return e}if(Object.keys)return Object.keys(t);var i=[];for(var r in t)_M(t,r)&&i.push(r);return i}function Wr(t){switch(typeof t){case"object":return JSON.parse(JSON.stringify(t));case"undefined":return null;default:return t}}function xM(t){for(var e=0,n=t.length,i;e<n;){if(i=t.charCodeAt(e),i>=48&&i<=57){e++;continue}return!1}return!0}function _f(t){return t.indexOf("/")===-1&&t.indexOf("~")===-1?t:t.replace(/~/g,"~0").replace(/\//g,"~1")}function MY(t){return t.replace(/~1/g,"/").replace(/~0/g,"~")}function wM(t){if(t===void 0)return!0;if(t){if(Array.isArray(t)){for(var e=0,n=t.length;e<n;e++)if(wM(t[e]))return!0}else if(typeof t=="object"){for(var i=bM(t),r=i.length,a=0;a<r;a++)if(wM(t[i[a]]))return!0}}return!1}function h8(t,e){var n=[t];for(var i in e){var r=typeof e[i]=="object"?JSON.stringify(e[i],null,2):e[i];typeof r<"u"&&n.push(i+": "+r)}return n.join(`
`)}var kY=function(t){DSt(e,t);function e(n,i,r,a,o){var s=this.constructor,l=t.call(this,h8(n,{name:i,index:r,operation:a,tree:o}))||this;return l.name=i,l.index=r,l.operation=a,l.tree=o,Object.setPrototypeOf(l,s.prototype),l.message=h8(n,{name:i,index:r,operation:a,tree:o}),l}return e}(Error),_n=kY,NSt=Wr,Ld={add:function(t,e,n){return t[e]=this.value,{newDocument:n}},remove:function(t,e,n){var i=t[e];return delete t[e],{newDocument:n,removed:i}},replace:function(t,e,n){var i=t[e];return t[e]=this.value,{newDocument:n,removed:i}},move:function(t,e,n){var i=ax(n,this.path);i&&(i=Wr(i));var r=Pf(n,{op:"remove",path:this.from}).removed;return Pf(n,{op:"add",path:this.path,value:r}),{newDocument:n,removed:i}},copy:function(t,e,n){var i=ax(n,this.from);return Pf(n,{op:"add",path:this.path,value:Wr(i)}),{newDocument:n}},test:function(t,e,n){return{newDocument:n,test:Z0(t[e],this.value)}},_get:function(t,e,n){return this.value=t[e],{newDocument:n}}},LSt={add:function(t,e,n){return xM(e)?t.splice(e,0,this.value):t[e]=this.value,{newDocument:n,index:e}},remove:function(t,e,n){var i=t.splice(e,1);return{newDocument:n,removed:i[0]}},replace:function(t,e,n){var i=t[e];return t[e]=this.value,{newDocument:n,removed:i}},move:Ld.move,copy:Ld.copy,test:Ld.test,_get:Ld._get};function ax(t,e){if(e=="")return t;var n={op:"_get",path:e};return Pf(t,n),n.value}function Pf(t,e,n,i,r,a){if(n===void 0&&(n=!1),i===void 0&&(i=!0),r===void 0&&(r=!0),a===void 0&&(a=0),n&&(typeof n=="function"?n(e,0,t,e.path):ox(e,0)),e.path===""){var o={newDocument:t};if(e.op==="add")return o.newDocument=e.value,o;if(e.op==="replace")return o.newDocument=e.value,o.removed=t,o;if(e.op==="move"||e.op==="copy")return o.newDocument=ax(t,e.from),e.op==="move"&&(o.removed=t),o;if(e.op==="test"){if(o.test=Z0(t,e.value),o.test===!1)throw new _n("Test operation failed","TEST_OPERATION_FAILED",a,e,t);return o.newDocument=t,o}else{if(e.op==="remove")return o.removed=t,o.newDocument=null,o;if(e.op==="_get")return e.value=t,o;if(n)throw new _n("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",a,e,t);return o}}else{i||(t=Wr(t));var s=e.path||"",l=s.split("/"),f=t,d=1,p=l.length,m=void 0,_=void 0,b=void 0;for(typeof n=="function"?b=n:b=ox;;){if(_=l[d],_&&_.indexOf("~")!=-1&&(_=MY(_)),r&&(_=="__proto__"||_=="prototype"&&d>0&&l[d-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&m===void 0&&(f[_]===void 0?m=l.slice(0,d).join("/"):d==p-1&&(m=e.path),m!==void 0&&b(e,0,t,m)),d++,Array.isArray(f)){if(_==="-")_=f.length;else{if(n&&!xM(_))throw new _n("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",a,e,t);xM(_)&&(_=~~_)}if(d>=p){if(n&&e.op==="add"&&_>f.length)throw new _n("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",a,e,t);var o=LSt[e.op].call(e,f,_,t);if(o.test===!1)throw new _n("Test operation failed","TEST_OPERATION_FAILED",a,e,t);return o}}else if(d>=p){var o=Ld[e.op].call(e,f,_,t);if(o.test===!1)throw new _n("Test operation failed","TEST_OPERATION_FAILED",a,e,t);return o}if(f=f[_],n&&d<p&&(!f||typeof f!="object"))throw new _n("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",a,e,t)}}}function dw(t,e,n,i,r){if(i===void 0&&(i=!0),r===void 0&&(r=!0),n&&!Array.isArray(e))throw new _n("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");i||(t=Wr(t));for(var a=new Array(e.length),o=0,s=e.length;o<s;o++)a[o]=Pf(t,e[o],n,!0,r,o),t=a[o].newDocument;return a.newDocument=t,a}function zSt(t,e,n){var i=Pf(t,e);if(i.test===!1)throw new _n("Test operation failed","TEST_OPERATION_FAILED",n,e,t);return i.newDocument}function ox(t,e,n,i){if(typeof t!="object"||t===null||Array.isArray(t))throw new _n("Operation is not an object","OPERATION_NOT_AN_OBJECT",e,t,n);if(Ld[t.op]){if(typeof t.path!="string")throw new _n("Operation `path` property is not a string","OPERATION_PATH_INVALID",e,t,n);if(t.path.indexOf("/")!==0&&t.path.length>0)throw new _n('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",e,t,n);if((t.op==="move"||t.op==="copy")&&typeof t.from!="string")throw new _n("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",e,t,n);if((t.op==="add"||t.op==="replace"||t.op==="test")&&t.value===void 0)throw new _n("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",e,t,n);if((t.op==="add"||t.op==="replace"||t.op==="test")&&wM(t.value))throw new _n("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",e,t,n);if(n){if(t.op=="add"){var r=t.path.split("/").length,a=i.split("/").length;if(r!==a+1&&r!==a)throw new _n("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",e,t,n)}else if(t.op==="replace"||t.op==="remove"||t.op==="_get"){if(t.path!==i)throw new _n("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",e,t,n)}else if(t.op==="move"||t.op==="copy"){var o={op:"_get",path:t.from,value:void 0},s=OY([o],n);if(s&&s.name==="OPERATION_PATH_UNRESOLVABLE")throw new _n("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",e,t,n)}}}else throw new _n("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",e,t,n)}function OY(t,e,n){try{if(!Array.isArray(t))throw new _n("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(e)dw(Wr(e),Wr(t),n||!0);else{n=n||ox;for(var i=0;i<t.length;i++)n(t[i],i,e,void 0)}}catch(r){if(r instanceof _n)return r;throw r}}function Z0(t,e){if(t===e)return!0;if(t&&e&&typeof t=="object"&&typeof e=="object"){var n=Array.isArray(t),i=Array.isArray(e),r,a,o;if(n&&i){if(a=t.length,a!=e.length)return!1;for(r=a;r--!==0;)if(!Z0(t[r],e[r]))return!1;return!0}if(n!=i)return!1;var s=Object.keys(t);if(a=s.length,a!==Object.keys(e).length)return!1;for(r=a;r--!==0;)if(!e.hasOwnProperty(s[r]))return!1;for(r=a;r--!==0;)if(o=s[r],!Z0(t[o],e[o]))return!1;return!0}return t!==t&&e!==e}var FSt=Object.freeze({__proto__:null,JsonPatchError:_n,_areEquals:Z0,applyOperation:Pf,applyPatch:dw,applyReducer:zSt,deepClone:NSt,getValueByPointer:ax,validate:OY,validator:ox});/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2021 Joachim Wester
 * MIT license
 */var qD=new WeakMap,PSt=function(){function t(e){this.observers=new Map,this.obj=e}return t}(),BSt=function(){function t(e,n){this.callback=e,this.observer=n}return t}();function USt(t){return qD.get(t)}function ISt(t,e){return t.observers.get(e)}function qSt(t,e){t.observers.delete(e.callback)}function jSt(t,e){e.unobserve()}function HSt(t,e){var n=[],i,r=USt(t);if(!r)r=new PSt(t),qD.set(t,r);else{var a=ISt(r,e);i=a&&a.observer}if(i)return i;if(i={},r.value=Wr(t),e){i.callback=e,i.next=null;var o=function(){EM(i)},s=function(){clearTimeout(i.next),i.next=setTimeout(o)};typeof window<"u"&&(window.addEventListener("mouseup",s),window.addEventListener("keyup",s),window.addEventListener("mousedown",s),window.addEventListener("keydown",s),window.addEventListener("change",s))}return i.patches=n,i.object=t,i.unobserve=function(){EM(i),clearTimeout(i.next),qSt(r,i),typeof window<"u"&&(window.removeEventListener("mouseup",s),window.removeEventListener("keyup",s),window.removeEventListener("mousedown",s),window.removeEventListener("keydown",s),window.removeEventListener("change",s))},r.observers.set(e,new BSt(e,i)),i}function EM(t,e){e===void 0&&(e=!1);var n=qD.get(t.object);jD(n.value,t.object,t.patches,"",e),t.patches.length&&dw(n.value,t.patches);var i=t.patches;return i.length>0&&(t.patches=[],t.callback&&t.callback(i)),i}function jD(t,e,n,i,r){if(e!==t){typeof e.toJSON=="function"&&(e=e.toJSON());for(var a=bM(e),o=bM(t),s=!1,l=o.length-1;l>=0;l--){var f=o[l],d=t[f];if(_M(e,f)&&!(e[f]===void 0&&d!==void 0&&Array.isArray(e)===!1)){var p=e[f];typeof d=="object"&&d!=null&&typeof p=="object"&&p!=null&&Array.isArray(d)===Array.isArray(p)?jD(d,p,n,i+"/"+_f(f),r):d!==p&&(r&&n.push({op:"test",path:i+"/"+_f(f),value:Wr(d)}),n.push({op:"replace",path:i+"/"+_f(f),value:Wr(p)}))}else Array.isArray(t)===Array.isArray(e)?(r&&n.push({op:"test",path:i+"/"+_f(f),value:Wr(d)}),n.push({op:"remove",path:i+"/"+_f(f)}),s=!0):(r&&n.push({op:"test",path:i,value:t}),n.push({op:"replace",path:i,value:e}))}if(!(!s&&a.length==o.length))for(var l=0;l<a.length;l++){var f=a[l];!_M(t,f)&&e[f]!==void 0&&n.push({op:"add",path:i+"/"+_f(f),value:Wr(e[f])})}}}function GSt(t,e,n){n===void 0&&(n=!1);var i=[];return jD(t,e,i,"",n),i}var ZSt=Object.freeze({__proto__:null,compare:GSt,generate:EM,observe:HSt,unobserve:jSt});Object.assign({},FSt,ZSt,{JsonPatchError:kY,deepClone:Wr,escapePathComponent:_f,unescapePathComponent:MY});function YSt(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var HA,d8;function XSt(){if(d8)return HA;d8=1;class t{constructor(){this.max=1e3,this.map=new Map}get(n){const i=this.map.get(n);if(i!==void 0)return this.map.delete(n),this.map.set(n,i),i}delete(n){return this.map.delete(n)}set(n,i){if(!this.delete(n)&&i!==void 0){if(this.map.size>=this.max){const a=this.map.keys().next().value;this.delete(a)}this.map.set(n,i)}return this}}return HA=t,HA}var GA,p8;function HD(){if(p8)return GA;p8=1;const t=Object.freeze({loose:!0}),e=Object.freeze({});return GA=i=>i?typeof i!="object"?t:i:e,GA}var e_={exports:{}},ZA,g8;function GD(){if(g8)return ZA;g8=1;const t="2.0.0",e=256,n=Number.MAX_SAFE_INTEGER||9007199254740991,i=16,r=e-6;return ZA={MAX_LENGTH:e,MAX_SAFE_COMPONENT_LENGTH:i,MAX_SAFE_BUILD_LENGTH:r,MAX_SAFE_INTEGER:n,RELEASE_TYPES:["major","premajor","minor","preminor","patch","prepatch","prerelease"],SEMVER_SPEC_VERSION:t,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2},ZA}var YA,m8;function pw(){return m8||(m8=1,YA=typeof process=="object"&&jA&&jA.NODE_DEBUG&&/\bsemver\b/i.test(jA.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{}),YA}var y8;function ZD(){return y8||(y8=1,function(t,e){const{MAX_SAFE_COMPONENT_LENGTH:n,MAX_SAFE_BUILD_LENGTH:i,MAX_LENGTH:r}=GD(),a=pw();e=t.exports={};const o=e.re=[],s=e.safeRe=[],l=e.src=[],f=e.safeSrc=[],d=e.t={};let p=0;const m="[a-zA-Z0-9-]",_=[["\\s",1],["\\d",r],[m,i]],b=S=>{for(const[T,M]of _)S=S.split(`${T}*`).join(`${T}{0,${M}}`).split(`${T}+`).join(`${T}{1,${M}}`);return S},x=(S,T,M)=>{const k=b(T),$=p++;a(S,$,T),d[S]=$,l[$]=T,f[$]=k,o[$]=new RegExp(T,M?"g":void 0),s[$]=new RegExp(k,M?"g":void 0)};x("NUMERICIDENTIFIER","0|[1-9]\\d*"),x("NUMERICIDENTIFIERLOOSE","\\d+"),x("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${m}*`),x("MAINVERSION",`(${l[d.NUMERICIDENTIFIER]})\\.(${l[d.NUMERICIDENTIFIER]})\\.(${l[d.NUMERICIDENTIFIER]})`),x("MAINVERSIONLOOSE",`(${l[d.NUMERICIDENTIFIERLOOSE]})\\.(${l[d.NUMERICIDENTIFIERLOOSE]})\\.(${l[d.NUMERICIDENTIFIERLOOSE]})`),x("PRERELEASEIDENTIFIER",`(?:${l[d.NUMERICIDENTIFIER]}|${l[d.NONNUMERICIDENTIFIER]})`),x("PRERELEASEIDENTIFIERLOOSE",`(?:${l[d.NUMERICIDENTIFIERLOOSE]}|${l[d.NONNUMERICIDENTIFIER]})`),x("PRERELEASE",`(?:-(${l[d.PRERELEASEIDENTIFIER]}(?:\\.${l[d.PRERELEASEIDENTIFIER]})*))`),x("PRERELEASELOOSE",`(?:-?(${l[d.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${l[d.PRERELEASEIDENTIFIERLOOSE]})*))`),x("BUILDIDENTIFIER",`${m}+`),x("BUILD",`(?:\\+(${l[d.BUILDIDENTIFIER]}(?:\\.${l[d.BUILDIDENTIFIER]})*))`),x("FULLPLAIN",`v?${l[d.MAINVERSION]}${l[d.PRERELEASE]}?${l[d.BUILD]}?`),x("FULL",`^${l[d.FULLPLAIN]}$`),x("LOOSEPLAIN",`[v=\\s]*${l[d.MAINVERSIONLOOSE]}${l[d.PRERELEASELOOSE]}?${l[d.BUILD]}?`),x("LOOSE",`^${l[d.LOOSEPLAIN]}$`),x("GTLT","((?:<|>)?=?)"),x("XRANGEIDENTIFIERLOOSE",`${l[d.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),x("XRANGEIDENTIFIER",`${l[d.NUMERICIDENTIFIER]}|x|X|\\*`),x("XRANGEPLAIN",`[v=\\s]*(${l[d.XRANGEIDENTIFIER]})(?:\\.(${l[d.XRANGEIDENTIFIER]})(?:\\.(${l[d.XRANGEIDENTIFIER]})(?:${l[d.PRERELEASE]})?${l[d.BUILD]}?)?)?`),x("XRANGEPLAINLOOSE",`[v=\\s]*(${l[d.XRANGEIDENTIFIERLOOSE]})(?:\\.(${l[d.XRANGEIDENTIFIERLOOSE]})(?:\\.(${l[d.XRANGEIDENTIFIERLOOSE]})(?:${l[d.PRERELEASELOOSE]})?${l[d.BUILD]}?)?)?`),x("XRANGE",`^${l[d.GTLT]}\\s*${l[d.XRANGEPLAIN]}$`),x("XRANGELOOSE",`^${l[d.GTLT]}\\s*${l[d.XRANGEPLAINLOOSE]}$`),x("COERCEPLAIN",`(^|[^\\d])(\\d{1,${n}})(?:\\.(\\d{1,${n}}))?(?:\\.(\\d{1,${n}}))?`),x("COERCE",`${l[d.COERCEPLAIN]}(?:$|[^\\d])`),x("COERCEFULL",l[d.COERCEPLAIN]+`(?:${l[d.PRERELEASE]})?(?:${l[d.BUILD]})?(?:$|[^\\d])`),x("COERCERTL",l[d.COERCE],!0),x("COERCERTLFULL",l[d.COERCEFULL],!0),x("LONETILDE","(?:~>?)"),x("TILDETRIM",`(\\s*)${l[d.LONETILDE]}\\s+`,!0),e.tildeTrimReplace="$1~",x("TILDE",`^${l[d.LONETILDE]}${l[d.XRANGEPLAIN]}$`),x("TILDELOOSE",`^${l[d.LONETILDE]}${l[d.XRANGEPLAINLOOSE]}$`),x("LONECARET","(?:\\^)"),x("CARETTRIM",`(\\s*)${l[d.LONECARET]}\\s+`,!0),e.caretTrimReplace="$1^",x("CARET",`^${l[d.LONECARET]}${l[d.XRANGEPLAIN]}$`),x("CARETLOOSE",`^${l[d.LONECARET]}${l[d.XRANGEPLAINLOOSE]}$`),x("COMPARATORLOOSE",`^${l[d.GTLT]}\\s*(${l[d.LOOSEPLAIN]})$|^$`),x("COMPARATOR",`^${l[d.GTLT]}\\s*(${l[d.FULLPLAIN]})$|^$`),x("COMPARATORTRIM",`(\\s*)${l[d.GTLT]}\\s*(${l[d.LOOSEPLAIN]}|${l[d.XRANGEPLAIN]})`,!0),e.comparatorTrimReplace="$1$2$3",x("HYPHENRANGE",`^\\s*(${l[d.XRANGEPLAIN]})\\s+-\\s+(${l[d.XRANGEPLAIN]})\\s*$`),x("HYPHENRANGELOOSE",`^\\s*(${l[d.XRANGEPLAINLOOSE]})\\s+-\\s+(${l[d.XRANGEPLAINLOOSE]})\\s*$`),x("STAR","(<|>)?=?\\s*\\*"),x("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),x("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")}(e_,e_.exports)),e_.exports}var XA,v8;function WSt(){if(v8)return XA;v8=1;const t=/^[0-9]+$/,e=(i,r)=>{const a=t.test(i),o=t.test(r);return a&&o&&(i=+i,r=+r),i===r?0:a&&!o?-1:o&&!a?1:i<r?-1:1};return XA={compareIdentifiers:e,rcompareIdentifiers:(i,r)=>e(r,i)},XA}var WA,_8;function YD(){if(_8)return WA;_8=1;const t=pw(),{MAX_LENGTH:e,MAX_SAFE_INTEGER:n}=GD(),{safeRe:i,safeSrc:r,t:a}=ZD(),o=HD(),{compareIdentifiers:s}=WSt();class l{constructor(d,p){if(p=o(p),d instanceof l){if(d.loose===!!p.loose&&d.includePrerelease===!!p.includePrerelease)return d;d=d.version}else if(typeof d!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof d}".`);if(d.length>e)throw new TypeError(`version is longer than ${e} characters`);t("SemVer",d,p),this.options=p,this.loose=!!p.loose,this.includePrerelease=!!p.includePrerelease;const m=d.trim().match(p.loose?i[a.LOOSE]:i[a.FULL]);if(!m)throw new TypeError(`Invalid Version: ${d}`);if(this.raw=d,this.major=+m[1],this.minor=+m[2],this.patch=+m[3],this.major>n||this.major<0)throw new TypeError("Invalid major version");if(this.minor>n||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>n||this.patch<0)throw new TypeError("Invalid patch version");m[4]?this.prerelease=m[4].split(".").map(_=>{if(/^[0-9]+$/.test(_)){const b=+_;if(b>=0&&b<n)return b}return _}):this.prerelease=[],this.build=m[5]?m[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(d){if(t("SemVer.compare",this.version,this.options,d),!(d instanceof l)){if(typeof d=="string"&&d===this.version)return 0;d=new l(d,this.options)}return d.version===this.version?0:this.compareMain(d)||this.comparePre(d)}compareMain(d){return d instanceof l||(d=new l(d,this.options)),s(this.major,d.major)||s(this.minor,d.minor)||s(this.patch,d.patch)}comparePre(d){if(d instanceof l||(d=new l(d,this.options)),this.prerelease.length&&!d.prerelease.length)return-1;if(!this.prerelease.length&&d.prerelease.length)return 1;if(!this.prerelease.length&&!d.prerelease.length)return 0;let p=0;do{const m=this.prerelease[p],_=d.prerelease[p];if(t("prerelease compare",p,m,_),m===void 0&&_===void 0)return 0;if(_===void 0)return 1;if(m===void 0)return-1;if(m===_)continue;return s(m,_)}while(++p)}compareBuild(d){d instanceof l||(d=new l(d,this.options));let p=0;do{const m=this.build[p],_=d.build[p];if(t("build compare",p,m,_),m===void 0&&_===void 0)return 0;if(_===void 0)return 1;if(m===void 0)return-1;if(m===_)continue;return s(m,_)}while(++p)}inc(d,p,m){if(d.startsWith("pre")){if(!p&&m===!1)throw new Error("invalid increment argument: identifier is empty");if(p){const _=new RegExp(`^${this.options.loose?r[a.PRERELEASELOOSE]:r[a.PRERELEASE]}$`),b=`-${p}`.match(_);if(!b||b[1]!==p)throw new Error(`invalid identifier: ${p}`)}}switch(d){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",p,m);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",p,m);break;case"prepatch":this.prerelease.length=0,this.inc("patch",p,m),this.inc("pre",p,m);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",p,m),this.inc("pre",p,m);break;case"release":if(this.prerelease.length===0)throw new Error(`version ${this.raw} is not a prerelease`);this.prerelease.length=0;break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const _=Number(m)?1:0;if(this.prerelease.length===0)this.prerelease=[_];else{let b=this.prerelease.length;for(;--b>=0;)typeof this.prerelease[b]=="number"&&(this.prerelease[b]++,b=-2);if(b===-1){if(p===this.prerelease.join(".")&&m===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(_)}}if(p){let b=[p,_];m===!1&&(b=[p]),s(this.prerelease[0],p)===0?isNaN(this.prerelease[1])&&(this.prerelease=b):this.prerelease=b}break}default:throw new Error(`invalid increment argument: ${d}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}}return WA=l,WA}var VA,b8;function tg(){if(b8)return VA;b8=1;const t=YD();return VA=(n,i,r)=>new t(n,r).compare(new t(i,r)),VA}var QA,x8;function VSt(){if(x8)return QA;x8=1;const t=tg();return QA=(n,i,r)=>t(n,i,r)===0,QA}var KA,w8;function QSt(){if(w8)return KA;w8=1;const t=tg();return KA=(n,i,r)=>t(n,i,r)!==0,KA}var JA,E8;function KSt(){if(E8)return JA;E8=1;const t=tg();return JA=(n,i,r)=>t(n,i,r)>0,JA}var tT,S8;function JSt(){if(S8)return tT;S8=1;const t=tg();return tT=(n,i,r)=>t(n,i,r)>=0,tT}var eT,A8;function tAt(){if(A8)return eT;A8=1;const t=tg();return eT=(n,i,r)=>t(n,i,r)<0,eT}var nT,T8;function eAt(){if(T8)return nT;T8=1;const t=tg();return nT=(n,i,r)=>t(n,i,r)<=0,nT}var iT,C8;function nAt(){if(C8)return iT;C8=1;const t=VSt(),e=QSt(),n=KSt(),i=JSt(),r=tAt(),a=eAt();return iT=(s,l,f,d)=>{switch(l){case"===":return typeof s=="object"&&(s=s.version),typeof f=="object"&&(f=f.version),s===f;case"!==":return typeof s=="object"&&(s=s.version),typeof f=="object"&&(f=f.version),s!==f;case"":case"=":case"==":return t(s,f,d);case"!=":return e(s,f,d);case">":return n(s,f,d);case">=":return i(s,f,d);case"<":return r(s,f,d);case"<=":return a(s,f,d);default:throw new TypeError(`Invalid operator: ${l}`)}},iT}var rT,M8;function iAt(){if(M8)return rT;M8=1;const t=Symbol("SemVer ANY");class e{static get ANY(){return t}constructor(d,p){if(p=n(p),d instanceof e){if(d.loose===!!p.loose)return d;d=d.value}d=d.trim().split(/\s+/).join(" "),o("comparator",d,p),this.options=p,this.loose=!!p.loose,this.parse(d),this.semver===t?this.value="":this.value=this.operator+this.semver.version,o("comp",this)}parse(d){const p=this.options.loose?i[r.COMPARATORLOOSE]:i[r.COMPARATOR],m=d.match(p);if(!m)throw new TypeError(`Invalid comparator: ${d}`);this.operator=m[1]!==void 0?m[1]:"",this.operator==="="&&(this.operator=""),m[2]?this.semver=new s(m[2],this.options.loose):this.semver=t}toString(){return this.value}test(d){if(o("Comparator.test",d,this.options.loose),this.semver===t||d===t)return!0;if(typeof d=="string")try{d=new s(d,this.options)}catch{return!1}return a(d,this.operator,this.semver,this.options)}intersects(d,p){if(!(d instanceof e))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new l(d.value,p).test(this.value):d.operator===""?d.value===""?!0:new l(this.value,p).test(d.semver):(p=n(p),p.includePrerelease&&(this.value==="<0.0.0-0"||d.value==="<0.0.0-0")||!p.includePrerelease&&(this.value.startsWith("<0.0.0")||d.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&d.operator.startsWith(">")||this.operator.startsWith("<")&&d.operator.startsWith("<")||this.semver.version===d.semver.version&&this.operator.includes("=")&&d.operator.includes("=")||a(this.semver,"<",d.semver,p)&&this.operator.startsWith(">")&&d.operator.startsWith("<")||a(this.semver,">",d.semver,p)&&this.operator.startsWith("<")&&d.operator.startsWith(">")))}}rT=e;const n=HD(),{safeRe:i,t:r}=ZD(),a=nAt(),o=pw(),s=YD(),l=$Y();return rT}var aT,k8;function $Y(){if(k8)return aT;k8=1;const t=/\s+/g;class e{constructor(j,U){if(U=r(U),j instanceof e)return j.loose===!!U.loose&&j.includePrerelease===!!U.includePrerelease?j:new e(j.raw,U);if(j instanceof a)return this.raw=j.value,this.set=[[j]],this.formatted=void 0,this;if(this.options=U,this.loose=!!U.loose,this.includePrerelease=!!U.includePrerelease,this.raw=j.trim().replace(t," "),this.set=this.raw.split("||").map(X=>this.parseRange(X.trim())).filter(X=>X.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const X=this.set[0];if(this.set=this.set.filter(V=>!x(V[0])),this.set.length===0)this.set=[X];else if(this.set.length>1){for(const V of this.set)if(V.length===1&&S(V[0])){this.set=[V];break}}}this.formatted=void 0}get range(){if(this.formatted===void 0){this.formatted="";for(let j=0;j<this.set.length;j++){j>0&&(this.formatted+="||");const U=this.set[j];for(let X=0;X<U.length;X++)X>0&&(this.formatted+=" "),this.formatted+=U[X].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(j){const X=((this.options.includePrerelease&&_)|(this.options.loose&&b))+":"+j,V=i.get(X);if(V)return V;const ot=this.options.loose,B=ot?l[f.HYPHENRANGELOOSE]:l[f.HYPHENRANGE];j=j.replace(B,et(this.options.includePrerelease)),o("hyphen replace",j),j=j.replace(l[f.COMPARATORTRIM],d),o("comparator trim",j),j=j.replace(l[f.TILDETRIM],p),o("tilde trim",j),j=j.replace(l[f.CARETTRIM],m),o("caret trim",j);let J=j.split(" ").map(bt=>M(bt,this.options)).join(" ").split(/\s+/).map(bt=>H(bt,this.options));ot&&(J=J.filter(bt=>(o("loose invalid filter",bt,this.options),!!bt.match(l[f.COMPARATORLOOSE])))),o("range list",J);const lt=new Map,ft=J.map(bt=>new a(bt,this.options));for(const bt of ft){if(x(bt))return[bt];lt.set(bt.value,bt)}lt.size>1&&lt.has("")&&lt.delete("");const wt=[...lt.values()];return i.set(X,wt),wt}intersects(j,U){if(!(j instanceof e))throw new TypeError("a Range is required");return this.set.some(X=>T(X,U)&&j.set.some(V=>T(V,U)&&X.every(ot=>V.every(B=>ot.intersects(B,U)))))}test(j){if(!j)return!1;if(typeof j=="string")try{j=new s(j,this.options)}catch{return!1}for(let U=0;U<this.set.length;U++)if(nt(this.set[U],j,this.options))return!0;return!1}}aT=e;const n=XSt(),i=new n,r=HD(),a=iAt(),o=pw(),s=YD(),{safeRe:l,t:f,comparatorTrimReplace:d,tildeTrimReplace:p,caretTrimReplace:m}=ZD(),{FLAG_INCLUDE_PRERELEASE:_,FLAG_LOOSE:b}=GD(),x=W=>W.value==="<0.0.0-0",S=W=>W.value==="",T=(W,j)=>{let U=!0;const X=W.slice();let V=X.pop();for(;U&&X.length;)U=X.every(ot=>V.intersects(ot,j)),V=X.pop();return U},M=(W,j)=>(o("comp",W,j),W=F(W,j),o("caret",W),W=$(W,j),o("tildes",W),W=I(W,j),o("xrange",W),W=Y(W,j),o("stars",W),W),k=W=>!W||W.toLowerCase()==="x"||W==="*",$=(W,j)=>W.trim().split(/\s+/).map(U=>D(U,j)).join(" "),D=(W,j)=>{const U=j.loose?l[f.TILDELOOSE]:l[f.TILDE];return W.replace(U,(X,V,ot,B,J)=>{o("tilde",W,X,V,ot,B,J);let lt;return k(V)?lt="":k(ot)?lt=`>=${V}.0.0 <${+V+1}.0.0-0`:k(B)?lt=`>=${V}.${ot}.0 <${V}.${+ot+1}.0-0`:J?(o("replaceTilde pr",J),lt=`>=${V}.${ot}.${B}-${J} <${V}.${+ot+1}.0-0`):lt=`>=${V}.${ot}.${B} <${V}.${+ot+1}.0-0`,o("tilde return",lt),lt})},F=(W,j)=>W.trim().split(/\s+/).map(U=>N(U,j)).join(" "),N=(W,j)=>{o("caret",W,j);const U=j.loose?l[f.CARETLOOSE]:l[f.CARET],X=j.includePrerelease?"-0":"";return W.replace(U,(V,ot,B,J,lt)=>{o("caret",W,V,ot,B,J,lt);let ft;return k(ot)?ft="":k(B)?ft=`>=${ot}.0.0${X} <${+ot+1}.0.0-0`:k(J)?ot==="0"?ft=`>=${ot}.${B}.0${X} <${ot}.${+B+1}.0-0`:ft=`>=${ot}.${B}.0${X} <${+ot+1}.0.0-0`:lt?(o("replaceCaret pr",lt),ot==="0"?B==="0"?ft=`>=${ot}.${B}.${J}-${lt} <${ot}.${B}.${+J+1}-0`:ft=`>=${ot}.${B}.${J}-${lt} <${ot}.${+B+1}.0-0`:ft=`>=${ot}.${B}.${J}-${lt} <${+ot+1}.0.0-0`):(o("no pr"),ot==="0"?B==="0"?ft=`>=${ot}.${B}.${J}${X} <${ot}.${B}.${+J+1}-0`:ft=`>=${ot}.${B}.${J}${X} <${ot}.${+B+1}.0-0`:ft=`>=${ot}.${B}.${J} <${+ot+1}.0.0-0`),o("caret return",ft),ft})},I=(W,j)=>(o("replaceXRanges",W,j),W.split(/\s+/).map(U=>q(U,j)).join(" ")),q=(W,j)=>{W=W.trim();const U=j.loose?l[f.XRANGELOOSE]:l[f.XRANGE];return W.replace(U,(X,V,ot,B,J,lt)=>{o("xRange",W,X,V,ot,B,J,lt);const ft=k(ot),wt=ft||k(B),bt=wt||k(J),At=bt;return V==="="&&At&&(V=""),lt=j.includePrerelease?"-0":"",ft?V===">"||V==="<"?X="<0.0.0-0":X="*":V&&At?(wt&&(B=0),J=0,V===">"?(V=">=",wt?(ot=+ot+1,B=0,J=0):(B=+B+1,J=0)):V==="<="&&(V="<",wt?ot=+ot+1:B=+B+1),V==="<"&&(lt="-0"),X=`${V+ot}.${B}.${J}${lt}`):wt?X=`>=${ot}.0.0${lt} <${+ot+1}.0.0-0`:bt&&(X=`>=${ot}.${B}.0${lt} <${ot}.${+B+1}.0-0`),o("xRange return",X),X})},Y=(W,j)=>(o("replaceStars",W,j),W.trim().replace(l[f.STAR],"")),H=(W,j)=>(o("replaceGTE0",W,j),W.trim().replace(l[j.includePrerelease?f.GTE0PRE:f.GTE0],"")),et=W=>(j,U,X,V,ot,B,J,lt,ft,wt,bt,At)=>(k(X)?U="":k(V)?U=`>=${X}.0.0${W?"-0":""}`:k(ot)?U=`>=${X}.${V}.0${W?"-0":""}`:B?U=`>=${U}`:U=`>=${U}${W?"-0":""}`,k(ft)?lt="":k(wt)?lt=`<${+ft+1}.0.0-0`:k(bt)?lt=`<${ft}.${+wt+1}.0-0`:At?lt=`<=${ft}.${wt}.${bt}-${At}`:W?lt=`<${ft}.${wt}.${+bt+1}-0`:lt=`<=${lt}`,`${U} ${lt}`.trim()),nt=(W,j,U)=>{for(let X=0;X<W.length;X++)if(!W[X].test(j))return!1;if(j.prerelease.length&&!U.includePrerelease){for(let X=0;X<W.length;X++)if(o(W[X].semver),W[X].semver!==a.ANY&&W[X].semver.prerelease.length>0){const V=W[X].semver;if(V.major===j.major&&V.minor===j.minor&&V.patch===j.patch)return!0}return!1}return!0};return aT}var oT,O8;function rAt(){if(O8)return oT;O8=1;const t=$Y();return oT=(n,i,r)=>{try{i=new t(i,r)}catch{return!1}return i.test(n)},oT}var aAt=rAt(),DY=YSt(aAt);function oAt(t,e,n){const i=t.open(e),r=250,{origin:a}=new URL(e);let o=40;function s(f){f.source===i&&(o=0,t.removeEventListener("message",s,!1))}t.addEventListener("message",s,!1);function l(){o<=0||(i.postMessage(n,a),setTimeout(l,r),o-=1)}setTimeout(l,r)}var sAt=`.vega-embed {
  position: relative;
  display: inline-block;
  box-sizing: border-box;
}
.vega-embed.has-actions {
  padding-right: 38px;
}
.vega-embed details:not([open]) > :not(summary) {
  display: none !important;
}
.vega-embed summary {
  list-style: none;
  position: absolute;
  top: 0;
  right: 0;
  padding: 6px;
  z-index: 1000;
  background: white;
  box-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1);
  color: #1b1e23;
  border: 1px solid #aaa;
  border-radius: 999px;
  opacity: 0.2;
  transition: opacity 0.4s ease-in;
  cursor: pointer;
  line-height: 0px;
}
.vega-embed summary::-webkit-details-marker {
  display: none;
}
.vega-embed summary:active {
  box-shadow: #aaa 0px 0px 0px 1px inset;
}
.vega-embed summary svg {
  width: 14px;
  height: 14px;
}
.vega-embed details[open] summary {
  opacity: 0.7;
}
.vega-embed:hover summary, .vega-embed:focus-within summary {
  opacity: 1 !important;
  transition: opacity 0.2s ease;
}
.vega-embed .vega-actions {
  position: absolute;
  z-index: 1001;
  top: 35px;
  right: -9px;
  display: flex;
  flex-direction: column;
  padding-bottom: 8px;
  padding-top: 8px;
  border-radius: 4px;
  box-shadow: 0 2px 8px 0 rgba(0, 0, 0, 0.2);
  border: 1px solid #d9d9d9;
  background: white;
  animation-duration: 0.15s;
  animation-name: scale-in;
  animation-timing-function: cubic-bezier(0.2, 0, 0.13, 1.5);
  text-align: left;
}
.vega-embed .vega-actions a {
  padding: 8px 16px;
  font-family: sans-serif;
  font-size: 14px;
  font-weight: 600;
  white-space: nowrap;
  color: #434a56;
  text-decoration: none;
}
.vega-embed .vega-actions a:hover, .vega-embed .vega-actions a:focus {
  background-color: #f7f7f9;
  color: black;
}
.vega-embed .vega-actions::before, .vega-embed .vega-actions::after {
  content: "";
  display: inline-block;
  position: absolute;
}
.vega-embed .vega-actions::before {
  left: auto;
  right: 14px;
  top: -16px;
  border: 8px solid rgba(0, 0, 0, 0);
  border-bottom-color: #d9d9d9;
}
.vega-embed .vega-actions::after {
  left: auto;
  right: 15px;
  top: -14px;
  border: 7px solid rgba(0, 0, 0, 0);
  border-bottom-color: #fff;
}
.vega-embed .chart-wrapper.fit-x {
  width: 100%;
}
.vega-embed .chart-wrapper.fit-y {
  height: 100%;
}

.vega-embed-wrapper {
  max-width: 100%;
  overflow: auto;
  padding-right: 14px;
}

@keyframes scale-in {
  from {
    opacity: 0;
    transform: scale(0.6);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}
`;function RY(t,...e){for(const n of e)uAt(t,n);return t}function uAt(t,e){for(const n of Object.keys(e))Op(t,n,e[n],!0)}const Bo=Y0t;let Y0=zEt;const n_=typeof window<"u"?window:void 0;var I8;Y0===void 0&&((I8=n_==null?void 0:n_.vl)!=null&&I8.compile)&&(Y0=n_.vl);const lAt={export:{svg:!0,png:!0},source:!0,compiled:!0,editor:!0},cAt={CLICK_TO_VIEW_ACTIONS:"Click to view actions",COMPILED_ACTION:"View Compiled Vega",EDITOR_ACTION:"Open in Vega Editor",PNG_ACTION:"Save as PNG",SOURCE_ACTION:"View Source",SVG_ACTION:"Save as SVG"},Jm={vega:"Vega","vega-lite":"Vega-Lite"},sx={vega:Bo.version,"vega-lite":Y0?Y0.version:"not available"},fAt={vega:t=>t,"vega-lite":(t,e)=>Y0.compile(t,{config:e}).spec},hAt=`
<svg viewBox="0 0 16 16" fill="currentColor" stroke="none" stroke-width="1" stroke-linecap="round" stroke-linejoin="round">
  <circle r="2" cy="8" cx="2"></circle>
  <circle r="2" cy="8" cx="8"></circle>
  <circle r="2" cy="8" cx="14"></circle>
</svg>`,dAt="chart-wrapper";function pAt(t){return typeof t=="function"}function $8(t,e,n,i){const r=`<html><head>${e}</head><body><pre><code class="json">`,a=`</code></pre>${n}</body></html>`,o=window.open("");o.document.write(r+t+a),o.document.title=`${Jm[i]} JSON Source`}function gAt(t,e){if(t.$schema){const n=xY(t.$schema);e&&e!==n.library&&console.warn(`The given visualization spec is written in ${Jm[n.library]}, but mode argument sets ${Jm[e]??e}.`);const i=n.library;return DY(sx[i],`^${n.version.slice(1)}`)||console.warn(`The input spec uses ${Jm[i]} ${n.version}, but the current version of ${Jm[i]} is v${sx[i]}.`),i}return"mark"in t||"encoding"in t||"layer"in t||"hconcat"in t||"vconcat"in t||"facet"in t||"repeat"in t?"vega-lite":"marks"in t||"signals"in t||"scales"in t||"axes"in t?"vega":e??"vega"}function NY(t){return!!(t&&"load"in t)}function D8(t){return NY(t)?t:Bo.loader(t)}function mAt(t){var n;const e=((n=t.usermeta)==null?void 0:n.embedOptions)??{};return Dt(e.defaultStyle)&&(e.defaultStyle=!1),e}async function yAt(t,e,n={}){let i,r;Dt(e)?(r=D8(n.loader),i=JSON.parse(await r.load(e))):i=e;const a=mAt(i),o=a.loader;(!r||o)&&(r=D8(n.loader??o));const s=await R8(a,r),l=await R8(n,r),f={...RY(l,s),config:kp(l.config??{},s.config??{})};return await _At(t,i,f,r)}async function R8(t,e){const n=Dt(t.config)?JSON.parse(await e.load(t.config)):t.config??{},i=Dt(t.patch)?JSON.parse(await e.load(t.patch)):t.patch;return{...t,...i?{patch:i}:{},...n?{config:n}:{}}}function vAt(t){const e=t.getRootNode?t.getRootNode():document;return e instanceof ShadowRoot?{root:e,rootContainer:e}:{root:document,rootContainer:document.head??document.body}}async function _At(t,e,n={},i){const r=n.theme?kp(xSt[n.theme],n.config??{}):n.config,a=gc(n.actions)?n.actions:RY({},lAt,n.actions??{}),o={...cAt,...n.i18n},s=n.renderer??"svg",l=n.logLevel??Bo.Warn,f=n.downloadFileName??"visualization",d=typeof t=="string"?document.querySelector(t):t;if(!d)throw new Error(`${t} does not exist`);if(n.defaultStyle!==!1){const D="vega-embed-style",{root:F,rootContainer:N}=vAt(d);if(!F.getElementById(D)){const I=document.createElement("style");I.id=D,I.innerHTML=n.defaultStyle===void 0||n.defaultStyle===!0?sAt.toString():n.defaultStyle,N.appendChild(I)}}const p=gAt(e,n.mode);let m=fAt[p](e,r);if(p==="vega-lite"&&m.$schema){const D=xY(m.$schema);DY(sx.vega,`^${D.version.slice(1)}`)||console.warn(`The compiled spec uses Vega ${D.version}, but current version is v${sx.vega}.`)}d.classList.add("vega-embed"),a&&d.classList.add("has-actions"),d.innerHTML="";let _=d;if(a){const D=document.createElement("div");D.classList.add(dAt),d.appendChild(D),_=D}const b=n.patch;if(b&&(m=b instanceof Function?b(m):dw(m,b,!0,!1).newDocument),n.formatLocale&&Bo.formatLocale(n.formatLocale),n.timeFormatLocale&&Bo.timeFormatLocale(n.timeFormatLocale),n.expressionFunctions)for(const D in n.expressionFunctions){const F=n.expressionFunctions[D];"fn"in F?Bo.expressionFunction(D,F.fn,F.visitor):F instanceof Function&&Bo.expressionFunction(D,F)}const{ast:x}=n,S=Bo.parse(m,p==="vega-lite"?{}:r,{ast:x}),T=new(n.viewClass||Bo.View)(S,{loader:i,logLevel:l,renderer:s,...x?{expr:Bo.expressionInterpreter??n.expr??iyt}:{}});if(T.addSignalListener("autosize",(D,F)=>{const{type:N}=F;N=="fit-x"?(_.classList.add("fit-x"),_.classList.remove("fit-y")):N=="fit-y"?(_.classList.remove("fit-x"),_.classList.add("fit-y")):N=="fit"?_.classList.add("fit-x","fit-y"):_.classList.remove("fit-x","fit-y")}),n.tooltip!==!1){const{loader:D,tooltip:F}=n,N=D&&!NY(D)?D==null?void 0:D.baseURL:void 0,I=pAt(F)?F:new $St({baseURL:N,...F===!0?{}:F}).call;T.tooltip(I)}let{hover:M}=n;if(M===void 0&&(M=p==="vega"),M){const{hoverSet:D,updateSet:F}=typeof M=="boolean"?{}:M;T.hover(D,F)}n&&(n.width!=null&&T.width(n.width),n.height!=null&&T.height(n.height),n.padding!=null&&T.padding(n.padding)),await T.initialize(_,n.bind).runAsync();let k;if(a!==!1){let D=d;if(n.defaultStyle!==!1||n.forceActionsMenu){const N=document.createElement("details");N.title=o.CLICK_TO_VIEW_ACTIONS,d.append(N),D=N;const I=document.createElement("summary");I.innerHTML=hAt,N.append(I),k=q=>{N.contains(q.target)||N.removeAttribute("open")},document.addEventListener("click",k)}const F=document.createElement("div");if(D.append(F),F.classList.add("vega-actions"),a===!0||a.export!==!1){for(const N of["svg","png"])if(a===!0||a.export===!0||a.export[N]){const I=o[`${N.toUpperCase()}_ACTION`],q=document.createElement("a"),Y=Rt(n.scaleFactor)?n.scaleFactor[N]:n.scaleFactor;q.text=I,q.href="#",q.target="_blank",q.download=`${f}.${N}`,q.addEventListener("mousedown",async function(H){H.preventDefault();const et=await T.toImageURL(N,Y);this.href=et}),F.append(q)}}if(a===!0||a.source!==!1){const N=document.createElement("a");N.text=o.SOURCE_ACTION,N.href="#",N.addEventListener("click",function(I){$8(yS(e),n.sourceHeader??"",n.sourceFooter??"",p),I.preventDefault()}),F.append(N)}if(p==="vega-lite"&&(a===!0||a.compiled!==!1)){const N=document.createElement("a");N.text=o.COMPILED_ACTION,N.href="#",N.addEventListener("click",function(I){$8(yS(m),n.sourceHeader??"",n.sourceFooter??"","vega"),I.preventDefault()}),F.append(N)}if(a===!0||a.editor!==!1){const N=n.editorUrl??"https://vega.github.io/editor/",I=document.createElement("a");I.text=o.EDITOR_ACTION,I.href="#",I.addEventListener("click",function(q){oAt(window,N,{config:r,mode:b?"vega":p,renderer:s,spec:yS(b?m:e)}),q.preventDefault()}),F.append(I)}}function $(){k&&document.removeEventListener("click",k),T.finalize()}return{view:T,spec:e,vgSpec:m,finalize:$,embedOptions:n}}const bAt=({spec:t})=>{const e=Te.useRef(null);return Te.useEffect(()=>{yAt(e.current,t).catch(console.error)},[t]),Dn.jsx("div",{ref:e})},N8="#0b5582",m0="#d6e5ec",xAt="#bbbbbb",L8=60*60*24*1e3,z8=155,t0=15,k_=6,$m=14,wAt=k_*2+t0*3,F8=110,EAt={description:"A line chart showing values over time.",width:600,height:300,padding:5,signals:[{name:"lookupDate",on:[{events:"pointermove",update:"invert('x', clamp(x(), 0, width))"}]}],data:[{name:"actuals",url:"data/actuals.json",format:{type:"json",parse:{date:"date:'%Y-%m-%d'"}}},{name:"anticipated",url:"data/anticipated.json",format:{type:"json",parse:{date:"date:'%Y-%m-%d'"}}},{name:"anticipated_filtered",source:"anticipated",transform:[{type:"filter",expr:`(datum.date < lookupDate) & (datum.date > lookupDate - ${L8})`},{type:"aggregate",fields:["value","value"],ops:["min","argmin"],as:["min","argmin"]}]},{name:"actuals_filtered",source:"actuals",transform:[{type:"filter",expr:`(datum.date < lookupDate) & (datum.date > lookupDate - ${L8})`},{type:"aggregate",fields:["value","value"],ops:["min","argmin"],as:["min","argmin"]}]}],scales:[{name:"x",type:"time",domain:{fields:[{data:"actuals",field:"date"},{data:"anticipated",field:"date"}]},range:"width"},{name:"y",type:"linear",domain:{data:"anticipated",field:"value"},range:"height",nice:!0,zero:!1},{name:"color",type:"ordinal",range:[N8,m0],domain:["Actual Level","Anticipated Level"]}],axes:[{orient:"bottom",scale:"x",format:"%b %Y",title:"Date",tickCount:9},{orient:"left",scale:"y",title:"Level"}],marks:[{type:"line",from:{data:"actuals"},encode:{enter:{x:{scale:"x",field:"date"},y:{scale:"y",field:"value"},stroke:{value:"steelblue"},strokeWidth:{value:2}}}},{type:"line",from:{data:"anticipated"},clip:!0,encode:{enter:{x:{scale:"x",field:"date"},y:{scale:"y",field:"value"},stroke:{value:m0},strokeWidth:{value:2}}}},{type:"symbol",from:{data:"actuals_filtered"},encode:{update:{x:{scale:"x",field:"argmin.date"},y:{scale:"y",field:"min"},stroke:{value:N8},fill:{value:"#fff"},size:{value:100},strokeWidth:{value:3},opacity:{value:1},zindex:{value:1}}}},{type:"symbol",from:{data:"anticipated_filtered"},encode:{update:{x:{scale:"x",field:"argmin.date"},y:{scale:"y",field:"min"},stroke:{value:m0},fill:{value:"#fff"},size:{value:100},strokeWidth:{value:2},opacity:{value:1},zindex:{value:1}}}},{type:"rule",encode:{update:{x:{scale:"x",signal:"lookupDate",offset:.5},y:{value:0},y2:{field:{group:"height"}},stroke:{value:xAt},strokeDash:{value:[3,3]}}}},{type:"group",from:{data:"anticipated_filtered"},encode:{update:{x:{scale:"x",signal:`min(datum.argmin.date, invert('x', clamp(x(), 0, width - ${z8})))`,offset:0},y:{scale:"y",signal:"max(datum.min, invert('y', clamp(y(), 0, height - 60)))",offset:15},width:{value:z8},height:{value:wAt},fill:{value:"#fff"},fillOpacity:{value:.85},stroke:{value:"#aaa"},strokeWidth:{value:.5}}},marks:[{type:"text",from:{data:"anticipated_filtered"},encode:{update:{x:{value:k_},y:{value:$m},text:{signal:"timeFormat(datum.argmin.date, '%b %d, %Y')"},baseline:{value:"middle"},fontWeight:{value:"bold"}}}},{type:"text",encode:{update:{x:{value:k_},y:{value:$m+t0},text:{signal:"'Anticipated Level:'"},baseline:{value:"middle"},fontWeight:{value:"bold"}}}},{type:"text",from:{data:"anticipated_filtered"},encode:{update:{x:{value:F8},y:{value:$m+t0},text:{signal:"round(datum.min * 100) / 100"},baseline:{value:"middle"}}}},{type:"text",encode:{update:{x:{value:k_},y:{value:$m+t0*2},text:{signal:"'Actual Level:'"},baseline:{value:"middle"},fontWeight:{value:"bold"}}}},{type:"text",from:{data:"actuals_filtered"},encode:{update:{x:{value:F8},y:{value:$m+t0*2},text:{signal:"round(datum.min * 100) / 100"},baseline:{value:"middle"}}}}]}],legends:[{fill:"color",title:"Levels",orient:"bottom-right",offset:8,encode:{symbols:{update:{strokeWidth:{value:0},shape:{value:"square"},opacity:{value:.3}}}}}]};function LY(t,e){const n=Te.useRef(e);Te.useEffect(function(){e!==n.current&&t.attributionControl!=null&&(n.current!=null&&t.attributionControl.removeAttribution(n.current),e!=null&&t.attributionControl.addAttribution(e)),n.current=e},[t,e])}var SAt=j8();const AAt=1;function TAt(t){return Object.freeze({__version:AAt,map:t})}function CAt(t,e){return Object.freeze({...t,...e})}const XD=Te.createContext(null);function WD(){const t=Te.use(XD);if(t==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return t}function MAt(t){function e(n,i){const{instance:r,context:a}=t(n).current;Te.useImperativeHandle(i,()=>r);const{children:o}=n;return o==null?null:sT.createElement(XD,{value:a},o)}return Te.forwardRef(e)}function kAt(t){function e(n,i){const[r,a]=Te.useState(!1),{instance:o}=t(n,a).current;Te.useImperativeHandle(i,()=>o),Te.useEffect(function(){r&&o.update()},[o,r,n.children]);const s=o._contentNode;return s?SAt.createPortal(n.children,s):null}return Te.forwardRef(e)}function OAt(t){function e(n,i){const{instance:r}=t(n).current;return Te.useImperativeHandle(i,()=>r),null}return Te.forwardRef(e)}function zY(t,e){const n=Te.useRef(void 0);Te.useEffect(function(){return e!=null&&t.instance.on(e),n.current=e,function(){n.current!=null&&t.instance.off(n.current),n.current=null}},[t,e])}function VD(t,e){const n=t.pane??e.pane;return n?{...t,pane:n}:t}function $At(t,e){return function(i,r){const a=WD(),o=t(VD(i,a),a);return LY(a.map,i.attribution),zY(o.current,i.eventHandlers),e(o.current,a,i,r),o}}var e0={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */var DAt=e0.exports,P8;function RAt(){return P8||(P8=1,function(t,e){(function(n,i){i(e)})(DAt,function(n){var i="1.9.4";function r(h){var y,w,C,O;for(w=1,C=arguments.length;w<C;w++){O=arguments[w];for(y in O)h[y]=O[y]}return h}var a=Object.create||function(){function h(){}return function(y){return h.prototype=y,new h}}();function o(h,y){var w=Array.prototype.slice;if(h.bind)return h.bind.apply(h,w.call(arguments,1));var C=w.call(arguments,2);return function(){return h.apply(y,C.length?C.concat(w.call(arguments)):arguments)}}var s=0;function l(h){return"_leaflet_id"in h||(h._leaflet_id=++s),h._leaflet_id}function f(h,y,w){var C,O,z,G;return G=function(){C=!1,O&&(z.apply(w,O),O=!1)},z=function(){C?O=arguments:(h.apply(w,arguments),setTimeout(G,y),C=!0)},z}function d(h,y,w){var C=y[1],O=y[0],z=C-O;return h===C&&w?h:((h-O)%z+z)%z+O}function p(){return!1}function m(h,y){if(y===!1)return h;var w=Math.pow(10,y===void 0?6:y);return Math.round(h*w)/w}function _(h){return h.trim?h.trim():h.replace(/^\s+|\s+$/g,"")}function b(h){return _(h).split(/\s+/)}function x(h,y){Object.prototype.hasOwnProperty.call(h,"options")||(h.options=h.options?a(h.options):{});for(var w in y)h.options[w]=y[w];return h.options}function S(h,y,w){var C=[];for(var O in h)C.push(encodeURIComponent(w?O.toUpperCase():O)+"="+encodeURIComponent(h[O]));return(!y||y.indexOf("?")===-1?"?":"&")+C.join("&")}var T=/\{ *([\w_ -]+) *\}/g;function M(h,y){return h.replace(T,function(w,C){var O=y[C];if(O===void 0)throw new Error("No value provided for variable "+w);return typeof O=="function"&&(O=O(y)),O})}var k=Array.isArray||function(h){return Object.prototype.toString.call(h)==="[object Array]"};function $(h,y){for(var w=0;w<h.length;w++)if(h[w]===y)return w;return-1}var D="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function F(h){return window["webkit"+h]||window["moz"+h]||window["ms"+h]}var N=0;function I(h){var y=+new Date,w=Math.max(0,16-(y-N));return N=y+w,window.setTimeout(h,w)}var q=window.requestAnimationFrame||F("RequestAnimationFrame")||I,Y=window.cancelAnimationFrame||F("CancelAnimationFrame")||F("CancelRequestAnimationFrame")||function(h){window.clearTimeout(h)};function H(h,y,w){if(w&&q===I)h.call(y);else return q.call(window,o(h,y))}function et(h){h&&Y.call(window,h)}var nt={__proto__:null,extend:r,create:a,bind:o,get lastId(){return s},stamp:l,throttle:f,wrapNum:d,falseFn:p,formatNum:m,trim:_,splitWords:b,setOptions:x,getParamString:S,template:M,isArray:k,indexOf:$,emptyImageUrl:D,requestFn:q,cancelFn:Y,requestAnimFrame:H,cancelAnimFrame:et};function W(){}W.extend=function(h){var y=function(){x(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},w=y.__super__=this.prototype,C=a(w);C.constructor=y,y.prototype=C;for(var O in this)Object.prototype.hasOwnProperty.call(this,O)&&O!=="prototype"&&O!=="__super__"&&(y[O]=this[O]);return h.statics&&r(y,h.statics),h.includes&&(j(h.includes),r.apply(null,[C].concat(h.includes))),r(C,h),delete C.statics,delete C.includes,C.options&&(C.options=w.options?a(w.options):{},r(C.options,h.options)),C._initHooks=[],C.callInitHooks=function(){if(!this._initHooksCalled){w.callInitHooks&&w.callInitHooks.call(this),this._initHooksCalled=!0;for(var z=0,G=C._initHooks.length;z<G;z++)C._initHooks[z].call(this)}},y},W.include=function(h){var y=this.prototype.options;return r(this.prototype,h),h.options&&(this.prototype.options=y,this.mergeOptions(h.options)),this},W.mergeOptions=function(h){return r(this.prototype.options,h),this},W.addInitHook=function(h){var y=Array.prototype.slice.call(arguments,1),w=typeof h=="function"?h:function(){this[h].apply(this,y)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(w),this};function j(h){if(!(typeof L>"u"||!L||!L.Mixin)){h=k(h)?h:[h];for(var y=0;y<h.length;y++)h[y]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var U={on:function(h,y,w){if(typeof h=="object")for(var C in h)this._on(C,h[C],y);else{h=b(h);for(var O=0,z=h.length;O<z;O++)this._on(h[O],y,w)}return this},off:function(h,y,w){if(!arguments.length)delete this._events;else if(typeof h=="object")for(var C in h)this._off(C,h[C],y);else{h=b(h);for(var O=arguments.length===1,z=0,G=h.length;z<G;z++)O?this._off(h[z]):this._off(h[z],y,w)}return this},_on:function(h,y,w,C){if(typeof y!="function"){console.warn("wrong listener type: "+typeof y);return}if(this._listens(h,y,w)===!1){w===this&&(w=void 0);var O={fn:y,ctx:w};C&&(O.once=!0),this._events=this._events||{},this._events[h]=this._events[h]||[],this._events[h].push(O)}},_off:function(h,y,w){var C,O,z;if(this._events&&(C=this._events[h],!!C)){if(arguments.length===1){if(this._firingCount)for(O=0,z=C.length;O<z;O++)C[O].fn=p;delete this._events[h];return}if(typeof y!="function"){console.warn("wrong listener type: "+typeof y);return}var G=this._listens(h,y,w);if(G!==!1){var tt=C[G];this._firingCount&&(tt.fn=p,this._events[h]=C=C.slice()),C.splice(G,1)}}},fire:function(h,y,w){if(!this.listens(h,w))return this;var C=r({},y,{type:h,target:this,sourceTarget:y&&y.sourceTarget||this});if(this._events){var O=this._events[h];if(O){this._firingCount=this._firingCount+1||1;for(var z=0,G=O.length;z<G;z++){var tt=O[z],ut=tt.fn;tt.once&&this.off(h,ut,tt.ctx),ut.call(tt.ctx||this,C)}this._firingCount--}}return w&&this._propagateEvent(C),this},listens:function(h,y,w,C){typeof h!="string"&&console.warn('"string" type argument expected');var O=y;typeof y!="function"&&(C=!!y,O=void 0,w=void 0);var z=this._events&&this._events[h];if(z&&z.length&&this._listens(h,O,w)!==!1)return!0;if(C){for(var G in this._eventParents)if(this._eventParents[G].listens(h,y,w,C))return!0}return!1},_listens:function(h,y,w){if(!this._events)return!1;var C=this._events[h]||[];if(!y)return!!C.length;w===this&&(w=void 0);for(var O=0,z=C.length;O<z;O++)if(C[O].fn===y&&C[O].ctx===w)return O;return!1},once:function(h,y,w){if(typeof h=="object")for(var C in h)this._on(C,h[C],y,!0);else{h=b(h);for(var O=0,z=h.length;O<z;O++)this._on(h[O],y,w,!0)}return this},addEventParent:function(h){return this._eventParents=this._eventParents||{},this._eventParents[l(h)]=h,this},removeEventParent:function(h){return this._eventParents&&delete this._eventParents[l(h)],this},_propagateEvent:function(h){for(var y in this._eventParents)this._eventParents[y].fire(h.type,r({layer:h.target,propagatedFrom:h.target},h),!0)}};U.addEventListener=U.on,U.removeEventListener=U.clearAllEventListeners=U.off,U.addOneTimeEventListener=U.once,U.fireEvent=U.fire,U.hasEventListeners=U.listens;var X=W.extend(U);function V(h,y,w){this.x=w?Math.round(h):h,this.y=w?Math.round(y):y}var ot=Math.trunc||function(h){return h>0?Math.floor(h):Math.ceil(h)};V.prototype={clone:function(){return new V(this.x,this.y)},add:function(h){return this.clone()._add(B(h))},_add:function(h){return this.x+=h.x,this.y+=h.y,this},subtract:function(h){return this.clone()._subtract(B(h))},_subtract:function(h){return this.x-=h.x,this.y-=h.y,this},divideBy:function(h){return this.clone()._divideBy(h)},_divideBy:function(h){return this.x/=h,this.y/=h,this},multiplyBy:function(h){return this.clone()._multiplyBy(h)},_multiplyBy:function(h){return this.x*=h,this.y*=h,this},scaleBy:function(h){return new V(this.x*h.x,this.y*h.y)},unscaleBy:function(h){return new V(this.x/h.x,this.y/h.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=ot(this.x),this.y=ot(this.y),this},distanceTo:function(h){h=B(h);var y=h.x-this.x,w=h.y-this.y;return Math.sqrt(y*y+w*w)},equals:function(h){return h=B(h),h.x===this.x&&h.y===this.y},contains:function(h){return h=B(h),Math.abs(h.x)<=Math.abs(this.x)&&Math.abs(h.y)<=Math.abs(this.y)},toString:function(){return"Point("+m(this.x)+", "+m(this.y)+")"}};function B(h,y,w){return h instanceof V?h:k(h)?new V(h[0],h[1]):h==null?h:typeof h=="object"&&"x"in h&&"y"in h?new V(h.x,h.y):new V(h,y,w)}function J(h,y){if(h)for(var w=y?[h,y]:h,C=0,O=w.length;C<O;C++)this.extend(w[C])}J.prototype={extend:function(h){var y,w;if(!h)return this;if(h instanceof V||typeof h[0]=="number"||"x"in h)y=w=B(h);else if(h=lt(h),y=h.min,w=h.max,!y||!w)return this;return!this.min&&!this.max?(this.min=y.clone(),this.max=w.clone()):(this.min.x=Math.min(y.x,this.min.x),this.max.x=Math.max(w.x,this.max.x),this.min.y=Math.min(y.y,this.min.y),this.max.y=Math.max(w.y,this.max.y)),this},getCenter:function(h){return B((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,h)},getBottomLeft:function(){return B(this.min.x,this.max.y)},getTopRight:function(){return B(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(h){var y,w;return typeof h[0]=="number"||h instanceof V?h=B(h):h=lt(h),h instanceof J?(y=h.min,w=h.max):y=w=h,y.x>=this.min.x&&w.x<=this.max.x&&y.y>=this.min.y&&w.y<=this.max.y},intersects:function(h){h=lt(h);var y=this.min,w=this.max,C=h.min,O=h.max,z=O.x>=y.x&&C.x<=w.x,G=O.y>=y.y&&C.y<=w.y;return z&&G},overlaps:function(h){h=lt(h);var y=this.min,w=this.max,C=h.min,O=h.max,z=O.x>y.x&&C.x<w.x,G=O.y>y.y&&C.y<w.y;return z&&G},isValid:function(){return!!(this.min&&this.max)},pad:function(h){var y=this.min,w=this.max,C=Math.abs(y.x-w.x)*h,O=Math.abs(y.y-w.y)*h;return lt(B(y.x-C,y.y-O),B(w.x+C,w.y+O))},equals:function(h){return h?(h=lt(h),this.min.equals(h.getTopLeft())&&this.max.equals(h.getBottomRight())):!1}};function lt(h,y){return!h||h instanceof J?h:new J(h,y)}function ft(h,y){if(h)for(var w=y?[h,y]:h,C=0,O=w.length;C<O;C++)this.extend(w[C])}ft.prototype={extend:function(h){var y=this._southWest,w=this._northEast,C,O;if(h instanceof bt)C=h,O=h;else if(h instanceof ft){if(C=h._southWest,O=h._northEast,!C||!O)return this}else return h?this.extend(At(h)||wt(h)):this;return!y&&!w?(this._southWest=new bt(C.lat,C.lng),this._northEast=new bt(O.lat,O.lng)):(y.lat=Math.min(C.lat,y.lat),y.lng=Math.min(C.lng,y.lng),w.lat=Math.max(O.lat,w.lat),w.lng=Math.max(O.lng,w.lng)),this},pad:function(h){var y=this._southWest,w=this._northEast,C=Math.abs(y.lat-w.lat)*h,O=Math.abs(y.lng-w.lng)*h;return new ft(new bt(y.lat-C,y.lng-O),new bt(w.lat+C,w.lng+O))},getCenter:function(){return new bt((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new bt(this.getNorth(),this.getWest())},getSouthEast:function(){return new bt(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(h){typeof h[0]=="number"||h instanceof bt||"lat"in h?h=At(h):h=wt(h);var y=this._southWest,w=this._northEast,C,O;return h instanceof ft?(C=h.getSouthWest(),O=h.getNorthEast()):C=O=h,C.lat>=y.lat&&O.lat<=w.lat&&C.lng>=y.lng&&O.lng<=w.lng},intersects:function(h){h=wt(h);var y=this._southWest,w=this._northEast,C=h.getSouthWest(),O=h.getNorthEast(),z=O.lat>=y.lat&&C.lat<=w.lat,G=O.lng>=y.lng&&C.lng<=w.lng;return z&&G},overlaps:function(h){h=wt(h);var y=this._southWest,w=this._northEast,C=h.getSouthWest(),O=h.getNorthEast(),z=O.lat>y.lat&&C.lat<w.lat,G=O.lng>y.lng&&C.lng<w.lng;return z&&G},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(h,y){return h?(h=wt(h),this._southWest.equals(h.getSouthWest(),y)&&this._northEast.equals(h.getNorthEast(),y)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function wt(h,y){return h instanceof ft?h:new ft(h,y)}function bt(h,y,w){if(isNaN(h)||isNaN(y))throw new Error("Invalid LatLng object: ("+h+", "+y+")");this.lat=+h,this.lng=+y,w!==void 0&&(this.alt=+w)}bt.prototype={equals:function(h,y){if(!h)return!1;h=At(h);var w=Math.max(Math.abs(this.lat-h.lat),Math.abs(this.lng-h.lng));return w<=(y===void 0?1e-9:y)},toString:function(h){return"LatLng("+m(this.lat,h)+", "+m(this.lng,h)+")"},distanceTo:function(h){return ae.distance(this,At(h))},wrap:function(){return ae.wrapLatLng(this)},toBounds:function(h){var y=180*h/40075017,w=y/Math.cos(Math.PI/180*this.lat);return wt([this.lat-y,this.lng-w],[this.lat+y,this.lng+w])},clone:function(){return new bt(this.lat,this.lng,this.alt)}};function At(h,y,w){return h instanceof bt?h:k(h)&&typeof h[0]!="object"?h.length===3?new bt(h[0],h[1],h[2]):h.length===2?new bt(h[0],h[1]):null:h==null?h:typeof h=="object"&&"lat"in h?new bt(h.lat,"lng"in h?h.lng:h.lon,h.alt):y===void 0?null:new bt(h,y,w)}var $e={latLngToPoint:function(h,y){var w=this.projection.project(h),C=this.scale(y);return this.transformation._transform(w,C)},pointToLatLng:function(h,y){var w=this.scale(y),C=this.transformation.untransform(h,w);return this.projection.unproject(C)},project:function(h){return this.projection.project(h)},unproject:function(h){return this.projection.unproject(h)},scale:function(h){return 256*Math.pow(2,h)},zoom:function(h){return Math.log(h/256)/Math.LN2},getProjectedBounds:function(h){if(this.infinite)return null;var y=this.projection.bounds,w=this.scale(h),C=this.transformation.transform(y.min,w),O=this.transformation.transform(y.max,w);return new J(C,O)},infinite:!1,wrapLatLng:function(h){var y=this.wrapLng?d(h.lng,this.wrapLng,!0):h.lng,w=this.wrapLat?d(h.lat,this.wrapLat,!0):h.lat,C=h.alt;return new bt(w,y,C)},wrapLatLngBounds:function(h){var y=h.getCenter(),w=this.wrapLatLng(y),C=y.lat-w.lat,O=y.lng-w.lng;if(C===0&&O===0)return h;var z=h.getSouthWest(),G=h.getNorthEast(),tt=new bt(z.lat-C,z.lng-O),ut=new bt(G.lat-C,G.lng-O);return new ft(tt,ut)}},ae=r({},$e,{wrapLng:[-180,180],R:6371e3,distance:function(h,y){var w=Math.PI/180,C=h.lat*w,O=y.lat*w,z=Math.sin((y.lat-h.lat)*w/2),G=Math.sin((y.lng-h.lng)*w/2),tt=z*z+Math.cos(C)*Math.cos(O)*G*G,ut=2*Math.atan2(Math.sqrt(tt),Math.sqrt(1-tt));return this.R*ut}}),$t=6378137,Qt={R:$t,MAX_LATITUDE:85.0511287798,project:function(h){var y=Math.PI/180,w=this.MAX_LATITUDE,C=Math.max(Math.min(w,h.lat),-w),O=Math.sin(C*y);return new V(this.R*h.lng*y,this.R*Math.log((1+O)/(1-O))/2)},unproject:function(h){var y=180/Math.PI;return new bt((2*Math.atan(Math.exp(h.y/this.R))-Math.PI/2)*y,h.x*y/this.R)},bounds:function(){var h=$t*Math.PI;return new J([-h,-h],[h,h])}()};function Jt(h,y,w,C){if(k(h)){this._a=h[0],this._b=h[1],this._c=h[2],this._d=h[3];return}this._a=h,this._b=y,this._c=w,this._d=C}Jt.prototype={transform:function(h,y){return this._transform(h.clone(),y)},_transform:function(h,y){return y=y||1,h.x=y*(this._a*h.x+this._b),h.y=y*(this._c*h.y+this._d),h},untransform:function(h,y){return y=y||1,new V((h.x/y-this._b)/this._a,(h.y/y-this._d)/this._c)}};function xt(h,y,w,C){return new Jt(h,y,w,C)}var Je=r({},ae,{code:"EPSG:3857",projection:Qt,transformation:function(){var h=.5/(Math.PI*Qt.R);return xt(h,.5,-h,.5)}()}),ve=r({},Je,{code:"EPSG:900913"});function ln(h){return document.createElementNS("http://www.w3.org/2000/svg",h)}function wn(h,y){var w="",C,O,z,G,tt,ut;for(C=0,z=h.length;C<z;C++){for(tt=h[C],O=0,G=tt.length;O<G;O++)ut=tt[O],w+=(O?"L":"M")+ut.x+" "+ut.y;w+=y?qt.svg?"z":"x":""}return w||"M0 0"}var nn=document.documentElement.style,ws="ActiveXObject"in window,Iy=ws&&!document.addEventListener,eg="msLaunchUri"in navigator&&!("documentMode"in document),zu=fr("webkit"),qy=fr("android"),ng=fr("android 2")||fr("android 3"),gw=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),mw=qy&&fr("Google")&&gw<537&&!("AudioNode"in window),Es=!!window.opera,xi=!eg&&fr("chrome"),La=fr("gecko")&&!zu&&!Es&&!ws,Ii=!xi&&fr("safari"),jy=fr("phantom"),Hy="OTransition"in nn,yw=navigator.platform.indexOf("Win")===0,Oc=ws&&"transition"in nn,Fu="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!ng,wo="MozPerspective"in nn,Ah=!window.L_DISABLE_3D&&(Oc||Fu||wo)&&!Hy&&!jy,za=typeof orientation<"u"||fr("mobile"),vw=za&&zu,Gy=za&&Fu,ig=!window.PointerEvent&&window.MSPointerEvent,Th=!!(window.PointerEvent||ig),Pu="ontouchstart"in window||!!window.TouchEvent,_w=!window.L_NO_TOUCH&&(Pu||Th),Zy=za&&Es,Yy=za&&La,rg=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,ag=function(){var h=!1;try{var y=Object.defineProperty({},"passive",{get:function(){h=!0}});window.addEventListener("testPassiveEventSupport",p,y),window.removeEventListener("testPassiveEventSupport",p,y)}catch{}return h}(),Xy=function(){return!!document.createElement("canvas").getContext}(),og=!!(document.createElementNS&&ln("svg").createSVGRect),Eo=!!og&&function(){var h=document.createElement("div");return h.innerHTML="<svg/>",(h.firstChild&&h.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),Hn=!og&&function(){try{var h=document.createElement("div");h.innerHTML='<v:shape adj="1"/>';var y=h.firstChild;return y.style.behavior="url(#default#VML)",y&&typeof y.adj=="object"}catch{return!1}}(),wi=navigator.platform.indexOf("Mac")===0,Bu=navigator.platform.indexOf("Linux")===0;function fr(h){return navigator.userAgent.toLowerCase().indexOf(h)>=0}var qt={ie:ws,ielt9:Iy,edge:eg,webkit:zu,android:qy,android23:ng,androidStock:mw,opera:Es,chrome:xi,gecko:La,safari:Ii,phantom:jy,opera12:Hy,win:yw,ie3d:Oc,webkit3d:Fu,gecko3d:wo,any3d:Ah,mobile:za,mobileWebkit:vw,mobileWebkit3d:Gy,msPointer:ig,pointer:Th,touch:_w,touchNative:Pu,mobileOpera:Zy,mobileGecko:Yy,retina:rg,passiveEvents:ag,canvas:Xy,svg:og,vml:Hn,inlineSvg:Eo,mac:wi,linux:Bu},Wy=qt.msPointer?"MSPointerDown":"pointerdown",sg=qt.msPointer?"MSPointerMove":"pointermove",Uu=qt.msPointer?"MSPointerUp":"pointerup",Ch=qt.msPointer?"MSPointerCancel":"pointercancel",So={touchstart:Wy,touchmove:sg,touchend:Uu,touchcancel:Ch},Ss={touchstart:Ky,touchmove:$c,touchend:$c,touchcancel:$c},ra={},As=!1;function kn(h,y,w){return y==="touchstart"&&bw(),Ss[y]?(w=Ss[y].bind(this,w),h.addEventListener(So[y],w,!1),w):(console.warn("wrong event specified:",y),p)}function Vy(h,y,w){if(!So[y]){console.warn("wrong event specified:",y);return}h.removeEventListener(So[y],w,!1)}function Qy(h){ra[h.pointerId]=h}function Ts(h){ra[h.pointerId]&&(ra[h.pointerId]=h)}function Cs(h){delete ra[h.pointerId]}function bw(){As||(document.addEventListener(Wy,Qy,!0),document.addEventListener(sg,Ts,!0),document.addEventListener(Uu,Cs,!0),document.addEventListener(Ch,Cs,!0),As=!0)}function $c(h,y){if(y.pointerType!==(y.MSPOINTER_TYPE_MOUSE||"mouse")){y.touches=[];for(var w in ra)y.touches.push(ra[w]);y.changedTouches=[y],h(y)}}function Ky(h,y){y.MSPOINTER_TYPE_TOUCH&&y.pointerType===y.MSPOINTER_TYPE_TOUCH&&mn(y),$c(h,y)}function xw(h){var y={},w,C;for(C in h)w=h[C],y[C]=w&&w.bind?w.bind(h):w;return h=y,y.type="dblclick",y.detail=2,y.isTrusted=!1,y._simulated=!0,y}var Mh=200;function kh(h,y){h.addEventListener("dblclick",y);var w=0,C;function O(z){if(z.detail!==1){C=z.detail;return}if(!(z.pointerType==="mouse"||z.sourceCapabilities&&!z.sourceCapabilities.firesTouchEvents)){var G=cg(z);if(!(G.some(function(ut){return ut instanceof HTMLLabelElement&&ut.attributes.for})&&!G.some(function(ut){return ut instanceof HTMLInputElement||ut instanceof HTMLSelectElement}))){var tt=Date.now();tt-w<=Mh?(C++,C===2&&y(xw(z))):C=1,w=tt}}}return h.addEventListener("click",O),{dblclick:y,simDblclick:O}}function Fa(h,y){h.removeEventListener("dblclick",y.dblclick),h.removeEventListener("click",y.simDblclick)}var Dc=Hu(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Iu=Hu(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Ms=Iu==="webkitTransition"||Iu==="OTransition"?Iu+"End":"transitionend";function Oh(h){return typeof h=="string"?document.getElementById(h):h}function ks(h,y){var w=h.style[y]||h.currentStyle&&h.currentStyle[y];if((!w||w==="auto")&&document.defaultView){var C=document.defaultView.getComputedStyle(h,null);w=C?C[y]:null}return w==="auto"?null:w}function xe(h,y,w){var C=document.createElement(h);return C.className=y||"",w&&w.appendChild(C),C}function Xe(h){var y=h.parentNode;y&&y.removeChild(h)}function oi(h){for(;h.firstChild;)h.removeChild(h.firstChild)}function Os(h){var y=h.parentNode;y&&y.lastChild!==h&&y.appendChild(h)}function qu(h){var y=h.parentNode;y&&y.firstChild!==h&&y.insertBefore(h,y.firstChild)}function ju(h,y){if(h.classList!==void 0)return h.classList.contains(y);var w=si(h);return w.length>0&&new RegExp("(^|\\s)"+y+"(\\s|$)").test(w)}function re(h,y){if(h.classList!==void 0)for(var w=b(y),C=0,O=w.length;C<O;C++)h.classList.add(w[C]);else if(!ju(h,y)){var z=si(h);ug(h,(z?z+" ":"")+y)}}function We(h,y){h.classList!==void 0?h.classList.remove(y):ug(h,_((" "+si(h)+" ").replace(" "+y+" "," ")))}function ug(h,y){h.className.baseVal===void 0?h.className=y:h.className.baseVal=y}function si(h){return h.correspondingElement&&(h=h.correspondingElement),h.className.baseVal===void 0?h.className:h.className.baseVal}function Ei(h,y){"opacity"in h.style?h.style.opacity=y:"filter"in h.style&&Jy(h,y)}function Jy(h,y){var w=!1,C="DXImageTransform.Microsoft.Alpha";try{w=h.filters.item(C)}catch{if(y===1)return}y=Math.round(y*100),w?(w.Enabled=y!==100,w.Opacity=y):h.style.filter+=" progid:"+C+"(opacity="+y+")"}function Hu(h){for(var y=document.documentElement.style,w=0;w<h.length;w++)if(h[w]in y)return h[w];return!1}function hr(h,y,w){var C=y||new V(0,0);h.style[Dc]=(qt.ie3d?"translate("+C.x+"px,"+C.y+"px)":"translate3d("+C.x+"px,"+C.y+"px,0)")+(w?" scale("+w+")":"")}function cn(h,y){h._leaflet_pos=y,qt.any3d?hr(h,y):(h.style.left=y.x+"px",h.style.top=y.y+"px")}function Ao(h){return h._leaflet_pos||new V(0,0)}var aa,Rc,$h;if("onselectstart"in document)aa=function(){ne(window,"selectstart",mn)},Rc=function(){Se(window,"selectstart",mn)};else{var Gu=Hu(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);aa=function(){if(Gu){var h=document.documentElement.style;$h=h[Gu],h[Gu]="none"}},Rc=function(){Gu&&(document.documentElement.style[Gu]=$h,$h=void 0)}}function Nc(){ne(window,"dragstart",mn)}function lg(){Se(window,"dragstart",mn)}var Dh,Zu;function Lc(h){for(;h.tabIndex===-1;)h=h.parentNode;h.style&&(Yu(),Dh=h,Zu=h.style.outlineStyle,h.style.outlineStyle="none",ne(window,"keydown",Yu))}function Yu(){Dh&&(Dh.style.outlineStyle=Zu,Dh=void 0,Zu=void 0,Se(window,"keydown",Yu))}function $s(h){do h=h.parentNode;while((!h.offsetWidth||!h.offsetHeight)&&h!==document.body);return h}function To(h){var y=h.getBoundingClientRect();return{x:y.width/h.offsetWidth||1,y:y.height/h.offsetHeight||1,boundingClientRect:y}}var t1={__proto__:null,TRANSFORM:Dc,TRANSITION:Iu,TRANSITION_END:Ms,get:Oh,getStyle:ks,create:xe,remove:Xe,empty:oi,toFront:Os,toBack:qu,hasClass:ju,addClass:re,removeClass:We,setClass:ug,getClass:si,setOpacity:Ei,testProp:Hu,setTransform:hr,setPosition:cn,getPosition:Ao,get disableTextSelection(){return aa},get enableTextSelection(){return Rc},disableImageDrag:Nc,enableImageDrag:lg,preventOutline:Lc,restoreOutline:Yu,getSizedParentNode:$s,getScale:To};function ne(h,y,w,C){if(y&&typeof y=="object")for(var O in y)Ds(h,O,y[O],w);else{y=b(y);for(var z=0,G=y.length;z<G;z++)Ds(h,y[z],w,C)}return this}var $r="_leaflet_events";function Se(h,y,w,C){if(arguments.length===1)oa(h),delete h[$r];else if(y&&typeof y=="object")for(var O in y)sa(h,O,y[O],w);else if(y=b(y),arguments.length===2)oa(h,function(tt){return $(y,tt)!==-1});else for(var z=0,G=y.length;z<G;z++)sa(h,y[z],w,C);return this}function oa(h,y){for(var w in h[$r]){var C=w.split(/\d/)[0];(!y||y(C))&&sa(h,C,null,null,w)}}var zc={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Ds(h,y,w,C){var O=y+l(w)+(C?"_"+l(C):"");if(h[$r]&&h[$r][O])return this;var z=function(tt){return w.call(C||h,tt||window.event)},G=z;!qt.touchNative&&qt.pointer&&y.indexOf("touch")===0?z=kn(h,y,z):qt.touch&&y==="dblclick"?z=kh(h,z):"addEventListener"in h?y==="touchstart"||y==="touchmove"||y==="wheel"||y==="mousewheel"?h.addEventListener(zc[y]||y,z,qt.passiveEvents?{passive:!1}:!1):y==="mouseenter"||y==="mouseleave"?(z=function(tt){tt=tt||window.event,Ns(h,tt)&&G(tt)},h.addEventListener(zc[y],z,!1)):h.addEventListener(y,G,!1):h.attachEvent("on"+y,z),h[$r]=h[$r]||{},h[$r][O]=z}function sa(h,y,w,C,O){O=O||y+l(w)+(C?"_"+l(C):"");var z=h[$r]&&h[$r][O];if(!z)return this;!qt.touchNative&&qt.pointer&&y.indexOf("touch")===0?Vy(h,y,z):qt.touch&&y==="dblclick"?Fa(h,z):"removeEventListener"in h?h.removeEventListener(zc[y]||y,z,!1):h.detachEvent("on"+y,z),h[$r][O]=null}function Pa(h){return h.stopPropagation?h.stopPropagation():h.originalEvent?h.originalEvent._stopped=!0:h.cancelBubble=!0,this}function Xu(h){return Ds(h,"wheel",Pa),this}function Wu(h){return ne(h,"mousedown touchstart dblclick contextmenu",Pa),h._leaflet_disable_click=!0,this}function mn(h){return h.preventDefault?h.preventDefault():h.returnValue=!1,this}function ua(h){return mn(h),Pa(h),this}function cg(h){if(h.composedPath)return h.composedPath();for(var y=[],w=h.target;w;)y.push(w),w=w.parentNode;return y}function ui(h,y){if(!y)return new V(h.clientX,h.clientY);var w=To(y),C=w.boundingClientRect;return new V((h.clientX-C.left)/w.x-y.clientLeft,(h.clientY-C.top)/w.y-y.clientTop)}var Rs=qt.linux&&qt.chrome?window.devicePixelRatio:qt.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Fc(h){return qt.edge?h.wheelDeltaY/2:h.deltaY&&h.deltaMode===0?-h.deltaY/Rs:h.deltaY&&h.deltaMode===1?-h.deltaY*20:h.deltaY&&h.deltaMode===2?-h.deltaY*60:h.deltaX||h.deltaZ?0:h.wheelDelta?(h.wheelDeltaY||h.wheelDelta)/2:h.detail&&Math.abs(h.detail)<32765?-h.detail*20:h.detail?h.detail/-32765*60:0}function Ns(h,y){var w=y.relatedTarget;if(!w)return!0;try{for(;w&&w!==h;)w=w.parentNode}catch{return!1}return w!==h}var ww={__proto__:null,on:ne,off:Se,stopPropagation:Pa,disableScrollPropagation:Xu,disableClickPropagation:Wu,preventDefault:mn,stop:ua,getPropagationPath:cg,getMousePosition:ui,getWheelDelta:Fc,isExternalTarget:Ns,addListener:ne,removeListener:Se},Rh=X.extend({run:function(h,y,w,C){this.stop(),this._el=h,this._inProgress=!0,this._duration=w||.25,this._easeOutPower=1/Math.max(C||.5,.2),this._startPos=Ao(h),this._offset=y.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=H(this._animate,this),this._step()},_step:function(h){var y=+new Date-this._startTime,w=this._duration*1e3;y<w?this._runFrame(this._easeOut(y/w),h):(this._runFrame(1),this._complete())},_runFrame:function(h,y){var w=this._startPos.add(this._offset.multiplyBy(h));y&&w._round(),cn(this._el,w),this.fire("step")},_complete:function(){et(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(h){return 1-Math.pow(1-h,this._easeOutPower)}}),fe=X.extend({options:{crs:Je,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(h,y){y=x(this,y),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(h),this._initLayout(),this._onResize=o(this._onResize,this),this._initEvents(),y.maxBounds&&this.setMaxBounds(y.maxBounds),y.zoom!==void 0&&(this._zoom=this._limitZoom(y.zoom)),y.center&&y.zoom!==void 0&&this.setView(At(y.center),y.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Iu&&qt.any3d&&!qt.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),ne(this._proxy,Ms,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(h,y,w){if(y=y===void 0?this._zoom:this._limitZoom(y),h=this._limitCenter(At(h),y,this.options.maxBounds),w=w||{},this._stop(),this._loaded&&!w.reset&&w!==!0){w.animate!==void 0&&(w.zoom=r({animate:w.animate},w.zoom),w.pan=r({animate:w.animate,duration:w.duration},w.pan));var C=this._zoom!==y?this._tryAnimatedZoom&&this._tryAnimatedZoom(h,y,w.zoom):this._tryAnimatedPan(h,w.pan);if(C)return clearTimeout(this._sizeTimer),this}return this._resetView(h,y,w.pan&&w.pan.noMoveStart),this},setZoom:function(h,y){return this._loaded?this.setView(this.getCenter(),h,{zoom:y}):(this._zoom=h,this)},zoomIn:function(h,y){return h=h||(qt.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+h,y)},zoomOut:function(h,y){return h=h||(qt.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-h,y)},setZoomAround:function(h,y,w){var C=this.getZoomScale(y),O=this.getSize().divideBy(2),z=h instanceof V?h:this.latLngToContainerPoint(h),G=z.subtract(O).multiplyBy(1-1/C),tt=this.containerPointToLatLng(O.add(G));return this.setView(tt,y,{zoom:w})},_getBoundsCenterZoom:function(h,y){y=y||{},h=h.getBounds?h.getBounds():wt(h);var w=B(y.paddingTopLeft||y.padding||[0,0]),C=B(y.paddingBottomRight||y.padding||[0,0]),O=this.getBoundsZoom(h,!1,w.add(C));if(O=typeof y.maxZoom=="number"?Math.min(y.maxZoom,O):O,O===1/0)return{center:h.getCenter(),zoom:O};var z=C.subtract(w).divideBy(2),G=this.project(h.getSouthWest(),O),tt=this.project(h.getNorthEast(),O),ut=this.unproject(G.add(tt).divideBy(2).add(z),O);return{center:ut,zoom:O}},fitBounds:function(h,y){if(h=wt(h),!h.isValid())throw new Error("Bounds are not valid.");var w=this._getBoundsCenterZoom(h,y);return this.setView(w.center,w.zoom,y)},fitWorld:function(h){return this.fitBounds([[-90,-180],[90,180]],h)},panTo:function(h,y){return this.setView(h,this._zoom,{pan:y})},panBy:function(h,y){if(h=B(h).round(),y=y||{},!h.x&&!h.y)return this.fire("moveend");if(y.animate!==!0&&!this.getSize().contains(h))return this._resetView(this.unproject(this.project(this.getCenter()).add(h)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Rh,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),y.noMoveStart||this.fire("movestart"),y.animate!==!1){re(this._mapPane,"leaflet-pan-anim");var w=this._getMapPanePos().subtract(h).round();this._panAnim.run(this._mapPane,w,y.duration||.25,y.easeLinearity)}else this._rawPanBy(h),this.fire("move").fire("moveend");return this},flyTo:function(h,y,w){if(w=w||{},w.animate===!1||!qt.any3d)return this.setView(h,y,w);this._stop();var C=this.project(this.getCenter()),O=this.project(h),z=this.getSize(),G=this._zoom;h=At(h),y=y===void 0?G:y;var tt=Math.max(z.x,z.y),ut=tt*this.getZoomScale(G,y),_t=O.distanceTo(C)||1,Lt=1.42,Ft=Lt*Lt;function Ut(rn){var fa=rn?-1:1,Ia=rn?ut:tt,$o=ut*ut-tt*tt+fa*Ft*Ft*_t*_t,qa=2*Ia*Ft*_t,Vc=$o/qa,Zh=Math.sqrt(Vc*Vc+1)-Vc,Qc=Zh<1e-9?-18:Math.log(Zh);return Qc}function te(rn){return(Math.exp(rn)-Math.exp(-rn))/2}function Ve(rn){return(Math.exp(rn)+Math.exp(-rn))/2}function fn(rn){return te(rn)/Ve(rn)}var Zn=Ut(0);function dr(rn){return tt*(Ve(Zn)/Ve(Zn+Lt*rn))}function _1(rn){return tt*(Ve(Zn)*fn(Zn+Lt*rn)-te(Zn))/Ft}function b1(rn){return 1-Math.pow(1-rn,1.5)}var Wc=Date.now(),sl=(Ut(1)-Zn)/Lt,x1=w.duration?1e3*w.duration:1e3*sl*.8;function ul(){var rn=(Date.now()-Wc)/x1,fa=b1(rn)*sl;rn<=1?(this._flyToFrame=H(ul,this),this._move(this.unproject(C.add(O.subtract(C).multiplyBy(_1(fa)/_t)),G),this.getScaleZoom(tt/dr(fa),G),{flyTo:!0})):this._move(h,y)._moveEnd(!0)}return this._moveStart(!0,w.noMoveStart),ul.call(this),this},flyToBounds:function(h,y){var w=this._getBoundsCenterZoom(h,y);return this.flyTo(w.center,w.zoom,y)},setMaxBounds:function(h){return h=wt(h),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),h.isValid()?(this.options.maxBounds=h,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(h){var y=this.options.minZoom;return this.options.minZoom=h,this._loaded&&y!==h&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(h):this},setMaxZoom:function(h){var y=this.options.maxZoom;return this.options.maxZoom=h,this._loaded&&y!==h&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(h):this},panInsideBounds:function(h,y){this._enforcingBounds=!0;var w=this.getCenter(),C=this._limitCenter(w,this._zoom,wt(h));return w.equals(C)||this.panTo(C,y),this._enforcingBounds=!1,this},panInside:function(h,y){y=y||{};var w=B(y.paddingTopLeft||y.padding||[0,0]),C=B(y.paddingBottomRight||y.padding||[0,0]),O=this.project(this.getCenter()),z=this.project(h),G=this.getPixelBounds(),tt=lt([G.min.add(w),G.max.subtract(C)]),ut=tt.getSize();if(!tt.contains(z)){this._enforcingBounds=!0;var _t=z.subtract(tt.getCenter()),Lt=tt.extend(z).getSize().subtract(ut);O.x+=_t.x<0?-Lt.x:Lt.x,O.y+=_t.y<0?-Lt.y:Lt.y,this.panTo(this.unproject(O),y),this._enforcingBounds=!1}return this},invalidateSize:function(h){if(!this._loaded)return this;h=r({animate:!1,pan:!0},h===!0?{animate:!0}:h);var y=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var w=this.getSize(),C=y.divideBy(2).round(),O=w.divideBy(2).round(),z=C.subtract(O);return!z.x&&!z.y?this:(h.animate&&h.pan?this.panBy(z):(h.pan&&this._rawPanBy(z),this.fire("move"),h.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(o(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:y,newSize:w}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(h){if(h=this._locateOptions=r({timeout:1e4,watch:!1},h),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var y=o(this._handleGeolocationResponse,this),w=o(this._handleGeolocationError,this);return h.watch?this._locationWatchId=navigator.geolocation.watchPosition(y,w,h):navigator.geolocation.getCurrentPosition(y,w,h),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(h){if(this._container._leaflet_id){var y=h.code,w=h.message||(y===1?"permission denied":y===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:y,message:"Geolocation error: "+w+"."})}},_handleGeolocationResponse:function(h){if(this._container._leaflet_id){var y=h.coords.latitude,w=h.coords.longitude,C=new bt(y,w),O=C.toBounds(h.coords.accuracy*2),z=this._locateOptions;if(z.setView){var G=this.getBoundsZoom(O);this.setView(C,z.maxZoom?Math.min(G,z.maxZoom):G)}var tt={latlng:C,bounds:O,timestamp:h.timestamp};for(var ut in h.coords)typeof h.coords[ut]=="number"&&(tt[ut]=h.coords[ut]);this.fire("locationfound",tt)}},addHandler:function(h,y){if(!y)return this;var w=this[h]=new y(this);return this._handlers.push(w),this.options[h]&&w.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),Xe(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(et(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var h;for(h in this._layers)this._layers[h].remove();for(h in this._panes)Xe(this._panes[h]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(h,y){var w="leaflet-pane"+(h?" leaflet-"+h.replace("Pane","")+"-pane":""),C=xe("div",w,y||this._mapPane);return h&&(this._panes[h]=C),C},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var h=this.getPixelBounds(),y=this.unproject(h.getBottomLeft()),w=this.unproject(h.getTopRight());return new ft(y,w)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(h,y,w){h=wt(h),w=B(w||[0,0]);var C=this.getZoom()||0,O=this.getMinZoom(),z=this.getMaxZoom(),G=h.getNorthWest(),tt=h.getSouthEast(),ut=this.getSize().subtract(w),_t=lt(this.project(tt,C),this.project(G,C)).getSize(),Lt=qt.any3d?this.options.zoomSnap:1,Ft=ut.x/_t.x,Ut=ut.y/_t.y,te=y?Math.max(Ft,Ut):Math.min(Ft,Ut);return C=this.getScaleZoom(te,C),Lt&&(C=Math.round(C/(Lt/100))*(Lt/100),C=y?Math.ceil(C/Lt)*Lt:Math.floor(C/Lt)*Lt),Math.max(O,Math.min(z,C))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new V(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(h,y){var w=this._getTopLeftPoint(h,y);return new J(w,w.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(h){return this.options.crs.getProjectedBounds(h===void 0?this.getZoom():h)},getPane:function(h){return typeof h=="string"?this._panes[h]:h},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(h,y){var w=this.options.crs;return y=y===void 0?this._zoom:y,w.scale(h)/w.scale(y)},getScaleZoom:function(h,y){var w=this.options.crs;y=y===void 0?this._zoom:y;var C=w.zoom(h*w.scale(y));return isNaN(C)?1/0:C},project:function(h,y){return y=y===void 0?this._zoom:y,this.options.crs.latLngToPoint(At(h),y)},unproject:function(h,y){return y=y===void 0?this._zoom:y,this.options.crs.pointToLatLng(B(h),y)},layerPointToLatLng:function(h){var y=B(h).add(this.getPixelOrigin());return this.unproject(y)},latLngToLayerPoint:function(h){var y=this.project(At(h))._round();return y._subtract(this.getPixelOrigin())},wrapLatLng:function(h){return this.options.crs.wrapLatLng(At(h))},wrapLatLngBounds:function(h){return this.options.crs.wrapLatLngBounds(wt(h))},distance:function(h,y){return this.options.crs.distance(At(h),At(y))},containerPointToLayerPoint:function(h){return B(h).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(h){return B(h).add(this._getMapPanePos())},containerPointToLatLng:function(h){var y=this.containerPointToLayerPoint(B(h));return this.layerPointToLatLng(y)},latLngToContainerPoint:function(h){return this.layerPointToContainerPoint(this.latLngToLayerPoint(At(h)))},mouseEventToContainerPoint:function(h){return ui(h,this._container)},mouseEventToLayerPoint:function(h){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(h))},mouseEventToLatLng:function(h){return this.layerPointToLatLng(this.mouseEventToLayerPoint(h))},_initContainer:function(h){var y=this._container=Oh(h);if(y){if(y._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");ne(y,"scroll",this._onScroll,this),this._containerId=l(y)},_initLayout:function(){var h=this._container;this._fadeAnimated=this.options.fadeAnimation&&qt.any3d,re(h,"leaflet-container"+(qt.touch?" leaflet-touch":"")+(qt.retina?" leaflet-retina":"")+(qt.ielt9?" leaflet-oldie":"")+(qt.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var y=ks(h,"position");y!=="absolute"&&y!=="relative"&&y!=="fixed"&&y!=="sticky"&&(h.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var h=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),cn(this._mapPane,new V(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(re(h.markerPane,"leaflet-zoom-hide"),re(h.shadowPane,"leaflet-zoom-hide"))},_resetView:function(h,y,w){cn(this._mapPane,new V(0,0));var C=!this._loaded;this._loaded=!0,y=this._limitZoom(y),this.fire("viewprereset");var O=this._zoom!==y;this._moveStart(O,w)._move(h,y)._moveEnd(O),this.fire("viewreset"),C&&this.fire("load")},_moveStart:function(h,y){return h&&this.fire("zoomstart"),y||this.fire("movestart"),this},_move:function(h,y,w,C){y===void 0&&(y=this._zoom);var O=this._zoom!==y;return this._zoom=y,this._lastCenter=h,this._pixelOrigin=this._getNewPixelOrigin(h),C?w&&w.pinch&&this.fire("zoom",w):((O||w&&w.pinch)&&this.fire("zoom",w),this.fire("move",w)),this},_moveEnd:function(h){return h&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return et(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(h){cn(this._mapPane,this._getMapPanePos().subtract(h))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(h){this._targets={},this._targets[l(this._container)]=this;var y=h?Se:ne;y(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&y(window,"resize",this._onResize,this),qt.any3d&&this.options.transform3DLimit&&(h?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){et(this._resizeRequest),this._resizeRequest=H(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var h=this._getMapPanePos();Math.max(Math.abs(h.x),Math.abs(h.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(h,y){for(var w=[],C,O=y==="mouseout"||y==="mouseover",z=h.target||h.srcElement,G=!1;z;){if(C=this._targets[l(z)],C&&(y==="click"||y==="preclick")&&this._draggableMoved(C)){G=!0;break}if(C&&C.listens(y,!0)&&(O&&!Ns(z,h)||(w.push(C),O))||z===this._container)break;z=z.parentNode}return!w.length&&!G&&!O&&this.listens(y,!0)&&(w=[this]),w},_isClickDisabled:function(h){for(;h&&h!==this._container;){if(h._leaflet_disable_click)return!0;h=h.parentNode}},_handleDOMEvent:function(h){var y=h.target||h.srcElement;if(!(!this._loaded||y._leaflet_disable_events||h.type==="click"&&this._isClickDisabled(y))){var w=h.type;w==="mousedown"&&Lc(y),this._fireDOMEvent(h,w)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(h,y,w){if(h.type==="click"){var C=r({},h);C.type="preclick",this._fireDOMEvent(C,C.type,w)}var O=this._findEventTargets(h,y);if(w){for(var z=[],G=0;G<w.length;G++)w[G].listens(y,!0)&&z.push(w[G]);O=z.concat(O)}if(O.length){y==="contextmenu"&&mn(h);var tt=O[0],ut={originalEvent:h};if(h.type!=="keypress"&&h.type!=="keydown"&&h.type!=="keyup"){var _t=tt.getLatLng&&(!tt._radius||tt._radius<=10);ut.containerPoint=_t?this.latLngToContainerPoint(tt.getLatLng()):this.mouseEventToContainerPoint(h),ut.layerPoint=this.containerPointToLayerPoint(ut.containerPoint),ut.latlng=_t?tt.getLatLng():this.layerPointToLatLng(ut.layerPoint)}for(G=0;G<O.length;G++)if(O[G].fire(y,ut,!0),ut.originalEvent._stopped||O[G].options.bubblingMouseEvents===!1&&$(this._mouseEvents,y)!==-1)return}},_draggableMoved:function(h){return h=h.dragging&&h.dragging.enabled()?h:this,h.dragging&&h.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var h=0,y=this._handlers.length;h<y;h++)this._handlers[h].disable()},whenReady:function(h,y){return this._loaded?h.call(y||this,{target:this}):this.on("load",h,y),this},_getMapPanePos:function(){return Ao(this._mapPane)||new V(0,0)},_moved:function(){var h=this._getMapPanePos();return h&&!h.equals([0,0])},_getTopLeftPoint:function(h,y){var w=h&&y!==void 0?this._getNewPixelOrigin(h,y):this.getPixelOrigin();return w.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(h,y){var w=this.getSize()._divideBy(2);return this.project(h,y)._subtract(w)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(h,y,w){var C=this._getNewPixelOrigin(w,y);return this.project(h,y)._subtract(C)},_latLngBoundsToNewLayerBounds:function(h,y,w){var C=this._getNewPixelOrigin(w,y);return lt([this.project(h.getSouthWest(),y)._subtract(C),this.project(h.getNorthWest(),y)._subtract(C),this.project(h.getSouthEast(),y)._subtract(C),this.project(h.getNorthEast(),y)._subtract(C)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(h){return this.latLngToLayerPoint(h).subtract(this._getCenterLayerPoint())},_limitCenter:function(h,y,w){if(!w)return h;var C=this.project(h,y),O=this.getSize().divideBy(2),z=new J(C.subtract(O),C.add(O)),G=this._getBoundsOffset(z,w,y);return Math.abs(G.x)<=1&&Math.abs(G.y)<=1?h:this.unproject(C.add(G),y)},_limitOffset:function(h,y){if(!y)return h;var w=this.getPixelBounds(),C=new J(w.min.add(h),w.max.add(h));return h.add(this._getBoundsOffset(C,y))},_getBoundsOffset:function(h,y,w){var C=lt(this.project(y.getNorthEast(),w),this.project(y.getSouthWest(),w)),O=C.min.subtract(h.min),z=C.max.subtract(h.max),G=this._rebound(O.x,-z.x),tt=this._rebound(O.y,-z.y);return new V(G,tt)},_rebound:function(h,y){return h+y>0?Math.round(h-y)/2:Math.max(0,Math.ceil(h))-Math.max(0,Math.floor(y))},_limitZoom:function(h){var y=this.getMinZoom(),w=this.getMaxZoom(),C=qt.any3d?this.options.zoomSnap:1;return C&&(h=Math.round(h/C)*C),Math.max(y,Math.min(w,h))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){We(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(h,y){var w=this._getCenterOffset(h)._trunc();return(y&&y.animate)!==!0&&!this.getSize().contains(w)?!1:(this.panBy(w,y),!0)},_createAnimProxy:function(){var h=this._proxy=xe("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(h),this.on("zoomanim",function(y){var w=Dc,C=this._proxy.style[w];hr(this._proxy,this.project(y.center,y.zoom),this.getZoomScale(y.zoom,1)),C===this._proxy.style[w]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){Xe(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var h=this.getCenter(),y=this.getZoom();hr(this._proxy,this.project(h,y),this.getZoomScale(y,1))},_catchTransitionEnd:function(h){this._animatingZoom&&h.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(h,y,w){if(this._animatingZoom)return!0;if(w=w||{},!this._zoomAnimated||w.animate===!1||this._nothingToAnimate()||Math.abs(y-this._zoom)>this.options.zoomAnimationThreshold)return!1;var C=this.getZoomScale(y),O=this._getCenterOffset(h)._divideBy(1-1/C);return w.animate!==!0&&!this.getSize().contains(O)?!1:(H(function(){this._moveStart(!0,w.noMoveStart||!1)._animateZoom(h,y,!0)},this),!0)},_animateZoom:function(h,y,w,C){this._mapPane&&(w&&(this._animatingZoom=!0,this._animateToCenter=h,this._animateToZoom=y,re(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:h,zoom:y,noUpdate:C}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(o(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&We(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function Pc(h,y){return new fe(h,y)}var Si=W.extend({options:{position:"topright"},initialize:function(h){x(this,h)},getPosition:function(){return this.options.position},setPosition:function(h){var y=this._map;return y&&y.removeControl(this),this.options.position=h,y&&y.addControl(this),this},getContainer:function(){return this._container},addTo:function(h){this.remove(),this._map=h;var y=this._container=this.onAdd(h),w=this.getPosition(),C=h._controlCorners[w];return re(y,"leaflet-control"),w.indexOf("bottom")!==-1?C.insertBefore(y,C.firstChild):C.appendChild(y),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(Xe(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(h){this._map&&h&&h.screenX>0&&h.screenY>0&&this._map.getContainer().focus()}}),Vu=function(h){return new Si(h)};fe.include({addControl:function(h){return h.addTo(this),this},removeControl:function(h){return h.remove(),this},_initControlPos:function(){var h=this._controlCorners={},y="leaflet-",w=this._controlContainer=xe("div",y+"control-container",this._container);function C(O,z){var G=y+O+" "+y+z;h[O+z]=xe("div",G,w)}C("top","left"),C("top","right"),C("bottom","left"),C("bottom","right")},_clearControlPos:function(){for(var h in this._controlCorners)Xe(this._controlCorners[h]);Xe(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var e1=Si.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(h,y,w,C){return w<C?-1:C<w?1:0}},initialize:function(h,y,w){x(this,w),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var C in h)this._addLayer(h[C],C);for(C in y)this._addLayer(y[C],C,!0)},onAdd:function(h){this._initLayout(),this._update(),this._map=h,h.on("zoomend",this._checkDisabledLayers,this);for(var y=0;y<this._layers.length;y++)this._layers[y].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(h){return Si.prototype.addTo.call(this,h),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var h=0;h<this._layers.length;h++)this._layers[h].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(h,y){return this._addLayer(h,y),this._map?this._update():this},addOverlay:function(h,y){return this._addLayer(h,y,!0),this._map?this._update():this},removeLayer:function(h){h.off("add remove",this._onLayerChange,this);var y=this._getLayer(l(h));return y&&this._layers.splice(this._layers.indexOf(y),1),this._map?this._update():this},expand:function(){re(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var h=this._map.getSize().y-(this._container.offsetTop+50);return h<this._section.clientHeight?(re(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=h+"px"):We(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return We(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var h="leaflet-control-layers",y=this._container=xe("div",h),w=this.options.collapsed;y.setAttribute("aria-haspopup",!0),Wu(y),Xu(y);var C=this._section=xe("section",h+"-list");w&&(this._map.on("click",this.collapse,this),ne(y,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var O=this._layersLink=xe("a",h+"-toggle",y);O.href="#",O.title="Layers",O.setAttribute("role","button"),ne(O,{keydown:function(z){z.keyCode===13&&this._expandSafely()},click:function(z){mn(z),this._expandSafely()}},this),w||this.expand(),this._baseLayersList=xe("div",h+"-base",C),this._separator=xe("div",h+"-separator",C),this._overlaysList=xe("div",h+"-overlays",C),y.appendChild(C)},_getLayer:function(h){for(var y=0;y<this._layers.length;y++)if(this._layers[y]&&l(this._layers[y].layer)===h)return this._layers[y]},_addLayer:function(h,y,w){this._map&&h.on("add remove",this._onLayerChange,this),this._layers.push({layer:h,name:y,overlay:w}),this.options.sortLayers&&this._layers.sort(o(function(C,O){return this.options.sortFunction(C.layer,O.layer,C.name,O.name)},this)),this.options.autoZIndex&&h.setZIndex&&(this._lastZIndex++,h.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;oi(this._baseLayersList),oi(this._overlaysList),this._layerControlInputs=[];var h,y,w,C,O=0;for(w=0;w<this._layers.length;w++)C=this._layers[w],this._addItem(C),y=y||C.overlay,h=h||!C.overlay,O+=C.overlay?0:1;return this.options.hideSingleBase&&(h=h&&O>1,this._baseLayersList.style.display=h?"":"none"),this._separator.style.display=y&&h?"":"none",this},_onLayerChange:function(h){this._handlingClick||this._update();var y=this._getLayer(l(h.target)),w=y.overlay?h.type==="add"?"overlayadd":"overlayremove":h.type==="add"?"baselayerchange":null;w&&this._map.fire(w,y)},_createRadioElement:function(h,y){var w='<input type="radio" class="leaflet-control-layers-selector" name="'+h+'"'+(y?' checked="checked"':"")+"/>",C=document.createElement("div");return C.innerHTML=w,C.firstChild},_addItem:function(h){var y=document.createElement("label"),w=this._map.hasLayer(h.layer),C;h.overlay?(C=document.createElement("input"),C.type="checkbox",C.className="leaflet-control-layers-selector",C.defaultChecked=w):C=this._createRadioElement("leaflet-base-layers_"+l(this),w),this._layerControlInputs.push(C),C.layerId=l(h.layer),ne(C,"click",this._onInputClick,this);var O=document.createElement("span");O.innerHTML=" "+h.name;var z=document.createElement("span");y.appendChild(z),z.appendChild(C),z.appendChild(O);var G=h.overlay?this._overlaysList:this._baseLayersList;return G.appendChild(y),this._checkDisabledLayers(),y},_onInputClick:function(){if(!this._preventClick){var h=this._layerControlInputs,y,w,C=[],O=[];this._handlingClick=!0;for(var z=h.length-1;z>=0;z--)y=h[z],w=this._getLayer(y.layerId).layer,y.checked?C.push(w):y.checked||O.push(w);for(z=0;z<O.length;z++)this._map.hasLayer(O[z])&&this._map.removeLayer(O[z]);for(z=0;z<C.length;z++)this._map.hasLayer(C[z])||this._map.addLayer(C[z]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var h=this._layerControlInputs,y,w,C=this._map.getZoom(),O=h.length-1;O>=0;O--)y=h[O],w=this._getLayer(y.layerId).layer,y.disabled=w.options.minZoom!==void 0&&C<w.options.minZoom||w.options.maxZoom!==void 0&&C>w.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var h=this._section;this._preventClick=!0,ne(h,"click",mn),this.expand();var y=this;setTimeout(function(){Se(h,"click",mn),y._preventClick=!1})}}),Ew=function(h,y,w){return new e1(h,y,w)},fg=Si.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(h){var y="leaflet-control-zoom",w=xe("div",y+" leaflet-bar"),C=this.options;return this._zoomInButton=this._createButton(C.zoomInText,C.zoomInTitle,y+"-in",w,this._zoomIn),this._zoomOutButton=this._createButton(C.zoomOutText,C.zoomOutTitle,y+"-out",w,this._zoomOut),this._updateDisabled(),h.on("zoomend zoomlevelschange",this._updateDisabled,this),w},onRemove:function(h){h.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(h){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(h.shiftKey?3:1))},_zoomOut:function(h){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(h.shiftKey?3:1))},_createButton:function(h,y,w,C,O){var z=xe("a",w,C);return z.innerHTML=h,z.href="#",z.title=y,z.setAttribute("role","button"),z.setAttribute("aria-label",y),Wu(z),ne(z,"click",ua),ne(z,"click",O,this),ne(z,"click",this._refocusOnMap,this),z},_updateDisabled:function(){var h=this._map,y="leaflet-disabled";We(this._zoomInButton,y),We(this._zoomOutButton,y),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||h._zoom===h.getMinZoom())&&(re(this._zoomOutButton,y),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||h._zoom===h.getMaxZoom())&&(re(this._zoomInButton,y),this._zoomInButton.setAttribute("aria-disabled","true"))}});fe.mergeOptions({zoomControl:!0}),fe.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new fg,this.addControl(this.zoomControl))});var hg=function(h){return new fg(h)},n1=Si.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(h){var y="leaflet-control-scale",w=xe("div",y),C=this.options;return this._addScales(C,y+"-line",w),h.on(C.updateWhenIdle?"moveend":"move",this._update,this),h.whenReady(this._update,this),w},onRemove:function(h){h.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(h,y,w){h.metric&&(this._mScale=xe("div",y,w)),h.imperial&&(this._iScale=xe("div",y,w))},_update:function(){var h=this._map,y=h.getSize().y/2,w=h.distance(h.containerPointToLatLng([0,y]),h.containerPointToLatLng([this.options.maxWidth,y]));this._updateScales(w)},_updateScales:function(h){this.options.metric&&h&&this._updateMetric(h),this.options.imperial&&h&&this._updateImperial(h)},_updateMetric:function(h){var y=this._getRoundNum(h),w=y<1e3?y+" m":y/1e3+" km";this._updateScale(this._mScale,w,y/h)},_updateImperial:function(h){var y=h*3.2808399,w,C,O;y>5280?(w=y/5280,C=this._getRoundNum(w),this._updateScale(this._iScale,C+" mi",C/w)):(O=this._getRoundNum(y),this._updateScale(this._iScale,O+" ft",O/y))},_updateScale:function(h,y,w){h.style.width=Math.round(this.options.maxWidth*w)+"px",h.innerHTML=y},_getRoundNum:function(h){var y=Math.pow(10,(Math.floor(h)+"").length-1),w=h/y;return w=w>=10?10:w>=5?5:w>=3?3:w>=2?2:1,y*w}}),Sw=function(h){return new n1(h)},Aw='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',dg=Si.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(qt.inlineSvg?Aw+" ":"")+"Leaflet</a>"},initialize:function(h){x(this,h),this._attributions={}},onAdd:function(h){h.attributionControl=this,this._container=xe("div","leaflet-control-attribution"),Wu(this._container);for(var y in h._layers)h._layers[y].getAttribution&&this.addAttribution(h._layers[y].getAttribution());return this._update(),h.on("layeradd",this._addAttribution,this),this._container},onRemove:function(h){h.off("layeradd",this._addAttribution,this)},_addAttribution:function(h){h.layer.getAttribution&&(this.addAttribution(h.layer.getAttribution()),h.layer.once("remove",function(){this.removeAttribution(h.layer.getAttribution())},this))},setPrefix:function(h){return this.options.prefix=h,this._update(),this},addAttribution:function(h){return h?(this._attributions[h]||(this._attributions[h]=0),this._attributions[h]++,this._update(),this):this},removeAttribution:function(h){return h?(this._attributions[h]&&(this._attributions[h]--,this._update()),this):this},_update:function(){if(this._map){var h=[];for(var y in this._attributions)this._attributions[y]&&h.push(y);var w=[];this.options.prefix&&w.push(this.options.prefix),h.length&&w.push(h.join(", ")),this._container.innerHTML=w.join(' <span aria-hidden="true">|</span> ')}}});fe.mergeOptions({attributionControl:!0}),fe.addInitHook(function(){this.options.attributionControl&&new dg().addTo(this)});var Tw=function(h){return new dg(h)};Si.Layers=e1,Si.Zoom=fg,Si.Scale=n1,Si.Attribution=dg,Vu.layers=Ew,Vu.zoom=hg,Vu.scale=Sw,Vu.attribution=Tw;var Dr=W.extend({initialize:function(h){this._map=h},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Dr.addTo=function(h,y){return h.addHandler(y,this),this};var Cw={Events:U},i1=qt.touch?"touchstart mousedown":"mousedown",Co=X.extend({options:{clickTolerance:3},initialize:function(h,y,w,C){x(this,C),this._element=h,this._dragStartTarget=y||h,this._preventOutline=w},enable:function(){this._enabled||(ne(this._dragStartTarget,i1,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Co._dragging===this&&this.finishDrag(!0),Se(this._dragStartTarget,i1,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(h){if(this._enabled&&(this._moved=!1,!ju(this._element,"leaflet-zoom-anim"))){if(h.touches&&h.touches.length!==1){Co._dragging===this&&this.finishDrag();return}if(!(Co._dragging||h.shiftKey||h.which!==1&&h.button!==1&&!h.touches)&&(Co._dragging=this,this._preventOutline&&Lc(this._element),Nc(),aa(),!this._moving)){this.fire("down");var y=h.touches?h.touches[0]:h,w=$s(this._element);this._startPoint=new V(y.clientX,y.clientY),this._startPos=Ao(this._element),this._parentScale=To(w);var C=h.type==="mousedown";ne(document,C?"mousemove":"touchmove",this._onMove,this),ne(document,C?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(h){if(this._enabled){if(h.touches&&h.touches.length>1){this._moved=!0;return}var y=h.touches&&h.touches.length===1?h.touches[0]:h,w=new V(y.clientX,y.clientY)._subtract(this._startPoint);!w.x&&!w.y||Math.abs(w.x)+Math.abs(w.y)<this.options.clickTolerance||(w.x/=this._parentScale.x,w.y/=this._parentScale.y,mn(h),this._moved||(this.fire("dragstart"),this._moved=!0,re(document.body,"leaflet-dragging"),this._lastTarget=h.target||h.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),re(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(w),this._moving=!0,this._lastEvent=h,this._updatePosition())}},_updatePosition:function(){var h={originalEvent:this._lastEvent};this.fire("predrag",h),cn(this._element,this._newPos),this.fire("drag",h)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(h){We(document.body,"leaflet-dragging"),this._lastTarget&&(We(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Se(document,"mousemove touchmove",this._onMove,this),Se(document,"mouseup touchend touchcancel",this._onUp,this),lg(),Rc();var y=this._moved&&this._moving;this._moving=!1,Co._dragging=!1,y&&this.fire("dragend",{noInertia:h,distance:this._newPos.distanceTo(this._startPos)})}});function r1(h,y,w){var C,O=[1,4,2,8],z,G,tt,ut,_t,Lt,Ft,Ut;for(z=0,Lt=h.length;z<Lt;z++)h[z]._code=Ls(h[z],y);for(tt=0;tt<4;tt++){for(Ft=O[tt],C=[],z=0,Lt=h.length,G=Lt-1;z<Lt;G=z++)ut=h[z],_t=h[G],ut._code&Ft?_t._code&Ft||(Ut=Lh(_t,ut,Ft,y,w),Ut._code=Ls(Ut,y),C.push(Ut)):(_t._code&Ft&&(Ut=Lh(_t,ut,Ft,y,w),Ut._code=Ls(Ut,y),C.push(Ut)),C.push(ut));h=C}return h}function Nh(h,y){var w,C,O,z,G,tt,ut,_t,Lt;if(!h||h.length===0)throw new Error("latlngs not passed");Gn(h)||(console.warn("latlngs are not flat! Only the first ring will be used"),h=h[0]);var Ft=At([0,0]),Ut=wt(h),te=Ut.getNorthWest().distanceTo(Ut.getSouthWest())*Ut.getNorthEast().distanceTo(Ut.getNorthWest());te<1700&&(Ft=pg(h));var Ve=h.length,fn=[];for(w=0;w<Ve;w++){var Zn=At(h[w]);fn.push(y.project(At([Zn.lat-Ft.lat,Zn.lng-Ft.lng])))}for(tt=ut=_t=0,w=0,C=Ve-1;w<Ve;C=w++)O=fn[w],z=fn[C],G=O.y*z.x-z.y*O.x,ut+=(O.x+z.x)*G,_t+=(O.y+z.y)*G,tt+=G*3;tt===0?Lt=fn[0]:Lt=[ut/tt,_t/tt];var dr=y.unproject(B(Lt));return At([dr.lat+Ft.lat,dr.lng+Ft.lng])}function pg(h){for(var y=0,w=0,C=0,O=0;O<h.length;O++){var z=At(h[O]);y+=z.lat,w+=z.lng,C++}return At([y/C,w/C])}var Mw={__proto__:null,clipPolygon:r1,polygonCenter:Nh,centroid:pg};function a1(h,y){if(!y||!h.length)return h.slice();var w=y*y;return h=$w(h,w),h=Ow(h,w),h}function gg(h,y,w){return Math.sqrt(zs(h,y,w,!0))}function kw(h,y,w){return zs(h,y,w)}function Ow(h,y){var w=h.length,C=typeof Uint8Array<"u"?Uint8Array:Array,O=new C(w);O[0]=O[w-1]=1,mg(h,O,y,0,w-1);var z,G=[];for(z=0;z<w;z++)O[z]&&G.push(h[z]);return G}function mg(h,y,w,C,O){var z=0,G,tt,ut;for(tt=C+1;tt<=O-1;tt++)ut=zs(h[tt],h[C],h[O],!0),ut>z&&(G=tt,z=ut);z>w&&(y[G]=1,mg(h,y,w,C,G),mg(h,y,w,G,O))}function $w(h,y){for(var w=[h[0]],C=1,O=0,z=h.length;C<z;C++)Dw(h[C],h[O])>y&&(w.push(h[C]),O=C);return O<z-1&&w.push(h[z-1]),w}var o1;function s1(h,y,w,C,O){var z=C?o1:Ls(h,w),G=Ls(y,w),tt,ut,_t;for(o1=G;;){if(!(z|G))return[h,y];if(z&G)return!1;tt=z||G,ut=Lh(h,y,tt,w,O),_t=Ls(ut,w),tt===z?(h=ut,z=_t):(y=ut,G=_t)}}function Lh(h,y,w,C,O){var z=y.x-h.x,G=y.y-h.y,tt=C.min,ut=C.max,_t,Lt;return w&8?(_t=h.x+z*(ut.y-h.y)/G,Lt=ut.y):w&4?(_t=h.x+z*(tt.y-h.y)/G,Lt=tt.y):w&2?(_t=ut.x,Lt=h.y+G*(ut.x-h.x)/z):w&1&&(_t=tt.x,Lt=h.y+G*(tt.x-h.x)/z),new V(_t,Lt,O)}function Ls(h,y){var w=0;return h.x<y.min.x?w|=1:h.x>y.max.x&&(w|=2),h.y<y.min.y?w|=4:h.y>y.max.y&&(w|=8),w}function Dw(h,y){var w=y.x-h.x,C=y.y-h.y;return w*w+C*C}function zs(h,y,w,C){var O=y.x,z=y.y,G=w.x-O,tt=w.y-z,ut=G*G+tt*tt,_t;return ut>0&&(_t=((h.x-O)*G+(h.y-z)*tt)/ut,_t>1?(O=w.x,z=w.y):_t>0&&(O+=G*_t,z+=tt*_t)),G=h.x-O,tt=h.y-z,C?G*G+tt*tt:new V(O,z)}function Gn(h){return!k(h[0])||typeof h[0][0]!="object"&&typeof h[0][0]<"u"}function u1(h){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Gn(h)}function yg(h,y){var w,C,O,z,G,tt,ut,_t;if(!h||h.length===0)throw new Error("latlngs not passed");Gn(h)||(console.warn("latlngs are not flat! Only the first ring will be used"),h=h[0]);var Lt=At([0,0]),Ft=wt(h),Ut=Ft.getNorthWest().distanceTo(Ft.getSouthWest())*Ft.getNorthEast().distanceTo(Ft.getNorthWest());Ut<1700&&(Lt=pg(h));var te=h.length,Ve=[];for(w=0;w<te;w++){var fn=At(h[w]);Ve.push(y.project(At([fn.lat-Lt.lat,fn.lng-Lt.lng])))}for(w=0,C=0;w<te-1;w++)C+=Ve[w].distanceTo(Ve[w+1])/2;if(C===0)_t=Ve[0];else for(w=0,z=0;w<te-1;w++)if(G=Ve[w],tt=Ve[w+1],O=G.distanceTo(tt),z+=O,z>C){ut=(z-C)/O,_t=[tt.x-ut*(tt.x-G.x),tt.y-ut*(tt.y-G.y)];break}var Zn=y.unproject(B(_t));return At([Zn.lat+Lt.lat,Zn.lng+Lt.lng])}var l1={__proto__:null,simplify:a1,pointToSegmentDistance:gg,closestPointOnSegment:kw,clipSegment:s1,_getEdgeIntersection:Lh,_getBitCode:Ls,_sqClosestPointOnSegment:zs,isFlat:Gn,_flat:u1,polylineCenter:yg},zh={project:function(h){return new V(h.lng,h.lat)},unproject:function(h){return new bt(h.y,h.x)},bounds:new J([-180,-90],[180,90])},Fh={R:6378137,R_MINOR:6356752314245179e-9,bounds:new J([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(h){var y=Math.PI/180,w=this.R,C=h.lat*y,O=this.R_MINOR/w,z=Math.sqrt(1-O*O),G=z*Math.sin(C),tt=Math.tan(Math.PI/4-C/2)/Math.pow((1-G)/(1+G),z/2);return C=-w*Math.log(Math.max(tt,1e-10)),new V(h.lng*y*w,C)},unproject:function(h){for(var y=180/Math.PI,w=this.R,C=this.R_MINOR/w,O=Math.sqrt(1-C*C),z=Math.exp(-h.y/w),G=Math.PI/2-2*Math.atan(z),tt=0,ut=.1,_t;tt<15&&Math.abs(ut)>1e-7;tt++)_t=O*Math.sin(G),_t=Math.pow((1-_t)/(1+_t),O/2),ut=Math.PI/2-2*Math.atan(z*_t)-G,G+=ut;return new bt(G*y,h.x*y/w)}},c1={__proto__:null,LonLat:zh,Mercator:Fh,SphericalMercator:Qt},Qu=r({},ae,{code:"EPSG:3395",projection:Fh,transformation:function(){var h=.5/(Math.PI*Fh.R);return xt(h,.5,-h,.5)}()}),f1=r({},ae,{code:"EPSG:4326",projection:zh,transformation:xt(1/180,1,-1/180,.5)}),Rw=r({},$e,{projection:zh,transformation:xt(1,0,-1,0),scale:function(h){return Math.pow(2,h)},zoom:function(h){return Math.log(h)/Math.LN2},distance:function(h,y){var w=y.lng-h.lng,C=y.lat-h.lat;return Math.sqrt(w*w+C*C)},infinite:!0});$e.Earth=ae,$e.EPSG3395=Qu,$e.EPSG3857=Je,$e.EPSG900913=ve,$e.EPSG4326=f1,$e.Simple=Rw;var Rr=X.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(h){return h.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(h){return h&&h.removeLayer(this),this},getPane:function(h){return this._map.getPane(h?this.options[h]||h:this.options.pane)},addInteractiveTarget:function(h){return this._map._targets[l(h)]=this,this},removeInteractiveTarget:function(h){return delete this._map._targets[l(h)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(h){var y=h.target;if(y.hasLayer(this)){if(this._map=y,this._zoomAnimated=y._zoomAnimated,this.getEvents){var w=this.getEvents();y.on(w,this),this.once("remove",function(){y.off(w,this)},this)}this.onAdd(y),this.fire("add"),y.fire("layeradd",{layer:this})}}});fe.include({addLayer:function(h){if(!h._layerAdd)throw new Error("The provided object is not a Layer.");var y=l(h);return this._layers[y]?this:(this._layers[y]=h,h._mapToAdd=this,h.beforeAdd&&h.beforeAdd(this),this.whenReady(h._layerAdd,h),this)},removeLayer:function(h){var y=l(h);return this._layers[y]?(this._loaded&&h.onRemove(this),delete this._layers[y],this._loaded&&(this.fire("layerremove",{layer:h}),h.fire("remove")),h._map=h._mapToAdd=null,this):this},hasLayer:function(h){return l(h)in this._layers},eachLayer:function(h,y){for(var w in this._layers)h.call(y,this._layers[w]);return this},_addLayers:function(h){h=h?k(h)?h:[h]:[];for(var y=0,w=h.length;y<w;y++)this.addLayer(h[y])},_addZoomLimit:function(h){(!isNaN(h.options.maxZoom)||!isNaN(h.options.minZoom))&&(this._zoomBoundLayers[l(h)]=h,this._updateZoomLevels())},_removeZoomLimit:function(h){var y=l(h);this._zoomBoundLayers[y]&&(delete this._zoomBoundLayers[y],this._updateZoomLevels())},_updateZoomLevels:function(){var h=1/0,y=-1/0,w=this._getZoomSpan();for(var C in this._zoomBoundLayers){var O=this._zoomBoundLayers[C].options;h=O.minZoom===void 0?h:Math.min(h,O.minZoom),y=O.maxZoom===void 0?y:Math.max(y,O.maxZoom)}this._layersMaxZoom=y===-1/0?void 0:y,this._layersMinZoom=h===1/0?void 0:h,w!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Fs=Rr.extend({initialize:function(h,y){x(this,y),this._layers={};var w,C;if(h)for(w=0,C=h.length;w<C;w++)this.addLayer(h[w])},addLayer:function(h){var y=this.getLayerId(h);return this._layers[y]=h,this._map&&this._map.addLayer(h),this},removeLayer:function(h){var y=h in this._layers?h:this.getLayerId(h);return this._map&&this._layers[y]&&this._map.removeLayer(this._layers[y]),delete this._layers[y],this},hasLayer:function(h){var y=typeof h=="number"?h:this.getLayerId(h);return y in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(h){var y=Array.prototype.slice.call(arguments,1),w,C;for(w in this._layers)C=this._layers[w],C[h]&&C[h].apply(C,y);return this},onAdd:function(h){this.eachLayer(h.addLayer,h)},onRemove:function(h){this.eachLayer(h.removeLayer,h)},eachLayer:function(h,y){for(var w in this._layers)h.call(y,this._layers[w]);return this},getLayer:function(h){return this._layers[h]},getLayers:function(){var h=[];return this.eachLayer(h.push,h),h},setZIndex:function(h){return this.invoke("setZIndex",h)},getLayerId:function(h){return l(h)}}),h1=function(h,y){return new Fs(h,y)},qi=Fs.extend({addLayer:function(h){return this.hasLayer(h)?this:(h.addEventParent(this),Fs.prototype.addLayer.call(this,h),this.fire("layeradd",{layer:h}))},removeLayer:function(h){return this.hasLayer(h)?(h in this._layers&&(h=this._layers[h]),h.removeEventParent(this),Fs.prototype.removeLayer.call(this,h),this.fire("layerremove",{layer:h})):this},setStyle:function(h){return this.invoke("setStyle",h)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var h=new ft;for(var y in this._layers){var w=this._layers[y];h.extend(w.getBounds?w.getBounds():w.getLatLng())}return h}}),Bc=function(h,y){return new qi(h,y)},Ku=W.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(h){x(this,h)},createIcon:function(h){return this._createIcon("icon",h)},createShadow:function(h){return this._createIcon("shadow",h)},_createIcon:function(h,y){var w=this._getIconUrl(h);if(!w){if(h==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var C=this._createImg(w,y&&y.tagName==="IMG"?y:null);return this._setIconStyles(C,h),(this.options.crossOrigin||this.options.crossOrigin==="")&&(C.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),C},_setIconStyles:function(h,y){var w=this.options,C=w[y+"Size"];typeof C=="number"&&(C=[C,C]);var O=B(C),z=B(y==="shadow"&&w.shadowAnchor||w.iconAnchor||O&&O.divideBy(2,!0));h.className="leaflet-marker-"+y+" "+(w.className||""),z&&(h.style.marginLeft=-z.x+"px",h.style.marginTop=-z.y+"px"),O&&(h.style.width=O.x+"px",h.style.height=O.y+"px")},_createImg:function(h,y){return y=y||document.createElement("img"),y.src=h,y},_getIconUrl:function(h){return qt.retina&&this.options[h+"RetinaUrl"]||this.options[h+"Url"]}});function Ph(h){return new Ku(h)}var Ju=Ku.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(h){return typeof Ju.imagePath!="string"&&(Ju.imagePath=this._detectIconPath()),(this.options.imagePath||Ju.imagePath)+Ku.prototype._getIconUrl.call(this,h)},_stripUrl:function(h){var y=function(w,C,O){var z=C.exec(w);return z&&z[O]};return h=y(h,/^url\((['"])?(.+)\1\)$/,2),h&&y(h,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var h=xe("div","leaflet-default-icon-path",document.body),y=ks(h,"background-image")||ks(h,"backgroundImage");if(document.body.removeChild(h),y=this._stripUrl(y),y)return y;var w=document.querySelector('link[href$="leaflet.css"]');return w?w.href.substring(0,w.href.length-11-1):""}}),vg=Dr.extend({initialize:function(h){this._marker=h},addHooks:function(){var h=this._marker._icon;this._draggable||(this._draggable=new Co(h,h,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),re(h,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&We(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(h){var y=this._marker,w=y._map,C=this._marker.options.autoPanSpeed,O=this._marker.options.autoPanPadding,z=Ao(y._icon),G=w.getPixelBounds(),tt=w.getPixelOrigin(),ut=lt(G.min._subtract(tt).add(O),G.max._subtract(tt).subtract(O));if(!ut.contains(z)){var _t=B((Math.max(ut.max.x,z.x)-ut.max.x)/(G.max.x-ut.max.x)-(Math.min(ut.min.x,z.x)-ut.min.x)/(G.min.x-ut.min.x),(Math.max(ut.max.y,z.y)-ut.max.y)/(G.max.y-ut.max.y)-(Math.min(ut.min.y,z.y)-ut.min.y)/(G.min.y-ut.min.y)).multiplyBy(C);w.panBy(_t,{animate:!1}),this._draggable._newPos._add(_t),this._draggable._startPos._add(_t),cn(y._icon,this._draggable._newPos),this._onDrag(h),this._panRequest=H(this._adjustPan.bind(this,h))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(h){this._marker.options.autoPan&&(et(this._panRequest),this._panRequest=H(this._adjustPan.bind(this,h)))},_onDrag:function(h){var y=this._marker,w=y._shadow,C=Ao(y._icon),O=y._map.layerPointToLatLng(C);w&&cn(w,C),y._latlng=O,h.latlng=O,h.oldLatLng=this._oldLatLng,y.fire("move",h).fire("drag",h)},_onDragEnd:function(h){et(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",h)}}),tl=Rr.extend({options:{icon:new Ju,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(h,y){x(this,y),this._latlng=At(h)},onAdd:function(h){this._zoomAnimated=this._zoomAnimated&&h.options.markerZoomAnimation,this._zoomAnimated&&h.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(h){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&h.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(h){var y=this._latlng;return this._latlng=At(h),this.update(),this.fire("move",{oldLatLng:y,latlng:this._latlng})},setZIndexOffset:function(h){return this.options.zIndexOffset=h,this.update()},getIcon:function(){return this.options.icon},setIcon:function(h){return this.options.icon=h,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var h=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(h)}return this},_initIcon:function(){var h=this.options,y="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),w=h.icon.createIcon(this._icon),C=!1;w!==this._icon&&(this._icon&&this._removeIcon(),C=!0,h.title&&(w.title=h.title),w.tagName==="IMG"&&(w.alt=h.alt||"")),re(w,y),h.keyboard&&(w.tabIndex="0",w.setAttribute("role","button")),this._icon=w,h.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&ne(w,"focus",this._panOnFocus,this);var O=h.icon.createShadow(this._shadow),z=!1;O!==this._shadow&&(this._removeShadow(),z=!0),O&&(re(O,y),O.alt=""),this._shadow=O,h.opacity<1&&this._updateOpacity(),C&&this.getPane().appendChild(this._icon),this._initInteraction(),O&&z&&this.getPane(h.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Se(this._icon,"focus",this._panOnFocus,this),Xe(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&Xe(this._shadow),this._shadow=null},_setPos:function(h){this._icon&&cn(this._icon,h),this._shadow&&cn(this._shadow,h),this._zIndex=h.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(h){this._icon&&(this._icon.style.zIndex=this._zIndex+h)},_animateZoom:function(h){var y=this._map._latLngToNewLayerPoint(this._latlng,h.zoom,h.center).round();this._setPos(y)},_initInteraction:function(){if(this.options.interactive&&(re(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),vg)){var h=this.options.draggable;this.dragging&&(h=this.dragging.enabled(),this.dragging.disable()),this.dragging=new vg(this),h&&this.dragging.enable()}},setOpacity:function(h){return this.options.opacity=h,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var h=this.options.opacity;this._icon&&Ei(this._icon,h),this._shadow&&Ei(this._shadow,h)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var h=this._map;if(h){var y=this.options.icon.options,w=y.iconSize?B(y.iconSize):B(0,0),C=y.iconAnchor?B(y.iconAnchor):B(0,0);h.panInside(this._latlng,{paddingTopLeft:C,paddingBottomRight:w.subtract(C)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function _g(h,y){return new tl(h,y)}var Ba=Rr.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(h){this._renderer=h.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(h){return x(this,h),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&h&&Object.prototype.hasOwnProperty.call(h,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Uc=Ba.extend({options:{fill:!0,radius:10},initialize:function(h,y){x(this,y),this._latlng=At(h),this._radius=this.options.radius},setLatLng:function(h){var y=this._latlng;return this._latlng=At(h),this.redraw(),this.fire("move",{oldLatLng:y,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(h){return this.options.radius=this._radius=h,this.redraw()},getRadius:function(){return this._radius},setStyle:function(h){var y=h&&h.radius||this._radius;return Ba.prototype.setStyle.call(this,h),this.setRadius(y),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var h=this._radius,y=this._radiusY||h,w=this._clickTolerance(),C=[h+w,y+w];this._pxBounds=new J(this._point.subtract(C),this._point.add(C))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(h){return h.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function d1(h,y){return new Uc(h,y)}var bg=Uc.extend({initialize:function(h,y,w){if(typeof y=="number"&&(y=r({},w,{radius:y})),x(this,y),this._latlng=At(h),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(h){return this._mRadius=h,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var h=[this._radius,this._radiusY||this._radius];return new ft(this._map.layerPointToLatLng(this._point.subtract(h)),this._map.layerPointToLatLng(this._point.add(h)))},setStyle:Ba.prototype.setStyle,_project:function(){var h=this._latlng.lng,y=this._latlng.lat,w=this._map,C=w.options.crs;if(C.distance===ae.distance){var O=Math.PI/180,z=this._mRadius/ae.R/O,G=w.project([y+z,h]),tt=w.project([y-z,h]),ut=G.add(tt).divideBy(2),_t=w.unproject(ut).lat,Lt=Math.acos((Math.cos(z*O)-Math.sin(y*O)*Math.sin(_t*O))/(Math.cos(y*O)*Math.cos(_t*O)))/O;(isNaN(Lt)||Lt===0)&&(Lt=z/Math.cos(Math.PI/180*y)),this._point=ut.subtract(w.getPixelOrigin()),this._radius=isNaN(Lt)?0:ut.x-w.project([_t,h-Lt]).x,this._radiusY=ut.y-G.y}else{var Ft=C.unproject(C.project(this._latlng).subtract([this._mRadius,0]));this._point=w.latLngToLayerPoint(this._latlng),this._radius=this._point.x-w.latLngToLayerPoint(Ft).x}this._updateBounds()}});function Nw(h,y,w){return new bg(h,y,w)}var Ua=Ba.extend({options:{smoothFactor:1,noClip:!1},initialize:function(h,y){x(this,y),this._setLatLngs(h)},getLatLngs:function(){return this._latlngs},setLatLngs:function(h){return this._setLatLngs(h),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(h){for(var y=1/0,w=null,C=zs,O,z,G=0,tt=this._parts.length;G<tt;G++)for(var ut=this._parts[G],_t=1,Lt=ut.length;_t<Lt;_t++){O=ut[_t-1],z=ut[_t];var Ft=C(h,O,z,!0);Ft<y&&(y=Ft,w=C(h,O,z))}return w&&(w.distance=Math.sqrt(y)),w},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return yg(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(h,y){return y=y||this._defaultShape(),h=At(h),y.push(h),this._bounds.extend(h),this.redraw()},_setLatLngs:function(h){this._bounds=new ft,this._latlngs=this._convertLatLngs(h)},_defaultShape:function(){return Gn(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(h){for(var y=[],w=Gn(h),C=0,O=h.length;C<O;C++)w?(y[C]=At(h[C]),this._bounds.extend(y[C])):y[C]=this._convertLatLngs(h[C]);return y},_project:function(){var h=new J;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,h),this._bounds.isValid()&&h.isValid()&&(this._rawPxBounds=h,this._updateBounds())},_updateBounds:function(){var h=this._clickTolerance(),y=new V(h,h);this._rawPxBounds&&(this._pxBounds=new J([this._rawPxBounds.min.subtract(y),this._rawPxBounds.max.add(y)]))},_projectLatlngs:function(h,y,w){var C=h[0]instanceof bt,O=h.length,z,G;if(C){for(G=[],z=0;z<O;z++)G[z]=this._map.latLngToLayerPoint(h[z]),w.extend(G[z]);y.push(G)}else for(z=0;z<O;z++)this._projectLatlngs(h[z],y,w)},_clipPoints:function(){var h=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(h))){if(this.options.noClip){this._parts=this._rings;return}var y=this._parts,w,C,O,z,G,tt,ut;for(w=0,O=0,z=this._rings.length;w<z;w++)for(ut=this._rings[w],C=0,G=ut.length;C<G-1;C++)tt=s1(ut[C],ut[C+1],h,C,!0),tt&&(y[O]=y[O]||[],y[O].push(tt[0]),(tt[1]!==ut[C+1]||C===G-2)&&(y[O].push(tt[1]),O++))}},_simplifyPoints:function(){for(var h=this._parts,y=this.options.smoothFactor,w=0,C=h.length;w<C;w++)h[w]=a1(h[w],y)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(h,y){var w,C,O,z,G,tt,ut=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(h))return!1;for(w=0,z=this._parts.length;w<z;w++)for(tt=this._parts[w],C=0,G=tt.length,O=G-1;C<G;O=C++)if(!(!y&&C===0)&&gg(h,tt[O],tt[C])<=ut)return!0;return!1}});function Lw(h,y){return new Ua(h,y)}Ua._flat=u1;var el=Ua.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Nh(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(h){var y=Ua.prototype._convertLatLngs.call(this,h),w=y.length;return w>=2&&y[0]instanceof bt&&y[0].equals(y[w-1])&&y.pop(),y},_setLatLngs:function(h){Ua.prototype._setLatLngs.call(this,h),Gn(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Gn(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var h=this._renderer._bounds,y=this.options.weight,w=new V(y,y);if(h=new J(h.min.subtract(w),h.max.add(w)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(h))){if(this.options.noClip){this._parts=this._rings;return}for(var C=0,O=this._rings.length,z;C<O;C++)z=r1(this._rings[C],h,!0),z.length&&this._parts.push(z)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(h){var y=!1,w,C,O,z,G,tt,ut,_t;if(!this._pxBounds||!this._pxBounds.contains(h))return!1;for(z=0,ut=this._parts.length;z<ut;z++)for(w=this._parts[z],G=0,_t=w.length,tt=_t-1;G<_t;tt=G++)C=w[G],O=w[tt],C.y>h.y!=O.y>h.y&&h.x<(O.x-C.x)*(h.y-C.y)/(O.y-C.y)+C.x&&(y=!y);return y||Ua.prototype._containsPoint.call(this,h,!0)}});function ji(h,y){return new el(h,y)}var Hi=qi.extend({initialize:function(h,y){x(this,y),this._layers={},h&&this.addData(h)},addData:function(h){var y=k(h)?h:h.features,w,C,O;if(y){for(w=0,C=y.length;w<C;w++)O=y[w],(O.geometries||O.geometry||O.features||O.coordinates)&&this.addData(O);return this}var z=this.options;if(z.filter&&!z.filter(h))return this;var G=Ic(h,z);return G?(G.feature=nl(h),G.defaultOptions=G.options,this.resetStyle(G),z.onEachFeature&&z.onEachFeature(h,G),this.addLayer(G)):this},resetStyle:function(h){return h===void 0?this.eachLayer(this.resetStyle,this):(h.options=r({},h.defaultOptions),this._setLayerStyle(h,this.options.style),this)},setStyle:function(h){return this.eachLayer(function(y){this._setLayerStyle(y,h)},this)},_setLayerStyle:function(h,y){h.setStyle&&(typeof y=="function"&&(y=y(h.feature)),h.setStyle(y))}});function Ic(h,y){var w=h.type==="Feature"?h.geometry:h,C=w?w.coordinates:null,O=[],z=y&&y.pointToLayer,G=y&&y.coordsToLatLng||Bh,tt,ut,_t,Lt;if(!C&&!w)return null;switch(w.type){case"Point":return tt=G(C),xg(z,h,tt,y);case"MultiPoint":for(_t=0,Lt=C.length;_t<Lt;_t++)tt=G(C[_t]),O.push(xg(z,h,tt,y));return new qi(O);case"LineString":case"MultiLineString":return ut=qc(C,w.type==="LineString"?0:1,G),new Ua(ut,y);case"Polygon":case"MultiPolygon":return ut=qc(C,w.type==="Polygon"?1:2,G),new el(ut,y);case"GeometryCollection":for(_t=0,Lt=w.geometries.length;_t<Lt;_t++){var Ft=Ic({geometry:w.geometries[_t],type:"Feature",properties:h.properties},y);Ft&&O.push(Ft)}return new qi(O);case"FeatureCollection":for(_t=0,Lt=w.features.length;_t<Lt;_t++){var Ut=Ic(w.features[_t],y);Ut&&O.push(Ut)}return new qi(O);default:throw new Error("Invalid GeoJSON object.")}}function xg(h,y,w,C){return h?h(y,w):new tl(w,C&&C.markersInheritOptions&&C)}function Bh(h){return new bt(h[1],h[0],h[2])}function qc(h,y,w){for(var C=[],O=0,z=h.length,G;O<z;O++)G=y?qc(h[O],y-1,w):(w||Bh)(h[O]),C.push(G);return C}function jc(h,y){return h=At(h),h.alt!==void 0?[m(h.lng,y),m(h.lat,y),m(h.alt,y)]:[m(h.lng,y),m(h.lat,y)]}function Uh(h,y,w,C){for(var O=[],z=0,G=h.length;z<G;z++)O.push(y?Uh(h[z],Gn(h[z])?0:y-1,w,C):jc(h[z],C));return!y&&w&&O.length>0&&O.push(O[0].slice()),O}function Nr(h,y){return h.feature?r({},h.feature,{geometry:y}):nl(y)}function nl(h){return h.type==="Feature"||h.type==="FeatureCollection"?h:{type:"Feature",properties:{},geometry:h}}var Ps={toGeoJSON:function(h){return Nr(this,{type:"Point",coordinates:jc(this.getLatLng(),h)})}};tl.include(Ps),bg.include(Ps),Uc.include(Ps),Ua.include({toGeoJSON:function(h){var y=!Gn(this._latlngs),w=Uh(this._latlngs,y?1:0,!1,h);return Nr(this,{type:(y?"Multi":"")+"LineString",coordinates:w})}}),el.include({toGeoJSON:function(h){var y=!Gn(this._latlngs),w=y&&!Gn(this._latlngs[0]),C=Uh(this._latlngs,w?2:y?1:0,!0,h);return y||(C=[C]),Nr(this,{type:(w?"Multi":"")+"Polygon",coordinates:C})}}),Fs.include({toMultiPoint:function(h){var y=[];return this.eachLayer(function(w){y.push(w.toGeoJSON(h).geometry.coordinates)}),Nr(this,{type:"MultiPoint",coordinates:y})},toGeoJSON:function(h){var y=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(y==="MultiPoint")return this.toMultiPoint(h);var w=y==="GeometryCollection",C=[];return this.eachLayer(function(O){if(O.toGeoJSON){var z=O.toGeoJSON(h);if(w)C.push(z.geometry);else{var G=nl(z);G.type==="FeatureCollection"?C.push.apply(C,G.features):C.push(G)}}}),w?Nr(this,{geometries:C,type:"GeometryCollection"}):{type:"FeatureCollection",features:C}}});function Ih(h,y){return new Hi(h,y)}var p1=Ih,la=Rr.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(h,y,w){this._url=h,this._bounds=wt(y),x(this,w)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(re(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){Xe(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(h){return this.options.opacity=h,this._image&&this._updateOpacity(),this},setStyle:function(h){return h.opacity&&this.setOpacity(h.opacity),this},bringToFront:function(){return this._map&&Os(this._image),this},bringToBack:function(){return this._map&&qu(this._image),this},setUrl:function(h){return this._url=h,this._image&&(this._image.src=h),this},setBounds:function(h){return this._bounds=wt(h),this._map&&this._reset(),this},getEvents:function(){var h={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(h.zoomanim=this._animateZoom),h},setZIndex:function(h){return this.options.zIndex=h,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var h=this._url.tagName==="IMG",y=this._image=h?this._url:xe("img");if(re(y,"leaflet-image-layer"),this._zoomAnimated&&re(y,"leaflet-zoom-animated"),this.options.className&&re(y,this.options.className),y.onselectstart=p,y.onmousemove=p,y.onload=o(this.fire,this,"load"),y.onerror=o(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(y.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),h){this._url=y.src;return}y.src=this._url,y.alt=this.options.alt},_animateZoom:function(h){var y=this._map.getZoomScale(h.zoom),w=this._map._latLngBoundsToNewLayerBounds(this._bounds,h.zoom,h.center).min;hr(this._image,w,y)},_reset:function(){var h=this._image,y=new J(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),w=y.getSize();cn(h,y.min),h.style.width=w.x+"px",h.style.height=w.y+"px"},_updateOpacity:function(){Ei(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var h=this.options.errorOverlayUrl;h&&this._url!==h&&(this._url=h,this._image.src=h)},getCenter:function(){return this._bounds.getCenter()}}),il=function(h,y,w){return new la(h,y,w)},qh=la.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var h=this._url.tagName==="VIDEO",y=this._image=h?this._url:xe("video");if(re(y,"leaflet-image-layer"),this._zoomAnimated&&re(y,"leaflet-zoom-animated"),this.options.className&&re(y,this.options.className),y.onselectstart=p,y.onmousemove=p,y.onloadeddata=o(this.fire,this,"load"),h){for(var w=y.getElementsByTagName("source"),C=[],O=0;O<w.length;O++)C.push(w[O].src);this._url=w.length>0?C:[y.src];return}k(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(y.style,"objectFit")&&(y.style.objectFit="fill"),y.autoplay=!!this.options.autoplay,y.loop=!!this.options.loop,y.muted=!!this.options.muted,y.playsInline=!!this.options.playsInline;for(var z=0;z<this._url.length;z++){var G=xe("source");G.src=this._url[z],y.appendChild(G)}}});function g1(h,y,w){return new qh(h,y,w)}var Mo=la.extend({_initImage:function(){var h=this._image=this._url;re(h,"leaflet-image-layer"),this._zoomAnimated&&re(h,"leaflet-zoom-animated"),this.options.className&&re(h,this.options.className),h.onselectstart=p,h.onmousemove=p}});function m1(h,y,w){return new Mo(h,y,w)}var Lr=Rr.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(h,y){h&&(h instanceof bt||k(h))?(this._latlng=At(h),x(this,y)):(x(this,h),this._source=y),this.options.content&&(this._content=this.options.content)},openOn:function(h){return h=arguments.length?h:this._source._map,h.hasLayer(this)||h.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(h){return this._map?this.close():(arguments.length?this._source=h:h=this._source,this._prepareOpen(),this.openOn(h._map)),this},onAdd:function(h){this._zoomAnimated=h._zoomAnimated,this._container||this._initLayout(),h._fadeAnimated&&Ei(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),h._fadeAnimated&&Ei(this._container,1),this.bringToFront(),this.options.interactive&&(re(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(h){h._fadeAnimated?(Ei(this._container,0),this._removeTimeout=setTimeout(o(Xe,void 0,this._container),200)):Xe(this._container),this.options.interactive&&(We(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(h){return this._latlng=At(h),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(h){return this._content=h,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var h={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(h.zoomanim=this._animateZoom),h},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Os(this._container),this},bringToBack:function(){return this._map&&qu(this._container),this},_prepareOpen:function(h){var y=this._source;if(!y._map)return!1;if(y instanceof qi){y=null;var w=this._source._layers;for(var C in w)if(w[C]._map){y=w[C];break}if(!y)return!1;this._source=y}if(!h)if(y.getCenter)h=y.getCenter();else if(y.getLatLng)h=y.getLatLng();else if(y.getBounds)h=y.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(h),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var h=this._contentNode,y=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof y=="string")h.innerHTML=y;else{for(;h.hasChildNodes();)h.removeChild(h.firstChild);h.appendChild(y)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var h=this._map.latLngToLayerPoint(this._latlng),y=B(this.options.offset),w=this._getAnchor();this._zoomAnimated?cn(this._container,h.add(w)):y=y.add(h).add(w);var C=this._containerBottom=-y.y,O=this._containerLeft=-Math.round(this._containerWidth/2)+y.x;this._container.style.bottom=C+"px",this._container.style.left=O+"px"}},_getAnchor:function(){return[0,0]}});fe.include({_initOverlay:function(h,y,w,C){var O=y;return O instanceof h||(O=new h(C).setContent(y)),w&&O.setLatLng(w),O}}),Rr.include({_initOverlay:function(h,y,w,C){var O=w;return O instanceof h?(x(O,C),O._source=this):(O=y&&!C?y:new h(C,this),O.setContent(w)),O}});var Hc=Lr.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(h){return h=arguments.length?h:this._source._map,!h.hasLayer(this)&&h._popup&&h._popup.options.autoClose&&h.removeLayer(h._popup),h._popup=this,Lr.prototype.openOn.call(this,h)},onAdd:function(h){Lr.prototype.onAdd.call(this,h),h.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Ba||this._source.on("preclick",Pa))},onRemove:function(h){Lr.prototype.onRemove.call(this,h),h.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Ba||this._source.off("preclick",Pa))},getEvents:function(){var h=Lr.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(h.preclick=this.close),this.options.keepInView&&(h.moveend=this._adjustPan),h},_initLayout:function(){var h="leaflet-popup",y=this._container=xe("div",h+" "+(this.options.className||"")+" leaflet-zoom-animated"),w=this._wrapper=xe("div",h+"-content-wrapper",y);if(this._contentNode=xe("div",h+"-content",w),Wu(y),Xu(this._contentNode),ne(y,"contextmenu",Pa),this._tipContainer=xe("div",h+"-tip-container",y),this._tip=xe("div",h+"-tip",this._tipContainer),this.options.closeButton){var C=this._closeButton=xe("a",h+"-close-button",y);C.setAttribute("role","button"),C.setAttribute("aria-label","Close popup"),C.href="#close",C.innerHTML='<span aria-hidden="true">&#215;</span>',ne(C,"click",function(O){mn(O),this.close()},this)}},_updateLayout:function(){var h=this._contentNode,y=h.style;y.width="",y.whiteSpace="nowrap";var w=h.offsetWidth;w=Math.min(w,this.options.maxWidth),w=Math.max(w,this.options.minWidth),y.width=w+1+"px",y.whiteSpace="",y.height="";var C=h.offsetHeight,O=this.options.maxHeight,z="leaflet-popup-scrolled";O&&C>O?(y.height=O+"px",re(h,z)):We(h,z),this._containerWidth=this._container.offsetWidth},_animateZoom:function(h){var y=this._map._latLngToNewLayerPoint(this._latlng,h.zoom,h.center),w=this._getAnchor();cn(this._container,y.add(w))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var h=this._map,y=parseInt(ks(this._container,"marginBottom"),10)||0,w=this._container.offsetHeight+y,C=this._containerWidth,O=new V(this._containerLeft,-w-this._containerBottom);O._add(Ao(this._container));var z=h.layerPointToContainerPoint(O),G=B(this.options.autoPanPadding),tt=B(this.options.autoPanPaddingTopLeft||G),ut=B(this.options.autoPanPaddingBottomRight||G),_t=h.getSize(),Lt=0,Ft=0;z.x+C+ut.x>_t.x&&(Lt=z.x+C-_t.x+ut.x),z.x-Lt-tt.x<0&&(Lt=z.x-tt.x),z.y+w+ut.y>_t.y&&(Ft=z.y+w-_t.y+ut.y),z.y-Ft-tt.y<0&&(Ft=z.y-tt.y),(Lt||Ft)&&(this.options.keepInView&&(this._autopanning=!0),h.fire("autopanstart").panBy([Lt,Ft]))}},_getAnchor:function(){return B(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),zw=function(h,y){return new Hc(h,y)};fe.mergeOptions({closePopupOnClick:!0}),fe.include({openPopup:function(h,y,w){return this._initOverlay(Hc,h,y,w).openOn(this),this},closePopup:function(h){return h=arguments.length?h:this._popup,h&&h.close(),this}}),Rr.include({bindPopup:function(h,y){return this._popup=this._initOverlay(Hc,this._popup,h,y),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(h){return this._popup&&(this instanceof qi||(this._popup._source=this),this._popup._prepareOpen(h||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(h){return this._popup&&this._popup.setContent(h),this},getPopup:function(){return this._popup},_openPopup:function(h){if(!(!this._popup||!this._map)){ua(h);var y=h.layer||h.target;if(this._popup._source===y&&!(y instanceof Ba)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(h.latlng);return}this._popup._source=y,this.openPopup(h.latlng)}},_movePopup:function(h){this._popup.setLatLng(h.latlng)},_onKeyPress:function(h){h.originalEvent.keyCode===13&&this._openPopup(h)}});var jh=Lr.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(h){Lr.prototype.onAdd.call(this,h),this.setOpacity(this.options.opacity),h.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(h){Lr.prototype.onRemove.call(this,h),h.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var h=Lr.prototype.getEvents.call(this);return this.options.permanent||(h.preclick=this.close),h},_initLayout:function(){var h="leaflet-tooltip",y=h+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=xe("div",y),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+l(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(h){var y,w,C=this._map,O=this._container,z=C.latLngToContainerPoint(C.getCenter()),G=C.layerPointToContainerPoint(h),tt=this.options.direction,ut=O.offsetWidth,_t=O.offsetHeight,Lt=B(this.options.offset),Ft=this._getAnchor();tt==="top"?(y=ut/2,w=_t):tt==="bottom"?(y=ut/2,w=0):tt==="center"?(y=ut/2,w=_t/2):tt==="right"?(y=0,w=_t/2):tt==="left"?(y=ut,w=_t/2):G.x<z.x?(tt="right",y=0,w=_t/2):(tt="left",y=ut+(Lt.x+Ft.x)*2,w=_t/2),h=h.subtract(B(y,w,!0)).add(Lt).add(Ft),We(O,"leaflet-tooltip-right"),We(O,"leaflet-tooltip-left"),We(O,"leaflet-tooltip-top"),We(O,"leaflet-tooltip-bottom"),re(O,"leaflet-tooltip-"+tt),cn(O,h)},_updatePosition:function(){var h=this._map.latLngToLayerPoint(this._latlng);this._setPosition(h)},setOpacity:function(h){this.options.opacity=h,this._container&&Ei(this._container,h)},_animateZoom:function(h){var y=this._map._latLngToNewLayerPoint(this._latlng,h.zoom,h.center);this._setPosition(y)},_getAnchor:function(){return B(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),Fw=function(h,y){return new jh(h,y)};fe.include({openTooltip:function(h,y,w){return this._initOverlay(jh,h,y,w).openOn(this),this},closeTooltip:function(h){return h.close(),this}}),Rr.include({bindTooltip:function(h,y){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(jh,this._tooltip,h,y),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(h){if(!(!h&&this._tooltipHandlersAdded)){var y=h?"off":"on",w={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?w.add=this._openTooltip:(w.mouseover=this._openTooltip,w.mouseout=this.closeTooltip,w.click=this._openTooltip,this._map?this._addFocusListeners():w.add=this._addFocusListeners),this._tooltip.options.sticky&&(w.mousemove=this._moveTooltip),this[y](w),this._tooltipHandlersAdded=!h}},openTooltip:function(h){return this._tooltip&&(this instanceof qi||(this._tooltip._source=this),this._tooltip._prepareOpen(h)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(h){return this._tooltip&&this._tooltip.setContent(h),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(h){var y=typeof h.getElement=="function"&&h.getElement();y&&(ne(y,"focus",function(){this._tooltip._source=h,this.openTooltip()},this),ne(y,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(h){var y=typeof h.getElement=="function"&&h.getElement();y&&y.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(h){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var y=this;this._map.once("moveend",function(){y._openOnceFlag=!1,y._openTooltip(h)});return}this._tooltip._source=h.layer||h.target,this.openTooltip(this._tooltip.options.sticky?h.latlng:void 0)}},_moveTooltip:function(h){var y=h.latlng,w,C;this._tooltip.options.sticky&&h.originalEvent&&(w=this._map.mouseEventToContainerPoint(h.originalEvent),C=this._map.containerPointToLayerPoint(w),y=this._map.layerPointToLatLng(C)),this._tooltip.setLatLng(y)}});var wg=Ku.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(h){var y=h&&h.tagName==="DIV"?h:document.createElement("div"),w=this.options;if(w.html instanceof Element?(oi(y),y.appendChild(w.html)):y.innerHTML=w.html!==!1?w.html:"",w.bgPos){var C=B(w.bgPos);y.style.backgroundPosition=-C.x+"px "+-C.y+"px"}return this._setIconStyles(y,"icon"),y},createShadow:function(){return null}});function y1(h){return new wg(h)}Ku.Default=Ju;var Bs=Rr.extend({options:{tileSize:256,opacity:1,updateWhenIdle:qt.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(h){x(this,h)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(h){h._addZoomLimit(this)},onRemove:function(h){this._removeAllTiles(),Xe(this._container),h._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Os(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(qu(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(h){return this.options.opacity=h,this._updateOpacity(),this},setZIndex:function(h){return this.options.zIndex=h,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var h=this._clampZoom(this._map.getZoom());h!==this._tileZoom&&(this._tileZoom=h,this._updateLevels()),this._update()}return this},getEvents:function(){var h={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=f(this._onMoveEnd,this.options.updateInterval,this)),h.move=this._onMove),this._zoomAnimated&&(h.zoomanim=this._animateZoom),h},createTile:function(){return document.createElement("div")},getTileSize:function(){var h=this.options.tileSize;return h instanceof V?h:new V(h,h)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(h){for(var y=this.getPane().children,w=-h(-1/0,1/0),C=0,O=y.length,z;C<O;C++)z=y[C].style.zIndex,y[C]!==this._container&&z&&(w=h(w,+z));isFinite(w)&&(this.options.zIndex=w+h(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!qt.ielt9){Ei(this._container,this.options.opacity);var h=+new Date,y=!1,w=!1;for(var C in this._tiles){var O=this._tiles[C];if(!(!O.current||!O.loaded)){var z=Math.min(1,(h-O.loaded)/200);Ei(O.el,z),z<1?y=!0:(O.active?w=!0:this._onOpaqueTile(O),O.active=!0)}}w&&!this._noPrune&&this._pruneTiles(),y&&(et(this._fadeFrame),this._fadeFrame=H(this._updateOpacity,this))}},_onOpaqueTile:p,_initContainer:function(){this._container||(this._container=xe("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var h=this._tileZoom,y=this.options.maxZoom;if(h!==void 0){for(var w in this._levels)w=Number(w),this._levels[w].el.children.length||w===h?(this._levels[w].el.style.zIndex=y-Math.abs(h-w),this._onUpdateLevel(w)):(Xe(this._levels[w].el),this._removeTilesAtZoom(w),this._onRemoveLevel(w),delete this._levels[w]);var C=this._levels[h],O=this._map;return C||(C=this._levels[h]={},C.el=xe("div","leaflet-tile-container leaflet-zoom-animated",this._container),C.el.style.zIndex=y,C.origin=O.project(O.unproject(O.getPixelOrigin()),h).round(),C.zoom=h,this._setZoomTransform(C,O.getCenter(),O.getZoom()),p(C.el.offsetWidth),this._onCreateLevel(C)),this._level=C,C}},_onUpdateLevel:p,_onRemoveLevel:p,_onCreateLevel:p,_pruneTiles:function(){if(this._map){var h,y,w=this._map.getZoom();if(w>this.options.maxZoom||w<this.options.minZoom){this._removeAllTiles();return}for(h in this._tiles)y=this._tiles[h],y.retain=y.current;for(h in this._tiles)if(y=this._tiles[h],y.current&&!y.active){var C=y.coords;this._retainParent(C.x,C.y,C.z,C.z-5)||this._retainChildren(C.x,C.y,C.z,C.z+2)}for(h in this._tiles)this._tiles[h].retain||this._removeTile(h)}},_removeTilesAtZoom:function(h){for(var y in this._tiles)this._tiles[y].coords.z===h&&this._removeTile(y)},_removeAllTiles:function(){for(var h in this._tiles)this._removeTile(h)},_invalidateAll:function(){for(var h in this._levels)Xe(this._levels[h].el),this._onRemoveLevel(Number(h)),delete this._levels[h];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(h,y,w,C){var O=Math.floor(h/2),z=Math.floor(y/2),G=w-1,tt=new V(+O,+z);tt.z=+G;var ut=this._tileCoordsToKey(tt),_t=this._tiles[ut];return _t&&_t.active?(_t.retain=!0,!0):(_t&&_t.loaded&&(_t.retain=!0),G>C?this._retainParent(O,z,G,C):!1)},_retainChildren:function(h,y,w,C){for(var O=2*h;O<2*h+2;O++)for(var z=2*y;z<2*y+2;z++){var G=new V(O,z);G.z=w+1;var tt=this._tileCoordsToKey(G),ut=this._tiles[tt];if(ut&&ut.active){ut.retain=!0;continue}else ut&&ut.loaded&&(ut.retain=!0);w+1<C&&this._retainChildren(O,z,w+1,C)}},_resetView:function(h){var y=h&&(h.pinch||h.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),y,y)},_animateZoom:function(h){this._setView(h.center,h.zoom,!0,h.noUpdate)},_clampZoom:function(h){var y=this.options;return y.minNativeZoom!==void 0&&h<y.minNativeZoom?y.minNativeZoom:y.maxNativeZoom!==void 0&&y.maxNativeZoom<h?y.maxNativeZoom:h},_setView:function(h,y,w,C){var O=Math.round(y);this.options.maxZoom!==void 0&&O>this.options.maxZoom||this.options.minZoom!==void 0&&O<this.options.minZoom?O=void 0:O=this._clampZoom(O);var z=this.options.updateWhenZooming&&O!==this._tileZoom;(!C||z)&&(this._tileZoom=O,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),O!==void 0&&this._update(h),w||this._pruneTiles(),this._noPrune=!!w),this._setZoomTransforms(h,y)},_setZoomTransforms:function(h,y){for(var w in this._levels)this._setZoomTransform(this._levels[w],h,y)},_setZoomTransform:function(h,y,w){var C=this._map.getZoomScale(w,h.zoom),O=h.origin.multiplyBy(C).subtract(this._map._getNewPixelOrigin(y,w)).round();qt.any3d?hr(h.el,O,C):cn(h.el,O)},_resetGrid:function(){var h=this._map,y=h.options.crs,w=this._tileSize=this.getTileSize(),C=this._tileZoom,O=this._map.getPixelWorldBounds(this._tileZoom);O&&(this._globalTileRange=this._pxBoundsToTileRange(O)),this._wrapX=y.wrapLng&&!this.options.noWrap&&[Math.floor(h.project([0,y.wrapLng[0]],C).x/w.x),Math.ceil(h.project([0,y.wrapLng[1]],C).x/w.y)],this._wrapY=y.wrapLat&&!this.options.noWrap&&[Math.floor(h.project([y.wrapLat[0],0],C).y/w.x),Math.ceil(h.project([y.wrapLat[1],0],C).y/w.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(h){var y=this._map,w=y._animatingZoom?Math.max(y._animateToZoom,y.getZoom()):y.getZoom(),C=y.getZoomScale(w,this._tileZoom),O=y.project(h,this._tileZoom).floor(),z=y.getSize().divideBy(C*2);return new J(O.subtract(z),O.add(z))},_update:function(h){var y=this._map;if(y){var w=this._clampZoom(y.getZoom());if(h===void 0&&(h=y.getCenter()),this._tileZoom!==void 0){var C=this._getTiledPixelBounds(h),O=this._pxBoundsToTileRange(C),z=O.getCenter(),G=[],tt=this.options.keepBuffer,ut=new J(O.getBottomLeft().subtract([tt,-tt]),O.getTopRight().add([tt,-tt]));if(!(isFinite(O.min.x)&&isFinite(O.min.y)&&isFinite(O.max.x)&&isFinite(O.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var _t in this._tiles){var Lt=this._tiles[_t].coords;(Lt.z!==this._tileZoom||!ut.contains(new V(Lt.x,Lt.y)))&&(this._tiles[_t].current=!1)}if(Math.abs(w-this._tileZoom)>1){this._setView(h,w);return}for(var Ft=O.min.y;Ft<=O.max.y;Ft++)for(var Ut=O.min.x;Ut<=O.max.x;Ut++){var te=new V(Ut,Ft);if(te.z=this._tileZoom,!!this._isValidTile(te)){var Ve=this._tiles[this._tileCoordsToKey(te)];Ve?Ve.current=!0:G.push(te)}}if(G.sort(function(Zn,dr){return Zn.distanceTo(z)-dr.distanceTo(z)}),G.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var fn=document.createDocumentFragment();for(Ut=0;Ut<G.length;Ut++)this._addTile(G[Ut],fn);this._level.el.appendChild(fn)}}}},_isValidTile:function(h){var y=this._map.options.crs;if(!y.infinite){var w=this._globalTileRange;if(!y.wrapLng&&(h.x<w.min.x||h.x>w.max.x)||!y.wrapLat&&(h.y<w.min.y||h.y>w.max.y))return!1}if(!this.options.bounds)return!0;var C=this._tileCoordsToBounds(h);return wt(this.options.bounds).overlaps(C)},_keyToBounds:function(h){return this._tileCoordsToBounds(this._keyToTileCoords(h))},_tileCoordsToNwSe:function(h){var y=this._map,w=this.getTileSize(),C=h.scaleBy(w),O=C.add(w),z=y.unproject(C,h.z),G=y.unproject(O,h.z);return[z,G]},_tileCoordsToBounds:function(h){var y=this._tileCoordsToNwSe(h),w=new ft(y[0],y[1]);return this.options.noWrap||(w=this._map.wrapLatLngBounds(w)),w},_tileCoordsToKey:function(h){return h.x+":"+h.y+":"+h.z},_keyToTileCoords:function(h){var y=h.split(":"),w=new V(+y[0],+y[1]);return w.z=+y[2],w},_removeTile:function(h){var y=this._tiles[h];y&&(Xe(y.el),delete this._tiles[h],this.fire("tileunload",{tile:y.el,coords:this._keyToTileCoords(h)}))},_initTile:function(h){re(h,"leaflet-tile");var y=this.getTileSize();h.style.width=y.x+"px",h.style.height=y.y+"px",h.onselectstart=p,h.onmousemove=p,qt.ielt9&&this.options.opacity<1&&Ei(h,this.options.opacity)},_addTile:function(h,y){var w=this._getTilePos(h),C=this._tileCoordsToKey(h),O=this.createTile(this._wrapCoords(h),o(this._tileReady,this,h));this._initTile(O),this.createTile.length<2&&H(o(this._tileReady,this,h,null,O)),cn(O,w),this._tiles[C]={el:O,coords:h,current:!0},y.appendChild(O),this.fire("tileloadstart",{tile:O,coords:h})},_tileReady:function(h,y,w){y&&this.fire("tileerror",{error:y,tile:w,coords:h});var C=this._tileCoordsToKey(h);w=this._tiles[C],w&&(w.loaded=+new Date,this._map._fadeAnimated?(Ei(w.el,0),et(this._fadeFrame),this._fadeFrame=H(this._updateOpacity,this)):(w.active=!0,this._pruneTiles()),y||(re(w.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:w.el,coords:h})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),qt.ielt9||!this._map._fadeAnimated?H(this._pruneTiles,this):setTimeout(o(this._pruneTiles,this),250)))},_getTilePos:function(h){return h.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(h){var y=new V(this._wrapX?d(h.x,this._wrapX):h.x,this._wrapY?d(h.y,this._wrapY):h.y);return y.z=h.z,y},_pxBoundsToTileRange:function(h){var y=this.getTileSize();return new J(h.min.unscaleBy(y).floor(),h.max.unscaleBy(y).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var h in this._tiles)if(!this._tiles[h].loaded)return!1;return!0}});function zr(h){return new Bs(h)}var Us=Bs.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(h,y){this._url=h,y=x(this,y),y.detectRetina&&qt.retina&&y.maxZoom>0?(y.tileSize=Math.floor(y.tileSize/2),y.zoomReverse?(y.zoomOffset--,y.minZoom=Math.min(y.maxZoom,y.minZoom+1)):(y.zoomOffset++,y.maxZoom=Math.max(y.minZoom,y.maxZoom-1)),y.minZoom=Math.max(0,y.minZoom)):y.zoomReverse?y.minZoom=Math.min(y.maxZoom,y.minZoom):y.maxZoom=Math.max(y.minZoom,y.maxZoom),typeof y.subdomains=="string"&&(y.subdomains=y.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(h,y){return this._url===h&&y===void 0&&(y=!0),this._url=h,y||this.redraw(),this},createTile:function(h,y){var w=document.createElement("img");return ne(w,"load",o(this._tileOnLoad,this,y,w)),ne(w,"error",o(this._tileOnError,this,y,w)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(w.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(w.referrerPolicy=this.options.referrerPolicy),w.alt="",w.src=this.getTileUrl(h),w},getTileUrl:function(h){var y={r:qt.retina?"@2x":"",s:this._getSubdomain(h),x:h.x,y:h.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var w=this._globalTileRange.max.y-h.y;this.options.tms&&(y.y=w),y["-y"]=w}return M(this._url,r(y,this.options))},_tileOnLoad:function(h,y){qt.ielt9?setTimeout(o(h,this,null,y),0):h(null,y)},_tileOnError:function(h,y,w){var C=this.options.errorTileUrl;C&&y.getAttribute("src")!==C&&(y.src=C),h(w,y)},_onTileRemove:function(h){h.tile.onload=null},_getZoomForUrl:function(){var h=this._tileZoom,y=this.options.maxZoom,w=this.options.zoomReverse,C=this.options.zoomOffset;return w&&(h=y-h),h+C},_getSubdomain:function(h){var y=Math.abs(h.x+h.y)%this.options.subdomains.length;return this.options.subdomains[y]},_abortLoading:function(){var h,y;for(h in this._tiles)if(this._tiles[h].coords.z!==this._tileZoom&&(y=this._tiles[h].el,y.onload=p,y.onerror=p,!y.complete)){y.src=D;var w=this._tiles[h].coords;Xe(y),delete this._tiles[h],this.fire("tileabort",{tile:y,coords:w})}},_removeTile:function(h){var y=this._tiles[h];if(y)return y.el.setAttribute("src",D),Bs.prototype._removeTile.call(this,h)},_tileReady:function(h,y,w){if(!(!this._map||w&&w.getAttribute("src")===D))return Bs.prototype._tileReady.call(this,h,y,w)}});function Gi(h,y){return new Us(h,y)}var Zi=Us.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(h,y){this._url=h;var w=r({},this.defaultWmsParams);for(var C in y)C in this.options||(w[C]=y[C]);y=x(this,y);var O=y.detectRetina&&qt.retina?2:1,z=this.getTileSize();w.width=z.x*O,w.height=z.y*O,this.wmsParams=w},onAdd:function(h){this._crs=this.options.crs||h.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var y=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[y]=this._crs.code,Us.prototype.onAdd.call(this,h)},getTileUrl:function(h){var y=this._tileCoordsToNwSe(h),w=this._crs,C=lt(w.project(y[0]),w.project(y[1])),O=C.min,z=C.max,G=(this._wmsVersion>=1.3&&this._crs===f1?[O.y,O.x,z.y,z.x]:[O.x,O.y,z.x,z.y]).join(","),tt=Us.prototype.getTileUrl.call(this,h);return tt+S(this.wmsParams,tt,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+G},setParams:function(h,y){return r(this.wmsParams,h),y||this.redraw(),this}});function rl(h,y){return new Zi(h,y)}Us.WMS=Zi,Gi.wms=rl;var Fr=Rr.extend({options:{padding:.1},initialize:function(h){x(this,h),l(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),re(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var h={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(h.zoomanim=this._onAnimZoom),h},_onAnimZoom:function(h){this._updateTransform(h.center,h.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(h,y){var w=this._map.getZoomScale(y,this._zoom),C=this._map.getSize().multiplyBy(.5+this.options.padding),O=this._map.project(this._center,y),z=C.multiplyBy(-w).add(O).subtract(this._map._getNewPixelOrigin(h,y));qt.any3d?hr(this._container,z,w):cn(this._container,z)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var h in this._layers)this._layers[h]._reset()},_onZoomEnd:function(){for(var h in this._layers)this._layers[h]._project()},_updatePaths:function(){for(var h in this._layers)this._layers[h]._update()},_update:function(){var h=this.options.padding,y=this._map.getSize(),w=this._map.containerPointToLayerPoint(y.multiplyBy(-h)).round();this._bounds=new J(w,w.add(y.multiplyBy(1+h*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Gc=Fr.extend({options:{tolerance:0},getEvents:function(){var h=Fr.prototype.getEvents.call(this);return h.viewprereset=this._onViewPreReset,h},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Fr.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var h=this._container=document.createElement("canvas");ne(h,"mousemove",this._onMouseMove,this),ne(h,"click dblclick mousedown mouseup contextmenu",this._onClick,this),ne(h,"mouseout",this._handleMouseOut,this),h._leaflet_disable_events=!0,this._ctx=h.getContext("2d")},_destroyContainer:function(){et(this._redrawRequest),delete this._ctx,Xe(this._container),Se(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var h;this._redrawBounds=null;for(var y in this._layers)h=this._layers[y],h._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Fr.prototype._update.call(this);var h=this._bounds,y=this._container,w=h.getSize(),C=qt.retina?2:1;cn(y,h.min),y.width=C*w.x,y.height=C*w.y,y.style.width=w.x+"px",y.style.height=w.y+"px",qt.retina&&this._ctx.scale(2,2),this._ctx.translate(-h.min.x,-h.min.y),this.fire("update")}},_reset:function(){Fr.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(h){this._updateDashArray(h),this._layers[l(h)]=h;var y=h._order={layer:h,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=y),this._drawLast=y,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(h){this._requestRedraw(h)},_removePath:function(h){var y=h._order,w=y.next,C=y.prev;w?w.prev=C:this._drawLast=C,C?C.next=w:this._drawFirst=w,delete h._order,delete this._layers[l(h)],this._requestRedraw(h)},_updatePath:function(h){this._extendRedrawBounds(h),h._project(),h._update(),this._requestRedraw(h)},_updateStyle:function(h){this._updateDashArray(h),this._requestRedraw(h)},_updateDashArray:function(h){if(typeof h.options.dashArray=="string"){var y=h.options.dashArray.split(/[, ]+/),w=[],C,O;for(O=0;O<y.length;O++){if(C=Number(y[O]),isNaN(C))return;w.push(C)}h.options._dashArray=w}else h.options._dashArray=h.options.dashArray},_requestRedraw:function(h){this._map&&(this._extendRedrawBounds(h),this._redrawRequest=this._redrawRequest||H(this._redraw,this))},_extendRedrawBounds:function(h){if(h._pxBounds){var y=(h.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new J,this._redrawBounds.extend(h._pxBounds.min.subtract([y,y])),this._redrawBounds.extend(h._pxBounds.max.add([y,y]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var h=this._redrawBounds;if(h){var y=h.getSize();this._ctx.clearRect(h.min.x,h.min.y,y.x,y.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var h,y=this._redrawBounds;if(this._ctx.save(),y){var w=y.getSize();this._ctx.beginPath(),this._ctx.rect(y.min.x,y.min.y,w.x,w.y),this._ctx.clip()}this._drawing=!0;for(var C=this._drawFirst;C;C=C.next)h=C.layer,(!y||h._pxBounds&&h._pxBounds.intersects(y))&&h._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(h,y){if(this._drawing){var w,C,O,z,G=h._parts,tt=G.length,ut=this._ctx;if(tt){for(ut.beginPath(),w=0;w<tt;w++){for(C=0,O=G[w].length;C<O;C++)z=G[w][C],ut[C?"lineTo":"moveTo"](z.x,z.y);y&&ut.closePath()}this._fillStroke(ut,h)}}},_updateCircle:function(h){if(!(!this._drawing||h._empty())){var y=h._point,w=this._ctx,C=Math.max(Math.round(h._radius),1),O=(Math.max(Math.round(h._radiusY),1)||C)/C;O!==1&&(w.save(),w.scale(1,O)),w.beginPath(),w.arc(y.x,y.y/O,C,0,Math.PI*2,!1),O!==1&&w.restore(),this._fillStroke(w,h)}},_fillStroke:function(h,y){var w=y.options;w.fill&&(h.globalAlpha=w.fillOpacity,h.fillStyle=w.fillColor||w.color,h.fill(w.fillRule||"evenodd")),w.stroke&&w.weight!==0&&(h.setLineDash&&h.setLineDash(y.options&&y.options._dashArray||[]),h.globalAlpha=w.opacity,h.lineWidth=w.weight,h.strokeStyle=w.color,h.lineCap=w.lineCap,h.lineJoin=w.lineJoin,h.stroke())},_onClick:function(h){for(var y=this._map.mouseEventToLayerPoint(h),w,C,O=this._drawFirst;O;O=O.next)w=O.layer,w.options.interactive&&w._containsPoint(y)&&(!(h.type==="click"||h.type==="preclick")||!this._map._draggableMoved(w))&&(C=w);this._fireEvent(C?[C]:!1,h)},_onMouseMove:function(h){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var y=this._map.mouseEventToLayerPoint(h);this._handleMouseHover(h,y)}},_handleMouseOut:function(h){var y=this._hoveredLayer;y&&(We(this._container,"leaflet-interactive"),this._fireEvent([y],h,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(h,y){if(!this._mouseHoverThrottled){for(var w,C,O=this._drawFirst;O;O=O.next)w=O.layer,w.options.interactive&&w._containsPoint(y)&&(C=w);C!==this._hoveredLayer&&(this._handleMouseOut(h),C&&(re(this._container,"leaflet-interactive"),this._fireEvent([C],h,"mouseover"),this._hoveredLayer=C)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,h),this._mouseHoverThrottled=!0,setTimeout(o(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(h,y,w){this._map._fireDOMEvent(y,w||y.type,h)},_bringToFront:function(h){var y=h._order;if(y){var w=y.next,C=y.prev;if(w)w.prev=C;else return;C?C.next=w:w&&(this._drawFirst=w),y.prev=this._drawLast,this._drawLast.next=y,y.next=null,this._drawLast=y,this._requestRedraw(h)}},_bringToBack:function(h){var y=h._order;if(y){var w=y.next,C=y.prev;if(C)C.next=w;else return;w?w.prev=C:C&&(this._drawLast=C),y.prev=null,y.next=this._drawFirst,this._drawFirst.prev=y,this._drawFirst=y,this._requestRedraw(h)}}});function Zc(h){return qt.canvas?new Gc(h):null}var Is=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(h){return document.createElement("<lvml:"+h+' class="lvml">')}}catch{}return function(h){return document.createElement("<"+h+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),al={_initContainer:function(){this._container=xe("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Fr.prototype._update.call(this),this.fire("update"))},_initPath:function(h){var y=h._container=Is("shape");re(y,"leaflet-vml-shape "+(this.options.className||"")),y.coordsize="1 1",h._path=Is("path"),y.appendChild(h._path),this._updateStyle(h),this._layers[l(h)]=h},_addPath:function(h){var y=h._container;this._container.appendChild(y),h.options.interactive&&h.addInteractiveTarget(y)},_removePath:function(h){var y=h._container;Xe(y),h.removeInteractiveTarget(y),delete this._layers[l(h)]},_updateStyle:function(h){var y=h._stroke,w=h._fill,C=h.options,O=h._container;O.stroked=!!C.stroke,O.filled=!!C.fill,C.stroke?(y||(y=h._stroke=Is("stroke")),O.appendChild(y),y.weight=C.weight+"px",y.color=C.color,y.opacity=C.opacity,C.dashArray?y.dashStyle=k(C.dashArray)?C.dashArray.join(" "):C.dashArray.replace(/( *, *)/g," "):y.dashStyle="",y.endcap=C.lineCap.replace("butt","flat"),y.joinstyle=C.lineJoin):y&&(O.removeChild(y),h._stroke=null),C.fill?(w||(w=h._fill=Is("fill")),O.appendChild(w),w.color=C.fillColor||C.color,w.opacity=C.fillOpacity):w&&(O.removeChild(w),h._fill=null)},_updateCircle:function(h){var y=h._point.round(),w=Math.round(h._radius),C=Math.round(h._radiusY||w);this._setPath(h,h._empty()?"M0 0":"AL "+y.x+","+y.y+" "+w+","+C+" 0,"+65535*360)},_setPath:function(h,y){h._path.v=y},_bringToFront:function(h){Os(h._container)},_bringToBack:function(h){qu(h._container)}},Yc=qt.vml?Is:ln,ko=Fr.extend({_initContainer:function(){this._container=Yc("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Yc("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){Xe(this._container),Se(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Fr.prototype._update.call(this);var h=this._bounds,y=h.getSize(),w=this._container;(!this._svgSize||!this._svgSize.equals(y))&&(this._svgSize=y,w.setAttribute("width",y.x),w.setAttribute("height",y.y)),cn(w,h.min),w.setAttribute("viewBox",[h.min.x,h.min.y,y.x,y.y].join(" ")),this.fire("update")}},_initPath:function(h){var y=h._path=Yc("path");h.options.className&&re(y,h.options.className),h.options.interactive&&re(y,"leaflet-interactive"),this._updateStyle(h),this._layers[l(h)]=h},_addPath:function(h){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(h._path),h.addInteractiveTarget(h._path)},_removePath:function(h){Xe(h._path),h.removeInteractiveTarget(h._path),delete this._layers[l(h)]},_updatePath:function(h){h._project(),h._update()},_updateStyle:function(h){var y=h._path,w=h.options;y&&(w.stroke?(y.setAttribute("stroke",w.color),y.setAttribute("stroke-opacity",w.opacity),y.setAttribute("stroke-width",w.weight),y.setAttribute("stroke-linecap",w.lineCap),y.setAttribute("stroke-linejoin",w.lineJoin),w.dashArray?y.setAttribute("stroke-dasharray",w.dashArray):y.removeAttribute("stroke-dasharray"),w.dashOffset?y.setAttribute("stroke-dashoffset",w.dashOffset):y.removeAttribute("stroke-dashoffset")):y.setAttribute("stroke","none"),w.fill?(y.setAttribute("fill",w.fillColor||w.color),y.setAttribute("fill-opacity",w.fillOpacity),y.setAttribute("fill-rule",w.fillRule||"evenodd")):y.setAttribute("fill","none"))},_updatePoly:function(h,y){this._setPath(h,wn(h._parts,y))},_updateCircle:function(h){var y=h._point,w=Math.max(Math.round(h._radius),1),C=Math.max(Math.round(h._radiusY),1)||w,O="a"+w+","+C+" 0 1,0 ",z=h._empty()?"M0 0":"M"+(y.x-w)+","+y.y+O+w*2+",0 "+O+-w*2+",0 ";this._setPath(h,z)},_setPath:function(h,y){h._path.setAttribute("d",y)},_bringToFront:function(h){Os(h._path)},_bringToBack:function(h){qu(h._path)}});qt.vml&&ko.include(al);function qs(h){return qt.svg||qt.vml?new ko(h):null}fe.include({getRenderer:function(h){var y=h.options.renderer||this._getPaneRenderer(h.options.pane)||this.options.renderer||this._renderer;return y||(y=this._renderer=this._createRenderer()),this.hasLayer(y)||this.addLayer(y),y},_getPaneRenderer:function(h){if(h==="overlayPane"||h===void 0)return!1;var y=this._paneRenderers[h];return y===void 0&&(y=this._createRenderer({pane:h}),this._paneRenderers[h]=y),y},_createRenderer:function(h){return this.options.preferCanvas&&Zc(h)||qs(h)}});var v1=el.extend({initialize:function(h,y){el.prototype.initialize.call(this,this._boundsToLatLngs(h),y)},setBounds:function(h){return this.setLatLngs(this._boundsToLatLngs(h))},_boundsToLatLngs:function(h){return h=wt(h),[h.getSouthWest(),h.getNorthWest(),h.getNorthEast(),h.getSouthEast()]}});function Yi(h,y){return new v1(h,y)}ko.create=Yc,ko.pointsToPath=wn,Hi.geometryToLayer=Ic,Hi.coordsToLatLng=Bh,Hi.coordsToLatLngs=qc,Hi.latLngToCoords=jc,Hi.latLngsToCoords=Uh,Hi.getFeature=Nr,Hi.asFeature=nl,fe.mergeOptions({boxZoom:!0});var Hh=Dr.extend({initialize:function(h){this._map=h,this._container=h._container,this._pane=h._panes.overlayPane,this._resetStateTimeout=0,h.on("unload",this._destroy,this)},addHooks:function(){ne(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Se(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){Xe(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(h){if(!h.shiftKey||h.which!==1&&h.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),aa(),Nc(),this._startPoint=this._map.mouseEventToContainerPoint(h),ne(document,{contextmenu:ua,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(h){this._moved||(this._moved=!0,this._box=xe("div","leaflet-zoom-box",this._container),re(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(h);var y=new J(this._point,this._startPoint),w=y.getSize();cn(this._box,y.min),this._box.style.width=w.x+"px",this._box.style.height=w.y+"px"},_finish:function(){this._moved&&(Xe(this._box),We(this._container,"leaflet-crosshair")),Rc(),lg(),Se(document,{contextmenu:ua,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(h){if(!(h.which!==1&&h.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(o(this._resetState,this),0);var y=new ft(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(y).fire("boxzoomend",{boxZoomBounds:y})}},_onKeyDown:function(h){h.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});fe.addInitHook("addHandler","boxZoom",Hh),fe.mergeOptions({doubleClickZoom:!0});var ca=Dr.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(h){var y=this._map,w=y.getZoom(),C=y.options.zoomDelta,O=h.originalEvent.shiftKey?w-C:w+C;y.options.doubleClickZoom==="center"?y.setZoom(O):y.setZoomAround(h.containerPoint,O)}});fe.addInitHook("addHandler","doubleClickZoom",ca),fe.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var Eg=Dr.extend({addHooks:function(){if(!this._draggable){var h=this._map;this._draggable=new Co(h._mapPane,h._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),h.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),h.on("zoomend",this._onZoomEnd,this),h.whenReady(this._onZoomEnd,this))}re(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){We(this._map._container,"leaflet-grab"),We(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var h=this._map;if(h._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var y=wt(this._map.options.maxBounds);this._offsetLimit=lt(this._map.latLngToContainerPoint(y.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(y.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;h.fire("movestart").fire("dragstart"),h.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(h){if(this._map.options.inertia){var y=this._lastTime=+new Date,w=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(w),this._times.push(y),this._prunePositions(y)}this._map.fire("move",h).fire("drag",h)},_prunePositions:function(h){for(;this._positions.length>1&&h-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var h=this._map.getSize().divideBy(2),y=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=y.subtract(h).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(h,y){return h-(h-y)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var h=this._draggable._newPos.subtract(this._draggable._startPos),y=this._offsetLimit;h.x<y.min.x&&(h.x=this._viscousLimit(h.x,y.min.x)),h.y<y.min.y&&(h.y=this._viscousLimit(h.y,y.min.y)),h.x>y.max.x&&(h.x=this._viscousLimit(h.x,y.max.x)),h.y>y.max.y&&(h.y=this._viscousLimit(h.y,y.max.y)),this._draggable._newPos=this._draggable._startPos.add(h)}},_onPreDragWrap:function(){var h=this._worldWidth,y=Math.round(h/2),w=this._initialWorldOffset,C=this._draggable._newPos.x,O=(C-y+w)%h+y-w,z=(C+y+w)%h-y-w,G=Math.abs(O+w)<Math.abs(z+w)?O:z;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=G},_onDragEnd:function(h){var y=this._map,w=y.options,C=!w.inertia||h.noInertia||this._times.length<2;if(y.fire("dragend",h),C)y.fire("moveend");else{this._prunePositions(+new Date);var O=this._lastPos.subtract(this._positions[0]),z=(this._lastTime-this._times[0])/1e3,G=w.easeLinearity,tt=O.multiplyBy(G/z),ut=tt.distanceTo([0,0]),_t=Math.min(w.inertiaMaxSpeed,ut),Lt=tt.multiplyBy(_t/ut),Ft=_t/(w.inertiaDeceleration*G),Ut=Lt.multiplyBy(-Ft/2).round();!Ut.x&&!Ut.y?y.fire("moveend"):(Ut=y._limitOffset(Ut,y.options.maxBounds),H(function(){y.panBy(Ut,{duration:Ft,easeLinearity:G,noMoveStart:!0,animate:!0})}))}}});fe.addInitHook("addHandler","dragging",Eg),fe.mergeOptions({keyboard:!0,keyboardPanDelta:80});var Xc=Dr.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(h){this._map=h,this._setPanDelta(h.options.keyboardPanDelta),this._setZoomDelta(h.options.zoomDelta)},addHooks:function(){var h=this._map._container;h.tabIndex<=0&&(h.tabIndex="0"),ne(h,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Se(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var h=document.body,y=document.documentElement,w=h.scrollTop||y.scrollTop,C=h.scrollLeft||y.scrollLeft;this._map._container.focus(),window.scrollTo(C,w)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(h){var y=this._panKeys={},w=this.keyCodes,C,O;for(C=0,O=w.left.length;C<O;C++)y[w.left[C]]=[-1*h,0];for(C=0,O=w.right.length;C<O;C++)y[w.right[C]]=[h,0];for(C=0,O=w.down.length;C<O;C++)y[w.down[C]]=[0,h];for(C=0,O=w.up.length;C<O;C++)y[w.up[C]]=[0,-1*h]},_setZoomDelta:function(h){var y=this._zoomKeys={},w=this.keyCodes,C,O;for(C=0,O=w.zoomIn.length;C<O;C++)y[w.zoomIn[C]]=h;for(C=0,O=w.zoomOut.length;C<O;C++)y[w.zoomOut[C]]=-h},_addHooks:function(){ne(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Se(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(h){if(!(h.altKey||h.ctrlKey||h.metaKey)){var y=h.keyCode,w=this._map,C;if(y in this._panKeys){if(!w._panAnim||!w._panAnim._inProgress)if(C=this._panKeys[y],h.shiftKey&&(C=B(C).multiplyBy(3)),w.options.maxBounds&&(C=w._limitOffset(B(C),w.options.maxBounds)),w.options.worldCopyJump){var O=w.wrapLatLng(w.unproject(w.project(w.getCenter()).add(C)));w.panTo(O)}else w.panBy(C)}else if(y in this._zoomKeys)w.setZoom(w.getZoom()+(h.shiftKey?3:1)*this._zoomKeys[y]);else if(y===27&&w._popup&&w._popup.options.closeOnEscapeKey)w.closePopup();else return;ua(h)}}});fe.addInitHook("addHandler","keyboard",Xc),fe.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var Oo=Dr.extend({addHooks:function(){ne(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Se(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(h){var y=Fc(h),w=this._map.options.wheelDebounceTime;this._delta+=y,this._lastMousePos=this._map.mouseEventToContainerPoint(h),this._startTime||(this._startTime=+new Date);var C=Math.max(w-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(o(this._performZoom,this),C),ua(h)},_performZoom:function(){var h=this._map,y=h.getZoom(),w=this._map.options.zoomSnap||0;h._stop();var C=this._delta/(this._map.options.wheelPxPerZoomLevel*4),O=4*Math.log(2/(1+Math.exp(-Math.abs(C))))/Math.LN2,z=w?Math.ceil(O/w)*w:O,G=h._limitZoom(y+(this._delta>0?z:-z))-y;this._delta=0,this._startTime=null,G&&(h.options.scrollWheelZoom==="center"?h.setZoom(y+G):h.setZoomAround(this._lastMousePos,y+G))}});fe.addInitHook("addHandler","scrollWheelZoom",Oo);var Sg=600;fe.mergeOptions({tapHold:qt.touchNative&&qt.safari&&qt.mobile,tapTolerance:15});var Gh=Dr.extend({addHooks:function(){ne(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Se(this._map._container,"touchstart",this._onDown,this)},_onDown:function(h){if(clearTimeout(this._holdTimeout),h.touches.length===1){var y=h.touches[0];this._startPos=this._newPos=new V(y.clientX,y.clientY),this._holdTimeout=setTimeout(o(function(){this._cancel(),this._isTapValid()&&(ne(document,"touchend",mn),ne(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",y))},this),Sg),ne(document,"touchend touchcancel contextmenu",this._cancel,this),ne(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function h(){Se(document,"touchend",mn),Se(document,"touchend touchcancel",h)},_cancel:function(){clearTimeout(this._holdTimeout),Se(document,"touchend touchcancel contextmenu",this._cancel,this),Se(document,"touchmove",this._onMove,this)},_onMove:function(h){var y=h.touches[0];this._newPos=new V(y.clientX,y.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(h,y){var w=new MouseEvent(h,{bubbles:!0,cancelable:!0,view:window,screenX:y.screenX,screenY:y.screenY,clientX:y.clientX,clientY:y.clientY});w._simulated=!0,y.target.dispatchEvent(w)}});fe.addInitHook("addHandler","tapHold",Gh),fe.mergeOptions({touchZoom:qt.touch,bounceAtZoomLimits:!0});var js=Dr.extend({addHooks:function(){re(this._map._container,"leaflet-touch-zoom"),ne(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){We(this._map._container,"leaflet-touch-zoom"),Se(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(h){var y=this._map;if(!(!h.touches||h.touches.length!==2||y._animatingZoom||this._zooming)){var w=y.mouseEventToContainerPoint(h.touches[0]),C=y.mouseEventToContainerPoint(h.touches[1]);this._centerPoint=y.getSize()._divideBy(2),this._startLatLng=y.containerPointToLatLng(this._centerPoint),y.options.touchZoom!=="center"&&(this._pinchStartLatLng=y.containerPointToLatLng(w.add(C)._divideBy(2))),this._startDist=w.distanceTo(C),this._startZoom=y.getZoom(),this._moved=!1,this._zooming=!0,y._stop(),ne(document,"touchmove",this._onTouchMove,this),ne(document,"touchend touchcancel",this._onTouchEnd,this),mn(h)}},_onTouchMove:function(h){if(!(!h.touches||h.touches.length!==2||!this._zooming)){var y=this._map,w=y.mouseEventToContainerPoint(h.touches[0]),C=y.mouseEventToContainerPoint(h.touches[1]),O=w.distanceTo(C)/this._startDist;if(this._zoom=y.getScaleZoom(O,this._startZoom),!y.options.bounceAtZoomLimits&&(this._zoom<y.getMinZoom()&&O<1||this._zoom>y.getMaxZoom()&&O>1)&&(this._zoom=y._limitZoom(this._zoom)),y.options.touchZoom==="center"){if(this._center=this._startLatLng,O===1)return}else{var z=w._add(C)._divideBy(2)._subtract(this._centerPoint);if(O===1&&z.x===0&&z.y===0)return;this._center=y.unproject(y.project(this._pinchStartLatLng,this._zoom).subtract(z),this._zoom)}this._moved||(y._moveStart(!0,!1),this._moved=!0),et(this._animRequest);var G=o(y._move,y,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=H(G,this,!0),mn(h)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,et(this._animRequest),Se(document,"touchmove",this._onTouchMove,this),Se(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});fe.addInitHook("addHandler","touchZoom",js),fe.BoxZoom=Hh,fe.DoubleClickZoom=ca,fe.Drag=Eg,fe.Keyboard=Xc,fe.ScrollWheelZoom=Oo,fe.TapHold=Gh,fe.TouchZoom=js,n.Bounds=J,n.Browser=qt,n.CRS=$e,n.Canvas=Gc,n.Circle=bg,n.CircleMarker=Uc,n.Class=W,n.Control=Si,n.DivIcon=wg,n.DivOverlay=Lr,n.DomEvent=ww,n.DomUtil=t1,n.Draggable=Co,n.Evented=X,n.FeatureGroup=qi,n.GeoJSON=Hi,n.GridLayer=Bs,n.Handler=Dr,n.Icon=Ku,n.ImageOverlay=la,n.LatLng=bt,n.LatLngBounds=ft,n.Layer=Rr,n.LayerGroup=Fs,n.LineUtil=l1,n.Map=fe,n.Marker=tl,n.Mixin=Cw,n.Path=Ba,n.Point=V,n.PolyUtil=Mw,n.Polygon=el,n.Polyline=Ua,n.Popup=Hc,n.PosAnimation=Rh,n.Projection=c1,n.Rectangle=v1,n.Renderer=Fr,n.SVG=ko,n.SVGOverlay=Mo,n.TileLayer=Us,n.Tooltip=jh,n.Transformation=Jt,n.Util=nt,n.VideoOverlay=qh,n.bind=o,n.bounds=lt,n.canvas=Zc,n.circle=Nw,n.circleMarker=d1,n.control=Vu,n.divIcon=y1,n.extend=r,n.featureGroup=Bc,n.geoJSON=Ih,n.geoJson=p1,n.gridLayer=zr,n.icon=Ph,n.imageOverlay=il,n.latLng=At,n.latLngBounds=wt,n.layerGroup=h1,n.map=Pc,n.marker=_g,n.point=B,n.polygon=ji,n.polyline=Lw,n.popup=zw,n.rectangle=Yi,n.setOptions=x,n.stamp=l,n.svg=qs,n.svgOverlay=m1,n.tileLayer=Gi,n.tooltip=Fw,n.transformation=xt,n.version=i,n.videoOverlay=g1;var ol=window.L;n.noConflict=function(){return window.L=ol,this},window.L=n})}(e0,e0.exports)),e0.exports}var Uy=RAt();const ux=q8(Uy);function QD(t,e,n){return Object.freeze({instance:t,context:e,container:n})}function KD(t,e){return e==null?function(i,r){const a=Te.useRef(void 0);return a.current||(a.current=t(i,r)),a}:function(i,r){const a=Te.useRef(void 0);a.current||(a.current=t(i,r));const o=Te.useRef(i),{instance:s}=a.current;return Te.useEffect(function(){o.current!==i&&(e(s,i,o.current),o.current=i)},[s,i,e]),a}}function NAt(t,e){Te.useEffect(function(){return(e.layerContainer??e.map).addLayer(t.instance),function(){var a;(a=e.layerContainer)==null||a.removeLayer(t.instance),e.map.removeLayer(t.instance)}},[e,t])}function FY(t){return function(n){const i=WD(),r=t(VD(n,i),i);return LY(i.map,n.attribution),zY(r.current,n.eventHandlers),NAt(r.current,i),r}}function LAt(t,e){const n=KD(t,e),i=FY(n);return MAt(i)}function zAt(t,e){const n=KD(t),i=$At(n,e);return kAt(i)}function FAt(t,e){const n=KD(t,e),i=FY(n);return OAt(i)}function PAt(t,e,n){const{opacity:i,zIndex:r}=e;i!=null&&i!==n.opacity&&t.setOpacity(i),r!=null&&r!==n.zIndex&&t.setZIndex(r)}function BAt(){return WD().map}function UAt({bounds:t,boundsOptions:e,center:n,children:i,className:r,id:a,placeholder:o,style:s,whenReady:l,zoom:f,...d},p){const[m]=Te.useState({className:r,id:a,style:s}),[_,b]=Te.useState(null),x=Te.useRef(void 0);Te.useImperativeHandle(p,()=>(_==null?void 0:_.map)??null,[_]);const S=Te.useCallback(M=>{if(M!==null&&!x.current){const k=new Uy.Map(M,d);x.current=k,n!=null&&f!=null?k.setView(n,f):t!=null&&k.fitBounds(t,e),l!=null&&k.whenReady(l),b(TAt(k))}},[]);Te.useEffect(()=>()=>{_==null||_.map.remove()},[_]);const T=_?sT.createElement(XD,{value:_},i):o??null;return sT.createElement("div",{...m,ref:S},T)}const IAt=Te.forwardRef(UAt),qAt=LAt(function({position:e,...n},i){const r=new Uy.Marker(e,n);return QD(r,CAt(i,{overlayContainer:r}))},function(e,n,i){n.position!==i.position&&e.setLatLng(n.position),n.icon!=null&&n.icon!==i.icon&&e.setIcon(n.icon),n.zIndexOffset!=null&&n.zIndexOffset!==i.zIndexOffset&&e.setZIndexOffset(n.zIndexOffset),n.opacity!=null&&n.opacity!==i.opacity&&e.setOpacity(n.opacity),e.dragging!=null&&n.draggable!==i.draggable&&(n.draggable===!0?e.dragging.enable():e.dragging.disable())}),jAt=zAt(function(e,n){const i=new Uy.Popup(e,n.overlayContainer);return QD(i,n)},function(e,n,{position:i},r){Te.useEffect(function(){const{instance:o}=e;function s(f){f.popup===o&&(o.update(),r(!0))}function l(f){f.popup===o&&r(!1)}return n.map.on({popupopen:s,popupclose:l}),n.overlayContainer==null?(i!=null&&o.setLatLng(i),o.openOn(n.map)):n.overlayContainer.bindPopup(o),function(){var d;n.map.off({popupopen:s,popupclose:l}),(d=n.overlayContainer)==null||d.unbindPopup(),n.map.removeLayer(o)}},[e,n,r,i])}),HAt=FAt(function({url:e,...n},i){const r=new Uy.TileLayer(e,VD(n,i));return QD(r,i)},function(e,n,i){PAt(e,n,i);const{url:r}=n;r!=null&&r!==i.url&&e.setUrl(r)}),GAt=3.28084,B8=5280,ZAt=10.7639,U8=43560;(function(t,e){typeof define=="function"&&define.amd?define(["leaflet"],t):typeof PY=="object"&&(BY.exports=t(ux)),typeof e<"u"&&e.L&&t(ux)})(function(t){t.Measure={linearMeasurement:"Distance measurement",areaMeasurement:"Area measurement",start:"Start",feet:"ft",feetDecimals:0,mile:"miles",mileDecimals:2,sqft:"sqft",sqftDecimals:0,acres:"acres",acresDecimals:2},t.Control.Measure=t.Control.extend({options:{position:"topright",title:"Measure",collapsed:!0,color:m0},initialize:function(e){t.Util.setOptions(this,e)},onAdd:function(e){return this._map=e,this._container||this._initLayout(),this._container},_buildContainer:function(){if(this._container=t.DomUtil.create("div","leaflet-control-measure leaflet-bar leaflet-control"),this._contents=t.DomUtil.create("div","leaflet-measure-contents",this._container),this._link=t.DomUtil.create("a","leaflet-measure-toggle",this._container),this._link.title=this.options.title||"Measurement",this._link.href="#",this.options.title){var e=t.DomUtil.create("h3","",this._contents);e.innerText=this.options.title}this._buildItems()},_buildItems:function(){var e=t.DomUtil.create("ul","leaflet-measure-actions",this._contents),n=t.DomUtil.create("li","leaflet-measure-action",e),i=t.DomUtil.create("a","start",n);i.innerText=t.Measure.linearMeasurement,i.href="#",t.DomEvent.disableClickPropagation(i),t.DomEvent.on(i,"click",this._enableMeasureLine,this),n=t.DomUtil.create("li","leaflet-measure-action",e);var r=t.DomUtil.create("a","leaflet-measure-action start",n);r.innerText=t.Measure.areaMeasurement,r.href="#",t.DomEvent.disableClickPropagation(r),t.DomEvent.on(r,"click",this._enableMeasureArea,this)},_initLayout:function(){this._buildContainer(),t.DomEvent.disableClickPropagation(this._container),t.DomEvent.disableScrollPropagation(this._container),this.options.collapsed?(t.DomEvent.on(this._link,"click",t.DomEvent.stopPropagation),t.DomEvent.on(this._link,"click",t.DomEvent.preventDefault),t.DomEvent.on(this._link,"click",function(){t.DomUtil.hasClass(this._container,"leaflet-measure-expanded")?this._collapse():this._expand()},this),t.DomEvent.on(this._container,"mouseleave",this._collapse,this)):this._expand()},_enableMeasureLine:function(e){t.DomEvent.stopPropagation(e),t.DomEvent.preventDefault(e),this._measureHandler=new t.MeasureAction(this._map,{model:"distance",color:this.options.color}),this._measureHandler.enable(),this._collapse()},_enableMeasureArea:function(e){t.DomEvent.stopPropagation(e),t.DomEvent.preventDefault(e),this._measureHandler=new t.MeasureAction(this._map,{model:"area",color:this.options.color}),this._measureHandler.enable(),this._collapse()},_expand:function(){return this._link.style.display="none",t.DomUtil.addClass(this._container,"leaflet-measure-expanded"),this},_collapse:function(){return this._link.style.display="block",t.DomUtil.removeClass(this._container,"leaflet-measure-expanded"),this}}),t.control.measure=t.control.Measure=function(e){return new t.Control.Measure(e)},t.MeasureLable=t.Layer.extend({options:{offset:new t.Point(0,30),latlng:null,content:"",className:""},initialize:function(e){t.Util.setOptions(this,e)},onAdd:function(e){this._map=e,this._container||this._initLayout(),e._panes.popupPane.appendChild(this._container),e.on("viewreset",this._updatePosition,this),t.Browser.any3d&&e.on("zoomanim",this._zoomAnimation,this),this._update()},addTo:function(e){return e.addLayer(this),this},onRemove:function(e){e._panes.popupPane.removeChild(this._container),e.off({viewreset:this._updatePosition,zoomanim:this._zoomAnimation},this),this._map=null},setLatLng:function(e){return this.options.latlng=t.latLng(e),this._updatePosition(),this},setContent:function(e){return this.options.content=e,this._updateContent(),this},_initLayout:function(){this._container=t.DomUtil.create("div",this.options.className),this._contentNode=t.DomUtil.create("div","content",this._container)},_update:function(){this._map&&(this._updateContent(),this._updatePosition())},_updateContent:function(){this.options.content&&(typeof this.options.content=="string"?this._contentNode.innerHTML=this.options.content:(this._contentNode.innerHTML="",this._contentNode.appendChild(this.options.content)))},_updatePosition:function(){var e=this._map.latLngToLayerPoint(this.options.latlng),n=t.Browser.any3d,i=this.options.offset;n&&t.DomUtil.setPosition(this._container,e),this._containerBottom=-i.y-(n?0:e.y),this._containerLeft=i.x+(n?0:e.x),this._container.style.bottom=this._containerBottom+"px",this._container.style.left=this._containerLeft+"px"},_zoomAnimation:function(e){e=this._map._latLngToNewLayerPoint(this.options.latlng,e.zoom,e.center),t.DomUtil.setPosition(this._container,e)},enableClose:function(){return this._closeButton=t.DomUtil.create("span","close",this._container),this._closeButton.innerHTML='<svg class="icon" viewBox="0 0 40 40"><path stroke="#FF0000" stroke-width="3" d="M 10,10 L 30,30 M 30,10 L 10,30" /></svg>',this._closeButton}}),t.MeasureAction=t.Handler.extend({options:{color:m0,model:"distance"},initialize:function(e,n){this._map=e,this._map._measureHandler=this,t.Util.setOptions(this,n)},setModel:function(e){return this.options.model=e,this},addHooks:function(){this._activeMeasure()},removeHooks:function(){},_activeMeasure:function(){this._map._measureHandler._measurementStarted&&this._map._measureHandler._finishMeasure(),this._measurementStarted?this._finishMeasure():this._enableMeasure()},_onMouseClick:function(e){var n=e.latlng||this._map.mouseEventToLatLng(e);if(!(this._lastPoint&&n.equals(this._lastPoint))){if(this._trail.points.length>0){var i=this._trail.points;i.push(n);var r=i.length;this._totalDistance+=this._getDistance(i[r-2],i[r-1]),this._addMeasurePoint(n),this._addMarker(n),this.options.model!=="area"&&this._addLable(n,this._getDistanceString(this._totalDistance),"leaflet-measure-lable")}else this._totalDistance=0,this._addMeasurePoint(n),this._addMarker(n),this.options.model!=="area"&&this._addLable(n,t.Measure.start,"leaflet-measure-lable"),this._trail.points.push(n);this._lastPoint=n,this._startMove=!1}},_onMouseMove:function(e){var n=e.latlng;this._trail.points.length>0&&(this._startMove?this._directPath.setLatLngs(this._trail.points.concat(n)):(this._directPath.setLatLngs([n]),this._startMove=!0))},_enableMeasure:function(){var e=this._map;this._trail={points:[],overlays:t.featureGroup(),canvas:e.options.preferCanvas||!1},e.options.preferCanvas&&(e.options.preferCanvas=!1,console.warn("Temporarily reset map.options.prefersCanvas to false")),e.addLayer(this._trail.overlays),t.DomUtil.addClass(e._container,"leaflet-measure-map"),e.contextMenu&&e.contextMenu.disable(),this._measurementStarted=!0,e.on("click",this._onMouseClick,this),e.on("dblclick contextmenu",this._finishMeasure,this),e.doubleClickZoom.disable(),e.on("mousemove",this._onMouseMove,this),this._onKeyDown=n=>{(n.key==="Escape"||n.key==="Esc")&&(this._disableMeasure(),this._clearOverlay.call(this))},window.addEventListener("keydown",this._onKeyDown)},_disableMeasure:function(){var e=this._map;t.DomUtil.removeClass(e.getContainer(),"leaflet-measure-map"),e.contextMenu&&e.contextMenu.enable(),e.off("click",this._onMouseClick,this),e.off("dblclick contextmenu",this._finishMeasure,this),e.off("mousemove",this._onMouseMove,this),e.doubleClickZoom.enable(),this._measurementStarted=this._startMove=!1,this.disable(),this._onKeyDown&&(window.removeEventListener("keydown",this._onKeyDown),this._onKeyDown=null),this.disable()},_finishMeasure:function(e){this._trail.points.length>0&&(this._trail.points.length>1?((!e||e.type==="contextmenu")&&this._directPath.setLatLngs(this._trail.points),this.options.model==="area"?this._addLable(this._lastPoint,this._getAreaString(this._trail.points),"leaflet-measure-lable",!0):this._addLable(this._lastPoint,this._getDistanceString(this._totalDistance),"leaflet-measure-lable",!0),this._directPath&&this._map.removeLayer(this._directPath)):this._clearOverlay.call(this)),this._disableMeasure()},_resetDirectPath:function(e){this._directPath?this._directPath.addLatLng(e):(this.options.model==="area"?this._directPath=new t.Polygon([e],{weight:2,color:this.options.color,dashArray:[5,5],fillOpacity:0,interactive:!1}):this._directPath=new t.Polyline([e],{weight:2,color:this.options.color,dashArray:[5,5],interactive:!1}),this._trail.overlays.addLayer(this._directPath))},_addMeasurePoint:function(e){this._measurePath?this._measurePath.addLatLng(e):(this.options.model==="area"?this._measurePath=new t.Polygon([e],{weight:2,color:this.options.color,fillColor:this.options.color,fillOpacity:.5,interactive:!1}):this._measurePath=new t.Polyline([e],{weight:2,color:this.options.color,interactive:!1}),this._trail.overlays.addLayer(this._measurePath)),this._resetDirectPath(e)},_addMarker:function(e){var n=new t.CircleMarker(e,{color:this.options.color,opacity:1,weight:1,fillColor:"#FFFFFF",fill:!0,fillOpacity:1,radius:3,interactive:!1});this._trail.overlays.addLayer(n)},_addLable:function(e,n,i,r){var a=new t.MeasureLable({latlng:e,content:n,className:i});if(this._trail.overlays.addLayer(a),r){var o=a.enableClose();t.DomEvent.on(o,"click",this._clearOverlay,this)}},_clearOverlay:function(){this._map.removeLayer(this._trail.overlays),this._trail.overlays=null,this._map.options.preferCanvas=this._trail.canvas},toRadians:function(e){return e*(Math.PI/180)},square:function(e){return Math.pow(e,2)},_getDistanceString:function(e){const n=e*GAt;return n>B8?this._numberFormat(n/B8,t.Measure.mileDecimals)+" "+t.Measure.mile:this._numberFormat(n,t.Measure.feetDecimals)+" "+t.Measure.feet},_getDistance:function(e,n){var i=6378137,r=this.toRadians(e.lat),a=this.toRadians(n.lat),o=a-r,s=this.toRadians(n.lng-e.lng),l=this.square(Math.sin(o/2))+Math.cos(r)*Math.cos(a)*this.square(Math.sin(s/2));return 2*i*Math.asin(Math.sqrt(l))},_getAreaString:function(e){var n=this._getArea(e);const i=n*ZAt;if(i>U8){const r=i/U8;return this._numberFormat(r,t.Measure.acresDecimals)+" "+t.Measure.acres}else return this._numberFormat(i,t.Measure.sqftDecimals)+" "+t.Measure.sqft},_getArea:function(e){for(var n=6378137,i=0,r=e.length,a=e[r-1].lng,o=e[r-1].lat,s=0;s<r;s++){var l=e[s].lng,f=e[s].lat;i+=this.toRadians(l-a)*(2+Math.sin(this.toRadians(o))+Math.sin(this.toRadians(f))),a=l,o=f}return Math.abs(i*n*n/2)},_numberFormat:function(e,n=2){var i=",",r=e<0?"-":"",a=Math.abs(+e||0),o=parseInt(a.toFixed(n),10)+"",s=o.length>3?o.length%3:0;return[r,s?o.substr(0,s)+i:"",o.substr(s).replace(/(\d{3})(?=\d)/g,"$1"+i),n?"."+Math.abs(a-o).toFixed(n).slice(2):""].join("")}}),t.measureAction=function(e,n){return new t.MeasureAction(e,n)}},window);const YAt="mapbox",XAt="satellite-v9",WAt="pk.eyJ1IjoiamllbGlhZWNvbSIsImEiOiJjbGpmMjl0ajEyZjBzM2ZucTl4ZXg3bDltIn0.x-dUDZaLiiU47XuO9QVACA",VAt=`https://api.mapbox.com/styles/v1/${YAt}/${XAt}/tiles/256/{z}/{x}/{y}@2x?access_token=${WAt}`,QAt=' <a href="https://www.mapbox.com/about/maps/">Mapbox</a>';function KAt(){const t=BAt();return Te.useEffect(()=>{!t||document.querySelector(".leaflet-control-measure")||(ux.Measure={title:"Measure",linearMeasurement:"Distance",areaMeasurement:"Area",start:"Start",feet:"ft",mile:"miles",sqft:"sqft",acres:"acres",feetDecimals:0,mileDecimals:2,sqftDecimals:0,acresDecimals:2},ux.control.measure().addTo(t))},[t]),Dn.jsxs(Dn.Fragment,{children:[Dn.jsx(HAt,{attribution:QAt,url:VAt}),Dn.jsx(qAt,{position:[51.505,-.09],children:Dn.jsxs(jAt,{children:["A pretty CSS3 popup. ",Dn.jsx("br",{})," Easily customizable."]})})]})}function JAt(){return Dn.jsx("section",{className:"w-[90%] max-w-[900px] h-[500px]",children:Dn.jsx(IAt,{zoomControl:!1,center:[51.505,-.09],zoom:13,minZoom:11,maxZoom:16,className:"w-full h-full",children:Dn.jsx(KAt,{})})})}function tTt(){return Dn.jsx("section",{className:"w-full h-[100vh] flex h-full items-center overflow-y-auto justify-center py-8",children:Dn.jsxs("section",{className:"w-full max-w-[1200px] gap-8 overflow-y-auto flex flex-col items-center",children:[Dn.jsxs("section",{className:"w-full flex flex-col items-center gap-4",children:[Dn.jsx("h2",{className:"m-0 text-xl",children:"Chart"}),Dn.jsx(bAt,{spec:EAt})]}),Dn.jsxs("section",{className:"w-full flex flex-col items-center gap-4",children:[Dn.jsx("h2",{className:"m-0 text-xl",children:"Map"}),Dn.jsx(JAt,{})]})]})})}fW.createRoot(document.getElementById("root")).render(Dn.jsx(Te.StrictMode,{children:Dn.jsx(tTt,{})}))});export default eTt();
