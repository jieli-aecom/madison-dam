var NV=Object.defineProperty;var AN=e=>{throw TypeError(e)};var zV=(e,t,n)=>t in e?NV(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var oe=(e,t,n)=>zV(e,typeof t!="symbol"?t+"":t,n),$N=(e,t,n)=>t.has(e)||AN("Cannot "+n);var CN=(e,t,n)=>($N(e,t,"read from private field"),n?n.call(e):t.get(e)),TN=(e,t,n)=>t.has(e)?AN("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),VE=(e,t,n,i)=>($N(e,t,"write to private field"),i?i.call(e,n):t.set(e,n),n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const s of a.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&i(s)}).observe(document,{childList:!0,subtree:!0});function n(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerPolicy&&(a.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?a.credentials="include":r.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(r){if(r.ep)return;r.ep=!0;const a=n(r);fetch(r.href,a)}})();var WE={exports:{}},qh={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var MN;function FV(){if(MN)return qh;MN=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(i,r,a){var s=null;if(a!==void 0&&(s=""+a),r.key!==void 0&&(s=""+r.key),"key"in r){a={};for(var o in r)o!=="key"&&(a[o]=r[o])}else a=r;return r=a.ref,{$$typeof:e,type:i,key:s,ref:r!==void 0?r:null,props:a}}return qh.Fragment=t,qh.jsx=n,qh.jsxs=n,qh}var kN;function LV(){return kN||(kN=1,WE.exports=FV()),WE.exports}var Jg=LV(),QE={exports:{}},je={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ON;function UV(){if(ON)return je;ON=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),s=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),g=Symbol.iterator;function p(N){return N===null||typeof N!="object"?null:(N=g&&N[g]||N["@@iterator"],typeof N=="function"?N:null)}var y={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,b={};function E(N,W,ne){this.props=N,this.context=W,this.refs=b,this.updater=ne||y}E.prototype.isReactComponent={},E.prototype.setState=function(N,W){if(typeof N!="object"&&typeof N!="function"&&N!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,N,W,"setState")},E.prototype.forceUpdate=function(N){this.updater.enqueueForceUpdate(this,N,"forceUpdate")};function _(){}_.prototype=E.prototype;function w(N,W,ne){this.props=N,this.context=W,this.refs=b,this.updater=ne||y}var A=w.prototype=new _;A.constructor=w,v(A,E.prototype),A.isPureReactComponent=!0;var $=Array.isArray,C={H:null,A:null,T:null,S:null,V:null},k=Object.prototype.hasOwnProperty;function M(N,W,ne,se,ye,Se){return ne=Se.ref,{$$typeof:e,type:N,key:W,ref:ne!==void 0?ne:null,props:Se}}function R(N,W){return M(N.type,W,void 0,void 0,void 0,N.props)}function z(N){return typeof N=="object"&&N!==null&&N.$$typeof===e}function B(N){var W={"=":"=0",":":"=2"};return"$"+N.replace(/[=:]/g,function(ne){return W[ne]})}var U=/\/+/g;function V(N,W){return typeof N=="object"&&N!==null&&N.key!=null?B(""+N.key):W.toString(36)}function G(){}function q(N){switch(N.status){case"fulfilled":return N.value;case"rejected":throw N.reason;default:switch(typeof N.status=="string"?N.then(G,G):(N.status="pending",N.then(function(W){N.status==="pending"&&(N.status="fulfilled",N.value=W)},function(W){N.status==="pending"&&(N.status="rejected",N.reason=W)})),N.status){case"fulfilled":return N.value;case"rejected":throw N.reason}}throw N}function F(N,W,ne,se,ye){var Se=typeof N;(Se==="undefined"||Se==="boolean")&&(N=null);var $e=!1;if(N===null)$e=!0;else switch(Se){case"bigint":case"string":case"number":$e=!0;break;case"object":switch(N.$$typeof){case e:case t:$e=!0;break;case d:return $e=N._init,F($e(N._payload),W,ne,se,ye)}}if($e)return ye=ye(N),$e=se===""?"."+V(N,0):se,$(ye)?(ne="",$e!=null&&(ne=$e.replace(U,"$&/")+"/"),F(ye,W,ne,"",function(xe){return xe})):ye!=null&&(z(ye)&&(ye=R(ye,ne+(ye.key==null||N&&N.key===ye.key?"":(""+ye.key).replace(U,"$&/")+"/")+$e)),W.push(ye)),1;$e=0;var Ht=se===""?".":se+":";if($(N))for(var nt=0;nt<N.length;nt++)se=N[nt],Se=Ht+V(se,nt),$e+=F(se,W,ne,Se,ye);else if(nt=p(N),typeof nt=="function")for(N=nt.call(N),nt=0;!(se=N.next()).done;)se=se.value,Se=Ht+V(se,nt++),$e+=F(se,W,ne,Se,ye);else if(Se==="object"){if(typeof N.then=="function")return F(q(N),W,ne,se,ye);throw W=String(N),Error("Objects are not valid as a React child (found: "+(W==="[object Object]"?"object with keys {"+Object.keys(N).join(", ")+"}":W)+"). If you meant to render a collection of children, use an array instead.")}return $e}function D(N,W,ne){if(N==null)return N;var se=[],ye=0;return F(N,se,"","",function(Se){return W.call(ne,Se,ye++)}),se}function I(N){if(N._status===-1){var W=N._result;W=W(),W.then(function(ne){(N._status===0||N._status===-1)&&(N._status=1,N._result=ne)},function(ne){(N._status===0||N._status===-1)&&(N._status=2,N._result=ne)}),N._status===-1&&(N._status=0,N._result=W)}if(N._status===1)return N._result.default;throw N._result}var Y=typeof reportError=="function"?reportError:function(N){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var W=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof N=="object"&&N!==null&&typeof N.message=="string"?String(N.message):String(N),error:N});if(!window.dispatchEvent(W))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",N);return}console.error(N)};function K(){}return je.Children={map:D,forEach:function(N,W,ne){D(N,function(){W.apply(this,arguments)},ne)},count:function(N){var W=0;return D(N,function(){W++}),W},toArray:function(N){return D(N,function(W){return W})||[]},only:function(N){if(!z(N))throw Error("React.Children.only expected to receive a single React element child.");return N}},je.Component=E,je.Fragment=n,je.Profiler=r,je.PureComponent=w,je.StrictMode=i,je.Suspense=l,je.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=C,je.__COMPILER_RUNTIME={__proto__:null,c:function(N){return C.H.useMemoCache(N)}},je.cache=function(N){return function(){return N.apply(null,arguments)}},je.cloneElement=function(N,W,ne){if(N==null)throw Error("The argument must be a React element, but you passed "+N+".");var se=v({},N.props),ye=N.key,Se=void 0;if(W!=null)for($e in W.ref!==void 0&&(Se=void 0),W.key!==void 0&&(ye=""+W.key),W)!k.call(W,$e)||$e==="key"||$e==="__self"||$e==="__source"||$e==="ref"&&W.ref===void 0||(se[$e]=W[$e]);var $e=arguments.length-2;if($e===1)se.children=ne;else if(1<$e){for(var Ht=Array($e),nt=0;nt<$e;nt++)Ht[nt]=arguments[nt+2];se.children=Ht}return M(N.type,ye,void 0,void 0,Se,se)},je.createContext=function(N){return N={$$typeof:s,_currentValue:N,_currentValue2:N,_threadCount:0,Provider:null,Consumer:null},N.Provider=N,N.Consumer={$$typeof:a,_context:N},N},je.createElement=function(N,W,ne){var se,ye={},Se=null;if(W!=null)for(se in W.key!==void 0&&(Se=""+W.key),W)k.call(W,se)&&se!=="key"&&se!=="__self"&&se!=="__source"&&(ye[se]=W[se]);var $e=arguments.length-2;if($e===1)ye.children=ne;else if(1<$e){for(var Ht=Array($e),nt=0;nt<$e;nt++)Ht[nt]=arguments[nt+2];ye.children=Ht}if(N&&N.defaultProps)for(se in $e=N.defaultProps,$e)ye[se]===void 0&&(ye[se]=$e[se]);return M(N,Se,void 0,void 0,null,ye)},je.createRef=function(){return{current:null}},je.forwardRef=function(N){return{$$typeof:o,render:N}},je.isValidElement=z,je.lazy=function(N){return{$$typeof:d,_payload:{_status:-1,_result:N},_init:I}},je.memo=function(N,W){return{$$typeof:f,type:N,compare:W===void 0?null:W}},je.startTransition=function(N){var W=C.T,ne={};C.T=ne;try{var se=N(),ye=C.S;ye!==null&&ye(ne,se),typeof se=="object"&&se!==null&&typeof se.then=="function"&&se.then(K,Y)}catch(Se){Y(Se)}finally{C.T=W}},je.unstable_useCacheRefresh=function(){return C.H.useCacheRefresh()},je.use=function(N){return C.H.use(N)},je.useActionState=function(N,W,ne){return C.H.useActionState(N,W,ne)},je.useCallback=function(N,W){return C.H.useCallback(N,W)},je.useContext=function(N){return C.H.useContext(N)},je.useDebugValue=function(){},je.useDeferredValue=function(N,W){return C.H.useDeferredValue(N,W)},je.useEffect=function(N,W,ne){var se=C.H;if(typeof ne=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return se.useEffect(N,W)},je.useId=function(){return C.H.useId()},je.useImperativeHandle=function(N,W,ne){return C.H.useImperativeHandle(N,W,ne)},je.useInsertionEffect=function(N,W){return C.H.useInsertionEffect(N,W)},je.useLayoutEffect=function(N,W){return C.H.useLayoutEffect(N,W)},je.useMemo=function(N,W){return C.H.useMemo(N,W)},je.useOptimistic=function(N,W){return C.H.useOptimistic(N,W)},je.useReducer=function(N,W,ne){return C.H.useReducer(N,W,ne)},je.useRef=function(N){return C.H.useRef(N)},je.useState=function(N){return C.H.useState(N)},je.useSyncExternalStore=function(N,W,ne){return C.H.useSyncExternalStore(N,W,ne)},je.useTransition=function(){return C.H.useTransition()},je.version="19.1.0",je}var DN;function l$(){return DN||(DN=1,QE.exports=UV()),QE.exports}var Y_=l$(),ZE={exports:{}},jh={},KE={exports:{}},JE={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var RN;function BV(){return RN||(RN=1,function(e){function t(D,I){var Y=D.length;D.push(I);e:for(;0<Y;){var K=Y-1>>>1,N=D[K];if(0<r(N,I))D[K]=I,D[Y]=N,Y=K;else break e}}function n(D){return D.length===0?null:D[0]}function i(D){if(D.length===0)return null;var I=D[0],Y=D.pop();if(Y!==I){D[0]=Y;e:for(var K=0,N=D.length,W=N>>>1;K<W;){var ne=2*(K+1)-1,se=D[ne],ye=ne+1,Se=D[ye];if(0>r(se,Y))ye<N&&0>r(Se,se)?(D[K]=Se,D[ye]=Y,K=ye):(D[K]=se,D[ne]=Y,K=ne);else if(ye<N&&0>r(Se,Y))D[K]=Se,D[ye]=Y,K=ye;else break e}}return I}function r(D,I){var Y=D.sortIndex-I.sortIndex;return Y!==0?Y:D.id-I.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;e.unstable_now=function(){return a.now()}}else{var s=Date,o=s.now();e.unstable_now=function(){return s.now()-o}}var l=[],f=[],d=1,g=null,p=3,y=!1,v=!1,b=!1,E=!1,_=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,A=typeof setImmediate<"u"?setImmediate:null;function $(D){for(var I=n(f);I!==null;){if(I.callback===null)i(f);else if(I.startTime<=D)i(f),I.sortIndex=I.expirationTime,t(l,I);else break;I=n(f)}}function C(D){if(b=!1,$(D),!v)if(n(l)!==null)v=!0,k||(k=!0,V());else{var I=n(f);I!==null&&F(C,I.startTime-D)}}var k=!1,M=-1,R=5,z=-1;function B(){return E?!0:!(e.unstable_now()-z<R)}function U(){if(E=!1,k){var D=e.unstable_now();z=D;var I=!0;try{e:{v=!1,b&&(b=!1,w(M),M=-1),y=!0;var Y=p;try{t:{for($(D),g=n(l);g!==null&&!(g.expirationTime>D&&B());){var K=g.callback;if(typeof K=="function"){g.callback=null,p=g.priorityLevel;var N=K(g.expirationTime<=D);if(D=e.unstable_now(),typeof N=="function"){g.callback=N,$(D),I=!0;break t}g===n(l)&&i(l),$(D)}else i(l);g=n(l)}if(g!==null)I=!0;else{var W=n(f);W!==null&&F(C,W.startTime-D),I=!1}}break e}finally{g=null,p=Y,y=!1}I=void 0}}finally{I?V():k=!1}}}var V;if(typeof A=="function")V=function(){A(U)};else if(typeof MessageChannel<"u"){var G=new MessageChannel,q=G.port2;G.port1.onmessage=U,V=function(){q.postMessage(null)}}else V=function(){_(U,0)};function F(D,I){M=_(function(){D(e.unstable_now())},I)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(D){D.callback=null},e.unstable_forceFrameRate=function(D){0>D||125<D?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<D?Math.floor(1e3/D):5},e.unstable_getCurrentPriorityLevel=function(){return p},e.unstable_next=function(D){switch(p){case 1:case 2:case 3:var I=3;break;default:I=p}var Y=p;p=I;try{return D()}finally{p=Y}},e.unstable_requestPaint=function(){E=!0},e.unstable_runWithPriority=function(D,I){switch(D){case 1:case 2:case 3:case 4:case 5:break;default:D=3}var Y=p;p=D;try{return I()}finally{p=Y}},e.unstable_scheduleCallback=function(D,I,Y){var K=e.unstable_now();switch(typeof Y=="object"&&Y!==null?(Y=Y.delay,Y=typeof Y=="number"&&0<Y?K+Y:K):Y=K,D){case 1:var N=-1;break;case 2:N=250;break;case 5:N=1073741823;break;case 4:N=1e4;break;default:N=5e3}return N=Y+N,D={id:d++,callback:I,priorityLevel:D,startTime:Y,expirationTime:N,sortIndex:-1},Y>K?(D.sortIndex=Y,t(f,D),n(l)===null&&D===n(f)&&(b?(w(M),M=-1):b=!0,F(C,Y-K))):(D.sortIndex=N,t(l,D),v||y||(v=!0,k||(k=!0,V()))),D},e.unstable_shouldYield=B,e.unstable_wrapCallback=function(D){var I=p;return function(){var Y=p;p=I;try{return D.apply(this,arguments)}finally{p=Y}}}}(JE)),JE}var NN;function IV(){return NN||(NN=1,KE.exports=BV()),KE.exports}var eS={exports:{}},jn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zN;function PV(){if(zN)return jn;zN=1;var e=l$();function t(l){var f="https://react.dev/errors/"+l;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var d=2;d<arguments.length;d++)f+="&args[]="+encodeURIComponent(arguments[d])}return"Minified React error #"+l+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var i={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},r=Symbol.for("react.portal");function a(l,f,d){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:g==null?null:""+g,children:l,containerInfo:f,implementation:d}}var s=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function o(l,f){if(l==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return jn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,jn.createPortal=function(l,f){var d=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(t(299));return a(l,f,null,d)},jn.flushSync=function(l){var f=s.T,d=i.p;try{if(s.T=null,i.p=2,l)return l()}finally{s.T=f,i.p=d,i.d.f()}},jn.preconnect=function(l,f){typeof l=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,i.d.C(l,f))},jn.prefetchDNS=function(l){typeof l=="string"&&i.d.D(l)},jn.preinit=function(l,f){if(typeof l=="string"&&f&&typeof f.as=="string"){var d=f.as,g=o(d,f.crossOrigin),p=typeof f.integrity=="string"?f.integrity:void 0,y=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;d==="style"?i.d.S(l,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:g,integrity:p,fetchPriority:y}):d==="script"&&i.d.X(l,{crossOrigin:g,integrity:p,fetchPriority:y,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},jn.preinitModule=function(l,f){if(typeof l=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var d=o(f.as,f.crossOrigin);i.d.M(l,{crossOrigin:d,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&i.d.M(l)},jn.preload=function(l,f){if(typeof l=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var d=f.as,g=o(d,f.crossOrigin);i.d.L(l,d,{crossOrigin:g,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},jn.preloadModule=function(l,f){if(typeof l=="string")if(f){var d=o(f.as,f.crossOrigin);i.d.m(l,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:d,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else i.d.m(l)},jn.requestFormReset=function(l){i.d.r(l)},jn.unstable_batchedUpdates=function(l,f){return l(f)},jn.useFormState=function(l,f,d){return s.H.useFormState(l,f,d)},jn.useFormStatus=function(){return s.H.useHostTransitionStatus()},jn.version="19.1.0",jn}var FN;function qV(){if(FN)return eS.exports;FN=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),eS.exports=PV(),eS.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var LN;function jV(){if(LN)return jh;LN=1;var e=IV(),t=l$(),n=qV();function i(u){var c="https://react.dev/errors/"+u;if(1<arguments.length){c+="?args[]="+encodeURIComponent(arguments[1]);for(var h=2;h<arguments.length;h++)c+="&args[]="+encodeURIComponent(arguments[h])}return"Minified React error #"+u+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(u){return!(!u||u.nodeType!==1&&u.nodeType!==9&&u.nodeType!==11)}function a(u){var c=u,h=u;if(u.alternate)for(;c.return;)c=c.return;else{u=c;do c=u,(c.flags&4098)!==0&&(h=c.return),u=c.return;while(u)}return c.tag===3?h:null}function s(u){if(u.tag===13){var c=u.memoizedState;if(c===null&&(u=u.alternate,u!==null&&(c=u.memoizedState)),c!==null)return c.dehydrated}return null}function o(u){if(a(u)!==u)throw Error(i(188))}function l(u){var c=u.alternate;if(!c){if(c=a(u),c===null)throw Error(i(188));return c!==u?null:u}for(var h=u,m=c;;){var x=h.return;if(x===null)break;var S=x.alternate;if(S===null){if(m=x.return,m!==null){h=m;continue}break}if(x.child===S.child){for(S=x.child;S;){if(S===h)return o(x),u;if(S===m)return o(x),c;S=S.sibling}throw Error(i(188))}if(h.return!==m.return)h=x,m=S;else{for(var T=!1,O=x.child;O;){if(O===h){T=!0,h=x,m=S;break}if(O===m){T=!0,m=x,h=S;break}O=O.sibling}if(!T){for(O=S.child;O;){if(O===h){T=!0,h=S,m=x;break}if(O===m){T=!0,m=S,h=x;break}O=O.sibling}if(!T)throw Error(i(189))}}if(h.alternate!==m)throw Error(i(190))}if(h.tag!==3)throw Error(i(188));return h.stateNode.current===h?u:c}function f(u){var c=u.tag;if(c===5||c===26||c===27||c===6)return u;for(u=u.child;u!==null;){if(c=f(u),c!==null)return c;u=u.sibling}return null}var d=Object.assign,g=Symbol.for("react.element"),p=Symbol.for("react.transitional.element"),y=Symbol.for("react.portal"),v=Symbol.for("react.fragment"),b=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),_=Symbol.for("react.provider"),w=Symbol.for("react.consumer"),A=Symbol.for("react.context"),$=Symbol.for("react.forward_ref"),C=Symbol.for("react.suspense"),k=Symbol.for("react.suspense_list"),M=Symbol.for("react.memo"),R=Symbol.for("react.lazy"),z=Symbol.for("react.activity"),B=Symbol.for("react.memo_cache_sentinel"),U=Symbol.iterator;function V(u){return u===null||typeof u!="object"?null:(u=U&&u[U]||u["@@iterator"],typeof u=="function"?u:null)}var G=Symbol.for("react.client.reference");function q(u){if(u==null)return null;if(typeof u=="function")return u.$$typeof===G?null:u.displayName||u.name||null;if(typeof u=="string")return u;switch(u){case v:return"Fragment";case E:return"Profiler";case b:return"StrictMode";case C:return"Suspense";case k:return"SuspenseList";case z:return"Activity"}if(typeof u=="object")switch(u.$$typeof){case y:return"Portal";case A:return(u.displayName||"Context")+".Provider";case w:return(u._context.displayName||"Context")+".Consumer";case $:var c=u.render;return u=u.displayName,u||(u=c.displayName||c.name||"",u=u!==""?"ForwardRef("+u+")":"ForwardRef"),u;case M:return c=u.displayName||null,c!==null?c:q(u.type)||"Memo";case R:c=u._payload,u=u._init;try{return q(u(c))}catch{}}return null}var F=Array.isArray,D=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,I=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Y={pending:!1,data:null,method:null,action:null},K=[],N=-1;function W(u){return{current:u}}function ne(u){0>N||(u.current=K[N],K[N]=null,N--)}function se(u,c){N++,K[N]=u.current,u.current=c}var ye=W(null),Se=W(null),$e=W(null),Ht=W(null);function nt(u,c){switch(se($e,c),se(Se,u),se(ye,null),c.nodeType){case 9:case 11:u=(u=c.documentElement)&&(u=u.namespaceURI)?JR(u):0;break;default:if(u=c.tagName,c=c.namespaceURI)c=JR(c),u=eN(c,u);else switch(u){case"svg":u=1;break;case"math":u=2;break;default:u=0}}ne(ye),se(ye,u)}function xe(){ne(ye),ne(Se),ne($e)}function Ue(u){u.memoizedState!==null&&se(Ht,u);var c=ye.current,h=eN(c,u.type);c!==h&&(se(Se,u),se(ye,h))}function Ie(u){Se.current===u&&(ne(ye),ne(Se)),Ht.current===u&&(ne(Ht),Lh._currentValue=Y)}var fe=Object.prototype.hasOwnProperty,Gt=e.unstable_scheduleCallback,it=e.unstable_cancelCallback,Kt=e.unstable_shouldYield,gn=e.unstable_requestPaint,Jt=e.unstable_now,_0=e.unstable_getCurrentPriorityLevel,Rk=e.unstable_ImmediatePriority,Nk=e.unstable_UserBlockingPriority,w0=e.unstable_NormalPriority,pY=e.unstable_LowPriority,zk=e.unstable_IdlePriority,mY=e.log,yY=e.unstable_setDisableYieldValue,Gd=null,Pi=null;function lo(u){if(typeof mY=="function"&&yY(u),Pi&&typeof Pi.setStrictMode=="function")try{Pi.setStrictMode(Gd,u)}catch{}}var qi=Math.clz32?Math.clz32:xY,vY=Math.log,bY=Math.LN2;function xY(u){return u>>>=0,u===0?32:31-(vY(u)/bY|0)|0}var A0=256,$0=4194304;function zu(u){var c=u&42;if(c!==0)return c;switch(u&-u){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return u&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return u}}function C0(u,c,h){var m=u.pendingLanes;if(m===0)return 0;var x=0,S=u.suspendedLanes,T=u.pingedLanes;u=u.warmLanes;var O=m&134217727;return O!==0?(m=O&~S,m!==0?x=zu(m):(T&=O,T!==0?x=zu(T):h||(h=O&~u,h!==0&&(x=zu(h))))):(O=m&~S,O!==0?x=zu(O):T!==0?x=zu(T):h||(h=m&~u,h!==0&&(x=zu(h)))),x===0?0:c!==0&&c!==x&&(c&S)===0&&(S=x&-x,h=c&-c,S>=h||S===32&&(h&4194048)!==0)?c:x}function Yd(u,c){return(u.pendingLanes&~(u.suspendedLanes&~u.pingedLanes)&c)===0}function EY(u,c){switch(u){case 1:case 2:case 4:case 8:case 64:return c+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Fk(){var u=A0;return A0<<=1,(A0&4194048)===0&&(A0=256),u}function Lk(){var u=$0;return $0<<=1,($0&62914560)===0&&($0=4194304),u}function Lx(u){for(var c=[],h=0;31>h;h++)c.push(u);return c}function Xd(u,c){u.pendingLanes|=c,c!==268435456&&(u.suspendedLanes=0,u.pingedLanes=0,u.warmLanes=0)}function SY(u,c,h,m,x,S){var T=u.pendingLanes;u.pendingLanes=h,u.suspendedLanes=0,u.pingedLanes=0,u.warmLanes=0,u.expiredLanes&=h,u.entangledLanes&=h,u.errorRecoveryDisabledLanes&=h,u.shellSuspendCounter=0;var O=u.entanglements,L=u.expirationTimes,X=u.hiddenUpdates;for(h=T&~h;0<h;){var ie=31-qi(h),ue=1<<ie;O[ie]=0,L[ie]=-1;var Q=X[ie];if(Q!==null)for(X[ie]=null,ie=0;ie<Q.length;ie++){var Z=Q[ie];Z!==null&&(Z.lane&=-536870913)}h&=~ue}m!==0&&Uk(u,m,0),S!==0&&x===0&&u.tag!==0&&(u.suspendedLanes|=S&~(T&~c))}function Uk(u,c,h){u.pendingLanes|=c,u.suspendedLanes&=~c;var m=31-qi(c);u.entangledLanes|=c,u.entanglements[m]=u.entanglements[m]|1073741824|h&4194090}function Bk(u,c){var h=u.entangledLanes|=c;for(u=u.entanglements;h;){var m=31-qi(h),x=1<<m;x&c|u[m]&c&&(u[m]|=c),h&=~x}}function Ux(u){switch(u){case 2:u=1;break;case 8:u=4;break;case 32:u=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:u=128;break;case 268435456:u=134217728;break;default:u=0}return u}function Bx(u){return u&=-u,2<u?8<u?(u&134217727)!==0?32:268435456:8:2}function Ik(){var u=I.p;return u!==0?u:(u=window.event,u===void 0?32:bN(u.type))}function _Y(u,c){var h=I.p;try{return I.p=u,c()}finally{I.p=h}}var co=Math.random().toString(36).slice(2),Pn="__reactFiber$"+co,Si="__reactProps$"+co,vc="__reactContainer$"+co,Ix="__reactEvents$"+co,wY="__reactListeners$"+co,AY="__reactHandles$"+co,Pk="__reactResources$"+co,Vd="__reactMarker$"+co;function Px(u){delete u[Pn],delete u[Si],delete u[Ix],delete u[wY],delete u[AY]}function bc(u){var c=u[Pn];if(c)return c;for(var h=u.parentNode;h;){if(c=h[vc]||h[Pn]){if(h=c.alternate,c.child!==null||h!==null&&h.child!==null)for(u=rN(u);u!==null;){if(h=u[Pn])return h;u=rN(u)}return c}u=h,h=u.parentNode}return null}function xc(u){if(u=u[Pn]||u[vc]){var c=u.tag;if(c===5||c===6||c===13||c===26||c===27||c===3)return u}return null}function Wd(u){var c=u.tag;if(c===5||c===26||c===27||c===6)return u.stateNode;throw Error(i(33))}function Ec(u){var c=u[Pk];return c||(c=u[Pk]={hoistableStyles:new Map,hoistableScripts:new Map}),c}function pn(u){u[Vd]=!0}var qk=new Set,jk={};function Fu(u,c){Sc(u,c),Sc(u+"Capture",c)}function Sc(u,c){for(jk[u]=c,u=0;u<c.length;u++)qk.add(c[u])}var $Y=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Hk={},Gk={};function CY(u){return fe.call(Gk,u)?!0:fe.call(Hk,u)?!1:$Y.test(u)?Gk[u]=!0:(Hk[u]=!0,!1)}function T0(u,c,h){if(CY(c))if(h===null)u.removeAttribute(c);else{switch(typeof h){case"undefined":case"function":case"symbol":u.removeAttribute(c);return;case"boolean":var m=c.toLowerCase().slice(0,5);if(m!=="data-"&&m!=="aria-"){u.removeAttribute(c);return}}u.setAttribute(c,""+h)}}function M0(u,c,h){if(h===null)u.removeAttribute(c);else{switch(typeof h){case"undefined":case"function":case"symbol":case"boolean":u.removeAttribute(c);return}u.setAttribute(c,""+h)}}function cs(u,c,h,m){if(m===null)u.removeAttribute(h);else{switch(typeof m){case"undefined":case"function":case"symbol":case"boolean":u.removeAttribute(h);return}u.setAttributeNS(c,h,""+m)}}var qx,Yk;function _c(u){if(qx===void 0)try{throw Error()}catch(h){var c=h.stack.trim().match(/\n( *(at )?)/);qx=c&&c[1]||"",Yk=-1<h.stack.indexOf(`
    at`)?" (<anonymous>)":-1<h.stack.indexOf("@")?"@unknown:0:0":""}return`
`+qx+u+Yk}var jx=!1;function Hx(u,c){if(!u||jx)return"";jx=!0;var h=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var m={DetermineComponentFrameRoot:function(){try{if(c){var ue=function(){throw Error()};if(Object.defineProperty(ue.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ue,[])}catch(Z){var Q=Z}Reflect.construct(u,[],ue)}else{try{ue.call()}catch(Z){Q=Z}u.call(ue.prototype)}}else{try{throw Error()}catch(Z){Q=Z}(ue=u())&&typeof ue.catch=="function"&&ue.catch(function(){})}}catch(Z){if(Z&&Q&&typeof Z.stack=="string")return[Z.stack,Q.stack]}return[null,null]}};m.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var x=Object.getOwnPropertyDescriptor(m.DetermineComponentFrameRoot,"name");x&&x.configurable&&Object.defineProperty(m.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var S=m.DetermineComponentFrameRoot(),T=S[0],O=S[1];if(T&&O){var L=T.split(`
`),X=O.split(`
`);for(x=m=0;m<L.length&&!L[m].includes("DetermineComponentFrameRoot");)m++;for(;x<X.length&&!X[x].includes("DetermineComponentFrameRoot");)x++;if(m===L.length||x===X.length)for(m=L.length-1,x=X.length-1;1<=m&&0<=x&&L[m]!==X[x];)x--;for(;1<=m&&0<=x;m--,x--)if(L[m]!==X[x]){if(m!==1||x!==1)do if(m--,x--,0>x||L[m]!==X[x]){var ie=`
`+L[m].replace(" at new "," at ");return u.displayName&&ie.includes("<anonymous>")&&(ie=ie.replace("<anonymous>",u.displayName)),ie}while(1<=m&&0<=x);break}}}finally{jx=!1,Error.prepareStackTrace=h}return(h=u?u.displayName||u.name:"")?_c(h):""}function TY(u){switch(u.tag){case 26:case 27:case 5:return _c(u.type);case 16:return _c("Lazy");case 13:return _c("Suspense");case 19:return _c("SuspenseList");case 0:case 15:return Hx(u.type,!1);case 11:return Hx(u.type.render,!1);case 1:return Hx(u.type,!0);case 31:return _c("Activity");default:return""}}function Xk(u){try{var c="";do c+=TY(u),u=u.return;while(u);return c}catch(h){return`
Error generating stack: `+h.message+`
`+h.stack}}function fr(u){switch(typeof u){case"bigint":case"boolean":case"number":case"string":case"undefined":return u;case"object":return u;default:return""}}function Vk(u){var c=u.type;return(u=u.nodeName)&&u.toLowerCase()==="input"&&(c==="checkbox"||c==="radio")}function MY(u){var c=Vk(u)?"checked":"value",h=Object.getOwnPropertyDescriptor(u.constructor.prototype,c),m=""+u[c];if(!u.hasOwnProperty(c)&&typeof h<"u"&&typeof h.get=="function"&&typeof h.set=="function"){var x=h.get,S=h.set;return Object.defineProperty(u,c,{configurable:!0,get:function(){return x.call(this)},set:function(T){m=""+T,S.call(this,T)}}),Object.defineProperty(u,c,{enumerable:h.enumerable}),{getValue:function(){return m},setValue:function(T){m=""+T},stopTracking:function(){u._valueTracker=null,delete u[c]}}}}function k0(u){u._valueTracker||(u._valueTracker=MY(u))}function Wk(u){if(!u)return!1;var c=u._valueTracker;if(!c)return!0;var h=c.getValue(),m="";return u&&(m=Vk(u)?u.checked?"true":"false":u.value),u=m,u!==h?(c.setValue(u),!0):!1}function O0(u){if(u=u||(typeof document<"u"?document:void 0),typeof u>"u")return null;try{return u.activeElement||u.body}catch{return u.body}}var kY=/[\n"\\]/g;function dr(u){return u.replace(kY,function(c){return"\\"+c.charCodeAt(0).toString(16)+" "})}function Gx(u,c,h,m,x,S,T,O){u.name="",T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?u.type=T:u.removeAttribute("type"),c!=null?T==="number"?(c===0&&u.value===""||u.value!=c)&&(u.value=""+fr(c)):u.value!==""+fr(c)&&(u.value=""+fr(c)):T!=="submit"&&T!=="reset"||u.removeAttribute("value"),c!=null?Yx(u,T,fr(c)):h!=null?Yx(u,T,fr(h)):m!=null&&u.removeAttribute("value"),x==null&&S!=null&&(u.defaultChecked=!!S),x!=null&&(u.checked=x&&typeof x!="function"&&typeof x!="symbol"),O!=null&&typeof O!="function"&&typeof O!="symbol"&&typeof O!="boolean"?u.name=""+fr(O):u.removeAttribute("name")}function Qk(u,c,h,m,x,S,T,O){if(S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"&&(u.type=S),c!=null||h!=null){if(!(S!=="submit"&&S!=="reset"||c!=null))return;h=h!=null?""+fr(h):"",c=c!=null?""+fr(c):h,O||c===u.value||(u.value=c),u.defaultValue=c}m=m??x,m=typeof m!="function"&&typeof m!="symbol"&&!!m,u.checked=O?u.checked:!!m,u.defaultChecked=!!m,T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"&&(u.name=T)}function Yx(u,c,h){c==="number"&&O0(u.ownerDocument)===u||u.defaultValue===""+h||(u.defaultValue=""+h)}function wc(u,c,h,m){if(u=u.options,c){c={};for(var x=0;x<h.length;x++)c["$"+h[x]]=!0;for(h=0;h<u.length;h++)x=c.hasOwnProperty("$"+u[h].value),u[h].selected!==x&&(u[h].selected=x),x&&m&&(u[h].defaultSelected=!0)}else{for(h=""+fr(h),c=null,x=0;x<u.length;x++){if(u[x].value===h){u[x].selected=!0,m&&(u[x].defaultSelected=!0);return}c!==null||u[x].disabled||(c=u[x])}c!==null&&(c.selected=!0)}}function Zk(u,c,h){if(c!=null&&(c=""+fr(c),c!==u.value&&(u.value=c),h==null)){u.defaultValue!==c&&(u.defaultValue=c);return}u.defaultValue=h!=null?""+fr(h):""}function Kk(u,c,h,m){if(c==null){if(m!=null){if(h!=null)throw Error(i(92));if(F(m)){if(1<m.length)throw Error(i(93));m=m[0]}h=m}h==null&&(h=""),c=h}h=fr(c),u.defaultValue=h,m=u.textContent,m===h&&m!==""&&m!==null&&(u.value=m)}function Ac(u,c){if(c){var h=u.firstChild;if(h&&h===u.lastChild&&h.nodeType===3){h.nodeValue=c;return}}u.textContent=c}var OY=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Jk(u,c,h){var m=c.indexOf("--")===0;h==null||typeof h=="boolean"||h===""?m?u.setProperty(c,""):c==="float"?u.cssFloat="":u[c]="":m?u.setProperty(c,h):typeof h!="number"||h===0||OY.has(c)?c==="float"?u.cssFloat=h:u[c]=(""+h).trim():u[c]=h+"px"}function eO(u,c,h){if(c!=null&&typeof c!="object")throw Error(i(62));if(u=u.style,h!=null){for(var m in h)!h.hasOwnProperty(m)||c!=null&&c.hasOwnProperty(m)||(m.indexOf("--")===0?u.setProperty(m,""):m==="float"?u.cssFloat="":u[m]="");for(var x in c)m=c[x],c.hasOwnProperty(x)&&h[x]!==m&&Jk(u,x,m)}else for(var S in c)c.hasOwnProperty(S)&&Jk(u,S,c[S])}function Xx(u){if(u.indexOf("-")===-1)return!1;switch(u){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var DY=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),RY=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function D0(u){return RY.test(""+u)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":u}var Vx=null;function Wx(u){return u=u.target||u.srcElement||window,u.correspondingUseElement&&(u=u.correspondingUseElement),u.nodeType===3?u.parentNode:u}var $c=null,Cc=null;function tO(u){var c=xc(u);if(c&&(u=c.stateNode)){var h=u[Si]||null;e:switch(u=c.stateNode,c.type){case"input":if(Gx(u,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name),c=h.name,h.type==="radio"&&c!=null){for(h=u;h.parentNode;)h=h.parentNode;for(h=h.querySelectorAll('input[name="'+dr(""+c)+'"][type="radio"]'),c=0;c<h.length;c++){var m=h[c];if(m!==u&&m.form===u.form){var x=m[Si]||null;if(!x)throw Error(i(90));Gx(m,x.value,x.defaultValue,x.defaultValue,x.checked,x.defaultChecked,x.type,x.name)}}for(c=0;c<h.length;c++)m=h[c],m.form===u.form&&Wk(m)}break e;case"textarea":Zk(u,h.value,h.defaultValue);break e;case"select":c=h.value,c!=null&&wc(u,!!h.multiple,c,!1)}}}var Qx=!1;function nO(u,c,h){if(Qx)return u(c,h);Qx=!0;try{var m=u(c);return m}finally{if(Qx=!1,($c!==null||Cc!==null)&&(ym(),$c&&(c=$c,u=Cc,Cc=$c=null,tO(c),u)))for(c=0;c<u.length;c++)tO(u[c])}}function Qd(u,c){var h=u.stateNode;if(h===null)return null;var m=h[Si]||null;if(m===null)return null;h=m[c];e:switch(c){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(m=!m.disabled)||(u=u.type,m=!(u==="button"||u==="input"||u==="select"||u==="textarea")),u=!m;break e;default:u=!1}if(u)return null;if(h&&typeof h!="function")throw Error(i(231,c,typeof h));return h}var fs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Zx=!1;if(fs)try{var Zd={};Object.defineProperty(Zd,"passive",{get:function(){Zx=!0}}),window.addEventListener("test",Zd,Zd),window.removeEventListener("test",Zd,Zd)}catch{Zx=!1}var fo=null,Kx=null,R0=null;function iO(){if(R0)return R0;var u,c=Kx,h=c.length,m,x="value"in fo?fo.value:fo.textContent,S=x.length;for(u=0;u<h&&c[u]===x[u];u++);var T=h-u;for(m=1;m<=T&&c[h-m]===x[S-m];m++);return R0=x.slice(u,1<m?1-m:void 0)}function N0(u){var c=u.keyCode;return"charCode"in u?(u=u.charCode,u===0&&c===13&&(u=13)):u=c,u===10&&(u=13),32<=u||u===13?u:0}function z0(){return!0}function rO(){return!1}function _i(u){function c(h,m,x,S,T){this._reactName=h,this._targetInst=x,this.type=m,this.nativeEvent=S,this.target=T,this.currentTarget=null;for(var O in u)u.hasOwnProperty(O)&&(h=u[O],this[O]=h?h(S):S[O]);return this.isDefaultPrevented=(S.defaultPrevented!=null?S.defaultPrevented:S.returnValue===!1)?z0:rO,this.isPropagationStopped=rO,this}return d(c.prototype,{preventDefault:function(){this.defaultPrevented=!0;var h=this.nativeEvent;h&&(h.preventDefault?h.preventDefault():typeof h.returnValue!="unknown"&&(h.returnValue=!1),this.isDefaultPrevented=z0)},stopPropagation:function(){var h=this.nativeEvent;h&&(h.stopPropagation?h.stopPropagation():typeof h.cancelBubble!="unknown"&&(h.cancelBubble=!0),this.isPropagationStopped=z0)},persist:function(){},isPersistent:z0}),c}var Lu={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(u){return u.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},F0=_i(Lu),Kd=d({},Lu,{view:0,detail:0}),NY=_i(Kd),Jx,e2,Jd,L0=d({},Kd,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:n2,button:0,buttons:0,relatedTarget:function(u){return u.relatedTarget===void 0?u.fromElement===u.srcElement?u.toElement:u.fromElement:u.relatedTarget},movementX:function(u){return"movementX"in u?u.movementX:(u!==Jd&&(Jd&&u.type==="mousemove"?(Jx=u.screenX-Jd.screenX,e2=u.screenY-Jd.screenY):e2=Jx=0,Jd=u),Jx)},movementY:function(u){return"movementY"in u?u.movementY:e2}}),aO=_i(L0),zY=d({},L0,{dataTransfer:0}),FY=_i(zY),LY=d({},Kd,{relatedTarget:0}),t2=_i(LY),UY=d({},Lu,{animationName:0,elapsedTime:0,pseudoElement:0}),BY=_i(UY),IY=d({},Lu,{clipboardData:function(u){return"clipboardData"in u?u.clipboardData:window.clipboardData}}),PY=_i(IY),qY=d({},Lu,{data:0}),sO=_i(qY),jY={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},HY={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},GY={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function YY(u){var c=this.nativeEvent;return c.getModifierState?c.getModifierState(u):(u=GY[u])?!!c[u]:!1}function n2(){return YY}var XY=d({},Kd,{key:function(u){if(u.key){var c=jY[u.key]||u.key;if(c!=="Unidentified")return c}return u.type==="keypress"?(u=N0(u),u===13?"Enter":String.fromCharCode(u)):u.type==="keydown"||u.type==="keyup"?HY[u.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:n2,charCode:function(u){return u.type==="keypress"?N0(u):0},keyCode:function(u){return u.type==="keydown"||u.type==="keyup"?u.keyCode:0},which:function(u){return u.type==="keypress"?N0(u):u.type==="keydown"||u.type==="keyup"?u.keyCode:0}}),VY=_i(XY),WY=d({},L0,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),oO=_i(WY),QY=d({},Kd,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:n2}),ZY=_i(QY),KY=d({},Lu,{propertyName:0,elapsedTime:0,pseudoElement:0}),JY=_i(KY),eX=d({},L0,{deltaX:function(u){return"deltaX"in u?u.deltaX:"wheelDeltaX"in u?-u.wheelDeltaX:0},deltaY:function(u){return"deltaY"in u?u.deltaY:"wheelDeltaY"in u?-u.wheelDeltaY:"wheelDelta"in u?-u.wheelDelta:0},deltaZ:0,deltaMode:0}),tX=_i(eX),nX=d({},Lu,{newState:0,oldState:0}),iX=_i(nX),rX=[9,13,27,32],i2=fs&&"CompositionEvent"in window,eh=null;fs&&"documentMode"in document&&(eh=document.documentMode);var aX=fs&&"TextEvent"in window&&!eh,uO=fs&&(!i2||eh&&8<eh&&11>=eh),lO=" ",cO=!1;function fO(u,c){switch(u){case"keyup":return rX.indexOf(c.keyCode)!==-1;case"keydown":return c.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function dO(u){return u=u.detail,typeof u=="object"&&"data"in u?u.data:null}var Tc=!1;function sX(u,c){switch(u){case"compositionend":return dO(c);case"keypress":return c.which!==32?null:(cO=!0,lO);case"textInput":return u=c.data,u===lO&&cO?null:u;default:return null}}function oX(u,c){if(Tc)return u==="compositionend"||!i2&&fO(u,c)?(u=iO(),R0=Kx=fo=null,Tc=!1,u):null;switch(u){case"paste":return null;case"keypress":if(!(c.ctrlKey||c.altKey||c.metaKey)||c.ctrlKey&&c.altKey){if(c.char&&1<c.char.length)return c.char;if(c.which)return String.fromCharCode(c.which)}return null;case"compositionend":return uO&&c.locale!=="ko"?null:c.data;default:return null}}var uX={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function hO(u){var c=u&&u.nodeName&&u.nodeName.toLowerCase();return c==="input"?!!uX[u.type]:c==="textarea"}function gO(u,c,h,m){$c?Cc?Cc.push(m):Cc=[m]:$c=m,c=_m(c,"onChange"),0<c.length&&(h=new F0("onChange","change",null,h,m),u.push({event:h,listeners:c}))}var th=null,nh=null;function lX(u){VR(u,0)}function U0(u){var c=Wd(u);if(Wk(c))return u}function pO(u,c){if(u==="change")return c}var mO=!1;if(fs){var r2;if(fs){var a2="oninput"in document;if(!a2){var yO=document.createElement("div");yO.setAttribute("oninput","return;"),a2=typeof yO.oninput=="function"}r2=a2}else r2=!1;mO=r2&&(!document.documentMode||9<document.documentMode)}function vO(){th&&(th.detachEvent("onpropertychange",bO),nh=th=null)}function bO(u){if(u.propertyName==="value"&&U0(nh)){var c=[];gO(c,nh,u,Wx(u)),nO(lX,c)}}function cX(u,c,h){u==="focusin"?(vO(),th=c,nh=h,th.attachEvent("onpropertychange",bO)):u==="focusout"&&vO()}function fX(u){if(u==="selectionchange"||u==="keyup"||u==="keydown")return U0(nh)}function dX(u,c){if(u==="click")return U0(c)}function hX(u,c){if(u==="input"||u==="change")return U0(c)}function gX(u,c){return u===c&&(u!==0||1/u===1/c)||u!==u&&c!==c}var ji=typeof Object.is=="function"?Object.is:gX;function ih(u,c){if(ji(u,c))return!0;if(typeof u!="object"||u===null||typeof c!="object"||c===null)return!1;var h=Object.keys(u),m=Object.keys(c);if(h.length!==m.length)return!1;for(m=0;m<h.length;m++){var x=h[m];if(!fe.call(c,x)||!ji(u[x],c[x]))return!1}return!0}function xO(u){for(;u&&u.firstChild;)u=u.firstChild;return u}function EO(u,c){var h=xO(u);u=0;for(var m;h;){if(h.nodeType===3){if(m=u+h.textContent.length,u<=c&&m>=c)return{node:h,offset:c-u};u=m}e:{for(;h;){if(h.nextSibling){h=h.nextSibling;break e}h=h.parentNode}h=void 0}h=xO(h)}}function SO(u,c){return u&&c?u===c?!0:u&&u.nodeType===3?!1:c&&c.nodeType===3?SO(u,c.parentNode):"contains"in u?u.contains(c):u.compareDocumentPosition?!!(u.compareDocumentPosition(c)&16):!1:!1}function _O(u){u=u!=null&&u.ownerDocument!=null&&u.ownerDocument.defaultView!=null?u.ownerDocument.defaultView:window;for(var c=O0(u.document);c instanceof u.HTMLIFrameElement;){try{var h=typeof c.contentWindow.location.href=="string"}catch{h=!1}if(h)u=c.contentWindow;else break;c=O0(u.document)}return c}function s2(u){var c=u&&u.nodeName&&u.nodeName.toLowerCase();return c&&(c==="input"&&(u.type==="text"||u.type==="search"||u.type==="tel"||u.type==="url"||u.type==="password")||c==="textarea"||u.contentEditable==="true")}var pX=fs&&"documentMode"in document&&11>=document.documentMode,Mc=null,o2=null,rh=null,u2=!1;function wO(u,c,h){var m=h.window===h?h.document:h.nodeType===9?h:h.ownerDocument;u2||Mc==null||Mc!==O0(m)||(m=Mc,"selectionStart"in m&&s2(m)?m={start:m.selectionStart,end:m.selectionEnd}:(m=(m.ownerDocument&&m.ownerDocument.defaultView||window).getSelection(),m={anchorNode:m.anchorNode,anchorOffset:m.anchorOffset,focusNode:m.focusNode,focusOffset:m.focusOffset}),rh&&ih(rh,m)||(rh=m,m=_m(o2,"onSelect"),0<m.length&&(c=new F0("onSelect","select",null,c,h),u.push({event:c,listeners:m}),c.target=Mc)))}function Uu(u,c){var h={};return h[u.toLowerCase()]=c.toLowerCase(),h["Webkit"+u]="webkit"+c,h["Moz"+u]="moz"+c,h}var kc={animationend:Uu("Animation","AnimationEnd"),animationiteration:Uu("Animation","AnimationIteration"),animationstart:Uu("Animation","AnimationStart"),transitionrun:Uu("Transition","TransitionRun"),transitionstart:Uu("Transition","TransitionStart"),transitioncancel:Uu("Transition","TransitionCancel"),transitionend:Uu("Transition","TransitionEnd")},l2={},AO={};fs&&(AO=document.createElement("div").style,"AnimationEvent"in window||(delete kc.animationend.animation,delete kc.animationiteration.animation,delete kc.animationstart.animation),"TransitionEvent"in window||delete kc.transitionend.transition);function Bu(u){if(l2[u])return l2[u];if(!kc[u])return u;var c=kc[u],h;for(h in c)if(c.hasOwnProperty(h)&&h in AO)return l2[u]=c[h];return u}var $O=Bu("animationend"),CO=Bu("animationiteration"),TO=Bu("animationstart"),mX=Bu("transitionrun"),yX=Bu("transitionstart"),vX=Bu("transitioncancel"),MO=Bu("transitionend"),kO=new Map,c2="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");c2.push("scrollEnd");function Ir(u,c){kO.set(u,c),Fu(c,[u])}var OO=new WeakMap;function hr(u,c){if(typeof u=="object"&&u!==null){var h=OO.get(u);return h!==void 0?h:(c={value:u,source:c,stack:Xk(c)},OO.set(u,c),c)}return{value:u,source:c,stack:Xk(c)}}var gr=[],Oc=0,f2=0;function B0(){for(var u=Oc,c=f2=Oc=0;c<u;){var h=gr[c];gr[c++]=null;var m=gr[c];gr[c++]=null;var x=gr[c];gr[c++]=null;var S=gr[c];if(gr[c++]=null,m!==null&&x!==null){var T=m.pending;T===null?x.next=x:(x.next=T.next,T.next=x),m.pending=x}S!==0&&DO(h,x,S)}}function I0(u,c,h,m){gr[Oc++]=u,gr[Oc++]=c,gr[Oc++]=h,gr[Oc++]=m,f2|=m,u.lanes|=m,u=u.alternate,u!==null&&(u.lanes|=m)}function d2(u,c,h,m){return I0(u,c,h,m),P0(u)}function Dc(u,c){return I0(u,null,null,c),P0(u)}function DO(u,c,h){u.lanes|=h;var m=u.alternate;m!==null&&(m.lanes|=h);for(var x=!1,S=u.return;S!==null;)S.childLanes|=h,m=S.alternate,m!==null&&(m.childLanes|=h),S.tag===22&&(u=S.stateNode,u===null||u._visibility&1||(x=!0)),u=S,S=S.return;return u.tag===3?(S=u.stateNode,x&&c!==null&&(x=31-qi(h),u=S.hiddenUpdates,m=u[x],m===null?u[x]=[c]:m.push(c),c.lane=h|536870912),S):null}function P0(u){if(50<Mh)throw Mh=0,vE=null,Error(i(185));for(var c=u.return;c!==null;)u=c,c=u.return;return u.tag===3?u.stateNode:null}var Rc={};function bX(u,c,h,m){this.tag=u,this.key=h,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=c,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=m,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Hi(u,c,h,m){return new bX(u,c,h,m)}function h2(u){return u=u.prototype,!(!u||!u.isReactComponent)}function ds(u,c){var h=u.alternate;return h===null?(h=Hi(u.tag,c,u.key,u.mode),h.elementType=u.elementType,h.type=u.type,h.stateNode=u.stateNode,h.alternate=u,u.alternate=h):(h.pendingProps=c,h.type=u.type,h.flags=0,h.subtreeFlags=0,h.deletions=null),h.flags=u.flags&65011712,h.childLanes=u.childLanes,h.lanes=u.lanes,h.child=u.child,h.memoizedProps=u.memoizedProps,h.memoizedState=u.memoizedState,h.updateQueue=u.updateQueue,c=u.dependencies,h.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext},h.sibling=u.sibling,h.index=u.index,h.ref=u.ref,h.refCleanup=u.refCleanup,h}function RO(u,c){u.flags&=65011714;var h=u.alternate;return h===null?(u.childLanes=0,u.lanes=c,u.child=null,u.subtreeFlags=0,u.memoizedProps=null,u.memoizedState=null,u.updateQueue=null,u.dependencies=null,u.stateNode=null):(u.childLanes=h.childLanes,u.lanes=h.lanes,u.child=h.child,u.subtreeFlags=0,u.deletions=null,u.memoizedProps=h.memoizedProps,u.memoizedState=h.memoizedState,u.updateQueue=h.updateQueue,u.type=h.type,c=h.dependencies,u.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext}),u}function q0(u,c,h,m,x,S){var T=0;if(m=u,typeof u=="function")h2(u)&&(T=1);else if(typeof u=="string")T=EV(u,h,ye.current)?26:u==="html"||u==="head"||u==="body"?27:5;else e:switch(u){case z:return u=Hi(31,h,c,x),u.elementType=z,u.lanes=S,u;case v:return Iu(h.children,x,S,c);case b:T=8,x|=24;break;case E:return u=Hi(12,h,c,x|2),u.elementType=E,u.lanes=S,u;case C:return u=Hi(13,h,c,x),u.elementType=C,u.lanes=S,u;case k:return u=Hi(19,h,c,x),u.elementType=k,u.lanes=S,u;default:if(typeof u=="object"&&u!==null)switch(u.$$typeof){case _:case A:T=10;break e;case w:T=9;break e;case $:T=11;break e;case M:T=14;break e;case R:T=16,m=null;break e}T=29,h=Error(i(130,u===null?"null":typeof u,"")),m=null}return c=Hi(T,h,c,x),c.elementType=u,c.type=m,c.lanes=S,c}function Iu(u,c,h,m){return u=Hi(7,u,m,c),u.lanes=h,u}function g2(u,c,h){return u=Hi(6,u,null,c),u.lanes=h,u}function p2(u,c,h){return c=Hi(4,u.children!==null?u.children:[],u.key,c),c.lanes=h,c.stateNode={containerInfo:u.containerInfo,pendingChildren:null,implementation:u.implementation},c}var Nc=[],zc=0,j0=null,H0=0,pr=[],mr=0,Pu=null,hs=1,gs="";function qu(u,c){Nc[zc++]=H0,Nc[zc++]=j0,j0=u,H0=c}function NO(u,c,h){pr[mr++]=hs,pr[mr++]=gs,pr[mr++]=Pu,Pu=u;var m=hs;u=gs;var x=32-qi(m)-1;m&=~(1<<x),h+=1;var S=32-qi(c)+x;if(30<S){var T=x-x%5;S=(m&(1<<T)-1).toString(32),m>>=T,x-=T,hs=1<<32-qi(c)+x|h<<x|m,gs=S+u}else hs=1<<S|h<<x|m,gs=u}function m2(u){u.return!==null&&(qu(u,1),NO(u,1,0))}function y2(u){for(;u===j0;)j0=Nc[--zc],Nc[zc]=null,H0=Nc[--zc],Nc[zc]=null;for(;u===Pu;)Pu=pr[--mr],pr[mr]=null,gs=pr[--mr],pr[mr]=null,hs=pr[--mr],pr[mr]=null}var ri=null,Ut=null,lt=!1,ju=null,ba=!1,v2=Error(i(519));function Hu(u){var c=Error(i(418,""));throw oh(hr(c,u)),v2}function zO(u){var c=u.stateNode,h=u.type,m=u.memoizedProps;switch(c[Pn]=u,c[Si]=m,h){case"dialog":Qe("cancel",c),Qe("close",c);break;case"iframe":case"object":case"embed":Qe("load",c);break;case"video":case"audio":for(h=0;h<Oh.length;h++)Qe(Oh[h],c);break;case"source":Qe("error",c);break;case"img":case"image":case"link":Qe("error",c),Qe("load",c);break;case"details":Qe("toggle",c);break;case"input":Qe("invalid",c),Qk(c,m.value,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name,!0),k0(c);break;case"select":Qe("invalid",c);break;case"textarea":Qe("invalid",c),Kk(c,m.value,m.defaultValue,m.children),k0(c)}h=m.children,typeof h!="string"&&typeof h!="number"&&typeof h!="bigint"||c.textContent===""+h||m.suppressHydrationWarning===!0||KR(c.textContent,h)?(m.popover!=null&&(Qe("beforetoggle",c),Qe("toggle",c)),m.onScroll!=null&&Qe("scroll",c),m.onScrollEnd!=null&&Qe("scrollend",c),m.onClick!=null&&(c.onclick=wm),c=!0):c=!1,c||Hu(u)}function FO(u){for(ri=u.return;ri;)switch(ri.tag){case 5:case 13:ba=!1;return;case 27:case 3:ba=!0;return;default:ri=ri.return}}function ah(u){if(u!==ri)return!1;if(!lt)return FO(u),lt=!0,!1;var c=u.tag,h;if((h=c!==3&&c!==27)&&((h=c===5)&&(h=u.type,h=!(h!=="form"&&h!=="button")||NE(u.type,u.memoizedProps)),h=!h),h&&Ut&&Hu(u),FO(u),c===13){if(u=u.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(i(317));e:{for(u=u.nextSibling,c=0;u;){if(u.nodeType===8)if(h=u.data,h==="/$"){if(c===0){Ut=qr(u.nextSibling);break e}c--}else h!=="$"&&h!=="$!"&&h!=="$?"||c++;u=u.nextSibling}Ut=null}}else c===27?(c=Ut,To(u.type)?(u=UE,UE=null,Ut=u):Ut=c):Ut=ri?qr(u.stateNode.nextSibling):null;return!0}function sh(){Ut=ri=null,lt=!1}function LO(){var u=ju;return u!==null&&($i===null?$i=u:$i.push.apply($i,u),ju=null),u}function oh(u){ju===null?ju=[u]:ju.push(u)}var b2=W(null),Gu=null,ps=null;function ho(u,c,h){se(b2,c._currentValue),c._currentValue=h}function ms(u){u._currentValue=b2.current,ne(b2)}function x2(u,c,h){for(;u!==null;){var m=u.alternate;if((u.childLanes&c)!==c?(u.childLanes|=c,m!==null&&(m.childLanes|=c)):m!==null&&(m.childLanes&c)!==c&&(m.childLanes|=c),u===h)break;u=u.return}}function E2(u,c,h,m){var x=u.child;for(x!==null&&(x.return=u);x!==null;){var S=x.dependencies;if(S!==null){var T=x.child;S=S.firstContext;e:for(;S!==null;){var O=S;S=x;for(var L=0;L<c.length;L++)if(O.context===c[L]){S.lanes|=h,O=S.alternate,O!==null&&(O.lanes|=h),x2(S.return,h,u),m||(T=null);break e}S=O.next}}else if(x.tag===18){if(T=x.return,T===null)throw Error(i(341));T.lanes|=h,S=T.alternate,S!==null&&(S.lanes|=h),x2(T,h,u),T=null}else T=x.child;if(T!==null)T.return=x;else for(T=x;T!==null;){if(T===u){T=null;break}if(x=T.sibling,x!==null){x.return=T.return,T=x;break}T=T.return}x=T}}function uh(u,c,h,m){u=null;for(var x=c,S=!1;x!==null;){if(!S){if((x.flags&524288)!==0)S=!0;else if((x.flags&262144)!==0)break}if(x.tag===10){var T=x.alternate;if(T===null)throw Error(i(387));if(T=T.memoizedProps,T!==null){var O=x.type;ji(x.pendingProps.value,T.value)||(u!==null?u.push(O):u=[O])}}else if(x===Ht.current){if(T=x.alternate,T===null)throw Error(i(387));T.memoizedState.memoizedState!==x.memoizedState.memoizedState&&(u!==null?u.push(Lh):u=[Lh])}x=x.return}u!==null&&E2(c,u,h,m),c.flags|=262144}function G0(u){for(u=u.firstContext;u!==null;){if(!ji(u.context._currentValue,u.memoizedValue))return!0;u=u.next}return!1}function Yu(u){Gu=u,ps=null,u=u.dependencies,u!==null&&(u.firstContext=null)}function qn(u){return UO(Gu,u)}function Y0(u,c){return Gu===null&&Yu(u),UO(u,c)}function UO(u,c){var h=c._currentValue;if(c={context:c,memoizedValue:h,next:null},ps===null){if(u===null)throw Error(i(308));ps=c,u.dependencies={lanes:0,firstContext:c},u.flags|=524288}else ps=ps.next=c;return h}var xX=typeof AbortController<"u"?AbortController:function(){var u=[],c=this.signal={aborted:!1,addEventListener:function(h,m){u.push(m)}};this.abort=function(){c.aborted=!0,u.forEach(function(h){return h()})}},EX=e.unstable_scheduleCallback,SX=e.unstable_NormalPriority,an={$$typeof:A,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function S2(){return{controller:new xX,data:new Map,refCount:0}}function lh(u){u.refCount--,u.refCount===0&&EX(SX,function(){u.controller.abort()})}var ch=null,_2=0,Fc=0,Lc=null;function _X(u,c){if(ch===null){var h=ch=[];_2=0,Fc=AE(),Lc={status:"pending",value:void 0,then:function(m){h.push(m)}}}return _2++,c.then(BO,BO),c}function BO(){if(--_2===0&&ch!==null){Lc!==null&&(Lc.status="fulfilled");var u=ch;ch=null,Fc=0,Lc=null;for(var c=0;c<u.length;c++)(0,u[c])()}}function wX(u,c){var h=[],m={status:"pending",value:null,reason:null,then:function(x){h.push(x)}};return u.then(function(){m.status="fulfilled",m.value=c;for(var x=0;x<h.length;x++)(0,h[x])(c)},function(x){for(m.status="rejected",m.reason=x,x=0;x<h.length;x++)(0,h[x])(void 0)}),m}var IO=D.S;D.S=function(u,c){typeof c=="object"&&c!==null&&typeof c.then=="function"&&_X(u,c),IO!==null&&IO(u,c)};var Xu=W(null);function w2(){var u=Xu.current;return u!==null?u:$t.pooledCache}function X0(u,c){c===null?se(Xu,Xu.current):se(Xu,c.pool)}function PO(){var u=w2();return u===null?null:{parent:an._currentValue,pool:u}}var fh=Error(i(460)),qO=Error(i(474)),V0=Error(i(542)),A2={then:function(){}};function jO(u){return u=u.status,u==="fulfilled"||u==="rejected"}function W0(){}function HO(u,c,h){switch(h=u[h],h===void 0?u.push(c):h!==c&&(c.then(W0,W0),c=h),c.status){case"fulfilled":return c.value;case"rejected":throw u=c.reason,YO(u),u;default:if(typeof c.status=="string")c.then(W0,W0);else{if(u=$t,u!==null&&100<u.shellSuspendCounter)throw Error(i(482));u=c,u.status="pending",u.then(function(m){if(c.status==="pending"){var x=c;x.status="fulfilled",x.value=m}},function(m){if(c.status==="pending"){var x=c;x.status="rejected",x.reason=m}})}switch(c.status){case"fulfilled":return c.value;case"rejected":throw u=c.reason,YO(u),u}throw dh=c,fh}}var dh=null;function GO(){if(dh===null)throw Error(i(459));var u=dh;return dh=null,u}function YO(u){if(u===fh||u===V0)throw Error(i(483))}var go=!1;function $2(u){u.updateQueue={baseState:u.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function C2(u,c){u=u.updateQueue,c.updateQueue===u&&(c.updateQueue={baseState:u.baseState,firstBaseUpdate:u.firstBaseUpdate,lastBaseUpdate:u.lastBaseUpdate,shared:u.shared,callbacks:null})}function po(u){return{lane:u,tag:0,payload:null,callback:null,next:null}}function mo(u,c,h){var m=u.updateQueue;if(m===null)return null;if(m=m.shared,(ht&2)!==0){var x=m.pending;return x===null?c.next=c:(c.next=x.next,x.next=c),m.pending=c,c=P0(u),DO(u,null,h),c}return I0(u,m,c,h),P0(u)}function hh(u,c,h){if(c=c.updateQueue,c!==null&&(c=c.shared,(h&4194048)!==0)){var m=c.lanes;m&=u.pendingLanes,h|=m,c.lanes=h,Bk(u,h)}}function T2(u,c){var h=u.updateQueue,m=u.alternate;if(m!==null&&(m=m.updateQueue,h===m)){var x=null,S=null;if(h=h.firstBaseUpdate,h!==null){do{var T={lane:h.lane,tag:h.tag,payload:h.payload,callback:null,next:null};S===null?x=S=T:S=S.next=T,h=h.next}while(h!==null);S===null?x=S=c:S=S.next=c}else x=S=c;h={baseState:m.baseState,firstBaseUpdate:x,lastBaseUpdate:S,shared:m.shared,callbacks:m.callbacks},u.updateQueue=h;return}u=h.lastBaseUpdate,u===null?h.firstBaseUpdate=c:u.next=c,h.lastBaseUpdate=c}var M2=!1;function gh(){if(M2){var u=Lc;if(u!==null)throw u}}function ph(u,c,h,m){M2=!1;var x=u.updateQueue;go=!1;var S=x.firstBaseUpdate,T=x.lastBaseUpdate,O=x.shared.pending;if(O!==null){x.shared.pending=null;var L=O,X=L.next;L.next=null,T===null?S=X:T.next=X,T=L;var ie=u.alternate;ie!==null&&(ie=ie.updateQueue,O=ie.lastBaseUpdate,O!==T&&(O===null?ie.firstBaseUpdate=X:O.next=X,ie.lastBaseUpdate=L))}if(S!==null){var ue=x.baseState;T=0,ie=X=L=null,O=S;do{var Q=O.lane&-536870913,Z=Q!==O.lane;if(Z?(et&Q)===Q:(m&Q)===Q){Q!==0&&Q===Fc&&(M2=!0),ie!==null&&(ie=ie.next={lane:0,tag:O.tag,payload:O.payload,callback:null,next:null});e:{var Fe=u,Ne=O;Q=c;var xt=h;switch(Ne.tag){case 1:if(Fe=Ne.payload,typeof Fe=="function"){ue=Fe.call(xt,ue,Q);break e}ue=Fe;break e;case 3:Fe.flags=Fe.flags&-65537|128;case 0:if(Fe=Ne.payload,Q=typeof Fe=="function"?Fe.call(xt,ue,Q):Fe,Q==null)break e;ue=d({},ue,Q);break e;case 2:go=!0}}Q=O.callback,Q!==null&&(u.flags|=64,Z&&(u.flags|=8192),Z=x.callbacks,Z===null?x.callbacks=[Q]:Z.push(Q))}else Z={lane:Q,tag:O.tag,payload:O.payload,callback:O.callback,next:null},ie===null?(X=ie=Z,L=ue):ie=ie.next=Z,T|=Q;if(O=O.next,O===null){if(O=x.shared.pending,O===null)break;Z=O,O=Z.next,Z.next=null,x.lastBaseUpdate=Z,x.shared.pending=null}}while(!0);ie===null&&(L=ue),x.baseState=L,x.firstBaseUpdate=X,x.lastBaseUpdate=ie,S===null&&(x.shared.lanes=0),wo|=T,u.lanes=T,u.memoizedState=ue}}function XO(u,c){if(typeof u!="function")throw Error(i(191,u));u.call(c)}function VO(u,c){var h=u.callbacks;if(h!==null)for(u.callbacks=null,u=0;u<h.length;u++)XO(h[u],c)}var Uc=W(null),Q0=W(0);function WO(u,c){u=_s,se(Q0,u),se(Uc,c),_s=u|c.baseLanes}function k2(){se(Q0,_s),se(Uc,Uc.current)}function O2(){_s=Q0.current,ne(Uc),ne(Q0)}var yo=0,He=null,vt=null,en=null,Z0=!1,Bc=!1,Vu=!1,K0=0,mh=0,Ic=null,AX=0;function Yt(){throw Error(i(321))}function D2(u,c){if(c===null)return!1;for(var h=0;h<c.length&&h<u.length;h++)if(!ji(u[h],c[h]))return!1;return!0}function R2(u,c,h,m,x,S){return yo=S,He=c,c.memoizedState=null,c.updateQueue=null,c.lanes=0,D.H=u===null||u.memoizedState===null?DD:RD,Vu=!1,S=h(m,x),Vu=!1,Bc&&(S=ZO(c,h,m,x)),QO(u),S}function QO(u){D.H=rm;var c=vt!==null&&vt.next!==null;if(yo=0,en=vt=He=null,Z0=!1,mh=0,Ic=null,c)throw Error(i(300));u===null||mn||(u=u.dependencies,u!==null&&G0(u)&&(mn=!0))}function ZO(u,c,h,m){He=u;var x=0;do{if(Bc&&(Ic=null),mh=0,Bc=!1,25<=x)throw Error(i(301));if(x+=1,en=vt=null,u.updateQueue!=null){var S=u.updateQueue;S.lastEffect=null,S.events=null,S.stores=null,S.memoCache!=null&&(S.memoCache.index=0)}D.H=DX,S=c(h,m)}while(Bc);return S}function $X(){var u=D.H,c=u.useState()[0];return c=typeof c.then=="function"?yh(c):c,u=u.useState()[0],(vt!==null?vt.memoizedState:null)!==u&&(He.flags|=1024),c}function N2(){var u=K0!==0;return K0=0,u}function z2(u,c,h){c.updateQueue=u.updateQueue,c.flags&=-2053,u.lanes&=~h}function F2(u){if(Z0){for(u=u.memoizedState;u!==null;){var c=u.queue;c!==null&&(c.pending=null),u=u.next}Z0=!1}yo=0,en=vt=He=null,Bc=!1,mh=K0=0,Ic=null}function wi(){var u={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return en===null?He.memoizedState=en=u:en=en.next=u,en}function tn(){if(vt===null){var u=He.alternate;u=u!==null?u.memoizedState:null}else u=vt.next;var c=en===null?He.memoizedState:en.next;if(c!==null)en=c,vt=u;else{if(u===null)throw He.alternate===null?Error(i(467)):Error(i(310));vt=u,u={memoizedState:vt.memoizedState,baseState:vt.baseState,baseQueue:vt.baseQueue,queue:vt.queue,next:null},en===null?He.memoizedState=en=u:en=en.next=u}return en}function L2(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function yh(u){var c=mh;return mh+=1,Ic===null&&(Ic=[]),u=HO(Ic,u,c),c=He,(en===null?c.memoizedState:en.next)===null&&(c=c.alternate,D.H=c===null||c.memoizedState===null?DD:RD),u}function J0(u){if(u!==null&&typeof u=="object"){if(typeof u.then=="function")return yh(u);if(u.$$typeof===A)return qn(u)}throw Error(i(438,String(u)))}function U2(u){var c=null,h=He.updateQueue;if(h!==null&&(c=h.memoCache),c==null){var m=He.alternate;m!==null&&(m=m.updateQueue,m!==null&&(m=m.memoCache,m!=null&&(c={data:m.data.map(function(x){return x.slice()}),index:0})))}if(c==null&&(c={data:[],index:0}),h===null&&(h=L2(),He.updateQueue=h),h.memoCache=c,h=c.data[c.index],h===void 0)for(h=c.data[c.index]=Array(u),m=0;m<u;m++)h[m]=B;return c.index++,h}function ys(u,c){return typeof c=="function"?c(u):c}function em(u){var c=tn();return B2(c,vt,u)}function B2(u,c,h){var m=u.queue;if(m===null)throw Error(i(311));m.lastRenderedReducer=h;var x=u.baseQueue,S=m.pending;if(S!==null){if(x!==null){var T=x.next;x.next=S.next,S.next=T}c.baseQueue=x=S,m.pending=null}if(S=u.baseState,x===null)u.memoizedState=S;else{c=x.next;var O=T=null,L=null,X=c,ie=!1;do{var ue=X.lane&-536870913;if(ue!==X.lane?(et&ue)===ue:(yo&ue)===ue){var Q=X.revertLane;if(Q===0)L!==null&&(L=L.next={lane:0,revertLane:0,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null}),ue===Fc&&(ie=!0);else if((yo&Q)===Q){X=X.next,Q===Fc&&(ie=!0);continue}else ue={lane:0,revertLane:X.revertLane,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null},L===null?(O=L=ue,T=S):L=L.next=ue,He.lanes|=Q,wo|=Q;ue=X.action,Vu&&h(S,ue),S=X.hasEagerState?X.eagerState:h(S,ue)}else Q={lane:ue,revertLane:X.revertLane,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null},L===null?(O=L=Q,T=S):L=L.next=Q,He.lanes|=ue,wo|=ue;X=X.next}while(X!==null&&X!==c);if(L===null?T=S:L.next=O,!ji(S,u.memoizedState)&&(mn=!0,ie&&(h=Lc,h!==null)))throw h;u.memoizedState=S,u.baseState=T,u.baseQueue=L,m.lastRenderedState=S}return x===null&&(m.lanes=0),[u.memoizedState,m.dispatch]}function I2(u){var c=tn(),h=c.queue;if(h===null)throw Error(i(311));h.lastRenderedReducer=u;var m=h.dispatch,x=h.pending,S=c.memoizedState;if(x!==null){h.pending=null;var T=x=x.next;do S=u(S,T.action),T=T.next;while(T!==x);ji(S,c.memoizedState)||(mn=!0),c.memoizedState=S,c.baseQueue===null&&(c.baseState=S),h.lastRenderedState=S}return[S,m]}function KO(u,c,h){var m=He,x=tn(),S=lt;if(S){if(h===void 0)throw Error(i(407));h=h()}else h=c();var T=!ji((vt||x).memoizedState,h);T&&(x.memoizedState=h,mn=!0),x=x.queue;var O=tD.bind(null,m,x,u);if(vh(2048,8,O,[u]),x.getSnapshot!==c||T||en!==null&&en.memoizedState.tag&1){if(m.flags|=2048,Pc(9,tm(),eD.bind(null,m,x,h,c),null),$t===null)throw Error(i(349));S||(yo&124)!==0||JO(m,c,h)}return h}function JO(u,c,h){u.flags|=16384,u={getSnapshot:c,value:h},c=He.updateQueue,c===null?(c=L2(),He.updateQueue=c,c.stores=[u]):(h=c.stores,h===null?c.stores=[u]:h.push(u))}function eD(u,c,h,m){c.value=h,c.getSnapshot=m,nD(c)&&iD(u)}function tD(u,c,h){return h(function(){nD(c)&&iD(u)})}function nD(u){var c=u.getSnapshot;u=u.value;try{var h=c();return!ji(u,h)}catch{return!0}}function iD(u){var c=Dc(u,2);c!==null&&Wi(c,u,2)}function P2(u){var c=wi();if(typeof u=="function"){var h=u;if(u=h(),Vu){lo(!0);try{h()}finally{lo(!1)}}}return c.memoizedState=c.baseState=u,c.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ys,lastRenderedState:u},c}function rD(u,c,h,m){return u.baseState=h,B2(u,vt,typeof m=="function"?m:ys)}function CX(u,c,h,m,x){if(im(u))throw Error(i(485));if(u=c.action,u!==null){var S={payload:x,action:u,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(T){S.listeners.push(T)}};D.T!==null?h(!0):S.isTransition=!1,m(S),h=c.pending,h===null?(S.next=c.pending=S,aD(c,S)):(S.next=h.next,c.pending=h.next=S)}}function aD(u,c){var h=c.action,m=c.payload,x=u.state;if(c.isTransition){var S=D.T,T={};D.T=T;try{var O=h(x,m),L=D.S;L!==null&&L(T,O),sD(u,c,O)}catch(X){q2(u,c,X)}finally{D.T=S}}else try{S=h(x,m),sD(u,c,S)}catch(X){q2(u,c,X)}}function sD(u,c,h){h!==null&&typeof h=="object"&&typeof h.then=="function"?h.then(function(m){oD(u,c,m)},function(m){return q2(u,c,m)}):oD(u,c,h)}function oD(u,c,h){c.status="fulfilled",c.value=h,uD(c),u.state=h,c=u.pending,c!==null&&(h=c.next,h===c?u.pending=null:(h=h.next,c.next=h,aD(u,h)))}function q2(u,c,h){var m=u.pending;if(u.pending=null,m!==null){m=m.next;do c.status="rejected",c.reason=h,uD(c),c=c.next;while(c!==m)}u.action=null}function uD(u){u=u.listeners;for(var c=0;c<u.length;c++)(0,u[c])()}function lD(u,c){return c}function cD(u,c){if(lt){var h=$t.formState;if(h!==null){e:{var m=He;if(lt){if(Ut){t:{for(var x=Ut,S=ba;x.nodeType!==8;){if(!S){x=null;break t}if(x=qr(x.nextSibling),x===null){x=null;break t}}S=x.data,x=S==="F!"||S==="F"?x:null}if(x){Ut=qr(x.nextSibling),m=x.data==="F!";break e}}Hu(m)}m=!1}m&&(c=h[0])}}return h=wi(),h.memoizedState=h.baseState=c,m={pending:null,lanes:0,dispatch:null,lastRenderedReducer:lD,lastRenderedState:c},h.queue=m,h=MD.bind(null,He,m),m.dispatch=h,m=P2(!1),S=X2.bind(null,He,!1,m.queue),m=wi(),x={state:c,dispatch:null,action:u,pending:null},m.queue=x,h=CX.bind(null,He,x,S,h),x.dispatch=h,m.memoizedState=u,[c,h,!1]}function fD(u){var c=tn();return dD(c,vt,u)}function dD(u,c,h){if(c=B2(u,c,lD)[0],u=em(ys)[0],typeof c=="object"&&c!==null&&typeof c.then=="function")try{var m=yh(c)}catch(T){throw T===fh?V0:T}else m=c;c=tn();var x=c.queue,S=x.dispatch;return h!==c.memoizedState&&(He.flags|=2048,Pc(9,tm(),TX.bind(null,x,h),null)),[m,S,u]}function TX(u,c){u.action=c}function hD(u){var c=tn(),h=vt;if(h!==null)return dD(c,h,u);tn(),c=c.memoizedState,h=tn();var m=h.queue.dispatch;return h.memoizedState=u,[c,m,!1]}function Pc(u,c,h,m){return u={tag:u,create:h,deps:m,inst:c,next:null},c=He.updateQueue,c===null&&(c=L2(),He.updateQueue=c),h=c.lastEffect,h===null?c.lastEffect=u.next=u:(m=h.next,h.next=u,u.next=m,c.lastEffect=u),u}function tm(){return{destroy:void 0,resource:void 0}}function gD(){return tn().memoizedState}function nm(u,c,h,m){var x=wi();m=m===void 0?null:m,He.flags|=u,x.memoizedState=Pc(1|c,tm(),h,m)}function vh(u,c,h,m){var x=tn();m=m===void 0?null:m;var S=x.memoizedState.inst;vt!==null&&m!==null&&D2(m,vt.memoizedState.deps)?x.memoizedState=Pc(c,S,h,m):(He.flags|=u,x.memoizedState=Pc(1|c,S,h,m))}function pD(u,c){nm(8390656,8,u,c)}function mD(u,c){vh(2048,8,u,c)}function yD(u,c){return vh(4,2,u,c)}function vD(u,c){return vh(4,4,u,c)}function bD(u,c){if(typeof c=="function"){u=u();var h=c(u);return function(){typeof h=="function"?h():c(null)}}if(c!=null)return u=u(),c.current=u,function(){c.current=null}}function xD(u,c,h){h=h!=null?h.concat([u]):null,vh(4,4,bD.bind(null,c,u),h)}function j2(){}function ED(u,c){var h=tn();c=c===void 0?null:c;var m=h.memoizedState;return c!==null&&D2(c,m[1])?m[0]:(h.memoizedState=[u,c],u)}function SD(u,c){var h=tn();c=c===void 0?null:c;var m=h.memoizedState;if(c!==null&&D2(c,m[1]))return m[0];if(m=u(),Vu){lo(!0);try{u()}finally{lo(!1)}}return h.memoizedState=[m,c],m}function H2(u,c,h){return h===void 0||(yo&1073741824)!==0?u.memoizedState=c:(u.memoizedState=h,u=AR(),He.lanes|=u,wo|=u,h)}function _D(u,c,h,m){return ji(h,c)?h:Uc.current!==null?(u=H2(u,h,m),ji(u,c)||(mn=!0),u):(yo&42)===0?(mn=!0,u.memoizedState=h):(u=AR(),He.lanes|=u,wo|=u,c)}function wD(u,c,h,m,x){var S=I.p;I.p=S!==0&&8>S?S:8;var T=D.T,O={};D.T=O,X2(u,!1,c,h);try{var L=x(),X=D.S;if(X!==null&&X(O,L),L!==null&&typeof L=="object"&&typeof L.then=="function"){var ie=wX(L,m);bh(u,c,ie,Vi(u))}else bh(u,c,m,Vi(u))}catch(ue){bh(u,c,{then:function(){},status:"rejected",reason:ue},Vi())}finally{I.p=S,D.T=T}}function MX(){}function G2(u,c,h,m){if(u.tag!==5)throw Error(i(476));var x=AD(u).queue;wD(u,x,c,Y,h===null?MX:function(){return $D(u),h(m)})}function AD(u){var c=u.memoizedState;if(c!==null)return c;c={memoizedState:Y,baseState:Y,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ys,lastRenderedState:Y},next:null};var h={};return c.next={memoizedState:h,baseState:h,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ys,lastRenderedState:h},next:null},u.memoizedState=c,u=u.alternate,u!==null&&(u.memoizedState=c),c}function $D(u){var c=AD(u).next.queue;bh(u,c,{},Vi())}function Y2(){return qn(Lh)}function CD(){return tn().memoizedState}function TD(){return tn().memoizedState}function kX(u){for(var c=u.return;c!==null;){switch(c.tag){case 24:case 3:var h=Vi();u=po(h);var m=mo(c,u,h);m!==null&&(Wi(m,c,h),hh(m,c,h)),c={cache:S2()},u.payload=c;return}c=c.return}}function OX(u,c,h){var m=Vi();h={lane:m,revertLane:0,action:h,hasEagerState:!1,eagerState:null,next:null},im(u)?kD(c,h):(h=d2(u,c,h,m),h!==null&&(Wi(h,u,m),OD(h,c,m)))}function MD(u,c,h){var m=Vi();bh(u,c,h,m)}function bh(u,c,h,m){var x={lane:m,revertLane:0,action:h,hasEagerState:!1,eagerState:null,next:null};if(im(u))kD(c,x);else{var S=u.alternate;if(u.lanes===0&&(S===null||S.lanes===0)&&(S=c.lastRenderedReducer,S!==null))try{var T=c.lastRenderedState,O=S(T,h);if(x.hasEagerState=!0,x.eagerState=O,ji(O,T))return I0(u,c,x,0),$t===null&&B0(),!1}catch{}finally{}if(h=d2(u,c,x,m),h!==null)return Wi(h,u,m),OD(h,c,m),!0}return!1}function X2(u,c,h,m){if(m={lane:2,revertLane:AE(),action:m,hasEagerState:!1,eagerState:null,next:null},im(u)){if(c)throw Error(i(479))}else c=d2(u,h,m,2),c!==null&&Wi(c,u,2)}function im(u){var c=u.alternate;return u===He||c!==null&&c===He}function kD(u,c){Bc=Z0=!0;var h=u.pending;h===null?c.next=c:(c.next=h.next,h.next=c),u.pending=c}function OD(u,c,h){if((h&4194048)!==0){var m=c.lanes;m&=u.pendingLanes,h|=m,c.lanes=h,Bk(u,h)}}var rm={readContext:qn,use:J0,useCallback:Yt,useContext:Yt,useEffect:Yt,useImperativeHandle:Yt,useLayoutEffect:Yt,useInsertionEffect:Yt,useMemo:Yt,useReducer:Yt,useRef:Yt,useState:Yt,useDebugValue:Yt,useDeferredValue:Yt,useTransition:Yt,useSyncExternalStore:Yt,useId:Yt,useHostTransitionStatus:Yt,useFormState:Yt,useActionState:Yt,useOptimistic:Yt,useMemoCache:Yt,useCacheRefresh:Yt},DD={readContext:qn,use:J0,useCallback:function(u,c){return wi().memoizedState=[u,c===void 0?null:c],u},useContext:qn,useEffect:pD,useImperativeHandle:function(u,c,h){h=h!=null?h.concat([u]):null,nm(4194308,4,bD.bind(null,c,u),h)},useLayoutEffect:function(u,c){return nm(4194308,4,u,c)},useInsertionEffect:function(u,c){nm(4,2,u,c)},useMemo:function(u,c){var h=wi();c=c===void 0?null:c;var m=u();if(Vu){lo(!0);try{u()}finally{lo(!1)}}return h.memoizedState=[m,c],m},useReducer:function(u,c,h){var m=wi();if(h!==void 0){var x=h(c);if(Vu){lo(!0);try{h(c)}finally{lo(!1)}}}else x=c;return m.memoizedState=m.baseState=x,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:u,lastRenderedState:x},m.queue=u,u=u.dispatch=OX.bind(null,He,u),[m.memoizedState,u]},useRef:function(u){var c=wi();return u={current:u},c.memoizedState=u},useState:function(u){u=P2(u);var c=u.queue,h=MD.bind(null,He,c);return c.dispatch=h,[u.memoizedState,h]},useDebugValue:j2,useDeferredValue:function(u,c){var h=wi();return H2(h,u,c)},useTransition:function(){var u=P2(!1);return u=wD.bind(null,He,u.queue,!0,!1),wi().memoizedState=u,[!1,u]},useSyncExternalStore:function(u,c,h){var m=He,x=wi();if(lt){if(h===void 0)throw Error(i(407));h=h()}else{if(h=c(),$t===null)throw Error(i(349));(et&124)!==0||JO(m,c,h)}x.memoizedState=h;var S={value:h,getSnapshot:c};return x.queue=S,pD(tD.bind(null,m,S,u),[u]),m.flags|=2048,Pc(9,tm(),eD.bind(null,m,S,h,c),null),h},useId:function(){var u=wi(),c=$t.identifierPrefix;if(lt){var h=gs,m=hs;h=(m&~(1<<32-qi(m)-1)).toString(32)+h,c=""+c+"R"+h,h=K0++,0<h&&(c+="H"+h.toString(32)),c+=""}else h=AX++,c=""+c+"r"+h.toString(32)+"";return u.memoizedState=c},useHostTransitionStatus:Y2,useFormState:cD,useActionState:cD,useOptimistic:function(u){var c=wi();c.memoizedState=c.baseState=u;var h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return c.queue=h,c=X2.bind(null,He,!0,h),h.dispatch=c,[u,c]},useMemoCache:U2,useCacheRefresh:function(){return wi().memoizedState=kX.bind(null,He)}},RD={readContext:qn,use:J0,useCallback:ED,useContext:qn,useEffect:mD,useImperativeHandle:xD,useInsertionEffect:yD,useLayoutEffect:vD,useMemo:SD,useReducer:em,useRef:gD,useState:function(){return em(ys)},useDebugValue:j2,useDeferredValue:function(u,c){var h=tn();return _D(h,vt.memoizedState,u,c)},useTransition:function(){var u=em(ys)[0],c=tn().memoizedState;return[typeof u=="boolean"?u:yh(u),c]},useSyncExternalStore:KO,useId:CD,useHostTransitionStatus:Y2,useFormState:fD,useActionState:fD,useOptimistic:function(u,c){var h=tn();return rD(h,vt,u,c)},useMemoCache:U2,useCacheRefresh:TD},DX={readContext:qn,use:J0,useCallback:ED,useContext:qn,useEffect:mD,useImperativeHandle:xD,useInsertionEffect:yD,useLayoutEffect:vD,useMemo:SD,useReducer:I2,useRef:gD,useState:function(){return I2(ys)},useDebugValue:j2,useDeferredValue:function(u,c){var h=tn();return vt===null?H2(h,u,c):_D(h,vt.memoizedState,u,c)},useTransition:function(){var u=I2(ys)[0],c=tn().memoizedState;return[typeof u=="boolean"?u:yh(u),c]},useSyncExternalStore:KO,useId:CD,useHostTransitionStatus:Y2,useFormState:hD,useActionState:hD,useOptimistic:function(u,c){var h=tn();return vt!==null?rD(h,vt,u,c):(h.baseState=u,[u,h.queue.dispatch])},useMemoCache:U2,useCacheRefresh:TD},qc=null,xh=0;function am(u){var c=xh;return xh+=1,qc===null&&(qc=[]),HO(qc,u,c)}function Eh(u,c){c=c.props.ref,u.ref=c!==void 0?c:null}function sm(u,c){throw c.$$typeof===g?Error(i(525)):(u=Object.prototype.toString.call(c),Error(i(31,u==="[object Object]"?"object with keys {"+Object.keys(c).join(", ")+"}":u)))}function ND(u){var c=u._init;return c(u._payload)}function zD(u){function c(j,P){if(u){var H=j.deletions;H===null?(j.deletions=[P],j.flags|=16):H.push(P)}}function h(j,P){if(!u)return null;for(;P!==null;)c(j,P),P=P.sibling;return null}function m(j){for(var P=new Map;j!==null;)j.key!==null?P.set(j.key,j):P.set(j.index,j),j=j.sibling;return P}function x(j,P){return j=ds(j,P),j.index=0,j.sibling=null,j}function S(j,P,H){return j.index=H,u?(H=j.alternate,H!==null?(H=H.index,H<P?(j.flags|=67108866,P):H):(j.flags|=67108866,P)):(j.flags|=1048576,P)}function T(j){return u&&j.alternate===null&&(j.flags|=67108866),j}function O(j,P,H,ae){return P===null||P.tag!==6?(P=g2(H,j.mode,ae),P.return=j,P):(P=x(P,H),P.return=j,P)}function L(j,P,H,ae){var we=H.type;return we===v?ie(j,P,H.props.children,ae,H.key):P!==null&&(P.elementType===we||typeof we=="object"&&we!==null&&we.$$typeof===R&&ND(we)===P.type)?(P=x(P,H.props),Eh(P,H),P.return=j,P):(P=q0(H.type,H.key,H.props,null,j.mode,ae),Eh(P,H),P.return=j,P)}function X(j,P,H,ae){return P===null||P.tag!==4||P.stateNode.containerInfo!==H.containerInfo||P.stateNode.implementation!==H.implementation?(P=p2(H,j.mode,ae),P.return=j,P):(P=x(P,H.children||[]),P.return=j,P)}function ie(j,P,H,ae,we){return P===null||P.tag!==7?(P=Iu(H,j.mode,ae,we),P.return=j,P):(P=x(P,H),P.return=j,P)}function ue(j,P,H){if(typeof P=="string"&&P!==""||typeof P=="number"||typeof P=="bigint")return P=g2(""+P,j.mode,H),P.return=j,P;if(typeof P=="object"&&P!==null){switch(P.$$typeof){case p:return H=q0(P.type,P.key,P.props,null,j.mode,H),Eh(H,P),H.return=j,H;case y:return P=p2(P,j.mode,H),P.return=j,P;case R:var ae=P._init;return P=ae(P._payload),ue(j,P,H)}if(F(P)||V(P))return P=Iu(P,j.mode,H,null),P.return=j,P;if(typeof P.then=="function")return ue(j,am(P),H);if(P.$$typeof===A)return ue(j,Y0(j,P),H);sm(j,P)}return null}function Q(j,P,H,ae){var we=P!==null?P.key:null;if(typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint")return we!==null?null:O(j,P,""+H,ae);if(typeof H=="object"&&H!==null){switch(H.$$typeof){case p:return H.key===we?L(j,P,H,ae):null;case y:return H.key===we?X(j,P,H,ae):null;case R:return we=H._init,H=we(H._payload),Q(j,P,H,ae)}if(F(H)||V(H))return we!==null?null:ie(j,P,H,ae,null);if(typeof H.then=="function")return Q(j,P,am(H),ae);if(H.$$typeof===A)return Q(j,P,Y0(j,H),ae);sm(j,H)}return null}function Z(j,P,H,ae,we){if(typeof ae=="string"&&ae!==""||typeof ae=="number"||typeof ae=="bigint")return j=j.get(H)||null,O(P,j,""+ae,we);if(typeof ae=="object"&&ae!==null){switch(ae.$$typeof){case p:return j=j.get(ae.key===null?H:ae.key)||null,L(P,j,ae,we);case y:return j=j.get(ae.key===null?H:ae.key)||null,X(P,j,ae,we);case R:var Ye=ae._init;return ae=Ye(ae._payload),Z(j,P,H,ae,we)}if(F(ae)||V(ae))return j=j.get(H)||null,ie(P,j,ae,we,null);if(typeof ae.then=="function")return Z(j,P,H,am(ae),we);if(ae.$$typeof===A)return Z(j,P,H,Y0(P,ae),we);sm(P,ae)}return null}function Fe(j,P,H,ae){for(var we=null,Ye=null,Te=P,ze=P=0,vn=null;Te!==null&&ze<H.length;ze++){Te.index>ze?(vn=Te,Te=null):vn=Te.sibling;var rt=Q(j,Te,H[ze],ae);if(rt===null){Te===null&&(Te=vn);break}u&&Te&&rt.alternate===null&&c(j,Te),P=S(rt,P,ze),Ye===null?we=rt:Ye.sibling=rt,Ye=rt,Te=vn}if(ze===H.length)return h(j,Te),lt&&qu(j,ze),we;if(Te===null){for(;ze<H.length;ze++)Te=ue(j,H[ze],ae),Te!==null&&(P=S(Te,P,ze),Ye===null?we=Te:Ye.sibling=Te,Ye=Te);return lt&&qu(j,ze),we}for(Te=m(Te);ze<H.length;ze++)vn=Z(Te,j,ze,H[ze],ae),vn!==null&&(u&&vn.alternate!==null&&Te.delete(vn.key===null?ze:vn.key),P=S(vn,P,ze),Ye===null?we=vn:Ye.sibling=vn,Ye=vn);return u&&Te.forEach(function(Ro){return c(j,Ro)}),lt&&qu(j,ze),we}function Ne(j,P,H,ae){if(H==null)throw Error(i(151));for(var we=null,Ye=null,Te=P,ze=P=0,vn=null,rt=H.next();Te!==null&&!rt.done;ze++,rt=H.next()){Te.index>ze?(vn=Te,Te=null):vn=Te.sibling;var Ro=Q(j,Te,rt.value,ae);if(Ro===null){Te===null&&(Te=vn);break}u&&Te&&Ro.alternate===null&&c(j,Te),P=S(Ro,P,ze),Ye===null?we=Ro:Ye.sibling=Ro,Ye=Ro,Te=vn}if(rt.done)return h(j,Te),lt&&qu(j,ze),we;if(Te===null){for(;!rt.done;ze++,rt=H.next())rt=ue(j,rt.value,ae),rt!==null&&(P=S(rt,P,ze),Ye===null?we=rt:Ye.sibling=rt,Ye=rt);return lt&&qu(j,ze),we}for(Te=m(Te);!rt.done;ze++,rt=H.next())rt=Z(Te,j,ze,rt.value,ae),rt!==null&&(u&&rt.alternate!==null&&Te.delete(rt.key===null?ze:rt.key),P=S(rt,P,ze),Ye===null?we=rt:Ye.sibling=rt,Ye=rt);return u&&Te.forEach(function(RV){return c(j,RV)}),lt&&qu(j,ze),we}function xt(j,P,H,ae){if(typeof H=="object"&&H!==null&&H.type===v&&H.key===null&&(H=H.props.children),typeof H=="object"&&H!==null){switch(H.$$typeof){case p:e:{for(var we=H.key;P!==null;){if(P.key===we){if(we=H.type,we===v){if(P.tag===7){h(j,P.sibling),ae=x(P,H.props.children),ae.return=j,j=ae;break e}}else if(P.elementType===we||typeof we=="object"&&we!==null&&we.$$typeof===R&&ND(we)===P.type){h(j,P.sibling),ae=x(P,H.props),Eh(ae,H),ae.return=j,j=ae;break e}h(j,P);break}else c(j,P);P=P.sibling}H.type===v?(ae=Iu(H.props.children,j.mode,ae,H.key),ae.return=j,j=ae):(ae=q0(H.type,H.key,H.props,null,j.mode,ae),Eh(ae,H),ae.return=j,j=ae)}return T(j);case y:e:{for(we=H.key;P!==null;){if(P.key===we)if(P.tag===4&&P.stateNode.containerInfo===H.containerInfo&&P.stateNode.implementation===H.implementation){h(j,P.sibling),ae=x(P,H.children||[]),ae.return=j,j=ae;break e}else{h(j,P);break}else c(j,P);P=P.sibling}ae=p2(H,j.mode,ae),ae.return=j,j=ae}return T(j);case R:return we=H._init,H=we(H._payload),xt(j,P,H,ae)}if(F(H))return Fe(j,P,H,ae);if(V(H)){if(we=V(H),typeof we!="function")throw Error(i(150));return H=we.call(H),Ne(j,P,H,ae)}if(typeof H.then=="function")return xt(j,P,am(H),ae);if(H.$$typeof===A)return xt(j,P,Y0(j,H),ae);sm(j,H)}return typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint"?(H=""+H,P!==null&&P.tag===6?(h(j,P.sibling),ae=x(P,H),ae.return=j,j=ae):(h(j,P),ae=g2(H,j.mode,ae),ae.return=j,j=ae),T(j)):h(j,P)}return function(j,P,H,ae){try{xh=0;var we=xt(j,P,H,ae);return qc=null,we}catch(Te){if(Te===fh||Te===V0)throw Te;var Ye=Hi(29,Te,null,j.mode);return Ye.lanes=ae,Ye.return=j,Ye}finally{}}}var jc=zD(!0),FD=zD(!1),yr=W(null),xa=null;function vo(u){var c=u.alternate;se(sn,sn.current&1),se(yr,u),xa===null&&(c===null||Uc.current!==null||c.memoizedState!==null)&&(xa=u)}function LD(u){if(u.tag===22){if(se(sn,sn.current),se(yr,u),xa===null){var c=u.alternate;c!==null&&c.memoizedState!==null&&(xa=u)}}else bo()}function bo(){se(sn,sn.current),se(yr,yr.current)}function vs(u){ne(yr),xa===u&&(xa=null),ne(sn)}var sn=W(0);function om(u){for(var c=u;c!==null;){if(c.tag===13){var h=c.memoizedState;if(h!==null&&(h=h.dehydrated,h===null||h.data==="$?"||LE(h)))return c}else if(c.tag===19&&c.memoizedProps.revealOrder!==void 0){if((c.flags&128)!==0)return c}else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===u)break;for(;c.sibling===null;){if(c.return===null||c.return===u)return null;c=c.return}c.sibling.return=c.return,c=c.sibling}return null}function V2(u,c,h,m){c=u.memoizedState,h=h(m,c),h=h==null?c:d({},c,h),u.memoizedState=h,u.lanes===0&&(u.updateQueue.baseState=h)}var W2={enqueueSetState:function(u,c,h){u=u._reactInternals;var m=Vi(),x=po(m);x.payload=c,h!=null&&(x.callback=h),c=mo(u,x,m),c!==null&&(Wi(c,u,m),hh(c,u,m))},enqueueReplaceState:function(u,c,h){u=u._reactInternals;var m=Vi(),x=po(m);x.tag=1,x.payload=c,h!=null&&(x.callback=h),c=mo(u,x,m),c!==null&&(Wi(c,u,m),hh(c,u,m))},enqueueForceUpdate:function(u,c){u=u._reactInternals;var h=Vi(),m=po(h);m.tag=2,c!=null&&(m.callback=c),c=mo(u,m,h),c!==null&&(Wi(c,u,h),hh(c,u,h))}};function UD(u,c,h,m,x,S,T){return u=u.stateNode,typeof u.shouldComponentUpdate=="function"?u.shouldComponentUpdate(m,S,T):c.prototype&&c.prototype.isPureReactComponent?!ih(h,m)||!ih(x,S):!0}function BD(u,c,h,m){u=c.state,typeof c.componentWillReceiveProps=="function"&&c.componentWillReceiveProps(h,m),typeof c.UNSAFE_componentWillReceiveProps=="function"&&c.UNSAFE_componentWillReceiveProps(h,m),c.state!==u&&W2.enqueueReplaceState(c,c.state,null)}function Wu(u,c){var h=c;if("ref"in c){h={};for(var m in c)m!=="ref"&&(h[m]=c[m])}if(u=u.defaultProps){h===c&&(h=d({},h));for(var x in u)h[x]===void 0&&(h[x]=u[x])}return h}var um=typeof reportError=="function"?reportError:function(u){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var c=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof u=="object"&&u!==null&&typeof u.message=="string"?String(u.message):String(u),error:u});if(!window.dispatchEvent(c))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",u);return}console.error(u)};function ID(u){um(u)}function PD(u){console.error(u)}function qD(u){um(u)}function lm(u,c){try{var h=u.onUncaughtError;h(c.value,{componentStack:c.stack})}catch(m){setTimeout(function(){throw m})}}function jD(u,c,h){try{var m=u.onCaughtError;m(h.value,{componentStack:h.stack,errorBoundary:c.tag===1?c.stateNode:null})}catch(x){setTimeout(function(){throw x})}}function Q2(u,c,h){return h=po(h),h.tag=3,h.payload={element:null},h.callback=function(){lm(u,c)},h}function HD(u){return u=po(u),u.tag=3,u}function GD(u,c,h,m){var x=h.type.getDerivedStateFromError;if(typeof x=="function"){var S=m.value;u.payload=function(){return x(S)},u.callback=function(){jD(c,h,m)}}var T=h.stateNode;T!==null&&typeof T.componentDidCatch=="function"&&(u.callback=function(){jD(c,h,m),typeof x!="function"&&(Ao===null?Ao=new Set([this]):Ao.add(this));var O=m.stack;this.componentDidCatch(m.value,{componentStack:O!==null?O:""})})}function RX(u,c,h,m,x){if(h.flags|=32768,m!==null&&typeof m=="object"&&typeof m.then=="function"){if(c=h.alternate,c!==null&&uh(c,h,x,!0),h=yr.current,h!==null){switch(h.tag){case 13:return xa===null?xE():h.alternate===null&&Bt===0&&(Bt=3),h.flags&=-257,h.flags|=65536,h.lanes=x,m===A2?h.flags|=16384:(c=h.updateQueue,c===null?h.updateQueue=new Set([m]):c.add(m),SE(u,m,x)),!1;case 22:return h.flags|=65536,m===A2?h.flags|=16384:(c=h.updateQueue,c===null?(c={transitions:null,markerInstances:null,retryQueue:new Set([m])},h.updateQueue=c):(h=c.retryQueue,h===null?c.retryQueue=new Set([m]):h.add(m)),SE(u,m,x)),!1}throw Error(i(435,h.tag))}return SE(u,m,x),xE(),!1}if(lt)return c=yr.current,c!==null?((c.flags&65536)===0&&(c.flags|=256),c.flags|=65536,c.lanes=x,m!==v2&&(u=Error(i(422),{cause:m}),oh(hr(u,h)))):(m!==v2&&(c=Error(i(423),{cause:m}),oh(hr(c,h))),u=u.current.alternate,u.flags|=65536,x&=-x,u.lanes|=x,m=hr(m,h),x=Q2(u.stateNode,m,x),T2(u,x),Bt!==4&&(Bt=2)),!1;var S=Error(i(520),{cause:m});if(S=hr(S,h),Th===null?Th=[S]:Th.push(S),Bt!==4&&(Bt=2),c===null)return!0;m=hr(m,h),h=c;do{switch(h.tag){case 3:return h.flags|=65536,u=x&-x,h.lanes|=u,u=Q2(h.stateNode,m,u),T2(h,u),!1;case 1:if(c=h.type,S=h.stateNode,(h.flags&128)===0&&(typeof c.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(Ao===null||!Ao.has(S))))return h.flags|=65536,x&=-x,h.lanes|=x,x=HD(x),GD(x,u,h,m),T2(h,x),!1}h=h.return}while(h!==null);return!1}var YD=Error(i(461)),mn=!1;function Mn(u,c,h,m){c.child=u===null?FD(c,null,h,m):jc(c,u.child,h,m)}function XD(u,c,h,m,x){h=h.render;var S=c.ref;if("ref"in m){var T={};for(var O in m)O!=="ref"&&(T[O]=m[O])}else T=m;return Yu(c),m=R2(u,c,h,T,S,x),O=N2(),u!==null&&!mn?(z2(u,c,x),bs(u,c,x)):(lt&&O&&m2(c),c.flags|=1,Mn(u,c,m,x),c.child)}function VD(u,c,h,m,x){if(u===null){var S=h.type;return typeof S=="function"&&!h2(S)&&S.defaultProps===void 0&&h.compare===null?(c.tag=15,c.type=S,WD(u,c,S,m,x)):(u=q0(h.type,null,m,c,c.mode,x),u.ref=c.ref,u.return=c,c.child=u)}if(S=u.child,!rE(u,x)){var T=S.memoizedProps;if(h=h.compare,h=h!==null?h:ih,h(T,m)&&u.ref===c.ref)return bs(u,c,x)}return c.flags|=1,u=ds(S,m),u.ref=c.ref,u.return=c,c.child=u}function WD(u,c,h,m,x){if(u!==null){var S=u.memoizedProps;if(ih(S,m)&&u.ref===c.ref)if(mn=!1,c.pendingProps=m=S,rE(u,x))(u.flags&131072)!==0&&(mn=!0);else return c.lanes=u.lanes,bs(u,c,x)}return Z2(u,c,h,m,x)}function QD(u,c,h){var m=c.pendingProps,x=m.children,S=u!==null?u.memoizedState:null;if(m.mode==="hidden"){if((c.flags&128)!==0){if(m=S!==null?S.baseLanes|h:h,u!==null){for(x=c.child=u.child,S=0;x!==null;)S=S|x.lanes|x.childLanes,x=x.sibling;c.childLanes=S&~m}else c.childLanes=0,c.child=null;return ZD(u,c,m,h)}if((h&536870912)!==0)c.memoizedState={baseLanes:0,cachePool:null},u!==null&&X0(c,S!==null?S.cachePool:null),S!==null?WO(c,S):k2(),LD(c);else return c.lanes=c.childLanes=536870912,ZD(u,c,S!==null?S.baseLanes|h:h,h)}else S!==null?(X0(c,S.cachePool),WO(c,S),bo(),c.memoizedState=null):(u!==null&&X0(c,null),k2(),bo());return Mn(u,c,x,h),c.child}function ZD(u,c,h,m){var x=w2();return x=x===null?null:{parent:an._currentValue,pool:x},c.memoizedState={baseLanes:h,cachePool:x},u!==null&&X0(c,null),k2(),LD(c),u!==null&&uh(u,c,m,!0),null}function cm(u,c){var h=c.ref;if(h===null)u!==null&&u.ref!==null&&(c.flags|=4194816);else{if(typeof h!="function"&&typeof h!="object")throw Error(i(284));(u===null||u.ref!==h)&&(c.flags|=4194816)}}function Z2(u,c,h,m,x){return Yu(c),h=R2(u,c,h,m,void 0,x),m=N2(),u!==null&&!mn?(z2(u,c,x),bs(u,c,x)):(lt&&m&&m2(c),c.flags|=1,Mn(u,c,h,x),c.child)}function KD(u,c,h,m,x,S){return Yu(c),c.updateQueue=null,h=ZO(c,m,h,x),QO(u),m=N2(),u!==null&&!mn?(z2(u,c,S),bs(u,c,S)):(lt&&m&&m2(c),c.flags|=1,Mn(u,c,h,S),c.child)}function JD(u,c,h,m,x){if(Yu(c),c.stateNode===null){var S=Rc,T=h.contextType;typeof T=="object"&&T!==null&&(S=qn(T)),S=new h(m,S),c.memoizedState=S.state!==null&&S.state!==void 0?S.state:null,S.updater=W2,c.stateNode=S,S._reactInternals=c,S=c.stateNode,S.props=m,S.state=c.memoizedState,S.refs={},$2(c),T=h.contextType,S.context=typeof T=="object"&&T!==null?qn(T):Rc,S.state=c.memoizedState,T=h.getDerivedStateFromProps,typeof T=="function"&&(V2(c,h,T,m),S.state=c.memoizedState),typeof h.getDerivedStateFromProps=="function"||typeof S.getSnapshotBeforeUpdate=="function"||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(T=S.state,typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount(),T!==S.state&&W2.enqueueReplaceState(S,S.state,null),ph(c,m,S,x),gh(),S.state=c.memoizedState),typeof S.componentDidMount=="function"&&(c.flags|=4194308),m=!0}else if(u===null){S=c.stateNode;var O=c.memoizedProps,L=Wu(h,O);S.props=L;var X=S.context,ie=h.contextType;T=Rc,typeof ie=="object"&&ie!==null&&(T=qn(ie));var ue=h.getDerivedStateFromProps;ie=typeof ue=="function"||typeof S.getSnapshotBeforeUpdate=="function",O=c.pendingProps!==O,ie||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(O||X!==T)&&BD(c,S,m,T),go=!1;var Q=c.memoizedState;S.state=Q,ph(c,m,S,x),gh(),X=c.memoizedState,O||Q!==X||go?(typeof ue=="function"&&(V2(c,h,ue,m),X=c.memoizedState),(L=go||UD(c,h,L,m,Q,X,T))?(ie||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount()),typeof S.componentDidMount=="function"&&(c.flags|=4194308)):(typeof S.componentDidMount=="function"&&(c.flags|=4194308),c.memoizedProps=m,c.memoizedState=X),S.props=m,S.state=X,S.context=T,m=L):(typeof S.componentDidMount=="function"&&(c.flags|=4194308),m=!1)}else{S=c.stateNode,C2(u,c),T=c.memoizedProps,ie=Wu(h,T),S.props=ie,ue=c.pendingProps,Q=S.context,X=h.contextType,L=Rc,typeof X=="object"&&X!==null&&(L=qn(X)),O=h.getDerivedStateFromProps,(X=typeof O=="function"||typeof S.getSnapshotBeforeUpdate=="function")||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(T!==ue||Q!==L)&&BD(c,S,m,L),go=!1,Q=c.memoizedState,S.state=Q,ph(c,m,S,x),gh();var Z=c.memoizedState;T!==ue||Q!==Z||go||u!==null&&u.dependencies!==null&&G0(u.dependencies)?(typeof O=="function"&&(V2(c,h,O,m),Z=c.memoizedState),(ie=go||UD(c,h,ie,m,Q,Z,L)||u!==null&&u.dependencies!==null&&G0(u.dependencies))?(X||typeof S.UNSAFE_componentWillUpdate!="function"&&typeof S.componentWillUpdate!="function"||(typeof S.componentWillUpdate=="function"&&S.componentWillUpdate(m,Z,L),typeof S.UNSAFE_componentWillUpdate=="function"&&S.UNSAFE_componentWillUpdate(m,Z,L)),typeof S.componentDidUpdate=="function"&&(c.flags|=4),typeof S.getSnapshotBeforeUpdate=="function"&&(c.flags|=1024)):(typeof S.componentDidUpdate!="function"||T===u.memoizedProps&&Q===u.memoizedState||(c.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||T===u.memoizedProps&&Q===u.memoizedState||(c.flags|=1024),c.memoizedProps=m,c.memoizedState=Z),S.props=m,S.state=Z,S.context=L,m=ie):(typeof S.componentDidUpdate!="function"||T===u.memoizedProps&&Q===u.memoizedState||(c.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||T===u.memoizedProps&&Q===u.memoizedState||(c.flags|=1024),m=!1)}return S=m,cm(u,c),m=(c.flags&128)!==0,S||m?(S=c.stateNode,h=m&&typeof h.getDerivedStateFromError!="function"?null:S.render(),c.flags|=1,u!==null&&m?(c.child=jc(c,u.child,null,x),c.child=jc(c,null,h,x)):Mn(u,c,h,x),c.memoizedState=S.state,u=c.child):u=bs(u,c,x),u}function eR(u,c,h,m){return sh(),c.flags|=256,Mn(u,c,h,m),c.child}var K2={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function J2(u){return{baseLanes:u,cachePool:PO()}}function eE(u,c,h){return u=u!==null?u.childLanes&~h:0,c&&(u|=vr),u}function tR(u,c,h){var m=c.pendingProps,x=!1,S=(c.flags&128)!==0,T;if((T=S)||(T=u!==null&&u.memoizedState===null?!1:(sn.current&2)!==0),T&&(x=!0,c.flags&=-129),T=(c.flags&32)!==0,c.flags&=-33,u===null){if(lt){if(x?vo(c):bo(),lt){var O=Ut,L;if(L=O){e:{for(L=O,O=ba;L.nodeType!==8;){if(!O){O=null;break e}if(L=qr(L.nextSibling),L===null){O=null;break e}}O=L}O!==null?(c.memoizedState={dehydrated:O,treeContext:Pu!==null?{id:hs,overflow:gs}:null,retryLane:536870912,hydrationErrors:null},L=Hi(18,null,null,0),L.stateNode=O,L.return=c,c.child=L,ri=c,Ut=null,L=!0):L=!1}L||Hu(c)}if(O=c.memoizedState,O!==null&&(O=O.dehydrated,O!==null))return LE(O)?c.lanes=32:c.lanes=536870912,null;vs(c)}return O=m.children,m=m.fallback,x?(bo(),x=c.mode,O=fm({mode:"hidden",children:O},x),m=Iu(m,x,h,null),O.return=c,m.return=c,O.sibling=m,c.child=O,x=c.child,x.memoizedState=J2(h),x.childLanes=eE(u,T,h),c.memoizedState=K2,m):(vo(c),tE(c,O))}if(L=u.memoizedState,L!==null&&(O=L.dehydrated,O!==null)){if(S)c.flags&256?(vo(c),c.flags&=-257,c=nE(u,c,h)):c.memoizedState!==null?(bo(),c.child=u.child,c.flags|=128,c=null):(bo(),x=m.fallback,O=c.mode,m=fm({mode:"visible",children:m.children},O),x=Iu(x,O,h,null),x.flags|=2,m.return=c,x.return=c,m.sibling=x,c.child=m,jc(c,u.child,null,h),m=c.child,m.memoizedState=J2(h),m.childLanes=eE(u,T,h),c.memoizedState=K2,c=x);else if(vo(c),LE(O)){if(T=O.nextSibling&&O.nextSibling.dataset,T)var X=T.dgst;T=X,m=Error(i(419)),m.stack="",m.digest=T,oh({value:m,source:null,stack:null}),c=nE(u,c,h)}else if(mn||uh(u,c,h,!1),T=(h&u.childLanes)!==0,mn||T){if(T=$t,T!==null&&(m=h&-h,m=(m&42)!==0?1:Ux(m),m=(m&(T.suspendedLanes|h))!==0?0:m,m!==0&&m!==L.retryLane))throw L.retryLane=m,Dc(u,m),Wi(T,u,m),YD;O.data==="$?"||xE(),c=nE(u,c,h)}else O.data==="$?"?(c.flags|=192,c.child=u.child,c=null):(u=L.treeContext,Ut=qr(O.nextSibling),ri=c,lt=!0,ju=null,ba=!1,u!==null&&(pr[mr++]=hs,pr[mr++]=gs,pr[mr++]=Pu,hs=u.id,gs=u.overflow,Pu=c),c=tE(c,m.children),c.flags|=4096);return c}return x?(bo(),x=m.fallback,O=c.mode,L=u.child,X=L.sibling,m=ds(L,{mode:"hidden",children:m.children}),m.subtreeFlags=L.subtreeFlags&65011712,X!==null?x=ds(X,x):(x=Iu(x,O,h,null),x.flags|=2),x.return=c,m.return=c,m.sibling=x,c.child=m,m=x,x=c.child,O=u.child.memoizedState,O===null?O=J2(h):(L=O.cachePool,L!==null?(X=an._currentValue,L=L.parent!==X?{parent:X,pool:X}:L):L=PO(),O={baseLanes:O.baseLanes|h,cachePool:L}),x.memoizedState=O,x.childLanes=eE(u,T,h),c.memoizedState=K2,m):(vo(c),h=u.child,u=h.sibling,h=ds(h,{mode:"visible",children:m.children}),h.return=c,h.sibling=null,u!==null&&(T=c.deletions,T===null?(c.deletions=[u],c.flags|=16):T.push(u)),c.child=h,c.memoizedState=null,h)}function tE(u,c){return c=fm({mode:"visible",children:c},u.mode),c.return=u,u.child=c}function fm(u,c){return u=Hi(22,u,null,c),u.lanes=0,u.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},u}function nE(u,c,h){return jc(c,u.child,null,h),u=tE(c,c.pendingProps.children),u.flags|=2,c.memoizedState=null,u}function nR(u,c,h){u.lanes|=c;var m=u.alternate;m!==null&&(m.lanes|=c),x2(u.return,c,h)}function iE(u,c,h,m,x){var S=u.memoizedState;S===null?u.memoizedState={isBackwards:c,rendering:null,renderingStartTime:0,last:m,tail:h,tailMode:x}:(S.isBackwards=c,S.rendering=null,S.renderingStartTime=0,S.last=m,S.tail=h,S.tailMode=x)}function iR(u,c,h){var m=c.pendingProps,x=m.revealOrder,S=m.tail;if(Mn(u,c,m.children,h),m=sn.current,(m&2)!==0)m=m&1|2,c.flags|=128;else{if(u!==null&&(u.flags&128)!==0)e:for(u=c.child;u!==null;){if(u.tag===13)u.memoizedState!==null&&nR(u,h,c);else if(u.tag===19)nR(u,h,c);else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===c)break e;for(;u.sibling===null;){if(u.return===null||u.return===c)break e;u=u.return}u.sibling.return=u.return,u=u.sibling}m&=1}switch(se(sn,m),x){case"forwards":for(h=c.child,x=null;h!==null;)u=h.alternate,u!==null&&om(u)===null&&(x=h),h=h.sibling;h=x,h===null?(x=c.child,c.child=null):(x=h.sibling,h.sibling=null),iE(c,!1,x,h,S);break;case"backwards":for(h=null,x=c.child,c.child=null;x!==null;){if(u=x.alternate,u!==null&&om(u)===null){c.child=x;break}u=x.sibling,x.sibling=h,h=x,x=u}iE(c,!0,h,null,S);break;case"together":iE(c,!1,null,null,void 0);break;default:c.memoizedState=null}return c.child}function bs(u,c,h){if(u!==null&&(c.dependencies=u.dependencies),wo|=c.lanes,(h&c.childLanes)===0)if(u!==null){if(uh(u,c,h,!1),(h&c.childLanes)===0)return null}else return null;if(u!==null&&c.child!==u.child)throw Error(i(153));if(c.child!==null){for(u=c.child,h=ds(u,u.pendingProps),c.child=h,h.return=c;u.sibling!==null;)u=u.sibling,h=h.sibling=ds(u,u.pendingProps),h.return=c;h.sibling=null}return c.child}function rE(u,c){return(u.lanes&c)!==0?!0:(u=u.dependencies,!!(u!==null&&G0(u)))}function NX(u,c,h){switch(c.tag){case 3:nt(c,c.stateNode.containerInfo),ho(c,an,u.memoizedState.cache),sh();break;case 27:case 5:Ue(c);break;case 4:nt(c,c.stateNode.containerInfo);break;case 10:ho(c,c.type,c.memoizedProps.value);break;case 13:var m=c.memoizedState;if(m!==null)return m.dehydrated!==null?(vo(c),c.flags|=128,null):(h&c.child.childLanes)!==0?tR(u,c,h):(vo(c),u=bs(u,c,h),u!==null?u.sibling:null);vo(c);break;case 19:var x=(u.flags&128)!==0;if(m=(h&c.childLanes)!==0,m||(uh(u,c,h,!1),m=(h&c.childLanes)!==0),x){if(m)return iR(u,c,h);c.flags|=128}if(x=c.memoizedState,x!==null&&(x.rendering=null,x.tail=null,x.lastEffect=null),se(sn,sn.current),m)break;return null;case 22:case 23:return c.lanes=0,QD(u,c,h);case 24:ho(c,an,u.memoizedState.cache)}return bs(u,c,h)}function rR(u,c,h){if(u!==null)if(u.memoizedProps!==c.pendingProps)mn=!0;else{if(!rE(u,h)&&(c.flags&128)===0)return mn=!1,NX(u,c,h);mn=(u.flags&131072)!==0}else mn=!1,lt&&(c.flags&1048576)!==0&&NO(c,H0,c.index);switch(c.lanes=0,c.tag){case 16:e:{u=c.pendingProps;var m=c.elementType,x=m._init;if(m=x(m._payload),c.type=m,typeof m=="function")h2(m)?(u=Wu(m,u),c.tag=1,c=JD(null,c,m,u,h)):(c.tag=0,c=Z2(null,c,m,u,h));else{if(m!=null){if(x=m.$$typeof,x===$){c.tag=11,c=XD(null,c,m,u,h);break e}else if(x===M){c.tag=14,c=VD(null,c,m,u,h);break e}}throw c=q(m)||m,Error(i(306,c,""))}}return c;case 0:return Z2(u,c,c.type,c.pendingProps,h);case 1:return m=c.type,x=Wu(m,c.pendingProps),JD(u,c,m,x,h);case 3:e:{if(nt(c,c.stateNode.containerInfo),u===null)throw Error(i(387));m=c.pendingProps;var S=c.memoizedState;x=S.element,C2(u,c),ph(c,m,null,h);var T=c.memoizedState;if(m=T.cache,ho(c,an,m),m!==S.cache&&E2(c,[an],h,!0),gh(),m=T.element,S.isDehydrated)if(S={element:m,isDehydrated:!1,cache:T.cache},c.updateQueue.baseState=S,c.memoizedState=S,c.flags&256){c=eR(u,c,m,h);break e}else if(m!==x){x=hr(Error(i(424)),c),oh(x),c=eR(u,c,m,h);break e}else{switch(u=c.stateNode.containerInfo,u.nodeType){case 9:u=u.body;break;default:u=u.nodeName==="HTML"?u.ownerDocument.body:u}for(Ut=qr(u.firstChild),ri=c,lt=!0,ju=null,ba=!0,h=FD(c,null,m,h),c.child=h;h;)h.flags=h.flags&-3|4096,h=h.sibling}else{if(sh(),m===x){c=bs(u,c,h);break e}Mn(u,c,m,h)}c=c.child}return c;case 26:return cm(u,c),u===null?(h=uN(c.type,null,c.pendingProps,null))?c.memoizedState=h:lt||(h=c.type,u=c.pendingProps,m=Am($e.current).createElement(h),m[Pn]=c,m[Si]=u,On(m,h,u),pn(m),c.stateNode=m):c.memoizedState=uN(c.type,u.memoizedProps,c.pendingProps,u.memoizedState),null;case 27:return Ue(c),u===null&&lt&&(m=c.stateNode=aN(c.type,c.pendingProps,$e.current),ri=c,ba=!0,x=Ut,To(c.type)?(UE=x,Ut=qr(m.firstChild)):Ut=x),Mn(u,c,c.pendingProps.children,h),cm(u,c),u===null&&(c.flags|=4194304),c.child;case 5:return u===null&&lt&&((x=m=Ut)&&(m=uV(m,c.type,c.pendingProps,ba),m!==null?(c.stateNode=m,ri=c,Ut=qr(m.firstChild),ba=!1,x=!0):x=!1),x||Hu(c)),Ue(c),x=c.type,S=c.pendingProps,T=u!==null?u.memoizedProps:null,m=S.children,NE(x,S)?m=null:T!==null&&NE(x,T)&&(c.flags|=32),c.memoizedState!==null&&(x=R2(u,c,$X,null,null,h),Lh._currentValue=x),cm(u,c),Mn(u,c,m,h),c.child;case 6:return u===null&&lt&&((u=h=Ut)&&(h=lV(h,c.pendingProps,ba),h!==null?(c.stateNode=h,ri=c,Ut=null,u=!0):u=!1),u||Hu(c)),null;case 13:return tR(u,c,h);case 4:return nt(c,c.stateNode.containerInfo),m=c.pendingProps,u===null?c.child=jc(c,null,m,h):Mn(u,c,m,h),c.child;case 11:return XD(u,c,c.type,c.pendingProps,h);case 7:return Mn(u,c,c.pendingProps,h),c.child;case 8:return Mn(u,c,c.pendingProps.children,h),c.child;case 12:return Mn(u,c,c.pendingProps.children,h),c.child;case 10:return m=c.pendingProps,ho(c,c.type,m.value),Mn(u,c,m.children,h),c.child;case 9:return x=c.type._context,m=c.pendingProps.children,Yu(c),x=qn(x),m=m(x),c.flags|=1,Mn(u,c,m,h),c.child;case 14:return VD(u,c,c.type,c.pendingProps,h);case 15:return WD(u,c,c.type,c.pendingProps,h);case 19:return iR(u,c,h);case 31:return m=c.pendingProps,h=c.mode,m={mode:m.mode,children:m.children},u===null?(h=fm(m,h),h.ref=c.ref,c.child=h,h.return=c,c=h):(h=ds(u.child,m),h.ref=c.ref,c.child=h,h.return=c,c=h),c;case 22:return QD(u,c,h);case 24:return Yu(c),m=qn(an),u===null?(x=w2(),x===null&&(x=$t,S=S2(),x.pooledCache=S,S.refCount++,S!==null&&(x.pooledCacheLanes|=h),x=S),c.memoizedState={parent:m,cache:x},$2(c),ho(c,an,x)):((u.lanes&h)!==0&&(C2(u,c),ph(c,null,null,h),gh()),x=u.memoizedState,S=c.memoizedState,x.parent!==m?(x={parent:m,cache:m},c.memoizedState=x,c.lanes===0&&(c.memoizedState=c.updateQueue.baseState=x),ho(c,an,m)):(m=S.cache,ho(c,an,m),m!==x.cache&&E2(c,[an],h,!0))),Mn(u,c,c.pendingProps.children,h),c.child;case 29:throw c.pendingProps}throw Error(i(156,c.tag))}function xs(u){u.flags|=4}function aR(u,c){if(c.type!=="stylesheet"||(c.state.loading&4)!==0)u.flags&=-16777217;else if(u.flags|=16777216,!hN(c)){if(c=yr.current,c!==null&&((et&4194048)===et?xa!==null:(et&62914560)!==et&&(et&536870912)===0||c!==xa))throw dh=A2,qO;u.flags|=8192}}function dm(u,c){c!==null&&(u.flags|=4),u.flags&16384&&(c=u.tag!==22?Lk():536870912,u.lanes|=c,Xc|=c)}function Sh(u,c){if(!lt)switch(u.tailMode){case"hidden":c=u.tail;for(var h=null;c!==null;)c.alternate!==null&&(h=c),c=c.sibling;h===null?u.tail=null:h.sibling=null;break;case"collapsed":h=u.tail;for(var m=null;h!==null;)h.alternate!==null&&(m=h),h=h.sibling;m===null?c||u.tail===null?u.tail=null:u.tail.sibling=null:m.sibling=null}}function Nt(u){var c=u.alternate!==null&&u.alternate.child===u.child,h=0,m=0;if(c)for(var x=u.child;x!==null;)h|=x.lanes|x.childLanes,m|=x.subtreeFlags&65011712,m|=x.flags&65011712,x.return=u,x=x.sibling;else for(x=u.child;x!==null;)h|=x.lanes|x.childLanes,m|=x.subtreeFlags,m|=x.flags,x.return=u,x=x.sibling;return u.subtreeFlags|=m,u.childLanes=h,c}function zX(u,c,h){var m=c.pendingProps;switch(y2(c),c.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Nt(c),null;case 1:return Nt(c),null;case 3:return h=c.stateNode,m=null,u!==null&&(m=u.memoizedState.cache),c.memoizedState.cache!==m&&(c.flags|=2048),ms(an),xe(),h.pendingContext&&(h.context=h.pendingContext,h.pendingContext=null),(u===null||u.child===null)&&(ah(c)?xs(c):u===null||u.memoizedState.isDehydrated&&(c.flags&256)===0||(c.flags|=1024,LO())),Nt(c),null;case 26:return h=c.memoizedState,u===null?(xs(c),h!==null?(Nt(c),aR(c,h)):(Nt(c),c.flags&=-16777217)):h?h!==u.memoizedState?(xs(c),Nt(c),aR(c,h)):(Nt(c),c.flags&=-16777217):(u.memoizedProps!==m&&xs(c),Nt(c),c.flags&=-16777217),null;case 27:Ie(c),h=$e.current;var x=c.type;if(u!==null&&c.stateNode!=null)u.memoizedProps!==m&&xs(c);else{if(!m){if(c.stateNode===null)throw Error(i(166));return Nt(c),null}u=ye.current,ah(c)?zO(c):(u=aN(x,m,h),c.stateNode=u,xs(c))}return Nt(c),null;case 5:if(Ie(c),h=c.type,u!==null&&c.stateNode!=null)u.memoizedProps!==m&&xs(c);else{if(!m){if(c.stateNode===null)throw Error(i(166));return Nt(c),null}if(u=ye.current,ah(c))zO(c);else{switch(x=Am($e.current),u){case 1:u=x.createElementNS("http://www.w3.org/2000/svg",h);break;case 2:u=x.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;default:switch(h){case"svg":u=x.createElementNS("http://www.w3.org/2000/svg",h);break;case"math":u=x.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;case"script":u=x.createElement("div"),u.innerHTML="<script><\/script>",u=u.removeChild(u.firstChild);break;case"select":u=typeof m.is=="string"?x.createElement("select",{is:m.is}):x.createElement("select"),m.multiple?u.multiple=!0:m.size&&(u.size=m.size);break;default:u=typeof m.is=="string"?x.createElement(h,{is:m.is}):x.createElement(h)}}u[Pn]=c,u[Si]=m;e:for(x=c.child;x!==null;){if(x.tag===5||x.tag===6)u.appendChild(x.stateNode);else if(x.tag!==4&&x.tag!==27&&x.child!==null){x.child.return=x,x=x.child;continue}if(x===c)break e;for(;x.sibling===null;){if(x.return===null||x.return===c)break e;x=x.return}x.sibling.return=x.return,x=x.sibling}c.stateNode=u;e:switch(On(u,h,m),h){case"button":case"input":case"select":case"textarea":u=!!m.autoFocus;break e;case"img":u=!0;break e;default:u=!1}u&&xs(c)}}return Nt(c),c.flags&=-16777217,null;case 6:if(u&&c.stateNode!=null)u.memoizedProps!==m&&xs(c);else{if(typeof m!="string"&&c.stateNode===null)throw Error(i(166));if(u=$e.current,ah(c)){if(u=c.stateNode,h=c.memoizedProps,m=null,x=ri,x!==null)switch(x.tag){case 27:case 5:m=x.memoizedProps}u[Pn]=c,u=!!(u.nodeValue===h||m!==null&&m.suppressHydrationWarning===!0||KR(u.nodeValue,h)),u||Hu(c)}else u=Am(u).createTextNode(m),u[Pn]=c,c.stateNode=u}return Nt(c),null;case 13:if(m=c.memoizedState,u===null||u.memoizedState!==null&&u.memoizedState.dehydrated!==null){if(x=ah(c),m!==null&&m.dehydrated!==null){if(u===null){if(!x)throw Error(i(318));if(x=c.memoizedState,x=x!==null?x.dehydrated:null,!x)throw Error(i(317));x[Pn]=c}else sh(),(c.flags&128)===0&&(c.memoizedState=null),c.flags|=4;Nt(c),x=!1}else x=LO(),u!==null&&u.memoizedState!==null&&(u.memoizedState.hydrationErrors=x),x=!0;if(!x)return c.flags&256?(vs(c),c):(vs(c),null)}if(vs(c),(c.flags&128)!==0)return c.lanes=h,c;if(h=m!==null,u=u!==null&&u.memoizedState!==null,h){m=c.child,x=null,m.alternate!==null&&m.alternate.memoizedState!==null&&m.alternate.memoizedState.cachePool!==null&&(x=m.alternate.memoizedState.cachePool.pool);var S=null;m.memoizedState!==null&&m.memoizedState.cachePool!==null&&(S=m.memoizedState.cachePool.pool),S!==x&&(m.flags|=2048)}return h!==u&&h&&(c.child.flags|=8192),dm(c,c.updateQueue),Nt(c),null;case 4:return xe(),u===null&&ME(c.stateNode.containerInfo),Nt(c),null;case 10:return ms(c.type),Nt(c),null;case 19:if(ne(sn),x=c.memoizedState,x===null)return Nt(c),null;if(m=(c.flags&128)!==0,S=x.rendering,S===null)if(m)Sh(x,!1);else{if(Bt!==0||u!==null&&(u.flags&128)!==0)for(u=c.child;u!==null;){if(S=om(u),S!==null){for(c.flags|=128,Sh(x,!1),u=S.updateQueue,c.updateQueue=u,dm(c,u),c.subtreeFlags=0,u=h,h=c.child;h!==null;)RO(h,u),h=h.sibling;return se(sn,sn.current&1|2),c.child}u=u.sibling}x.tail!==null&&Jt()>pm&&(c.flags|=128,m=!0,Sh(x,!1),c.lanes=4194304)}else{if(!m)if(u=om(S),u!==null){if(c.flags|=128,m=!0,u=u.updateQueue,c.updateQueue=u,dm(c,u),Sh(x,!0),x.tail===null&&x.tailMode==="hidden"&&!S.alternate&&!lt)return Nt(c),null}else 2*Jt()-x.renderingStartTime>pm&&h!==536870912&&(c.flags|=128,m=!0,Sh(x,!1),c.lanes=4194304);x.isBackwards?(S.sibling=c.child,c.child=S):(u=x.last,u!==null?u.sibling=S:c.child=S,x.last=S)}return x.tail!==null?(c=x.tail,x.rendering=c,x.tail=c.sibling,x.renderingStartTime=Jt(),c.sibling=null,u=sn.current,se(sn,m?u&1|2:u&1),c):(Nt(c),null);case 22:case 23:return vs(c),O2(),m=c.memoizedState!==null,u!==null?u.memoizedState!==null!==m&&(c.flags|=8192):m&&(c.flags|=8192),m?(h&536870912)!==0&&(c.flags&128)===0&&(Nt(c),c.subtreeFlags&6&&(c.flags|=8192)):Nt(c),h=c.updateQueue,h!==null&&dm(c,h.retryQueue),h=null,u!==null&&u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(h=u.memoizedState.cachePool.pool),m=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(m=c.memoizedState.cachePool.pool),m!==h&&(c.flags|=2048),u!==null&&ne(Xu),null;case 24:return h=null,u!==null&&(h=u.memoizedState.cache),c.memoizedState.cache!==h&&(c.flags|=2048),ms(an),Nt(c),null;case 25:return null;case 30:return null}throw Error(i(156,c.tag))}function FX(u,c){switch(y2(c),c.tag){case 1:return u=c.flags,u&65536?(c.flags=u&-65537|128,c):null;case 3:return ms(an),xe(),u=c.flags,(u&65536)!==0&&(u&128)===0?(c.flags=u&-65537|128,c):null;case 26:case 27:case 5:return Ie(c),null;case 13:if(vs(c),u=c.memoizedState,u!==null&&u.dehydrated!==null){if(c.alternate===null)throw Error(i(340));sh()}return u=c.flags,u&65536?(c.flags=u&-65537|128,c):null;case 19:return ne(sn),null;case 4:return xe(),null;case 10:return ms(c.type),null;case 22:case 23:return vs(c),O2(),u!==null&&ne(Xu),u=c.flags,u&65536?(c.flags=u&-65537|128,c):null;case 24:return ms(an),null;case 25:return null;default:return null}}function sR(u,c){switch(y2(c),c.tag){case 3:ms(an),xe();break;case 26:case 27:case 5:Ie(c);break;case 4:xe();break;case 13:vs(c);break;case 19:ne(sn);break;case 10:ms(c.type);break;case 22:case 23:vs(c),O2(),u!==null&&ne(Xu);break;case 24:ms(an)}}function _h(u,c){try{var h=c.updateQueue,m=h!==null?h.lastEffect:null;if(m!==null){var x=m.next;h=x;do{if((h.tag&u)===u){m=void 0;var S=h.create,T=h.inst;m=S(),T.destroy=m}h=h.next}while(h!==x)}}catch(O){_t(c,c.return,O)}}function xo(u,c,h){try{var m=c.updateQueue,x=m!==null?m.lastEffect:null;if(x!==null){var S=x.next;m=S;do{if((m.tag&u)===u){var T=m.inst,O=T.destroy;if(O!==void 0){T.destroy=void 0,x=c;var L=h,X=O;try{X()}catch(ie){_t(x,L,ie)}}}m=m.next}while(m!==S)}}catch(ie){_t(c,c.return,ie)}}function oR(u){var c=u.updateQueue;if(c!==null){var h=u.stateNode;try{VO(c,h)}catch(m){_t(u,u.return,m)}}}function uR(u,c,h){h.props=Wu(u.type,u.memoizedProps),h.state=u.memoizedState;try{h.componentWillUnmount()}catch(m){_t(u,c,m)}}function wh(u,c){try{var h=u.ref;if(h!==null){switch(u.tag){case 26:case 27:case 5:var m=u.stateNode;break;case 30:m=u.stateNode;break;default:m=u.stateNode}typeof h=="function"?u.refCleanup=h(m):h.current=m}}catch(x){_t(u,c,x)}}function Ea(u,c){var h=u.ref,m=u.refCleanup;if(h!==null)if(typeof m=="function")try{m()}catch(x){_t(u,c,x)}finally{u.refCleanup=null,u=u.alternate,u!=null&&(u.refCleanup=null)}else if(typeof h=="function")try{h(null)}catch(x){_t(u,c,x)}else h.current=null}function lR(u){var c=u.type,h=u.memoizedProps,m=u.stateNode;try{e:switch(c){case"button":case"input":case"select":case"textarea":h.autoFocus&&m.focus();break e;case"img":h.src?m.src=h.src:h.srcSet&&(m.srcset=h.srcSet)}}catch(x){_t(u,u.return,x)}}function aE(u,c,h){try{var m=u.stateNode;iV(m,u.type,h,c),m[Si]=c}catch(x){_t(u,u.return,x)}}function cR(u){return u.tag===5||u.tag===3||u.tag===26||u.tag===27&&To(u.type)||u.tag===4}function sE(u){e:for(;;){for(;u.sibling===null;){if(u.return===null||cR(u.return))return null;u=u.return}for(u.sibling.return=u.return,u=u.sibling;u.tag!==5&&u.tag!==6&&u.tag!==18;){if(u.tag===27&&To(u.type)||u.flags&2||u.child===null||u.tag===4)continue e;u.child.return=u,u=u.child}if(!(u.flags&2))return u.stateNode}}function oE(u,c,h){var m=u.tag;if(m===5||m===6)u=u.stateNode,c?(h.nodeType===9?h.body:h.nodeName==="HTML"?h.ownerDocument.body:h).insertBefore(u,c):(c=h.nodeType===9?h.body:h.nodeName==="HTML"?h.ownerDocument.body:h,c.appendChild(u),h=h._reactRootContainer,h!=null||c.onclick!==null||(c.onclick=wm));else if(m!==4&&(m===27&&To(u.type)&&(h=u.stateNode,c=null),u=u.child,u!==null))for(oE(u,c,h),u=u.sibling;u!==null;)oE(u,c,h),u=u.sibling}function hm(u,c,h){var m=u.tag;if(m===5||m===6)u=u.stateNode,c?h.insertBefore(u,c):h.appendChild(u);else if(m!==4&&(m===27&&To(u.type)&&(h=u.stateNode),u=u.child,u!==null))for(hm(u,c,h),u=u.sibling;u!==null;)hm(u,c,h),u=u.sibling}function fR(u){var c=u.stateNode,h=u.memoizedProps;try{for(var m=u.type,x=c.attributes;x.length;)c.removeAttributeNode(x[0]);On(c,m,h),c[Pn]=u,c[Si]=h}catch(S){_t(u,u.return,S)}}var Es=!1,Xt=!1,uE=!1,dR=typeof WeakSet=="function"?WeakSet:Set,yn=null;function LX(u,c){if(u=u.containerInfo,DE=Om,u=_O(u),s2(u)){if("selectionStart"in u)var h={start:u.selectionStart,end:u.selectionEnd};else e:{h=(h=u.ownerDocument)&&h.defaultView||window;var m=h.getSelection&&h.getSelection();if(m&&m.rangeCount!==0){h=m.anchorNode;var x=m.anchorOffset,S=m.focusNode;m=m.focusOffset;try{h.nodeType,S.nodeType}catch{h=null;break e}var T=0,O=-1,L=-1,X=0,ie=0,ue=u,Q=null;t:for(;;){for(var Z;ue!==h||x!==0&&ue.nodeType!==3||(O=T+x),ue!==S||m!==0&&ue.nodeType!==3||(L=T+m),ue.nodeType===3&&(T+=ue.nodeValue.length),(Z=ue.firstChild)!==null;)Q=ue,ue=Z;for(;;){if(ue===u)break t;if(Q===h&&++X===x&&(O=T),Q===S&&++ie===m&&(L=T),(Z=ue.nextSibling)!==null)break;ue=Q,Q=ue.parentNode}ue=Z}h=O===-1||L===-1?null:{start:O,end:L}}else h=null}h=h||{start:0,end:0}}else h=null;for(RE={focusedElem:u,selectionRange:h},Om=!1,yn=c;yn!==null;)if(c=yn,u=c.child,(c.subtreeFlags&1024)!==0&&u!==null)u.return=c,yn=u;else for(;yn!==null;){switch(c=yn,S=c.alternate,u=c.flags,c.tag){case 0:break;case 11:case 15:break;case 1:if((u&1024)!==0&&S!==null){u=void 0,h=c,x=S.memoizedProps,S=S.memoizedState,m=h.stateNode;try{var Fe=Wu(h.type,x,h.elementType===h.type);u=m.getSnapshotBeforeUpdate(Fe,S),m.__reactInternalSnapshotBeforeUpdate=u}catch(Ne){_t(h,h.return,Ne)}}break;case 3:if((u&1024)!==0){if(u=c.stateNode.containerInfo,h=u.nodeType,h===9)FE(u);else if(h===1)switch(u.nodeName){case"HEAD":case"HTML":case"BODY":FE(u);break;default:u.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((u&1024)!==0)throw Error(i(163))}if(u=c.sibling,u!==null){u.return=c.return,yn=u;break}yn=c.return}}function hR(u,c,h){var m=h.flags;switch(h.tag){case 0:case 11:case 15:Eo(u,h),m&4&&_h(5,h);break;case 1:if(Eo(u,h),m&4)if(u=h.stateNode,c===null)try{u.componentDidMount()}catch(T){_t(h,h.return,T)}else{var x=Wu(h.type,c.memoizedProps);c=c.memoizedState;try{u.componentDidUpdate(x,c,u.__reactInternalSnapshotBeforeUpdate)}catch(T){_t(h,h.return,T)}}m&64&&oR(h),m&512&&wh(h,h.return);break;case 3:if(Eo(u,h),m&64&&(u=h.updateQueue,u!==null)){if(c=null,h.child!==null)switch(h.child.tag){case 27:case 5:c=h.child.stateNode;break;case 1:c=h.child.stateNode}try{VO(u,c)}catch(T){_t(h,h.return,T)}}break;case 27:c===null&&m&4&&fR(h);case 26:case 5:Eo(u,h),c===null&&m&4&&lR(h),m&512&&wh(h,h.return);break;case 12:Eo(u,h);break;case 13:Eo(u,h),m&4&&mR(u,h),m&64&&(u=h.memoizedState,u!==null&&(u=u.dehydrated,u!==null&&(h=YX.bind(null,h),cV(u,h))));break;case 22:if(m=h.memoizedState!==null||Es,!m){c=c!==null&&c.memoizedState!==null||Xt,x=Es;var S=Xt;Es=m,(Xt=c)&&!S?So(u,h,(h.subtreeFlags&8772)!==0):Eo(u,h),Es=x,Xt=S}break;case 30:break;default:Eo(u,h)}}function gR(u){var c=u.alternate;c!==null&&(u.alternate=null,gR(c)),u.child=null,u.deletions=null,u.sibling=null,u.tag===5&&(c=u.stateNode,c!==null&&Px(c)),u.stateNode=null,u.return=null,u.dependencies=null,u.memoizedProps=null,u.memoizedState=null,u.pendingProps=null,u.stateNode=null,u.updateQueue=null}var kt=null,Ai=!1;function Ss(u,c,h){for(h=h.child;h!==null;)pR(u,c,h),h=h.sibling}function pR(u,c,h){if(Pi&&typeof Pi.onCommitFiberUnmount=="function")try{Pi.onCommitFiberUnmount(Gd,h)}catch{}switch(h.tag){case 26:Xt||Ea(h,c),Ss(u,c,h),h.memoizedState?h.memoizedState.count--:h.stateNode&&(h=h.stateNode,h.parentNode.removeChild(h));break;case 27:Xt||Ea(h,c);var m=kt,x=Ai;To(h.type)&&(kt=h.stateNode,Ai=!1),Ss(u,c,h),Rh(h.stateNode),kt=m,Ai=x;break;case 5:Xt||Ea(h,c);case 6:if(m=kt,x=Ai,kt=null,Ss(u,c,h),kt=m,Ai=x,kt!==null)if(Ai)try{(kt.nodeType===9?kt.body:kt.nodeName==="HTML"?kt.ownerDocument.body:kt).removeChild(h.stateNode)}catch(S){_t(h,c,S)}else try{kt.removeChild(h.stateNode)}catch(S){_t(h,c,S)}break;case 18:kt!==null&&(Ai?(u=kt,iN(u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u,h.stateNode),Ph(u)):iN(kt,h.stateNode));break;case 4:m=kt,x=Ai,kt=h.stateNode.containerInfo,Ai=!0,Ss(u,c,h),kt=m,Ai=x;break;case 0:case 11:case 14:case 15:Xt||xo(2,h,c),Xt||xo(4,h,c),Ss(u,c,h);break;case 1:Xt||(Ea(h,c),m=h.stateNode,typeof m.componentWillUnmount=="function"&&uR(h,c,m)),Ss(u,c,h);break;case 21:Ss(u,c,h);break;case 22:Xt=(m=Xt)||h.memoizedState!==null,Ss(u,c,h),Xt=m;break;default:Ss(u,c,h)}}function mR(u,c){if(c.memoizedState===null&&(u=c.alternate,u!==null&&(u=u.memoizedState,u!==null&&(u=u.dehydrated,u!==null))))try{Ph(u)}catch(h){_t(c,c.return,h)}}function UX(u){switch(u.tag){case 13:case 19:var c=u.stateNode;return c===null&&(c=u.stateNode=new dR),c;case 22:return u=u.stateNode,c=u._retryCache,c===null&&(c=u._retryCache=new dR),c;default:throw Error(i(435,u.tag))}}function lE(u,c){var h=UX(u);c.forEach(function(m){var x=XX.bind(null,u,m);h.has(m)||(h.add(m),m.then(x,x))})}function Gi(u,c){var h=c.deletions;if(h!==null)for(var m=0;m<h.length;m++){var x=h[m],S=u,T=c,O=T;e:for(;O!==null;){switch(O.tag){case 27:if(To(O.type)){kt=O.stateNode,Ai=!1;break e}break;case 5:kt=O.stateNode,Ai=!1;break e;case 3:case 4:kt=O.stateNode.containerInfo,Ai=!0;break e}O=O.return}if(kt===null)throw Error(i(160));pR(S,T,x),kt=null,Ai=!1,S=x.alternate,S!==null&&(S.return=null),x.return=null}if(c.subtreeFlags&13878)for(c=c.child;c!==null;)yR(c,u),c=c.sibling}var Pr=null;function yR(u,c){var h=u.alternate,m=u.flags;switch(u.tag){case 0:case 11:case 14:case 15:Gi(c,u),Yi(u),m&4&&(xo(3,u,u.return),_h(3,u),xo(5,u,u.return));break;case 1:Gi(c,u),Yi(u),m&512&&(Xt||h===null||Ea(h,h.return)),m&64&&Es&&(u=u.updateQueue,u!==null&&(m=u.callbacks,m!==null&&(h=u.shared.hiddenCallbacks,u.shared.hiddenCallbacks=h===null?m:h.concat(m))));break;case 26:var x=Pr;if(Gi(c,u),Yi(u),m&512&&(Xt||h===null||Ea(h,h.return)),m&4){var S=h!==null?h.memoizedState:null;if(m=u.memoizedState,h===null)if(m===null)if(u.stateNode===null){e:{m=u.type,h=u.memoizedProps,x=x.ownerDocument||x;t:switch(m){case"title":S=x.getElementsByTagName("title")[0],(!S||S[Vd]||S[Pn]||S.namespaceURI==="http://www.w3.org/2000/svg"||S.hasAttribute("itemprop"))&&(S=x.createElement(m),x.head.insertBefore(S,x.querySelector("head > title"))),On(S,m,h),S[Pn]=u,pn(S),m=S;break e;case"link":var T=fN("link","href",x).get(m+(h.href||""));if(T){for(var O=0;O<T.length;O++)if(S=T[O],S.getAttribute("href")===(h.href==null||h.href===""?null:h.href)&&S.getAttribute("rel")===(h.rel==null?null:h.rel)&&S.getAttribute("title")===(h.title==null?null:h.title)&&S.getAttribute("crossorigin")===(h.crossOrigin==null?null:h.crossOrigin)){T.splice(O,1);break t}}S=x.createElement(m),On(S,m,h),x.head.appendChild(S);break;case"meta":if(T=fN("meta","content",x).get(m+(h.content||""))){for(O=0;O<T.length;O++)if(S=T[O],S.getAttribute("content")===(h.content==null?null:""+h.content)&&S.getAttribute("name")===(h.name==null?null:h.name)&&S.getAttribute("property")===(h.property==null?null:h.property)&&S.getAttribute("http-equiv")===(h.httpEquiv==null?null:h.httpEquiv)&&S.getAttribute("charset")===(h.charSet==null?null:h.charSet)){T.splice(O,1);break t}}S=x.createElement(m),On(S,m,h),x.head.appendChild(S);break;default:throw Error(i(468,m))}S[Pn]=u,pn(S),m=S}u.stateNode=m}else dN(x,u.type,u.stateNode);else u.stateNode=cN(x,m,u.memoizedProps);else S!==m?(S===null?h.stateNode!==null&&(h=h.stateNode,h.parentNode.removeChild(h)):S.count--,m===null?dN(x,u.type,u.stateNode):cN(x,m,u.memoizedProps)):m===null&&u.stateNode!==null&&aE(u,u.memoizedProps,h.memoizedProps)}break;case 27:Gi(c,u),Yi(u),m&512&&(Xt||h===null||Ea(h,h.return)),h!==null&&m&4&&aE(u,u.memoizedProps,h.memoizedProps);break;case 5:if(Gi(c,u),Yi(u),m&512&&(Xt||h===null||Ea(h,h.return)),u.flags&32){x=u.stateNode;try{Ac(x,"")}catch(Z){_t(u,u.return,Z)}}m&4&&u.stateNode!=null&&(x=u.memoizedProps,aE(u,x,h!==null?h.memoizedProps:x)),m&1024&&(uE=!0);break;case 6:if(Gi(c,u),Yi(u),m&4){if(u.stateNode===null)throw Error(i(162));m=u.memoizedProps,h=u.stateNode;try{h.nodeValue=m}catch(Z){_t(u,u.return,Z)}}break;case 3:if(Tm=null,x=Pr,Pr=$m(c.containerInfo),Gi(c,u),Pr=x,Yi(u),m&4&&h!==null&&h.memoizedState.isDehydrated)try{Ph(c.containerInfo)}catch(Z){_t(u,u.return,Z)}uE&&(uE=!1,vR(u));break;case 4:m=Pr,Pr=$m(u.stateNode.containerInfo),Gi(c,u),Yi(u),Pr=m;break;case 12:Gi(c,u),Yi(u);break;case 13:Gi(c,u),Yi(u),u.child.flags&8192&&u.memoizedState!==null!=(h!==null&&h.memoizedState!==null)&&(pE=Jt()),m&4&&(m=u.updateQueue,m!==null&&(u.updateQueue=null,lE(u,m)));break;case 22:x=u.memoizedState!==null;var L=h!==null&&h.memoizedState!==null,X=Es,ie=Xt;if(Es=X||x,Xt=ie||L,Gi(c,u),Xt=ie,Es=X,Yi(u),m&8192)e:for(c=u.stateNode,c._visibility=x?c._visibility&-2:c._visibility|1,x&&(h===null||L||Es||Xt||Qu(u)),h=null,c=u;;){if(c.tag===5||c.tag===26){if(h===null){L=h=c;try{if(S=L.stateNode,x)T=S.style,typeof T.setProperty=="function"?T.setProperty("display","none","important"):T.display="none";else{O=L.stateNode;var ue=L.memoizedProps.style,Q=ue!=null&&ue.hasOwnProperty("display")?ue.display:null;O.style.display=Q==null||typeof Q=="boolean"?"":(""+Q).trim()}}catch(Z){_t(L,L.return,Z)}}}else if(c.tag===6){if(h===null){L=c;try{L.stateNode.nodeValue=x?"":L.memoizedProps}catch(Z){_t(L,L.return,Z)}}}else if((c.tag!==22&&c.tag!==23||c.memoizedState===null||c===u)&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===u)break e;for(;c.sibling===null;){if(c.return===null||c.return===u)break e;h===c&&(h=null),c=c.return}h===c&&(h=null),c.sibling.return=c.return,c=c.sibling}m&4&&(m=u.updateQueue,m!==null&&(h=m.retryQueue,h!==null&&(m.retryQueue=null,lE(u,h))));break;case 19:Gi(c,u),Yi(u),m&4&&(m=u.updateQueue,m!==null&&(u.updateQueue=null,lE(u,m)));break;case 30:break;case 21:break;default:Gi(c,u),Yi(u)}}function Yi(u){var c=u.flags;if(c&2){try{for(var h,m=u.return;m!==null;){if(cR(m)){h=m;break}m=m.return}if(h==null)throw Error(i(160));switch(h.tag){case 27:var x=h.stateNode,S=sE(u);hm(u,S,x);break;case 5:var T=h.stateNode;h.flags&32&&(Ac(T,""),h.flags&=-33);var O=sE(u);hm(u,O,T);break;case 3:case 4:var L=h.stateNode.containerInfo,X=sE(u);oE(u,X,L);break;default:throw Error(i(161))}}catch(ie){_t(u,u.return,ie)}u.flags&=-3}c&4096&&(u.flags&=-4097)}function vR(u){if(u.subtreeFlags&1024)for(u=u.child;u!==null;){var c=u;vR(c),c.tag===5&&c.flags&1024&&c.stateNode.reset(),u=u.sibling}}function Eo(u,c){if(c.subtreeFlags&8772)for(c=c.child;c!==null;)hR(u,c.alternate,c),c=c.sibling}function Qu(u){for(u=u.child;u!==null;){var c=u;switch(c.tag){case 0:case 11:case 14:case 15:xo(4,c,c.return),Qu(c);break;case 1:Ea(c,c.return);var h=c.stateNode;typeof h.componentWillUnmount=="function"&&uR(c,c.return,h),Qu(c);break;case 27:Rh(c.stateNode);case 26:case 5:Ea(c,c.return),Qu(c);break;case 22:c.memoizedState===null&&Qu(c);break;case 30:Qu(c);break;default:Qu(c)}u=u.sibling}}function So(u,c,h){for(h=h&&(c.subtreeFlags&8772)!==0,c=c.child;c!==null;){var m=c.alternate,x=u,S=c,T=S.flags;switch(S.tag){case 0:case 11:case 15:So(x,S,h),_h(4,S);break;case 1:if(So(x,S,h),m=S,x=m.stateNode,typeof x.componentDidMount=="function")try{x.componentDidMount()}catch(X){_t(m,m.return,X)}if(m=S,x=m.updateQueue,x!==null){var O=m.stateNode;try{var L=x.shared.hiddenCallbacks;if(L!==null)for(x.shared.hiddenCallbacks=null,x=0;x<L.length;x++)XO(L[x],O)}catch(X){_t(m,m.return,X)}}h&&T&64&&oR(S),wh(S,S.return);break;case 27:fR(S);case 26:case 5:So(x,S,h),h&&m===null&&T&4&&lR(S),wh(S,S.return);break;case 12:So(x,S,h);break;case 13:So(x,S,h),h&&T&4&&mR(x,S);break;case 22:S.memoizedState===null&&So(x,S,h),wh(S,S.return);break;case 30:break;default:So(x,S,h)}c=c.sibling}}function cE(u,c){var h=null;u!==null&&u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(h=u.memoizedState.cachePool.pool),u=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(u=c.memoizedState.cachePool.pool),u!==h&&(u!=null&&u.refCount++,h!=null&&lh(h))}function fE(u,c){u=null,c.alternate!==null&&(u=c.alternate.memoizedState.cache),c=c.memoizedState.cache,c!==u&&(c.refCount++,u!=null&&lh(u))}function Sa(u,c,h,m){if(c.subtreeFlags&10256)for(c=c.child;c!==null;)bR(u,c,h,m),c=c.sibling}function bR(u,c,h,m){var x=c.flags;switch(c.tag){case 0:case 11:case 15:Sa(u,c,h,m),x&2048&&_h(9,c);break;case 1:Sa(u,c,h,m);break;case 3:Sa(u,c,h,m),x&2048&&(u=null,c.alternate!==null&&(u=c.alternate.memoizedState.cache),c=c.memoizedState.cache,c!==u&&(c.refCount++,u!=null&&lh(u)));break;case 12:if(x&2048){Sa(u,c,h,m),u=c.stateNode;try{var S=c.memoizedProps,T=S.id,O=S.onPostCommit;typeof O=="function"&&O(T,c.alternate===null?"mount":"update",u.passiveEffectDuration,-0)}catch(L){_t(c,c.return,L)}}else Sa(u,c,h,m);break;case 13:Sa(u,c,h,m);break;case 23:break;case 22:S=c.stateNode,T=c.alternate,c.memoizedState!==null?S._visibility&2?Sa(u,c,h,m):Ah(u,c):S._visibility&2?Sa(u,c,h,m):(S._visibility|=2,Hc(u,c,h,m,(c.subtreeFlags&10256)!==0)),x&2048&&cE(T,c);break;case 24:Sa(u,c,h,m),x&2048&&fE(c.alternate,c);break;default:Sa(u,c,h,m)}}function Hc(u,c,h,m,x){for(x=x&&(c.subtreeFlags&10256)!==0,c=c.child;c!==null;){var S=u,T=c,O=h,L=m,X=T.flags;switch(T.tag){case 0:case 11:case 15:Hc(S,T,O,L,x),_h(8,T);break;case 23:break;case 22:var ie=T.stateNode;T.memoizedState!==null?ie._visibility&2?Hc(S,T,O,L,x):Ah(S,T):(ie._visibility|=2,Hc(S,T,O,L,x)),x&&X&2048&&cE(T.alternate,T);break;case 24:Hc(S,T,O,L,x),x&&X&2048&&fE(T.alternate,T);break;default:Hc(S,T,O,L,x)}c=c.sibling}}function Ah(u,c){if(c.subtreeFlags&10256)for(c=c.child;c!==null;){var h=u,m=c,x=m.flags;switch(m.tag){case 22:Ah(h,m),x&2048&&cE(m.alternate,m);break;case 24:Ah(h,m),x&2048&&fE(m.alternate,m);break;default:Ah(h,m)}c=c.sibling}}var $h=8192;function Gc(u){if(u.subtreeFlags&$h)for(u=u.child;u!==null;)xR(u),u=u.sibling}function xR(u){switch(u.tag){case 26:Gc(u),u.flags&$h&&u.memoizedState!==null&&_V(Pr,u.memoizedState,u.memoizedProps);break;case 5:Gc(u);break;case 3:case 4:var c=Pr;Pr=$m(u.stateNode.containerInfo),Gc(u),Pr=c;break;case 22:u.memoizedState===null&&(c=u.alternate,c!==null&&c.memoizedState!==null?(c=$h,$h=16777216,Gc(u),$h=c):Gc(u));break;default:Gc(u)}}function ER(u){var c=u.alternate;if(c!==null&&(u=c.child,u!==null)){c.child=null;do c=u.sibling,u.sibling=null,u=c;while(u!==null)}}function Ch(u){var c=u.deletions;if((u.flags&16)!==0){if(c!==null)for(var h=0;h<c.length;h++){var m=c[h];yn=m,_R(m,u)}ER(u)}if(u.subtreeFlags&10256)for(u=u.child;u!==null;)SR(u),u=u.sibling}function SR(u){switch(u.tag){case 0:case 11:case 15:Ch(u),u.flags&2048&&xo(9,u,u.return);break;case 3:Ch(u);break;case 12:Ch(u);break;case 22:var c=u.stateNode;u.memoizedState!==null&&c._visibility&2&&(u.return===null||u.return.tag!==13)?(c._visibility&=-3,gm(u)):Ch(u);break;default:Ch(u)}}function gm(u){var c=u.deletions;if((u.flags&16)!==0){if(c!==null)for(var h=0;h<c.length;h++){var m=c[h];yn=m,_R(m,u)}ER(u)}for(u=u.child;u!==null;){switch(c=u,c.tag){case 0:case 11:case 15:xo(8,c,c.return),gm(c);break;case 22:h=c.stateNode,h._visibility&2&&(h._visibility&=-3,gm(c));break;default:gm(c)}u=u.sibling}}function _R(u,c){for(;yn!==null;){var h=yn;switch(h.tag){case 0:case 11:case 15:xo(8,h,c);break;case 23:case 22:if(h.memoizedState!==null&&h.memoizedState.cachePool!==null){var m=h.memoizedState.cachePool.pool;m!=null&&m.refCount++}break;case 24:lh(h.memoizedState.cache)}if(m=h.child,m!==null)m.return=h,yn=m;else e:for(h=u;yn!==null;){m=yn;var x=m.sibling,S=m.return;if(gR(m),m===h){yn=null;break e}if(x!==null){x.return=S,yn=x;break e}yn=S}}}var BX={getCacheForType:function(u){var c=qn(an),h=c.data.get(u);return h===void 0&&(h=u(),c.data.set(u,h)),h}},IX=typeof WeakMap=="function"?WeakMap:Map,ht=0,$t=null,We=null,et=0,gt=0,Xi=null,_o=!1,Yc=!1,dE=!1,_s=0,Bt=0,wo=0,Zu=0,hE=0,vr=0,Xc=0,Th=null,$i=null,gE=!1,pE=0,pm=1/0,mm=null,Ao=null,kn=0,$o=null,Vc=null,Wc=0,mE=0,yE=null,wR=null,Mh=0,vE=null;function Vi(){if((ht&2)!==0&&et!==0)return et&-et;if(D.T!==null){var u=Fc;return u!==0?u:AE()}return Ik()}function AR(){vr===0&&(vr=(et&536870912)===0||lt?Fk():536870912);var u=yr.current;return u!==null&&(u.flags|=32),vr}function Wi(u,c,h){(u===$t&&(gt===2||gt===9)||u.cancelPendingCommit!==null)&&(Qc(u,0),Co(u,et,vr,!1)),Xd(u,h),((ht&2)===0||u!==$t)&&(u===$t&&((ht&2)===0&&(Zu|=h),Bt===4&&Co(u,et,vr,!1)),_a(u))}function $R(u,c,h){if((ht&6)!==0)throw Error(i(327));var m=!h&&(c&124)===0&&(c&u.expiredLanes)===0||Yd(u,c),x=m?jX(u,c):EE(u,c,!0),S=m;do{if(x===0){Yc&&!m&&Co(u,c,0,!1);break}else{if(h=u.current.alternate,S&&!PX(h)){x=EE(u,c,!1),S=!1;continue}if(x===2){if(S=c,u.errorRecoveryDisabledLanes&S)var T=0;else T=u.pendingLanes&-536870913,T=T!==0?T:T&536870912?536870912:0;if(T!==0){c=T;e:{var O=u;x=Th;var L=O.current.memoizedState.isDehydrated;if(L&&(Qc(O,T).flags|=256),T=EE(O,T,!1),T!==2){if(dE&&!L){O.errorRecoveryDisabledLanes|=S,Zu|=S,x=4;break e}S=$i,$i=x,S!==null&&($i===null?$i=S:$i.push.apply($i,S))}x=T}if(S=!1,x!==2)continue}}if(x===1){Qc(u,0),Co(u,c,0,!0);break}e:{switch(m=u,S=x,S){case 0:case 1:throw Error(i(345));case 4:if((c&4194048)!==c)break;case 6:Co(m,c,vr,!_o);break e;case 2:$i=null;break;case 3:case 5:break;default:throw Error(i(329))}if((c&62914560)===c&&(x=pE+300-Jt(),10<x)){if(Co(m,c,vr,!_o),C0(m,0,!0)!==0)break e;m.timeoutHandle=tN(CR.bind(null,m,h,$i,mm,gE,c,vr,Zu,Xc,_o,S,2,-0,0),x);break e}CR(m,h,$i,mm,gE,c,vr,Zu,Xc,_o,S,0,-0,0)}}break}while(!0);_a(u)}function CR(u,c,h,m,x,S,T,O,L,X,ie,ue,Q,Z){if(u.timeoutHandle=-1,ue=c.subtreeFlags,(ue&8192||(ue&16785408)===16785408)&&(Fh={stylesheets:null,count:0,unsuspend:SV},xR(c),ue=wV(),ue!==null)){u.cancelPendingCommit=ue(NR.bind(null,u,c,S,h,m,x,T,O,L,ie,1,Q,Z)),Co(u,S,T,!X);return}NR(u,c,S,h,m,x,T,O,L)}function PX(u){for(var c=u;;){var h=c.tag;if((h===0||h===11||h===15)&&c.flags&16384&&(h=c.updateQueue,h!==null&&(h=h.stores,h!==null)))for(var m=0;m<h.length;m++){var x=h[m],S=x.getSnapshot;x=x.value;try{if(!ji(S(),x))return!1}catch{return!1}}if(h=c.child,c.subtreeFlags&16384&&h!==null)h.return=c,c=h;else{if(c===u)break;for(;c.sibling===null;){if(c.return===null||c.return===u)return!0;c=c.return}c.sibling.return=c.return,c=c.sibling}}return!0}function Co(u,c,h,m){c&=~hE,c&=~Zu,u.suspendedLanes|=c,u.pingedLanes&=~c,m&&(u.warmLanes|=c),m=u.expirationTimes;for(var x=c;0<x;){var S=31-qi(x),T=1<<S;m[S]=-1,x&=~T}h!==0&&Uk(u,h,c)}function ym(){return(ht&6)===0?(kh(0),!1):!0}function bE(){if(We!==null){if(gt===0)var u=We.return;else u=We,ps=Gu=null,F2(u),qc=null,xh=0,u=We;for(;u!==null;)sR(u.alternate,u),u=u.return;We=null}}function Qc(u,c){var h=u.timeoutHandle;h!==-1&&(u.timeoutHandle=-1,aV(h)),h=u.cancelPendingCommit,h!==null&&(u.cancelPendingCommit=null,h()),bE(),$t=u,We=h=ds(u.current,null),et=c,gt=0,Xi=null,_o=!1,Yc=Yd(u,c),dE=!1,Xc=vr=hE=Zu=wo=Bt=0,$i=Th=null,gE=!1,(c&8)!==0&&(c|=c&32);var m=u.entangledLanes;if(m!==0)for(u=u.entanglements,m&=c;0<m;){var x=31-qi(m),S=1<<x;c|=u[x],m&=~S}return _s=c,B0(),h}function TR(u,c){He=null,D.H=rm,c===fh||c===V0?(c=GO(),gt=3):c===qO?(c=GO(),gt=4):gt=c===YD?8:c!==null&&typeof c=="object"&&typeof c.then=="function"?6:1,Xi=c,We===null&&(Bt=1,lm(u,hr(c,u.current)))}function MR(){var u=D.H;return D.H=rm,u===null?rm:u}function kR(){var u=D.A;return D.A=BX,u}function xE(){Bt=4,_o||(et&4194048)!==et&&yr.current!==null||(Yc=!0),(wo&134217727)===0&&(Zu&134217727)===0||$t===null||Co($t,et,vr,!1)}function EE(u,c,h){var m=ht;ht|=2;var x=MR(),S=kR();($t!==u||et!==c)&&(mm=null,Qc(u,c)),c=!1;var T=Bt;e:do try{if(gt!==0&&We!==null){var O=We,L=Xi;switch(gt){case 8:bE(),T=6;break e;case 3:case 2:case 9:case 6:yr.current===null&&(c=!0);var X=gt;if(gt=0,Xi=null,Zc(u,O,L,X),h&&Yc){T=0;break e}break;default:X=gt,gt=0,Xi=null,Zc(u,O,L,X)}}qX(),T=Bt;break}catch(ie){TR(u,ie)}while(!0);return c&&u.shellSuspendCounter++,ps=Gu=null,ht=m,D.H=x,D.A=S,We===null&&($t=null,et=0,B0()),T}function qX(){for(;We!==null;)OR(We)}function jX(u,c){var h=ht;ht|=2;var m=MR(),x=kR();$t!==u||et!==c?(mm=null,pm=Jt()+500,Qc(u,c)):Yc=Yd(u,c);e:do try{if(gt!==0&&We!==null){c=We;var S=Xi;t:switch(gt){case 1:gt=0,Xi=null,Zc(u,c,S,1);break;case 2:case 9:if(jO(S)){gt=0,Xi=null,DR(c);break}c=function(){gt!==2&&gt!==9||$t!==u||(gt=7),_a(u)},S.then(c,c);break e;case 3:gt=7;break e;case 4:gt=5;break e;case 7:jO(S)?(gt=0,Xi=null,DR(c)):(gt=0,Xi=null,Zc(u,c,S,7));break;case 5:var T=null;switch(We.tag){case 26:T=We.memoizedState;case 5:case 27:var O=We;if(!T||hN(T)){gt=0,Xi=null;var L=O.sibling;if(L!==null)We=L;else{var X=O.return;X!==null?(We=X,vm(X)):We=null}break t}}gt=0,Xi=null,Zc(u,c,S,5);break;case 6:gt=0,Xi=null,Zc(u,c,S,6);break;case 8:bE(),Bt=6;break e;default:throw Error(i(462))}}HX();break}catch(ie){TR(u,ie)}while(!0);return ps=Gu=null,D.H=m,D.A=x,ht=h,We!==null?0:($t=null,et=0,B0(),Bt)}function HX(){for(;We!==null&&!Kt();)OR(We)}function OR(u){var c=rR(u.alternate,u,_s);u.memoizedProps=u.pendingProps,c===null?vm(u):We=c}function DR(u){var c=u,h=c.alternate;switch(c.tag){case 15:case 0:c=KD(h,c,c.pendingProps,c.type,void 0,et);break;case 11:c=KD(h,c,c.pendingProps,c.type.render,c.ref,et);break;case 5:F2(c);default:sR(h,c),c=We=RO(c,_s),c=rR(h,c,_s)}u.memoizedProps=u.pendingProps,c===null?vm(u):We=c}function Zc(u,c,h,m){ps=Gu=null,F2(c),qc=null,xh=0;var x=c.return;try{if(RX(u,x,c,h,et)){Bt=1,lm(u,hr(h,u.current)),We=null;return}}catch(S){if(x!==null)throw We=x,S;Bt=1,lm(u,hr(h,u.current)),We=null;return}c.flags&32768?(lt||m===1?u=!0:Yc||(et&536870912)!==0?u=!1:(_o=u=!0,(m===2||m===9||m===3||m===6)&&(m=yr.current,m!==null&&m.tag===13&&(m.flags|=16384))),RR(c,u)):vm(c)}function vm(u){var c=u;do{if((c.flags&32768)!==0){RR(c,_o);return}u=c.return;var h=zX(c.alternate,c,_s);if(h!==null){We=h;return}if(c=c.sibling,c!==null){We=c;return}We=c=u}while(c!==null);Bt===0&&(Bt=5)}function RR(u,c){do{var h=FX(u.alternate,u);if(h!==null){h.flags&=32767,We=h;return}if(h=u.return,h!==null&&(h.flags|=32768,h.subtreeFlags=0,h.deletions=null),!c&&(u=u.sibling,u!==null)){We=u;return}We=u=h}while(u!==null);Bt=6,We=null}function NR(u,c,h,m,x,S,T,O,L){u.cancelPendingCommit=null;do bm();while(kn!==0);if((ht&6)!==0)throw Error(i(327));if(c!==null){if(c===u.current)throw Error(i(177));if(S=c.lanes|c.childLanes,S|=f2,SY(u,h,S,T,O,L),u===$t&&(We=$t=null,et=0),Vc=c,$o=u,Wc=h,mE=S,yE=x,wR=m,(c.subtreeFlags&10256)!==0||(c.flags&10256)!==0?(u.callbackNode=null,u.callbackPriority=0,VX(w0,function(){return BR(),null})):(u.callbackNode=null,u.callbackPriority=0),m=(c.flags&13878)!==0,(c.subtreeFlags&13878)!==0||m){m=D.T,D.T=null,x=I.p,I.p=2,T=ht,ht|=4;try{LX(u,c,h)}finally{ht=T,I.p=x,D.T=m}}kn=1,zR(),FR(),LR()}}function zR(){if(kn===1){kn=0;var u=$o,c=Vc,h=(c.flags&13878)!==0;if((c.subtreeFlags&13878)!==0||h){h=D.T,D.T=null;var m=I.p;I.p=2;var x=ht;ht|=4;try{yR(c,u);var S=RE,T=_O(u.containerInfo),O=S.focusedElem,L=S.selectionRange;if(T!==O&&O&&O.ownerDocument&&SO(O.ownerDocument.documentElement,O)){if(L!==null&&s2(O)){var X=L.start,ie=L.end;if(ie===void 0&&(ie=X),"selectionStart"in O)O.selectionStart=X,O.selectionEnd=Math.min(ie,O.value.length);else{var ue=O.ownerDocument||document,Q=ue&&ue.defaultView||window;if(Q.getSelection){var Z=Q.getSelection(),Fe=O.textContent.length,Ne=Math.min(L.start,Fe),xt=L.end===void 0?Ne:Math.min(L.end,Fe);!Z.extend&&Ne>xt&&(T=xt,xt=Ne,Ne=T);var j=EO(O,Ne),P=EO(O,xt);if(j&&P&&(Z.rangeCount!==1||Z.anchorNode!==j.node||Z.anchorOffset!==j.offset||Z.focusNode!==P.node||Z.focusOffset!==P.offset)){var H=ue.createRange();H.setStart(j.node,j.offset),Z.removeAllRanges(),Ne>xt?(Z.addRange(H),Z.extend(P.node,P.offset)):(H.setEnd(P.node,P.offset),Z.addRange(H))}}}}for(ue=[],Z=O;Z=Z.parentNode;)Z.nodeType===1&&ue.push({element:Z,left:Z.scrollLeft,top:Z.scrollTop});for(typeof O.focus=="function"&&O.focus(),O=0;O<ue.length;O++){var ae=ue[O];ae.element.scrollLeft=ae.left,ae.element.scrollTop=ae.top}}Om=!!DE,RE=DE=null}finally{ht=x,I.p=m,D.T=h}}u.current=c,kn=2}}function FR(){if(kn===2){kn=0;var u=$o,c=Vc,h=(c.flags&8772)!==0;if((c.subtreeFlags&8772)!==0||h){h=D.T,D.T=null;var m=I.p;I.p=2;var x=ht;ht|=4;try{hR(u,c.alternate,c)}finally{ht=x,I.p=m,D.T=h}}kn=3}}function LR(){if(kn===4||kn===3){kn=0,gn();var u=$o,c=Vc,h=Wc,m=wR;(c.subtreeFlags&10256)!==0||(c.flags&10256)!==0?kn=5:(kn=0,Vc=$o=null,UR(u,u.pendingLanes));var x=u.pendingLanes;if(x===0&&(Ao=null),Bx(h),c=c.stateNode,Pi&&typeof Pi.onCommitFiberRoot=="function")try{Pi.onCommitFiberRoot(Gd,c,void 0,(c.current.flags&128)===128)}catch{}if(m!==null){c=D.T,x=I.p,I.p=2,D.T=null;try{for(var S=u.onRecoverableError,T=0;T<m.length;T++){var O=m[T];S(O.value,{componentStack:O.stack})}}finally{D.T=c,I.p=x}}(Wc&3)!==0&&bm(),_a(u),x=u.pendingLanes,(h&4194090)!==0&&(x&42)!==0?u===vE?Mh++:(Mh=0,vE=u):Mh=0,kh(0)}}function UR(u,c){(u.pooledCacheLanes&=c)===0&&(c=u.pooledCache,c!=null&&(u.pooledCache=null,lh(c)))}function bm(u){return zR(),FR(),LR(),BR()}function BR(){if(kn!==5)return!1;var u=$o,c=mE;mE=0;var h=Bx(Wc),m=D.T,x=I.p;try{I.p=32>h?32:h,D.T=null,h=yE,yE=null;var S=$o,T=Wc;if(kn=0,Vc=$o=null,Wc=0,(ht&6)!==0)throw Error(i(331));var O=ht;if(ht|=4,SR(S.current),bR(S,S.current,T,h),ht=O,kh(0,!1),Pi&&typeof Pi.onPostCommitFiberRoot=="function")try{Pi.onPostCommitFiberRoot(Gd,S)}catch{}return!0}finally{I.p=x,D.T=m,UR(u,c)}}function IR(u,c,h){c=hr(h,c),c=Q2(u.stateNode,c,2),u=mo(u,c,2),u!==null&&(Xd(u,2),_a(u))}function _t(u,c,h){if(u.tag===3)IR(u,u,h);else for(;c!==null;){if(c.tag===3){IR(c,u,h);break}else if(c.tag===1){var m=c.stateNode;if(typeof c.type.getDerivedStateFromError=="function"||typeof m.componentDidCatch=="function"&&(Ao===null||!Ao.has(m))){u=hr(h,u),h=HD(2),m=mo(c,h,2),m!==null&&(GD(h,m,c,u),Xd(m,2),_a(m));break}}c=c.return}}function SE(u,c,h){var m=u.pingCache;if(m===null){m=u.pingCache=new IX;var x=new Set;m.set(c,x)}else x=m.get(c),x===void 0&&(x=new Set,m.set(c,x));x.has(h)||(dE=!0,x.add(h),u=GX.bind(null,u,c,h),c.then(u,u))}function GX(u,c,h){var m=u.pingCache;m!==null&&m.delete(c),u.pingedLanes|=u.suspendedLanes&h,u.warmLanes&=~h,$t===u&&(et&h)===h&&(Bt===4||Bt===3&&(et&62914560)===et&&300>Jt()-pE?(ht&2)===0&&Qc(u,0):hE|=h,Xc===et&&(Xc=0)),_a(u)}function PR(u,c){c===0&&(c=Lk()),u=Dc(u,c),u!==null&&(Xd(u,c),_a(u))}function YX(u){var c=u.memoizedState,h=0;c!==null&&(h=c.retryLane),PR(u,h)}function XX(u,c){var h=0;switch(u.tag){case 13:var m=u.stateNode,x=u.memoizedState;x!==null&&(h=x.retryLane);break;case 19:m=u.stateNode;break;case 22:m=u.stateNode._retryCache;break;default:throw Error(i(314))}m!==null&&m.delete(c),PR(u,h)}function VX(u,c){return Gt(u,c)}var xm=null,Kc=null,_E=!1,Em=!1,wE=!1,Ku=0;function _a(u){u!==Kc&&u.next===null&&(Kc===null?xm=Kc=u:Kc=Kc.next=u),Em=!0,_E||(_E=!0,QX())}function kh(u,c){if(!wE&&Em){wE=!0;do for(var h=!1,m=xm;m!==null;){if(u!==0){var x=m.pendingLanes;if(x===0)var S=0;else{var T=m.suspendedLanes,O=m.pingedLanes;S=(1<<31-qi(42|u)+1)-1,S&=x&~(T&~O),S=S&201326741?S&201326741|1:S?S|2:0}S!==0&&(h=!0,GR(m,S))}else S=et,S=C0(m,m===$t?S:0,m.cancelPendingCommit!==null||m.timeoutHandle!==-1),(S&3)===0||Yd(m,S)||(h=!0,GR(m,S));m=m.next}while(h);wE=!1}}function WX(){qR()}function qR(){Em=_E=!1;var u=0;Ku!==0&&(rV()&&(u=Ku),Ku=0);for(var c=Jt(),h=null,m=xm;m!==null;){var x=m.next,S=jR(m,c);S===0?(m.next=null,h===null?xm=x:h.next=x,x===null&&(Kc=h)):(h=m,(u!==0||(S&3)!==0)&&(Em=!0)),m=x}kh(u)}function jR(u,c){for(var h=u.suspendedLanes,m=u.pingedLanes,x=u.expirationTimes,S=u.pendingLanes&-62914561;0<S;){var T=31-qi(S),O=1<<T,L=x[T];L===-1?((O&h)===0||(O&m)!==0)&&(x[T]=EY(O,c)):L<=c&&(u.expiredLanes|=O),S&=~O}if(c=$t,h=et,h=C0(u,u===c?h:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),m=u.callbackNode,h===0||u===c&&(gt===2||gt===9)||u.cancelPendingCommit!==null)return m!==null&&m!==null&&it(m),u.callbackNode=null,u.callbackPriority=0;if((h&3)===0||Yd(u,h)){if(c=h&-h,c===u.callbackPriority)return c;switch(m!==null&&it(m),Bx(h)){case 2:case 8:h=Nk;break;case 32:h=w0;break;case 268435456:h=zk;break;default:h=w0}return m=HR.bind(null,u),h=Gt(h,m),u.callbackPriority=c,u.callbackNode=h,c}return m!==null&&m!==null&&it(m),u.callbackPriority=2,u.callbackNode=null,2}function HR(u,c){if(kn!==0&&kn!==5)return u.callbackNode=null,u.callbackPriority=0,null;var h=u.callbackNode;if(bm()&&u.callbackNode!==h)return null;var m=et;return m=C0(u,u===$t?m:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),m===0?null:($R(u,m,c),jR(u,Jt()),u.callbackNode!=null&&u.callbackNode===h?HR.bind(null,u):null)}function GR(u,c){if(bm())return null;$R(u,c,!0)}function QX(){sV(function(){(ht&6)!==0?Gt(Rk,WX):qR()})}function AE(){return Ku===0&&(Ku=Fk()),Ku}function YR(u){return u==null||typeof u=="symbol"||typeof u=="boolean"?null:typeof u=="function"?u:D0(""+u)}function XR(u,c){var h=c.ownerDocument.createElement("input");return h.name=c.name,h.value=c.value,u.id&&h.setAttribute("form",u.id),c.parentNode.insertBefore(h,c),u=new FormData(u),h.parentNode.removeChild(h),u}function ZX(u,c,h,m,x){if(c==="submit"&&h&&h.stateNode===x){var S=YR((x[Si]||null).action),T=m.submitter;T&&(c=(c=T[Si]||null)?YR(c.formAction):T.getAttribute("formAction"),c!==null&&(S=c,T=null));var O=new F0("action","action",null,m,x);u.push({event:O,listeners:[{instance:null,listener:function(){if(m.defaultPrevented){if(Ku!==0){var L=T?XR(x,T):new FormData(x);G2(h,{pending:!0,data:L,method:x.method,action:S},null,L)}}else typeof S=="function"&&(O.preventDefault(),L=T?XR(x,T):new FormData(x),G2(h,{pending:!0,data:L,method:x.method,action:S},S,L))},currentTarget:x}]})}}for(var $E=0;$E<c2.length;$E++){var CE=c2[$E],KX=CE.toLowerCase(),JX=CE[0].toUpperCase()+CE.slice(1);Ir(KX,"on"+JX)}Ir($O,"onAnimationEnd"),Ir(CO,"onAnimationIteration"),Ir(TO,"onAnimationStart"),Ir("dblclick","onDoubleClick"),Ir("focusin","onFocus"),Ir("focusout","onBlur"),Ir(mX,"onTransitionRun"),Ir(yX,"onTransitionStart"),Ir(vX,"onTransitionCancel"),Ir(MO,"onTransitionEnd"),Sc("onMouseEnter",["mouseout","mouseover"]),Sc("onMouseLeave",["mouseout","mouseover"]),Sc("onPointerEnter",["pointerout","pointerover"]),Sc("onPointerLeave",["pointerout","pointerover"]),Fu("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Fu("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Fu("onBeforeInput",["compositionend","keypress","textInput","paste"]),Fu("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Fu("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Fu("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Oh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),eV=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Oh));function VR(u,c){c=(c&4)!==0;for(var h=0;h<u.length;h++){var m=u[h],x=m.event;m=m.listeners;e:{var S=void 0;if(c)for(var T=m.length-1;0<=T;T--){var O=m[T],L=O.instance,X=O.currentTarget;if(O=O.listener,L!==S&&x.isPropagationStopped())break e;S=O,x.currentTarget=X;try{S(x)}catch(ie){um(ie)}x.currentTarget=null,S=L}else for(T=0;T<m.length;T++){if(O=m[T],L=O.instance,X=O.currentTarget,O=O.listener,L!==S&&x.isPropagationStopped())break e;S=O,x.currentTarget=X;try{S(x)}catch(ie){um(ie)}x.currentTarget=null,S=L}}}}function Qe(u,c){var h=c[Ix];h===void 0&&(h=c[Ix]=new Set);var m=u+"__bubble";h.has(m)||(WR(c,u,2,!1),h.add(m))}function TE(u,c,h){var m=0;c&&(m|=4),WR(h,u,m,c)}var Sm="_reactListening"+Math.random().toString(36).slice(2);function ME(u){if(!u[Sm]){u[Sm]=!0,qk.forEach(function(h){h!=="selectionchange"&&(eV.has(h)||TE(h,!1,u),TE(h,!0,u))});var c=u.nodeType===9?u:u.ownerDocument;c===null||c[Sm]||(c[Sm]=!0,TE("selectionchange",!1,c))}}function WR(u,c,h,m){switch(bN(c)){case 2:var x=CV;break;case 8:x=TV;break;default:x=jE}h=x.bind(null,c,h,u),x=void 0,!Zx||c!=="touchstart"&&c!=="touchmove"&&c!=="wheel"||(x=!0),m?x!==void 0?u.addEventListener(c,h,{capture:!0,passive:x}):u.addEventListener(c,h,!0):x!==void 0?u.addEventListener(c,h,{passive:x}):u.addEventListener(c,h,!1)}function kE(u,c,h,m,x){var S=m;if((c&1)===0&&(c&2)===0&&m!==null)e:for(;;){if(m===null)return;var T=m.tag;if(T===3||T===4){var O=m.stateNode.containerInfo;if(O===x)break;if(T===4)for(T=m.return;T!==null;){var L=T.tag;if((L===3||L===4)&&T.stateNode.containerInfo===x)return;T=T.return}for(;O!==null;){if(T=bc(O),T===null)return;if(L=T.tag,L===5||L===6||L===26||L===27){m=S=T;continue e}O=O.parentNode}}m=m.return}nO(function(){var X=S,ie=Wx(h),ue=[];e:{var Q=kO.get(u);if(Q!==void 0){var Z=F0,Fe=u;switch(u){case"keypress":if(N0(h)===0)break e;case"keydown":case"keyup":Z=VY;break;case"focusin":Fe="focus",Z=t2;break;case"focusout":Fe="blur",Z=t2;break;case"beforeblur":case"afterblur":Z=t2;break;case"click":if(h.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Z=aO;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Z=FY;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Z=ZY;break;case $O:case CO:case TO:Z=BY;break;case MO:Z=JY;break;case"scroll":case"scrollend":Z=NY;break;case"wheel":Z=tX;break;case"copy":case"cut":case"paste":Z=PY;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Z=oO;break;case"toggle":case"beforetoggle":Z=iX}var Ne=(c&4)!==0,xt=!Ne&&(u==="scroll"||u==="scrollend"),j=Ne?Q!==null?Q+"Capture":null:Q;Ne=[];for(var P=X,H;P!==null;){var ae=P;if(H=ae.stateNode,ae=ae.tag,ae!==5&&ae!==26&&ae!==27||H===null||j===null||(ae=Qd(P,j),ae!=null&&Ne.push(Dh(P,ae,H))),xt)break;P=P.return}0<Ne.length&&(Q=new Z(Q,Fe,null,h,ie),ue.push({event:Q,listeners:Ne}))}}if((c&7)===0){e:{if(Q=u==="mouseover"||u==="pointerover",Z=u==="mouseout"||u==="pointerout",Q&&h!==Vx&&(Fe=h.relatedTarget||h.fromElement)&&(bc(Fe)||Fe[vc]))break e;if((Z||Q)&&(Q=ie.window===ie?ie:(Q=ie.ownerDocument)?Q.defaultView||Q.parentWindow:window,Z?(Fe=h.relatedTarget||h.toElement,Z=X,Fe=Fe?bc(Fe):null,Fe!==null&&(xt=a(Fe),Ne=Fe.tag,Fe!==xt||Ne!==5&&Ne!==27&&Ne!==6)&&(Fe=null)):(Z=null,Fe=X),Z!==Fe)){if(Ne=aO,ae="onMouseLeave",j="onMouseEnter",P="mouse",(u==="pointerout"||u==="pointerover")&&(Ne=oO,ae="onPointerLeave",j="onPointerEnter",P="pointer"),xt=Z==null?Q:Wd(Z),H=Fe==null?Q:Wd(Fe),Q=new Ne(ae,P+"leave",Z,h,ie),Q.target=xt,Q.relatedTarget=H,ae=null,bc(ie)===X&&(Ne=new Ne(j,P+"enter",Fe,h,ie),Ne.target=H,Ne.relatedTarget=xt,ae=Ne),xt=ae,Z&&Fe)t:{for(Ne=Z,j=Fe,P=0,H=Ne;H;H=Jc(H))P++;for(H=0,ae=j;ae;ae=Jc(ae))H++;for(;0<P-H;)Ne=Jc(Ne),P--;for(;0<H-P;)j=Jc(j),H--;for(;P--;){if(Ne===j||j!==null&&Ne===j.alternate)break t;Ne=Jc(Ne),j=Jc(j)}Ne=null}else Ne=null;Z!==null&&QR(ue,Q,Z,Ne,!1),Fe!==null&&xt!==null&&QR(ue,xt,Fe,Ne,!0)}}e:{if(Q=X?Wd(X):window,Z=Q.nodeName&&Q.nodeName.toLowerCase(),Z==="select"||Z==="input"&&Q.type==="file")var we=pO;else if(hO(Q))if(mO)we=hX;else{we=fX;var Ye=cX}else Z=Q.nodeName,!Z||Z.toLowerCase()!=="input"||Q.type!=="checkbox"&&Q.type!=="radio"?X&&Xx(X.elementType)&&(we=pO):we=dX;if(we&&(we=we(u,X))){gO(ue,we,h,ie);break e}Ye&&Ye(u,Q,X),u==="focusout"&&X&&Q.type==="number"&&X.memoizedProps.value!=null&&Yx(Q,"number",Q.value)}switch(Ye=X?Wd(X):window,u){case"focusin":(hO(Ye)||Ye.contentEditable==="true")&&(Mc=Ye,o2=X,rh=null);break;case"focusout":rh=o2=Mc=null;break;case"mousedown":u2=!0;break;case"contextmenu":case"mouseup":case"dragend":u2=!1,wO(ue,h,ie);break;case"selectionchange":if(pX)break;case"keydown":case"keyup":wO(ue,h,ie)}var Te;if(i2)e:{switch(u){case"compositionstart":var ze="onCompositionStart";break e;case"compositionend":ze="onCompositionEnd";break e;case"compositionupdate":ze="onCompositionUpdate";break e}ze=void 0}else Tc?fO(u,h)&&(ze="onCompositionEnd"):u==="keydown"&&h.keyCode===229&&(ze="onCompositionStart");ze&&(uO&&h.locale!=="ko"&&(Tc||ze!=="onCompositionStart"?ze==="onCompositionEnd"&&Tc&&(Te=iO()):(fo=ie,Kx="value"in fo?fo.value:fo.textContent,Tc=!0)),Ye=_m(X,ze),0<Ye.length&&(ze=new sO(ze,u,null,h,ie),ue.push({event:ze,listeners:Ye}),Te?ze.data=Te:(Te=dO(h),Te!==null&&(ze.data=Te)))),(Te=aX?sX(u,h):oX(u,h))&&(ze=_m(X,"onBeforeInput"),0<ze.length&&(Ye=new sO("onBeforeInput","beforeinput",null,h,ie),ue.push({event:Ye,listeners:ze}),Ye.data=Te)),ZX(ue,u,X,h,ie)}VR(ue,c)})}function Dh(u,c,h){return{instance:u,listener:c,currentTarget:h}}function _m(u,c){for(var h=c+"Capture",m=[];u!==null;){var x=u,S=x.stateNode;if(x=x.tag,x!==5&&x!==26&&x!==27||S===null||(x=Qd(u,h),x!=null&&m.unshift(Dh(u,x,S)),x=Qd(u,c),x!=null&&m.push(Dh(u,x,S))),u.tag===3)return m;u=u.return}return[]}function Jc(u){if(u===null)return null;do u=u.return;while(u&&u.tag!==5&&u.tag!==27);return u||null}function QR(u,c,h,m,x){for(var S=c._reactName,T=[];h!==null&&h!==m;){var O=h,L=O.alternate,X=O.stateNode;if(O=O.tag,L!==null&&L===m)break;O!==5&&O!==26&&O!==27||X===null||(L=X,x?(X=Qd(h,S),X!=null&&T.unshift(Dh(h,X,L))):x||(X=Qd(h,S),X!=null&&T.push(Dh(h,X,L)))),h=h.return}T.length!==0&&u.push({event:c,listeners:T})}var tV=/\r\n?/g,nV=/\u0000|\uFFFD/g;function ZR(u){return(typeof u=="string"?u:""+u).replace(tV,`
`).replace(nV,"")}function KR(u,c){return c=ZR(c),ZR(u)===c}function wm(){}function bt(u,c,h,m,x,S){switch(h){case"children":typeof m=="string"?c==="body"||c==="textarea"&&m===""||Ac(u,m):(typeof m=="number"||typeof m=="bigint")&&c!=="body"&&Ac(u,""+m);break;case"className":M0(u,"class",m);break;case"tabIndex":M0(u,"tabindex",m);break;case"dir":case"role":case"viewBox":case"width":case"height":M0(u,h,m);break;case"style":eO(u,m,S);break;case"data":if(c!=="object"){M0(u,"data",m);break}case"src":case"href":if(m===""&&(c!=="a"||h!=="href")){u.removeAttribute(h);break}if(m==null||typeof m=="function"||typeof m=="symbol"||typeof m=="boolean"){u.removeAttribute(h);break}m=D0(""+m),u.setAttribute(h,m);break;case"action":case"formAction":if(typeof m=="function"){u.setAttribute(h,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof S=="function"&&(h==="formAction"?(c!=="input"&&bt(u,c,"name",x.name,x,null),bt(u,c,"formEncType",x.formEncType,x,null),bt(u,c,"formMethod",x.formMethod,x,null),bt(u,c,"formTarget",x.formTarget,x,null)):(bt(u,c,"encType",x.encType,x,null),bt(u,c,"method",x.method,x,null),bt(u,c,"target",x.target,x,null)));if(m==null||typeof m=="symbol"||typeof m=="boolean"){u.removeAttribute(h);break}m=D0(""+m),u.setAttribute(h,m);break;case"onClick":m!=null&&(u.onclick=wm);break;case"onScroll":m!=null&&Qe("scroll",u);break;case"onScrollEnd":m!=null&&Qe("scrollend",u);break;case"dangerouslySetInnerHTML":if(m!=null){if(typeof m!="object"||!("__html"in m))throw Error(i(61));if(h=m.__html,h!=null){if(x.children!=null)throw Error(i(60));u.innerHTML=h}}break;case"multiple":u.multiple=m&&typeof m!="function"&&typeof m!="symbol";break;case"muted":u.muted=m&&typeof m!="function"&&typeof m!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(m==null||typeof m=="function"||typeof m=="boolean"||typeof m=="symbol"){u.removeAttribute("xlink:href");break}h=D0(""+m),u.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",h);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":m!=null&&typeof m!="function"&&typeof m!="symbol"?u.setAttribute(h,""+m):u.removeAttribute(h);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":m&&typeof m!="function"&&typeof m!="symbol"?u.setAttribute(h,""):u.removeAttribute(h);break;case"capture":case"download":m===!0?u.setAttribute(h,""):m!==!1&&m!=null&&typeof m!="function"&&typeof m!="symbol"?u.setAttribute(h,m):u.removeAttribute(h);break;case"cols":case"rows":case"size":case"span":m!=null&&typeof m!="function"&&typeof m!="symbol"&&!isNaN(m)&&1<=m?u.setAttribute(h,m):u.removeAttribute(h);break;case"rowSpan":case"start":m==null||typeof m=="function"||typeof m=="symbol"||isNaN(m)?u.removeAttribute(h):u.setAttribute(h,m);break;case"popover":Qe("beforetoggle",u),Qe("toggle",u),T0(u,"popover",m);break;case"xlinkActuate":cs(u,"http://www.w3.org/1999/xlink","xlink:actuate",m);break;case"xlinkArcrole":cs(u,"http://www.w3.org/1999/xlink","xlink:arcrole",m);break;case"xlinkRole":cs(u,"http://www.w3.org/1999/xlink","xlink:role",m);break;case"xlinkShow":cs(u,"http://www.w3.org/1999/xlink","xlink:show",m);break;case"xlinkTitle":cs(u,"http://www.w3.org/1999/xlink","xlink:title",m);break;case"xlinkType":cs(u,"http://www.w3.org/1999/xlink","xlink:type",m);break;case"xmlBase":cs(u,"http://www.w3.org/XML/1998/namespace","xml:base",m);break;case"xmlLang":cs(u,"http://www.w3.org/XML/1998/namespace","xml:lang",m);break;case"xmlSpace":cs(u,"http://www.w3.org/XML/1998/namespace","xml:space",m);break;case"is":T0(u,"is",m);break;case"innerText":case"textContent":break;default:(!(2<h.length)||h[0]!=="o"&&h[0]!=="O"||h[1]!=="n"&&h[1]!=="N")&&(h=DY.get(h)||h,T0(u,h,m))}}function OE(u,c,h,m,x,S){switch(h){case"style":eO(u,m,S);break;case"dangerouslySetInnerHTML":if(m!=null){if(typeof m!="object"||!("__html"in m))throw Error(i(61));if(h=m.__html,h!=null){if(x.children!=null)throw Error(i(60));u.innerHTML=h}}break;case"children":typeof m=="string"?Ac(u,m):(typeof m=="number"||typeof m=="bigint")&&Ac(u,""+m);break;case"onScroll":m!=null&&Qe("scroll",u);break;case"onScrollEnd":m!=null&&Qe("scrollend",u);break;case"onClick":m!=null&&(u.onclick=wm);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!jk.hasOwnProperty(h))e:{if(h[0]==="o"&&h[1]==="n"&&(x=h.endsWith("Capture"),c=h.slice(2,x?h.length-7:void 0),S=u[Si]||null,S=S!=null?S[h]:null,typeof S=="function"&&u.removeEventListener(c,S,x),typeof m=="function")){typeof S!="function"&&S!==null&&(h in u?u[h]=null:u.hasAttribute(h)&&u.removeAttribute(h)),u.addEventListener(c,m,x);break e}h in u?u[h]=m:m===!0?u.setAttribute(h,""):T0(u,h,m)}}}function On(u,c,h){switch(c){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Qe("error",u),Qe("load",u);var m=!1,x=!1,S;for(S in h)if(h.hasOwnProperty(S)){var T=h[S];if(T!=null)switch(S){case"src":m=!0;break;case"srcSet":x=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,c));default:bt(u,c,S,T,h,null)}}x&&bt(u,c,"srcSet",h.srcSet,h,null),m&&bt(u,c,"src",h.src,h,null);return;case"input":Qe("invalid",u);var O=S=T=x=null,L=null,X=null;for(m in h)if(h.hasOwnProperty(m)){var ie=h[m];if(ie!=null)switch(m){case"name":x=ie;break;case"type":T=ie;break;case"checked":L=ie;break;case"defaultChecked":X=ie;break;case"value":S=ie;break;case"defaultValue":O=ie;break;case"children":case"dangerouslySetInnerHTML":if(ie!=null)throw Error(i(137,c));break;default:bt(u,c,m,ie,h,null)}}Qk(u,S,O,L,X,T,x,!1),k0(u);return;case"select":Qe("invalid",u),m=T=S=null;for(x in h)if(h.hasOwnProperty(x)&&(O=h[x],O!=null))switch(x){case"value":S=O;break;case"defaultValue":T=O;break;case"multiple":m=O;default:bt(u,c,x,O,h,null)}c=S,h=T,u.multiple=!!m,c!=null?wc(u,!!m,c,!1):h!=null&&wc(u,!!m,h,!0);return;case"textarea":Qe("invalid",u),S=x=m=null;for(T in h)if(h.hasOwnProperty(T)&&(O=h[T],O!=null))switch(T){case"value":m=O;break;case"defaultValue":x=O;break;case"children":S=O;break;case"dangerouslySetInnerHTML":if(O!=null)throw Error(i(91));break;default:bt(u,c,T,O,h,null)}Kk(u,m,x,S),k0(u);return;case"option":for(L in h)if(h.hasOwnProperty(L)&&(m=h[L],m!=null))switch(L){case"selected":u.selected=m&&typeof m!="function"&&typeof m!="symbol";break;default:bt(u,c,L,m,h,null)}return;case"dialog":Qe("beforetoggle",u),Qe("toggle",u),Qe("cancel",u),Qe("close",u);break;case"iframe":case"object":Qe("load",u);break;case"video":case"audio":for(m=0;m<Oh.length;m++)Qe(Oh[m],u);break;case"image":Qe("error",u),Qe("load",u);break;case"details":Qe("toggle",u);break;case"embed":case"source":case"link":Qe("error",u),Qe("load",u);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(X in h)if(h.hasOwnProperty(X)&&(m=h[X],m!=null))switch(X){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,c));default:bt(u,c,X,m,h,null)}return;default:if(Xx(c)){for(ie in h)h.hasOwnProperty(ie)&&(m=h[ie],m!==void 0&&OE(u,c,ie,m,h,void 0));return}}for(O in h)h.hasOwnProperty(O)&&(m=h[O],m!=null&&bt(u,c,O,m,h,null))}function iV(u,c,h,m){switch(c){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var x=null,S=null,T=null,O=null,L=null,X=null,ie=null;for(Z in h){var ue=h[Z];if(h.hasOwnProperty(Z)&&ue!=null)switch(Z){case"checked":break;case"value":break;case"defaultValue":L=ue;default:m.hasOwnProperty(Z)||bt(u,c,Z,null,m,ue)}}for(var Q in m){var Z=m[Q];if(ue=h[Q],m.hasOwnProperty(Q)&&(Z!=null||ue!=null))switch(Q){case"type":S=Z;break;case"name":x=Z;break;case"checked":X=Z;break;case"defaultChecked":ie=Z;break;case"value":T=Z;break;case"defaultValue":O=Z;break;case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(i(137,c));break;default:Z!==ue&&bt(u,c,Q,Z,m,ue)}}Gx(u,T,O,L,X,ie,S,x);return;case"select":Z=T=O=Q=null;for(S in h)if(L=h[S],h.hasOwnProperty(S)&&L!=null)switch(S){case"value":break;case"multiple":Z=L;default:m.hasOwnProperty(S)||bt(u,c,S,null,m,L)}for(x in m)if(S=m[x],L=h[x],m.hasOwnProperty(x)&&(S!=null||L!=null))switch(x){case"value":Q=S;break;case"defaultValue":O=S;break;case"multiple":T=S;default:S!==L&&bt(u,c,x,S,m,L)}c=O,h=T,m=Z,Q!=null?wc(u,!!h,Q,!1):!!m!=!!h&&(c!=null?wc(u,!!h,c,!0):wc(u,!!h,h?[]:"",!1));return;case"textarea":Z=Q=null;for(O in h)if(x=h[O],h.hasOwnProperty(O)&&x!=null&&!m.hasOwnProperty(O))switch(O){case"value":break;case"children":break;default:bt(u,c,O,null,m,x)}for(T in m)if(x=m[T],S=h[T],m.hasOwnProperty(T)&&(x!=null||S!=null))switch(T){case"value":Q=x;break;case"defaultValue":Z=x;break;case"children":break;case"dangerouslySetInnerHTML":if(x!=null)throw Error(i(91));break;default:x!==S&&bt(u,c,T,x,m,S)}Zk(u,Q,Z);return;case"option":for(var Fe in h)if(Q=h[Fe],h.hasOwnProperty(Fe)&&Q!=null&&!m.hasOwnProperty(Fe))switch(Fe){case"selected":u.selected=!1;break;default:bt(u,c,Fe,null,m,Q)}for(L in m)if(Q=m[L],Z=h[L],m.hasOwnProperty(L)&&Q!==Z&&(Q!=null||Z!=null))switch(L){case"selected":u.selected=Q&&typeof Q!="function"&&typeof Q!="symbol";break;default:bt(u,c,L,Q,m,Z)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ne in h)Q=h[Ne],h.hasOwnProperty(Ne)&&Q!=null&&!m.hasOwnProperty(Ne)&&bt(u,c,Ne,null,m,Q);for(X in m)if(Q=m[X],Z=h[X],m.hasOwnProperty(X)&&Q!==Z&&(Q!=null||Z!=null))switch(X){case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(i(137,c));break;default:bt(u,c,X,Q,m,Z)}return;default:if(Xx(c)){for(var xt in h)Q=h[xt],h.hasOwnProperty(xt)&&Q!==void 0&&!m.hasOwnProperty(xt)&&OE(u,c,xt,void 0,m,Q);for(ie in m)Q=m[ie],Z=h[ie],!m.hasOwnProperty(ie)||Q===Z||Q===void 0&&Z===void 0||OE(u,c,ie,Q,m,Z);return}}for(var j in h)Q=h[j],h.hasOwnProperty(j)&&Q!=null&&!m.hasOwnProperty(j)&&bt(u,c,j,null,m,Q);for(ue in m)Q=m[ue],Z=h[ue],!m.hasOwnProperty(ue)||Q===Z||Q==null&&Z==null||bt(u,c,ue,Q,m,Z)}var DE=null,RE=null;function Am(u){return u.nodeType===9?u:u.ownerDocument}function JR(u){switch(u){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function eN(u,c){if(u===0)switch(c){case"svg":return 1;case"math":return 2;default:return 0}return u===1&&c==="foreignObject"?0:u}function NE(u,c){return u==="textarea"||u==="noscript"||typeof c.children=="string"||typeof c.children=="number"||typeof c.children=="bigint"||typeof c.dangerouslySetInnerHTML=="object"&&c.dangerouslySetInnerHTML!==null&&c.dangerouslySetInnerHTML.__html!=null}var zE=null;function rV(){var u=window.event;return u&&u.type==="popstate"?u===zE?!1:(zE=u,!0):(zE=null,!1)}var tN=typeof setTimeout=="function"?setTimeout:void 0,aV=typeof clearTimeout=="function"?clearTimeout:void 0,nN=typeof Promise=="function"?Promise:void 0,sV=typeof queueMicrotask=="function"?queueMicrotask:typeof nN<"u"?function(u){return nN.resolve(null).then(u).catch(oV)}:tN;function oV(u){setTimeout(function(){throw u})}function To(u){return u==="head"}function iN(u,c){var h=c,m=0,x=0;do{var S=h.nextSibling;if(u.removeChild(h),S&&S.nodeType===8)if(h=S.data,h==="/$"){if(0<m&&8>m){h=m;var T=u.ownerDocument;if(h&1&&Rh(T.documentElement),h&2&&Rh(T.body),h&4)for(h=T.head,Rh(h),T=h.firstChild;T;){var O=T.nextSibling,L=T.nodeName;T[Vd]||L==="SCRIPT"||L==="STYLE"||L==="LINK"&&T.rel.toLowerCase()==="stylesheet"||h.removeChild(T),T=O}}if(x===0){u.removeChild(S),Ph(c);return}x--}else h==="$"||h==="$?"||h==="$!"?x++:m=h.charCodeAt(0)-48;else m=0;h=S}while(h);Ph(c)}function FE(u){var c=u.firstChild;for(c&&c.nodeType===10&&(c=c.nextSibling);c;){var h=c;switch(c=c.nextSibling,h.nodeName){case"HTML":case"HEAD":case"BODY":FE(h),Px(h);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(h.rel.toLowerCase()==="stylesheet")continue}u.removeChild(h)}}function uV(u,c,h,m){for(;u.nodeType===1;){var x=h;if(u.nodeName.toLowerCase()!==c.toLowerCase()){if(!m&&(u.nodeName!=="INPUT"||u.type!=="hidden"))break}else if(m){if(!u[Vd])switch(c){case"meta":if(!u.hasAttribute("itemprop"))break;return u;case"link":if(S=u.getAttribute("rel"),S==="stylesheet"&&u.hasAttribute("data-precedence"))break;if(S!==x.rel||u.getAttribute("href")!==(x.href==null||x.href===""?null:x.href)||u.getAttribute("crossorigin")!==(x.crossOrigin==null?null:x.crossOrigin)||u.getAttribute("title")!==(x.title==null?null:x.title))break;return u;case"style":if(u.hasAttribute("data-precedence"))break;return u;case"script":if(S=u.getAttribute("src"),(S!==(x.src==null?null:x.src)||u.getAttribute("type")!==(x.type==null?null:x.type)||u.getAttribute("crossorigin")!==(x.crossOrigin==null?null:x.crossOrigin))&&S&&u.hasAttribute("async")&&!u.hasAttribute("itemprop"))break;return u;default:return u}}else if(c==="input"&&u.type==="hidden"){var S=x.name==null?null:""+x.name;if(x.type==="hidden"&&u.getAttribute("name")===S)return u}else return u;if(u=qr(u.nextSibling),u===null)break}return null}function lV(u,c,h){if(c==="")return null;for(;u.nodeType!==3;)if((u.nodeType!==1||u.nodeName!=="INPUT"||u.type!=="hidden")&&!h||(u=qr(u.nextSibling),u===null))return null;return u}function LE(u){return u.data==="$!"||u.data==="$?"&&u.ownerDocument.readyState==="complete"}function cV(u,c){var h=u.ownerDocument;if(u.data!=="$?"||h.readyState==="complete")c();else{var m=function(){c(),h.removeEventListener("DOMContentLoaded",m)};h.addEventListener("DOMContentLoaded",m),u._reactRetry=m}}function qr(u){for(;u!=null;u=u.nextSibling){var c=u.nodeType;if(c===1||c===3)break;if(c===8){if(c=u.data,c==="$"||c==="$!"||c==="$?"||c==="F!"||c==="F")break;if(c==="/$")return null}}return u}var UE=null;function rN(u){u=u.previousSibling;for(var c=0;u;){if(u.nodeType===8){var h=u.data;if(h==="$"||h==="$!"||h==="$?"){if(c===0)return u;c--}else h==="/$"&&c++}u=u.previousSibling}return null}function aN(u,c,h){switch(c=Am(h),u){case"html":if(u=c.documentElement,!u)throw Error(i(452));return u;case"head":if(u=c.head,!u)throw Error(i(453));return u;case"body":if(u=c.body,!u)throw Error(i(454));return u;default:throw Error(i(451))}}function Rh(u){for(var c=u.attributes;c.length;)u.removeAttributeNode(c[0]);Px(u)}var br=new Map,sN=new Set;function $m(u){return typeof u.getRootNode=="function"?u.getRootNode():u.nodeType===9?u:u.ownerDocument}var ws=I.d;I.d={f:fV,r:dV,D:hV,C:gV,L:pV,m:mV,X:vV,S:yV,M:bV};function fV(){var u=ws.f(),c=ym();return u||c}function dV(u){var c=xc(u);c!==null&&c.tag===5&&c.type==="form"?$D(c):ws.r(u)}var ef=typeof document>"u"?null:document;function oN(u,c,h){var m=ef;if(m&&typeof c=="string"&&c){var x=dr(c);x='link[rel="'+u+'"][href="'+x+'"]',typeof h=="string"&&(x+='[crossorigin="'+h+'"]'),sN.has(x)||(sN.add(x),u={rel:u,crossOrigin:h,href:c},m.querySelector(x)===null&&(c=m.createElement("link"),On(c,"link",u),pn(c),m.head.appendChild(c)))}}function hV(u){ws.D(u),oN("dns-prefetch",u,null)}function gV(u,c){ws.C(u,c),oN("preconnect",u,c)}function pV(u,c,h){ws.L(u,c,h);var m=ef;if(m&&u&&c){var x='link[rel="preload"][as="'+dr(c)+'"]';c==="image"&&h&&h.imageSrcSet?(x+='[imagesrcset="'+dr(h.imageSrcSet)+'"]',typeof h.imageSizes=="string"&&(x+='[imagesizes="'+dr(h.imageSizes)+'"]')):x+='[href="'+dr(u)+'"]';var S=x;switch(c){case"style":S=tf(u);break;case"script":S=nf(u)}br.has(S)||(u=d({rel:"preload",href:c==="image"&&h&&h.imageSrcSet?void 0:u,as:c},h),br.set(S,u),m.querySelector(x)!==null||c==="style"&&m.querySelector(Nh(S))||c==="script"&&m.querySelector(zh(S))||(c=m.createElement("link"),On(c,"link",u),pn(c),m.head.appendChild(c)))}}function mV(u,c){ws.m(u,c);var h=ef;if(h&&u){var m=c&&typeof c.as=="string"?c.as:"script",x='link[rel="modulepreload"][as="'+dr(m)+'"][href="'+dr(u)+'"]',S=x;switch(m){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":S=nf(u)}if(!br.has(S)&&(u=d({rel:"modulepreload",href:u},c),br.set(S,u),h.querySelector(x)===null)){switch(m){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(h.querySelector(zh(S)))return}m=h.createElement("link"),On(m,"link",u),pn(m),h.head.appendChild(m)}}}function yV(u,c,h){ws.S(u,c,h);var m=ef;if(m&&u){var x=Ec(m).hoistableStyles,S=tf(u);c=c||"default";var T=x.get(S);if(!T){var O={loading:0,preload:null};if(T=m.querySelector(Nh(S)))O.loading=5;else{u=d({rel:"stylesheet",href:u,"data-precedence":c},h),(h=br.get(S))&&BE(u,h);var L=T=m.createElement("link");pn(L),On(L,"link",u),L._p=new Promise(function(X,ie){L.onload=X,L.onerror=ie}),L.addEventListener("load",function(){O.loading|=1}),L.addEventListener("error",function(){O.loading|=2}),O.loading|=4,Cm(T,c,m)}T={type:"stylesheet",instance:T,count:1,state:O},x.set(S,T)}}}function vV(u,c){ws.X(u,c);var h=ef;if(h&&u){var m=Ec(h).hoistableScripts,x=nf(u),S=m.get(x);S||(S=h.querySelector(zh(x)),S||(u=d({src:u,async:!0},c),(c=br.get(x))&&IE(u,c),S=h.createElement("script"),pn(S),On(S,"link",u),h.head.appendChild(S)),S={type:"script",instance:S,count:1,state:null},m.set(x,S))}}function bV(u,c){ws.M(u,c);var h=ef;if(h&&u){var m=Ec(h).hoistableScripts,x=nf(u),S=m.get(x);S||(S=h.querySelector(zh(x)),S||(u=d({src:u,async:!0,type:"module"},c),(c=br.get(x))&&IE(u,c),S=h.createElement("script"),pn(S),On(S,"link",u),h.head.appendChild(S)),S={type:"script",instance:S,count:1,state:null},m.set(x,S))}}function uN(u,c,h,m){var x=(x=$e.current)?$m(x):null;if(!x)throw Error(i(446));switch(u){case"meta":case"title":return null;case"style":return typeof h.precedence=="string"&&typeof h.href=="string"?(c=tf(h.href),h=Ec(x).hoistableStyles,m=h.get(c),m||(m={type:"style",instance:null,count:0,state:null},h.set(c,m)),m):{type:"void",instance:null,count:0,state:null};case"link":if(h.rel==="stylesheet"&&typeof h.href=="string"&&typeof h.precedence=="string"){u=tf(h.href);var S=Ec(x).hoistableStyles,T=S.get(u);if(T||(x=x.ownerDocument||x,T={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},S.set(u,T),(S=x.querySelector(Nh(u)))&&!S._p&&(T.instance=S,T.state.loading=5),br.has(u)||(h={rel:"preload",as:"style",href:h.href,crossOrigin:h.crossOrigin,integrity:h.integrity,media:h.media,hrefLang:h.hrefLang,referrerPolicy:h.referrerPolicy},br.set(u,h),S||xV(x,u,h,T.state))),c&&m===null)throw Error(i(528,""));return T}if(c&&m!==null)throw Error(i(529,""));return null;case"script":return c=h.async,h=h.src,typeof h=="string"&&c&&typeof c!="function"&&typeof c!="symbol"?(c=nf(h),h=Ec(x).hoistableScripts,m=h.get(c),m||(m={type:"script",instance:null,count:0,state:null},h.set(c,m)),m):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,u))}}function tf(u){return'href="'+dr(u)+'"'}function Nh(u){return'link[rel="stylesheet"]['+u+"]"}function lN(u){return d({},u,{"data-precedence":u.precedence,precedence:null})}function xV(u,c,h,m){u.querySelector('link[rel="preload"][as="style"]['+c+"]")?m.loading=1:(c=u.createElement("link"),m.preload=c,c.addEventListener("load",function(){return m.loading|=1}),c.addEventListener("error",function(){return m.loading|=2}),On(c,"link",h),pn(c),u.head.appendChild(c))}function nf(u){return'[src="'+dr(u)+'"]'}function zh(u){return"script[async]"+u}function cN(u,c,h){if(c.count++,c.instance===null)switch(c.type){case"style":var m=u.querySelector('style[data-href~="'+dr(h.href)+'"]');if(m)return c.instance=m,pn(m),m;var x=d({},h,{"data-href":h.href,"data-precedence":h.precedence,href:null,precedence:null});return m=(u.ownerDocument||u).createElement("style"),pn(m),On(m,"style",x),Cm(m,h.precedence,u),c.instance=m;case"stylesheet":x=tf(h.href);var S=u.querySelector(Nh(x));if(S)return c.state.loading|=4,c.instance=S,pn(S),S;m=lN(h),(x=br.get(x))&&BE(m,x),S=(u.ownerDocument||u).createElement("link"),pn(S);var T=S;return T._p=new Promise(function(O,L){T.onload=O,T.onerror=L}),On(S,"link",m),c.state.loading|=4,Cm(S,h.precedence,u),c.instance=S;case"script":return S=nf(h.src),(x=u.querySelector(zh(S)))?(c.instance=x,pn(x),x):(m=h,(x=br.get(S))&&(m=d({},h),IE(m,x)),u=u.ownerDocument||u,x=u.createElement("script"),pn(x),On(x,"link",m),u.head.appendChild(x),c.instance=x);case"void":return null;default:throw Error(i(443,c.type))}else c.type==="stylesheet"&&(c.state.loading&4)===0&&(m=c.instance,c.state.loading|=4,Cm(m,h.precedence,u));return c.instance}function Cm(u,c,h){for(var m=h.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),x=m.length?m[m.length-1]:null,S=x,T=0;T<m.length;T++){var O=m[T];if(O.dataset.precedence===c)S=O;else if(S!==x)break}S?S.parentNode.insertBefore(u,S.nextSibling):(c=h.nodeType===9?h.head:h,c.insertBefore(u,c.firstChild))}function BE(u,c){u.crossOrigin==null&&(u.crossOrigin=c.crossOrigin),u.referrerPolicy==null&&(u.referrerPolicy=c.referrerPolicy),u.title==null&&(u.title=c.title)}function IE(u,c){u.crossOrigin==null&&(u.crossOrigin=c.crossOrigin),u.referrerPolicy==null&&(u.referrerPolicy=c.referrerPolicy),u.integrity==null&&(u.integrity=c.integrity)}var Tm=null;function fN(u,c,h){if(Tm===null){var m=new Map,x=Tm=new Map;x.set(h,m)}else x=Tm,m=x.get(h),m||(m=new Map,x.set(h,m));if(m.has(u))return m;for(m.set(u,null),h=h.getElementsByTagName(u),x=0;x<h.length;x++){var S=h[x];if(!(S[Vd]||S[Pn]||u==="link"&&S.getAttribute("rel")==="stylesheet")&&S.namespaceURI!=="http://www.w3.org/2000/svg"){var T=S.getAttribute(c)||"";T=u+T;var O=m.get(T);O?O.push(S):m.set(T,[S])}}return m}function dN(u,c,h){u=u.ownerDocument||u,u.head.insertBefore(h,c==="title"?u.querySelector("head > title"):null)}function EV(u,c,h){if(h===1||c.itemProp!=null)return!1;switch(u){case"meta":case"title":return!0;case"style":if(typeof c.precedence!="string"||typeof c.href!="string"||c.href==="")break;return!0;case"link":if(typeof c.rel!="string"||typeof c.href!="string"||c.href===""||c.onLoad||c.onError)break;switch(c.rel){case"stylesheet":return u=c.disabled,typeof c.precedence=="string"&&u==null;default:return!0}case"script":if(c.async&&typeof c.async!="function"&&typeof c.async!="symbol"&&!c.onLoad&&!c.onError&&c.src&&typeof c.src=="string")return!0}return!1}function hN(u){return!(u.type==="stylesheet"&&(u.state.loading&3)===0)}var Fh=null;function SV(){}function _V(u,c,h){if(Fh===null)throw Error(i(475));var m=Fh;if(c.type==="stylesheet"&&(typeof h.media!="string"||matchMedia(h.media).matches!==!1)&&(c.state.loading&4)===0){if(c.instance===null){var x=tf(h.href),S=u.querySelector(Nh(x));if(S){u=S._p,u!==null&&typeof u=="object"&&typeof u.then=="function"&&(m.count++,m=Mm.bind(m),u.then(m,m)),c.state.loading|=4,c.instance=S,pn(S);return}S=u.ownerDocument||u,h=lN(h),(x=br.get(x))&&BE(h,x),S=S.createElement("link"),pn(S);var T=S;T._p=new Promise(function(O,L){T.onload=O,T.onerror=L}),On(S,"link",h),c.instance=S}m.stylesheets===null&&(m.stylesheets=new Map),m.stylesheets.set(c,u),(u=c.state.preload)&&(c.state.loading&3)===0&&(m.count++,c=Mm.bind(m),u.addEventListener("load",c),u.addEventListener("error",c))}}function wV(){if(Fh===null)throw Error(i(475));var u=Fh;return u.stylesheets&&u.count===0&&PE(u,u.stylesheets),0<u.count?function(c){var h=setTimeout(function(){if(u.stylesheets&&PE(u,u.stylesheets),u.unsuspend){var m=u.unsuspend;u.unsuspend=null,m()}},6e4);return u.unsuspend=c,function(){u.unsuspend=null,clearTimeout(h)}}:null}function Mm(){if(this.count--,this.count===0){if(this.stylesheets)PE(this,this.stylesheets);else if(this.unsuspend){var u=this.unsuspend;this.unsuspend=null,u()}}}var km=null;function PE(u,c){u.stylesheets=null,u.unsuspend!==null&&(u.count++,km=new Map,c.forEach(AV,u),km=null,Mm.call(u))}function AV(u,c){if(!(c.state.loading&4)){var h=km.get(u);if(h)var m=h.get(null);else{h=new Map,km.set(u,h);for(var x=u.querySelectorAll("link[data-precedence],style[data-precedence]"),S=0;S<x.length;S++){var T=x[S];(T.nodeName==="LINK"||T.getAttribute("media")!=="not all")&&(h.set(T.dataset.precedence,T),m=T)}m&&h.set(null,m)}x=c.instance,T=x.getAttribute("data-precedence"),S=h.get(T)||m,S===m&&h.set(null,x),h.set(T,x),this.count++,m=Mm.bind(this),x.addEventListener("load",m),x.addEventListener("error",m),S?S.parentNode.insertBefore(x,S.nextSibling):(u=u.nodeType===9?u.head:u,u.insertBefore(x,u.firstChild)),c.state.loading|=4}}var Lh={$$typeof:A,Provider:null,Consumer:null,_currentValue:Y,_currentValue2:Y,_threadCount:0};function $V(u,c,h,m,x,S,T,O){this.tag=1,this.containerInfo=u,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Lx(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Lx(0),this.hiddenUpdates=Lx(null),this.identifierPrefix=m,this.onUncaughtError=x,this.onCaughtError=S,this.onRecoverableError=T,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=O,this.incompleteTransitions=new Map}function gN(u,c,h,m,x,S,T,O,L,X,ie,ue){return u=new $V(u,c,h,T,O,L,X,ue),c=1,S===!0&&(c|=24),S=Hi(3,null,null,c),u.current=S,S.stateNode=u,c=S2(),c.refCount++,u.pooledCache=c,c.refCount++,S.memoizedState={element:m,isDehydrated:h,cache:c},$2(S),u}function pN(u){return u?(u=Rc,u):Rc}function mN(u,c,h,m,x,S){x=pN(x),m.context===null?m.context=x:m.pendingContext=x,m=po(c),m.payload={element:h},S=S===void 0?null:S,S!==null&&(m.callback=S),h=mo(u,m,c),h!==null&&(Wi(h,u,c),hh(h,u,c))}function yN(u,c){if(u=u.memoizedState,u!==null&&u.dehydrated!==null){var h=u.retryLane;u.retryLane=h!==0&&h<c?h:c}}function qE(u,c){yN(u,c),(u=u.alternate)&&yN(u,c)}function vN(u){if(u.tag===13){var c=Dc(u,67108864);c!==null&&Wi(c,u,67108864),qE(u,67108864)}}var Om=!0;function CV(u,c,h,m){var x=D.T;D.T=null;var S=I.p;try{I.p=2,jE(u,c,h,m)}finally{I.p=S,D.T=x}}function TV(u,c,h,m){var x=D.T;D.T=null;var S=I.p;try{I.p=8,jE(u,c,h,m)}finally{I.p=S,D.T=x}}function jE(u,c,h,m){if(Om){var x=HE(m);if(x===null)kE(u,c,m,Dm,h),xN(u,m);else if(kV(x,u,c,h,m))m.stopPropagation();else if(xN(u,m),c&4&&-1<MV.indexOf(u)){for(;x!==null;){var S=xc(x);if(S!==null)switch(S.tag){case 3:if(S=S.stateNode,S.current.memoizedState.isDehydrated){var T=zu(S.pendingLanes);if(T!==0){var O=S;for(O.pendingLanes|=2,O.entangledLanes|=2;T;){var L=1<<31-qi(T);O.entanglements[1]|=L,T&=~L}_a(S),(ht&6)===0&&(pm=Jt()+500,kh(0))}}break;case 13:O=Dc(S,2),O!==null&&Wi(O,S,2),ym(),qE(S,2)}if(S=HE(m),S===null&&kE(u,c,m,Dm,h),S===x)break;x=S}x!==null&&m.stopPropagation()}else kE(u,c,m,null,h)}}function HE(u){return u=Wx(u),GE(u)}var Dm=null;function GE(u){if(Dm=null,u=bc(u),u!==null){var c=a(u);if(c===null)u=null;else{var h=c.tag;if(h===13){if(u=s(c),u!==null)return u;u=null}else if(h===3){if(c.stateNode.current.memoizedState.isDehydrated)return c.tag===3?c.stateNode.containerInfo:null;u=null}else c!==u&&(u=null)}}return Dm=u,null}function bN(u){switch(u){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(_0()){case Rk:return 2;case Nk:return 8;case w0:case pY:return 32;case zk:return 268435456;default:return 32}default:return 32}}var YE=!1,Mo=null,ko=null,Oo=null,Uh=new Map,Bh=new Map,Do=[],MV="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function xN(u,c){switch(u){case"focusin":case"focusout":Mo=null;break;case"dragenter":case"dragleave":ko=null;break;case"mouseover":case"mouseout":Oo=null;break;case"pointerover":case"pointerout":Uh.delete(c.pointerId);break;case"gotpointercapture":case"lostpointercapture":Bh.delete(c.pointerId)}}function Ih(u,c,h,m,x,S){return u===null||u.nativeEvent!==S?(u={blockedOn:c,domEventName:h,eventSystemFlags:m,nativeEvent:S,targetContainers:[x]},c!==null&&(c=xc(c),c!==null&&vN(c)),u):(u.eventSystemFlags|=m,c=u.targetContainers,x!==null&&c.indexOf(x)===-1&&c.push(x),u)}function kV(u,c,h,m,x){switch(c){case"focusin":return Mo=Ih(Mo,u,c,h,m,x),!0;case"dragenter":return ko=Ih(ko,u,c,h,m,x),!0;case"mouseover":return Oo=Ih(Oo,u,c,h,m,x),!0;case"pointerover":var S=x.pointerId;return Uh.set(S,Ih(Uh.get(S)||null,u,c,h,m,x)),!0;case"gotpointercapture":return S=x.pointerId,Bh.set(S,Ih(Bh.get(S)||null,u,c,h,m,x)),!0}return!1}function EN(u){var c=bc(u.target);if(c!==null){var h=a(c);if(h!==null){if(c=h.tag,c===13){if(c=s(h),c!==null){u.blockedOn=c,_Y(u.priority,function(){if(h.tag===13){var m=Vi();m=Ux(m);var x=Dc(h,m);x!==null&&Wi(x,h,m),qE(h,m)}});return}}else if(c===3&&h.stateNode.current.memoizedState.isDehydrated){u.blockedOn=h.tag===3?h.stateNode.containerInfo:null;return}}}u.blockedOn=null}function Rm(u){if(u.blockedOn!==null)return!1;for(var c=u.targetContainers;0<c.length;){var h=HE(u.nativeEvent);if(h===null){h=u.nativeEvent;var m=new h.constructor(h.type,h);Vx=m,h.target.dispatchEvent(m),Vx=null}else return c=xc(h),c!==null&&vN(c),u.blockedOn=h,!1;c.shift()}return!0}function SN(u,c,h){Rm(u)&&h.delete(c)}function OV(){YE=!1,Mo!==null&&Rm(Mo)&&(Mo=null),ko!==null&&Rm(ko)&&(ko=null),Oo!==null&&Rm(Oo)&&(Oo=null),Uh.forEach(SN),Bh.forEach(SN)}function Nm(u,c){u.blockedOn===c&&(u.blockedOn=null,YE||(YE=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,OV)))}var zm=null;function _N(u){zm!==u&&(zm=u,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){zm===u&&(zm=null);for(var c=0;c<u.length;c+=3){var h=u[c],m=u[c+1],x=u[c+2];if(typeof m!="function"){if(GE(m||h)===null)continue;break}var S=xc(h);S!==null&&(u.splice(c,3),c-=3,G2(S,{pending:!0,data:x,method:h.method,action:m},m,x))}}))}function Ph(u){function c(L){return Nm(L,u)}Mo!==null&&Nm(Mo,u),ko!==null&&Nm(ko,u),Oo!==null&&Nm(Oo,u),Uh.forEach(c),Bh.forEach(c);for(var h=0;h<Do.length;h++){var m=Do[h];m.blockedOn===u&&(m.blockedOn=null)}for(;0<Do.length&&(h=Do[0],h.blockedOn===null);)EN(h),h.blockedOn===null&&Do.shift();if(h=(u.ownerDocument||u).$$reactFormReplay,h!=null)for(m=0;m<h.length;m+=3){var x=h[m],S=h[m+1],T=x[Si]||null;if(typeof S=="function")T||_N(h);else if(T){var O=null;if(S&&S.hasAttribute("formAction")){if(x=S,T=S[Si]||null)O=T.formAction;else if(GE(x)!==null)continue}else O=T.action;typeof O=="function"?h[m+1]=O:(h.splice(m,3),m-=3),_N(h)}}}function XE(u){this._internalRoot=u}Fm.prototype.render=XE.prototype.render=function(u){var c=this._internalRoot;if(c===null)throw Error(i(409));var h=c.current,m=Vi();mN(h,m,u,c,null,null)},Fm.prototype.unmount=XE.prototype.unmount=function(){var u=this._internalRoot;if(u!==null){this._internalRoot=null;var c=u.containerInfo;mN(u.current,2,null,u,null,null),ym(),c[vc]=null}};function Fm(u){this._internalRoot=u}Fm.prototype.unstable_scheduleHydration=function(u){if(u){var c=Ik();u={blockedOn:null,target:u,priority:c};for(var h=0;h<Do.length&&c!==0&&c<Do[h].priority;h++);Do.splice(h,0,u),h===0&&EN(u)}};var wN=t.version;if(wN!=="19.1.0")throw Error(i(527,wN,"19.1.0"));I.findDOMNode=function(u){var c=u._reactInternals;if(c===void 0)throw typeof u.render=="function"?Error(i(188)):(u=Object.keys(u).join(","),Error(i(268,u)));return u=l(c),u=u!==null?f(u):null,u=u===null?null:u.stateNode,u};var DV={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:D,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Lm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Lm.isDisabled&&Lm.supportsFiber)try{Gd=Lm.inject(DV),Pi=Lm}catch{}}return jh.createRoot=function(u,c){if(!r(u))throw Error(i(299));var h=!1,m="",x=ID,S=PD,T=qD,O=null;return c!=null&&(c.unstable_strictMode===!0&&(h=!0),c.identifierPrefix!==void 0&&(m=c.identifierPrefix),c.onUncaughtError!==void 0&&(x=c.onUncaughtError),c.onCaughtError!==void 0&&(S=c.onCaughtError),c.onRecoverableError!==void 0&&(T=c.onRecoverableError),c.unstable_transitionCallbacks!==void 0&&(O=c.unstable_transitionCallbacks)),c=gN(u,1,!1,null,null,h,m,x,S,T,O,null),u[vc]=c.current,ME(u),new XE(c)},jh.hydrateRoot=function(u,c,h){if(!r(u))throw Error(i(299));var m=!1,x="",S=ID,T=PD,O=qD,L=null,X=null;return h!=null&&(h.unstable_strictMode===!0&&(m=!0),h.identifierPrefix!==void 0&&(x=h.identifierPrefix),h.onUncaughtError!==void 0&&(S=h.onUncaughtError),h.onCaughtError!==void 0&&(T=h.onCaughtError),h.onRecoverableError!==void 0&&(O=h.onRecoverableError),h.unstable_transitionCallbacks!==void 0&&(L=h.unstable_transitionCallbacks),h.formState!==void 0&&(X=h.formState)),c=gN(u,1,!0,c,h??null,m,x,S,T,O,L,X),c.context=pN(null),h=c.current,m=Vi(),m=Ux(m),x=po(m),x.callback=null,mo(h,x,m),h=m,c.current.lanes=h,Xd(c,h),_a(c),u[vc]=c.current,ME(u),new Fm(c)},jh.version="19.1.0",jh}var UN;function HV(){if(UN)return ZE.exports;UN=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),ZE.exports=jV(),ZE.exports}var GV=HV();const YV=/("(?:[^\\"]|\\.)*")|[:,]/g;function tS(e,t={}){const n=JSON.stringify([1],void 0,t.indent===void 0?2:t.indent).slice(2,-3),i=n===""?1/0:t.maxLength===void 0?80:t.maxLength;let{replacer:r}=t;return function a(s,o,l){s&&typeof s.toJSON=="function"&&(s=s.toJSON());const f=JSON.stringify(s,r);if(f===void 0)return f;const d=i-o.length-l;if(f.length<=d){const g=f.replace(YV,(p,y)=>y||`${p} `);if(g.length<=d)return g}if(r!=null&&(s=JSON.parse(f),r=void 0),typeof s=="object"&&s!==null){const g=o+n,p=[];let y=0,v,b;if(Array.isArray(s)){v="[",b="]";const{length:E}=s;for(;y<E;y++)p.push(a(s[y],g,y===E-1?0:1)||"null")}else{v="{",b="}";const E=Object.keys(s),{length:_}=E;for(;y<_;y++){const w=E[y],A=`${JSON.stringify(w)}: `,$=a(s[w],g,A.length+(y===_-1?0:1));$!==void 0&&p.push(A+$)}}if(p.length>0)return[v,n+p.join(`,
${g}`),b].join(`
${o}`)}return f}(e,"",0)}function Bi(e,t,n){return e.fields=t||[],e.fname=n,e}function jt(e){return e==null?null:e.fname}function Kn(e){return e==null?null:e.fields}function wF(e){return e.length===1?XV(e[0]):VV(e)}const XV=e=>function(t){return t[e]},VV=e=>{const t=e.length;return function(n){for(let i=0;i<t;++i)n=n[e[i]];return n}};function te(e){throw Error(e)}function Za(e){const t=[],n=e.length;let i=null,r=0,a="",s,o,l;e=e+"";function f(){t.push(a+e.substring(s,o)),a="",s=o+1}for(s=o=0;o<n;++o)if(l=e[o],l==="\\")a+=e.substring(s,o++),s=o;else if(l===i)f(),i=null,r=-1;else{if(i)continue;s===r&&l==='"'||s===r&&l==="'"?(s=o+1,i=l):l==="."&&!r?o>s?f():s=o+1:l==="["?(o>s&&f(),r=s=o+1):l==="]"&&(r||te("Access path missing open bracket: "+e),r>0&&f(),r=0,s=o+1)}return r&&te("Access path missing closing bracket: "+e),i&&te("Access path missing closing quote: "+e),o>s&&(o++,f()),t}function kr(e,t,n){const i=Za(e);return e=i.length===1?i[0]:e,Bi((n&&n.get||wF)(i),[e],t||e)}const Op=kr("id"),ni=Bi(e=>e,[],"identity"),jo=Bi(()=>0,[],"zero"),vd=Bi(()=>1,[],"one"),Or=Bi(()=>!0,[],"true"),zo=Bi(()=>!1,[],"false");function WV(e,t,n){const i=[t].concat([].slice.call(n));console[e].apply(console,i)}const AF=0,c$=1,f$=2,$F=3,CF=4;function d$(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:WV,i=e||AF;return{level(r){return arguments.length?(i=+r,this):i},error(){return i>=c$&&n(t||"error","ERROR",arguments),this},warn(){return i>=f$&&n(t||"warn","WARN",arguments),this},info(){return i>=$F&&n(t||"log","INFO",arguments),this},debug(){return i>=CF&&n(t||"log","DEBUG",arguments),this}}}var re=Array.isArray;function be(e){return e===Object(e)}const BN=e=>e!=="__proto__";function bd(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((i,r)=>{for(const a in r)if(a==="signals")i.signals=QV(i.signals,r.signals);else{const s=a==="legend"?{layout:1}:a==="style"?!0:null;xd(i,a,r[a],s)}return i},{})}function xd(e,t,n,i){if(!BN(t))return;let r,a;if(be(n)&&!re(n)){a=be(e[t])?e[t]:e[t]={};for(r in n)i&&(i===!0||i[r])?xd(a,r,n[r]):BN(r)&&(a[r]=n[r])}else e[t]=n}function QV(e,t){if(e==null)return t;const n={},i=[];function r(a){n[a.name]||(n[a.name]=1,i.push(a))}return t.forEach(r),e.forEach(r),i}function Je(e){return e[e.length-1]}function Qn(e){return e==null||e===""?null:+e}const TF=e=>t=>e*Math.exp(t),MF=e=>t=>Math.log(e*t),kF=e=>t=>Math.sign(t)*Math.log1p(Math.abs(t/e)),OF=e=>t=>Math.sign(t)*Math.expm1(Math.abs(t))*e,J1=e=>t=>t<0?-Math.pow(-t,e):Math.pow(t,e);function Ov(e,t,n,i){const r=n(e[0]),a=n(Je(e)),s=(a-r)*t;return[i(r-s),i(a-s)]}function DF(e,t){return Ov(e,t,Qn,ni)}function RF(e,t){var n=Math.sign(e[0]);return Ov(e,t,MF(n),TF(n))}function NF(e,t,n){return Ov(e,t,J1(n),J1(1/n))}function zF(e,t,n){return Ov(e,t,kF(n),OF(n))}function Dv(e,t,n,i,r){const a=i(e[0]),s=i(Je(e)),o=t!=null?i(t):(a+s)/2;return[r(o+(a-o)*n),r(o+(s-o)*n)]}function h$(e,t,n){return Dv(e,t,n,Qn,ni)}function g$(e,t,n){const i=Math.sign(e[0]);return Dv(e,t,n,MF(i),TF(i))}function ey(e,t,n,i){return Dv(e,t,n,J1(i),J1(1/i))}function p$(e,t,n,i){return Dv(e,t,n,kF(i),OF(i))}function FF(e){return 1+~~(new Date(e).getMonth()/3)}function LF(e){return 1+~~(new Date(e).getUTCMonth()/3)}function Ee(e){return e!=null?re(e)?e:[e]:[]}function UF(e,t,n){let i=e[0],r=e[1],a;return r<i&&(a=r,r=i,i=a),a=r-i,a>=n-t?[t,n]:[i=Math.min(Math.max(i,t),n-a),i+a]}function qe(e){return typeof e=="function"}const ZV="descending";function m$(e,t,n){n=n||{},t=Ee(t)||[];const i=[],r=[],a={},s=n.comparator||KV;return Ee(e).forEach((o,l)=>{o!=null&&(i.push(t[l]===ZV?-1:1),r.push(o=qe(o)?o:kr(o,null,n)),(Kn(o)||[]).forEach(f=>a[f]=1))}),r.length===0?null:Bi(s(r,i),Object.keys(a))}const Ed=(e,t)=>(e<t||e==null)&&t!=null?-1:(e>t||t==null)&&e!=null?1:(t=t instanceof Date?+t:t,(e=e instanceof Date?+e:e)!==e&&t===t?-1:t!==t&&e===e?1:0),KV=(e,t)=>e.length===1?JV(e[0],t[0]):eW(e,t,e.length),JV=(e,t)=>function(n,i){return Ed(e(n),e(i))*t},eW=(e,t,n)=>(t.push(0),function(i,r){let a,s=0,o=-1;for(;s===0&&++o<n;)a=e[o],s=Ed(a(i),a(r));return s*t[o]});function ii(e){return qe(e)?e:()=>e}function y$(e,t){let n;return i=>{n&&clearTimeout(n),n=setTimeout(()=>(t(i),n=null),e)}}function Pe(e){for(let t,n,i=1,r=arguments.length;i<r;++i){t=arguments[i];for(n in t)e[n]=t[n]}return e}function qa(e,t){let n=0,i,r,a,s;if(e&&(i=e.length))if(t==null){for(r=e[n];n<i&&(r==null||r!==r);r=e[++n]);for(a=s=r;n<i;++n)r=e[n],r!=null&&(r<a&&(a=r),r>s&&(s=r))}else{for(r=t(e[n]);n<i&&(r==null||r!==r);r=t(e[++n]));for(a=s=r;n<i;++n)r=t(e[n]),r!=null&&(r<a&&(a=r),r>s&&(s=r))}return[a,s]}function BF(e,t){const n=e.length;let i=-1,r,a,s,o,l;if(t==null){for(;++i<n;)if(a=e[i],a!=null&&a>=a){r=s=a;break}if(i===n)return[-1,-1];for(o=l=i;++i<n;)a=e[i],a!=null&&(r>a&&(r=a,o=i),s<a&&(s=a,l=i))}else{for(;++i<n;)if(a=t(e[i],i,e),a!=null&&a>=a){r=s=a;break}if(i===n)return[-1,-1];for(o=l=i;++i<n;)a=t(e[i],i,e),a!=null&&(r>a&&(r=a,o=i),s<a&&(s=a,l=i))}return[o,l]}function _e(e,t){return Object.hasOwn(e,t)}const Um={};function Sd(e){let t={},n;function i(a){return _e(t,a)&&t[a]!==Um}const r={size:0,empty:0,object:t,has:i,get(a){return i(a)?t[a]:void 0},set(a,s){return i(a)||(++r.size,t[a]===Um&&--r.empty),t[a]=s,this},delete(a){return i(a)&&(--r.size,++r.empty,t[a]=Um),this},clear(){r.size=r.empty=0,r.object=t={}},test(a){return arguments.length?(n=a,r):n},clean(){const a={};let s=0;for(const o in t){const l=t[o];l!==Um&&(!n||!n(l))&&(a[o]=l,++s)}r.size=s,r.empty=0,r.object=t=a}};return e&&Object.keys(e).forEach(a=>{r.set(a,e[a])}),r}function IF(e,t,n,i,r,a){if(!n&&n!==0)return a;const s=+n;let o=e[0],l=Je(e),f;l<o&&(f=o,o=l,l=f),f=Math.abs(t-o);const d=Math.abs(l-t);return f<d&&f<=s?i:d<=s?r:a}function pe(e,t,n){const i=e.prototype=Object.create(t.prototype);return Object.defineProperty(i,"constructor",{value:e,writable:!0,enumerable:!0,configurable:!0}),Pe(i,n)}function bf(e,t,n,i){let r=t[0],a=t[t.length-1],s;return r>a&&(s=r,r=a,a=s),n=n===void 0||n,i=i===void 0||i,(n?r<=e:r<e)&&(i?e<=a:e<a)}function xu(e){return typeof e=="boolean"}function Jo(e){return Object.prototype.toString.call(e)==="[object Date]"}function PF(e){return e&&qe(e[Symbol.iterator])}function st(e){return typeof e=="number"}function v$(e){return Object.prototype.toString.call(e)==="[object RegExp]"}function ve(e){return typeof e=="string"}function b$(e,t,n){e&&(e=t?Ee(e).map(o=>o.replace(/\\(.)/g,"$1")):Ee(e));const i=e&&e.length,r=n&&n.get||wF,a=o=>r(t?[o]:Za(o));let s;if(!i)s=function(){return""};else if(i===1){const o=a(e[0]);s=function(l){return""+o(l)}}else{const o=e.map(a);s=function(l){let f=""+o[0](l),d=0;for(;++d<i;)f+="|"+o[d](l);return f}}return Bi(s,e,"key")}function qF(e,t){const n=e[0],i=Je(e),r=+t;return r?r===1?i:n+r*(i-n):n}const tW=1e4;function jF(e){e=+e||tW;let t,n,i;const r=()=>{t={},n={},i=0},a=(s,o)=>(++i>e&&(n=t,t={},i=1),t[s]=o);return r(),{clear:r,has:s=>_e(t,s)||_e(n,s),get:s=>_e(t,s)?t[s]:_e(n,s)?a(s,n[s]):void 0,set:(s,o)=>_e(t,s)?t[s]=o:a(s,o)}}function HF(e,t,n,i){const r=t.length,a=n.length;if(!a)return t;if(!r)return n;const s=i||new t.constructor(r+a);let o=0,l=0,f=0;for(;o<r&&l<a;++f)s[f]=e(t[o],n[l])>0?n[l++]:t[o++];for(;o<r;++o,++f)s[f]=t[o];for(;l<a;++l,++f)s[f]=n[l];return s}function mg(e,t){let n="";for(;--t>=0;)n+=e;return n}function GF(e,t,n,i){const r=n||" ",a=e+"",s=t-a.length;return s<=0?a:i==="left"?mg(r,s)+a:i==="center"?mg(r,~~(s/2))+a+mg(r,Math.ceil(s/2)):a+mg(r,s)}function Dp(e){return e&&Je(e)-e[0]||0}function ge(e){return re(e)?"["+e.map(ge)+"]":be(e)||ve(e)?JSON.stringify(e).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):e}function x$(e){return e==null||e===""?null:!e||e==="false"||e==="0"?!1:!!e}const nW=e=>st(e)||Jo(e)?e:Date.parse(e);function E$(e,t){return t=t||nW,e==null||e===""?null:t(e)}function S$(e){return e==null||e===""?null:e+""}function ra(e){const t={},n=e.length;for(let i=0;i<n;++i)t[e[i]]=!0;return t}function YF(e,t,n,i){const r=i??"",a=e+"",s=a.length,o=Math.max(0,t-r.length);return s<=t?a:n==="left"?r+a.slice(s-o):n==="center"?a.slice(0,Math.ceil(o/2))+r+a.slice(s-~~(o/2)):a.slice(0,o)+r}function Uo(e,t,n){if(e)if(t){const i=e.length;for(let r=0;r<i;++r){const a=t(e[r]);a&&n(a,r,e)}}else e.forEach(n)}var IN={},nS={},iS=34,Hh=10,rS=13;function XF(e){return new Function("d","return {"+e.map(function(t,n){return JSON.stringify(t)+": d["+n+'] || ""'}).join(",")+"}")}function iW(e,t){var n=XF(e);return function(i,r){return t(n(i),r,e)}}function PN(e){var t=Object.create(null),n=[];return e.forEach(function(i){for(var r in i)r in t||n.push(t[r]=r)}),n}function Ci(e,t){var n=e+"",i=n.length;return i<t?new Array(t-i+1).join(0)+n:n}function rW(e){return e<0?"-"+Ci(-e,6):e>9999?"+"+Ci(e,6):Ci(e,4)}function aW(e){var t=e.getUTCHours(),n=e.getUTCMinutes(),i=e.getUTCSeconds(),r=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":rW(e.getUTCFullYear())+"-"+Ci(e.getUTCMonth()+1,2)+"-"+Ci(e.getUTCDate(),2)+(r?"T"+Ci(t,2)+":"+Ci(n,2)+":"+Ci(i,2)+"."+Ci(r,3)+"Z":i?"T"+Ci(t,2)+":"+Ci(n,2)+":"+Ci(i,2)+"Z":n||t?"T"+Ci(t,2)+":"+Ci(n,2)+"Z":"")}function sW(e){var t=new RegExp('["'+e+`
\r]`),n=e.charCodeAt(0);function i(g,p){var y,v,b=r(g,function(E,_){if(y)return y(E,_-1);v=E,y=p?iW(E,p):XF(E)});return b.columns=v||[],b}function r(g,p){var y=[],v=g.length,b=0,E=0,_,w=v<=0,A=!1;g.charCodeAt(v-1)===Hh&&--v,g.charCodeAt(v-1)===rS&&--v;function $(){if(w)return nS;if(A)return A=!1,IN;var k,M=b,R;if(g.charCodeAt(M)===iS){for(;b++<v&&g.charCodeAt(b)!==iS||g.charCodeAt(++b)===iS;);return(k=b)>=v?w=!0:(R=g.charCodeAt(b++))===Hh?A=!0:R===rS&&(A=!0,g.charCodeAt(b)===Hh&&++b),g.slice(M+1,k-1).replace(/""/g,'"')}for(;b<v;){if((R=g.charCodeAt(k=b++))===Hh)A=!0;else if(R===rS)A=!0,g.charCodeAt(b)===Hh&&++b;else if(R!==n)continue;return g.slice(M,k)}return w=!0,g.slice(M,v)}for(;(_=$())!==nS;){for(var C=[];_!==IN&&_!==nS;)C.push(_),_=$();p&&(C=p(C,E++))==null||y.push(C)}return y}function a(g,p){return g.map(function(y){return p.map(function(v){return d(y[v])}).join(e)})}function s(g,p){return p==null&&(p=PN(g)),[p.map(d).join(e)].concat(a(g,p)).join(`
`)}function o(g,p){return p==null&&(p=PN(g)),a(g,p).join(`
`)}function l(g){return g.map(f).join(`
`)}function f(g){return g.map(d).join(e)}function d(g){return g==null?"":g instanceof Date?aW(g):t.test(g+="")?'"'+g.replace(/"/g,'""')+'"':g}return{parse:i,parseRows:r,format:s,formatBody:o,formatRows:l,formatRow:f,formatValue:d}}function oW(e){return e}function uW(e){if(e==null)return oW;var t,n,i=e.scale[0],r=e.scale[1],a=e.translate[0],s=e.translate[1];return function(o,l){l||(t=n=0);var f=2,d=o.length,g=new Array(d);for(g[0]=(t+=o[0])*i+a,g[1]=(n+=o[1])*r+s;f<d;)g[f]=o[f],++f;return g}}function lW(e,t){for(var n,i=e.length,r=i-t;r<--i;)n=e[r],e[r++]=e[i],e[i]=n}function cW(e,t){return typeof t=="string"&&(t=e.objects[t]),t.type==="GeometryCollection"?{type:"FeatureCollection",features:t.geometries.map(function(n){return qN(e,n)})}:qN(e,t)}function qN(e,t){var n=t.id,i=t.bbox,r=t.properties==null?{}:t.properties,a=VF(e,t);return n==null&&i==null?{type:"Feature",properties:r,geometry:a}:i==null?{type:"Feature",id:n,properties:r,geometry:a}:{type:"Feature",id:n,bbox:i,properties:r,geometry:a}}function VF(e,t){var n=uW(e.transform),i=e.arcs;function r(d,g){g.length&&g.pop();for(var p=i[d<0?~d:d],y=0,v=p.length;y<v;++y)g.push(n(p[y],y));d<0&&lW(g,v)}function a(d){return n(d)}function s(d){for(var g=[],p=0,y=d.length;p<y;++p)r(d[p],g);return g.length<2&&g.push(g[0]),g}function o(d){for(var g=s(d);g.length<4;)g.push(g[0]);return g}function l(d){return d.map(o)}function f(d){var g=d.type,p;switch(g){case"GeometryCollection":return{type:g,geometries:d.geometries.map(f)};case"Point":p=a(d.coordinates);break;case"MultiPoint":p=d.coordinates.map(a);break;case"LineString":p=s(d.arcs);break;case"MultiLineString":p=d.arcs.map(s);break;case"Polygon":p=l(d.arcs);break;case"MultiPolygon":p=d.arcs.map(l);break;default:return null}return{type:g,coordinates:p}}return f(t)}function fW(e,t){var n={},i={},r={},a=[],s=-1;t.forEach(function(f,d){var g=e.arcs[f<0?~f:f],p;g.length<3&&!g[1][0]&&!g[1][1]&&(p=t[++s],t[s]=f,t[d]=p)}),t.forEach(function(f){var d=o(f),g=d[0],p=d[1],y,v;if(y=r[g])if(delete r[y.end],y.push(f),y.end=p,v=i[p]){delete i[v.start];var b=v===y?y:y.concat(v);i[b.start=y.start]=r[b.end=v.end]=b}else i[y.start]=r[y.end]=y;else if(y=i[p])if(delete i[y.start],y.unshift(f),y.start=g,v=r[g]){delete r[v.end];var E=v===y?y:v.concat(y);i[E.start=v.start]=r[E.end=y.end]=E}else i[y.start]=r[y.end]=y;else y=[f],i[y.start=g]=r[y.end=p]=y});function o(f){var d=e.arcs[f<0?~f:f],g=d[0],p;return e.transform?(p=[0,0],d.forEach(function(y){p[0]+=y[0],p[1]+=y[1]})):p=d[d.length-1],f<0?[p,g]:[g,p]}function l(f,d){for(var g in f){var p=f[g];delete d[p.start],delete p.start,delete p.end,p.forEach(function(y){n[y<0?~y:y]=1}),a.push(p)}}return l(r,i),l(i,r),t.forEach(function(f){n[f<0?~f:f]||a.push([f])}),a}function dW(e){return VF(e,hW.apply(this,arguments))}function hW(e,t,n){var i,r,a;if(arguments.length>1)i=gW(e,t,n);else for(r=0,i=new Array(a=e.arcs.length);r<a;++r)i[r]=r;return{type:"MultiLineString",arcs:fW(e,i)}}function gW(e,t,n){var i=[],r=[],a;function s(g){var p=g<0?~g:g;(r[p]||(r[p]=[])).push({i:g,g:a})}function o(g){g.forEach(s)}function l(g){g.forEach(o)}function f(g){g.forEach(l)}function d(g){switch(a=g,g.type){case"GeometryCollection":g.geometries.forEach(d);break;case"LineString":o(g.arcs);break;case"MultiLineString":case"Polygon":l(g.arcs);break;case"MultiPolygon":f(g.arcs);break}}return d(t),r.forEach(n==null?function(g){i.push(g[0].i)}:function(g){n(g[0].g,g[g.length-1].g)&&i.push(g[0].i)}),i}function Is(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function pW(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function _d(e){let t,n,i;e.length!==2?(t=Is,n=(o,l)=>Is(e(o),l),i=(o,l)=>e(o)-l):(t=e===Is||e===pW?e:mW,n=e,i=e);function r(o,l,f=0,d=o.length){if(f<d){if(t(l,l)!==0)return d;do{const g=f+d>>>1;n(o[g],l)<0?f=g+1:d=g}while(f<d)}return f}function a(o,l,f=0,d=o.length){if(f<d){if(t(l,l)!==0)return d;do{const g=f+d>>>1;n(o[g],l)<=0?f=g+1:d=g}while(f<d)}return f}function s(o,l,f=0,d=o.length){const g=r(o,l,f,d-1);return g>f&&i(o[g-1],l)>-i(o[g],l)?g-1:g}return{left:r,center:s,right:a}}function mW(){return 0}function WF(e){return e===null?NaN:+e}function*yW(e,t){if(t===void 0)for(let n of e)n!=null&&(n=+n)>=n&&(yield n);else{let n=-1;for(let i of e)(i=t(i,++n,e))!=null&&(i=+i)>=i&&(yield i)}}const QF=_d(Is),au=QF.right,vW=QF.left;_d(WF).center;function bW(e,t){let n=0,i,r=0,a=0;if(t===void 0)for(let s of e)s!=null&&(s=+s)>=s&&(i=s-r,r+=i/++n,a+=i*(s-r));else{let s=-1;for(let o of e)(o=t(o,++s,e))!=null&&(o=+o)>=o&&(i=o-r,r+=i/++n,a+=i*(o-r))}if(n>1)return a/(n-1)}function xW(e,t){const n=bW(e,t);return n&&Math.sqrt(n)}class pi{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const n=this._partials;let i=0;for(let r=0;r<this._n&&r<32;r++){const a=n[r],s=t+a,o=Math.abs(t)<Math.abs(a)?t-(s-a):a-(s-t);o&&(n[i++]=o),t=s}return n[i]=t,this._n=i+1,this}valueOf(){const t=this._partials;let n=this._n,i,r,a,s=0;if(n>0){for(s=t[--n];n>0&&(i=s,r=t[--n],s=i+r,a=r-(s-i),!a););n>0&&(a<0&&t[n-1]<0||a>0&&t[n-1]>0)&&(r=a*2,i=s+r,r==i-s&&(s=i))}return s}}class jN extends Map{constructor(t,n=JF){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[i,r]of t)this.set(i,r)}get(t){return super.get(X_(this,t))}has(t){return super.has(X_(this,t))}set(t,n){return super.set(ZF(this,t),n)}delete(t){return super.delete(KF(this,t))}}class ty extends Set{constructor(t,n=JF){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const i of t)this.add(i)}has(t){return super.has(X_(this,t))}add(t){return super.add(ZF(this,t))}delete(t){return super.delete(KF(this,t))}}function X_({_intern:e,_key:t},n){const i=t(n);return e.has(i)?e.get(i):n}function ZF({_intern:e,_key:t},n){const i=t(n);return e.has(i)?e.get(i):(e.set(i,n),n)}function KF({_intern:e,_key:t},n){const i=t(n);return e.has(i)&&(n=e.get(i),e.delete(i)),n}function JF(e){return e!==null&&typeof e=="object"?e.valueOf():e}function EW(e,t){return Array.from(t,n=>e[n])}function SW(e=Is){if(e===Is)return e9;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const i=e(t,n);return i||i===0?i:(e(n,n)===0)-(e(t,t)===0)}}function e9(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const _W=Math.sqrt(50),wW=Math.sqrt(10),AW=Math.sqrt(2);function ny(e,t,n){const i=(t-e)/Math.max(0,n),r=Math.floor(Math.log10(i)),a=i/Math.pow(10,r),s=a>=_W?10:a>=wW?5:a>=AW?2:1;let o,l,f;return r<0?(f=Math.pow(10,-r)/s,o=Math.round(e*f),l=Math.round(t*f),o/f<e&&++o,l/f>t&&--l,f=-f):(f=Math.pow(10,r)*s,o=Math.round(e/f),l=Math.round(t/f),o*f<e&&++o,l*f>t&&--l),l<o&&.5<=n&&n<2?ny(e,t,n*2):[o,l,f]}function V_(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const i=t<e,[r,a,s]=i?ny(t,e,n):ny(e,t,n);if(!(a>=r))return[];const o=a-r+1,l=new Array(o);if(i)if(s<0)for(let f=0;f<o;++f)l[f]=(a-f)/-s;else for(let f=0;f<o;++f)l[f]=(a-f)*s;else if(s<0)for(let f=0;f<o;++f)l[f]=(r+f)/-s;else for(let f=0;f<o;++f)l[f]=(r+f)*s;return l}function W_(e,t,n){return t=+t,e=+e,n=+n,ny(e,t,n)[2]}function su(e,t,n){t=+t,e=+e,n=+n;const i=t<e,r=i?W_(t,e,n):W_(e,t,n);return(i?-1:1)*(r<0?1/-r:r)}function Sl(e,t){let n;if(t===void 0)for(const i of e)i!=null&&(n<i||n===void 0&&i>=i)&&(n=i);else{let i=-1;for(let r of e)(r=t(r,++i,e))!=null&&(n<r||n===void 0&&r>=r)&&(n=r)}return n}function Q_(e,t){let n;if(t===void 0)for(const i of e)i!=null&&(n>i||n===void 0&&i>=i)&&(n=i);else{let i=-1;for(let r of e)(r=t(r,++i,e))!=null&&(n>r||n===void 0&&r>=r)&&(n=r)}return n}function t9(e,t,n=0,i=1/0,r){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),i=Math.floor(Math.min(e.length-1,i)),!(n<=t&&t<=i))return e;for(r=r===void 0?e9:SW(r);i>n;){if(i-n>600){const l=i-n+1,f=t-n+1,d=Math.log(l),g=.5*Math.exp(2*d/3),p=.5*Math.sqrt(d*g*(l-g)/l)*(f-l/2<0?-1:1),y=Math.max(n,Math.floor(t-f*g/l+p)),v=Math.min(i,Math.floor(t+(l-f)*g/l+p));t9(e,t,y,v,r)}const a=e[t];let s=n,o=i;for(Gh(e,n,t),r(e[i],a)>0&&Gh(e,n,i);s<o;){for(Gh(e,s,o),++s,--o;r(e[s],a)<0;)++s;for(;r(e[o],a)>0;)--o}r(e[n],a)===0?Gh(e,n,o):(++o,Gh(e,o,i)),o<=t&&(n=o+1),t<=o&&(i=o-1)}return e}function Gh(e,t,n){const i=e[t];e[t]=e[n],e[n]=i}function Z_(e,t,n){if(e=Float64Array.from(yW(e,n)),!(!(i=e.length)||isNaN(t=+t))){if(t<=0||i<2)return Q_(e);if(t>=1)return Sl(e);var i,r=(i-1)*t,a=Math.floor(r),s=Sl(t9(e,a).subarray(0,a+1)),o=Q_(e.subarray(a+1));return s+(o-s)*(r-a)}}function n9(e,t,n=WF){if(!(!(i=e.length)||isNaN(t=+t))){if(t<=0||i<2)return+n(e[0],0,e);if(t>=1)return+n(e[i-1],i-1,e);var i,r=(i-1)*t,a=Math.floor(r),s=+n(e[a],a,e),o=+n(e[a+1],a+1,e);return s+(o-s)*(r-a)}}function $W(e,t){let n=0,i=0;if(t===void 0)for(let r of e)r!=null&&(r=+r)>=r&&(++n,i+=r);else{let r=-1;for(let a of e)(a=t(a,++r,e))!=null&&(a=+a)>=a&&(++n,i+=a)}if(n)return i/n}function i9(e,t){return Z_(e,.5,t)}function*CW(e){for(const t of e)yield*t}function r9(e){return Array.from(CW(e))}function er(e,t,n){e=+e,t=+t,n=(r=arguments.length)<2?(t=e,e=0,1):r<3?1:+n;for(var i=-1,r=Math.max(0,Math.ceil((t-e)/n))|0,a=new Array(r);++i<r;)a[i]=e+i*n;return a}function a9(e,t){let n=0;for(let i of e)(i=+i)&&(n+=i);return n}function TW(e,...t){e=new ty(e),t=t.map(MW);e:for(const n of e)for(const i of t)if(!i.has(n)){e.delete(n);continue e}return e}function MW(e){return e instanceof ty?e:new ty(e)}function kW(...e){const t=new ty;for(const n of e)for(const i of n)t.add(i);return t}function OW(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function iy(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,i=e.slice(0,n);return[i.length>1?i[0]+i.slice(2):i,+e.slice(n+1)]}function Lf(e){return e=iy(Math.abs(e)),e?e[1]:NaN}function DW(e,t){return function(n,i){for(var r=n.length,a=[],s=0,o=e[0],l=0;r>0&&o>0&&(l+o+1>i&&(o=Math.max(1,i-l)),a.push(n.substring(r-=o,r+o)),!((l+=o+1)>i));)o=e[s=(s+1)%e.length];return a.reverse().join(t)}}function RW(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var NW=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Dl(e){if(!(t=NW.exec(e)))throw new Error("invalid format: "+e);var t;return new _$({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Dl.prototype=_$.prototype;function _$(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}_$.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function zW(e){e:for(var t=e.length,n=1,i=-1,r;n<t;++n)switch(e[n]){case".":i=r=n;break;case"0":i===0&&(i=n),r=n;break;default:if(!+e[n])break e;i>0&&(i=0);break}return i>0?e.slice(0,i)+e.slice(r+1):e}var s9;function FW(e,t){var n=iy(e,t);if(!n)return e+"";var i=n[0],r=n[1],a=r-(s9=Math.max(-8,Math.min(8,Math.floor(r/3)))*3)+1,s=i.length;return a===s?i:a>s?i+new Array(a-s+1).join("0"):a>0?i.slice(0,a)+"."+i.slice(a):"0."+new Array(1-a).join("0")+iy(e,Math.max(0,t+a-1))[0]}function HN(e,t){var n=iy(e,t);if(!n)return e+"";var i=n[0],r=n[1];return r<0?"0."+new Array(-r).join("0")+i:i.length>r+1?i.slice(0,r+1)+"."+i.slice(r+1):i+new Array(r-i.length+2).join("0")}const GN={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:OW,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>HN(e*100,t),r:HN,s:FW,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function YN(e){return e}var XN=Array.prototype.map,VN=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function o9(e){var t=e.grouping===void 0||e.thousands===void 0?YN:DW(XN.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",i=e.currency===void 0?"":e.currency[1]+"",r=e.decimal===void 0?".":e.decimal+"",a=e.numerals===void 0?YN:RW(XN.call(e.numerals,String)),s=e.percent===void 0?"%":e.percent+"",o=e.minus===void 0?"":e.minus+"",l=e.nan===void 0?"NaN":e.nan+"";function f(g){g=Dl(g);var p=g.fill,y=g.align,v=g.sign,b=g.symbol,E=g.zero,_=g.width,w=g.comma,A=g.precision,$=g.trim,C=g.type;C==="n"?(w=!0,C="g"):GN[C]||(A===void 0&&(A=12),$=!0,C="g"),(E||p==="0"&&y==="=")&&(E=!0,p="0",y="=");var k=b==="$"?n:b==="#"&&/[boxX]/.test(C)?"0"+C.toLowerCase():"",M=b==="$"?i:/[%p]/.test(C)?s:"",R=GN[C],z=/[defgprs%]/.test(C);A=A===void 0?6:/[gprs]/.test(C)?Math.max(1,Math.min(21,A)):Math.max(0,Math.min(20,A));function B(U){var V=k,G=M,q,F,D;if(C==="c")G=R(U)+G,U="";else{U=+U;var I=U<0||1/U<0;if(U=isNaN(U)?l:R(Math.abs(U),A),$&&(U=zW(U)),I&&+U==0&&v!=="+"&&(I=!1),V=(I?v==="("?v:o:v==="-"||v==="("?"":v)+V,G=(C==="s"?VN[8+s9/3]:"")+G+(I&&v==="("?")":""),z){for(q=-1,F=U.length;++q<F;)if(D=U.charCodeAt(q),48>D||D>57){G=(D===46?r+U.slice(q+1):U.slice(q))+G,U=U.slice(0,q);break}}}w&&!E&&(U=t(U,1/0));var Y=V.length+U.length+G.length,K=Y<_?new Array(_-Y+1).join(p):"";switch(w&&E&&(U=t(K+U,K.length?_-G.length:1/0),K=""),y){case"<":U=V+U+G+K;break;case"=":U=V+K+U+G;break;case"^":U=K.slice(0,Y=K.length>>1)+V+U+G+K.slice(Y);break;default:U=K+V+U+G;break}return a(U)}return B.toString=function(){return g+""},B}function d(g,p){var y=f((g=Dl(g),g.type="f",g)),v=Math.max(-8,Math.min(8,Math.floor(Lf(p)/3)))*3,b=Math.pow(10,-v),E=VN[8+v/3];return function(_){return y(b*_)+E}}return{format:f,formatPrefix:d}}var Bm,Rv,w$;LW({thousands:",",grouping:[3],currency:["$",""]});function LW(e){return Bm=o9(e),Rv=Bm.format,w$=Bm.formatPrefix,Bm}function u9(e){return Math.max(0,-Lf(Math.abs(e)))}function l9(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Lf(t)/3)))*3-Lf(Math.abs(e)))}function c9(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Lf(t)-Lf(e))+1}const aS=new Date,sS=new Date;function dn(e,t,n,i){function r(a){return e(a=arguments.length===0?new Date:new Date(+a)),a}return r.floor=a=>(e(a=new Date(+a)),a),r.ceil=a=>(e(a=new Date(a-1)),t(a,1),e(a),a),r.round=a=>{const s=r(a),o=r.ceil(a);return a-s<o-a?s:o},r.offset=(a,s)=>(t(a=new Date(+a),s==null?1:Math.floor(s)),a),r.range=(a,s,o)=>{const l=[];if(a=r.ceil(a),o=o==null?1:Math.floor(o),!(a<s)||!(o>0))return l;let f;do l.push(f=new Date(+a)),t(a,o),e(a);while(f<a&&a<s);return l},r.filter=a=>dn(s=>{if(s>=s)for(;e(s),!a(s);)s.setTime(s-1)},(s,o)=>{if(s>=s)if(o<0)for(;++o<=0;)for(;t(s,-1),!a(s););else for(;--o>=0;)for(;t(s,1),!a(s););}),n&&(r.count=(a,s)=>(aS.setTime(+a),sS.setTime(+s),e(aS),e(sS),Math.floor(n(aS,sS))),r.every=a=>(a=Math.floor(a),!isFinite(a)||!(a>0)?null:a>1?r.filter(i?s=>i(s)%a===0:s=>r.count(0,s)%a===0):r)),r}const Uf=dn(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);Uf.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?dn(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):Uf);Uf.range;const Ns=1e3,wr=Ns*60,zs=wr*60,Vs=zs*24,A$=Vs*7,WN=Vs*30,oS=Vs*365,Fs=dn(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Ns)},(e,t)=>(t-e)/Ns,e=>e.getUTCSeconds());Fs.range;const Nv=dn(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Ns)},(e,t)=>{e.setTime(+e+t*wr)},(e,t)=>(t-e)/wr,e=>e.getMinutes());Nv.range;const zv=dn(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*wr)},(e,t)=>(t-e)/wr,e=>e.getUTCMinutes());zv.range;const Fv=dn(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Ns-e.getMinutes()*wr)},(e,t)=>{e.setTime(+e+t*zs)},(e,t)=>(t-e)/zs,e=>e.getHours());Fv.range;const Lv=dn(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*zs)},(e,t)=>(t-e)/zs,e=>e.getUTCHours());Lv.range;const Ps=dn(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*wr)/Vs,e=>e.getDate()-1);Ps.range;const eu=dn(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Vs,e=>e.getUTCDate()-1);eu.range;const f9=dn(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Vs,e=>Math.floor(e/Vs));f9.range;function ec(e){return dn(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*wr)/A$)}const wd=ec(0),ry=ec(1),UW=ec(2),BW=ec(3),Bf=ec(4),IW=ec(5),PW=ec(6);wd.range;ry.range;UW.range;BW.range;Bf.range;IW.range;PW.range;function tc(e){return dn(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/A$)}const Ad=tc(0),ay=tc(1),qW=tc(2),jW=tc(3),If=tc(4),HW=tc(5),GW=tc(6);Ad.range;ay.range;qW.range;jW.range;If.range;HW.range;GW.range;const ep=dn(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());ep.range;const tp=dn(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());tp.range;const ja=dn(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());ja.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:dn(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});ja.range;const Ha=dn(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Ha.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:dn(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});Ha.range;function d9(e,t,n,i,r,a){const s=[[Fs,1,Ns],[Fs,5,5*Ns],[Fs,15,15*Ns],[Fs,30,30*Ns],[a,1,wr],[a,5,5*wr],[a,15,15*wr],[a,30,30*wr],[r,1,zs],[r,3,3*zs],[r,6,6*zs],[r,12,12*zs],[i,1,Vs],[i,2,2*Vs],[n,1,A$],[t,1,WN],[t,3,3*WN],[e,1,oS]];function o(f,d,g){const p=d<f;p&&([f,d]=[d,f]);const y=g&&typeof g.range=="function"?g:l(f,d,g),v=y?y.range(f,+d+1):[];return p?v.reverse():v}function l(f,d,g){const p=Math.abs(d-f)/g,y=_d(([,,E])=>E).right(s,p);if(y===s.length)return e.every(su(f/oS,d/oS,g));if(y===0)return Uf.every(Math.max(su(f,d,g),1));const[v,b]=s[p/s[y-1][2]<s[y][2]/p?y-1:y];return v.every(b)}return[o,l]}const[YW,XW]=d9(Ha,tp,Ad,f9,Lv,zv),[VW,WW]=d9(ja,ep,wd,Ps,Fv,Nv),Un="year",Ri="quarter",Jn="month",ln="week",Ni="date",Wn="day",Ga="dayofyear",or="hours",ur="minutes",Dr="seconds",aa="milliseconds",$$=[Un,Ri,Jn,ln,Ni,Wn,Ga,or,ur,Dr,aa],uS=$$.reduce((e,t,n)=>(e[t]=1+n,e),{});function C$(e){const t=Ee(e).slice(),n={};return t.length||te("Missing time unit."),t.forEach(r=>{_e(uS,r)?n[r]=1:te(`Invalid time unit: ${r}.`)}),(n[ln]||n[Wn]?1:0)+(n[Ri]||n[Jn]||n[Ni]?1:0)+(n[Ga]?1:0)>1&&te(`Incompatible time units: ${e}`),t.sort((r,a)=>uS[r]-uS[a]),t}const QW={[Un]:"%Y ",[Ri]:"Q%q ",[Jn]:"%b ",[Ni]:"%d ",[ln]:"W%U ",[Wn]:"%a ",[Ga]:"%j ",[or]:"%H:00",[ur]:"00:%M",[Dr]:":%S",[aa]:".%L",[`${Un}-${Jn}`]:"%Y-%m ",[`${Un}-${Jn}-${Ni}`]:"%Y-%m-%d ",[`${or}-${ur}`]:"%H:%M"};function h9(e,t){const n=Pe({},QW,t),i=C$(e),r=i.length;let a="",s=0,o,l;for(s=0;s<r;)for(o=i.length;o>s;--o)if(l=i.slice(s,o).join("-"),n[l]!=null){a+=n[l],s=o;break}return a.trim()}const hl=new Date;function T$(e){return hl.setFullYear(e),hl.setMonth(0),hl.setDate(1),hl.setHours(0,0,0,0),hl}function g9(e){return m9(new Date(e))}function p9(e){return K_(new Date(e))}function m9(e){return Ps.count(T$(e.getFullYear())-1,e)}function K_(e){return wd.count(T$(e.getFullYear())-1,e)}function J_(e){return T$(e).getDay()}function ZW(e,t,n,i,r,a,s){if(0<=e&&e<100){const o=new Date(-1,t,n,i,r,a,s);return o.setFullYear(e),o}return new Date(e,t,n,i,r,a,s)}function y9(e){return b9(new Date(e))}function v9(e){return ew(new Date(e))}function b9(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return eu.count(t-1,e)}function ew(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return Ad.count(t-1,e)}function tw(e){return hl.setTime(Date.UTC(e,0,1)),hl.getUTCDay()}function KW(e,t,n,i,r,a,s){if(0<=e&&e<100){const o=new Date(Date.UTC(-1,t,n,i,r,a,s));return o.setUTCFullYear(n.y),o}return new Date(Date.UTC(e,t,n,i,r,a,s))}function x9(e,t,n,i,r){const a=t||1,s=Je(e),o=(_,w,A)=>(A=A||_,JW(n[A],i[A],_===s&&a,w)),l=new Date,f=ra(e),d=f[Un]?o(Un):ii(2012),g=f[Jn]?o(Jn):f[Ri]?o(Ri):jo,p=f[ln]&&f[Wn]?o(Wn,1,ln+Wn):f[ln]?o(ln,1):f[Wn]?o(Wn,1):f[Ni]?o(Ni,1):f[Ga]?o(Ga,1):vd,y=f[or]?o(or):jo,v=f[ur]?o(ur):jo,b=f[Dr]?o(Dr):jo,E=f[aa]?o(aa):jo;return function(_){l.setTime(+_);const w=d(l);return r(w,g(l),p(l,w),y(l),v(l),b(l),E(l))}}function JW(e,t,n,i){const r=n<=1?e:i?(a,s)=>i+n*Math.floor((e(a,s)-i)/n):(a,s)=>n*Math.floor(e(a,s)/n);return t?(a,s)=>t(r(a,s),s):r}function Pf(e,t,n){return t+e*7-(n+6)%7}const eQ={[Un]:e=>e.getFullYear(),[Ri]:e=>Math.floor(e.getMonth()/3),[Jn]:e=>e.getMonth(),[Ni]:e=>e.getDate(),[or]:e=>e.getHours(),[ur]:e=>e.getMinutes(),[Dr]:e=>e.getSeconds(),[aa]:e=>e.getMilliseconds(),[Ga]:e=>m9(e),[ln]:e=>K_(e),[ln+Wn]:(e,t)=>Pf(K_(e),e.getDay(),J_(t)),[Wn]:(e,t)=>Pf(1,e.getDay(),J_(t))},tQ={[Ri]:e=>3*e,[ln]:(e,t)=>Pf(e,0,J_(t))};function E9(e,t){return x9(e,t||1,eQ,tQ,ZW)}const nQ={[Un]:e=>e.getUTCFullYear(),[Ri]:e=>Math.floor(e.getUTCMonth()/3),[Jn]:e=>e.getUTCMonth(),[Ni]:e=>e.getUTCDate(),[or]:e=>e.getUTCHours(),[ur]:e=>e.getUTCMinutes(),[Dr]:e=>e.getUTCSeconds(),[aa]:e=>e.getUTCMilliseconds(),[Ga]:e=>b9(e),[ln]:e=>ew(e),[Wn]:(e,t)=>Pf(1,e.getUTCDay(),tw(t)),[ln+Wn]:(e,t)=>Pf(ew(e),e.getUTCDay(),tw(t))},iQ={[Ri]:e=>3*e,[ln]:(e,t)=>Pf(e,0,tw(t))};function S9(e,t){return x9(e,t||1,nQ,iQ,KW)}const rQ={[Un]:ja,[Ri]:ep.every(3),[Jn]:ep,[ln]:wd,[Ni]:Ps,[Wn]:Ps,[Ga]:Ps,[or]:Fv,[ur]:Nv,[Dr]:Fs,[aa]:Uf},aQ={[Un]:Ha,[Ri]:tp.every(3),[Jn]:tp,[ln]:Ad,[Ni]:eu,[Wn]:eu,[Ga]:eu,[or]:Lv,[ur]:zv,[Dr]:Fs,[aa]:Uf};function $d(e){return rQ[e]}function Cd(e){return aQ[e]}function _9(e,t,n){return e?e.offset(t,n):void 0}function w9(e,t,n){return _9($d(e),t,n)}function A9(e,t,n){return _9(Cd(e),t,n)}function $9(e,t,n,i){return e?e.range(t,n,i):void 0}function C9(e,t,n,i){return $9($d(e),t,n,i)}function T9(e,t,n,i){return $9(Cd(e),t,n,i)}const yg=1e3,vg=yg*60,bg=vg*60,Uv=bg*24,sQ=Uv*7,QN=Uv*30,nw=Uv*365,M9=[Un,Jn,Ni,or,ur,Dr,aa],xg=M9.slice(0,-1),Eg=xg.slice(0,-1),Sg=Eg.slice(0,-1),oQ=Sg.slice(0,-1),uQ=[Un,ln],ZN=[Un,Jn],k9=[Un],Yh=[[xg,1,yg],[xg,5,5*yg],[xg,15,15*yg],[xg,30,30*yg],[Eg,1,vg],[Eg,5,5*vg],[Eg,15,15*vg],[Eg,30,30*vg],[Sg,1,bg],[Sg,3,3*bg],[Sg,6,6*bg],[Sg,12,12*bg],[oQ,1,Uv],[uQ,1,sQ],[ZN,1,QN],[ZN,3,3*QN],[k9,1,nw]];function O9(e){const t=e.extent,n=e.maxbins||40,i=Math.abs(Dp(t))/n;let r=_d(o=>o[2]).right(Yh,i),a,s;return r===Yh.length?(a=k9,s=su(t[0]/nw,t[1]/nw,n)):r?(r=Yh[i/Yh[r-1][2]<Yh[r][2]/i?r-1:r],a=r[0],s=r[1]):(a=M9,s=Math.max(su(t[0],t[1],n),1)),{units:a,step:s}}function lS(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function cS(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Xh(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function D9(e){var t=e.dateTime,n=e.date,i=e.time,r=e.periods,a=e.days,s=e.shortDays,o=e.months,l=e.shortMonths,f=Vh(r),d=Wh(r),g=Vh(a),p=Wh(a),y=Vh(s),v=Wh(s),b=Vh(o),E=Wh(o),_=Vh(l),w=Wh(l),A={a:I,A:Y,b:K,B:N,c:null,d:i5,e:i5,f:OQ,g:PQ,G:jQ,H:TQ,I:MQ,j:kQ,L:R9,m:DQ,M:RQ,p:W,q:ne,Q:s5,s:o5,S:NQ,u:zQ,U:FQ,V:LQ,w:UQ,W:BQ,x:null,X:null,y:IQ,Y:qQ,Z:HQ,"%":a5},$={a:se,A:ye,b:Se,B:$e,c:null,d:r5,e:r5,f:VQ,g:rZ,G:sZ,H:GQ,I:YQ,j:XQ,L:z9,m:WQ,M:QQ,p:Ht,q:nt,Q:s5,s:o5,S:ZQ,u:KQ,U:JQ,V:eZ,w:tZ,W:nZ,x:null,X:null,y:iZ,Y:aZ,Z:oZ,"%":a5},C={a:B,A:U,b:V,B:G,c:q,d:t5,e:t5,f:wQ,g:e5,G:JN,H:n5,I:n5,j:xQ,L:_Q,m:bQ,M:EQ,p:z,q:vQ,Q:$Q,s:CQ,S:SQ,u:hQ,U:gQ,V:pQ,w:dQ,W:mQ,x:F,X:D,y:e5,Y:JN,Z:yQ,"%":AQ};A.x=k(n,A),A.X=k(i,A),A.c=k(t,A),$.x=k(n,$),$.X=k(i,$),$.c=k(t,$);function k(xe,Ue){return function(Ie){var fe=[],Gt=-1,it=0,Kt=xe.length,gn,Jt,_0;for(Ie instanceof Date||(Ie=new Date(+Ie));++Gt<Kt;)xe.charCodeAt(Gt)===37&&(fe.push(xe.slice(it,Gt)),(Jt=KN[gn=xe.charAt(++Gt)])!=null?gn=xe.charAt(++Gt):Jt=gn==="e"?" ":"0",(_0=Ue[gn])&&(gn=_0(Ie,Jt)),fe.push(gn),it=Gt+1);return fe.push(xe.slice(it,Gt)),fe.join("")}}function M(xe,Ue){return function(Ie){var fe=Xh(1900,void 0,1),Gt=R(fe,xe,Ie+="",0),it,Kt;if(Gt!=Ie.length)return null;if("Q"in fe)return new Date(fe.Q);if("s"in fe)return new Date(fe.s*1e3+("L"in fe?fe.L:0));if(Ue&&!("Z"in fe)&&(fe.Z=0),"p"in fe&&(fe.H=fe.H%12+fe.p*12),fe.m===void 0&&(fe.m="q"in fe?fe.q:0),"V"in fe){if(fe.V<1||fe.V>53)return null;"w"in fe||(fe.w=1),"Z"in fe?(it=cS(Xh(fe.y,0,1)),Kt=it.getUTCDay(),it=Kt>4||Kt===0?ay.ceil(it):ay(it),it=eu.offset(it,(fe.V-1)*7),fe.y=it.getUTCFullYear(),fe.m=it.getUTCMonth(),fe.d=it.getUTCDate()+(fe.w+6)%7):(it=lS(Xh(fe.y,0,1)),Kt=it.getDay(),it=Kt>4||Kt===0?ry.ceil(it):ry(it),it=Ps.offset(it,(fe.V-1)*7),fe.y=it.getFullYear(),fe.m=it.getMonth(),fe.d=it.getDate()+(fe.w+6)%7)}else("W"in fe||"U"in fe)&&("w"in fe||(fe.w="u"in fe?fe.u%7:"W"in fe?1:0),Kt="Z"in fe?cS(Xh(fe.y,0,1)).getUTCDay():lS(Xh(fe.y,0,1)).getDay(),fe.m=0,fe.d="W"in fe?(fe.w+6)%7+fe.W*7-(Kt+5)%7:fe.w+fe.U*7-(Kt+6)%7);return"Z"in fe?(fe.H+=fe.Z/100|0,fe.M+=fe.Z%100,cS(fe)):lS(fe)}}function R(xe,Ue,Ie,fe){for(var Gt=0,it=Ue.length,Kt=Ie.length,gn,Jt;Gt<it;){if(fe>=Kt)return-1;if(gn=Ue.charCodeAt(Gt++),gn===37){if(gn=Ue.charAt(Gt++),Jt=C[gn in KN?Ue.charAt(Gt++):gn],!Jt||(fe=Jt(xe,Ie,fe))<0)return-1}else if(gn!=Ie.charCodeAt(fe++))return-1}return fe}function z(xe,Ue,Ie){var fe=f.exec(Ue.slice(Ie));return fe?(xe.p=d.get(fe[0].toLowerCase()),Ie+fe[0].length):-1}function B(xe,Ue,Ie){var fe=y.exec(Ue.slice(Ie));return fe?(xe.w=v.get(fe[0].toLowerCase()),Ie+fe[0].length):-1}function U(xe,Ue,Ie){var fe=g.exec(Ue.slice(Ie));return fe?(xe.w=p.get(fe[0].toLowerCase()),Ie+fe[0].length):-1}function V(xe,Ue,Ie){var fe=_.exec(Ue.slice(Ie));return fe?(xe.m=w.get(fe[0].toLowerCase()),Ie+fe[0].length):-1}function G(xe,Ue,Ie){var fe=b.exec(Ue.slice(Ie));return fe?(xe.m=E.get(fe[0].toLowerCase()),Ie+fe[0].length):-1}function q(xe,Ue,Ie){return R(xe,t,Ue,Ie)}function F(xe,Ue,Ie){return R(xe,n,Ue,Ie)}function D(xe,Ue,Ie){return R(xe,i,Ue,Ie)}function I(xe){return s[xe.getDay()]}function Y(xe){return a[xe.getDay()]}function K(xe){return l[xe.getMonth()]}function N(xe){return o[xe.getMonth()]}function W(xe){return r[+(xe.getHours()>=12)]}function ne(xe){return 1+~~(xe.getMonth()/3)}function se(xe){return s[xe.getUTCDay()]}function ye(xe){return a[xe.getUTCDay()]}function Se(xe){return l[xe.getUTCMonth()]}function $e(xe){return o[xe.getUTCMonth()]}function Ht(xe){return r[+(xe.getUTCHours()>=12)]}function nt(xe){return 1+~~(xe.getUTCMonth()/3)}return{format:function(xe){var Ue=k(xe+="",A);return Ue.toString=function(){return xe},Ue},parse:function(xe){var Ue=M(xe+="",!1);return Ue.toString=function(){return xe},Ue},utcFormat:function(xe){var Ue=k(xe+="",$);return Ue.toString=function(){return xe},Ue},utcParse:function(xe){var Ue=M(xe+="",!0);return Ue.toString=function(){return xe},Ue}}}var KN={"-":"",_:" ",0:"0"},Cn=/^\s*\d+/,lQ=/^%/,cQ=/[\\^$*+?|[\]().{}]/g;function ot(e,t,n){var i=e<0?"-":"",r=(i?-e:e)+"",a=r.length;return i+(a<n?new Array(n-a+1).join(t)+r:r)}function fQ(e){return e.replace(cQ,"\\$&")}function Vh(e){return new RegExp("^(?:"+e.map(fQ).join("|")+")","i")}function Wh(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function dQ(e,t,n){var i=Cn.exec(t.slice(n,n+1));return i?(e.w=+i[0],n+i[0].length):-1}function hQ(e,t,n){var i=Cn.exec(t.slice(n,n+1));return i?(e.u=+i[0],n+i[0].length):-1}function gQ(e,t,n){var i=Cn.exec(t.slice(n,n+2));return i?(e.U=+i[0],n+i[0].length):-1}function pQ(e,t,n){var i=Cn.exec(t.slice(n,n+2));return i?(e.V=+i[0],n+i[0].length):-1}function mQ(e,t,n){var i=Cn.exec(t.slice(n,n+2));return i?(e.W=+i[0],n+i[0].length):-1}function JN(e,t,n){var i=Cn.exec(t.slice(n,n+4));return i?(e.y=+i[0],n+i[0].length):-1}function e5(e,t,n){var i=Cn.exec(t.slice(n,n+2));return i?(e.y=+i[0]+(+i[0]>68?1900:2e3),n+i[0].length):-1}function yQ(e,t,n){var i=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return i?(e.Z=i[1]?0:-(i[2]+(i[3]||"00")),n+i[0].length):-1}function vQ(e,t,n){var i=Cn.exec(t.slice(n,n+1));return i?(e.q=i[0]*3-3,n+i[0].length):-1}function bQ(e,t,n){var i=Cn.exec(t.slice(n,n+2));return i?(e.m=i[0]-1,n+i[0].length):-1}function t5(e,t,n){var i=Cn.exec(t.slice(n,n+2));return i?(e.d=+i[0],n+i[0].length):-1}function xQ(e,t,n){var i=Cn.exec(t.slice(n,n+3));return i?(e.m=0,e.d=+i[0],n+i[0].length):-1}function n5(e,t,n){var i=Cn.exec(t.slice(n,n+2));return i?(e.H=+i[0],n+i[0].length):-1}function EQ(e,t,n){var i=Cn.exec(t.slice(n,n+2));return i?(e.M=+i[0],n+i[0].length):-1}function SQ(e,t,n){var i=Cn.exec(t.slice(n,n+2));return i?(e.S=+i[0],n+i[0].length):-1}function _Q(e,t,n){var i=Cn.exec(t.slice(n,n+3));return i?(e.L=+i[0],n+i[0].length):-1}function wQ(e,t,n){var i=Cn.exec(t.slice(n,n+6));return i?(e.L=Math.floor(i[0]/1e3),n+i[0].length):-1}function AQ(e,t,n){var i=lQ.exec(t.slice(n,n+1));return i?n+i[0].length:-1}function $Q(e,t,n){var i=Cn.exec(t.slice(n));return i?(e.Q=+i[0],n+i[0].length):-1}function CQ(e,t,n){var i=Cn.exec(t.slice(n));return i?(e.s=+i[0],n+i[0].length):-1}function i5(e,t){return ot(e.getDate(),t,2)}function TQ(e,t){return ot(e.getHours(),t,2)}function MQ(e,t){return ot(e.getHours()%12||12,t,2)}function kQ(e,t){return ot(1+Ps.count(ja(e),e),t,3)}function R9(e,t){return ot(e.getMilliseconds(),t,3)}function OQ(e,t){return R9(e,t)+"000"}function DQ(e,t){return ot(e.getMonth()+1,t,2)}function RQ(e,t){return ot(e.getMinutes(),t,2)}function NQ(e,t){return ot(e.getSeconds(),t,2)}function zQ(e){var t=e.getDay();return t===0?7:t}function FQ(e,t){return ot(wd.count(ja(e)-1,e),t,2)}function N9(e){var t=e.getDay();return t>=4||t===0?Bf(e):Bf.ceil(e)}function LQ(e,t){return e=N9(e),ot(Bf.count(ja(e),e)+(ja(e).getDay()===4),t,2)}function UQ(e){return e.getDay()}function BQ(e,t){return ot(ry.count(ja(e)-1,e),t,2)}function IQ(e,t){return ot(e.getFullYear()%100,t,2)}function PQ(e,t){return e=N9(e),ot(e.getFullYear()%100,t,2)}function qQ(e,t){return ot(e.getFullYear()%1e4,t,4)}function jQ(e,t){var n=e.getDay();return e=n>=4||n===0?Bf(e):Bf.ceil(e),ot(e.getFullYear()%1e4,t,4)}function HQ(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+ot(t/60|0,"0",2)+ot(t%60,"0",2)}function r5(e,t){return ot(e.getUTCDate(),t,2)}function GQ(e,t){return ot(e.getUTCHours(),t,2)}function YQ(e,t){return ot(e.getUTCHours()%12||12,t,2)}function XQ(e,t){return ot(1+eu.count(Ha(e),e),t,3)}function z9(e,t){return ot(e.getUTCMilliseconds(),t,3)}function VQ(e,t){return z9(e,t)+"000"}function WQ(e,t){return ot(e.getUTCMonth()+1,t,2)}function QQ(e,t){return ot(e.getUTCMinutes(),t,2)}function ZQ(e,t){return ot(e.getUTCSeconds(),t,2)}function KQ(e){var t=e.getUTCDay();return t===0?7:t}function JQ(e,t){return ot(Ad.count(Ha(e)-1,e),t,2)}function F9(e){var t=e.getUTCDay();return t>=4||t===0?If(e):If.ceil(e)}function eZ(e,t){return e=F9(e),ot(If.count(Ha(e),e)+(Ha(e).getUTCDay()===4),t,2)}function tZ(e){return e.getUTCDay()}function nZ(e,t){return ot(ay.count(Ha(e)-1,e),t,2)}function iZ(e,t){return ot(e.getUTCFullYear()%100,t,2)}function rZ(e,t){return e=F9(e),ot(e.getUTCFullYear()%100,t,2)}function aZ(e,t){return ot(e.getUTCFullYear()%1e4,t,4)}function sZ(e,t){var n=e.getUTCDay();return e=n>=4||n===0?If(e):If.ceil(e),ot(e.getUTCFullYear()%1e4,t,4)}function oZ(){return"+0000"}function a5(){return"%"}function s5(e){return+e}function o5(e){return Math.floor(+e/1e3)}var rf,M$,L9,k$,U9;uZ({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function uZ(e){return rf=D9(e),M$=rf.format,L9=rf.parse,k$=rf.utcFormat,U9=rf.utcParse,rf}function _g(e){const t={};return n=>t[n]||(t[n]=e(n))}function lZ(e,t){return n=>{const i=e(n),r=i.indexOf(t);if(r<0)return i;let a=cZ(i,r);const s=a<i.length?i.slice(a):"";for(;--a>r;)if(i[a]!=="0"){++a;break}return i.slice(0,a)+s}}function cZ(e,t){let n=e.lastIndexOf("e"),i;if(n>0)return n;for(n=e.length;--n>t;)if(i=e.charCodeAt(n),i>=48&&i<=57)return n+1}function B9(e){const t=_g(e.format),n=e.formatPrefix;return{format:t,formatPrefix:n,formatFloat(i){const r=Dl(i||",");if(r.precision==null){switch(r.precision=12,r.type){case"%":r.precision-=2;break;case"e":r.precision-=1;break}return lZ(t(r),t(".1f")(1)[1])}else return t(r)},formatSpan(i,r,a,s){s=Dl(s??",f");const o=su(i,r,a),l=Math.max(Math.abs(i),Math.abs(r));let f;if(s.precision==null)switch(s.type){case"s":return isNaN(f=l9(o,l))||(s.precision=f),n(s,l);case"":case"e":case"g":case"p":case"r":{isNaN(f=c9(o,l))||(s.precision=f-(s.type==="e"));break}case"f":case"%":{isNaN(f=u9(o))||(s.precision=f-(s.type==="%")*2);break}}return t(s)}}}let iw;I9();function I9(){return iw=B9({format:Rv,formatPrefix:w$})}function P9(e){return B9(o9(e))}function sy(e){return arguments.length?iw=P9(e):iw}function u5(e,t,n){n=n||{},be(n)||te(`Invalid time multi-format specifier: ${n}`);const i=t(Dr),r=t(ur),a=t(or),s=t(Ni),o=t(ln),l=t(Jn),f=t(Ri),d=t(Un),g=e(n[aa]||".%L"),p=e(n[Dr]||":%S"),y=e(n[ur]||"%I:%M"),v=e(n[or]||"%I %p"),b=e(n[Ni]||n[Wn]||"%a %d"),E=e(n[ln]||"%b %d"),_=e(n[Jn]||"%B"),w=e(n[Ri]||"%B"),A=e(n[Un]||"%Y");return $=>(i($)<$?g:r($)<$?p:a($)<$?y:s($)<$?v:l($)<$?o($)<$?b:E:d($)<$?f($)<$?_:w:A)($)}function q9(e){const t=_g(e.format),n=_g(e.utcFormat);return{timeFormat:i=>ve(i)?t(i):u5(t,$d,i),utcFormat:i=>ve(i)?n(i):u5(n,Cd,i),timeParse:_g(e.parse),utcParse:_g(e.utcParse)}}let rw;j9();function j9(){return rw=q9({format:M$,parse:L9,utcFormat:k$,utcParse:U9})}function H9(e){return q9(D9(e))}function np(e){return arguments.length?rw=H9(e):rw}const aw=(e,t)=>Pe({},e,t);function G9(e,t){const n=e?P9(e):sy(),i=t?H9(t):np();return aw(n,i)}function O$(e,t){const n=arguments.length;return n&&n!==2&&te("defaultLocale expects either zero or two arguments."),n?aw(sy(e),np(t)):aw(sy(),np())}function fZ(){return I9(),j9(),O$()}const dZ=/^(data:|([A-Za-z]+:)?\/\/)/,hZ=/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp|file|data):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,gZ=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,l5="file://";function pZ(e,t){return n=>({options:n||{},sanitize:yZ,load:mZ,fileAccess:!1,file:vZ(),http:xZ(e)})}async function mZ(e,t){const n=await this.sanitize(e,t),i=n.href;return n.localFile?this.file(i):this.http(i,t)}async function yZ(e,t){t=Pe({},this.options,t);const n=this.fileAccess,i={href:null};let r,a,s;const o=hZ.test(e.replace(gZ,""));(e==null||typeof e!="string"||!o)&&te("Sanitize failure, invalid URI: "+ge(e));const l=dZ.test(e);return(s=t.baseURL)&&!l&&(!e.startsWith("/")&&!s.endsWith("/")&&(e="/"+e),e=s+e),a=(r=e.startsWith(l5))||t.mode==="file"||t.mode!=="http"&&!l&&n,r?e=e.slice(l5.length):e.startsWith("//")&&(t.defaultProtocol==="file"?(e=e.slice(2),a=!0):e=(t.defaultProtocol||"http")+":"+e),Object.defineProperty(i,"localFile",{value:!!a}),i.href=e,t.target&&(i.target=t.target+""),t.rel&&(i.rel=t.rel+""),t.context==="image"&&t.crossOrigin&&(i.crossOrigin=t.crossOrigin+""),i}function vZ(e){return bZ}async function bZ(){te("No file system access.")}function xZ(e){return e?async function(t,n){const i=Pe({},this.options.http,n),r=n&&n.response,a=await e(t,i);return a.ok?qe(a[r])?a[r]():a.text():te(a.status+""+a.statusText)}:EZ}async function EZ(){te("No HTTP fetch method available.")}const SZ=e=>e!=null&&e===e,_Z=e=>e==="true"||e==="false"||e===!0||e===!1,wZ=e=>!Number.isNaN(Date.parse(e)),Y9=e=>!Number.isNaN(+e)&&!(e instanceof Date),AZ=e=>Y9(e)&&Number.isInteger(+e),sw={boolean:x$,integer:Qn,number:Qn,date:E$,string:S$,unknown:ni},Im=[_Z,AZ,Y9,wZ],$Z=["boolean","integer","number","date"];function X9(e,t){if(!e||!e.length)return"unknown";const n=e.length,i=Im.length,r=Im.map((a,s)=>s+1);for(let a=0,s=0,o,l;a<n;++a)for(l=t?e[a][t]:e[a],o=0;o<i;++o)if(r[o]&&SZ(l)&&!Im[o](l)&&(r[o]=0,++s,s===Im.length))return"string";return $Z[r.reduce((a,s)=>a===0?s:a,0)-1]}function V9(e,t){return t.reduce((n,i)=>(n[i]=X9(e,i),n),{})}function c5(e){const t=function(n,i){const r={delimiter:e};return D$(n,i?Pe(i,r):r)};return t.responseType="text",t}function D$(e,t){return t.header&&(e=t.header.map(ge).join(t.delimiter)+`
`+e),sW(t.delimiter).parse(e+"")}D$.responseType="text";function CZ(e){return typeof Buffer=="function"&&qe(Buffer.isBuffer)?Buffer.isBuffer(e):!1}function R$(e,t){const n=t&&t.property?kr(t.property):ni;return be(e)&&!CZ(e)?TZ(n(e),t):n(JSON.parse(e))}R$.responseType="json";function TZ(e,t){return!re(e)&&PF(e)&&(e=[...e]),t&&t.copy?JSON.parse(JSON.stringify(e)):e}const MZ={interior:(e,t)=>e!==t,exterior:(e,t)=>e===t};function W9(e,t){let n,i,r,a;return e=R$(e,t),t&&t.feature?(n=cW,r=t.feature):t&&t.mesh?(n=dW,r=t.mesh,a=MZ[t.filter]):te("Missing TopoJSON feature or mesh parameter."),i=(i=e.objects[r])?n(e,i,a):te("Invalid TopoJSON object: "+r),i&&i.features||[i]}W9.responseType="json";const $1={dsv:D$,csv:c5(","),tsv:c5("	"),json:R$,topojson:W9};function N$(e,t){return arguments.length>1?($1[e]=t,this):_e($1,e)?$1[e]:null}function Q9(e){const t=N$(e);return t&&t.responseType||"text"}function Z9(e,t,n,i){t=t||{};const r=N$(t.type||"json");return r||te("Unknown data format type: "+t.type),e=r(e,t),t.parse&&kZ(e,t.parse,n,i),_e(e,"columns")&&delete e.columns,e}function kZ(e,t,n,i){if(!e.length)return;const r=np();n=n||r.timeParse,i=i||r.utcParse;let a=e.columns||Object.keys(e[0]),s,o,l,f,d,g;t==="auto"&&(t=V9(e,a)),a=Object.keys(t);const p=a.map(y=>{const v=t[y];let b,E;if(v&&(v.startsWith("date:")||v.startsWith("utc:")))return b=v.split(/:(.+)?/,2),E=b[1],(E[0]==="'"&&E[E.length-1]==="'"||E[0]==='"'&&E[E.length-1]==='"')&&(E=E.slice(1,-1)),(b[0]==="utc"?i:n)(E);if(!sw[v])throw Error("Illegal format pattern: "+y+":"+v);return sw[v]});for(l=0,d=e.length,g=a.length;l<d;++l)for(s=e[l],f=0;f<g;++f)o=a[f],s[o]=p[f](s[o])}const Bv=pZ(typeof fetch<"u"&&fetch);function Iv(e){const t=e||ni,n=[],i={};return n.add=r=>{const a=t(r);return i[a]||(i[a]=1,n.push(r)),n},n.remove=r=>{const a=t(r);if(i[a]){i[a]=0;const s=n.indexOf(r);s>=0&&n.splice(s,1)}return n},n}async function C1(e,t){try{await t(e)}catch(n){e.error(n)}}const K9=Symbol("vega_id");let OZ=1;function Pv(e){return!!(e&&ke(e))}function ke(e){return e[K9]}function J9(e,t){return e[K9]=t,e}function ct(e){const t=e===Object(e)?e:{data:e};return ke(t)?t:J9(t,OZ++)}function z$(e){return qv(e,ct({}))}function qv(e,t){for(const n in e)t[n]=e[n];return t}function e7(e,t){return J9(t,ke(e))}function nc(e,t){return e?t?(n,i)=>e(n,i)||ke(t(n))-ke(t(i)):(n,i)=>e(n,i)||ke(n)-ke(i):null}function t7(e){return e&&e.constructor===ic}function ic(){const e=[],t=[],n=[],i=[],r=[];let a=null,s=!1;return{constructor:ic,insert(o){const l=Ee(o),f=l.length;for(let d=0;d<f;++d)e.push(l[d]);return this},remove(o){const l=qe(o)?i:t,f=Ee(o),d=f.length;for(let g=0;g<d;++g)l.push(f[g]);return this},modify(o,l,f){const d={field:l,value:ii(f)};return qe(o)?(d.filter=o,r.push(d)):(d.tuple=o,n.push(d)),this},encode(o,l){return qe(o)?r.push({filter:o,field:l}):n.push({tuple:o,field:l}),this},clean(o){return a=o,this},reflow(){return s=!0,this},pulse(o,l){const f={},d={};let g,p,y,v,b,E;for(g=0,p=l.length;g<p;++g)f[ke(l[g])]=1;for(g=0,p=t.length;g<p;++g)b=t[g],f[ke(b)]=-1;for(g=0,p=i.length;g<p;++g)v=i[g],l.forEach(w=>{v(w)&&(f[ke(w)]=-1)});for(g=0,p=e.length;g<p;++g)b=e[g],E=ke(b),f[E]?f[E]=1:o.add.push(ct(e[g]));for(g=0,p=l.length;g<p;++g)b=l[g],f[ke(b)]<0&&o.rem.push(b);function _(w,A,$){$?w[A]=$(w):o.encode=A,s||(d[ke(w)]=w)}for(g=0,p=n.length;g<p;++g)y=n[g],b=y.tuple,v=y.field,E=f[ke(b)],E>0&&(_(b,v,y.value),o.modifies(v));for(g=0,p=r.length;g<p;++g)y=r[g],v=y.filter,l.forEach(w=>{v(w)&&f[ke(w)]>0&&_(w,y.field,y.value)}),o.modifies(y.field);if(s)o.mod=t.length||i.length?l.filter(w=>f[ke(w)]>0):l.slice();else for(E in d)o.mod.push(d[E]);return(a||a==null&&(t.length||i.length))&&o.clean(!0),o}}}const T1="_:mod:_";function jv(){Object.defineProperty(this,T1,{writable:!0,value:{}})}jv.prototype={set(e,t,n,i){const r=this,a=r[e],s=r[T1];return t!=null&&t>=0?(a[t]!==n||i)&&(a[t]=n,s[t+":"+e]=-1,s[e]=-1):(a!==n||i)&&(r[e]=n,s[e]=re(n)?1+n.length:-1),r},modified(e,t){const n=this[T1];if(arguments.length){if(re(e)){for(let i=0;i<e.length;++i)if(n[e[i]])return!0;return!1}}else{for(const i in n)if(n[i])return!0;return!1}return t!=null&&t>=0?t+1<n[e]||!!n[t+":"+e]:!!n[e]},clear(){return this[T1]={},this}};let DZ=0;const RZ="pulse",NZ=new jv,zZ=1,FZ=2;function wt(e,t,n,i){this.id=++DZ,this.value=e,this.stamp=-1,this.rank=-1,this.qrank=-1,this.flags=0,t&&(this._update=t),n&&this.parameters(n,i)}function f5(e){return function(t){const n=this.flags;return arguments.length===0?!!(n&e):(this.flags=t?n|e:n&~e,this)}}wt.prototype={targets(){return this._targets||(this._targets=Iv(Op))},set(e){return this.value!==e?(this.value=e,1):0},skip:f5(zZ),modified:f5(FZ),parameters(e,t,n){t=t!==!1;const i=this._argval=this._argval||new jv,r=this._argops=this._argops||[],a=[];let s,o,l,f;const d=(g,p,y)=>{y instanceof wt?(y!==this&&(t&&y.targets().add(this),a.push(y)),r.push({op:y,name:g,index:p})):i.set(g,p,y)};for(s in e)if(o=e[s],s===RZ)Ee(o).forEach(g=>{g instanceof wt?g!==this&&(g.targets().add(this),a.push(g)):te("Pulse parameters must be operator instances.")}),this.source=o;else if(re(o))for(i.set(s,-1,Array(l=o.length)),f=0;f<l;++f)d(s,f,o[f]);else d(s,-1,o);return this.marshall().clear(),n&&(r.initonly=!0),a},marshall(e){const t=this._argval||NZ,n=this._argops;let i,r,a,s;if(n){const o=n.length;for(r=0;r<o;++r)i=n[r],a=i.op,s=a.modified()&&a.stamp===e,t.set(i.name,i.index,a.value,s);if(n.initonly){for(r=0;r<o;++r)i=n[r],i.op.targets().remove(this);this._argops=null,this._update=null}}return t},detach(){const e=this._argops;let t,n,i,r;if(e)for(t=0,n=e.length;t<n;++t)i=e[t],r=i.op,r._targets&&r._targets.remove(this);this.pulse=null,this.source=null},evaluate(e){const t=this._update;if(t){const n=this.marshall(e.stamp),i=t.call(this,n,e);if(n.clear(),i!==this.value)this.value=i;else if(!this.modified())return e.StopPropagation}},run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?(this.skip(!1),t=0):t=this.evaluate(e),this.pulse=t||e}};function LZ(e,t,n,i){let r=1,a;return e instanceof wt?a=e:e&&e.prototype instanceof wt?a=new e:qe(e)?a=new wt(null,e):(r=0,a=new wt(e,t)),this.rank(a),r&&(i=n,n=t),n&&this.connect(a,a.parameters(n,i)),this.touch(a),a}function UZ(e,t){const n=e.rank,i=t.length;for(let r=0;r<i;++r)if(n<t[r].rank){this.rerank(e);return}}let BZ=0;function Hv(e,t,n){this.id=++BZ,this.value=null,n&&(this.receive=n),e&&(this._filter=e),t&&(this._apply=t)}function Fo(e,t,n){return new Hv(e,t,n)}Hv.prototype={_filter:Or,_apply:ni,targets(){return this._targets||(this._targets=Iv(Op))},consume(e){return arguments.length?(this._consume=!!e,this):!!this._consume},receive(e){if(this._filter(e)){const t=this.value=this._apply(e),n=this._targets,i=n?n.length:0;for(let r=0;r<i;++r)n[r].receive(t);this._consume&&(e.preventDefault(),e.stopPropagation())}},filter(e){const t=Fo(e);return this.targets().add(t),t},apply(e){const t=Fo(null,e);return this.targets().add(t),t},merge(){const e=Fo();this.targets().add(e);for(let t=0,n=arguments.length;t<n;++t)arguments[t].targets().add(e);return e},throttle(e){let t=-1;return this.filter(()=>{const n=Date.now();return n-t>e?(t=n,1):0})},debounce(e){const t=Fo();return this.targets().add(Fo(null,null,y$(e,n=>{const i=n.dataflow;t.receive(n),i&&i.run&&i.run()}))),t},between(e,t){let n=!1;return e.targets().add(Fo(null,null,()=>n=!0)),t.targets().add(Fo(null,null,()=>n=!1)),this.filter(()=>n)},detach(){this._filter=Or,this._targets=null}};function IZ(e,t,n,i){const r=this,a=Fo(n,i),s=function(f){f.dataflow=r;try{a.receive(f)}catch(d){r.error(d)}finally{r.run()}};let o;typeof e=="string"&&typeof document<"u"?o=document.querySelectorAll(e):o=Ee(e);const l=o.length;for(let f=0;f<l;++f)o[f].addEventListener(t,s);return a}function PZ(e,t){const n=this.locale();return Z9(e,t,n.timeParse,n.utcParse)}function qZ(e,t,n){return t=this.parse(t,n),this.pulse(e,this.changeset().insert(t))}async function jZ(e,t){const n=this;let i=0,r;try{r=await n.loader().load(e,{context:"dataflow",response:Q9(t&&t.type)});try{r=n.parse(r,t)}catch(a){i=-2,n.warn("Data ingestion failed",e,a)}}catch(a){i=-1,n.warn("Loading failed",e,a)}return{data:r,status:i}}async function HZ(e,t,n){const i=this,r=i._pending||GZ(i);r.requests+=1;const a=await i.request(t,n);return i.pulse(e,i.changeset().remove(Or).insert(a.data||[])),r.done(),a}function GZ(e){let t;const n=new Promise(i=>t=i);return n.requests=0,n.done=()=>{--n.requests===0&&(e._pending=null,t(e))},e._pending=n}const YZ={skip:!0};function XZ(e,t,n,i,r){return(e instanceof wt?WZ:VZ)(this,e,t,n,i,r),this}function VZ(e,t,n,i,r,a){const s=Pe({},a,YZ);let o,l;qe(n)||(n=ii(n)),i===void 0?o=f=>e.touch(n(f)):qe(i)?(l=new wt(null,i,r,!1),o=f=>{l.evaluate(f);const d=n(f),g=l.value;t7(g)?e.pulse(d,g,a):e.update(d,g,s)}):o=f=>e.update(n(f),i,s),t.apply(o)}function WZ(e,t,n,i,r,a){if(i===void 0)t.targets().add(n);else{const s=a||{},o=new wt(null,QZ(n,i),r,!1);o.modified(s.force),o.rank=t.rank,t.targets().add(o),n&&(o.skip(!0),o.value=n.value,o.targets().add(n),e.connect(n,[o]))}}function QZ(e,t){return t=qe(t)?t:ii(t),e?function(n,i){const r=t(n,i);return e.skip()||(e.skip(r!==this.value).value=r),r}:t}function ZZ(e){e.rank=++this._rank}function KZ(e){const t=[e];let n,i,r;for(;t.length;)if(this.rank(n=t.pop()),i=n._targets)for(r=i.length;--r>=0;)t.push(n=i[r]),n===e&&te("Cycle detected in dataflow graph.")}const oy={},Ta=1,Bo=2,Ms=4,JZ=Ta|Bo,d5=Ta|Ms,af=Ta|Bo|Ms,h5=8,Qh=16,g5=32,p5=64;function tu(e,t,n){this.dataflow=e,this.stamp=t??-1,this.add=[],this.rem=[],this.mod=[],this.fields=null,this.encode=n||null}function fS(e,t){const n=[];return Uo(e,t,i=>n.push(i)),n}function m5(e,t){const n={};return e.visit(t,i=>{n[ke(i)]=1}),i=>n[ke(i)]?null:i}function Pm(e,t){return e?(n,i)=>e(n,i)&&t(n,i):t}tu.prototype={StopPropagation:oy,ADD:Ta,REM:Bo,MOD:Ms,ADD_REM:JZ,ADD_MOD:d5,ALL:af,REFLOW:h5,SOURCE:Qh,NO_SOURCE:g5,NO_FIELDS:p5,fork(e){return new tu(this.dataflow).init(this,e)},clone(){const e=this.fork(af);return e.add=e.add.slice(),e.rem=e.rem.slice(),e.mod=e.mod.slice(),e.source&&(e.source=e.source.slice()),e.materialize(af|Qh)},addAll(){let e=this;return!e.source||e.add===e.rem||!e.rem.length&&e.source.length===e.add.length||(e=new tu(this.dataflow).init(this),e.add=e.source,e.rem=[]),e},init(e,t){const n=this;return n.stamp=e.stamp,n.encode=e.encode,e.fields&&!(t&p5)&&(n.fields=e.fields),t&Ta?(n.addF=e.addF,n.add=e.add):(n.addF=null,n.add=[]),t&Bo?(n.remF=e.remF,n.rem=e.rem):(n.remF=null,n.rem=[]),t&Ms?(n.modF=e.modF,n.mod=e.mod):(n.modF=null,n.mod=[]),t&g5?(n.srcF=null,n.source=null):(n.srcF=e.srcF,n.source=e.source,e.cleans&&(n.cleans=e.cleans)),n},runAfter(e){this.dataflow.runAfter(e)},changed(e){const t=e||af;return t&Ta&&this.add.length||t&Bo&&this.rem.length||t&Ms&&this.mod.length},reflow(e){if(e)return this.fork(af).reflow();const t=this.add.length,n=this.source&&this.source.length;return n&&n!==t&&(this.mod=this.source,t&&this.filter(Ms,m5(this,Ta))),this},clean(e){return arguments.length?(this.cleans=!!e,this):this.cleans},modifies(e){const t=this.fields||(this.fields={});return re(e)?e.forEach(n=>t[n]=!0):t[e]=!0,this},modified(e,t){const n=this.fields;return(t||this.mod.length)&&n?arguments.length?re(e)?e.some(i=>n[i]):n[e]:!!n:!1},filter(e,t){const n=this;return e&Ta&&(n.addF=Pm(n.addF,t)),e&Bo&&(n.remF=Pm(n.remF,t)),e&Ms&&(n.modF=Pm(n.modF,t)),e&Qh&&(n.srcF=Pm(n.srcF,t)),n},materialize(e){e=e||af;const t=this;return e&Ta&&t.addF&&(t.add=fS(t.add,t.addF),t.addF=null),e&Bo&&t.remF&&(t.rem=fS(t.rem,t.remF),t.remF=null),e&Ms&&t.modF&&(t.mod=fS(t.mod,t.modF),t.modF=null),e&Qh&&t.srcF&&(t.source=t.source.filter(t.srcF),t.srcF=null),t},visit(e,t){const n=this,i=t;if(e&Qh)return Uo(n.source,n.srcF,i),n;e&Ta&&Uo(n.add,n.addF,i),e&Bo&&Uo(n.rem,n.remF,i),e&Ms&&Uo(n.mod,n.modF,i);const r=n.source;if(e&h5&&r){const a=n.add.length+n.mod.length;a===r.length||(a?Uo(r,m5(n,d5),i):Uo(r,n.srcF,i))}return n}};function F$(e,t,n,i){const r=this;let a=0;this.dataflow=e,this.stamp=t,this.fields=null,this.encode=i||null,this.pulses=n;for(const s of n)if(s.stamp===t){if(s.fields){const o=r.fields||(r.fields={});for(const l in s.fields)o[l]=1}s.changed(r.ADD)&&(a|=r.ADD),s.changed(r.REM)&&(a|=r.REM),s.changed(r.MOD)&&(a|=r.MOD)}this.changes=a}pe(F$,tu,{fork(e){const t=new tu(this.dataflow).init(this,e&this.NO_FIELDS);return e!==void 0&&(e&t.ADD&&this.visit(t.ADD,n=>t.add.push(n)),e&t.REM&&this.visit(t.REM,n=>t.rem.push(n)),e&t.MOD&&this.visit(t.MOD,n=>t.mod.push(n))),t},changed(e){return this.changes&e},modified(e){const t=this,n=t.fields;return n&&t.changes&t.MOD?re(e)?e.some(i=>n[i]):n[e]:0},filter(){te("MultiPulse does not support filtering.")},materialize(){te("MultiPulse does not support materialization.")},visit(e,t){const n=this,i=n.pulses,r=i.length;let a=0;if(e&n.SOURCE)for(;a<r;++a)i[a].visit(e,t);else for(;a<r;++a)i[a].stamp===n.stamp&&i[a].visit(e,t);return n}});async function eK(e,t,n){const i=this,r=[];if(i._pulse)return n7(i);if(i._pending&&await i._pending,t&&await C1(i,t),!i._touched.length)return i.debug("Dataflow invoked, but nothing to do."),i;const a=++i._clock;i._pulse=new tu(i,a,e),i._touched.forEach(d=>i._enqueue(d,!0)),i._touched=Iv(Op);let s=0,o,l,f;try{for(;i._heap.size()>0;){if(o=i._heap.pop(),o.rank!==o.qrank){i._enqueue(o,!0);continue}l=o.run(i._getPulse(o,e)),l.then?l=await l:l.async&&(r.push(l.async),l=oy),l!==oy&&o._targets&&o._targets.forEach(d=>i._enqueue(d)),++s}}catch(d){i._heap.clear(),f=d}if(i._input={},i._pulse=null,i.debug(`Pulse ${a}: ${s} operators`),f&&(i._postrun=[],i.error(f)),i._postrun.length){const d=i._postrun.sort((g,p)=>p.priority-g.priority);i._postrun=[];for(let g=0;g<d.length;++g)await C1(i,d[g].callback)}return n&&await C1(i,n),r.length&&Promise.all(r).then(d=>i.runAsync(null,()=>{d.forEach(g=>{try{g(i)}catch(p){i.error(p)}})})),i}async function tK(e,t,n){for(;this._running;)await this._running;const i=()=>this._running=null;return(this._running=this.evaluate(e,t,n)).then(i,i),this._running}function nK(e,t,n){return this._pulse?n7(this):(this.evaluate(e,t,n),this)}function iK(e,t,n){if(this._pulse||t)this._postrun.push({priority:n||0,callback:e});else try{e(this)}catch(i){this.error(i)}}function n7(e){return e.error("Dataflow already running. Use runAsync() to chain invocations."),e}function rK(e,t){const n=e.stamp<this._clock;n&&(e.stamp=this._clock),(n||t)&&(e.qrank=e.rank,this._heap.push(e))}function aK(e,t){const n=e.source,i=this._clock;return n&&re(n)?new F$(this,i,n.map(r=>r.pulse),t):this._input[e.id]||sK(this._pulse,n&&n.pulse)}function sK(e,t){return t&&t.stamp===e.stamp?t:(e=e.fork(),t&&t!==oy&&(e.source=t.source),e)}const L$={skip:!1,force:!1};function oK(e,t){const n=t||L$;return this._pulse?this._enqueue(e):this._touched.add(e),n.skip&&e.skip(!0),this}function uK(e,t,n){const i=n||L$;return(e.set(t)||i.force)&&this.touch(e,i),this}function lK(e,t,n){this.touch(e,n||L$);const i=new tu(this,this._clock+(this._pulse?0:1)),r=e.pulse&&e.pulse.source||[];return i.target=e,this._input[e.id]=t.pulse(i,r),this}function cK(e){let t=[];return{clear:()=>t=[],size:()=>t.length,peek:()=>t[0],push:n=>(t.push(n),i7(t,0,t.length-1,e)),pop:()=>{const n=t.pop();let i;return t.length?(i=t[0],t[0]=n,fK(t,0,e)):i=n,i}}}function i7(e,t,n,i){let r,a;const s=e[n];for(;n>t;){if(a=n-1>>1,r=e[a],i(s,r)<0){e[n]=r,n=a;continue}break}return e[n]=s}function fK(e,t,n){const i=t,r=e.length,a=e[t];let s=(t<<1)+1,o;for(;s<r;)o=s+1,o<r&&n(e[s],e[o])>=0&&(s=o),e[t]=e[s],t=s,s=(t<<1)+1;return e[t]=a,i7(e,i,t,n)}function $f(){this.logger(d$()),this.logLevel(c$),this._clock=0,this._rank=0,this._locale=O$();try{this._loader=Bv()}catch{}this._touched=Iv(Op),this._input={},this._pulse=null,this._heap=cK((e,t)=>e.qrank-t.qrank),this._postrun=[]}function Zh(e){return function(){return this._log[e].apply(this,arguments)}}$f.prototype={stamp(){return this._clock},loader(e){return arguments.length?(this._loader=e,this):this._loader},locale(e){return arguments.length?(this._locale=e,this):this._locale},logger(e){return arguments.length?(this._log=e,this):this._log},error:Zh("error"),warn:Zh("warn"),info:Zh("info"),debug:Zh("debug"),logLevel:Zh("level"),cleanThreshold:1e4,add:LZ,connect:UZ,rank:ZZ,rerank:KZ,pulse:lK,touch:oK,update:uK,changeset:ic,ingest:qZ,parse:PZ,preload:HZ,request:jZ,events:IZ,on:XZ,evaluate:eK,run:nK,runAsync:tK,runAfter:iK,_enqueue:rK,_getPulse:aK};function J(e,t){wt.call(this,e,null,t)}pe(J,wt,{run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?this.skip(!1):t=this.evaluate(e),t=t||e,t.then?t=t.then(n=>this.pulse=n):t!==e.StopPropagation&&(this.pulse=t),t},evaluate(e){const t=this.marshall(e.stamp),n=this.transform(t,e);return t.clear(),n},transform(){}});const qf={};function r7(e){const t=a7(e);return t&&t.Definition||null}function a7(e){return e=e&&e.toLowerCase(),_e(qf,e)?qf[e]:null}function*s7(e,t){if(t==null)for(let n of e)n!=null&&n!==""&&(n=+n)>=n&&(yield n);else{let n=-1;for(let i of e)i=t(i,++n,e),i!=null&&i!==""&&(i=+i)>=i&&(yield i)}}function U$(e,t,n){const i=Float64Array.from(s7(e,n));return i.sort(Is),t.map(r=>n9(i,r))}function B$(e,t){return U$(e,[.25,.5,.75],t)}function I$(e,t){const n=e.length,i=xW(e,t),r=B$(e,t),a=(r[2]-r[0])/1.34;return 1.06*(Math.min(i,a)||i||Math.abs(r[0])||1)*Math.pow(n,-.2)}function o7(e){const t=e.maxbins||20,n=e.base||10,i=Math.log(n),r=e.divide||[5,2];let a=e.extent[0],s=e.extent[1],o,l,f,d,g,p;const y=e.span||s-a||Math.abs(a)||1;if(e.step)o=e.step;else if(e.steps){for(d=y/t,g=0,p=e.steps.length;g<p&&e.steps[g]<d;++g);o=e.steps[Math.max(0,g-1)]}else{for(l=Math.ceil(Math.log(t)/i),f=e.minstep||0,o=Math.max(f,Math.pow(n,Math.round(Math.log(y)/i)-l));Math.ceil(y/o)>t;)o*=n;for(g=0,p=r.length;g<p;++g)d=o/r[g],d>=f&&y/d<=t&&(o=d)}d=Math.log(o);const v=d>=0?0:~~(-d/i)+1,b=Math.pow(n,-v-1);return(e.nice||e.nice===void 0)&&(d=Math.floor(a/o+b)*o,a=a<d?d-o:d,s=Math.ceil(s/o)*o),{start:a,stop:s===a?a+o:s,step:o}}var Rr=Math.random;function dK(e){Rr=e}function u7(e,t,n,i){if(!e.length)return[void 0,void 0];const r=Float64Array.from(s7(e,i)),a=r.length,s=t;let o,l,f,d;for(f=0,d=Array(s);f<s;++f){for(o=0,l=0;l<a;++l)o+=r[~~(Rr()*a)];d[f]=o/a}return d.sort(Is),[Z_(d,n/2),Z_(d,1-n/2)]}function l7(e,t,n,i){i=i||(p=>p);const r=e.length,a=new Float64Array(r);let s=0,o=1,l=i(e[0]),f=l,d=l+t,g;for(;o<r;++o){if(g=i(e[o]),g>=d){for(f=(l+f)/2;s<o;++s)a[s]=f;d=g+t,l=g}f=g}for(f=(l+f)/2;s<o;++s)a[s]=f;return n?hK(a,t+t/4):a}function hK(e,t){const n=e.length;let i=0,r=1,a,s;for(;e[i]===e[r];)++r;for(;r<n;){for(a=r+1;e[r]===e[a];)++a;if(e[r]-e[r-1]<t){for(s=r+(i+a-r-r>>1);s<r;)e[s++]=e[r];for(;s>r;)e[s--]=e[i]}i=r,r=a}return e}function gK(e){return function(){return e=(1103515245*e+12345)%2147483647,e/2147483647}}function pK(e,t){t==null&&(t=e,e=0);let n,i,r;const a={min(s){return arguments.length?(n=s||0,r=i-n,a):n},max(s){return arguments.length?(i=s||0,r=i-n,a):i},sample(){return n+Math.floor(r*Rr())},pdf(s){return s===Math.floor(s)&&s>=n&&s<i?1/r:0},cdf(s){const o=Math.floor(s);return o<n?0:o>=i?1:(o-n+1)/r},icdf(s){return s>=0&&s<=1?n-1+Math.floor(s*r):NaN}};return a.min(e).max(t)}const c7=Math.sqrt(2*Math.PI),mK=Math.SQRT2;let Kh=NaN;function Gv(e,t){e=e||0,t=t??1;let n=0,i=0,r,a;if(Kh===Kh)n=Kh,Kh=NaN;else{do n=Rr()*2-1,i=Rr()*2-1,r=n*n+i*i;while(r===0||r>1);a=Math.sqrt(-2*Math.log(r)/r),n*=a,Kh=i*a}return e+n*t}function P$(e,t,n){n=n??1;const i=(e-(t||0))/n;return Math.exp(-.5*i*i)/(n*c7)}function Yv(e,t,n){t=t||0,n=n??1;const i=(e-t)/n,r=Math.abs(i);let a;if(r>37)a=0;else{const s=Math.exp(-r*r/2);let o;r<7.07106781186547?(o=.0352624965998911*r+.700383064443688,o=o*r+6.37396220353165,o=o*r+33.912866078383,o=o*r+112.079291497871,o=o*r+221.213596169931,o=o*r+220.206867912376,a=s*o,o=.0883883476483184*r+1.75566716318264,o=o*r+16.064177579207,o=o*r+86.7807322029461,o=o*r+296.564248779674,o=o*r+637.333633378831,o=o*r+793.826512519948,o=o*r+440.413735824752,a=a/o):(o=r+.65,o=r+4/o,o=r+3/o,o=r+2/o,o=r+1/o,a=s/o/2.506628274631)}return i>0?1-a:a}function Xv(e,t,n){return e<0||e>1?NaN:(t||0)+(n??1)*mK*yK(2*e-1)}function yK(e){let t=-Math.log((1-e)*(1+e)),n;return t<6.25?(t-=3.125,n=-364441206401782e-35,n=-16850591381820166e-35+n*t,n=128584807152564e-32+n*t,n=11157877678025181e-33+n*t,n=-1333171662854621e-31+n*t,n=20972767875968562e-33+n*t,n=6637638134358324e-30+n*t,n=-4054566272975207e-29+n*t,n=-8151934197605472e-29+n*t,n=26335093153082323e-28+n*t,n=-12975133253453532e-27+n*t,n=-5415412054294628e-26+n*t,n=10512122733215323e-25+n*t,n=-4112633980346984e-24+n*t,n=-29070369957882005e-24+n*t,n=42347877827932404e-23+n*t,n=-13654692000834679e-22+n*t,n=-13882523362786469e-21+n*t,n=.00018673420803405714+n*t,n=-.000740702534166267+n*t,n=-.006033670871430149+n*t,n=.24015818242558962+n*t,n=1.6536545626831027+n*t):t<16?(t=Math.sqrt(t)-3.25,n=22137376921775787e-25,n=9075656193888539e-23+n*t,n=-27517406297064545e-23+n*t,n=18239629214389228e-24+n*t,n=15027403968909828e-22+n*t,n=-4013867526981546e-21+n*t,n=29234449089955446e-22+n*t,n=12475304481671779e-21+n*t,n=-47318229009055734e-21+n*t,n=6828485145957318e-20+n*t,n=24031110387097894e-21+n*t,n=-.0003550375203628475+n*t,n=.0009532893797373805+n*t,n=-.0016882755560235047+n*t,n=.002491442096107851+n*t,n=-.003751208507569241+n*t,n=.005370914553590064+n*t,n=1.0052589676941592+n*t,n=3.0838856104922208+n*t):Number.isFinite(t)?(t=Math.sqrt(t)-5,n=-27109920616438573e-27,n=-2555641816996525e-25+n*t,n=15076572693500548e-25+n*t,n=-3789465440126737e-24+n*t,n=761570120807834e-23+n*t,n=-1496002662714924e-23+n*t,n=2914795345090108e-23+n*t,n=-6771199775845234e-23+n*t,n=22900482228026655e-23+n*t,n=-99298272942317e-20+n*t,n=4526062597223154e-21+n*t,n=-1968177810553167e-20+n*t,n=7599527703001776e-20+n*t,n=-.00021503011930044477+n*t,n=-.00013871931833623122+n*t,n=1.0103004648645344+n*t,n=4.849906401408584+n*t):n=1/0,n*e}function q$(e,t){let n,i;const r={mean(a){return arguments.length?(n=a||0,r):n},stdev(a){return arguments.length?(i=a??1,r):i},sample:()=>Gv(n,i),pdf:a=>P$(a,n,i),cdf:a=>Yv(a,n,i),icdf:a=>Xv(a,n,i)};return r.mean(e).stdev(t)}function j$(e,t){const n=q$();let i=0;const r={data(a){return arguments.length?(e=a,i=a?a.length:0,r.bandwidth(t)):e},bandwidth(a){return arguments.length?(t=a,!t&&e&&(t=I$(e)),r):t},sample(){return e[~~(Rr()*i)]+t*n.sample()},pdf(a){let s=0,o=0;for(;o<i;++o)s+=n.pdf((a-e[o])/t);return s/t/i},cdf(a){let s=0,o=0;for(;o<i;++o)s+=n.cdf((a-e[o])/t);return s/i},icdf(){throw Error("KDE icdf not supported.")}};return r.data(e)}function H$(e,t){return e=e||0,t=t??1,Math.exp(e+Gv()*t)}function G$(e,t,n){if(e<=0)return 0;t=t||0,n=n??1;const i=(Math.log(e)-t)/n;return Math.exp(-.5*i*i)/(n*c7*e)}function Y$(e,t,n){return Yv(Math.log(e),t,n)}function X$(e,t,n){return Math.exp(Xv(e,t,n))}function f7(e,t){let n,i;const r={mean(a){return arguments.length?(n=a||0,r):n},stdev(a){return arguments.length?(i=a??1,r):i},sample:()=>H$(n,i),pdf:a=>G$(a,n,i),cdf:a=>Y$(a,n,i),icdf:a=>X$(a,n,i)};return r.mean(e).stdev(t)}function d7(e,t){let n=0,i;function r(s){const o=[];let l=0,f;for(f=0;f<n;++f)l+=o[f]=s[f]==null?1:+s[f];for(f=0;f<n;++f)o[f]/=l;return o}const a={weights(s){return arguments.length?(i=r(t=s||[]),a):t},distributions(s){return arguments.length?(s?(n=s.length,e=s):(n=0,e=[]),a.weights(t)):e},sample(){const s=Rr();let o=e[n-1],l=i[0],f=0;for(;f<n-1;l+=i[++f])if(s<l){o=e[f];break}return o.sample()},pdf(s){let o=0,l=0;for(;l<n;++l)o+=i[l]*e[l].pdf(s);return o},cdf(s){let o=0,l=0;for(;l<n;++l)o+=i[l]*e[l].cdf(s);return o},icdf(){throw Error("Mixture icdf not supported.")}};return a.distributions(e).weights(t)}function V$(e,t){return t==null&&(t=e??1,e=0),e+(t-e)*Rr()}function W$(e,t,n){return n==null&&(n=t??1,t=0),e>=t&&e<=n?1/(n-t):0}function Q$(e,t,n){return n==null&&(n=t??1,t=0),e<t?0:e>n?1:(e-t)/(n-t)}function Z$(e,t,n){return n==null&&(n=t??1,t=0),e>=0&&e<=1?t+e*(n-t):NaN}function h7(e,t){let n,i;const r={min(a){return arguments.length?(n=a||0,r):n},max(a){return arguments.length?(i=a??1,r):i},sample:()=>V$(n,i),pdf:a=>W$(a,n,i),cdf:a=>Q$(a,n,i),icdf:a=>Z$(a,n,i)};return t==null&&(t=e??1,e=0),r.min(e).max(t)}function K$(e,t,n){let i=0,r=0;for(const a of e){const s=n(a);t(a)==null||s==null||isNaN(s)||(i+=(s-i)/++r)}return{coef:[i],predict:()=>i,rSquared:0}}function Rp(e,t,n,i){const r=i-e*e,a=Math.abs(r)<1e-24?0:(n-e*t)/r;return[t-a*e,a]}function Vv(e,t,n,i){e=e.filter(y=>{let v=t(y),b=n(y);return v!=null&&(v=+v)>=v&&b!=null&&(b=+b)>=b}),i&&e.sort((y,v)=>t(y)-t(v));const r=e.length,a=new Float64Array(r),s=new Float64Array(r);let o=0,l=0,f=0,d,g,p;for(p of e)a[o]=d=+t(p),s[o]=g=+n(p),++o,l+=(d-l)/o,f+=(g-f)/o;for(o=0;o<r;++o)a[o]-=l,s[o]-=f;return[a,s,l,f]}function Np(e,t,n,i){let r=-1,a,s;for(const o of e)a=t(o),s=n(o),a!=null&&(a=+a)>=a&&s!=null&&(s=+s)>=s&&i(a,s,++r)}function Td(e,t,n,i,r){let a=0,s=0;return Np(e,t,n,(o,l)=>{const f=l-r(o),d=l-i;a+=f*f,s+=d*d}),1-a/s}function J$(e,t,n){let i=0,r=0,a=0,s=0,o=0;Np(e,t,n,(d,g)=>{++o,i+=(d-i)/o,r+=(g-r)/o,a+=(d*g-a)/o,s+=(d*d-s)/o});const l=Rp(i,r,a,s),f=d=>l[0]+l[1]*d;return{coef:l,predict:f,rSquared:Td(e,t,n,r,f)}}function g7(e,t,n){let i=0,r=0,a=0,s=0,o=0;Np(e,t,n,(d,g)=>{++o,d=Math.log(d),i+=(d-i)/o,r+=(g-r)/o,a+=(d*g-a)/o,s+=(d*d-s)/o});const l=Rp(i,r,a,s),f=d=>l[0]+l[1]*Math.log(d);return{coef:l,predict:f,rSquared:Td(e,t,n,r,f)}}function p7(e,t,n){const[i,r,a,s]=Vv(e,t,n);let o=0,l=0,f=0,d=0,g=0,p,y,v;Np(e,t,n,(w,A)=>{p=i[g++],y=Math.log(A),v=p*A,o+=(A*y-o)/g,l+=(v-l)/g,f+=(v*y-f)/g,d+=(p*v-d)/g});const[b,E]=Rp(l/s,o/s,f/s,d/s),_=w=>Math.exp(b+E*(w-a));return{coef:[Math.exp(b-E*a),E],predict:_,rSquared:Td(e,t,n,s,_)}}function m7(e,t,n){let i=0,r=0,a=0,s=0,o=0,l=0;Np(e,t,n,(g,p)=>{const y=Math.log(g),v=Math.log(p);++l,i+=(y-i)/l,r+=(v-r)/l,a+=(y*v-a)/l,s+=(y*y-s)/l,o+=(p-o)/l});const f=Rp(i,r,a,s),d=g=>f[0]*Math.pow(g,f[1]);return f[0]=Math.exp(f[0]),{coef:f,predict:d,rSquared:Td(e,t,n,o,d)}}function eC(e,t,n){const[i,r,a,s]=Vv(e,t,n),o=i.length;let l=0,f=0,d=0,g=0,p=0,y,v,b,E;for(y=0;y<o;)v=i[y],b=r[y++],E=v*v,l+=(E-l)/y,f+=(E*v-f)/y,d+=(E*E-d)/y,g+=(v*b-g)/y,p+=(E*b-p)/y;const _=d-l*l,w=l*_-f*f,A=(p*l-g*f)/w,$=(g*_-p*f)/w,C=-A*l,k=M=>(M=M-a,A*M*M+$*M+C+s);return{coef:[C-$*a+A*a*a+s,$-2*A*a,A],predict:k,rSquared:Td(e,t,n,s,k)}}function y7(e,t,n,i){if(i===0)return K$(e,t,n);if(i===1)return J$(e,t,n);if(i===2)return eC(e,t,n);const[r,a,s,o]=Vv(e,t,n),l=r.length,f=[],d=[],g=i+1;let p,y,v,b,E;for(p=0;p<g;++p){for(v=0,b=0;v<l;++v)b+=Math.pow(r[v],p)*a[v];for(f.push(b),E=new Float64Array(g),y=0;y<g;++y){for(v=0,b=0;v<l;++v)b+=Math.pow(r[v],p+y);E[y]=b}d.push(E)}d.push(f);const _=bK(d),w=A=>{A-=s;let $=o+_[0]+_[1]*A+_[2]*A*A;for(p=3;p<g;++p)$+=_[p]*Math.pow(A,p);return $};return{coef:vK(g,_,-s,o),predict:w,rSquared:Td(e,t,n,o,w)}}function vK(e,t,n,i){const r=Array(e);let a,s,o,l;for(a=0;a<e;++a)r[a]=0;for(a=e-1;a>=0;--a)for(o=t[a],l=1,r[a]+=o,s=1;s<=a;++s)l*=(a+1-s)/s,r[a-s]+=o*Math.pow(n,s)*l;return r[0]+=i,r}function bK(e){const t=e.length-1,n=[];let i,r,a,s,o;for(i=0;i<t;++i){for(s=i,r=i+1;r<t;++r)Math.abs(e[i][r])>Math.abs(e[i][s])&&(s=r);for(a=i;a<t+1;++a)o=e[a][i],e[a][i]=e[a][s],e[a][s]=o;for(r=i+1;r<t;++r)for(a=t;a>=i;a--)e[a][r]-=e[a][i]*e[i][r]/e[i][i]}for(r=t-1;r>=0;--r){for(o=0,a=r+1;a<t;++a)o+=e[a][r]*n[a];n[r]=(e[t][r]-o)/e[r][r]}return n}const y5=2,v5=1e-12;function v7(e,t,n,i){const[r,a,s,o]=Vv(e,t,n,!0),l=r.length,f=Math.max(2,~~(i*l)),d=new Float64Array(l),g=new Float64Array(l),p=new Float64Array(l).fill(1);for(let y=-1;++y<=y5;){const v=[0,f-1];for(let E=0;E<l;++E){const _=r[E],w=v[0],A=v[1],$=_-r[w]>r[A]-_?w:A;let C=0,k=0,M=0,R=0,z=0;const B=1/Math.abs(r[$]-_||1);for(let G=w;G<=A;++G){const q=r[G],F=a[G],D=xK(Math.abs(_-q)*B)*p[G],I=q*D;C+=D,k+=I,M+=F*D,R+=F*I,z+=q*I}const[U,V]=Rp(k/C,M/C,R/C,z/C);d[E]=U+V*_,g[E]=Math.abs(a[E]-d[E]),EK(r,E+1,v)}if(y===y5)break;const b=i9(g);if(Math.abs(b)<v5)break;for(let E=0,_,w;E<l;++E)_=g[E]/(6*b),p[E]=_>=1?v5:(w=1-_*_)*w}return SK(r,d,s,o)}function xK(e){return(e=1-e*e*e)*e*e}function EK(e,t,n){const i=e[t];let r=n[0],a=n[1]+1;if(!(a>=e.length))for(;t>r&&e[a]-i<=i-e[r];)n[0]=++r,n[1]=a,++a}function SK(e,t,n,i){const r=e.length,a=[];let s=0,o=0,l=[],f;for(;s<r;++s)f=e[s]+n,l[0]===f?l[1]+=(t[s]-l[1])/++o:(o=0,l[1]+=i,l=[f,t[s]],a.push(l));return l[1]+=i,a}const _K=.5*Math.PI/180;function Wv(e,t,n,i){n=n||25,i=Math.max(n,i||200);const r=b=>[b,e(b)],a=t[0],s=t[1],o=s-a,l=o/i,f=[r(a)],d=[];if(n===i){for(let b=1;b<i;++b)f.push(r(a+b/n*o));return f.push(r(s)),f}else{d.push(r(s));for(let b=n;--b>0;)d.push(r(a+b/n*o))}let g=f[0],p=d[d.length-1];const y=1/o,v=wK(g[1],d);for(;p;){const b=r((g[0]+p[0])/2);b[0]-g[0]>=l&&AK(g,b,p,y,v)>_K?d.push(b):(g=p,f.push(p),d.pop()),p=d[d.length-1]}return f}function wK(e,t){let n=e,i=e;const r=t.length;for(let a=0;a<r;++a){const s=t[a][1];s<n&&(n=s),s>i&&(i=s)}return 1/(i-n)}function AK(e,t,n,i,r){const a=Math.atan2(r*(n[1]-e[1]),i*(n[0]-e[0])),s=Math.atan2(r*(t[1]-e[1]),i*(t[0]-e[0]));return Math.abs(a-s)}function $K(e){return t=>{const n=e.length;let i=1,r=String(e[0](t));for(;i<n;++i)r+="|"+e[i](t);return r}}function ow(e){return!e||!e.length?function(){return""}:e.length===1?e[0]:$K(e)}function b7(e,t,n){return n||e+(t?"_"+t:"")}const dS=()=>{},CK={init:dS,add:dS,rem:dS,idx:0},ip={values:{init:e=>e.cell.store=!0,value:e=>e.cell.data.values(),idx:-1},count:{value:e=>e.cell.num},__count__:{value:e=>e.missing+e.valid},missing:{value:e=>e.missing},valid:{value:e=>e.valid},sum:{init:e=>e.sum=0,value:e=>e.valid?e.sum:void 0,add:(e,t)=>e.sum+=+t,rem:(e,t)=>e.sum-=t},product:{init:e=>e.product=1,value:e=>e.valid?e.product:void 0,add:(e,t)=>e.product*=t,rem:(e,t)=>e.product/=t},mean:{init:e=>e.mean=0,value:e=>e.valid?e.mean:void 0,add:(e,t)=>(e.mean_d=t-e.mean,e.mean+=e.mean_d/e.valid),rem:(e,t)=>(e.mean_d=t-e.mean,e.mean-=e.valid?e.mean_d/e.valid:e.mean)},average:{value:e=>e.valid?e.mean:void 0,req:["mean"],idx:1},variance:{init:e=>e.dev=0,value:e=>e.valid>1?e.dev/(e.valid-1):void 0,add:(e,t)=>e.dev+=e.mean_d*(t-e.mean),rem:(e,t)=>e.dev-=e.mean_d*(t-e.mean),req:["mean"],idx:1},variancep:{value:e=>e.valid>1?e.dev/e.valid:void 0,req:["variance"],idx:2},stdev:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid-1)):void 0,req:["variance"],idx:2},stdevp:{value:e=>e.valid>1?Math.sqrt(e.dev/e.valid):void 0,req:["variance"],idx:2},stderr:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid*(e.valid-1))):void 0,req:["variance"],idx:2},distinct:{value:e=>e.cell.data.distinct(e.get),req:["values"],idx:3},ci0:{value:e=>e.cell.data.ci0(e.get),req:["values"],idx:3},ci1:{value:e=>e.cell.data.ci1(e.get),req:["values"],idx:3},median:{value:e=>e.cell.data.q2(e.get),req:["values"],idx:3},q1:{value:e=>e.cell.data.q1(e.get),req:["values"],idx:3},q3:{value:e=>e.cell.data.q3(e.get),req:["values"],idx:3},min:{init:e=>e.min=void 0,value:e=>e.min=Number.isNaN(e.min)?e.cell.data.min(e.get):e.min,add:(e,t)=>{(t<e.min||e.min===void 0)&&(e.min=t)},rem:(e,t)=>{t<=e.min&&(e.min=NaN)},req:["values"],idx:4},max:{init:e=>e.max=void 0,value:e=>e.max=Number.isNaN(e.max)?e.cell.data.max(e.get):e.max,add:(e,t)=>{(t>e.max||e.max===void 0)&&(e.max=t)},rem:(e,t)=>{t>=e.max&&(e.max=NaN)},req:["values"],idx:4},argmin:{init:e=>e.argmin=void 0,value:e=>e.argmin||e.cell.data.argmin(e.get),add:(e,t,n)=>{t<e.min&&(e.argmin=n)},rem:(e,t)=>{t<=e.min&&(e.argmin=void 0)},req:["min","values"],idx:3},argmax:{init:e=>e.argmax=void 0,value:e=>e.argmax||e.cell.data.argmax(e.get),add:(e,t,n)=>{t>e.max&&(e.argmax=n)},rem:(e,t)=>{t>=e.max&&(e.argmax=void 0)},req:["max","values"],idx:3},exponential:{init:(e,t)=>{e.exp=0,e.exp_r=t},value:e=>e.valid?e.exp*(1-e.exp_r)/(1-e.exp_r**e.valid):void 0,add:(e,t)=>e.exp=e.exp_r*e.exp+t,rem:(e,t)=>e.exp=(e.exp-t/e.exp_r**(e.valid-1))/e.exp_r},exponentialb:{value:e=>e.valid?e.exp*(1-e.exp_r):void 0,req:["exponential"],idx:1}},zp=Object.keys(ip).filter(e=>e!=="__count__");function TK(e,t){return(n,i)=>Pe({name:e,aggregate_param:i,out:n||e},CK,t)}[...zp,"__count__"].forEach(e=>{ip[e]=TK(e,ip[e])});function x7(e,t,n){return ip[e](n,t)}function E7(e,t){return e.idx-t.idx}function MK(e){const t={};e.forEach(i=>t[i.name]=i);const n=i=>{i.req&&i.req.forEach(r=>{t[r]||n(t[r]=ip[r]())})};return e.forEach(n),Object.values(t).sort(E7)}function kK(){this.valid=0,this.missing=0,this._ops.forEach(e=>e.aggregate_param==null?e.init(this):e.init(this,e.aggregate_param))}function OK(e,t){if(e==null||e===""){++this.missing;return}e===e&&(++this.valid,this._ops.forEach(n=>n.add(this,e,t)))}function DK(e,t){if(e==null||e===""){--this.missing;return}e===e&&(--this.valid,this._ops.forEach(n=>n.rem(this,e,t)))}function RK(e){return this._out.forEach(t=>e[t.out]=t.value(this)),e}function S7(e,t){const n=t||ni,i=MK(e),r=e.slice().sort(E7);function a(s){this._ops=i,this._out=r,this.cell=s,this.init()}return a.prototype.init=kK,a.prototype.add=OK,a.prototype.rem=DK,a.prototype.set=RK,a.prototype.get=n,a.fields=e.map(s=>s.out),a}function tC(e){this._key=e?kr(e):ke,this.reset()}const In=tC.prototype;In.reset=function(){this._add=[],this._rem=[],this._ext=null,this._get=null,this._q=null};In.add=function(e){this._add.push(e)};In.rem=function(e){this._rem.push(e)};In.values=function(){if(this._get=null,this._rem.length===0)return this._add;const e=this._add,t=this._rem,n=this._key,i=e.length,r=t.length,a=Array(i-r),s={};let o,l,f;for(o=0;o<r;++o)s[n(t[o])]=1;for(o=0,l=0;o<i;++o)s[n(f=e[o])]?s[n(f)]=0:a[l++]=f;return this._rem=[],this._add=a};In.distinct=function(e){const t=this.values(),n={};let i=t.length,r=0,a;for(;--i>=0;)a=e(t[i])+"",_e(n,a)||(n[a]=1,++r);return r};In.extent=function(e){if(this._get!==e||!this._ext){const t=this.values(),n=BF(t,e);this._ext=[t[n[0]],t[n[1]]],this._get=e}return this._ext};In.argmin=function(e){return this.extent(e)[0]||{}};In.argmax=function(e){return this.extent(e)[1]||{}};In.min=function(e){const t=this.extent(e)[0];return t!=null?e(t):void 0};In.max=function(e){const t=this.extent(e)[1];return t!=null?e(t):void 0};In.quartile=function(e){return(this._get!==e||!this._q)&&(this._q=B$(this.values(),e),this._get=e),this._q};In.q1=function(e){return this.quartile(e)[0]};In.q2=function(e){return this.quartile(e)[1]};In.q3=function(e){return this.quartile(e)[2]};In.ci=function(e){return(this._get!==e||!this._ci)&&(this._ci=u7(this.values(),1e3,.05,e),this._get=e),this._ci};In.ci0=function(e){return this.ci(e)[0]};In.ci1=function(e){return this.ci(e)[1]};function ou(e){J.call(this,null,e),this._adds=[],this._mods=[],this._alen=0,this._mlen=0,this._drop=!0,this._cross=!1,this._dims=[],this._dnames=[],this._measures=[],this._countOnly=!1,this._counts=null,this._prev=null,this._inputs=null,this._outputs=null}ou.Definition={type:"Aggregate",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:zp},{name:"aggregate_params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"drop",type:"boolean",default:!0},{name:"cross",type:"boolean",default:!1},{name:"key",type:"field"}]};pe(ou,J,{transform(e,t){const n=this,i=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=e.modified();return n.stamp=i.stamp,n.value&&(r||t.modified(n._inputs,!0))?(n._prev=n.value,n.value=r?n.init(e):Object.create(null),t.visit(t.SOURCE,a=>n.add(a))):(n.value=n.value||n.init(e),t.visit(t.REM,a=>n.rem(a)),t.visit(t.ADD,a=>n.add(a))),i.modifies(n._outputs),n._drop=e.drop!==!1,e.cross&&n._dims.length>1&&(n._drop=!1,n.cross()),t.clean()&&n._drop&&i.clean(!0).runAfter(()=>this.clean()),n.changes(i)},cross(){const e=this,t=e.value,n=e._dnames,i=n.map(()=>({})),r=n.length;function a(o){let l,f,d,g;for(l in o)for(d=o[l].tuple,f=0;f<r;++f)i[f][g=d[n[f]]]=g}a(e._prev),a(t);function s(o,l,f){const d=n[f],g=i[f++];for(const p in g){const y=o?o+"|"+p:p;l[d]=g[p],f<r?s(y,l,f):t[y]||e.cell(y,l)}}s("",{},0)},init(e){const t=this._inputs=[],n=this._outputs=[],i={};function r(w){const A=Ee(Kn(w)),$=A.length;let C=0,k;for(;C<$;++C)i[k=A[C]]||(i[k]=1,t.push(k))}this._dims=Ee(e.groupby),this._dnames=this._dims.map(w=>{const A=jt(w);return r(w),n.push(A),A}),this.cellkey=e.key?e.key:ow(this._dims),this._countOnly=!0,this._counts=[],this._measures=[];const a=e.fields||[null],s=e.ops||["count"],o=e.aggregate_params||[null],l=e.as||[],f=a.length,d={};let g,p,y,v,b,E,_;for(f!==s.length&&te("Unmatched number of fields and aggregate ops."),_=0;_<f;++_){if(g=a[_],p=s[_],y=o[_]||null,g==null&&p!=="count"&&te("Null aggregate field specified."),b=jt(g),E=b7(p,b,l[_]),n.push(E),p==="count"){this._counts.push(E);continue}v=d[b],v||(r(g),v=d[b]=[],v.field=g,this._measures.push(v)),p!=="count"&&(this._countOnly=!1),v.push(x7(p,y,E))}return this._measures=this._measures.map(w=>S7(w,w.field)),Object.create(null)},cellkey:ow(),cell(e,t){let n=this.value[e];return n?n.num===0&&this._drop&&n.stamp<this.stamp?(n.stamp=this.stamp,this._adds[this._alen++]=n):n.stamp<this.stamp&&(n.stamp=this.stamp,this._mods[this._mlen++]=n):(n=this.value[e]=this.newcell(e,t),this._adds[this._alen++]=n),n},newcell(e,t){const n={key:e,num:0,agg:null,tuple:this.newtuple(t,this._prev&&this._prev[e]),stamp:this.stamp,store:!1};if(!this._countOnly){const i=this._measures,r=i.length;n.agg=Array(r);for(let a=0;a<r;++a)n.agg[a]=new i[a](n)}return n.store&&(n.data=new tC),n},newtuple(e,t){const n=this._dnames,i=this._dims,r=i.length,a={};for(let s=0;s<r;++s)a[n[s]]=i[s](e);return t?e7(t.tuple,a):ct(a)},clean(){const e=this.value;for(const t in e)e[t].num===0&&delete e[t]},add(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num+=1,this._countOnly)return;n.store&&n.data.add(e);const i=n.agg;for(let r=0,a=i.length;r<a;++r)i[r].add(i[r].get(e),e)},rem(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num-=1,this._countOnly)return;n.store&&n.data.rem(e);const i=n.agg;for(let r=0,a=i.length;r<a;++r)i[r].rem(i[r].get(e),e)},celltuple(e){const t=e.tuple,n=this._counts;e.store&&e.data.values();for(let i=0,r=n.length;i<r;++i)t[n[i]]=e.num;if(!this._countOnly){const i=e.agg;for(let r=0,a=i.length;r<a;++r)i[r].set(t)}return t},changes(e){const t=this._adds,n=this._mods,i=this._prev,r=this._drop,a=e.add,s=e.rem,o=e.mod;let l,f,d,g;if(i)for(f in i)l=i[f],(!r||l.num)&&s.push(l.tuple);for(d=0,g=this._alen;d<g;++d)a.push(this.celltuple(t[d])),t[d]=null;for(d=0,g=this._mlen;d<g;++d)l=n[d],(l.num===0&&r?s:o).push(this.celltuple(l)),n[d]=null;return this._alen=this._mlen=0,this._prev=null,e}});const NK=1e-14;function nC(e){J.call(this,null,e)}nC.Definition={type:"Bin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"anchor",type:"number"},{name:"maxbins",type:"number",default:20},{name:"base",type:"number",default:10},{name:"divide",type:"number",array:!0,default:[5,2]},{name:"extent",type:"number",array:!0,length:2,required:!0},{name:"span",type:"number"},{name:"step",type:"number"},{name:"steps",type:"number",array:!0},{name:"minstep",type:"number",default:0},{name:"nice",type:"boolean",default:!0},{name:"name",type:"string"},{name:"as",type:"string",array:!0,length:2,default:["bin0","bin1"]}]};pe(nC,J,{transform(e,t){const n=e.interval!==!1,i=this._bins(e),r=i.start,a=i.step,s=e.as||["bin0","bin1"],o=s[0],l=s[1];let f;return e.modified()?(t=t.reflow(!0),f=t.SOURCE):f=t.modified(Kn(e.field))?t.ADD_MOD:t.ADD,t.visit(f,n?d=>{const g=i(d);d[o]=g,d[l]=g==null?null:r+a*(1+(g-r)/a)}:d=>d[o]=i(d)),t.modifies(n?s:o)},_bins(e){if(this.value&&!e.modified())return this.value;const t=e.field,n=o7(e),i=n.step;let r=n.start,a=r+Math.ceil((n.stop-r)/i)*i,s,o;(s=e.anchor)!=null&&(o=s-(r+i*Math.floor((s-r)/i)),r+=o,a+=o);const l=function(f){let d=Qn(t(f));return d==null?null:d<r?-1/0:d>a?1/0:(d=Math.max(r,Math.min(d,a-i)),r+i*Math.floor(NK+(d-r)/i))};return l.start=r,l.stop=n.stop,l.step=i,this.value=Bi(l,Kn(t),e.name||"bin_"+jt(t))}});function _7(e,t,n){const i=e;let r=t||[],a=n||[],s={},o=0;return{add:l=>a.push(l),remove:l=>s[i(l)]=++o,size:()=>r.length,data:(l,f)=>(o&&(r=r.filter(d=>!s[i(d)]),s={},o=0),f&&l&&r.sort(l),a.length&&(r=l?HF(l,r,a.sort(l)):r.concat(a),a=[]),r)}}function iC(e){J.call(this,[],e)}iC.Definition={type:"Collect",metadata:{source:!0},params:[{name:"sort",type:"compare"}]};pe(iC,J,{transform(e,t){const n=t.fork(t.ALL),i=_7(ke,this.value,n.materialize(n.ADD).add),r=e.sort,a=t.changed()||r&&(e.modified("sort")||t.modified(r.fields));return n.visit(n.REM,i.remove),this.modified(a),this.value=n.source=i.data(nc(r),a),t.source&&t.source.root&&(this.value.root=t.source.root),n}});function w7(e){wt.call(this,null,zK,e)}pe(w7,wt);function zK(e){return this.value&&!e.modified()?this.value:m$(e.fields,e.orders)}function rC(e){J.call(this,null,e)}rC.Definition={type:"CountPattern",metadata:{generates:!0,changes:!0},params:[{name:"field",type:"field",required:!0},{name:"case",type:"enum",values:["upper","lower","mixed"],default:"mixed"},{name:"pattern",type:"string",default:'[\\w"]+'},{name:"stopwords",type:"string",default:""},{name:"as",type:"string",array:!0,length:2,default:["text","count"]}]};function FK(e,t,n){switch(t){case"upper":e=e.toUpperCase();break;case"lower":e=e.toLowerCase();break}return e.match(n)}pe(rC,J,{transform(e,t){const n=g=>p=>{for(var y=FK(o(p),e.case,a)||[],v,b=0,E=y.length;b<E;++b)s.test(v=y[b])||g(v)},i=this._parameterCheck(e,t),r=this._counts,a=this._match,s=this._stop,o=e.field,l=e.as||["text","count"],f=n(g=>r[g]=1+(r[g]||0)),d=n(g=>r[g]-=1);return i?t.visit(t.SOURCE,f):(t.visit(t.ADD,f),t.visit(t.REM,d)),this._finish(t,l)},_parameterCheck(e,t){let n=!1;return(e.modified("stopwords")||!this._stop)&&(this._stop=new RegExp("^"+(e.stopwords||"")+"$","i"),n=!0),(e.modified("pattern")||!this._match)&&(this._match=new RegExp(e.pattern||"[\\w']+","g"),n=!0),(e.modified("field")||t.modified(e.field.fields))&&(n=!0),n&&(this._counts={}),n},_finish(e,t){const n=this._counts,i=this._tuples||(this._tuples={}),r=t[0],a=t[1],s=e.fork(e.NO_SOURCE|e.NO_FIELDS);let o,l,f;for(o in n)l=i[o],f=n[o]||0,!l&&f?(i[o]=l=ct({}),l[r]=o,l[a]=f,s.add.push(l)):f===0?(l&&s.rem.push(l),n[o]=null,i[o]=null):l[a]!==f&&(l[a]=f,s.mod.push(l));return s.modifies(t)}});function aC(e){J.call(this,null,e)}aC.Definition={type:"Cross",metadata:{generates:!0},params:[{name:"filter",type:"expr"},{name:"as",type:"string",array:!0,length:2,default:["a","b"]}]};pe(aC,J,{transform(e,t){const n=t.fork(t.NO_SOURCE),i=e.as||["a","b"],r=i[0],a=i[1],s=!this.value||t.changed(t.ADD_REM)||e.modified("as")||e.modified("filter");let o=this.value;return s?(o&&(n.rem=o),o=t.materialize(t.SOURCE).source,n.add=this.value=LK(o,r,a,e.filter||Or)):n.mod=o,n.source=this.value,n.modifies(i)}});function LK(e,t,n,i){for(var r=[],a={},s=e.length,o=0,l,f;o<s;++o)for(a[t]=f=e[o],l=0;l<s;++l)a[n]=e[l],i(a)&&(r.push(ct(a)),a={},a[t]=f);return r}const b5={kde:j$,mixture:d7,normal:q$,lognormal:f7,uniform:h7},UK="distributions",x5="function",BK="field";function A7(e,t){const n=e[x5];_e(b5,n)||te("Unknown distribution function: "+n);const i=b5[n]();for(const r in e)r===BK?i.data((e.from||t()).map(e[r])):r===UK?i[r](e[r].map(a=>A7(a,t))):typeof i[r]===x5&&i[r](e[r]);return i}function sC(e){J.call(this,null,e)}const $7=[{key:{function:"normal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"lognormal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"uniform"},params:[{name:"min",type:"number",default:0},{name:"max",type:"number",default:1}]},{key:{function:"kde"},params:[{name:"field",type:"field",required:!0},{name:"from",type:"data"},{name:"bandwidth",type:"number",default:0}]}],IK={key:{function:"mixture"},params:[{name:"distributions",type:"param",array:!0,params:$7},{name:"weights",type:"number",array:!0}]};sC.Definition={type:"Density",metadata:{generates:!0},params:[{name:"extent",type:"number",array:!0,length:2},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"method",type:"string",default:"pdf",values:["pdf","cdf"]},{name:"distribution",type:"param",params:$7.concat(IK)},{name:"as",type:"string",array:!0,default:["value","density"]}]};pe(sC,J,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const i=A7(e.distribution,PK(t)),r=e.steps||e.minsteps||25,a=e.steps||e.maxsteps||200;let s=e.method||"pdf";s!=="pdf"&&s!=="cdf"&&te("Invalid density method: "+s),!e.extent&&!i.data&&te("Missing density extent parameter."),s=i[s];const o=e.as||["value","density"],l=e.extent||qa(i.data()),f=Wv(s,l,r,a).map(d=>{const g={};return g[o[0]]=d[0],g[o[1]]=d[1],ct(g)});this.value&&(n.rem=this.value),this.value=n.add=n.source=f}return n}});function PK(e){return()=>e.materialize(e.SOURCE).source}function C7(e,t){return e?e.map((n,i)=>t[i]||jt(n)):null}function oC(e,t,n){const i=[],r=g=>g(l);let a,s,o,l,f,d;if(t==null)i.push(e.map(n));else for(a={},s=0,o=e.length;s<o;++s)l=e[s],f=t.map(r),d=a[f],d||(a[f]=d=[],d.dims=f,i.push(d)),d.push(n(l));return i}const T7="bin";function uC(e){J.call(this,null,e)}uC.Definition={type:"DotBin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"step",type:"number"},{name:"smooth",type:"boolean",default:!1},{name:"as",type:"string",default:T7}]};const qK=(e,t)=>Dp(qa(e,t))/30;pe(uC,J,{transform(e,t){if(this.value&&!(e.modified()||t.changed()))return t;const n=t.materialize(t.SOURCE).source,i=oC(t.source,e.groupby,ni),r=e.smooth||!1,a=e.field,s=e.step||qK(n,a),o=nc((v,b)=>a(v)-a(b)),l=e.as||T7,f=i.length;let d=1/0,g=-1/0,p=0,y;for(;p<f;++p){const v=i[p].sort(o);y=-1;for(const b of l7(v,s,r,a))b<d&&(d=b),b>g&&(g=b),v[++y][l]=b}return this.value={start:d,stop:g,step:s},t.reflow(!0).modifies(l)}});function M7(e){wt.call(this,null,jK,e),this.modified(!0)}pe(M7,wt);function jK(e){const t=e.expr;return this.value&&!e.modified("expr")?this.value:Bi(n=>t(n,e),Kn(t),jt(t))}function lC(e){J.call(this,[void 0,void 0],e)}lC.Definition={type:"Extent",metadata:{},params:[{name:"field",type:"field",required:!0}]};pe(lC,J,{transform(e,t){const n=this.value,i=e.field,r=t.changed()||t.modified(i.fields)||e.modified("field");let a=n[0],s=n[1];if((r||a==null)&&(a=1/0,s=-1/0),t.visit(r?t.SOURCE:t.ADD,o=>{const l=Qn(i(o));l!=null&&(l<a&&(a=l),l>s&&(s=l))}),!Number.isFinite(a)||!Number.isFinite(s)){let o=jt(i);o&&(o=` for field "${o}"`),t.dataflow.warn(`Infinite extent${o}: [${a}, ${s}]`),a=s=void 0}this.value=[a,s]}});function cC(e,t){wt.call(this,e),this.parent=t,this.count=0}pe(cC,wt,{connect(e){return this.detachSubflow=e.detachSubflow,this.targets().add(e),e.source=this},add(e){this.count+=1,this.value.add.push(e)},rem(e){this.count-=1,this.value.rem.push(e)},mod(e){this.value.mod.push(e)},init(e){this.value.init(e,e.NO_SOURCE)},evaluate(){return this.value}});function Qv(e){J.call(this,{},e),this._keys=Sd();const t=this._targets=[];t.active=0,t.forEach=n=>{for(let i=0,r=t.active;i<r;++i)n(t[i],i,t)}}pe(Qv,J,{activate(e){this._targets[this._targets.active++]=e},subflow(e,t,n,i){const r=this.value;let a=_e(r,e)&&r[e],s,o;return a?a.value.stamp<n.stamp&&(a.init(n),this.activate(a)):(o=i||(o=this._group[e])&&o.tuple,s=n.dataflow,a=new cC(n.fork(n.NO_SOURCE),this),s.add(a).connect(t(s,e,o)),r[e]=a,this.activate(a)),a},clean(){const e=this.value;let t=0;for(const n in e)if(e[n].count===0){const i=e[n].detachSubflow;i&&i(),delete e[n],++t}if(t){const n=this._targets.filter(i=>i&&i.count>0);this.initTargets(n)}},initTargets(e){const t=this._targets,n=t.length,i=e?e.length:0;let r=0;for(;r<i;++r)t[r]=e[r];for(;r<n&&t[r]!=null;++r)t[r]=null;t.active=i},transform(e,t){const n=t.dataflow,i=e.key,r=e.subflow,a=this._keys,s=e.modified("key"),o=l=>this.subflow(l,r,t);return this._group=e.group||{},this.initTargets(),t.visit(t.REM,l=>{const f=ke(l),d=a.get(f);d!==void 0&&(a.delete(f),o(d).rem(l))}),t.visit(t.ADD,l=>{const f=i(l);a.set(ke(l),f),o(f).add(l)}),s||t.modified(i.fields)?t.visit(t.MOD,l=>{const f=ke(l),d=a.get(f),g=i(l);d===g?o(g).mod(l):(a.set(f,g),o(d).rem(l),o(g).add(l))}):t.changed(t.MOD)&&t.visit(t.MOD,l=>{o(a.get(ke(l))).mod(l)}),s&&t.visit(t.REFLOW,l=>{const f=ke(l),d=a.get(f),g=i(l);d!==g&&(a.set(f,g),o(d).rem(l),o(g).add(l))}),t.clean()?n.runAfter(()=>{this.clean(),a.clean()}):a.empty>n.cleanThreshold&&n.runAfter(a.clean),t}});function k7(e){wt.call(this,null,HK,e)}pe(k7,wt);function HK(e){return this.value&&!e.modified()?this.value:re(e.name)?Ee(e.name).map(t=>kr(t)):kr(e.name,e.as)}function fC(e){J.call(this,Sd(),e)}fC.Definition={type:"Filter",metadata:{changes:!0},params:[{name:"expr",type:"expr",required:!0}]};pe(fC,J,{transform(e,t){const n=t.dataflow,i=this.value,r=t.fork(),a=r.add,s=r.rem,o=r.mod,l=e.expr;let f=!0;t.visit(t.REM,g=>{const p=ke(g);i.has(p)?i.delete(p):s.push(g)}),t.visit(t.ADD,g=>{l(g,e)?a.push(g):i.set(ke(g),1)});function d(g){const p=ke(g),y=l(g,e),v=i.get(p);y&&v?(i.delete(p),a.push(g)):!y&&!v?(i.set(p,1),s.push(g)):f&&y&&!v&&o.push(g)}return t.visit(t.MOD,d),e.modified()&&(f=!1,t.visit(t.REFLOW,d)),i.empty>n.cleanThreshold&&n.runAfter(i.clean),r}});function dC(e){J.call(this,[],e)}dC.Definition={type:"Flatten",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"index",type:"string"},{name:"as",type:"string",array:!0}]};pe(dC,J,{transform(e,t){const n=t.fork(t.NO_SOURCE),i=e.fields,r=C7(i,e.as||[]),a=e.index||null,s=r.length;return n.rem=this.value,t.visit(t.SOURCE,o=>{const l=i.map(v=>v(o)),f=l.reduce((v,b)=>Math.max(v,b.length),0);let d=0,g,p,y;for(;d<f;++d){for(p=z$(o),g=0;g<s;++g)p[r[g]]=(y=l[g][d])==null?null:y;a&&(p[a]=d),n.add.push(p)}}),this.value=n.source=n.add,a&&n.modifies(a),n.modifies(r)}});function hC(e){J.call(this,[],e)}hC.Definition={type:"Fold",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0,length:2,default:["key","value"]}]};pe(hC,J,{transform(e,t){const n=t.fork(t.NO_SOURCE),i=e.fields,r=i.map(jt),a=e.as||["key","value"],s=a[0],o=a[1],l=i.length;return n.rem=this.value,t.visit(t.SOURCE,f=>{for(let d=0,g;d<l;++d)g=z$(f),g[s]=r[d],g[o]=i[d](f),n.add.push(g)}),this.value=n.source=n.add,n.modifies(a)}});function gC(e){J.call(this,null,e)}gC.Definition={type:"Formula",metadata:{modifies:!0},params:[{name:"expr",type:"expr",required:!0},{name:"as",type:"string",required:!0},{name:"initonly",type:"boolean"}]};pe(gC,J,{transform(e,t){const n=e.expr,i=e.as,r=e.modified(),a=e.initonly?t.ADD:r?t.SOURCE:t.modified(n.fields)||t.modified(i)?t.ADD_MOD:t.ADD;return r&&(t=t.materialize().reflow(!0)),e.initonly||t.modifies(i),t.visit(a,s=>s[i]=n(s,e))}});function O7(e){J.call(this,[],e)}pe(O7,J,{transform(e,t){const n=t.fork(t.ALL),i=e.generator;let r=this.value,a=e.size-r.length,s,o,l;if(a>0){for(s=[];--a>=0;)s.push(l=ct(i(e))),r.push(l);n.add=n.add.length?n.materialize(n.ADD).add.concat(s):s}else o=r.slice(0,-a),n.rem=n.rem.length?n.materialize(n.REM).rem.concat(o):o,r=r.slice(-a);return n.source=this.value=r,n}});const qm={value:"value",median:i9,mean:$W,min:Q_,max:Sl},GK=[];function pC(e){J.call(this,[],e)}pC.Definition={type:"Impute",metadata:{changes:!0},params:[{name:"field",type:"field",required:!0},{name:"key",type:"field",required:!0},{name:"keyvals",array:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"enum",default:"value",values:["value","mean","median","max","min"]},{name:"value",default:0}]};function YK(e){var t=e.method||qm.value,n;if(qm[t]==null)te("Unrecognized imputation method: "+t);else return t===qm.value?(n=e.value!==void 0?e.value:0,()=>n):qm[t]}function XK(e){const t=e.field;return n=>n?t(n):NaN}pe(pC,J,{transform(e,t){var n=t.fork(t.ALL),i=YK(e),r=XK(e),a=jt(e.field),s=jt(e.key),o=(e.groupby||[]).map(jt),l=VK(t.source,e.groupby,e.key,e.keyvals),f=[],d=this.value,g=l.domain.length,p,y,v,b,E,_,w,A,$,C;for(E=0,A=l.length;E<A;++E)for(p=l[E],v=p.values,y=NaN,w=0;w<g;++w)if(p[w]==null){for(b=l.domain[w],C={_impute:!0},_=0,$=v.length;_<$;++_)C[o[_]]=v[_];C[s]=b,C[a]=Number.isNaN(y)?y=i(p,r):y,f.push(ct(C))}return f.length&&(n.add=n.materialize(n.ADD).add.concat(f)),d.length&&(n.rem=n.materialize(n.REM).rem.concat(d)),this.value=f,n}});function VK(e,t,n,i){var r=_=>_(E),a=[],s=i?i.slice():[],o={},l={},f,d,g,p,y,v,b,E;for(s.forEach((_,w)=>o[_]=w+1),p=0,b=e.length;p<b;++p)E=e[p],v=n(E),y=o[v]||(o[v]=s.push(v)),d=(f=t?t.map(r):GK)+"",(g=l[d])||(g=l[d]=[],a.push(g),g.values=f),g[y-1]=E;return a.domain=s,a}function mC(e){ou.call(this,e)}mC.Definition={type:"JoinAggregate",metadata:{modifies:!0},params:[{name:"groupby",type:"field",array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"ops",type:"enum",array:!0,values:zp},{name:"as",type:"string",null:!0,array:!0},{name:"key",type:"field"}]};pe(mC,ou,{transform(e,t){const n=this,i=e.modified();let r;return n.value&&(i||t.modified(n._inputs,!0))?(r=n.value=i?n.init(e):{},t.visit(t.SOURCE,a=>n.add(a))):(r=n.value=n.value||this.init(e),t.visit(t.REM,a=>n.rem(a)),t.visit(t.ADD,a=>n.add(a))),n.changes(),t.visit(t.SOURCE,a=>{Pe(a,r[n.cellkey(a)].tuple)}),t.reflow(i).modifies(this._outputs)},changes(){const e=this._adds,t=this._mods;let n,i;for(n=0,i=this._alen;n<i;++n)this.celltuple(e[n]),e[n]=null;for(n=0,i=this._mlen;n<i;++n)this.celltuple(t[n]),t[n]=null;this._alen=this._mlen=0}});function yC(e){J.call(this,null,e)}yC.Definition={type:"KDE",metadata:{generates:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"cumulative",type:"boolean",default:!1},{name:"counts",type:"boolean",default:!1},{name:"bandwidth",type:"number",default:0},{name:"extent",type:"number",array:!0,length:2},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"as",type:"string",array:!0,default:["value","density"]}]};pe(yC,J,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const i=t.materialize(t.SOURCE).source,r=oC(i,e.groupby,e.field),a=(e.groupby||[]).map(jt),s=e.bandwidth,o=e.cumulative?"cdf":"pdf",l=e.as||["value","density"],f=[];let d=e.extent,g=e.steps||e.minsteps||25,p=e.steps||e.maxsteps||200;o!=="pdf"&&o!=="cdf"&&te("Invalid density method: "+o),e.resolve==="shared"&&(d||(d=qa(i,e.field)),g=p=e.steps||p),r.forEach(y=>{const v=j$(y,s)[o],b=e.counts?y.length:1,E=d||qa(y);Wv(v,E,g,p).forEach(_=>{const w={};for(let A=0;A<a.length;++A)w[a[A]]=y.dims[A];w[l[0]]=_[0],w[l[1]]=_[1]*b,f.push(ct(w))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=f}return n}});function D7(e){wt.call(this,null,WK,e)}pe(D7,wt);function WK(e){return this.value&&!e.modified()?this.value:b$(e.fields,e.flat)}function R7(e){J.call(this,[],e),this._pending=null}pe(R7,J,{transform(e,t){const n=t.dataflow;return this._pending?hS(this,t,this._pending):QK(e)?t.StopPropagation:e.values?hS(this,t,n.parse(e.values,e.format)):e.async?{async:n.request(e.url,e.format).then(r=>(this._pending=Ee(r.data),a=>a.touch(this)))}:n.request(e.url,e.format).then(i=>hS(this,t,Ee(i.data)))}});function QK(e){return e.modified("async")&&!(e.modified("values")||e.modified("url")||e.modified("format"))}function hS(e,t,n){n.forEach(ct);const i=t.fork(t.NO_FIELDS&t.NO_SOURCE);return i.rem=e.value,e.value=i.source=i.add=n,e._pending=null,i.rem.length&&i.clean(!0),i}function vC(e){J.call(this,{},e)}vC.Definition={type:"Lookup",metadata:{modifies:!0},params:[{name:"index",type:"index",params:[{name:"from",type:"data",required:!0},{name:"key",type:"field",required:!0}]},{name:"values",type:"field",array:!0},{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0},{name:"default",default:null}]};pe(vC,J,{transform(e,t){const n=e.fields,i=e.index,r=e.values,a=e.default==null?null:e.default,s=e.modified(),o=n.length;let l=s?t.SOURCE:t.ADD,f=t,d=e.as,g,p,y;return r?(p=r.length,o>1&&!d&&te('Multi-field lookup requires explicit "as" parameter.'),d&&d.length!==o*p&&te('The "as" parameter has too few output field names.'),d=d||r.map(jt),g=function(v){for(var b=0,E=0,_,w;b<o;++b)if(w=i.get(n[b](v)),w==null)for(_=0;_<p;++_,++E)v[d[E]]=a;else for(_=0;_<p;++_,++E)v[d[E]]=r[_](w)}):(d||te("Missing output field names."),g=function(v){for(var b=0,E;b<o;++b)E=i.get(n[b](v)),v[d[b]]=E??a}),s?f=t.reflow(!0):(y=n.some(v=>t.modified(v.fields)),l|=y?t.MOD:0),t.visit(l,g),f.modifies(d)}});function N7(e){wt.call(this,null,ZK,e)}pe(N7,wt);function ZK(e){if(this.value&&!e.modified())return this.value;const t=e.extents,n=t.length;let i=1/0,r=-1/0,a,s;for(a=0;a<n;++a)s=t[a],s[0]<i&&(i=s[0]),s[1]>r&&(r=s[1]);return[i,r]}function z7(e){wt.call(this,null,KK,e)}pe(z7,wt);function KK(e){return this.value&&!e.modified()?this.value:e.values.reduce((t,n)=>t.concat(n),[])}function F7(e){J.call(this,null,e)}pe(F7,J,{transform(e,t){return this.modified(e.modified()),this.value=e,t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function bC(e){ou.call(this,e)}bC.Definition={type:"Pivot",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"value",type:"field",required:!0},{name:"op",type:"enum",values:zp,default:"sum"},{name:"limit",type:"number",default:0},{name:"key",type:"field"}]};pe(bC,ou,{_transform:ou.prototype.transform,transform(e,t){return this._transform(JK(e,t),t)}});function JK(e,t){const n=e.field,i=e.value,r=(e.op==="count"?"__count__":e.op)||"sum",a=Kn(n).concat(Kn(i)),s=tJ(n,e.limit||0,t);return t.changed()&&e.set("__pivot__",null,null,!0),{key:e.key,groupby:e.groupby,ops:s.map(()=>r),fields:s.map(o=>eJ(o,n,i,a)),as:s.map(o=>o+""),modified:e.modified.bind(e)}}function eJ(e,t,n,i){return Bi(r=>t(r)===e?n(r):NaN,i,e+"")}function tJ(e,t,n){const i={},r=[];return n.visit(n.SOURCE,a=>{const s=e(a);i[s]||(i[s]=1,r.push(s))}),r.sort(Ed),t?r.slice(0,t):r}function L7(e){Qv.call(this,e)}pe(L7,Qv,{transform(e,t){const n=e.subflow,i=e.field,r=a=>this.subflow(ke(a),n,t,a);return(e.modified("field")||i&&t.modified(Kn(i)))&&te("PreFacet does not support field modification."),this.initTargets(),i?(t.visit(t.MOD,a=>{const s=r(a);i(a).forEach(o=>s.mod(o))}),t.visit(t.ADD,a=>{const s=r(a);i(a).forEach(o=>s.add(ct(o)))}),t.visit(t.REM,a=>{const s=r(a);i(a).forEach(o=>s.rem(o))})):(t.visit(t.MOD,a=>r(a).mod(a)),t.visit(t.ADD,a=>r(a).add(a)),t.visit(t.REM,a=>r(a).rem(a))),t.clean()&&t.runAfter(()=>this.clean()),t}});function xC(e){J.call(this,null,e)}xC.Definition={type:"Project",metadata:{generates:!0,changes:!0},params:[{name:"fields",type:"field",array:!0},{name:"as",type:"string",null:!0,array:!0}]};pe(xC,J,{transform(e,t){const n=t.fork(t.NO_SOURCE),i=e.fields,r=C7(e.fields,e.as||[]),a=i?(o,l)=>nJ(o,l,i,r):qv;let s;return this.value?s=this.value:(t=t.addAll(),s=this.value={}),t.visit(t.REM,o=>{const l=ke(o);n.rem.push(s[l]),s[l]=null}),t.visit(t.ADD,o=>{const l=a(o,ct({}));s[ke(o)]=l,n.add.push(l)}),t.visit(t.MOD,o=>{n.mod.push(a(o,s[ke(o)]))}),n}});function nJ(e,t,n,i){for(let r=0,a=n.length;r<a;++r)t[i[r]]=n[r](e);return t}function U7(e){J.call(this,null,e)}pe(U7,J,{transform(e,t){return this.value=e.value,e.modified("value")?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});function EC(e){J.call(this,null,e)}EC.Definition={type:"Quantile",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"probs",type:"number",array:!0},{name:"step",type:"number",default:.01},{name:"as",type:"string",array:!0,default:["prob","value"]}]};const iJ=1e-14;pe(EC,J,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.as||["prob","value"];if(this.value&&!e.modified()&&!t.changed())return n.source=this.value,n;const r=t.materialize(t.SOURCE).source,a=oC(r,e.groupby,e.field),s=(e.groupby||[]).map(jt),o=[],l=e.step||.01,f=e.probs||er(l/2,1-iJ,l),d=f.length;return a.forEach(g=>{const p=U$(g,f);for(let y=0;y<d;++y){const v={};for(let b=0;b<s.length;++b)v[s[b]]=g.dims[b];v[i[0]]=f[y],v[i[1]]=p[y],o.push(ct(v))}}),this.value&&(n.rem=this.value),this.value=n.add=n.source=o,n}});function B7(e){J.call(this,null,e)}pe(B7,J,{transform(e,t){let n,i;return this.value?i=this.value:(n=t=t.addAll(),i=this.value={}),e.derive&&(n=t.fork(t.NO_SOURCE),t.visit(t.REM,r=>{const a=ke(r);n.rem.push(i[a]),i[a]=null}),t.visit(t.ADD,r=>{const a=z$(r);i[ke(r)]=a,n.add.push(a)}),t.visit(t.MOD,r=>{const a=i[ke(r)];for(const s in r)a[s]=r[s],n.modifies(s);n.mod.push(a)})),n}});function SC(e){J.call(this,[],e),this.count=0}SC.Definition={type:"Sample",metadata:{},params:[{name:"size",type:"number",default:1e3}]};pe(SC,J,{transform(e,t){const n=t.fork(t.NO_SOURCE),i=e.modified("size"),r=e.size,a=this.value.reduce((d,g)=>(d[ke(g)]=1,d),{});let s=this.value,o=this.count,l=0;function f(d){let g,p;s.length<r?s.push(d):(p=~~((o+1)*Rr()),p<s.length&&p>=l&&(g=s[p],a[ke(g)]&&n.rem.push(g),s[p]=d)),++o}if(t.rem.length&&(t.visit(t.REM,d=>{const g=ke(d);a[g]&&(a[g]=-1,n.rem.push(d)),--o}),s=s.filter(d=>a[ke(d)]!==-1)),(t.rem.length||i)&&s.length<r&&t.source&&(l=o=s.length,t.visit(t.SOURCE,d=>{a[ke(d)]||f(d)}),l=-1),i&&s.length>r){const d=s.length-r;for(let g=0;g<d;++g)a[ke(s[g])]=-1,n.rem.push(s[g]);s=s.slice(d)}return t.mod.length&&t.visit(t.MOD,d=>{a[ke(d)]&&n.mod.push(d)}),t.add.length&&t.visit(t.ADD,f),(t.add.length||l<0)&&(n.add=s.filter(d=>!a[ke(d)])),this.count=o,this.value=n.source=s,n}});function _C(e){J.call(this,null,e)}_C.Definition={type:"Sequence",metadata:{generates:!0,changes:!0},params:[{name:"start",type:"number",required:!0},{name:"stop",type:"number",required:!0},{name:"step",type:"number",default:1},{name:"as",type:"string",default:"data"}]};pe(_C,J,{transform(e,t){if(this.value&&!e.modified())return;const n=t.materialize().fork(t.MOD),i=e.as||"data";return n.rem=this.value?t.rem.concat(this.value):t.rem,this.value=er(e.start,e.stop,e.step||1).map(r=>{const a={};return a[i]=r,ct(a)}),n.add=t.add.concat(this.value),n}});function I7(e){J.call(this,null,e),this.modified(!0)}pe(I7,J,{transform(e,t){return this.value=t.source,t.changed()?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});function wC(e){J.call(this,null,e)}const P7=["unit0","unit1"];wC.Definition={type:"TimeUnit",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"units",type:"enum",values:$$,array:!0},{name:"step",type:"number",default:1},{name:"maxbins",type:"number",default:40},{name:"extent",type:"date",array:!0},{name:"timezone",type:"enum",default:"local",values:["local","utc"]},{name:"as",type:"string",array:!0,length:2,default:P7}]};pe(wC,J,{transform(e,t){const n=e.field,i=e.interval!==!1,r=e.timezone==="utc",a=this._floor(e,t),s=(r?Cd:$d)(a.unit).offset,o=e.as||P7,l=o[0],f=o[1],d=a.step;let g=a.start||1/0,p=a.stop||-1/0,y=t.ADD;return(e.modified()||t.changed(t.REM)||t.modified(Kn(n)))&&(t=t.reflow(!0),y=t.SOURCE,g=1/0,p=-1/0),t.visit(y,v=>{const b=n(v);let E,_;b==null?(v[l]=null,i&&(v[f]=null)):(v[l]=E=_=a(b),i&&(v[f]=_=s(E,d)),E<g&&(g=E),_>p&&(p=_))}),a.start=g,a.stop=p,t.modifies(i?o:l)},_floor(e,t){const n=e.timezone==="utc",{units:i,step:r}=e.units?{units:e.units,step:e.step||1}:O9({extent:e.extent||qa(t.materialize(t.SOURCE).source,e.field),maxbins:e.maxbins}),a=C$(i),s=this.value||{},o=(n?S9:E9)(a,r);return o.unit=Je(a),o.units=a,o.step=r,o.start=s.start,o.stop=s.stop,this.value=o}});function q7(e){J.call(this,Sd(),e)}pe(q7,J,{transform(e,t){const n=t.dataflow,i=e.field,r=this.value,a=o=>r.set(i(o),o);let s=!0;return e.modified("field")||t.modified(i.fields)?(r.clear(),t.visit(t.SOURCE,a)):t.changed()?(t.visit(t.REM,o=>r.delete(i(o))),t.visit(t.ADD,a)):s=!1,this.modified(s),r.empty>n.cleanThreshold&&n.runAfter(r.clean),t.fork()}});function j7(e){J.call(this,null,e)}pe(j7,J,{transform(e,t){(!this.value||e.modified("field")||e.modified("sort")||t.changed()||e.sort&&t.modified(e.sort.fields))&&(this.value=(e.sort?t.source.slice().sort(nc(e.sort)):t.source).map(e.field))}});function rJ(e,t,n,i){const r=rp[e](t,n);return{init:r.init||jo,update:function(a,s){s[i]=r.next(a)}}}const rp={row_number:function(){return{next:e=>e.index+1}},rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,i=t.data;return n&&t.compare(i[n-1],i[n])?e=n+1:e}}},dense_rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,i=t.data;return n&&t.compare(i[n-1],i[n])?++e:e}}},percent_rank:function(){const e=rp.rank(),t=e.next;return{init:e.init,next:n=>(t(n)-1)/(n.data.length-1)}},cume_dist:function(){let e;return{init:()=>e=0,next:t=>{const n=t.data,i=t.compare;let r=t.index;if(e<r){for(;r+1<n.length&&!i(n[r],n[r+1]);)++r;e=r}return(1+e)/n.length}}},ntile:function(e,t){t=+t,t>0||te("ntile num must be greater than zero.");const n=rp.cume_dist(),i=n.next;return{init:n.init,next:r=>Math.ceil(t*i(r))}},lag:function(e,t){return t=+t||1,{next:n=>{const i=n.index-t;return i>=0?e(n.data[i]):null}}},lead:function(e,t){return t=+t||1,{next:n=>{const i=n.index+t,r=n.data;return i<r.length?e(r[i]):null}}},first_value:function(e){return{next:t=>e(t.data[t.i0])}},last_value:function(e){return{next:t=>e(t.data[t.i1-1])}},nth_value:function(e,t){return t=+t,t>0||te("nth_value nth must be greater than zero."),{next:n=>{const i=n.i0+(t-1);return i<n.i1?e(n.data[i]):null}}},prev_value:function(e){let t;return{init:()=>t=null,next:n=>{const i=e(n.data[n.index]);return i!=null?t=i:t}}},next_value:function(e){let t,n;return{init:()=>(t=null,n=-1),next:i=>{const r=i.data;return i.index<=n?t:(n=aJ(e,r,i.index))<0?(n=r.length,t=null):t=e(r[n])}}}};function aJ(e,t,n){for(let i=t.length;n<i;++n)if(e(t[n])!=null)return n;return-1}const sJ=Object.keys(rp);function H7(e){const t=Ee(e.ops),n=Ee(e.fields),i=Ee(e.params),r=Ee(e.aggregate_params),a=Ee(e.as),s=this.outputs=[],o=this.windows=[],l={},f={},d=[],g=[];let p=!0;function y(v){Ee(Kn(v)).forEach(b=>l[b]=1)}y(e.sort),t.forEach((v,b)=>{const E=n[b],_=i[b],w=r[b]||null,A=jt(E),$=b7(v,A,a[b]);if(y(E),s.push($),_e(rp,v))o.push(rJ(v,E,_,$));else{if(E==null&&v!=="count"&&te("Null aggregate field specified."),v==="count"){d.push($);return}p=!1;let C=f[A];C||(C=f[A]=[],C.field=E,g.push(C)),C.push(x7(v,w,$))}}),(d.length||g.length)&&(this.cell=oJ(g,d,p)),this.inputs=Object.keys(l)}const G7=H7.prototype;G7.init=function(){this.windows.forEach(e=>e.init()),this.cell&&this.cell.init()};G7.update=function(e,t){const n=this.cell,i=this.windows,r=e.data,a=i&&i.length;let s;if(n){for(s=e.p0;s<e.i0;++s)n.rem(r[s]);for(s=e.p1;s<e.i1;++s)n.add(r[s]);n.set(t)}for(s=0;s<a;++s)i[s].update(e,t)};function oJ(e,t,n){e=e.map(l=>S7(l,l.field));const i={num:0,agg:null,store:!1,count:t};if(!n)for(var r=e.length,a=i.agg=Array(r),s=0;s<r;++s)a[s]=new e[s](i);if(i.store)var o=i.data=new tC;return i.add=function(l){if(i.num+=1,!n){o&&o.add(l);for(let f=0;f<r;++f)a[f].add(a[f].get(l),l)}},i.rem=function(l){if(i.num-=1,!n){o&&o.rem(l);for(let f=0;f<r;++f)a[f].rem(a[f].get(l),l)}},i.set=function(l){let f,d;for(o&&o.values(),f=0,d=t.length;f<d;++f)l[t[f]]=i.num;if(!n)for(f=0,d=a.length;f<d;++f)a[f].set(l)},i.init=function(){i.num=0,o&&o.reset();for(let l=0;l<r;++l)a[l].init()},i}function AC(e){J.call(this,{},e),this._mlen=0,this._mods=[]}AC.Definition={type:"Window",metadata:{modifies:!0},params:[{name:"sort",type:"compare"},{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:sJ.concat(zp)},{name:"params",type:"number",null:!0,array:!0},{name:"aggregate_params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"frame",type:"number",null:!0,array:!0,length:2,default:[null,0]},{name:"ignorePeers",type:"boolean",default:!1}]};pe(AC,J,{transform(e,t){this.stamp=t.stamp;const n=e.modified(),i=nc(e.sort),r=ow(e.groupby),a=o=>this.group(r(o));let s=this.state;(!s||n)&&(s=this.state=new H7(e)),n||t.modified(s.inputs)?(this.value={},t.visit(t.SOURCE,o=>a(o).add(o))):(t.visit(t.REM,o=>a(o).remove(o)),t.visit(t.ADD,o=>a(o).add(o)));for(let o=0,l=this._mlen;o<l;++o)uJ(this._mods[o],s,i,e);return this._mlen=0,this._mods=[],t.reflow(n).modifies(s.outputs)},group(e){let t=this.value[e];return t||(t=this.value[e]=_7(ke),t.stamp=-1),t.stamp<this.stamp&&(t.stamp=this.stamp,this._mods[this._mlen++]=t),t}});function uJ(e,t,n,i){const r=i.sort,a=r&&!i.ignorePeers,s=i.frame||[null,0],o=e.data(n),l=o.length,f=a?_d(r):null,d={i0:0,i1:0,p0:0,p1:0,index:0,data:o,compare:r||ii(-1)};t.init();for(let g=0;g<l;++g)lJ(d,s,g,l),a&&cJ(d,f),t.update(d,o[g])}function lJ(e,t,n,i){e.p0=e.i0,e.p1=e.i1,e.i0=t[0]==null?0:Math.max(0,n-Math.abs(t[0])),e.i1=t[1]==null?i:Math.min(i,n+Math.abs(t[1])+1),e.index=n}function cJ(e,t){const n=e.i0,i=e.i1-1,r=e.compare,a=e.data,s=a.length-1;n>0&&!r(a[n],a[n-1])&&(e.i0=t.left(a,a[n])),i<s&&!r(a[i],a[i+1])&&(e.i1=t.right(a,a[i]))}const fJ=Object.freeze(Object.defineProperty({__proto__:null,aggregate:ou,bin:nC,collect:iC,compare:w7,countpattern:rC,cross:aC,density:sC,dotbin:uC,expression:M7,extent:lC,facet:Qv,field:k7,filter:fC,flatten:dC,fold:hC,formula:gC,generate:O7,impute:pC,joinaggregate:mC,kde:yC,key:D7,load:R7,lookup:vC,multiextent:N7,multivalues:z7,params:F7,pivot:bC,prefacet:L7,project:xC,proxy:U7,quantile:EC,relay:B7,sample:SC,sequence:_C,sieve:I7,subflow:cC,timeunit:wC,tupleindex:q7,values:j7,window:AC},Symbol.toStringTag,{value:"Module"}));function ft(e){return function(){return e}}const E5=Math.abs,Hn=Math.atan2,Ju=Math.cos,dJ=Math.max,gS=Math.min,wa=Math.sin,vl=Math.sqrt,Yn=1e-12,jf=Math.PI,uy=jf/2,Y7=2*jf;function hJ(e){return e>1?0:e<-1?jf:Math.acos(e)}function S5(e){return e>=1?uy:e<=-1?-uy:Math.asin(e)}const uw=Math.PI,lw=2*uw,cl=1e-6,gJ=lw-cl;function X7(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function pJ(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return X7;const n=10**t;return function(i){this._+=i[0];for(let r=1,a=i.length;r<a;++r)this._+=Math.round(arguments[r]*n)/n+i[r]}}let $C=class{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?X7:pJ(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,i,r){this._append`Q${+t},${+n},${this._x1=+i},${this._y1=+r}`}bezierCurveTo(t,n,i,r,a,s){this._append`C${+t},${+n},${+i},${+r},${this._x1=+a},${this._y1=+s}`}arcTo(t,n,i,r,a){if(t=+t,n=+n,i=+i,r=+r,a=+a,a<0)throw new Error(`negative radius: ${a}`);let s=this._x1,o=this._y1,l=i-t,f=r-n,d=s-t,g=o-n,p=d*d+g*g;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(p>cl)if(!(Math.abs(g*l-f*d)>cl)||!a)this._append`L${this._x1=t},${this._y1=n}`;else{let y=i-s,v=r-o,b=l*l+f*f,E=y*y+v*v,_=Math.sqrt(b),w=Math.sqrt(p),A=a*Math.tan((uw-Math.acos((b+p-E)/(2*_*w)))/2),$=A/w,C=A/_;Math.abs($-1)>cl&&this._append`L${t+$*d},${n+$*g}`,this._append`A${a},${a},0,0,${+(g*y>d*v)},${this._x1=t+C*l},${this._y1=n+C*f}`}}arc(t,n,i,r,a,s){if(t=+t,n=+n,i=+i,s=!!s,i<0)throw new Error(`negative radius: ${i}`);let o=i*Math.cos(r),l=i*Math.sin(r),f=t+o,d=n+l,g=1^s,p=s?r-a:a-r;this._x1===null?this._append`M${f},${d}`:(Math.abs(this._x1-f)>cl||Math.abs(this._y1-d)>cl)&&this._append`L${f},${d}`,i&&(p<0&&(p=p%lw+lw),p>gJ?this._append`A${i},${i},0,1,${g},${t-o},${n-l}A${i},${i},0,1,${g},${this._x1=f},${this._y1=d}`:p>cl&&this._append`A${i},${i},0,${+(p>=uw)},${g},${this._x1=t+i*Math.cos(a)},${this._y1=n+i*Math.sin(a)}`)}rect(t,n,i,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${i=+i}v${+r}h${-i}Z`}toString(){return this._}};function Zv(){return new $C}Zv.prototype=$C.prototype;function Kv(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const i=Math.floor(n);if(!(i>=0))throw new RangeError(`invalid digits: ${n}`);t=i}return e},()=>new $C(t)}function mJ(e){return e.innerRadius}function yJ(e){return e.outerRadius}function vJ(e){return e.startAngle}function bJ(e){return e.endAngle}function xJ(e){return e&&e.padAngle}function EJ(e,t,n,i,r,a,s,o){var l=n-e,f=i-t,d=s-r,g=o-a,p=g*l-d*f;if(!(p*p<Yn))return p=(d*(t-a)-g*(e-r))/p,[e+p*l,t+p*f]}function jm(e,t,n,i,r,a,s){var o=e-n,l=t-i,f=(s?a:-a)/vl(o*o+l*l),d=f*l,g=-f*o,p=e+d,y=t+g,v=n+d,b=i+g,E=(p+v)/2,_=(y+b)/2,w=v-p,A=b-y,$=w*w+A*A,C=r-a,k=p*b-v*y,M=(A<0?-1:1)*vl(dJ(0,C*C*$-k*k)),R=(k*A-w*M)/$,z=(-k*w-A*M)/$,B=(k*A+w*M)/$,U=(-k*w+A*M)/$,V=R-E,G=z-_,q=B-E,F=U-_;return V*V+G*G>q*q+F*F&&(R=B,z=U),{cx:R,cy:z,x01:-d,y01:-g,x11:R*(r/C-1),y11:z*(r/C-1)}}function SJ(){var e=mJ,t=yJ,n=ft(0),i=null,r=vJ,a=bJ,s=xJ,o=null,l=Kv(f);function f(){var d,g,p=+e.apply(this,arguments),y=+t.apply(this,arguments),v=r.apply(this,arguments)-uy,b=a.apply(this,arguments)-uy,E=E5(b-v),_=b>v;if(o||(o=d=l()),y<p&&(g=y,y=p,p=g),!(y>Yn))o.moveTo(0,0);else if(E>Y7-Yn)o.moveTo(y*Ju(v),y*wa(v)),o.arc(0,0,y,v,b,!_),p>Yn&&(o.moveTo(p*Ju(b),p*wa(b)),o.arc(0,0,p,b,v,_));else{var w=v,A=b,$=v,C=b,k=E,M=E,R=s.apply(this,arguments)/2,z=R>Yn&&(i?+i.apply(this,arguments):vl(p*p+y*y)),B=gS(E5(y-p)/2,+n.apply(this,arguments)),U=B,V=B,G,q;if(z>Yn){var F=S5(z/p*wa(R)),D=S5(z/y*wa(R));(k-=F*2)>Yn?(F*=_?1:-1,$+=F,C-=F):(k=0,$=C=(v+b)/2),(M-=D*2)>Yn?(D*=_?1:-1,w+=D,A-=D):(M=0,w=A=(v+b)/2)}var I=y*Ju(w),Y=y*wa(w),K=p*Ju(C),N=p*wa(C);if(B>Yn){var W=y*Ju(A),ne=y*wa(A),se=p*Ju($),ye=p*wa($),Se;if(E<jf)if(Se=EJ(I,Y,se,ye,W,ne,K,N)){var $e=I-Se[0],Ht=Y-Se[1],nt=W-Se[0],xe=ne-Se[1],Ue=1/wa(hJ(($e*nt+Ht*xe)/(vl($e*$e+Ht*Ht)*vl(nt*nt+xe*xe)))/2),Ie=vl(Se[0]*Se[0]+Se[1]*Se[1]);U=gS(B,(p-Ie)/(Ue-1)),V=gS(B,(y-Ie)/(Ue+1))}else U=V=0}M>Yn?V>Yn?(G=jm(se,ye,I,Y,y,V,_),q=jm(W,ne,K,N,y,V,_),o.moveTo(G.cx+G.x01,G.cy+G.y01),V<B?o.arc(G.cx,G.cy,V,Hn(G.y01,G.x01),Hn(q.y01,q.x01),!_):(o.arc(G.cx,G.cy,V,Hn(G.y01,G.x01),Hn(G.y11,G.x11),!_),o.arc(0,0,y,Hn(G.cy+G.y11,G.cx+G.x11),Hn(q.cy+q.y11,q.cx+q.x11),!_),o.arc(q.cx,q.cy,V,Hn(q.y11,q.x11),Hn(q.y01,q.x01),!_))):(o.moveTo(I,Y),o.arc(0,0,y,w,A,!_)):o.moveTo(I,Y),!(p>Yn)||!(k>Yn)?o.lineTo(K,N):U>Yn?(G=jm(K,N,W,ne,p,-U,_),q=jm(I,Y,se,ye,p,-U,_),o.lineTo(G.cx+G.x01,G.cy+G.y01),U<B?o.arc(G.cx,G.cy,U,Hn(G.y01,G.x01),Hn(q.y01,q.x01),!_):(o.arc(G.cx,G.cy,U,Hn(G.y01,G.x01),Hn(G.y11,G.x11),!_),o.arc(0,0,p,Hn(G.cy+G.y11,G.cx+G.x11),Hn(q.cy+q.y11,q.cx+q.x11),_),o.arc(q.cx,q.cy,U,Hn(q.y11,q.x11),Hn(q.y01,q.x01),!_))):o.arc(0,0,p,C,$,_)}if(o.closePath(),d)return o=null,d+""||null}return f.centroid=function(){var d=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,g=(+r.apply(this,arguments)+ +a.apply(this,arguments))/2-jf/2;return[Ju(g)*d,wa(g)*d]},f.innerRadius=function(d){return arguments.length?(e=typeof d=="function"?d:ft(+d),f):e},f.outerRadius=function(d){return arguments.length?(t=typeof d=="function"?d:ft(+d),f):t},f.cornerRadius=function(d){return arguments.length?(n=typeof d=="function"?d:ft(+d),f):n},f.padRadius=function(d){return arguments.length?(i=d==null?null:typeof d=="function"?d:ft(+d),f):i},f.startAngle=function(d){return arguments.length?(r=typeof d=="function"?d:ft(+d),f):r},f.endAngle=function(d){return arguments.length?(a=typeof d=="function"?d:ft(+d),f):a},f.padAngle=function(d){return arguments.length?(s=typeof d=="function"?d:ft(+d),f):s},f.context=function(d){return arguments.length?(o=d??null,f):o},f}function V7(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function W7(e){this._context=e}W7.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function CC(e){return new W7(e)}function Q7(e){return e[0]}function Z7(e){return e[1]}function K7(e,t){var n=ft(!0),i=null,r=CC,a=null,s=Kv(o);e=typeof e=="function"?e:e===void 0?Q7:ft(e),t=typeof t=="function"?t:t===void 0?Z7:ft(t);function o(l){var f,d=(l=V7(l)).length,g,p=!1,y;for(i==null&&(a=r(y=s())),f=0;f<=d;++f)!(f<d&&n(g=l[f],f,l))===p&&((p=!p)?a.lineStart():a.lineEnd()),p&&a.point(+e(g,f,l),+t(g,f,l));if(y)return a=null,y+""||null}return o.x=function(l){return arguments.length?(e=typeof l=="function"?l:ft(+l),o):e},o.y=function(l){return arguments.length?(t=typeof l=="function"?l:ft(+l),o):t},o.defined=function(l){return arguments.length?(n=typeof l=="function"?l:ft(!!l),o):n},o.curve=function(l){return arguments.length?(r=l,i!=null&&(a=r(i)),o):r},o.context=function(l){return arguments.length?(l==null?i=a=null:a=r(i=l),o):i},o}function J7(e,t,n){var i=null,r=ft(!0),a=null,s=CC,o=null,l=Kv(f);e=typeof e=="function"?e:e===void 0?Q7:ft(+e),t=typeof t=="function"?t:ft(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?Z7:ft(+n);function f(g){var p,y,v,b=(g=V7(g)).length,E,_=!1,w,A=new Array(b),$=new Array(b);for(a==null&&(o=s(w=l())),p=0;p<=b;++p){if(!(p<b&&r(E=g[p],p,g))===_)if(_=!_)y=p,o.areaStart(),o.lineStart();else{for(o.lineEnd(),o.lineStart(),v=p-1;v>=y;--v)o.point(A[v],$[v]);o.lineEnd(),o.areaEnd()}_&&(A[p]=+e(E,p,g),$[p]=+t(E,p,g),o.point(i?+i(E,p,g):A[p],n?+n(E,p,g):$[p]))}if(w)return o=null,w+""||null}function d(){return K7().defined(r).curve(s).context(a)}return f.x=function(g){return arguments.length?(e=typeof g=="function"?g:ft(+g),i=null,f):e},f.x0=function(g){return arguments.length?(e=typeof g=="function"?g:ft(+g),f):e},f.x1=function(g){return arguments.length?(i=g==null?null:typeof g=="function"?g:ft(+g),f):i},f.y=function(g){return arguments.length?(t=typeof g=="function"?g:ft(+g),n=null,f):t},f.y0=function(g){return arguments.length?(t=typeof g=="function"?g:ft(+g),f):t},f.y1=function(g){return arguments.length?(n=g==null?null:typeof g=="function"?g:ft(+g),f):n},f.lineX0=f.lineY0=function(){return d().x(e).y(t)},f.lineY1=function(){return d().x(e).y(n)},f.lineX1=function(){return d().x(i).y(t)},f.defined=function(g){return arguments.length?(r=typeof g=="function"?g:ft(!!g),f):r},f.curve=function(g){return arguments.length?(s=g,a!=null&&(o=s(a)),f):s},f.context=function(g){return arguments.length?(g==null?a=o=null:o=s(a=g),f):a},f}const _J={draw(e,t){const n=vl(t/jf);e.moveTo(n,0),e.arc(0,0,n,0,Y7)}};function wJ(e,t){let n=null,i=Kv(r);e=typeof e=="function"?e:ft(e||_J),t=typeof t=="function"?t:ft(t===void 0?64:+t);function r(){let a;if(n||(n=a=i()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),a)return n=null,a+""||null}return r.type=function(a){return arguments.length?(e=typeof a=="function"?a:ft(a),r):e},r.size=function(a){return arguments.length?(t=typeof a=="function"?a:ft(+a),r):t},r.context=function(a){return arguments.length?(n=a??null,r):n},r}function uu(){}function ly(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function Jv(e){this._context=e}Jv.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:ly(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:ly(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function AJ(e){return new Jv(e)}function eL(e){this._context=e}eL.prototype={areaStart:uu,areaEnd:uu,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:ly(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function $J(e){return new eL(e)}function tL(e){this._context=e}tL.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,i=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,i):this._context.moveTo(n,i);break;case 3:this._point=4;default:ly(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function CJ(e){return new tL(e)}function nL(e,t){this._basis=new Jv(e),this._beta=t}nL.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,n=e.length-1;if(n>0)for(var i=e[0],r=t[0],a=e[n]-i,s=t[n]-r,o=-1,l;++o<=n;)l=o/n,this._basis.point(this._beta*e[o]+(1-this._beta)*(i+l*a),this._beta*t[o]+(1-this._beta)*(r+l*s));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}};const TJ=function e(t){function n(i){return t===1?new Jv(i):new nL(i,t)}return n.beta=function(i){return e(+i)},n}(.85);function cy(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function TC(e,t){this._context=e,this._k=(1-t)/6}TC.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:cy(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:cy(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const MJ=function e(t){function n(i){return new TC(i,t)}return n.tension=function(i){return e(+i)},n}(0);function MC(e,t){this._context=e,this._k=(1-t)/6}MC.prototype={areaStart:uu,areaEnd:uu,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:cy(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const kJ=function e(t){function n(i){return new MC(i,t)}return n.tension=function(i){return e(+i)},n}(0);function kC(e,t){this._context=e,this._k=(1-t)/6}kC.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:cy(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const OJ=function e(t){function n(i){return new kC(i,t)}return n.tension=function(i){return e(+i)},n}(0);function OC(e,t,n){var i=e._x1,r=e._y1,a=e._x2,s=e._y2;if(e._l01_a>Yn){var o=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,l=3*e._l01_a*(e._l01_a+e._l12_a);i=(i*o-e._x0*e._l12_2a+e._x2*e._l01_2a)/l,r=(r*o-e._y0*e._l12_2a+e._y2*e._l01_2a)/l}if(e._l23_a>Yn){var f=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,d=3*e._l23_a*(e._l23_a+e._l12_a);a=(a*f+e._x1*e._l23_2a-t*e._l12_2a)/d,s=(s*f+e._y1*e._l23_2a-n*e._l12_2a)/d}e._context.bezierCurveTo(i,r,a,s,e._x2,e._y2)}function iL(e,t){this._context=e,this._alpha=t}iL.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,i=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:OC(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const DJ=function e(t){function n(i){return t?new iL(i,t):new TC(i,0)}return n.alpha=function(i){return e(+i)},n}(.5);function rL(e,t){this._context=e,this._alpha=t}rL.prototype={areaStart:uu,areaEnd:uu,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,i=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:OC(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const RJ=function e(t){function n(i){return t?new rL(i,t):new MC(i,0)}return n.alpha=function(i){return e(+i)},n}(.5);function aL(e,t){this._context=e,this._alpha=t}aL.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,i=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:OC(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const NJ=function e(t){function n(i){return t?new aL(i,t):new kC(i,0)}return n.alpha=function(i){return e(+i)},n}(.5);function sL(e){this._context=e}sL.prototype={areaStart:uu,areaEnd:uu,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function zJ(e){return new sL(e)}function _5(e){return e<0?-1:1}function w5(e,t,n){var i=e._x1-e._x0,r=t-e._x1,a=(e._y1-e._y0)/(i||r<0&&-0),s=(n-e._y1)/(r||i<0&&-0),o=(a*r+s*i)/(i+r);return(_5(a)+_5(s))*Math.min(Math.abs(a),Math.abs(s),.5*Math.abs(o))||0}function A5(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function pS(e,t,n){var i=e._x0,r=e._y0,a=e._x1,s=e._y1,o=(a-i)/3;e._context.bezierCurveTo(i+o,r+o*t,a-o,s-o*n,a,s)}function fy(e){this._context=e}fy.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:pS(this,this._t0,A5(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,pS(this,A5(this,n=w5(this,e,t)),n);break;default:pS(this,this._t0,n=w5(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function oL(e){this._context=new uL(e)}(oL.prototype=Object.create(fy.prototype)).point=function(e,t){fy.prototype.point.call(this,t,e)};function uL(e){this._context=e}uL.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,i,r,a){this._context.bezierCurveTo(t,e,i,n,a,r)}};function FJ(e){return new fy(e)}function LJ(e){return new oL(e)}function lL(e){this._context=e}lL.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var i=$5(e),r=$5(t),a=0,s=1;s<n;++a,++s)this._context.bezierCurveTo(i[0][a],r[0][a],i[1][a],r[1][a],e[s],t[s]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function $5(e){var t,n=e.length-1,i,r=new Array(n),a=new Array(n),s=new Array(n);for(r[0]=0,a[0]=2,s[0]=e[0]+2*e[1],t=1;t<n-1;++t)r[t]=1,a[t]=4,s[t]=4*e[t]+2*e[t+1];for(r[n-1]=2,a[n-1]=7,s[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)i=r[t]/a[t-1],a[t]-=i,s[t]-=i*s[t-1];for(r[n-1]=s[n-1]/a[n-1],t=n-2;t>=0;--t)r[t]=(s[t]-r[t+1])/a[t];for(a[n-1]=(e[n]+r[n-1])/2,t=0;t<n-1;++t)a[t]=2*e[t+1]-r[t+1];return[r,a]}function UJ(e){return new lL(e)}function eb(e,t){this._context=e,this._t=t}eb.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function BJ(e){return new eb(e,.5)}function IJ(e){return new eb(e,0)}function PJ(e){return new eb(e,1)}function nu(e,t){if(typeof document<"u"&&document.createElement){const n=document.createElement("canvas");if(n&&n.getContext)return n.width=e,n.height=t,n}return null}const qJ=()=>typeof Image<"u"?Image:null;function Ka(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function Eu(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const cw=Symbol("implicit");function DC(){var e=new jN,t=[],n=[],i=cw;function r(a){let s=e.get(a);if(s===void 0){if(i!==cw)return i;e.set(a,s=t.push(a)-1)}return n[s%n.length]}return r.domain=function(a){if(!arguments.length)return t.slice();t=[],e=new jN;for(const s of a)e.has(s)||e.set(s,t.push(s)-1);return r},r.range=function(a){return arguments.length?(n=Array.from(a),r):n.slice()},r.unknown=function(a){return arguments.length?(i=a,r):i},r.copy=function(){return DC(t,n).unknown(i)},Ka.apply(r,arguments),r}function Md(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Fp(e,t){var n=Object.create(e.prototype);for(var i in t)n[i]=t[i];return n}function Su(){}var Rl=.7,Hf=1/Rl,Cf="\\s*([+-]?\\d+)\\s*",ap="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Fa="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",jJ=/^#([0-9a-f]{3,8})$/,HJ=new RegExp(`^rgb\\(${Cf},${Cf},${Cf}\\)$`),GJ=new RegExp(`^rgb\\(${Fa},${Fa},${Fa}\\)$`),YJ=new RegExp(`^rgba\\(${Cf},${Cf},${Cf},${ap}\\)$`),XJ=new RegExp(`^rgba\\(${Fa},${Fa},${Fa},${ap}\\)$`),VJ=new RegExp(`^hsl\\(${ap},${Fa},${Fa}\\)$`),WJ=new RegExp(`^hsla\\(${ap},${Fa},${Fa},${ap}\\)$`),C5={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Md(Su,sp,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:T5,formatHex:T5,formatHex8:QJ,formatHsl:ZJ,formatRgb:M5,toString:M5});function T5(){return this.rgb().formatHex()}function QJ(){return this.rgb().formatHex8()}function ZJ(){return cL(this).formatHsl()}function M5(){return this.rgb().formatRgb()}function sp(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=jJ.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?k5(t):n===3?new xn(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Hm(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Hm(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=HJ.exec(e))?new xn(t[1],t[2],t[3],1):(t=GJ.exec(e))?new xn(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=YJ.exec(e))?Hm(t[1],t[2],t[3],t[4]):(t=XJ.exec(e))?Hm(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=VJ.exec(e))?R5(t[1],t[2]/100,t[3]/100,1):(t=WJ.exec(e))?R5(t[1],t[2]/100,t[3]/100,t[4]):C5.hasOwnProperty(e)?k5(C5[e]):e==="transparent"?new xn(NaN,NaN,NaN,0):null}function k5(e){return new xn(e>>16&255,e>>8&255,e&255,1)}function Hm(e,t,n,i){return i<=0&&(e=t=n=NaN),new xn(e,t,n,i)}function RC(e){return e instanceof Su||(e=sp(e)),e?(e=e.rgb(),new xn(e.r,e.g,e.b,e.opacity)):new xn}function lu(e,t,n,i){return arguments.length===1?RC(e):new xn(e,t,n,i??1)}function xn(e,t,n,i){this.r=+e,this.g=+t,this.b=+n,this.opacity=+i}Md(xn,lu,Fp(Su,{brighter(e){return e=e==null?Hf:Math.pow(Hf,e),new xn(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Rl:Math.pow(Rl,e),new xn(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new xn(_l(this.r),_l(this.g),_l(this.b),dy(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:O5,formatHex:O5,formatHex8:KJ,formatRgb:D5,toString:D5}));function O5(){return`#${bl(this.r)}${bl(this.g)}${bl(this.b)}`}function KJ(){return`#${bl(this.r)}${bl(this.g)}${bl(this.b)}${bl((isNaN(this.opacity)?1:this.opacity)*255)}`}function D5(){const e=dy(this.opacity);return`${e===1?"rgb(":"rgba("}${_l(this.r)}, ${_l(this.g)}, ${_l(this.b)}${e===1?")":`, ${e})`}`}function dy(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function _l(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function bl(e){return e=_l(e),(e<16?"0":"")+e.toString(16)}function R5(e,t,n,i){return i<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Qr(e,t,n,i)}function cL(e){if(e instanceof Qr)return new Qr(e.h,e.s,e.l,e.opacity);if(e instanceof Su||(e=sp(e)),!e)return new Qr;if(e instanceof Qr)return e;e=e.rgb();var t=e.r/255,n=e.g/255,i=e.b/255,r=Math.min(t,n,i),a=Math.max(t,n,i),s=NaN,o=a-r,l=(a+r)/2;return o?(t===a?s=(n-i)/o+(n<i)*6:n===a?s=(i-t)/o+2:s=(t-n)/o+4,o/=l<.5?a+r:2-a-r,s*=60):o=l>0&&l<1?0:s,new Qr(s,o,l,e.opacity)}function hy(e,t,n,i){return arguments.length===1?cL(e):new Qr(e,t,n,i??1)}function Qr(e,t,n,i){this.h=+e,this.s=+t,this.l=+n,this.opacity=+i}Md(Qr,hy,Fp(Su,{brighter(e){return e=e==null?Hf:Math.pow(Hf,e),new Qr(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Rl:Math.pow(Rl,e),new Qr(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*t,r=2*n-i;return new xn(mS(e>=240?e-240:e+120,r,i),mS(e,r,i),mS(e<120?e+240:e-120,r,i),this.opacity)},clamp(){return new Qr(N5(this.h),Gm(this.s),Gm(this.l),dy(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=dy(this.opacity);return`${e===1?"hsl(":"hsla("}${N5(this.h)}, ${Gm(this.s)*100}%, ${Gm(this.l)*100}%${e===1?")":`, ${e})`}`}}));function N5(e){return e=(e||0)%360,e<0?e+360:e}function Gm(e){return Math.max(0,Math.min(1,e||0))}function mS(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const fL=Math.PI/180,dL=180/Math.PI,gy=18,hL=.96422,gL=1,pL=.82521,mL=4/29,Tf=6/29,yL=3*Tf*Tf,JJ=Tf*Tf*Tf;function vL(e){if(e instanceof La)return new La(e.l,e.a,e.b,e.opacity);if(e instanceof Ls)return bL(e);e instanceof xn||(e=RC(e));var t=xS(e.r),n=xS(e.g),i=xS(e.b),r=yS((.2225045*t+.7168786*n+.0606169*i)/gL),a,s;return t===n&&n===i?a=s=r:(a=yS((.4360747*t+.3850649*n+.1430804*i)/hL),s=yS((.0139322*t+.0971045*n+.7141733*i)/pL)),new La(116*r-16,500*(a-r),200*(r-s),e.opacity)}function py(e,t,n,i){return arguments.length===1?vL(e):new La(e,t,n,i??1)}function La(e,t,n,i){this.l=+e,this.a=+t,this.b=+n,this.opacity=+i}Md(La,py,Fp(Su,{brighter(e){return new La(this.l+gy*(e??1),this.a,this.b,this.opacity)},darker(e){return new La(this.l-gy*(e??1),this.a,this.b,this.opacity)},rgb(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return t=hL*vS(t),e=gL*vS(e),n=pL*vS(n),new xn(bS(3.1338561*t-1.6168667*e-.4906146*n),bS(-.9787684*t+1.9161415*e+.033454*n),bS(.0719453*t-.2289914*e+1.4052427*n),this.opacity)}}));function yS(e){return e>JJ?Math.pow(e,1/3):e/yL+mL}function vS(e){return e>Tf?e*e*e:yL*(e-mL)}function bS(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function xS(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function eee(e){if(e instanceof Ls)return new Ls(e.h,e.c,e.l,e.opacity);if(e instanceof La||(e=vL(e)),e.a===0&&e.b===0)return new Ls(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*dL;return new Ls(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function my(e,t,n,i){return arguments.length===1?eee(e):new Ls(e,t,n,i??1)}function Ls(e,t,n,i){this.h=+e,this.c=+t,this.l=+n,this.opacity=+i}function bL(e){if(isNaN(e.h))return new La(e.l,0,0,e.opacity);var t=e.h*fL;return new La(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}Md(Ls,my,Fp(Su,{brighter(e){return new Ls(this.h,this.c,this.l+gy*(e??1),this.opacity)},darker(e){return new Ls(this.h,this.c,this.l-gy*(e??1),this.opacity)},rgb(){return bL(this).rgb()}}));var xL=-.14861,NC=1.78277,zC=-.29227,tb=-.90649,op=1.97294,z5=op*tb,F5=op*NC,L5=NC*zC-tb*xL;function tee(e){if(e instanceof wl)return new wl(e.h,e.s,e.l,e.opacity);e instanceof xn||(e=RC(e));var t=e.r/255,n=e.g/255,i=e.b/255,r=(L5*i+z5*t-F5*n)/(L5+z5-F5),a=i-r,s=(op*(n-r)-zC*a)/tb,o=Math.sqrt(s*s+a*a)/(op*r*(1-r)),l=o?Math.atan2(s,a)*dL-120:NaN;return new wl(l<0?l+360:l,o,r,e.opacity)}function fw(e,t,n,i){return arguments.length===1?tee(e):new wl(e,t,n,i??1)}function wl(e,t,n,i){this.h=+e,this.s=+t,this.l=+n,this.opacity=+i}Md(wl,fw,Fp(Su,{brighter(e){return e=e==null?Hf:Math.pow(Hf,e),new wl(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Rl:Math.pow(Rl,e),new wl(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=isNaN(this.h)?0:(this.h+120)*fL,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),i=Math.cos(e),r=Math.sin(e);return new xn(255*(t+n*(xL*i+NC*r)),255*(t+n*(zC*i+tb*r)),255*(t+n*(op*i)),this.opacity)}}));function EL(e,t,n,i,r){var a=e*e,s=a*e;return((1-3*e+3*a-s)*t+(4-6*a+3*s)*n+(1+3*e+3*a-3*s)*i+s*r)/6}function SL(e){var t=e.length-1;return function(n){var i=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),r=e[i],a=e[i+1],s=i>0?e[i-1]:2*r-a,o=i<t-1?e[i+2]:2*a-r;return EL((n-i/t)*t,s,r,a,o)}}function _L(e){var t=e.length;return function(n){var i=Math.floor(((n%=1)<0?++n:n)*t),r=e[(i+t-1)%t],a=e[i%t],s=e[(i+1)%t],o=e[(i+2)%t];return EL((n-i/t)*t,r,a,s,o)}}const nb=e=>()=>e;function wL(e,t){return function(n){return e+n*t}}function nee(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(i){return Math.pow(e+i*t,n)}}function ib(e,t){var n=t-e;return n?wL(e,n>180||n<-180?n-360*Math.round(n/360):n):nb(isNaN(e)?t:e)}function iee(e){return(e=+e)==1?En:function(t,n){return n-t?nee(t,n,e):nb(isNaN(t)?n:t)}}function En(e,t){var n=t-e;return n?wL(e,n):nb(isNaN(e)?t:e)}const dw=function e(t){var n=iee(t);function i(r,a){var s=n((r=lu(r)).r,(a=lu(a)).r),o=n(r.g,a.g),l=n(r.b,a.b),f=En(r.opacity,a.opacity);return function(d){return r.r=s(d),r.g=o(d),r.b=l(d),r.opacity=f(d),r+""}}return i.gamma=e,i}(1);function AL(e){return function(t){var n=t.length,i=new Array(n),r=new Array(n),a=new Array(n),s,o;for(s=0;s<n;++s)o=lu(t[s]),i[s]=o.r||0,r[s]=o.g||0,a[s]=o.b||0;return i=e(i),r=e(r),a=e(a),o.opacity=1,function(l){return o.r=i(l),o.g=r(l),o.b=a(l),o+""}}}var ree=AL(SL),aee=AL(_L);function FC(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,i=t.slice(),r;return function(a){for(r=0;r<n;++r)i[r]=e[r]*(1-a)+t[r]*a;return i}}function $L(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function see(e,t){return($L(t)?FC:CL)(e,t)}function CL(e,t){var n=t?t.length:0,i=e?Math.min(n,e.length):0,r=new Array(i),a=new Array(n),s;for(s=0;s<i;++s)r[s]=_u(e[s],t[s]);for(;s<n;++s)a[s]=t[s];return function(o){for(s=0;s<i;++s)a[s]=r[s](o);return a}}function TL(e,t){var n=new Date;return e=+e,t=+t,function(i){return n.setTime(e*(1-i)+t*i),n}}function Vr(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function ML(e,t){var n={},i={},r;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(r in t)r in e?n[r]=_u(e[r],t[r]):i[r]=t[r];return function(a){for(r in n)i[r]=n[r](a);return i}}var hw=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,ES=new RegExp(hw.source,"g");function oee(e){return function(){return e}}function uee(e){return function(t){return e(t)+""}}function kL(e,t){var n=hw.lastIndex=ES.lastIndex=0,i,r,a,s=-1,o=[],l=[];for(e=e+"",t=t+"";(i=hw.exec(e))&&(r=ES.exec(t));)(a=r.index)>n&&(a=t.slice(n,a),o[s]?o[s]+=a:o[++s]=a),(i=i[0])===(r=r[0])?o[s]?o[s]+=r:o[++s]=r:(o[++s]=null,l.push({i:s,x:Vr(i,r)})),n=ES.lastIndex;return n<t.length&&(a=t.slice(n),o[s]?o[s]+=a:o[++s]=a),o.length<2?l[0]?uee(l[0].x):oee(t):(t=l.length,function(f){for(var d=0,g;d<t;++d)o[(g=l[d]).i]=g.x(f);return o.join("")})}function _u(e,t){var n=typeof t,i;return t==null||n==="boolean"?nb(t):(n==="number"?Vr:n==="string"?(i=sp(t))?(t=i,dw):kL:t instanceof sp?dw:t instanceof Date?TL:$L(t)?FC:Array.isArray(t)?CL:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?ML:Vr)(e,t)}function lee(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}}function cee(e,t){var n=ib(+e,+t);return function(i){var r=n(i);return r-360*Math.floor(r/360)}}function Lp(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var U5=180/Math.PI,gw={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function OL(e,t,n,i,r,a){var s,o,l;return(s=Math.sqrt(e*e+t*t))&&(e/=s,t/=s),(l=e*n+t*i)&&(n-=e*l,i-=t*l),(o=Math.sqrt(n*n+i*i))&&(n/=o,i/=o,l/=o),e*i<t*n&&(e=-e,t=-t,l=-l,s=-s),{translateX:r,translateY:a,rotate:Math.atan2(t,e)*U5,skewX:Math.atan(l)*U5,scaleX:s,scaleY:o}}var Ym;function fee(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?gw:OL(t.a,t.b,t.c,t.d,t.e,t.f)}function dee(e){return e==null||(Ym||(Ym=document.createElementNS("http://www.w3.org/2000/svg","g")),Ym.setAttribute("transform",e),!(e=Ym.transform.baseVal.consolidate()))?gw:(e=e.matrix,OL(e.a,e.b,e.c,e.d,e.e,e.f))}function DL(e,t,n,i){function r(f){return f.length?f.pop()+" ":""}function a(f,d,g,p,y,v){if(f!==g||d!==p){var b=y.push("translate(",null,t,null,n);v.push({i:b-4,x:Vr(f,g)},{i:b-2,x:Vr(d,p)})}else(g||p)&&y.push("translate("+g+t+p+n)}function s(f,d,g,p){f!==d?(f-d>180?d+=360:d-f>180&&(f+=360),p.push({i:g.push(r(g)+"rotate(",null,i)-2,x:Vr(f,d)})):d&&g.push(r(g)+"rotate("+d+i)}function o(f,d,g,p){f!==d?p.push({i:g.push(r(g)+"skewX(",null,i)-2,x:Vr(f,d)}):d&&g.push(r(g)+"skewX("+d+i)}function l(f,d,g,p,y,v){if(f!==g||d!==p){var b=y.push(r(y)+"scale(",null,",",null,")");v.push({i:b-4,x:Vr(f,g)},{i:b-2,x:Vr(d,p)})}else(g!==1||p!==1)&&y.push(r(y)+"scale("+g+","+p+")")}return function(f,d){var g=[],p=[];return f=e(f),d=e(d),a(f.translateX,f.translateY,d.translateX,d.translateY,g,p),s(f.rotate,d.rotate,g,p),o(f.skewX,d.skewX,g,p),l(f.scaleX,f.scaleY,d.scaleX,d.scaleY,g,p),f=d=null,function(y){for(var v=-1,b=p.length,E;++v<b;)g[(E=p[v]).i]=E.x(y);return g.join("")}}}var hee=DL(fee,"px, ","px)","deg)"),gee=DL(dee,", ",")",")"),pee=1e-12;function B5(e){return((e=Math.exp(e))+1/e)/2}function mee(e){return((e=Math.exp(e))-1/e)/2}function yee(e){return((e=Math.exp(2*e))-1)/(e+1)}const vee=function e(t,n,i){function r(a,s){var o=a[0],l=a[1],f=a[2],d=s[0],g=s[1],p=s[2],y=d-o,v=g-l,b=y*y+v*v,E,_;if(b<pee)_=Math.log(p/f)/t,E=function(M){return[o+M*y,l+M*v,f*Math.exp(t*M*_)]};else{var w=Math.sqrt(b),A=(p*p-f*f+i*b)/(2*f*n*w),$=(p*p-f*f-i*b)/(2*p*n*w),C=Math.log(Math.sqrt(A*A+1)-A),k=Math.log(Math.sqrt($*$+1)-$);_=(k-C)/t,E=function(M){var R=M*_,z=B5(C),B=f/(n*w)*(z*yee(t*R+C)-mee(C));return[o+B*y,l+B*v,f*z/B5(t*R+C)]}}return E.duration=_*1e3*t/Math.SQRT2,E}return r.rho=function(a){var s=Math.max(.001,+a),o=s*s,l=o*o;return e(s,o,l)},r}(Math.SQRT2,2,4);function RL(e){return function(t,n){var i=e((t=hy(t)).h,(n=hy(n)).h),r=En(t.s,n.s),a=En(t.l,n.l),s=En(t.opacity,n.opacity);return function(o){return t.h=i(o),t.s=r(o),t.l=a(o),t.opacity=s(o),t+""}}}const bee=RL(ib);var xee=RL(En);function Eee(e,t){var n=En((e=py(e)).l,(t=py(t)).l),i=En(e.a,t.a),r=En(e.b,t.b),a=En(e.opacity,t.opacity);return function(s){return e.l=n(s),e.a=i(s),e.b=r(s),e.opacity=a(s),e+""}}function NL(e){return function(t,n){var i=e((t=my(t)).h,(n=my(n)).h),r=En(t.c,n.c),a=En(t.l,n.l),s=En(t.opacity,n.opacity);return function(o){return t.h=i(o),t.c=r(o),t.l=a(o),t.opacity=s(o),t+""}}}const See=NL(ib);var _ee=NL(En);function zL(e){return function t(n){n=+n;function i(r,a){var s=e((r=fw(r)).h,(a=fw(a)).h),o=En(r.s,a.s),l=En(r.l,a.l),f=En(r.opacity,a.opacity);return function(d){return r.h=s(d),r.s=o(d),r.l=l(Math.pow(d,n)),r.opacity=f(d),r+""}}return i.gamma=t,i}(1)}const wee=zL(ib);var Aee=zL(En);function LC(e,t){t===void 0&&(t=e,e=_u);for(var n=0,i=t.length-1,r=t[0],a=new Array(i<0?0:i);n<i;)a[n]=e(r,r=t[++n]);return function(s){var o=Math.max(0,Math.min(i-1,Math.floor(s*=i)));return a[o](s-o)}}function $ee(e,t){for(var n=new Array(t),i=0;i<t;++i)n[i]=e(i/(t-1));return n}const Cee=Object.freeze(Object.defineProperty({__proto__:null,interpolate:_u,interpolateArray:see,interpolateBasis:SL,interpolateBasisClosed:_L,interpolateCubehelix:wee,interpolateCubehelixLong:Aee,interpolateDate:TL,interpolateDiscrete:lee,interpolateHcl:See,interpolateHclLong:_ee,interpolateHsl:bee,interpolateHslLong:xee,interpolateHue:cee,interpolateLab:Eee,interpolateNumber:Vr,interpolateNumberArray:FC,interpolateObject:ML,interpolateRgb:dw,interpolateRgbBasis:ree,interpolateRgbBasisClosed:aee,interpolateRound:Lp,interpolateString:kL,interpolateTransformCss:hee,interpolateTransformSvg:gee,interpolateZoom:vee,piecewise:LC,quantize:$ee},Symbol.toStringTag,{value:"Module"}));function Tee(e){return function(){return e}}function pw(e){return+e}var I5=[0,1];function Oi(e){return e}function mw(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:Tee(isNaN(t)?NaN:.5)}function Mee(e,t){var n;return e>t&&(n=e,e=t,t=n),function(i){return Math.max(e,Math.min(t,i))}}function kee(e,t,n){var i=e[0],r=e[1],a=t[0],s=t[1];return r<i?(i=mw(r,i),a=n(s,a)):(i=mw(i,r),a=n(a,s)),function(o){return a(i(o))}}function Oee(e,t,n){var i=Math.min(e.length,t.length)-1,r=new Array(i),a=new Array(i),s=-1;for(e[i]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++s<i;)r[s]=mw(e[s],e[s+1]),a[s]=n(t[s],t[s+1]);return function(o){var l=au(e,o,1,i)-1;return a[l](r[l](o))}}function Up(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function rb(){var e=I5,t=I5,n=_u,i,r,a,s=Oi,o,l,f;function d(){var p=Math.min(e.length,t.length);return s!==Oi&&(s=Mee(e[0],e[p-1])),o=p>2?Oee:kee,l=f=null,g}function g(p){return p==null||isNaN(p=+p)?a:(l||(l=o(e.map(i),t,n)))(i(s(p)))}return g.invert=function(p){return s(r((f||(f=o(t,e.map(i),Vr)))(p)))},g.domain=function(p){return arguments.length?(e=Array.from(p,pw),d()):e.slice()},g.range=function(p){return arguments.length?(t=Array.from(p),d()):t.slice()},g.rangeRound=function(p){return t=Array.from(p),n=Lp,d()},g.clamp=function(p){return arguments.length?(s=p?!0:Oi,d()):s!==Oi},g.interpolate=function(p){return arguments.length?(n=p,d()):n},g.unknown=function(p){return arguments.length?(a=p,g):a},function(p,y){return i=p,r=y,d()}}function FL(){return rb()(Oi,Oi)}function LL(e,t,n,i){var r=su(e,t,n),a;switch(i=Dl(i??",f"),i.type){case"s":{var s=Math.max(Math.abs(e),Math.abs(t));return i.precision==null&&!isNaN(a=l9(r,s))&&(i.precision=a),w$(i,s)}case"":case"e":case"g":case"p":case"r":{i.precision==null&&!isNaN(a=c9(r,Math.max(Math.abs(e),Math.abs(t))))&&(i.precision=a-(i.type==="e"));break}case"f":case"%":{i.precision==null&&!isNaN(a=u9(r))&&(i.precision=a-(i.type==="%")*2);break}}return Rv(i)}function rc(e){var t=e.domain;return e.ticks=function(n){var i=t();return V_(i[0],i[i.length-1],n??10)},e.tickFormat=function(n,i){var r=t();return LL(r[0],r[r.length-1],n??10,i)},e.nice=function(n){n==null&&(n=10);var i=t(),r=0,a=i.length-1,s=i[r],o=i[a],l,f,d=10;for(o<s&&(f=s,s=o,o=f,f=r,r=a,a=f);d-- >0;){if(f=W_(s,o,n),f===l)return i[r]=s,i[a]=o,t(i);if(f>0)s=Math.floor(s/f)*f,o=Math.ceil(o/f)*f;else if(f<0)s=Math.ceil(s*f)/f,o=Math.floor(o*f)/f;else break;l=f}return e},e}function UL(){var e=FL();return e.copy=function(){return Up(e,UL())},Ka.apply(e,arguments),rc(e)}function BL(e){var t;function n(i){return i==null||isNaN(i=+i)?t:i}return n.invert=n,n.domain=n.range=function(i){return arguments.length?(e=Array.from(i,pw),n):e.slice()},n.unknown=function(i){return arguments.length?(t=i,n):t},n.copy=function(){return BL(e).unknown(t)},e=arguments.length?Array.from(e,pw):[0,1],rc(n)}function IL(e,t){e=e.slice();var n=0,i=e.length-1,r=e[n],a=e[i],s;return a<r&&(s=n,n=i,i=s,s=r,r=a,a=s),e[n]=t.floor(r),e[i]=t.ceil(a),e}function P5(e){return Math.log(e)}function q5(e){return Math.exp(e)}function Dee(e){return-Math.log(-e)}function Ree(e){return-Math.exp(-e)}function Nee(e){return isFinite(e)?+("1e"+e):e<0?0:e}function zee(e){return e===10?Nee:e===Math.E?Math.exp:t=>Math.pow(e,t)}function Fee(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function j5(e){return(t,n)=>-e(-t,n)}function UC(e){const t=e(P5,q5),n=t.domain;let i=10,r,a;function s(){return r=Fee(i),a=zee(i),n()[0]<0?(r=j5(r),a=j5(a),e(Dee,Ree)):e(P5,q5),t}return t.base=function(o){return arguments.length?(i=+o,s()):i},t.domain=function(o){return arguments.length?(n(o),s()):n()},t.ticks=o=>{const l=n();let f=l[0],d=l[l.length-1];const g=d<f;g&&([f,d]=[d,f]);let p=r(f),y=r(d),v,b;const E=o==null?10:+o;let _=[];if(!(i%1)&&y-p<E){if(p=Math.floor(p),y=Math.ceil(y),f>0){for(;p<=y;++p)for(v=1;v<i;++v)if(b=p<0?v/a(-p):v*a(p),!(b<f)){if(b>d)break;_.push(b)}}else for(;p<=y;++p)for(v=i-1;v>=1;--v)if(b=p>0?v/a(-p):v*a(p),!(b<f)){if(b>d)break;_.push(b)}_.length*2<E&&(_=V_(f,d,E))}else _=V_(p,y,Math.min(y-p,E)).map(a);return g?_.reverse():_},t.tickFormat=(o,l)=>{if(o==null&&(o=10),l==null&&(l=i===10?"s":","),typeof l!="function"&&(!(i%1)&&(l=Dl(l)).precision==null&&(l.trim=!0),l=Rv(l)),o===1/0)return l;const f=Math.max(1,i*o/t.ticks().length);return d=>{let g=d/a(Math.round(r(d)));return g*i<i-.5&&(g*=i),g<=f?l(d):""}},t.nice=()=>n(IL(n(),{floor:o=>a(Math.floor(r(o))),ceil:o=>a(Math.ceil(r(o)))})),t}function PL(){const e=UC(rb()).domain([1,10]);return e.copy=()=>Up(e,PL()).base(e.base()),Ka.apply(e,arguments),e}function H5(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function G5(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function BC(e){var t=1,n=e(H5(t),G5(t));return n.constant=function(i){return arguments.length?e(H5(t=+i),G5(t)):t},rc(n)}function qL(){var e=BC(rb());return e.copy=function(){return Up(e,qL()).constant(e.constant())},Ka.apply(e,arguments)}function Y5(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function Lee(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function Uee(e){return e<0?-e*e:e*e}function IC(e){var t=e(Oi,Oi),n=1;function i(){return n===1?e(Oi,Oi):n===.5?e(Lee,Uee):e(Y5(n),Y5(1/n))}return t.exponent=function(r){return arguments.length?(n=+r,i()):n},rc(t)}function PC(){var e=IC(rb());return e.copy=function(){return Up(e,PC()).exponent(e.exponent())},Ka.apply(e,arguments),e}function Bee(){return PC.apply(null,arguments).exponent(.5)}function jL(){var e=[],t=[],n=[],i;function r(){var s=0,o=Math.max(1,t.length);for(n=new Array(o-1);++s<o;)n[s-1]=n9(e,s/o);return a}function a(s){return s==null||isNaN(s=+s)?i:t[au(n,s)]}return a.invertExtent=function(s){var o=t.indexOf(s);return o<0?[NaN,NaN]:[o>0?n[o-1]:e[0],o<n.length?n[o]:e[e.length-1]]},a.domain=function(s){if(!arguments.length)return e.slice();e=[];for(let o of s)o!=null&&!isNaN(o=+o)&&e.push(o);return e.sort(Is),r()},a.range=function(s){return arguments.length?(t=Array.from(s),r()):t.slice()},a.unknown=function(s){return arguments.length?(i=s,a):i},a.quantiles=function(){return n.slice()},a.copy=function(){return jL().domain(e).range(t).unknown(i)},Ka.apply(a,arguments)}function HL(){var e=0,t=1,n=1,i=[.5],r=[0,1],a;function s(l){return l!=null&&l<=l?r[au(i,l,0,n)]:a}function o(){var l=-1;for(i=new Array(n);++l<n;)i[l]=((l+1)*t-(l-n)*e)/(n+1);return s}return s.domain=function(l){return arguments.length?([e,t]=l,e=+e,t=+t,o()):[e,t]},s.range=function(l){return arguments.length?(n=(r=Array.from(l)).length-1,o()):r.slice()},s.invertExtent=function(l){var f=r.indexOf(l);return f<0?[NaN,NaN]:f<1?[e,i[0]]:f>=n?[i[n-1],t]:[i[f-1],i[f]]},s.unknown=function(l){return arguments.length&&(a=l),s},s.thresholds=function(){return i.slice()},s.copy=function(){return HL().domain([e,t]).range(r).unknown(a)},Ka.apply(rc(s),arguments)}function GL(){var e=[.5],t=[0,1],n,i=1;function r(a){return a!=null&&a<=a?t[au(e,a,0,i)]:n}return r.domain=function(a){return arguments.length?(e=Array.from(a),i=Math.min(e.length,t.length-1),r):e.slice()},r.range=function(a){return arguments.length?(t=Array.from(a),i=Math.min(e.length,t.length-1),r):t.slice()},r.invertExtent=function(a){var s=t.indexOf(a);return[e[s-1],e[s]]},r.unknown=function(a){return arguments.length?(n=a,r):n},r.copy=function(){return GL().domain(e).range(t).unknown(n)},Ka.apply(r,arguments)}function Iee(e){return new Date(e)}function Pee(e){return e instanceof Date?+e:+new Date(+e)}function qC(e,t,n,i,r,a,s,o,l,f){var d=FL(),g=d.invert,p=d.domain,y=f(".%L"),v=f(":%S"),b=f("%I:%M"),E=f("%I %p"),_=f("%a %d"),w=f("%b %d"),A=f("%B"),$=f("%Y");function C(k){return(l(k)<k?y:o(k)<k?v:s(k)<k?b:a(k)<k?E:i(k)<k?r(k)<k?_:w:n(k)<k?A:$)(k)}return d.invert=function(k){return new Date(g(k))},d.domain=function(k){return arguments.length?p(Array.from(k,Pee)):p().map(Iee)},d.ticks=function(k){var M=p();return e(M[0],M[M.length-1],k??10)},d.tickFormat=function(k,M){return M==null?C:f(M)},d.nice=function(k){var M=p();return(!k||typeof k.range!="function")&&(k=t(M[0],M[M.length-1],k??10)),k?p(IL(M,k)):d},d.copy=function(){return Up(d,qC(e,t,n,i,r,a,s,o,l,f))},d}function qee(){return Ka.apply(qC(VW,WW,ja,ep,wd,Ps,Fv,Nv,Fs,M$).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function jee(){return Ka.apply(qC(YW,XW,Ha,tp,Ad,eu,Lv,zv,Fs,k$).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function ab(){var e=0,t=1,n,i,r,a,s=Oi,o=!1,l;function f(g){return g==null||isNaN(g=+g)?l:s(r===0?.5:(g=(a(g)-n)*r,o?Math.max(0,Math.min(1,g)):g))}f.domain=function(g){return arguments.length?([e,t]=g,n=a(e=+e),i=a(t=+t),r=n===i?0:1/(i-n),f):[e,t]},f.clamp=function(g){return arguments.length?(o=!!g,f):o},f.interpolator=function(g){return arguments.length?(s=g,f):s};function d(g){return function(p){var y,v;return arguments.length?([y,v]=p,s=g(y,v),f):[s(0),s(1)]}}return f.range=d(_u),f.rangeRound=d(Lp),f.unknown=function(g){return arguments.length?(l=g,f):l},function(g){return a=g,n=g(e),i=g(t),r=n===i?0:1/(i-n),f}}function wu(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function jC(){var e=rc(ab()(Oi));return e.copy=function(){return wu(e,jC())},Eu.apply(e,arguments)}function YL(){var e=UC(ab()).domain([1,10]);return e.copy=function(){return wu(e,YL()).base(e.base())},Eu.apply(e,arguments)}function XL(){var e=BC(ab());return e.copy=function(){return wu(e,XL()).constant(e.constant())},Eu.apply(e,arguments)}function HC(){var e=IC(ab());return e.copy=function(){return wu(e,HC()).exponent(e.exponent())},Eu.apply(e,arguments)}function Hee(){return HC.apply(null,arguments).exponent(.5)}function sb(){var e=0,t=.5,n=1,i=1,r,a,s,o,l,f=Oi,d,g=!1,p;function y(b){return isNaN(b=+b)?p:(b=.5+((b=+d(b))-a)*(i*b<i*a?o:l),f(g?Math.max(0,Math.min(1,b)):b))}y.domain=function(b){return arguments.length?([e,t,n]=b,r=d(e=+e),a=d(t=+t),s=d(n=+n),o=r===a?0:.5/(a-r),l=a===s?0:.5/(s-a),i=a<r?-1:1,y):[e,t,n]},y.clamp=function(b){return arguments.length?(g=!!b,y):g},y.interpolator=function(b){return arguments.length?(f=b,y):f};function v(b){return function(E){var _,w,A;return arguments.length?([_,w,A]=E,f=LC(b,[_,w,A]),y):[f(0),f(.5),f(1)]}}return y.range=v(_u),y.rangeRound=v(Lp),y.unknown=function(b){return arguments.length?(p=b,y):p},function(b){return d=b,r=b(e),a=b(t),s=b(n),o=r===a?0:.5/(a-r),l=a===s?0:.5/(s-a),i=a<r?-1:1,y}}function VL(){var e=rc(sb()(Oi));return e.copy=function(){return wu(e,VL())},Eu.apply(e,arguments)}function WL(){var e=UC(sb()).domain([.1,1,10]);return e.copy=function(){return wu(e,WL()).base(e.base())},Eu.apply(e,arguments)}function QL(){var e=BC(sb());return e.copy=function(){return wu(e,QL()).constant(e.constant())},Eu.apply(e,arguments)}function GC(){var e=IC(sb());return e.copy=function(){return wu(e,GC()).exponent(e.exponent())},Eu.apply(e,arguments)}function Gee(){return GC.apply(null,arguments).exponent(.5)}function Ja(e){for(var t=e.length/6|0,n=new Array(t),i=0;i<t;)n[i]="#"+e.slice(i*6,++i*6);return n}const Yee=Ja("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),Xee=Ja("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),Vee=Ja("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),Wee=Ja("4269d0efb118ff725c6cc5b03ca951ff8ab7a463f297bbf59c6b4e9498a0"),Qee=Ja("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),Zee=Ja("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),Kee=Ja("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),Jee=Ja("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),ete=Ja("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),tte=Ja("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f");function YC(e,t,n){const i=e-t+n*2;return e?i>0?i:1:0}const nte="identity",Gf="linear",Ws="log",Bp="pow",Ip="sqrt",ob="symlog",Nl="time",zl="utc",Ua="sequential",kd="diverging",Yf="quantile",ub="quantize",lb="threshold",XC="ordinal",yw="point",ZL="band",VC="bin-ordinal",hn="continuous",Pp="discrete",qp="discretizing",Lr="interpolating",WC="temporal";function ite(e){return function(t){let n=t[0],i=t[1],r;return i<n&&(r=n,n=i,i=r),[e.invert(n),e.invert(i)]}}function rte(e){return function(t){const n=e.range();let i=t[0],r=t[1],a=-1,s,o,l,f;for(r<i&&(o=i,i=r,r=o),l=0,f=n.length;l<f;++l)n[l]>=i&&n[l]<=r&&(a<0&&(a=l),s=l);if(!(a<0))return i=e.invertExtent(n[a]),r=e.invertExtent(n[s]),[i[0]===void 0?i[1]:i[0],r[1]===void 0?r[0]:r[1]]}}function QC(){const e=DC().unknown(void 0),t=e.domain,n=e.range;let i=[0,1],r,a,s=!1,o=0,l=0,f=.5;delete e.unknown;function d(){const g=t().length,p=i[1]<i[0],y=i[1-p],v=YC(g,o,l);let b=i[p-0];r=(y-b)/(v||1),s&&(r=Math.floor(r)),b+=(y-b-r*(g-o))*f,a=r*(1-o),s&&(b=Math.round(b),a=Math.round(a));const E=er(g).map(_=>b+r*_);return n(p?E.reverse():E)}return e.domain=function(g){return arguments.length?(t(g),d()):t()},e.range=function(g){return arguments.length?(i=[+g[0],+g[1]],d()):i.slice()},e.rangeRound=function(g){return i=[+g[0],+g[1]],s=!0,d()},e.bandwidth=function(){return a},e.step=function(){return r},e.round=function(g){return arguments.length?(s=!!g,d()):s},e.padding=function(g){return arguments.length?(l=Math.max(0,Math.min(1,g)),o=l,d()):o},e.paddingInner=function(g){return arguments.length?(o=Math.max(0,Math.min(1,g)),d()):o},e.paddingOuter=function(g){return arguments.length?(l=Math.max(0,Math.min(1,g)),d()):l},e.align=function(g){return arguments.length?(f=Math.max(0,Math.min(1,g)),d()):f},e.invertRange=function(g){if(g[0]==null||g[1]==null)return;const p=i[1]<i[0],y=p?n().reverse():n(),v=y.length-1;let b=+g[0],E=+g[1],_,w,A;if(!(b!==b||E!==E)&&(E<b&&(A=b,b=E,E=A),!(E<y[0]||b>i[1-p])))return _=Math.max(0,au(y,b)-1),w=b===E?_:au(y,E)-1,b-y[_]>a+1e-10&&++_,p&&(A=_,_=v-w,w=v-A),_>w?void 0:t().slice(_,w+1)},e.invert=function(g){const p=e.invertRange([g,g]);return p&&p[0]},e.copy=function(){return QC().domain(t()).range(i).round(s).paddingInner(o).paddingOuter(l).align(f)},d()}function KL(e){const t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,e.copy=function(){return KL(t())},e}function ate(){return KL(QC().paddingInner(1))}var ste=Array.prototype.map;function ote(e){return ste.call(e,Qn)}const ute=Array.prototype.slice;function JL(){let e=[],t=[];function n(i){return i==null||i!==i?void 0:t[(au(e,i)-1)%t.length]}return n.domain=function(i){return arguments.length?(e=ote(i),n):e.slice()},n.range=function(i){return arguments.length?(t=ute.call(i),n):t.slice()},n.tickFormat=function(i,r){return LL(e[0],Je(e),i??10,r)},n.copy=function(){return JL().domain(n.domain()).range(n.range())},n}const yy=new Map,eU=Symbol("vega_scale");function tU(e){return e[eU]=!0,e}function X5(e){return e&&e[eU]===!0}function lte(e,t,n){const i=function(){const a=t();return a.invertRange||(a.invertRange=a.invert?ite(a):a.invertExtent?rte(a):void 0),a.type=e,tU(a)};return i.metadata=ra(Ee(n)),i}function ut(e,t,n){return arguments.length>1?(yy.set(e,lte(e,t,n)),this):nU(e)?yy.get(e):void 0}ut(nte,BL);ut(Gf,UL,hn);ut(Ws,PL,[hn,Ws]);ut(Bp,PC,hn);ut(Ip,Bee,hn);ut(ob,qL,hn);ut(Nl,qee,[hn,WC]);ut(zl,jee,[hn,WC]);ut(Ua,jC,[hn,Lr]);ut(`${Ua}-${Gf}`,jC,[hn,Lr]);ut(`${Ua}-${Ws}`,YL,[hn,Lr,Ws]);ut(`${Ua}-${Bp}`,HC,[hn,Lr]);ut(`${Ua}-${Ip}`,Hee,[hn,Lr]);ut(`${Ua}-${ob}`,XL,[hn,Lr]);ut(`${kd}-${Gf}`,VL,[hn,Lr]);ut(`${kd}-${Ws}`,WL,[hn,Lr,Ws]);ut(`${kd}-${Bp}`,GC,[hn,Lr]);ut(`${kd}-${Ip}`,Gee,[hn,Lr]);ut(`${kd}-${ob}`,QL,[hn,Lr]);ut(Yf,jL,[qp,Yf]);ut(ub,HL,qp);ut(lb,GL,qp);ut(VC,JL,[Pp,qp]);ut(XC,DC,Pp);ut(ZL,QC,Pp);ut(yw,ate,Pp);function nU(e){return yy.has(e)}function ac(e,t){const n=yy.get(e);return n&&n.metadata[t]}function ZC(e){return ac(e,hn)}function Xf(e){return ac(e,Pp)}function vw(e){return ac(e,qp)}function iU(e){return ac(e,Ws)}function cte(e){return ac(e,WC)}function rU(e){return ac(e,Lr)}function aU(e){return ac(e,Yf)}const fte=["clamp","base","constant","exponent"];function sU(e,t){const n=t[0],i=Je(t)-n;return function(r){return e(n+r*i)}}function cb(e,t,n){return LC(KC(t||"rgb",n),e)}function oU(e,t){const n=new Array(t),i=t+1;for(let r=0;r<t;)n[r]=e(++r/i);return n}function uU(e,t,n){const i=n-t;let r,a,s;return!i||!Number.isFinite(i)?ii(.5):(r=(a=e.type).indexOf("-"),a=r<0?a:a.slice(r+1),s=ut(a)().domain([t,n]).range([0,1]),fte.forEach(o=>e[o]?s[o](e[o]()):0),s)}function KC(e,t){const n=Cee[dte(e)];return t!=null&&n&&n.gamma?n.gamma(t):n}function dte(e){return"interpolate"+e.toLowerCase().split("-").map(t=>t[0].toUpperCase()+t.slice(1)).join("")}const hte={blues:"cfe1f2bed8eca8cee58fc1de74b2d75ba3cf4592c63181bd206fb2125ca40a4a90",greens:"d3eecdc0e6baabdda594d3917bc77d60ba6c46ab5e329a512089430e7735036429",greys:"e2e2e2d4d4d4c4c4c4b1b1b19d9d9d8888887575756262624d4d4d3535351e1e1e",oranges:"fdd8b3fdc998fdb87bfda55efc9244f87f2cf06b18e4580bd14904b93d029f3303",purples:"e2e1efd4d4e8c4c5e0b4b3d6a3a0cc928ec3827cb97566ae684ea25c3696501f8c",reds:"fdc9b4fcb49afc9e80fc8767fa7051f6573fec3f2fdc2a25c81b1db21218970b13",blueGreen:"d5efedc1e8e0a7ddd18bd2be70c6a958ba9144ad77319c5d2089460e7736036429",bluePurple:"ccddecbad0e4a8c2dd9ab0d4919cc98d85be8b6db28a55a6873c99822287730f71",greenBlue:"d3eecec5e8c3b1e1bb9bd8bb82cec269c2ca51b2cd3c9fc7288abd1675b10b60a1",orangeRed:"fddcaffdcf9bfdc18afdad77fb9562f67d53ee6545e24932d32d1ebf130da70403",purpleBlue:"dbdaebc8cee4b1c3de97b7d87bacd15b9fc93a90c01e7fb70b70ab056199045281",purpleBlueGreen:"dbd8eac8cee4b0c3de93b7d872acd1549fc83892bb1c88a3097f8702736b016353",purpleRed:"dcc9e2d3b3d7ce9eccd186c0da6bb2e14da0e23189d91e6fc61159ab07498f023a",redPurple:"fccfccfcbec0faa9b8f98faff571a5ec539ddb3695c41b8aa908808d0179700174",yellowGreen:"e4f4acd1eca0b9e2949ed68880c97c62bb6e47aa5e3297502083440e723b036034",yellowOrangeBrown:"feeaa1fedd84fecc63feb746fca031f68921eb7215db5e0bc54c05ab3d038f3204",yellowOrangeRed:"fee087fed16ffebd59fea849fd903efc7335f9522bee3423de1b20ca0b22af0225",blueOrange:"134b852f78b35da2cb9dcae1d2e5eff2f0ebfce0bafbbf74e8932fc5690d994a07",brownBlueGreen:"704108a0651ac79548e3c78af3e6c6eef1eac9e9e48ed1c74da79e187a72025147",purpleGreen:"5b1667834792a67fb6c9aed3e6d6e8eff0efd9efd5aedda971bb75368e490e5e29",purpleOrange:"4114696647968f83b7b9b4d6dadbebf3eeeafce0bafbbf74e8932fc5690d994a07",redBlue:"8c0d25bf363adf745ef4ae91fbdbc9f2efeed2e5ef9dcae15da2cb2f78b3134b85",redGrey:"8c0d25bf363adf745ef4ae91fcdccbfaf4f1e2e2e2c0c0c0969696646464343434",yellowGreenBlue:"eff9bddbf1b4bde5b594d5b969c5be45b4c22c9ec02182b82163aa23479c1c3185",redYellowBlue:"a50026d4322cf16e43fcac64fedd90faf8c1dcf1ecabd6e875abd04a74b4313695",redYellowGreen:"a50026d4322cf16e43fcac63fedd8df9f7aed7ee8ea4d86e64bc6122964f006837",pinkYellowGreen:"8e0152c0267edd72adf0b3d6faddedf5f3efe1f2cab6de8780bb474f9125276419",spectral:"9e0142d13c4bf0704afcac63fedd8dfbf8b0e0f3a1a9dda269bda94288b55e4fa2",viridis:"440154470e61481a6c482575472f7d443a834144873d4e8a39568c35608d31688e2d708e2a788e27818e23888e21918d1f988b1fa08822a8842ab07f35b77943bf7154c56866cc5d7ad1518fd744a5db36bcdf27d2e21be9e51afde725",magma:"0000040404130b0924150e3720114b2c11603b0f704a107957157e651a80721f817f24828c29819a2e80a8327db6377ac43c75d1426fde4968e95462f1605df76f5cfa7f5efc8f65fe9f6dfeaf78febf84fece91fddea0fcedaffcfdbf",inferno:"0000040403130c0826170c3b240c4f330a5f420a68500d6c5d126e6b176e781c6d86216b932667a12b62ae305cbb3755c73e4cd24644dd513ae65c30ed6925f3771af8850ffb9506fca50afcb519fac62df6d645f2e661f3f484fcffa4",plasma:"0d088723069033059742039d5002a25d01a66a00a87801a88405a7900da49c179ea72198b12a90ba3488c33d80cb4779d35171da5a69e16462e76e5bed7953f2834cf68f44fa9a3dfca636fdb32ffec029fcce25f9dc24f5ea27f0f921",cividis:"00205100235800265d002961012b65042e670831690d346b11366c16396d1c3c6e213f6e26426e2c456e31476e374a6e3c4d6e42506e47536d4c566d51586e555b6e5a5e6e5e616e62646f66676f6a6a706e6d717270717573727976737c79747f7c75827f758682768985778c8877908b78938e789691789a94789e9778a19b78a59e77a9a177aea575b2a874b6ab73bbaf71c0b26fc5b66dc9b96acebd68d3c065d8c462ddc85fe2cb5ce7cf58ebd355f0d652f3da4ff7de4cfae249fce647",rainbow:"6e40aa883eb1a43db3bf3cafd83fa4ee4395fe4b83ff576eff6659ff7847ff8c38f3a130e2b72fcfcc36bee044aff05b8ff4576ff65b52f6673af27828ea8d1ddfa319d0b81cbecb23abd82f96e03d82e14c6edb5a5dd0664dbf6e40aa",sinebow:"ff4040fc582af47218e78d0bd5a703bfbf00a7d5038de70b72f41858fc2a40ff402afc5818f4720be78d03d5a700bfbf03a7d50b8de71872f42a58fc4040ff582afc7218f48d0be7a703d5bf00bfd503a7e70b8df41872fc2a58ff4040",turbo:"23171b32204a3e2a71453493493eae4b49c54a53d7485ee44569ee4074f53c7ff8378af93295f72e9ff42ba9ef28b3e926bce125c5d925cdcf27d5c629dcbc2de3b232e9a738ee9d3ff39347f68950f9805afc7765fd6e70fe667cfd5e88fc5795fb51a1f84badf545b9f140c5ec3cd0e637dae034e4d931ecd12ef4c92bfac029ffb626ffad24ffa223ff9821ff8d1fff821dff771cfd6c1af76118f05616e84b14df4111d5380fcb2f0dc0260ab61f07ac1805a313029b0f00950c00910b00",browns:"eedbbdecca96e9b97ae4a865dc9856d18954c7784cc0673fb85536ad44339f3632",tealBlues:"bce4d89dd3d181c3cb65b3c245a2b9368fae347da0306a932c5985",teals:"bbdfdfa2d4d58ac9c975bcbb61b0af4da5a43799982b8b8c1e7f7f127273006667",warmGreys:"dcd4d0cec5c1c0b8b4b3aaa7a59c9998908c8b827f7e7673726866665c5a59504e",goldGreen:"f4d166d5ca60b6c35c98bb597cb25760a6564b9c533f8f4f33834a257740146c36",goldOrange:"f4d166f8be5cf8aa4cf5983bf3852aef701be2621fd65322c54923b142239e3a26",goldRed:"f4d166f6be59f9aa51fc964ef6834bee734ae56249db5247cf4244c43141b71d3e",lightGreyRed:"efe9e6e1dad7d5cbc8c8bdb9bbaea9cd967ddc7b43e15f19df4011dc000b",lightGreyTeal:"e4eaead6dcddc8ced2b7c2c7a6b4bc64b0bf22a6c32295c11f85be1876bc",lightMulti:"e0f1f2c4e9d0b0de9fd0e181f6e072f6c053f3993ef77440ef4a3c",lightOrange:"f2e7daf7d5baf9c499fab184fa9c73f68967ef7860e8645bde515bd43d5b",lightTealBlue:"e3e9e0c0dccf9aceca7abfc859afc0389fb9328dad2f7ca0276b95255988",darkBlue:"3232322d46681a5c930074af008cbf05a7ce25c0dd38daed50f3faffffff",darkGold:"3c3c3c584b37725e348c7631ae8b2bcfa424ecc31ef9de30fff184ffffff",darkGreen:"3a3a3a215748006f4d048942489e4276b340a6c63dd2d836ffeb2cffffaa",darkMulti:"3737371f5287197d8c29a86995ce3fffe800ffffff",darkRed:"3434347036339e3c38cc4037e75d1eec8620eeab29f0ce32ffeb2c"},gte={accent:Xee,category10:Yee,category20:"1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5",category20b:"393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6",category20c:"3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9",dark2:Vee,observable10:Wee,paired:Qee,pastel1:Zee,pastel2:Kee,set1:Jee,set2:ete,set3:tte,tableau10:"4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac",tableau20:"4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5"};function lU(e){if(re(e))return e;const t=e.length/6|0,n=new Array(t);for(let i=0;i<t;)n[i]="#"+e.slice(i*6,++i*6);return n}function cU(e,t){for(const n in e)JC(n,t(e[n]))}const V5={};cU(gte,lU);cU(hte,e=>cb(lU(e)));function JC(e,t){return e=e&&e.toLowerCase(),arguments.length>1?(V5[e]=t,this):V5[e]}const M1="symbol",pte="discrete",mte="gradient",yte=e=>re(e)?e.map(t=>String(t)):String(e),vte=(e,t)=>e[1]-t[1],bte=(e,t)=>t[1]-e[1];function e3(e,t,n){let i;return st(t)&&(e.bins&&(t=Math.max(t,e.bins.length)),n!=null&&(t=Math.min(t,Math.floor(Dp(e.domain())/n||1)+1))),be(t)&&(i=t.step,t=t.interval),ve(t)&&(t=e.type===Nl?$d(t):e.type==zl?Cd(t):te("Only time and utc scales accept interval strings."),i&&(t=t.every(i))),t}function fU(e,t,n){let i=e.range(),r=i[0],a=Je(i),s=vte;if(r>a&&(i=a,a=r,r=i,s=bte),r=Math.floor(r),a=Math.ceil(a),t=t.map(o=>[o,e(o)]).filter(o=>r<=o[1]&&o[1]<=a).sort(s).map(o=>o[0]),n>0&&t.length>1){const o=[t[0],Je(t)];for(;t.length>n&&t.length>=3;)t=t.filter((l,f)=>!(f%2));t.length<3&&(t=o)}return t}function t3(e,t){return e.bins?fU(e,e.bins,t):e.ticks?e.ticks(t):e.domain()}function dU(e,t,n,i,r,a){const s=t.type;let o=yte;if(s===Nl||r===Nl)o=e.timeFormat(i);else if(s===zl||r===zl)o=e.utcFormat(i);else if(iU(s)){const l=e.formatFloat(i);if(a||t.bins)o=l;else{const f=hU(t,n,!1);o=d=>f(d)?l(d):""}}else if(t.tickFormat){const l=t.domain();o=e.formatSpan(l[0],l[l.length-1],n,i)}else i&&(o=e.format(i));return o}function hU(e,t,n){const i=t3(e,t),r=e.base(),a=Math.log(r),s=Math.max(1,r*t/i.length),o=l=>{let f=l/Math.pow(r,Math.round(Math.log(l)/a));return f*r<r-.5&&(f*=r),f<=s};return n?i.filter(o):o}const bw={[Yf]:"quantiles",[ub]:"thresholds",[lb]:"domain"},gU={[Yf]:"quantiles",[ub]:"domain"};function pU(e,t){return e.bins?Ste(e.bins):e.type===Ws?hU(e,t,!0):bw[e.type]?Ete(e[bw[e.type]]()):t3(e,t)}function xte(e,t,n){const i=t[gU[t.type]](),r=i.length;let a=r>1?i[1]-i[0]:i[0],s;for(s=1;s<r;++s)a=Math.min(a,i[s]-i[s-1]);return e.formatSpan(0,a,3*10,n)}function Ete(e){const t=[-1/0].concat(e);return t.max=1/0,t}function Ste(e){const t=e.slice(0,-1);return t.max=Je(e),t}const _te=e=>bw[e.type]||e.bins;function mU(e,t,n,i,r,a,s){const o=gU[t.type]&&a!==Nl&&a!==zl?xte(e,t,r):dU(e,t,n,r,a,s);return i===M1&&_te(t)?wte(o):i===pte?Ate(o):$te(o)}const wte=e=>(t,n,i)=>{const r=W5(i[n+1],W5(i.max,1/0)),a=Q5(t,e),s=Q5(r,e);return a&&s?a+"  "+s:s?"< "+s:" "+a},W5=(e,t)=>e??t,Ate=e=>(t,n)=>n?e(t):null,$te=e=>t=>e(t),Q5=(e,t)=>Number.isFinite(e)?t(e):null;function Cte(e){const t=e.domain(),n=t.length-1;let i=+t[0],r=+Je(t),a=r-i;if(e.type===lb){const s=n?a/n:.1;i-=s,r+=s,a=r-i}return s=>(s-i)/a}function Tte(e,t,n,i){const r=i||t.type;return ve(n)&&cte(r)&&(n=n.replace(/%a/g,"%A").replace(/%b/g,"%B")),!n&&r===Nl?e.timeFormat("%A, %d %B %Y, %X"):!n&&r===zl?e.utcFormat("%A, %d %B %Y, %X UTC"):mU(e,t,5,null,n,i,!0)}function yU(e,t,n){n=n||{};const i=Math.max(3,n.maxlen||7),r=Tte(e,t,n.format,n.formatType);if(vw(t.type)){const a=pU(t).slice(1).map(r),s=a.length;return`${s} boundar${s===1?"y":"ies"}: ${a.join(", ")}`}else if(Xf(t.type)){const a=t.domain(),s=a.length,o=s>i?a.slice(0,i-2).map(r).join(", ")+", ending with "+a.slice(-1).map(r):a.map(r).join(", ");return`${s} value${s===1?"":"s"}: ${o}`}else{const a=t.domain();return`values from ${r(a[0])} to ${r(Je(a))}`}}let vU=0;function Mte(){vU=0}const vy="p_";function n3(e){return e&&e.gradient}function bU(e,t,n){const i=e.gradient;let r=e.id,a=i==="radial"?vy:"";return r||(r=e.id="gradient_"+vU++,i==="radial"?(e.x1=Aa(e.x1,.5),e.y1=Aa(e.y1,.5),e.r1=Aa(e.r1,0),e.x2=Aa(e.x2,.5),e.y2=Aa(e.y2,.5),e.r2=Aa(e.r2,.5),a=vy):(e.x1=Aa(e.x1,0),e.y1=Aa(e.y1,0),e.x2=Aa(e.x2,1),e.y2=Aa(e.y2,0))),t[r]=e,"url("+(n||"")+"#"+a+r+")"}function Aa(e,t){return e??t}function xU(e,t){var n=[],i;return i={gradient:"linear",x1:e?e[0]:0,y1:e?e[1]:0,x2:t?t[0]:1,y2:t?t[1]:0,stops:n,stop:function(r,a){return n.push({offset:r,color:a}),i}}}const Z5={basis:{curve:AJ},"basis-closed":{curve:$J},"basis-open":{curve:CJ},bundle:{curve:TJ,tension:"beta",value:.85},cardinal:{curve:MJ,tension:"tension",value:0},"cardinal-open":{curve:OJ,tension:"tension",value:0},"cardinal-closed":{curve:kJ,tension:"tension",value:0},"catmull-rom":{curve:DJ,tension:"alpha",value:.5},"catmull-rom-closed":{curve:RJ,tension:"alpha",value:.5},"catmull-rom-open":{curve:NJ,tension:"alpha",value:.5},linear:{curve:CC},"linear-closed":{curve:zJ},monotone:{horizontal:LJ,vertical:FJ},natural:{curve:UJ},step:{curve:BJ},"step-after":{curve:PJ},"step-before":{curve:IJ}};function i3(e,t,n){var i=_e(Z5,e)&&Z5[e],r=null;return i&&(r=i.curve||i[t||"vertical"],i.tension&&n!=null&&(r=r[i.tension](n))),r}const kte={m:2,l:2,h:1,v:1,z:0,c:6,s:4,q:4,t:2,a:7},Ote=/[mlhvzcsqta]([^mlhvzcsqta]+|$)/gi,Dte=/^[+-]?(([0-9]*\.[0-9]+)|([0-9]+\.)|([0-9]+))([eE][+-]?[0-9]+)?/,Rte=/^((\s+,?\s*)|(,\s*))/,Nte=/^[01]/;function Vf(e){const t=[];return(e.match(Ote)||[]).forEach(i=>{let r=i[0];const a=r.toLowerCase(),s=kte[a],o=zte(a,s,i.slice(1).trim()),l=o.length;if(l<s||l&&l%s!==0)throw Error("Invalid SVG path, incorrect parameter count");if(t.push([r,...o.slice(0,s)]),l!==s){a==="m"&&(r=r==="M"?"L":"l");for(let f=s;f<l;f+=s)t.push([r,...o.slice(f,f+s)])}}),t}function zte(e,t,n){const i=[];for(let r=0;t&&r<n.length;)for(let a=0;a<t;++a){const s=e==="a"&&(a===3||a===4)?Nte:Dte,o=n.slice(r).match(s);if(o===null)throw Error("Invalid SVG path, incorrect parameter type");r+=o[0].length,i.push(+o[0]);const l=n.slice(r).match(Rte);l!==null&&(r+=l[0].length)}return i}const cu=Math.PI/180,Fte=1e-14,gl=Math.PI/2,Oa=Math.PI*2,sf=Math.sqrt(3)/2;var SS={},_S={},EU=[].join;function Lte(e,t,n,i,r,a,s,o,l){const f=EU.call(arguments);if(SS[f])return SS[f];const d=s*cu,g=Math.sin(d),p=Math.cos(d);n=Math.abs(n),i=Math.abs(i);const y=p*(o-e)*.5+g*(l-t)*.5,v=p*(l-t)*.5-g*(o-e)*.5;let b=y*y/(n*n)+v*v/(i*i);b>1&&(b=Math.sqrt(b),n*=b,i*=b);const E=p/n,_=g/n,w=-g/i,A=p/i,$=E*o+_*l,C=w*o+A*l,k=E*e+_*t,M=w*e+A*t;let z=1/((k-$)*(k-$)+(M-C)*(M-C))-.25;z<0&&(z=0);let B=Math.sqrt(z);a==r&&(B=-B);const U=.5*($+k)-B*(M-C),V=.5*(C+M)+B*(k-$),G=Math.atan2(C-V,$-U);let F=Math.atan2(M-V,k-U)-G;F<0&&a===1?F+=Oa:F>0&&a===0&&(F-=Oa);const D=Math.ceil(Math.abs(F/(gl+.001))),I=[];for(let Y=0;Y<D;++Y){const K=G+Y*F/D,N=G+(Y+1)*F/D;I[Y]=[U,V,K,N,n,i,g,p]}return SS[f]=I}function Ute(e){const t=EU.call(e);if(_S[t])return _S[t];var n=e[0],i=e[1],r=e[2],a=e[3],s=e[4],o=e[5],l=e[6],f=e[7];const d=f*s,g=-l*o,p=l*s,y=f*o,v=Math.cos(r),b=Math.sin(r),E=Math.cos(a),_=Math.sin(a),w=.5*(a-r),A=Math.sin(w*.5),$=8/3*A*A/Math.sin(w),C=n+v-$*b,k=i+b+$*v,M=n+E,R=i+_,z=M+$*_,B=R-$*E;return _S[t]=[d*C+g*k,p*C+y*k,d*z+g*B,p*z+y*B,d*M+g*R,p*M+y*R]}const xr=["l",0,0,0,0,0,0,0];function Bte(e,t,n){const i=xr[0]=e[0];if(i==="a"||i==="A")xr[1]=t*e[1],xr[2]=n*e[2],xr[3]=e[3],xr[4]=e[4],xr[5]=e[5],xr[6]=t*e[6],xr[7]=n*e[7];else if(i==="h"||i==="H")xr[1]=t*e[1];else if(i==="v"||i==="V")xr[1]=n*e[1];else for(var r=1,a=e.length;r<a;++r)xr[r]=(r%2==1?t:n)*e[r];return xr}function up(e,t,n,i,r,a){var s,o=null,l=0,f=0,d=0,g=0,p,y,v,b,E=0,_=0;n==null&&(n=0),i==null&&(i=0),r==null&&(r=1),a==null&&(a=r),e.beginPath&&e.beginPath();for(var w=0,A=t.length;w<A;++w){switch(s=t[w],(r!==1||a!==1)&&(s=Bte(s,r,a)),s[0]){case"l":l+=s[1],f+=s[2],e.lineTo(l+n,f+i);break;case"L":l=s[1],f=s[2],e.lineTo(l+n,f+i);break;case"h":l+=s[1],e.lineTo(l+n,f+i);break;case"H":l=s[1],e.lineTo(l+n,f+i);break;case"v":f+=s[1],e.lineTo(l+n,f+i);break;case"V":f=s[1],e.lineTo(l+n,f+i);break;case"m":l+=s[1],f+=s[2],E=l,_=f,e.moveTo(l+n,f+i);break;case"M":l=s[1],f=s[2],E=l,_=f,e.moveTo(l+n,f+i);break;case"c":p=l+s[5],y=f+s[6],d=l+s[3],g=f+s[4],e.bezierCurveTo(l+s[1]+n,f+s[2]+i,d+n,g+i,p+n,y+i),l=p,f=y;break;case"C":l=s[5],f=s[6],d=s[3],g=s[4],e.bezierCurveTo(s[1]+n,s[2]+i,d+n,g+i,l+n,f+i);break;case"s":p=l+s[3],y=f+s[4],d=2*l-d,g=2*f-g,e.bezierCurveTo(d+n,g+i,l+s[1]+n,f+s[2]+i,p+n,y+i),d=l+s[1],g=f+s[2],l=p,f=y;break;case"S":p=s[3],y=s[4],d=2*l-d,g=2*f-g,e.bezierCurveTo(d+n,g+i,s[1]+n,s[2]+i,p+n,y+i),l=p,f=y,d=s[1],g=s[2];break;case"q":p=l+s[3],y=f+s[4],d=l+s[1],g=f+s[2],e.quadraticCurveTo(d+n,g+i,p+n,y+i),l=p,f=y;break;case"Q":p=s[3],y=s[4],e.quadraticCurveTo(s[1]+n,s[2]+i,p+n,y+i),l=p,f=y,d=s[1],g=s[2];break;case"t":p=l+s[1],y=f+s[2],o[0].match(/[QqTt]/)===null?(d=l,g=f):o[0]==="t"?(d=2*l-v,g=2*f-b):o[0]==="q"&&(d=2*l-d,g=2*f-g),v=d,b=g,e.quadraticCurveTo(d+n,g+i,p+n,y+i),l=p,f=y,d=l+s[1],g=f+s[2];break;case"T":p=s[1],y=s[2],d=2*l-d,g=2*f-g,e.quadraticCurveTo(d+n,g+i,p+n,y+i),l=p,f=y;break;case"a":K5(e,l+n,f+i,[s[1],s[2],s[3],s[4],s[5],s[6]+l+n,s[7]+f+i]),l+=s[6],f+=s[7];break;case"A":K5(e,l+n,f+i,[s[1],s[2],s[3],s[4],s[5],s[6]+n,s[7]+i]),l=s[6],f=s[7];break;case"z":case"Z":l=E,f=_,e.closePath();break}o=s}}function K5(e,t,n,i){const r=Lte(i[5],i[6],i[0],i[1],i[3],i[4],i[2],t,n);for(let a=0;a<r.length;++a){const s=Ute(r[a]);e.bezierCurveTo(s[0],s[1],s[2],s[3],s[4],s[5])}}const J5=.5773502691896257,e6={circle:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(n,0),e.arc(0,0,n,0,Oa)}},cross:{draw:function(e,t){var n=Math.sqrt(t)/2,i=n/2.5;e.moveTo(-n,-i),e.lineTo(-n,i),e.lineTo(-i,i),e.lineTo(-i,n),e.lineTo(i,n),e.lineTo(i,i),e.lineTo(n,i),e.lineTo(n,-i),e.lineTo(i,-i),e.lineTo(i,-n),e.lineTo(-i,-n),e.lineTo(-i,-i),e.closePath()}},diamond:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(0,-n),e.lineTo(n,0),e.lineTo(0,n),e.closePath()}},square:{draw:function(e,t){var n=Math.sqrt(t),i=-n/2;e.rect(i,i,n,n)}},arrow:{draw:function(e,t){var n=Math.sqrt(t)/2,i=n/7,r=n/2.5,a=n/8;e.moveTo(-i,n),e.lineTo(i,n),e.lineTo(i,-a),e.lineTo(r,-a),e.lineTo(0,-n),e.lineTo(-r,-a),e.lineTo(-i,-a),e.closePath()}},wedge:{draw:function(e,t){var n=Math.sqrt(t)/2,i=sf*n,r=i-n*J5,a=n/4;e.moveTo(0,-i-r),e.lineTo(-a,i-r),e.lineTo(a,i-r),e.closePath()}},triangle:{draw:function(e,t){var n=Math.sqrt(t)/2,i=sf*n,r=i-n*J5;e.moveTo(0,-i-r),e.lineTo(-n,i-r),e.lineTo(n,i-r),e.closePath()}},"triangle-up":{draw:function(e,t){var n=Math.sqrt(t)/2,i=sf*n;e.moveTo(0,-i),e.lineTo(-n,i),e.lineTo(n,i),e.closePath()}},"triangle-down":{draw:function(e,t){var n=Math.sqrt(t)/2,i=sf*n;e.moveTo(0,i),e.lineTo(-n,-i),e.lineTo(n,-i),e.closePath()}},"triangle-right":{draw:function(e,t){var n=Math.sqrt(t)/2,i=sf*n;e.moveTo(i,0),e.lineTo(-i,-n),e.lineTo(-i,n),e.closePath()}},"triangle-left":{draw:function(e,t){var n=Math.sqrt(t)/2,i=sf*n;e.moveTo(-i,0),e.lineTo(i,-n),e.lineTo(i,n),e.closePath()}},stroke:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(n,0)}}};function SU(e){return _e(e6,e)?e6[e]:Ite(e)}var wS={};function Ite(e){if(!_e(wS,e)){const t=Vf(e);wS[e]={draw:function(n,i){up(n,t,0,0,Math.sqrt(i)/2)}}}return wS[e]}const No=.448084975506;function Pte(e){return e.x}function qte(e){return e.y}function jte(e){return e.width}function Hte(e){return e.height}function As(e){return typeof e=="function"?e:()=>+e}function Xm(e,t,n){return Math.max(t,Math.min(e,n))}function _U(){var e=Pte,t=qte,n=jte,i=Hte,r=As(0),a=r,s=r,o=r,l=null;function f(d,g,p){var y,v=g??+e.call(this,d),b=p??+t.call(this,d),E=+n.call(this,d),_=+i.call(this,d),w=Math.min(E,_)/2,A=Xm(+r.call(this,d),0,w),$=Xm(+a.call(this,d),0,w),C=Xm(+s.call(this,d),0,w),k=Xm(+o.call(this,d),0,w);if(l||(l=y=Zv()),A<=0&&$<=0&&C<=0&&k<=0)l.rect(v,b,E,_);else{var M=v+E,R=b+_;l.moveTo(v+A,b),l.lineTo(M-$,b),l.bezierCurveTo(M-No*$,b,M,b+No*$,M,b+$),l.lineTo(M,R-k),l.bezierCurveTo(M,R-No*k,M-No*k,R,M-k,R),l.lineTo(v+C,R),l.bezierCurveTo(v+No*C,R,v,R-No*C,v,R-C),l.lineTo(v,b+A),l.bezierCurveTo(v,b+No*A,v+No*A,b,v+A,b),l.closePath()}if(y)return l=null,y+""||null}return f.x=function(d){return arguments.length?(e=As(d),f):e},f.y=function(d){return arguments.length?(t=As(d),f):t},f.width=function(d){return arguments.length?(n=As(d),f):n},f.height=function(d){return arguments.length?(i=As(d),f):i},f.cornerRadius=function(d,g,p,y){return arguments.length?(r=As(d),a=g!=null?As(g):r,o=p!=null?As(p):r,s=y!=null?As(y):a,f):r},f.context=function(d){return arguments.length?(l=d??null,f):l},f}function wU(){var e,t,n,i,r=null,a,s,o,l;function f(g,p,y){const v=y/2;if(a){var b=o-p,E=g-s;if(b||E){var _=Math.hypot(b,E),w=(b/=_)*l,A=(E/=_)*l,$=Math.atan2(E,b);r.moveTo(s-w,o-A),r.lineTo(g-b*v,p-E*v),r.arc(g,p,v,$-Math.PI,$),r.lineTo(s+w,o+A),r.arc(s,o,l,$,$+Math.PI)}else r.arc(g,p,v,0,Oa);r.closePath()}else a=1;s=g,o=p,l=v}function d(g){var p,y=g.length,v,b=!1,E;for(r==null&&(r=E=Zv()),p=0;p<=y;++p)!(p<y&&i(v=g[p],p,g))===b&&(b=!b)&&(a=0),b&&f(+e(v,p,g),+t(v,p,g),+n(v,p,g));if(E)return r=null,E+""||null}return d.x=function(g){return arguments.length?(e=g,d):e},d.y=function(g){return arguments.length?(t=g,d):t},d.size=function(g){return arguments.length?(n=g,d):n},d.defined=function(g){return arguments.length?(i=g,d):i},d.context=function(g){return arguments.length?(g==null?r=null:r=g,d):r},d}function jp(e,t){return e??t}const Hp=e=>e.x||0,Gp=e=>e.y||0,Gte=e=>e.width||0,Yte=e=>e.height||0,Xte=e=>(e.x||0)+(e.width||0),Vte=e=>(e.y||0)+(e.height||0),Wte=e=>e.startAngle||0,Qte=e=>e.endAngle||0,Zte=e=>e.padAngle||0,Kte=e=>e.innerRadius||0,Jte=e=>e.outerRadius||0,ene=e=>e.cornerRadius||0,tne=e=>jp(e.cornerRadiusTopLeft,e.cornerRadius)||0,nne=e=>jp(e.cornerRadiusTopRight,e.cornerRadius)||0,ine=e=>jp(e.cornerRadiusBottomRight,e.cornerRadius)||0,rne=e=>jp(e.cornerRadiusBottomLeft,e.cornerRadius)||0,ane=e=>jp(e.size,64),sne=e=>e.size||1,fb=e=>e.defined!==!1,one=e=>SU(e.shape||"circle"),une=SJ().startAngle(Wte).endAngle(Qte).padAngle(Zte).innerRadius(Kte).outerRadius(Jte).cornerRadius(ene),lne=J7().x(Hp).y1(Gp).y0(Vte).defined(fb),cne=J7().y(Gp).x1(Hp).x0(Xte).defined(fb),fne=K7().x(Hp).y(Gp).defined(fb),dne=_U().x(Hp).y(Gp).width(Gte).height(Yte).cornerRadius(tne,nne,ine,rne),hne=wJ().type(one).size(ane),gne=wU().x(Hp).y(Gp).defined(fb).size(sne);function r3(e){return e.cornerRadius||e.cornerRadiusTopLeft||e.cornerRadiusTopRight||e.cornerRadiusBottomRight||e.cornerRadiusBottomLeft}function pne(e,t){return une.context(e)(t)}function mne(e,t){const n=t[0],i=n.interpolate||"linear";return(n.orient==="horizontal"?cne:lne).curve(i3(i,n.orient,n.tension)).context(e)(t)}function yne(e,t){const n=t[0],i=n.interpolate||"linear";return fne.curve(i3(i,n.orient,n.tension)).context(e)(t)}function Od(e,t,n,i){return dne.context(e)(t,n,i)}function vne(e,t){return(t.mark.shape||t.shape).context(e)(t)}function bne(e,t){return hne.context(e)(t)}function xne(e,t){return gne.context(e)(t)}var AU=1;function Ene(){AU=1}function a3(e,t,n){var i=t.clip,r=e._defs,a=t.clip_id||(t.clip_id="clip"+AU++),s=r.clipping[a]||(r.clipping[a]={id:a});return qe(i)?s.path=i(null):r3(n)?s.path=Od(null,n,0,0):(s.width=n.width||0,s.height=n.height||0),"url(#"+a+")"}function rn(e){this.clear(),e&&this.union(e)}rn.prototype={clone(){return new rn(this)},clear(){return this.x1=+Number.MAX_VALUE,this.y1=+Number.MAX_VALUE,this.x2=-Number.MAX_VALUE,this.y2=-Number.MAX_VALUE,this},empty(){return this.x1===+Number.MAX_VALUE&&this.y1===+Number.MAX_VALUE&&this.x2===-Number.MAX_VALUE&&this.y2===-Number.MAX_VALUE},equals(e){return this.x1===e.x1&&this.y1===e.y1&&this.x2===e.x2&&this.y2===e.y2},set(e,t,n,i){return n<e?(this.x2=e,this.x1=n):(this.x1=e,this.x2=n),i<t?(this.y2=t,this.y1=i):(this.y1=t,this.y2=i),this},add(e,t){return e<this.x1&&(this.x1=e),t<this.y1&&(this.y1=t),e>this.x2&&(this.x2=e),t>this.y2&&(this.y2=t),this},expand(e){return this.x1-=e,this.y1-=e,this.x2+=e,this.y2+=e,this},round(){return this.x1=Math.floor(this.x1),this.y1=Math.floor(this.y1),this.x2=Math.ceil(this.x2),this.y2=Math.ceil(this.y2),this},scale(e){return this.x1*=e,this.y1*=e,this.x2*=e,this.y2*=e,this},translate(e,t){return this.x1+=e,this.x2+=e,this.y1+=t,this.y2+=t,this},rotate(e,t,n){const i=this.rotatedPoints(e,t,n);return this.clear().add(i[0],i[1]).add(i[2],i[3]).add(i[4],i[5]).add(i[6],i[7])},rotatedPoints(e,t,n){var{x1:i,y1:r,x2:a,y2:s}=this,o=Math.cos(e),l=Math.sin(e),f=t-t*o+n*l,d=n-t*l-n*o;return[o*i-l*r+f,l*i+o*r+d,o*i-l*s+f,l*i+o*s+d,o*a-l*r+f,l*a+o*r+d,o*a-l*s+f,l*a+o*s+d]},union(e){return e.x1<this.x1&&(this.x1=e.x1),e.y1<this.y1&&(this.y1=e.y1),e.x2>this.x2&&(this.x2=e.x2),e.y2>this.y2&&(this.y2=e.y2),this},intersect(e){return e.x1>this.x1&&(this.x1=e.x1),e.y1>this.y1&&(this.y1=e.y1),e.x2<this.x2&&(this.x2=e.x2),e.y2<this.y2&&(this.y2=e.y2),this},encloses(e){return e&&this.x1<=e.x1&&this.x2>=e.x2&&this.y1<=e.y1&&this.y2>=e.y2},alignsWith(e){return e&&(this.x1==e.x1||this.x2==e.x2||this.y1==e.y1||this.y2==e.y2)},intersects(e){return e&&!(this.x2<e.x1||this.x1>e.x2||this.y2<e.y1||this.y1>e.y2)},contains(e,t){return!(e<this.x1||e>this.x2||t<this.y1||t>this.y2)},width(){return this.x2-this.x1},height(){return this.y2-this.y1}};function db(e){this.mark=e,this.bounds=this.bounds||new rn}function hb(e){db.call(this,e),this.items=this.items||[]}pe(hb,db);class $U{constructor(t){this._pending=0,this._loader=t||Bv()}pending(){return this._pending}sanitizeURL(t){const n=this;return t6(n),n._loader.sanitize(t,{context:"href"}).then(i=>(Jh(n),i)).catch(()=>(Jh(n),null))}loadImage(t){const n=this,i=qJ();return t6(n),n._loader.sanitize(t,{context:"image"}).then(r=>{const a=r.href;if(!a||!i)throw{url:a};const s=new i,o=_e(r,"crossOrigin")?r.crossOrigin:"anonymous";return o!=null&&(s.crossOrigin=o),s.onload=()=>Jh(n),s.onerror=()=>Jh(n),s.src=a,s}).catch(r=>(Jh(n),{complete:!1,width:0,height:0,src:r&&r.url||""}))}ready(){const t=this;return new Promise(n=>{function i(r){t.pending()?setTimeout(()=>{i(!0)},10):n(r)}i(!1)})}}function t6(e){e._pending+=1}function Jh(e){e._pending-=1}function eo(e,t,n){if(t.stroke&&t.opacity!==0&&t.strokeOpacity!==0){const i=t.strokeWidth!=null?+t.strokeWidth:1;e.expand(i+(n?Sne(t,i):0))}return e}function Sne(e,t){return e.strokeJoin&&e.strokeJoin!=="miter"?0:t}const _ne=Oa-1e-8;let gb,k1,O1,xl,xw,D1,Ew,Sw;const Ho=(e,t)=>gb.add(e,t),R1=(e,t)=>Ho(k1=e,O1=t),n6=e=>Ho(e,gb.y1),i6=e=>Ho(gb.x1,e),pl=(e,t)=>xw*e+Ew*t,ml=(e,t)=>D1*e+Sw*t,AS=(e,t)=>Ho(pl(e,t),ml(e,t)),$S=(e,t)=>R1(pl(e,t),ml(e,t));function Yp(e,t){return gb=e,t?(xl=t*cu,xw=Sw=Math.cos(xl),D1=Math.sin(xl),Ew=-D1):(xw=Sw=1,xl=D1=Ew=0),wne}const wne={beginPath(){},closePath(){},moveTo:$S,lineTo:$S,rect(e,t,n,i){xl?(AS(e+n,t),AS(e+n,t+i),AS(e,t+i),$S(e,t)):(Ho(e+n,t+i),R1(e,t))},quadraticCurveTo(e,t,n,i){const r=pl(e,t),a=ml(e,t),s=pl(n,i),o=ml(n,i);r6(k1,r,s,n6),r6(O1,a,o,i6),R1(s,o)},bezierCurveTo(e,t,n,i,r,a){const s=pl(e,t),o=ml(e,t),l=pl(n,i),f=ml(n,i),d=pl(r,a),g=ml(r,a);a6(k1,s,l,d,n6),a6(O1,o,f,g,i6),R1(d,g)},arc(e,t,n,i,r,a){if(i+=xl,r+=xl,k1=n*Math.cos(r)+e,O1=n*Math.sin(r)+t,Math.abs(r-i)>_ne)Ho(e-n,t-n),Ho(e+n,t+n);else{const s=f=>Ho(n*Math.cos(f)+e,n*Math.sin(f)+t);let o,l;if(s(i),s(r),r!==i)if(i=i%Oa,i<0&&(i+=Oa),r=r%Oa,r<0&&(r+=Oa),r<i&&(a=!a,o=i,i=r,r=o),a)for(r-=Oa,o=i-i%gl,l=0;l<4&&o>r;++l,o-=gl)s(o);else for(o=i-i%gl+gl,l=0;l<4&&o<r;++l,o=o+gl)s(o)}}};function r6(e,t,n,i){const r=(e-t)/(e+n-2*t);0<r&&r<1&&i(e+(t-e)*r)}function a6(e,t,n,i,r){const a=i-e+3*t-3*n,s=e+n-2*t,o=e-t;let l=0,f=0,d;Math.abs(a)>Fte?(d=s*s+o*a,d>=0&&(d=Math.sqrt(d),l=(-s+d)/a,f=(-s-d)/a)):l=.5*o/s,0<l&&l<1&&r(s6(l,e,t,n,i)),0<f&&f<1&&r(s6(f,e,t,n,i))}function s6(e,t,n,i,r){const a=1-e,s=a*a,o=e*e;return s*a*t+3*s*e*n+3*a*o*i+o*e*r}var iu=(iu=nu(1,1))?iu.getContext("2d"):null;const _w=new rn;function s3(e){return function(t,n){if(!iu)return!0;e(iu,t),_w.clear().union(t.bounds).intersect(n).round();const{x1:i,y1:r,x2:a,y2:s}=_w;for(let o=r;o<=s;++o)for(let l=i;l<=a;++l)if(iu.isPointInPath(l,o))return!0;return!1}}function o3(e,t){return t.contains(e.x||0,e.y||0)}function CU(e,t){const n=e.x||0,i=e.y||0,r=e.width||0,a=e.height||0;return t.intersects(_w.set(n,i,n+r,i+a))}function TU(e,t){const n=e.x||0,i=e.y||0,r=e.x2!=null?e.x2:n,a=e.y2!=null?e.y2:i;return xf(t,n,i,r,a)}function xf(e,t,n,i,r){const{x1:a,y1:s,x2:o,y2:l}=e,f=i-t,d=r-n;let g=0,p=1,y,v,b,E;for(E=0;E<4;++E){if(E===0&&(y=-f,v=-(a-t)),E===1&&(y=f,v=o-t),E===2&&(y=-d,v=-(s-n)),E===3&&(y=d,v=l-n),Math.abs(y)<1e-10&&v<0)return!1;if(b=v/y,y<0){if(b>p)return!1;b>g&&(g=b)}else if(y>0){if(b<g)return!1;b<p&&(p=b)}}return!0}function Wf(e,t){e.globalCompositeOperation=t.blend||"source-over"}function Hr(e,t){return e??t}function o6(e,t){const n=t.length;for(let i=0;i<n;++i)e.addColorStop(t[i].offset,t[i].color);return e}function Ane(e,t,n){const i=n.width(),r=n.height();let a;if(t.gradient==="radial")a=e.createRadialGradient(n.x1+Hr(t.x1,.5)*i,n.y1+Hr(t.y1,.5)*r,Math.max(i,r)*Hr(t.r1,0),n.x1+Hr(t.x2,.5)*i,n.y1+Hr(t.y2,.5)*r,Math.max(i,r)*Hr(t.r2,.5));else{const s=Hr(t.x1,0),o=Hr(t.y1,0),l=Hr(t.x2,1),f=Hr(t.y2,0);if(s===l||o===f||i===r)a=e.createLinearGradient(n.x1+s*i,n.y1+o*r,n.x1+l*i,n.y1+f*r);else{const d=nu(Math.ceil(i),Math.ceil(r)),g=d.getContext("2d");return g.scale(i,r),g.fillStyle=o6(g.createLinearGradient(s,o,l,f),t.stops),g.fillRect(0,0,i,r),e.createPattern(d,"no-repeat")}}return o6(a,t.stops)}function MU(e,t,n){return n3(n)?Ane(e,n,t.bounds):n}function by(e,t,n){return n*=t.fillOpacity==null?1:t.fillOpacity,n>0?(e.globalAlpha=n,e.fillStyle=MU(e,t,t.fill),!0):!1}var $ne=[];function Qf(e,t,n){var i=(i=t.strokeWidth)!=null?i:1;return i<=0?!1:(n*=t.strokeOpacity==null?1:t.strokeOpacity,n>0?(e.globalAlpha=n,e.strokeStyle=MU(e,t,t.stroke),e.lineWidth=i,e.lineCap=t.strokeCap||"butt",e.lineJoin=t.strokeJoin||"miter",e.miterLimit=t.strokeMiterLimit||10,e.setLineDash&&(e.setLineDash(t.strokeDash||$ne),e.lineDashOffset=t.strokeDashOffset||0),!0):!1)}function Cne(e,t){return e.zindex-t.zindex||e.index-t.index}function u3(e){if(!e.zdirty)return e.zitems;var t=e.items,n=[],i,r,a;for(r=0,a=t.length;r<a;++r)i=t[r],i.index=r,i.zindex&&n.push(i);return e.zdirty=!1,e.zitems=n.sort(Cne)}function sa(e,t){var n=e.items,i,r;if(!n||!n.length)return;const a=u3(e);if(a&&a.length){for(i=0,r=n.length;i<r;++i)n[i].zindex||t(n[i]);n=a}for(i=0,r=n.length;i<r;++i)t(n[i])}function xy(e,t){var n=e.items,i,r;if(!n||!n.length)return null;const a=u3(e);for(a&&a.length&&(n=a),r=n.length;--r>=0;)if(i=t(n[r]))return i;if(n===a){for(n=e.items,r=n.length;--r>=0;)if(!n[r].zindex&&(i=t(n[r])))return i}return null}function l3(e){return function(t,n,i){sa(n,r=>{(!i||i.intersects(r.bounds))&&kU(e,t,r,r)})}}function Tne(e){return function(t,n,i){n.items.length&&(!i||i.intersects(n.bounds))&&kU(e,t,n.items[0],n.items)}}function kU(e,t,n,i){var r=n.opacity==null?1:n.opacity;r!==0&&(e(t,i)||(Wf(t,n),n.fill&&by(t,n,r)&&t.fill(),n.stroke&&Qf(t,n,r)&&t.stroke()))}function pb(e){return e=e||Or,function(t,n,i,r,a,s){return i*=t.pixelRatio,r*=t.pixelRatio,xy(n,o=>{const l=o.bounds;if(!(l&&!l.contains(a,s)||!l)&&e(t,o,i,r,a,s))return o})}}function Xp(e,t){return function(n,i,r,a){var s=Array.isArray(i)?i[0]:i,o=t??s.fill,l=s.stroke&&n.isPointInStroke,f,d;return l&&(f=s.strokeWidth,d=s.strokeCap,n.lineWidth=f??1,n.lineCap=d??"butt"),e(n,i)?!1:o&&n.isPointInPath(r,a)||l&&n.isPointInStroke(r,a)}}function c3(e){return pb(Xp(e))}function Al(e,t){return"translate("+e+","+t+")"}function f3(e){return"rotate("+e+")"}function Mne(e,t){return"scale("+e+","+t+")"}function OU(e){return Al(e.x||0,e.y||0)}function kne(e){return Al(e.x||0,e.y||0)+(e.angle?" "+f3(e.angle):"")}function One(e){return Al(e.x||0,e.y||0)+(e.angle?" "+f3(e.angle):"")+(e.scaleX||e.scaleY?" "+Mne(e.scaleX||1,e.scaleY||1):"")}function d3(e,t,n){function i(s,o){s("transform",kne(o)),s("d",t(null,o))}function r(s,o){return t(Yp(s,o.angle),o),eo(s,o).translate(o.x||0,o.y||0)}function a(s,o){var l=o.x||0,f=o.y||0,d=o.angle||0;s.translate(l,f),d&&s.rotate(d*=cu),s.beginPath(),t(s,o),d&&s.rotate(-d),s.translate(-l,-f)}return{type:e,tag:"path",nested:!1,attr:i,bound:r,draw:l3(a),pick:c3(a),isect:n||s3(a)}}var Dne=d3("arc",pne);function Rne(e,t){for(var n=e[0].orient==="horizontal"?t[1]:t[0],i=e[0].orient==="horizontal"?"y":"x",r=e.length,a=1/0,s,o;--r>=0;)e[r].defined!==!1&&(o=Math.abs(e[r][i]-n),o<a&&(a=o,s=e[r]));return s}function Nne(e,t){for(var n=Math.pow(e[0].strokeWidth||1,2),i=e.length,r,a,s;--i>=0;)if(e[i].defined!==!1&&(r=e[i].x-t[0],a=e[i].y-t[1],s=r*r+a*a,s<n))return e[i];return null}function zne(e,t){for(var n=e.length,i,r,a;--n>=0;)if(e[n].defined!==!1&&(i=e[n].x-t[0],r=e[n].y-t[1],a=i*i+r*r,i=e[n].size||1,a<i*i))return e[n];return null}function h3(e,t,n){function i(l,f){var d=f.mark.items;d.length&&l("d",t(null,d))}function r(l,f){var d=f.items;return d.length===0?l:(t(Yp(l),d),eo(l,d[0]))}function a(l,f){l.beginPath(),t(l,f)}const s=Xp(a);function o(l,f,d,g,p,y){var v=f.items,b=f.bounds;return!v||!v.length||b&&!b.contains(p,y)?null:(d*=l.pixelRatio,g*=l.pixelRatio,s(l,v,d,g)?v[0]:null)}return{type:e,tag:"path",nested:!0,attr:i,bound:r,draw:Tne(a),pick:o,isect:o3,tip:n}}var Fne=h3("area",mne,Rne);function Lne(e,t){var n=t.clip;e.save(),qe(n)?(e.beginPath(),n(e),e.clip()):DU(e,t.group)}function DU(e,t){e.beginPath(),r3(t)?Od(e,t,0,0):e.rect(0,0,t.width||0,t.height||0),e.clip()}function RU(e){const t=Hr(e.strokeWidth,1);return e.strokeOffset!=null?e.strokeOffset:e.stroke&&t>.5&&t<1.5?.5-Math.abs(t-1):0}function Une(e,t){e("transform",OU(t))}function NU(e,t){const n=RU(t);e("d",Od(null,t,n,n))}function Bne(e,t){e("class","background"),e("aria-hidden",!0),NU(e,t)}function Ine(e,t){e("class","foreground"),e("aria-hidden",!0),t.strokeForeground?NU(e,t):e("d","")}function Pne(e,t,n){const i=t.clip?a3(n,t,t):null;e("clip-path",i)}function qne(e,t){if(!t.clip&&t.items){const n=t.items,i=n.length;for(let r=0;r<i;++r)e.union(n[r].bounds)}return(t.clip||t.width||t.height)&&!t.noBound&&e.add(0,0).add(t.width||0,t.height||0),eo(e,t),e.translate(t.x||0,t.y||0)}function lp(e,t,n,i){const r=RU(t);e.beginPath(),Od(e,t,(n||0)+r,(i||0)+r)}const jne=Xp(lp),Hne=Xp(lp,!1),Gne=Xp(lp,!0);function Yne(e,t,n,i){sa(t,r=>{const a=r.x||0,s=r.y||0,o=r.strokeForeground,l=r.opacity==null?1:r.opacity;(r.stroke||r.fill)&&l&&(lp(e,r,a,s),Wf(e,r),r.fill&&by(e,r,l)&&e.fill(),r.stroke&&!o&&Qf(e,r,l)&&e.stroke()),e.save(),e.translate(a,s),r.clip&&DU(e,r),n&&n.translate(-a,-s),sa(r,f=>{(f.marktype==="group"||i==null||i.includes(f.marktype))&&this.draw(e,f,n,i)}),n&&n.translate(a,s),e.restore(),o&&r.stroke&&l&&(lp(e,r,a,s),Wf(e,r),Qf(e,r,l)&&e.stroke())})}function Xne(e,t,n,i,r,a){if(t.bounds&&!t.bounds.contains(r,a)||!t.items)return null;const s=n*e.pixelRatio,o=i*e.pixelRatio;return xy(t,l=>{let f,d,g;const p=l.bounds;if(p&&!p.contains(r,a))return;d=l.x||0,g=l.y||0;const y=d+(l.width||0),v=g+(l.height||0),b=l.clip;if(b&&(r<d||r>y||a<g||a>v))return;if(e.save(),e.translate(d,g),d=r-d,g=a-g,b&&r3(l)&&!Gne(e,l,s,o))return e.restore(),null;const E=l.strokeForeground,_=t.interactive!==!1;return _&&E&&l.stroke&&Hne(e,l,s,o)?(e.restore(),l):(f=xy(l,w=>Vne(w,d,g)?this.pick(w,n,i,d,g):null),!f&&_&&(l.fill||!E&&l.stroke)&&jne(e,l,s,o)&&(f=l),e.restore(),f||null)})}function Vne(e,t,n){return(e.interactive!==!1||e.marktype==="group")&&e.bounds&&e.bounds.contains(t,n)}var Wne={type:"group",tag:"g",nested:!1,attr:Une,bound:qne,draw:Yne,pick:Xne,isect:CU,content:Pne,background:Bne,foreground:Ine},cp={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1"};function g3(e,t){var n=e.image;return(!n||e.url&&e.url!==n.url)&&(n={complete:!1,width:0,height:0},t.loadImage(e.url).then(i=>{e.image=i,e.image.url=e.url})),n}function p3(e,t){return e.width!=null?e.width:!t||!t.width?0:e.aspect!==!1&&e.height?e.height*t.width/t.height:t.width}function m3(e,t){return e.height!=null?e.height:!t||!t.height?0:e.aspect!==!1&&e.width?e.width*t.height/t.width:t.height}function mb(e,t){return e==="center"?t/2:e==="right"?t:0}function yb(e,t){return e==="middle"?t/2:e==="bottom"?t:0}function Qne(e,t,n){const i=g3(t,n),r=p3(t,i),a=m3(t,i),s=(t.x||0)-mb(t.align,r),o=(t.y||0)-yb(t.baseline,a),l=!i.src&&i.toDataURL?i.toDataURL():i.src||"";e("href",l,cp["xmlns:xlink"],"xlink:href"),e("transform",Al(s,o)),e("width",r),e("height",a),e("preserveAspectRatio",t.aspect===!1?"none":"xMidYMid")}function Zne(e,t){const n=t.image,i=p3(t,n),r=m3(t,n),a=(t.x||0)-mb(t.align,i),s=(t.y||0)-yb(t.baseline,r);return e.set(a,s,a+i,s+r)}function Kne(e,t,n){sa(t,i=>{if(n&&!n.intersects(i.bounds))return;const r=g3(i,this);let a=p3(i,r),s=m3(i,r);if(a===0||s===0)return;let o=(i.x||0)-mb(i.align,a),l=(i.y||0)-yb(i.baseline,s),f,d,g,p;i.aspect!==!1&&(d=r.width/r.height,g=i.width/i.height,d===d&&g===g&&d!==g&&(g<d?(p=a/d,l+=(s-p)/2,s=p):(p=s*d,o+=(a-p)/2,a=p))),(r.complete||r.toDataURL)&&(Wf(e,i),e.globalAlpha=(f=i.opacity)!=null?f:1,e.imageSmoothingEnabled=i.smooth!==!1,e.drawImage(r,o,l,a,s))})}var Jne={type:"image",tag:"image",nested:!1,attr:Qne,bound:Zne,draw:Kne,pick:pb(),isect:Or,get:g3,xOffset:mb,yOffset:yb},eie=h3("line",yne,Nne);function tie(e,t){var n=t.scaleX||1,i=t.scaleY||1;(n!==1||i!==1)&&e("vector-effect","non-scaling-stroke"),e("transform",One(t)),e("d",t.path)}function N1(e,t){var n=t.path;if(n==null)return!0;var i=t.x||0,r=t.y||0,a=t.scaleX||1,s=t.scaleY||1,o=(t.angle||0)*cu,l=t.pathCache;(!l||l.path!==n)&&((t.pathCache=l=Vf(n)).path=n),o&&e.rotate&&e.translate?(e.translate(i,r),e.rotate(o),up(e,l,0,0,a,s),e.rotate(-o),e.translate(-i,-r)):up(e,l,i,r,a,s)}function nie(e,t){return N1(Yp(e,t.angle),t)?e.set(0,0,0,0):eo(e,t,!0)}var iie={type:"path",tag:"path",nested:!1,attr:tie,bound:nie,draw:l3(N1),pick:c3(N1),isect:s3(N1)};function rie(e,t){e("d",Od(null,t))}function aie(e,t){var n,i;return eo(e.set(n=t.x||0,i=t.y||0,n+t.width||0,i+t.height||0),t)}function u6(e,t){e.beginPath(),Od(e,t)}var sie={type:"rect",tag:"path",nested:!1,attr:rie,bound:aie,draw:l3(u6),pick:c3(u6),isect:CU};function oie(e,t){e("transform",OU(t)),e("x2",t.x2!=null?t.x2-(t.x||0):0),e("y2",t.y2!=null?t.y2-(t.y||0):0)}function uie(e,t){var n,i;return eo(e.set(n=t.x||0,i=t.y||0,t.x2!=null?t.x2:n,t.y2!=null?t.y2:i),t)}function zU(e,t,n){var i,r,a,s;return t.stroke&&Qf(e,t,n)?(i=t.x||0,r=t.y||0,a=t.x2!=null?t.x2:i,s=t.y2!=null?t.y2:r,e.beginPath(),e.moveTo(i,r),e.lineTo(a,s),!0):!1}function lie(e,t,n){sa(t,i=>{if(!(n&&!n.intersects(i.bounds))){var r=i.opacity==null?1:i.opacity;r&&zU(e,i,r)&&(Wf(e,i),e.stroke())}})}function cie(e,t,n,i){return e.isPointInStroke?zU(e,t,1)&&e.isPointInStroke(n,i):!1}var fie={type:"rule",tag:"line",nested:!1,attr:oie,bound:uie,draw:lie,pick:pb(cie),isect:TU},die=d3("shape",vne),hie=d3("symbol",bne,o3);const l6=jF();var ir={height:es,measureWidth:y3,estimateWidth:Ey,width:Ey,canvas:FU};FU(!0);function FU(e){ir.width=e&&iu?y3:Ey}function Ey(e,t){return LU(du(e,t),es(e))}function LU(e,t){return~~(.8*e.length*t)}function y3(e,t){return es(e)<=0||!(t=du(e,t))?0:UU(t,vb(e))}function UU(e,t){const n=`(${t}) ${e}`;let i=l6.get(n);return i===void 0&&(iu.font=t,i=iu.measureText(e).width,l6.set(n,i)),i}function es(e){return e.fontSize!=null?+e.fontSize||0:11}function fu(e){return e.lineHeight!=null?e.lineHeight:es(e)+2}function gie(e){return re(e)?e.length>1?e:e[0]:e}function Vp(e){return gie(e.lineBreak&&e.text&&!re(e.text)?e.text.split(e.lineBreak):e.text)}function v3(e){const t=Vp(e);return(re(t)?t.length-1:0)*fu(e)}function du(e,t){const n=t==null?"":(t+"").trim();return e.limit>0&&n.length?mie(e,n):n}function pie(e){if(ir.width===y3){const t=vb(e);return n=>UU(n,t)}else if(ir.width===Ey){const t=es(e);return n=>LU(n,t)}else return t=>ir.width(e,t)}function mie(e,t){var n=+e.limit,i=pie(e);if(i(t)<n)return t;var r=e.ellipsis||"",a=e.dir==="rtl",s=0,o=t.length,l;if(n-=i(r),a){for(;s<o;)l=s+o>>>1,i(t.slice(l))>n?s=l+1:o=l;return r+t.slice(s)}else{for(;s<o;)l=1+(s+o>>>1),i(t.slice(0,l))<n?s=l:o=l-1;return t.slice(0,s)+r}}function Wp(e,t){var n=e.font;return(t&&n?String(n).replace(/"/g,"'"):n)||"sans-serif"}function vb(e,t){return(e.fontStyle?e.fontStyle+" ":"")+(e.fontVariant?e.fontVariant+" ":"")+(e.fontWeight?e.fontWeight+" ":"")+es(e)+"px "+Wp(e,t)}function b3(e){var t=e.baseline,n=es(e);return Math.round(t==="top"?.79*n:t==="middle"?.3*n:t==="bottom"?-.21*n:t==="line-top"?.29*n+.5*fu(e):t==="line-bottom"?.29*n-.5*fu(e):0)}const yie={left:"start",center:"middle",right:"end"},Bg=new rn;function bb(e){var t=e.x||0,n=e.y||0,i=e.radius||0,r;return i&&(r=(e.theta||0)-gl,t+=i*Math.cos(r),n+=i*Math.sin(r)),Bg.x1=t,Bg.y1=n,Bg}function vie(e,t){var n=t.dx||0,i=(t.dy||0)+b3(t),r=bb(t),a=r.x1,s=r.y1,o=t.angle||0,l;e("text-anchor",yie[t.align]||"start"),o?(l=Al(a,s)+" "+f3(o),(n||i)&&(l+=" "+Al(n,i))):l=Al(a+n,s+i),e("transform",l)}function x3(e,t,n){var i=ir.height(t),r=t.align,a=bb(t),s=a.x1,o=a.y1,l=t.dx||0,f=(t.dy||0)+b3(t)-Math.round(.8*i),d=Vp(t),g;if(re(d)?(i+=fu(t)*(d.length-1),g=d.reduce((p,y)=>Math.max(p,ir.width(t,y)),0)):g=ir.width(t,d),r==="center"?l-=g/2:r==="right"&&(l-=g),e.set(l+=s,f+=o,l+g,f+i),t.angle&&!n)e.rotate(t.angle*cu,s,o);else if(n===2)return e.rotatedPoints(t.angle*cu,s,o);return e}function bie(e,t,n){sa(t,i=>{var r=i.opacity==null?1:i.opacity,a,s,o,l,f,d,g;if(!(n&&!n.intersects(i.bounds)||r===0||i.fontSize<=0||i.text==null||i.text.length===0)){if(e.font=vb(i),e.textAlign=i.align||"left",a=bb(i),s=a.x1,o=a.y1,i.angle&&(e.save(),e.translate(s,o),e.rotate(i.angle*cu),s=o=0),s+=i.dx||0,o+=(i.dy||0)+b3(i),d=Vp(i),Wf(e,i),re(d))for(f=fu(i),l=0;l<d.length;++l)g=du(i,d[l]),i.fill&&by(e,i,r)&&e.fillText(g,s,o),i.stroke&&Qf(e,i,r)&&e.strokeText(g,s,o),o+=f;else g=du(i,d),i.fill&&by(e,i,r)&&e.fillText(g,s,o),i.stroke&&Qf(e,i,r)&&e.strokeText(g,s,o);i.angle&&e.restore()}})}function xie(e,t,n,i,r,a){if(t.fontSize<=0)return!1;if(!t.angle)return!0;var s=bb(t),o=s.x1,l=s.y1,f=x3(Bg,t,1),d=-t.angle*cu,g=Math.cos(d),p=Math.sin(d),y=g*r-p*a+(o-g*o+p*l),v=p*r+g*a+(l-p*o-g*l);return f.contains(y,v)}function Eie(e,t){const n=x3(Bg,e,2);return xf(t,n[0],n[1],n[2],n[3])||xf(t,n[0],n[1],n[4],n[5])||xf(t,n[4],n[5],n[6],n[7])||xf(t,n[2],n[3],n[6],n[7])}var Sie={type:"text",tag:"text",nested:!1,attr:vie,bound:x3,draw:bie,pick:pb(xie),isect:Eie},_ie=h3("trail",xne,zne),lr={arc:Dne,area:Fne,group:Wne,image:Jne,line:eie,path:iie,rect:sie,rule:fie,shape:die,symbol:hie,text:Sie,trail:_ie};function ww(e,t,n){var i=lr[e.mark.marktype],r=t||i.bound;return i.nested&&(e=e.mark),r(e.bounds||(e.bounds=new rn),e,n)}var c6={mark:null};function BU(e,t,n){var i=lr[e.marktype],r=i.bound,a=e.items,s=a&&a.length,o,l,f,d;if(i.nested)return s?f=a[0]:(c6.mark=e,f=c6),d=ww(f,r,n),t=t&&t.union(d)||d,t;if(t=t||e.bounds&&e.bounds.clear()||new rn,s)for(o=0,l=a.length;o<l;++o)t.union(ww(a[o],r,n));return e.bounds=t}const wie=["marktype","name","role","interactive","clip","items","zindex","x","y","width","height","align","baseline","fill","fillOpacity","opacity","blend","stroke","strokeOpacity","strokeWidth","strokeCap","strokeDash","strokeDashOffset","strokeForeground","strokeOffset","startAngle","endAngle","innerRadius","outerRadius","cornerRadius","padAngle","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight","interpolate","tension","orient","defined","url","aspect","smooth","path","scaleX","scaleY","x2","y2","size","shape","text","angle","theta","radius","dir","dx","dy","ellipsis","limit","lineBreak","lineHeight","font","fontSize","fontWeight","fontStyle","fontVariant","description","aria","ariaRole","ariaRoleDescription"];function IU(e,t){return JSON.stringify(e,wie,t)}function PU(e){const t=typeof e=="string"?JSON.parse(e):e;return qU(t)}function qU(e){var t=e.marktype,n=e.items,i,r,a;if(n)for(r=0,a=n.length;r<a;++r)i=t?"mark":"group",n[r][i]=e,n[r].zindex&&(n[r][i].zdirty=!0),(t||i)==="group"&&qU(n[r]);return t&&BU(e),e}class jU{constructor(t){arguments.length?this.root=PU(t):(this.root=f6({marktype:"group",name:"root",role:"frame"}),this.root.items=[new hb(this.root)])}toJSON(t){return IU(this.root,t||0)}mark(t,n,i){n=n||this.root.items[0];const r=f6(t,n);return n.items[i]=r,r.zindex&&(r.group.zdirty=!0),r}}function f6(e,t){const n={bounds:new rn,clip:!!e.clip,group:t,interactive:e.interactive!==!1,items:[],marktype:e.marktype,name:e.name||void 0,role:e.role||void 0,zindex:e.zindex||0};return e.aria!=null&&(n.aria=e.aria),e.description&&(n.description=e.description),n}function Go(e,t,n){return!e&&typeof document<"u"&&document.createElement&&(e=document),e?n?e.createElementNS(n,t):e.createElement(t):null}function E3(e,t){t=t.toLowerCase();for(var n=e.childNodes,i=0,r=n.length;i<r;++i)if(n[i].tagName.toLowerCase()===t)return n[i]}function un(e,t,n,i){var r=e.childNodes[t],a;return(!r||r.tagName.toLowerCase()!==n.toLowerCase())&&(a=r||null,r=Go(e.ownerDocument,n,i),e.insertBefore(r,a)),r}function Sr(e,t){for(var n=e.childNodes,i=n.length;i>t;)e.removeChild(n[--i]);return e}function HU(e){return"mark-"+e.marktype+(e.role?" role-"+e.role:"")+(e.name?" "+e.name:"")}function xb(e,t){const n=t.getBoundingClientRect();return[e.clientX-n.left-(t.clientLeft||0),e.clientY-n.top-(t.clientTop||0)]}function Aie(e,t,n,i){var r=e&&e.mark,a,s;if(r&&(a=lr[r.marktype]).tip){for(s=xb(t,n),s[0]-=i[0],s[1]-=i[1];e=e.mark.group;)s[0]-=e.x||0,s[1]-=e.y||0;e=a.tip(r.items,s)}return e}let S3=class{constructor(t,n){this._active=null,this._handlers={},this._loader=t||Bv(),this._tooltip=n||$ie}initialize(t,n,i){return this._el=t,this._obj=i||null,this.origin(n)}element(){return this._el}canvas(){return this._el&&this._el.firstChild}origin(t){return arguments.length?(this._origin=t||[0,0],this):this._origin.slice()}scene(t){return arguments.length?(this._scene=t,this):this._scene}on(){}off(){}_handlerIndex(t,n,i){for(let r=t?t.length:0;--r>=0;)if(t[r].type===n&&(!i||t[r].handler===i))return r;return-1}handlers(t){const n=this._handlers,i=[];if(t)i.push(...n[this.eventName(t)]);else for(const r in n)i.push(...n[r]);return i}eventName(t){const n=t.indexOf(".");return n<0?t:t.slice(0,n)}handleHref(t,n,i){this._loader.sanitize(i,{context:"href"}).then(r=>{const a=new MouseEvent(t.type,t),s=Go(null,"a");for(const o in r)s.setAttribute(o,r[o]);s.dispatchEvent(a)}).catch(()=>{})}handleTooltip(t,n,i){if(n&&n.tooltip!=null){n=Aie(n,t,this.canvas(),this._origin);const r=i&&n&&n.tooltip||null;this._tooltip.call(this._obj,this,t,n,r)}}getItemBoundingClientRect(t){const n=this.canvas();if(!n)return;const i=n.getBoundingClientRect(),r=this._origin,a=t.bounds,s=a.width(),o=a.height();let l=a.x1+r[0]+i.left,f=a.y1+r[1]+i.top;for(;t.mark&&(t=t.mark.group);)l+=t.x||0,f+=t.y||0;return{x:l,y:f,width:s,height:o,left:l,top:f,right:l+s,bottom:f+o}}};function $ie(e,t,n,i){e.element().setAttribute("title",i||"")}class Qp{constructor(t){this._el=null,this._bgcolor=null,this._loader=new $U(t)}initialize(t,n,i,r,a){return this._el=t,this.resize(n,i,r,a)}element(){return this._el}canvas(){return this._el&&this._el.firstChild}background(t){return arguments.length===0?this._bgcolor:(this._bgcolor=t,this)}resize(t,n,i,r){return this._width=t,this._height=n,this._origin=i||[0,0],this._scale=r||1,this}dirty(){}render(t,n){const i=this;return i._call=function(){i._render(t,n)},i._call(),i._call=null,i}_render(){}renderAsync(t,n){const i=this.render(t,n);return this._ready?this._ready.then(()=>i):Promise.resolve(i)}_load(t,n){var i=this,r=i._loader[t](n);if(!i._ready){const a=i._call;i._ready=i._loader.ready().then(s=>{s&&a(),i._ready=null})}return r}sanitizeURL(t){return this._load("sanitizeURL",t)}loadImage(t){return this._load("loadImage",t)}}const Cie="keydown",Tie="keypress",Mie="keyup",GU="dragenter",z1="dragleave",YU="dragover",Aw="pointerdown",kie="pointerup",Sy="pointermove",F1="pointerout",XU="pointerover",$w="mousedown",Oie="mouseup",VU="mousemove",_y="mouseout",WU="mouseover",wy="click",Die="dblclick",Rie="wheel",QU="mousewheel",Ay="touchstart",$y="touchmove",Cy="touchend",Nie=[Cie,Tie,Mie,GU,z1,YU,Aw,kie,Sy,F1,XU,$w,Oie,VU,_y,WU,wy,Die,Rie,QU,Ay,$y,Cy],Cw=Sy,Ig=_y,Tw=wy;class Zp extends S3{constructor(t,n){super(t,n),this._down=null,this._touch=null,this._first=!0,this._events={},this.events=Nie,this.pointermove=h6([Sy,VU],[XU,WU],[F1,_y]),this.dragover=h6([YU],[GU],[z1]),this.pointerout=g6([F1,_y]),this.dragleave=g6([z1])}initialize(t,n,i){return this._canvas=t&&E3(t,"canvas"),[wy,$w,Aw,Sy,F1,z1].forEach(r=>d6(this,r)),super.initialize(t,n,i)}canvas(){return this._canvas}context(){return this._canvas.getContext("2d")}DOMMouseScroll(t){this.fire(QU,t)}pointerdown(t){this._down=this._active,this.fire(Aw,t)}mousedown(t){this._down=this._active,this.fire($w,t)}click(t){this._down===this._active&&(this.fire(wy,t),this._down=null)}touchstart(t){this._touch=this.pickEvent(t.changedTouches[0]),this._first&&(this._active=this._touch,this._first=!1),this.fire(Ay,t,!0)}touchmove(t){this.fire($y,t,!0)}touchend(t){this.fire(Cy,t,!0),this._touch=null}fire(t,n,i){const r=i?this._touch:this._active,a=this._handlers[t];if(n.vegaType=t,t===Tw&&r&&r.href?this.handleHref(n,r,r.href):(t===Cw||t===Ig)&&this.handleTooltip(n,r,t!==Ig),a)for(let s=0,o=a.length;s<o;++s)a[s].handler.call(this._obj,n,r)}on(t,n){const i=this.eventName(t),r=this._handlers;return this._handlerIndex(r[i],t,n)<0&&(d6(this,t),(r[i]||(r[i]=[])).push({type:t,handler:n})),this}off(t,n){const i=this.eventName(t),r=this._handlers[i],a=this._handlerIndex(r,t,n);return a>=0&&r.splice(a,1),this}pickEvent(t){const n=xb(t,this._canvas),i=this._origin;return this.pick(this._scene,n[0],n[1],n[0]-i[0],n[1]-i[1])}pick(t,n,i,r,a){const s=this.context();return lr[t.marktype].pick.call(this,s,t,n,i,r,a)}}const zie=e=>e===Ay||e===$y||e===Cy?[Ay,$y,Cy]:[e];function d6(e,t){zie(t).forEach(n=>Fie(e,n))}function Fie(e,t){const n=e.canvas();n&&!e._events[t]&&(e._events[t]=1,n.addEventListener(t,e[t]?i=>e[t](i):i=>e.fire(t,i)))}function wg(e,t,n){t.forEach(i=>e.fire(i,n))}function h6(e,t,n){return function(i){const r=this._active,a=this.pickEvent(i);a===r?wg(this,e,i):((!r||!r.exit)&&wg(this,n,i),this._active=a,wg(this,t,i),wg(this,e,i))}}function g6(e){return function(t){wg(this,e,t),this._active=null}}function Lie(){return typeof window<"u"&&window.devicePixelRatio||1}function Uie(e,t,n,i,r,a){const s=typeof HTMLElement<"u"&&e instanceof HTMLElement&&e.parentNode!=null,o=e.getContext("2d"),l=s?Lie():r;e.width=t*l,e.height=n*l;for(const f in a)o[f]=a[f];return s&&l!==1&&(e.style.width=t+"px",e.style.height=n+"px"),o.pixelRatio=l,o.setTransform(l,0,0,l,l*i[0],l*i[1]),e}class Ty extends Qp{constructor(t){super(t),this._options={},this._redraw=!1,this._dirty=new rn,this._tempb=new rn}initialize(t,n,i,r,a,s){return this._options=s||{},this._canvas=this._options.externalContext?null:nu(1,1,this._options.type),t&&this._canvas&&(Sr(t,0).appendChild(this._canvas),this._canvas.setAttribute("class","marks")),super.initialize(t,n,i,r,a)}resize(t,n,i,r){if(super.resize(t,n,i,r),this._canvas)Uie(this._canvas,this._width,this._height,this._origin,this._scale,this._options.context);else{const a=this._options.externalContext;a||te("CanvasRenderer is missing a valid canvas or context"),a.scale(this._scale,this._scale),a.translate(this._origin[0],this._origin[1])}return this._redraw=!0,this}canvas(){return this._canvas}context(){return this._options.externalContext||(this._canvas?this._canvas.getContext("2d"):null)}dirty(t){const n=this._tempb.clear().union(t.bounds);let i=t.mark.group;for(;i;)n.translate(i.x||0,i.y||0),i=i.mark.group;this._dirty.union(n)}_render(t,n){const i=this.context(),r=this._origin,a=this._width,s=this._height,o=this._dirty,l=Bie(r,a,s);i.save();const f=this._redraw||o.empty()?(this._redraw=!1,l.expand(1)):Iie(i,l.intersect(o),r);return this.clear(-r[0],-r[1],a,s),this.draw(i,t,f,n),i.restore(),o.clear(),this}draw(t,n,i,r){if(n.marktype!=="group"&&r!=null&&!r.includes(n.marktype))return;const a=lr[n.marktype];n.clip&&Lne(t,n),a.draw.call(this,t,n,i,r),n.clip&&t.restore()}clear(t,n,i,r){const a=this._options,s=this.context();a.type!=="pdf"&&!a.externalContext&&s.clearRect(t,n,i,r),this._bgcolor!=null&&(s.fillStyle=this._bgcolor,s.fillRect(t,n,i,r))}}const Bie=(e,t,n)=>new rn().set(0,0,t,n).translate(-e[0],-e[1]);function Iie(e,t,n){return t.expand(1).round(),e.pixelRatio%1&&t.scale(e.pixelRatio).round().scale(1/e.pixelRatio),t.translate(-(n[0]%1),-(n[1]%1)),e.beginPath(),e.rect(t.x1,t.y1,t.width(),t.height()),e.clip(),t}class ZU extends S3{constructor(t,n){super(t,n);const i=this;i._hrefHandler=CS(i,(r,a)=>{a&&a.href&&i.handleHref(r,a,a.href)}),i._tooltipHandler=CS(i,(r,a)=>{i.handleTooltip(r,a,r.type!==Ig)})}initialize(t,n,i){let r=this._svg;return r&&(r.removeEventListener(Tw,this._hrefHandler),r.removeEventListener(Cw,this._tooltipHandler),r.removeEventListener(Ig,this._tooltipHandler)),this._svg=r=t&&E3(t,"svg"),r&&(r.addEventListener(Tw,this._hrefHandler),r.addEventListener(Cw,this._tooltipHandler),r.addEventListener(Ig,this._tooltipHandler)),super.initialize(t,n,i)}canvas(){return this._svg}on(t,n){const i=this.eventName(t),r=this._handlers;if(this._handlerIndex(r[i],t,n)<0){const s={type:t,handler:n,listener:CS(this,n)};(r[i]||(r[i]=[])).push(s),this._svg&&this._svg.addEventListener(i,s.listener)}return this}off(t,n){const i=this.eventName(t),r=this._handlers[i],a=this._handlerIndex(r,t,n);return a>=0&&(this._svg&&this._svg.removeEventListener(i,r[a].listener),r.splice(a,1)),this}}const CS=(e,t)=>n=>{let i=n.target.__data__;i=Array.isArray(i)?i[0]:i,n.vegaType=n.type,t.call(e._obj,n,i)},KU="aria-hidden",_3="aria-label",w3="role",A3="aria-roledescription",JU="graphics-object",$3="graphics-symbol",eB=(e,t,n)=>({[w3]:e,[A3]:t,[_3]:n||void 0}),Pie=ra(["axis-domain","axis-grid","axis-label","axis-tick","axis-title","legend-band","legend-entry","legend-gradient","legend-label","legend-title","legend-symbol","title"]),p6={axis:{desc:"axis",caption:Hie},legend:{desc:"legend",caption:Gie},"title-text":{desc:"title",caption:e=>`Title text '${y6(e)}'`},"title-subtitle":{desc:"subtitle",caption:e=>`Subtitle text '${y6(e)}'`}},m6={ariaRole:w3,ariaRoleDescription:A3,description:_3};function tB(e,t){const n=t.aria===!1;if(e(KU,n||void 0),n||t.description==null)for(const i in m6)e(m6[i],void 0);else{const i=t.mark.marktype;e(_3,t.description),e(w3,t.ariaRole||(i==="group"?JU:$3)),e(A3,t.ariaRoleDescription||`${i} mark`)}}function nB(e){return e.aria===!1?{[KU]:!0}:Pie[e.role]?null:p6[e.role]?jie(e,p6[e.role]):qie(e)}function qie(e){const t=e.marktype,n=t==="group"||t==="text"||e.items.some(i=>i.description!=null&&i.aria!==!1);return eB(n?JU:$3,`${t} mark container`,e.description)}function jie(e,t){try{const n=e.items[0],i=t.caption||(()=>"");return eB(t.role||$3,t.desc,n.description||i(n))}catch{return null}}function y6(e){return Ee(e.text).join(" ")}function Hie(e){const t=e.datum,n=e.orient,i=t.title?iB(e):null,r=e.context,a=r.scales[t.scale].value,s=r.dataflow.locale(),o=a.type;return`${n==="left"||n==="right"?"Y":"X"}-axis`+(i?` titled '${i}'`:"")+` for a ${Xf(o)?"discrete":o} scale with ${yU(s,a,e)}`}function Gie(e){const t=e.datum,n=t.title?iB(e):null,i=`${t.type||""} legend`.trim(),r=t.scales,a=Object.keys(r),s=e.context,o=s.scales[r[a[0]]].value,l=s.dataflow.locale();return Xie(i)+(n?` titled '${n}'`:"")+` for ${Yie(a)} with ${yU(l,o,e)}`}function iB(e){try{return Ee(Je(e.items).items[0].text).join(" ")}catch{return null}}function Yie(e){return e=e.map(t=>t+(t==="fill"||t==="stroke"?" color":"")),e.length<2?e[0]:e.slice(0,-1).join(", ")+" and "+Je(e)}function Xie(e){return e.length?e[0].toUpperCase()+e.slice(1):e}const rB=e=>(e+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),Vie=e=>rB(e).replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;");function C3(){let e="",t="",n="";const i=[],r=()=>t=n="",a=l=>{t&&(e+=`${t}>${n}`,r()),i.push(l)},s=(l,f)=>(f!=null&&(t+=` ${l}="${Vie(f)}"`),o),o={open(l){a(l),t="<"+l;for(var f=arguments.length,d=new Array(f>1?f-1:0),g=1;g<f;g++)d[g-1]=arguments[g];for(const p of d)for(const y in p)s(y,p[y]);return o},close(){const l=i.pop();return t?e+=t+(n?`>${n}</${l}>`:"/>"):e+=`</${l}>`,r(),o},attr:s,text:l=>(n+=rB(l),o),toString:()=>e};return o}const aB=e=>sB(C3(),e)+"";function sB(e,t){if(e.open(t.tagName),t.hasAttributes()){const n=t.attributes,i=n.length;for(let r=0;r<i;++r)e.attr(n[r].name,n[r].value)}if(t.hasChildNodes()){const n=t.childNodes;for(const i of n)i.nodeType===3?e.text(i.nodeValue):sB(e,i)}return e.close()}const My={fill:"fill",fillOpacity:"fill-opacity",stroke:"stroke",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",strokeCap:"stroke-linecap",strokeJoin:"stroke-linejoin",strokeDash:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeMiterLimit:"stroke-miterlimit",opacity:"opacity"},ky={blend:"mix-blend-mode"},oB={fill:"none","stroke-miterlimit":10},eg=0,v6="http://www.w3.org/2000/xmlns/",on=cp.xmlns;class T3 extends Qp{constructor(t){super(t),this._dirtyID=0,this._dirty=[],this._svg=null,this._root=null,this._defs=null}initialize(t,n,i,r,a){return this._defs={},this._clearDefs(),t&&(this._svg=un(t,0,"svg",on),this._svg.setAttributeNS(v6,"xmlns",on),this._svg.setAttributeNS(v6,"xmlns:xlink",cp["xmlns:xlink"]),this._svg.setAttribute("version",cp.version),this._svg.setAttribute("class","marks"),Sr(t,1),this._root=un(this._svg,eg,"g",on),Yo(this._root,oB),Sr(this._svg,eg+1)),this.background(this._bgcolor),super.initialize(t,n,i,r,a)}background(t){return arguments.length&&this._svg&&this._svg.style.setProperty("background-color",t),super.background(...arguments)}resize(t,n,i,r){return super.resize(t,n,i,r),this._svg&&(Yo(this._svg,{width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}),this._root.setAttribute("transform",`translate(${this._origin})`)),this._dirty=[],this}canvas(){return this._svg}svg(){const t=this._svg,n=this._bgcolor;if(!t)return null;let i;n&&(t.removeAttribute("style"),i=un(t,eg,"rect",on),Yo(i,{width:this._width,height:this._height,fill:n}));const r=aB(t);return n&&(t.removeChild(i),this._svg.style.setProperty("background-color",n)),r}_render(t,n){return this._dirtyCheck()&&(this._dirtyAll&&this._clearDefs(),this.mark(this._root,t,void 0,n),Sr(this._root,1)),this.defs(),this._dirty=[],++this._dirtyID,this}dirty(t){t.dirty!==this._dirtyID&&(t.dirty=this._dirtyID,this._dirty.push(t))}isDirty(t){return this._dirtyAll||!t._svg||!t._svg.ownerSVGElement||t.dirty===this._dirtyID}_dirtyCheck(){this._dirtyAll=!0;const t=this._dirty;if(!t.length||!this._dirtyID)return!0;const n=++this._dirtyID;let i,r,a,s,o,l,f;for(o=0,l=t.length;o<l;++o)if(i=t[o],r=i.mark,r.marktype!==a&&(a=r.marktype,s=lr[a]),r.zdirty&&r.dirty!==n&&(this._dirtyAll=!1,b6(i,n),r.items.forEach(d=>{d.dirty=n})),!r.zdirty){if(i.exit){s.nested&&r.items.length?(f=r.items[0],f._svg&&this._update(s,f._svg,f)):i._svg&&(f=i._svg.parentNode,f&&f.removeChild(i._svg)),i._svg=null;continue}i=s.nested?r.items[0]:i,i._update!==n&&(!i._svg||!i._svg.ownerSVGElement?(this._dirtyAll=!1,b6(i,n)):this._update(s,i._svg,i),i._update=n)}return!this._dirtyAll}mark(t,n,i,r){if(!this.isDirty(n))return n._svg;const a=this._svg,s=n.marktype,o=lr[s],l=n.interactive===!1?"none":null,f=o.tag==="g",d=x6(n,t,i,"g",a);if(s!=="group"&&r!=null&&!r.includes(s))return Sr(d,0),n._svg;d.setAttribute("class",HU(n));const g=nB(n);for(const b in g)oi(d,b,g[b]);f||oi(d,"pointer-events",l),oi(d,"clip-path",n.clip?a3(this,n,n.group):null);let p=null,y=0;const v=b=>{const E=this.isDirty(b),_=x6(b,d,p,o.tag,a);E&&(this._update(o,_,b),f&&Zie(this,_,b,r)),p=_,++y};return o.nested?n.items.length&&v(n.items[0]):sa(n,v),Sr(d,y),d}_update(t,n,i){Us=n,Vn=n.__values__,tB(Pg,i),t.attr(Pg,i,this);const r=Jie[t.type];r&&r.call(this,t,n,i),Us&&this.style(Us,i)}style(t,n){if(n!=null){for(const i in My){let r=i==="font"?Wp(n):n[i];if(r===Vn[i])continue;const a=My[i];r==null?t.removeAttribute(a):(n3(r)&&(r=bU(r,this._defs.gradient,uB())),t.setAttribute(a,r+"")),Vn[i]=r}for(const i in ky)L1(t,ky[i],n[i])}}defs(){const t=this._svg,n=this._defs;let i=n.el,r=0;for(const a in n.gradient)i||(n.el=i=un(t,eg+1,"defs",on)),r=Wie(i,n.gradient[a],r);for(const a in n.clipping)i||(n.el=i=un(t,eg+1,"defs",on)),r=Qie(i,n.clipping[a],r);i&&(r===0?(t.removeChild(i),n.el=null):Sr(i,r))}_clearDefs(){const t=this._defs;t.gradient={},t.clipping={}}}function b6(e,t){for(;e&&e.dirty!==t;e=e.mark.group)if(e.dirty=t,e.mark&&e.mark.dirty!==t)e.mark.dirty=t;else return}function Wie(e,t,n){let i,r,a;if(t.gradient==="radial"){let s=un(e,n++,"pattern",on);Yo(s,{id:vy+t.id,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),s=un(s,0,"rect",on),Yo(s,{width:1,height:1,fill:`url(${uB()}#${t.id})`}),e=un(e,n++,"radialGradient",on),Yo(e,{id:t.id,fx:t.x1,fy:t.y1,fr:t.r1,cx:t.x2,cy:t.y2,r:t.r2})}else e=un(e,n++,"linearGradient",on),Yo(e,{id:t.id,x1:t.x1,x2:t.x2,y1:t.y1,y2:t.y2});for(i=0,r=t.stops.length;i<r;++i)a=un(e,i,"stop",on),a.setAttribute("offset",t.stops[i].offset),a.setAttribute("stop-color",t.stops[i].color);return Sr(e,i),n}function Qie(e,t,n){let i;return e=un(e,n,"clipPath",on),e.setAttribute("id",t.id),t.path?(i=un(e,0,"path",on),i.setAttribute("d",t.path)):(i=un(e,0,"rect",on),Yo(i,{x:0,y:0,width:t.width,height:t.height})),Sr(e,1),n+1}function Zie(e,t,n,i){t=t.lastChild.previousSibling;let r,a=0;sa(n,s=>{r=e.mark(t,s,r,i),++a}),Sr(t,1+a)}function x6(e,t,n,i,r){let a=e._svg,s;if(!a&&(s=t.ownerDocument,a=Go(s,i,on),e._svg=a,e.mark&&(a.__data__=e,a.__values__={fill:"default"},i==="g"))){const o=Go(s,"path",on);a.appendChild(o),o.__data__=e;const l=Go(s,"g",on);a.appendChild(l),l.__data__=e;const f=Go(s,"path",on);a.appendChild(f),f.__data__=e,f.__values__={fill:"default"}}return(a.ownerSVGElement!==r||Kie(a,n))&&t.insertBefore(a,n?n.nextSibling:t.firstChild),a}function Kie(e,t){return e.parentNode&&e.parentNode.childNodes.length>1&&e.previousSibling!=t}let Us=null,Vn=null;const Jie={group(e,t,n){const i=Us=t.childNodes[2];Vn=i.__values__,e.foreground(Pg,n,this),Vn=t.__values__,Us=t.childNodes[1],e.content(Pg,n,this);const r=Us=t.childNodes[0];e.background(Pg,n,this);const a=n.mark.interactive===!1?"none":null;if(a!==Vn.events&&(oi(i,"pointer-events",a),oi(r,"pointer-events",a),Vn.events=a),n.strokeForeground&&n.stroke){const s=n.fill;oi(i,"display",null),this.style(r,n),oi(r,"stroke",null),s&&(n.fill=null),Vn=i.__values__,this.style(i,n),s&&(n.fill=s),Us=null}else oi(i,"display","none")},image(e,t,n){n.smooth===!1?(L1(t,"image-rendering","optimizeSpeed"),L1(t,"image-rendering","pixelated")):L1(t,"image-rendering",null)},text(e,t,n){const i=Vp(n);let r,a,s,o;re(i)?(a=i.map(l=>du(n,l)),r=a.join(`
`),r!==Vn.text&&(Sr(t,0),s=t.ownerDocument,o=fu(n),a.forEach((l,f)=>{const d=Go(s,"tspan",on);d.__data__=n,d.textContent=l,f&&(d.setAttribute("x",0),d.setAttribute("dy",o)),t.appendChild(d)}),Vn.text=r)):(a=du(n,i),a!==Vn.text&&(t.textContent=a,Vn.text=a)),oi(t,"font-family",Wp(n)),oi(t,"font-size",es(n)+"px"),oi(t,"font-style",n.fontStyle),oi(t,"font-variant",n.fontVariant),oi(t,"font-weight",n.fontWeight)}};function Pg(e,t,n){t!==Vn[e]&&(n?ere(Us,e,t,n):oi(Us,e,t),Vn[e]=t)}function L1(e,t,n){n!==Vn[t]&&(n==null?e.style.removeProperty(t):e.style.setProperty(t,n+""),Vn[t]=n)}function Yo(e,t){for(const n in t)oi(e,n,t[n])}function oi(e,t,n){n!=null?e.setAttribute(t,n):e.removeAttribute(t)}function ere(e,t,n,i){n!=null?e.setAttributeNS(i,t,n):e.removeAttributeNS(i,t)}function uB(){let e;return typeof window>"u"?"":(e=window.location).hash?e.href.slice(0,-e.hash.length):e.href}class lB extends Qp{constructor(t){super(t),this._text=null,this._defs={gradient:{},clipping:{}}}svg(){return this._text}_render(t){const n=C3();n.open("svg",Pe({},cp,{class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}));const i=this._bgcolor;return i&&i!=="transparent"&&i!=="none"&&n.open("rect",{width:this._width,height:this._height,fill:i}).close(),n.open("g",oB,{transform:"translate("+this._origin+")"}),this.mark(n,t),n.close(),this.defs(n),this._text=n.close()+"",this}mark(t,n){const i=lr[n.marktype],r=i.tag,a=[tB,i.attr];t.open("g",{class:HU(n),"clip-path":n.clip?a3(this,n,n.group):null},nB(n),{"pointer-events":r!=="g"&&n.interactive===!1?"none":null});const s=o=>{const l=this.href(o);if(l&&t.open("a",l),t.open(r,this.attr(n,o,a,r!=="g"?r:null)),r==="text"){const f=Vp(o);if(re(f)){const d={x:0,dy:fu(o)};for(let g=0;g<f.length;++g)t.open("tspan",g?d:null).text(du(o,f[g])).close()}else t.text(du(o,f))}else if(r==="g"){const f=o.strokeForeground,d=o.fill,g=o.stroke;f&&g&&(o.stroke=null),t.open("path",this.attr(n,o,i.background,"bgrect")).close(),t.open("g",this.attr(n,o,i.content)),sa(o,p=>this.mark(t,p)),t.close(),f&&g?(d&&(o.fill=null),o.stroke=g,t.open("path",this.attr(n,o,i.foreground,"bgrect")).close(),d&&(o.fill=d)):t.open("path",this.attr(n,o,i.foreground,"bgfore")).close()}t.close(),l&&t.close()};return i.nested?n.items&&n.items.length&&s(n.items[0]):sa(n,s),t.close()}href(t){const n=t.href;let i;if(n){if(i=this._hrefs&&this._hrefs[n])return i;this.sanitizeURL(n).then(r=>{r["xlink:href"]=r.href,r.href=null,(this._hrefs||(this._hrefs={}))[n]=r})}return null}attr(t,n,i,r){const a={},s=(o,l,f,d)=>{a[d||o]=l};return Array.isArray(i)?i.forEach(o=>o(s,n,this)):i(s,n,this),r&&tre(a,n,t,r,this._defs),a}defs(t){const n=this._defs.gradient,i=this._defs.clipping;if(Object.keys(n).length+Object.keys(i).length!==0){t.open("defs");for(const a in n){const s=n[a],o=s.stops;s.gradient==="radial"?(t.open("pattern",{id:vy+a,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),t.open("rect",{width:"1",height:"1",fill:"url(#"+a+")"}).close(),t.close(),t.open("radialGradient",{id:a,fx:s.x1,fy:s.y1,fr:s.r1,cx:s.x2,cy:s.y2,r:s.r2})):t.open("linearGradient",{id:a,x1:s.x1,x2:s.x2,y1:s.y1,y2:s.y2});for(let l=0;l<o.length;++l)t.open("stop",{offset:o[l].offset,"stop-color":o[l].color}).close();t.close()}for(const a in i){const s=i[a];t.open("clipPath",{id:a}),s.path?t.open("path",{d:s.path}).close():t.open("rect",{x:0,y:0,width:s.width,height:s.height}).close(),t.close()}t.close()}}}function tre(e,t,n,i,r){let a;if(t==null||(i==="bgrect"&&n.interactive===!1&&(e["pointer-events"]="none"),i==="bgfore"&&(n.interactive===!1&&(e["pointer-events"]="none"),e.display="none",t.fill!==null)))return e;i==="image"&&t.smooth===!1&&(a=["image-rendering: optimizeSpeed;","image-rendering: pixelated;"]),i==="text"&&(e["font-family"]=Wp(t),e["font-size"]=es(t)+"px",e["font-style"]=t.fontStyle,e["font-variant"]=t.fontVariant,e["font-weight"]=t.fontWeight);for(const s in My){let o=t[s];const l=My[s];o==="transparent"&&(l==="fill"||l==="stroke")||o!=null&&(n3(o)&&(o=bU(o,r.gradient,"")),e[l]=o)}for(const s in ky){const o=t[s];o!=null&&(a=a||[],a.push(`${ky[s]}: ${o};`))}return a&&(e.style=a.join(" ")),e}const Yr={svgMarkTypes:["text"],svgOnTop:!0,debug:!1};function nre(e){Yr.svgMarkTypes=e.svgMarkTypes??["text"],Yr.svgOnTop=e.svgOnTop??!0,Yr.debug=e.debug??!1}class Mw extends Qp{constructor(t){super(t),this._svgRenderer=new T3(t),this._canvasRenderer=new Ty(t)}initialize(t,n,i,r,a){this._root_el=un(t,0,"div");const s=un(this._root_el,0,"div"),o=un(this._root_el,1,"div");return this._root_el.style.position="relative",Yr.debug||(s.style.height="100%",o.style.position="absolute",o.style.top="0",o.style.left="0",o.style.height="100%",o.style.width="100%"),this._svgEl=Yr.svgOnTop?o:s,this._canvasEl=Yr.svgOnTop?s:o,this._svgEl.style.pointerEvents="none",this._canvasRenderer.initialize(this._canvasEl,n,i,r,a),this._svgRenderer.initialize(this._svgEl,n,i,r,a),super.initialize(t,n,i,r,a)}dirty(t){return Yr.svgMarkTypes.includes(t.mark.marktype)?this._svgRenderer.dirty(t):this._canvasRenderer.dirty(t),this}_render(t,n){const r=(n??["arc","area","image","line","path","rect","rule","shape","symbol","text","trail"]).filter(a=>!Yr.svgMarkTypes.includes(a));this._svgRenderer.render(t,Yr.svgMarkTypes),this._canvasRenderer.render(t,r)}resize(t,n,i,r){return super.resize(t,n,i,r),this._svgRenderer.resize(t,n,i,r),this._canvasRenderer.resize(t,n,i,r),this}background(t){return Yr.svgOnTop?this._canvasRenderer.background(t):this._svgRenderer.background(t),this}}class cB extends Zp{constructor(t,n){super(t,n)}initialize(t,n,i){const r=un(un(t,0,"div"),Yr.svgOnTop?0:1,"div");return super.initialize(r,n,i)}}const fB="canvas",dB="hybrid",hB="png",gB="svg",pB="none",Xo={Canvas:fB,PNG:hB,SVG:gB,Hybrid:dB,None:pB},Fl={};Fl[fB]=Fl[hB]={renderer:Ty,headless:Ty,handler:Zp};Fl[gB]={renderer:T3,headless:lB,handler:ZU};Fl[dB]={renderer:Mw,headless:Mw,handler:cB};Fl[pB]={};function Eb(e,t){return e=String(e||"").toLowerCase(),arguments.length>1?(Fl[e]=t,this):Fl[e]}function mB(e,t,n){const i=[],r=new rn().union(t),a=e.marktype;return a?yB(e,r,n,i):a==="group"?vB(e,r,n,i):te("Intersect scene must be mark node or group item.")}function yB(e,t,n,i){if(ire(e,t,n)){const r=e.items,a=e.marktype,s=r.length;let o=0;if(a==="group")for(;o<s;++o)vB(r[o],t,n,i);else for(const l=lr[a].isect;o<s;++o){const f=r[o];bB(f,t,l)&&i.push(f)}}return i}function ire(e,t,n){return e.bounds&&t.intersects(e.bounds)&&(e.marktype==="group"||e.interactive!==!1&&(!n||n(e)))}function vB(e,t,n,i){n&&n(e.mark)&&bB(e,t,lr.group.isect)&&i.push(e);const r=e.items,a=r&&r.length;if(a){const s=e.x||0,o=e.y||0;t.translate(-s,-o);for(let l=0;l<a;++l)yB(r[l],t,n,i);t.translate(s,o)}return i}function bB(e,t,n){const i=e.bounds;return t.encloses(i)||t.intersects(i)&&n(e,t)}const TS=new rn;function xB(e){const t=e.clip;if(qe(t))t(Yp(TS.clear()));else if(t)TS.set(0,0,e.group.width,e.group.height);else return;e.bounds.intersect(TS)}const rre=1e-9;function M3(e,t,n){return e===t?!0:n==="path"?EB(e,t):e instanceof Date&&t instanceof Date?+e==+t:st(e)&&st(t)?Math.abs(e-t)<=rre:!e||!t||!be(e)&&!be(t)?e==t:are(e,t)}function EB(e,t){return M3(Vf(e),Vf(t))}function are(e,t){var n=Object.keys(e),i=Object.keys(t),r,a;if(n.length!==i.length)return!1;for(n.sort(),i.sort(),a=n.length-1;a>=0;a--)if(n[a]!=i[a])return!1;for(a=n.length-1;a>=0;a--)if(r=n[a],!M3(e[r],t[r],r))return!1;return typeof e==typeof t}function sre(){Ene(),Mte()}const Zf="top",Zr="left",Kr="right",hu="bottom",ore="top-left",ure="top-right",lre="bottom-left",cre="bottom-right",k3="start",kw="middle",ui="end",fre="x",dre="y",Sb="group",O3="axis",D3="title",hre="frame",gre="scope",R3="legend",SB="row-header",_B="row-footer",wB="row-title",AB="column-header",$B="column-footer",CB="column-title",pre="padding",mre="symbol",TB="fit",MB="fit-x",kB="fit-y",yre="pad",N3="none",Vm="all",Ow="each",z3="flush",Vo="column",Wo="row";function OB(e){J.call(this,null,e)}pe(OB,J,{transform(e,t){const n=t.dataflow,i=e.mark,r=i.marktype,a=lr[r],s=a.bound;let o=i.bounds,l;if(a.nested)i.items.length&&n.dirty(i.items[0]),o=Wm(i,s),i.items.forEach(f=>{f.bounds.clear().union(o)});else if(r===Sb||e.modified())switch(t.visit(t.MOD,f=>n.dirty(f)),o.clear(),i.items.forEach(f=>o.union(Wm(f,s))),i.role){case O3:case R3:case D3:t.reflow()}else l=t.changed(t.REM),t.visit(t.ADD,f=>{o.union(Wm(f,s))}),t.visit(t.MOD,f=>{l=l||o.alignsWith(f.bounds),n.dirty(f),o.union(Wm(f,s))}),l&&(o.clear(),i.items.forEach(f=>o.union(f.bounds)));return xB(i),t.modifies("bounds")}});function Wm(e,t,n){return t(e.bounds.clear(),e,n)}const E6=":vega_identifier:";function F3(e){J.call(this,0,e)}F3.Definition={type:"Identifier",metadata:{modifies:!0},params:[{name:"as",type:"string",required:!0}]};pe(F3,J,{transform(e,t){const n=vre(t.dataflow),i=e.as;let r=n.value;return t.visit(t.ADD,a=>a[i]=a[i]||++r),n.set(this.value=r),t}});function vre(e){return e._signals[E6]||(e._signals[E6]=e.add(0))}function DB(e){J.call(this,null,e)}pe(DB,J,{transform(e,t){let n=this.value;n||(n=t.dataflow.scenegraph().mark(e.markdef,bre(e),e.index),n.group.context=e.context,e.context.group||(e.context.group=n.group),n.source=this.source,n.clip=e.clip,n.interactive=e.interactive,this.value=n);const i=n.marktype===Sb?hb:db;return t.visit(t.ADD,r=>i.call(r,n)),(e.modified("clip")||e.modified("interactive"))&&(n.clip=e.clip,n.interactive=!!e.interactive,n.zdirty=!0,t.reflow()),n.items=t.source,t}});function bre(e){const t=e.groups,n=e.parent;return t&&t.size===1?t.get(Object.keys(t.object)[0]):t&&n?t.lookup(n):null}function RB(e){J.call(this,null,e)}const S6={parity:e=>e.filter((t,n)=>n%2?t.opacity=0:1),greedy:(e,t)=>{let n;return e.filter((i,r)=>!r||!NB(n.bounds,i.bounds,t)?(n=i,1):i.opacity=0)}},NB=(e,t,n)=>n>Math.max(t.x1-e.x2,e.x1-t.x2,t.y1-e.y2,e.y1-t.y2),_6=(e,t)=>{for(var n=1,i=e.length,r=e[0].bounds,a;n<i;r=a,++n)if(NB(r,a=e[n].bounds,t))return!0},xre=e=>{const t=e.bounds;return t.width()>1&&t.height()>1},Ere=(e,t,n)=>{var i=e.range(),r=new rn;return t===Zf||t===hu?r.set(i[0],-1/0,i[1],1/0):r.set(-1/0,i[0],1/0,i[1]),r.expand(n||1),a=>r.encloses(a.bounds)},w6=e=>(e.forEach(t=>t.opacity=1),e),A6=(e,t)=>e.reflow(t.modified()).modifies("opacity");pe(RB,J,{transform(e,t){const n=S6[e.method]||S6.parity,i=e.separation||0;let r=t.materialize(t.SOURCE).source,a,s;if(!r||!r.length)return;if(!e.method)return e.modified("method")&&(w6(r),t=A6(t,e)),t;if(r=r.filter(xre),!r.length)return;if(e.sort&&(r=r.slice().sort(e.sort)),a=w6(r),t=A6(t,e),a.length>=3&&_6(a,i)){do a=n(a,i);while(a.length>=3&&_6(a,i));a.length<3&&!Je(r).opacity&&(a.length>1&&(Je(a).opacity=0),Je(r).opacity=1)}e.boundScale&&e.boundTolerance>=0&&(s=Ere(e.boundScale,e.boundOrient,+e.boundTolerance),r.forEach(l=>{s(l)||(l.opacity=0)}));const o=a[0].mark.bounds.clear();return r.forEach(l=>{l.opacity&&o.union(l.bounds)}),t}});function zB(e){J.call(this,null,e)}pe(zB,J,{transform(e,t){const n=t.dataflow;if(t.visit(t.ALL,i=>n.dirty(i)),t.fields&&t.fields.zindex){const i=t.source&&t.source[0];i&&(i.mark.zdirty=!0)}}});const Xn=new rn;function Ef(e,t,n){return e[t]===n?0:(e[t]=n,1)}function Sre(e){var t=e.items[0].orient;return t===Zr||t===Kr}function _re(e){let t=+e.grid;return[e.ticks?t++:-1,e.labels?t++:-1,t+ +e.domain]}function wre(e,t,n,i){var r=t.items[0],a=r.datum,s=r.translate!=null?r.translate:.5,o=r.orient,l=_re(a),f=r.range,d=r.offset,g=r.position,p=r.minExtent,y=r.maxExtent,v=a.title&&r.items[l[2]].items[0],b=r.titlePadding,E=r.bounds,_=v&&v3(v),w=0,A=0,$,C;switch(Xn.clear().union(E),E.clear(),($=l[0])>-1&&E.union(r.items[$].bounds),($=l[1])>-1&&E.union(r.items[$].bounds),o){case Zf:w=g||0,A=-d,C=Math.max(p,Math.min(y,-E.y1)),E.add(0,-C).add(f,0),v&&Qm(e,v,C,b,_,0,-1,E);break;case Zr:w=-d,A=g||0,C=Math.max(p,Math.min(y,-E.x1)),E.add(-C,0).add(0,f),v&&Qm(e,v,C,b,_,1,-1,E);break;case Kr:w=n+d,A=g||0,C=Math.max(p,Math.min(y,E.x2)),E.add(0,0).add(C,f),v&&Qm(e,v,C,b,_,1,1,E);break;case hu:w=g||0,A=i+d,C=Math.max(p,Math.min(y,E.y2)),E.add(0,0).add(f,C),v&&Qm(e,v,C,b,0,0,1,E);break;default:w=r.x,A=r.y}return eo(E.translate(w,A),r),Ef(r,"x",w+s)|Ef(r,"y",A+s)&&(r.bounds=Xn,e.dirty(r),r.bounds=E,e.dirty(r)),r.mark.bounds.clear().union(E)}function Qm(e,t,n,i,r,a,s,o){const l=t.bounds;if(t.auto){const f=s*(n+r+i);let d=0,g=0;e.dirty(t),a?d=(t.x||0)-(t.x=f):g=(t.y||0)-(t.y=f),t.mark.bounds.clear().union(l.translate(-d,-g)),e.dirty(t)}o.union(l)}const $6=(e,t)=>Math.floor(Math.min(e,t)),C6=(e,t)=>Math.ceil(Math.max(e,t));function Are(e){var t=e.items,n=t.length,i=0,r,a;const s={marks:[],rowheaders:[],rowfooters:[],colheaders:[],colfooters:[],rowtitle:null,coltitle:null};for(;i<n;++i)if(r=t[i],a=r.items,r.marktype===Sb)switch(r.role){case O3:case R3:case D3:break;case SB:s.rowheaders.push(...a);break;case _B:s.rowfooters.push(...a);break;case AB:s.colheaders.push(...a);break;case $B:s.colfooters.push(...a);break;case wB:s.rowtitle=a[0];break;case CB:s.coltitle=a[0];break;default:s.marks.push(...a)}return s}function $re(e){return new rn().set(0,0,e.width||0,e.height||0)}function Cre(e){const t=e.bounds.clone();return t.empty()?t.set(0,0,0,0):t.translate(-(e.x||0),-(e.y||0))}function Ot(e,t,n){const i=be(e)?e[t]:e;return i??(n!==void 0?n:0)}function T6(e){return e<0?Math.ceil(-e):0}function FB(e,t,n){var i=!n.nodirty,r=n.bounds===z3?$re:Cre,a=Xn.set(0,0,0,0),s=Ot(n.align,Vo),o=Ot(n.align,Wo),l=Ot(n.padding,Vo),f=Ot(n.padding,Wo),d=n.columns||t.length,g=d<=0?1:Math.ceil(t.length/d),p=t.length,y=Array(p),v=Array(d),b=0,E=Array(p),_=Array(g),w=0,A=Array(p),$=Array(p),C=Array(p),k,M,R,z,B,U,V,G,q,F,D;for(M=0;M<d;++M)v[M]=0;for(M=0;M<g;++M)_[M]=0;for(M=0;M<p;++M)U=t[M],B=C[M]=r(U),U.x=U.x||0,A[M]=0,U.y=U.y||0,$[M]=0,R=M%d,z=~~(M/d),b=Math.max(b,V=Math.ceil(B.x2)),w=Math.max(w,G=Math.ceil(B.y2)),v[R]=Math.max(v[R],V),_[z]=Math.max(_[z],G),y[M]=l+T6(B.x1),E[M]=f+T6(B.y1),i&&e.dirty(t[M]);for(M=0;M<p;++M)M%d===0&&(y[M]=0),M<d&&(E[M]=0);if(s===Ow)for(R=1;R<d;++R){for(D=0,M=R;M<p;M+=d)D<y[M]&&(D=y[M]);for(M=R;M<p;M+=d)y[M]=D+v[R-1]}else if(s===Vm){for(D=0,M=0;M<p;++M)M%d&&D<y[M]&&(D=y[M]);for(M=0;M<p;++M)M%d&&(y[M]=D+b)}else for(s=!1,R=1;R<d;++R)for(M=R;M<p;M+=d)y[M]+=v[R-1];if(o===Ow)for(z=1;z<g;++z){for(D=0,M=z*d,k=M+d;M<k;++M)D<E[M]&&(D=E[M]);for(M=z*d;M<k;++M)E[M]=D+_[z-1]}else if(o===Vm){for(D=0,M=d;M<p;++M)D<E[M]&&(D=E[M]);for(M=d;M<p;++M)E[M]=D+w}else for(o=!1,z=1;z<g;++z)for(M=z*d,k=M+d;M<k;++M)E[M]+=_[z-1];for(q=0,M=0;M<p;++M)q=y[M]+(M%d?q:0),A[M]+=q-t[M].x;for(R=0;R<d;++R)for(F=0,M=R;M<p;M+=d)F+=E[M],$[M]+=F-t[M].y;if(s&&Ot(n.center,Vo)&&g>1)for(M=0;M<p;++M)B=s===Vm?b:v[M%d],q=B-C[M].x2-t[M].x-A[M],q>0&&(A[M]+=q/2);if(o&&Ot(n.center,Wo)&&d!==1)for(M=0;M<p;++M)B=o===Vm?w:_[~~(M/d)],F=B-C[M].y2-t[M].y-$[M],F>0&&($[M]+=F/2);for(M=0;M<p;++M)a.union(C[M].translate(A[M],$[M]));switch(q=Ot(n.anchor,fre),F=Ot(n.anchor,dre),Ot(n.anchor,Vo)){case ui:q-=a.width();break;case kw:q-=a.width()/2}switch(Ot(n.anchor,Wo)){case ui:F-=a.height();break;case kw:F-=a.height()/2}for(q=Math.round(q),F=Math.round(F),a.clear(),M=0;M<p;++M)t[M].mark.bounds.clear();for(M=0;M<p;++M)U=t[M],U.x+=A[M]+=q,U.y+=$[M]+=F,a.union(U.mark.bounds.union(U.bounds.translate(A[M],$[M]))),i&&e.dirty(U);return a}function Tre(e,t,n){var i=Are(t),r=i.marks,a=n.bounds===z3?Mre:kre,s=n.offset,o=n.columns||r.length,l=o<=0?1:Math.ceil(r.length/o),f=l*o,d,g,p,y,v,b,E;const _=FB(e,r,n);_.empty()&&_.set(0,0,0,0),i.rowheaders&&(b=Ot(n.headerBand,Wo,null),d=Zm(e,i.rowheaders,r,o,l,-Ot(s,"rowHeader"),$6,0,a,"x1",0,o,1,b)),i.colheaders&&(b=Ot(n.headerBand,Vo,null),g=Zm(e,i.colheaders,r,o,o,-Ot(s,"columnHeader"),$6,1,a,"y1",0,1,o,b)),i.rowfooters&&(b=Ot(n.footerBand,Wo,null),p=Zm(e,i.rowfooters,r,o,l,Ot(s,"rowFooter"),C6,0,a,"x2",o-1,o,1,b)),i.colfooters&&(b=Ot(n.footerBand,Vo,null),y=Zm(e,i.colfooters,r,o,o,Ot(s,"columnFooter"),C6,1,a,"y2",f-o,1,o,b)),i.rowtitle&&(v=Ot(n.titleAnchor,Wo),E=Ot(s,"rowTitle"),E=v===ui?p+E:d-E,b=Ot(n.titleBand,Wo,.5),M6(e,i.rowtitle,E,0,_,b)),i.coltitle&&(v=Ot(n.titleAnchor,Vo),E=Ot(s,"columnTitle"),E=v===ui?y+E:g-E,b=Ot(n.titleBand,Vo,.5),M6(e,i.coltitle,E,1,_,b))}function Mre(e,t){return t==="x1"?e.x||0:t==="y1"?e.y||0:t==="x2"?(e.x||0)+(e.width||0):t==="y2"?(e.y||0)+(e.height||0):void 0}function kre(e,t){return e.bounds[t]}function Zm(e,t,n,i,r,a,s,o,l,f,d,g,p,y){var v=n.length,b=0,E=0,_,w,A,$,C,k,M,R,z;if(!v)return b;for(_=d;_<v;_+=g)n[_]&&(b=s(b,l(n[_],f)));if(!t.length)return b;for(t.length>r&&(e.warn("Grid headers exceed limit: "+r),t=t.slice(0,r)),b+=a,w=0,$=t.length;w<$;++w)e.dirty(t[w]),t[w].mark.bounds.clear();for(_=d,w=0,$=t.length;w<$;++w,_+=g){for(k=t[w],C=k.mark.bounds,A=_;A>=0&&(M=n[A])==null;A-=p);o?(R=y==null?M.x:Math.round(M.bounds.x1+y*M.bounds.width()),z=b):(R=b,z=y==null?M.y:Math.round(M.bounds.y1+y*M.bounds.height())),C.union(k.bounds.translate(R-(k.x||0),z-(k.y||0))),k.x=R,k.y=z,e.dirty(k),E=s(E,C[f])}return E}function M6(e,t,n,i,r,a){if(t){e.dirty(t);var s=n,o=n;i?s=Math.round(r.x1+a*r.width()):o=Math.round(r.y1+a*r.height()),t.bounds.translate(s-(t.x||0),o-(t.y||0)),t.mark.bounds.clear().union(t.bounds),t.x=s,t.y=o,e.dirty(t)}}function Ore(e,t){const n=e[t]||{};return(i,r)=>n[i]!=null?n[i]:e[i]!=null?e[i]:r}function Dre(e,t){let n=-1/0;return e.forEach(i=>{i.offset!=null&&(n=Math.max(n,i.offset))}),n>-1/0?n:t}function Rre(e,t,n,i,r,a,s){const o=Ore(n,t),l=Dre(e,o("offset",0)),f=o("anchor",k3),d=f===ui?1:f===kw?.5:0,g={align:Ow,bounds:o("bounds",z3),columns:o("direction")==="vertical"?1:e.length,padding:o("margin",8),center:o("center"),nodirty:!0};switch(t){case Zr:g.anchor={x:Math.floor(i.x1)-l,column:ui,y:d*(s||i.height()+2*i.y1),row:f};break;case Kr:g.anchor={x:Math.ceil(i.x2)+l,y:d*(s||i.height()+2*i.y1),row:f};break;case Zf:g.anchor={y:Math.floor(r.y1)-l,row:ui,x:d*(a||r.width()+2*r.x1),column:f};break;case hu:g.anchor={y:Math.ceil(r.y2)+l,x:d*(a||r.width()+2*r.x1),column:f};break;case ore:g.anchor={x:l,y:l};break;case ure:g.anchor={x:a-l,y:l,column:ui};break;case lre:g.anchor={x:l,y:s-l,row:ui};break;case cre:g.anchor={x:a-l,y:s-l,column:ui,row:ui};break}return g}function Nre(e,t){var n=t.items[0],i=n.datum,r=n.orient,a=n.bounds,s=n.x,o=n.y,l,f;return n._bounds?n._bounds.clear().union(a):n._bounds=a.clone(),a.clear(),Fre(e,n,n.items[0].items[0]),a=zre(n,a),l=2*n.padding,f=2*n.padding,a.empty()||(l=Math.ceil(a.width()+l),f=Math.ceil(a.height()+f)),i.type===mre&&Lre(n.items[0].items[0].items[0].items),r!==N3&&(n.x=s=0,n.y=o=0),n.width=l,n.height=f,eo(a.set(s,o,s+l,o+f),n),n.mark.bounds.clear().union(a),n}function zre(e,t){return e.items.forEach(n=>t.union(n.bounds)),t.x1=e.padding,t.y1=e.padding,t}function Fre(e,t,n){var i=t.padding,r=i-n.x,a=i-n.y;if(!t.datum.title)(r||a)&&tg(e,n,r,a);else{var s=t.items[1].items[0],o=s.anchor,l=t.titlePadding||0,f=i-s.x,d=i-s.y;switch(s.orient){case Zr:r+=Math.ceil(s.bounds.width())+l;break;case Kr:case hu:break;default:a+=s.bounds.height()+l}switch((r||a)&&tg(e,n,r,a),s.orient){case Zr:d+=of(t,n,s,o,1,1);break;case Kr:f+=of(t,n,s,ui,0,0)+l,d+=of(t,n,s,o,1,1);break;case hu:f+=of(t,n,s,o,0,0),d+=of(t,n,s,ui,-1,0,1)+l;break;default:f+=of(t,n,s,o,0,0)}(f||d)&&tg(e,s,f,d),(f=Math.round(s.bounds.x1-i))<0&&(tg(e,n,-f,0),tg(e,s,-f,0))}}function of(e,t,n,i,r,a,s){const o=e.datum.type!=="symbol",l=n.datum.vgrad,f=o&&(a||!l)&&!s?t.items[0]:t,d=f.bounds[r?"y2":"x2"]-e.padding,g=l&&a?d:0,p=l&&a?0:d,y=r<=0?0:v3(n);return Math.round(i===k3?g:i===ui?p-y:.5*(d-y))}function tg(e,t,n,i){t.x+=n,t.y+=i,t.bounds.translate(n,i),t.mark.bounds.translate(n,i),e.dirty(t)}function Lre(e){const t=e.reduce((n,i)=>(n[i.column]=Math.max(i.bounds.x2-i.x,n[i.column]||0),n),{});e.forEach(n=>{n.width=t[n.column],n.height=n.bounds.y2-n.y})}function Ure(e,t,n,i,r){var a=t.items[0],s=a.frame,o=a.orient,l=a.anchor,f=a.offset,d=a.padding,g=a.items[0].items[0],p=a.items[1]&&a.items[1].items[0],y=o===Zr||o===Kr?i:n,v=0,b=0,E=0,_=0,w=0,A;if(s!==Sb?o===Zr?(v=r.y2,y=r.y1):o===Kr?(v=r.y1,y=r.y2):(v=r.x1,y=r.x2):o===Zr&&(v=i,y=0),A=l===k3?v:l===ui?y:(v+y)/2,p&&p.text){switch(o){case Zf:case hu:w=g.bounds.height()+d;break;case Zr:_=g.bounds.width()+d;break;case Kr:_=-g.bounds.width()-d;break}Xn.clear().union(p.bounds),Xn.translate(_-(p.x||0),w-(p.y||0)),Ef(p,"x",_)|Ef(p,"y",w)&&(e.dirty(p),p.bounds.clear().union(Xn),p.mark.bounds.clear().union(Xn),e.dirty(p)),Xn.clear().union(p.bounds)}else Xn.clear();switch(Xn.union(g.bounds),o){case Zf:b=A,E=r.y1-Xn.height()-f;break;case Zr:b=r.x1-Xn.width()-f,E=A;break;case Kr:b=r.x2+Xn.width()+f,E=A;break;case hu:b=A,E=r.y2+f;break;default:b=a.x,E=a.y}return Ef(a,"x",b)|Ef(a,"y",E)&&(Xn.translate(b,E),e.dirty(a),a.bounds.clear().union(Xn),t.bounds.clear().union(Xn),e.dirty(a)),a.bounds}function LB(e){J.call(this,null,e)}pe(LB,J,{transform(e,t){const n=t.dataflow;return e.mark.items.forEach(i=>{e.layout&&Tre(n,i,e.layout),Ire(n,i,e)}),Bre(e.mark.group)?t.reflow():t}});function Bre(e){return e&&e.mark.role!=="legend-entry"}function Ire(e,t,n){var i=t.items,r=Math.max(0,t.width||0),a=Math.max(0,t.height||0),s=new rn().set(0,0,r,a),o=s.clone(),l=s.clone(),f=[],d,g,p,y,v,b;for(v=0,b=i.length;v<b;++v)switch(g=i[v],g.role){case O3:y=Sre(g)?o:l,y.union(wre(e,g,r,a));break;case D3:d=g;break;case R3:f.push(Nre(e,g));break;case hre:case gre:case SB:case _B:case wB:case AB:case $B:case CB:o.union(g.bounds),l.union(g.bounds);break;default:s.union(g.bounds)}if(f.length){const E={};f.forEach(_=>{p=_.orient||Kr,p!==N3&&(E[p]||(E[p]=[])).push(_)});for(const _ in E){const w=E[_];FB(e,w,Rre(w,_,n.legends,o,l,r,a))}f.forEach(_=>{const w=_.bounds;if(w.equals(_._bounds)||(_.bounds=_._bounds,e.dirty(_),_.bounds=w,e.dirty(_)),n.autosize&&(n.autosize.type===TB||n.autosize.type===MB||n.autosize.type===kB))switch(_.orient){case Zr:case Kr:s.add(w.x1,0).add(w.x2,0);break;case Zf:case hu:s.add(0,w.y1).add(0,w.y2)}else s.union(w)})}s.union(o).union(l),d&&s.union(Ure(e,d,r,a,s)),t.clip&&s.set(0,0,t.width||0,t.height||0),Pre(e,t,s,n)}function Pre(e,t,n,i){const r=i.autosize||{},a=r.type;if(e._autosize<1||!a)return;let s=e._width,o=e._height,l=Math.max(0,t.width||0),f=Math.max(0,Math.ceil(-n.x1)),d=Math.max(0,t.height||0),g=Math.max(0,Math.ceil(-n.y1));const p=Math.max(0,Math.ceil(n.x2-l)),y=Math.max(0,Math.ceil(n.y2-d));if(r.contains===pre){const v=e.padding();s-=v.left+v.right,o-=v.top+v.bottom}a===N3?(f=0,g=0,l=s,d=o):a===TB?(l=Math.max(0,s-f-p),d=Math.max(0,o-g-y)):a===MB?(l=Math.max(0,s-f-p),o=d+g+y):a===kB?(s=l+f+p,d=Math.max(0,o-g-y)):a===yre&&(s=l+f+p,o=d+g+y),e._resizeView(s,o,l,d,[f,g],r.resize)}const qre=Object.freeze(Object.defineProperty({__proto__:null,bound:OB,identifier:F3,mark:DB,overlap:RB,render:zB,viewlayout:LB},Symbol.toStringTag,{value:"Module"}));function UB(e){J.call(this,null,e)}pe(UB,J,{transform(e,t){if(this.value&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),i=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=this.value,a=e.scale,s=e.count==null?e.values?e.values.length:10:e.count,o=e3(a,s,e.minstep),l=e.format||dU(n,a,o,e.formatSpecifier,e.formatType,!!e.values),f=e.values?fU(a,e.values,o):t3(a,o);return r&&(i.rem=r),r=f.map((d,g)=>ct({index:g/(f.length-1||1),value:d,label:l(d)})),e.extra&&r.length&&r.push(ct({index:-1,extra:{value:r[0].value},label:""})),i.source=r,i.add=r,this.value=r,i}});function BB(e){J.call(this,null,e)}function jre(){return ct({})}function Hre(e){const t=Sd().test(n=>n.exit);return t.lookup=n=>t.get(e(n)),t}pe(BB,J,{transform(e,t){var n=t.dataflow,i=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=e.item||jre,a=e.key||ke,s=this.value;return re(i.encode)&&(i.encode=null),s&&(e.modified("key")||t.modified(a))&&te("DataJoin does not support modified key function or fields."),s||(t=t.addAll(),this.value=s=Hre(a)),t.visit(t.ADD,o=>{const l=a(o);let f=s.get(l);f?f.exit?(s.empty--,i.add.push(f)):i.mod.push(f):(f=r(o),s.set(l,f),i.add.push(f)),f.datum=o,f.exit=!1}),t.visit(t.MOD,o=>{const l=a(o),f=s.get(l);f&&(f.datum=o,i.mod.push(f))}),t.visit(t.REM,o=>{const l=a(o),f=s.get(l);o===f.datum&&!f.exit&&(i.rem.push(f),f.exit=!0,++s.empty)}),t.changed(t.ADD_MOD)&&i.modifies("datum"),(t.clean()||e.clean&&s.empty>n.cleanThreshold)&&n.runAfter(s.clean),i}});function IB(e){J.call(this,null,e)}pe(IB,J,{transform(e,t){var n=t.fork(t.ADD_REM),i=e.mod||!1,r=e.encoders,a=t.encode;if(re(a))if(n.changed()||a.every(g=>r[g]))a=a[0],n.encode=null;else return t.StopPropagation;var s=a==="enter",o=r.update||zo,l=r.enter||zo,f=r.exit||zo,d=(a&&!s?r[a]:o)||zo;if(t.changed(t.ADD)&&(t.visit(t.ADD,g=>{l(g,e),o(g,e)}),n.modifies(l.output),n.modifies(o.output),d!==zo&&d!==o&&(t.visit(t.ADD,g=>{d(g,e)}),n.modifies(d.output))),t.changed(t.REM)&&f!==zo&&(t.visit(t.REM,g=>{f(g,e)}),n.modifies(f.output)),s||d!==zo){const g=t.MOD|(e.modified()?t.REFLOW:0);s?(t.visit(g,p=>{const y=l(p,e)||i;(d(p,e)||y)&&n.mod.push(p)}),n.mod.length&&n.modifies(l.output)):t.visit(g,p=>{(d(p,e)||i)&&n.mod.push(p)}),n.mod.length&&n.modifies(d.output)}return n.changed()?n:t.StopPropagation}});function PB(e){J.call(this,[],e)}pe(PB,J,{transform(e,t){if(this.value!=null&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),i=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=this.value,a=e.type||M1,s=e.scale,o=+e.limit,l=e3(s,e.count==null?5:e.count,e.minstep),f=!!e.values||a===M1,d=e.format||mU(n,s,l,a,e.formatSpecifier,e.formatType,f),g=e.values||pU(s,l),p,y,v,b,E;return r&&(i.rem=r),a===M1?(o&&g.length>o?(t.dataflow.warn("Symbol legend count exceeds limit, filtering items."),r=g.slice(0,o-1),E=!0):r=g,qe(v=e.size)?(!e.values&&s(r[0])===0&&(r=r.slice(1)),b=r.reduce((_,w)=>Math.max(_,v(w,e)),0)):v=ii(b=v||8),r=r.map((_,w)=>ct({index:w,label:d(_,w,r),value:_,offset:b,size:v(_,e)})),E&&(E=g[r.length],r.push(ct({index:r.length,label:`${g.length-r.length} entries`,value:E,offset:b,size:v(E,e)})))):a===mte?(p=s.domain(),y=uU(s,p[0],Je(p)),g.length<3&&!e.values&&p[0]!==Je(p)&&(g=[p[0],Je(p)]),r=g.map((_,w)=>ct({index:w,label:d(_,w,g),value:_,perc:y(_)}))):(v=g.length-1,y=Cte(s),r=g.map((_,w)=>ct({index:w,label:d(_,w,g),value:_,perc:w?y(_):0,perc2:w===v?1:y(g[w+1])}))),i.source=r,i.add=r,this.value=r,i}});const Gre=e=>e.source.x,Yre=e=>e.source.y,Xre=e=>e.target.x,Vre=e=>e.target.y;function L3(e){J.call(this,{},e)}L3.Definition={type:"LinkPath",metadata:{modifies:!0},params:[{name:"sourceX",type:"field",default:"source.x"},{name:"sourceY",type:"field",default:"source.y"},{name:"targetX",type:"field",default:"target.x"},{name:"targetY",type:"field",default:"target.y"},{name:"orient",type:"enum",default:"vertical",values:["horizontal","vertical","radial"]},{name:"shape",type:"enum",default:"line",values:["line","arc","curve","diagonal","orthogonal"]},{name:"require",type:"signal"},{name:"as",type:"string",default:"path"}]};pe(L3,J,{transform(e,t){var n=e.sourceX||Gre,i=e.sourceY||Yre,r=e.targetX||Xre,a=e.targetY||Vre,s=e.as||"path",o=e.orient||"vertical",l=e.shape||"line",f=k6.get(l+"-"+o)||k6.get(l);return f||te("LinkPath unsupported type: "+e.shape+(e.orient?"-"+e.orient:"")),t.visit(t.SOURCE,d=>{d[s]=f(n(d),i(d),r(d),a(d))}),t.reflow(e.modified()).modifies(s)}});const qB=(e,t,n,i)=>"M"+e+","+t+"L"+n+","+i,Wre=(e,t,n,i)=>qB(t*Math.cos(e),t*Math.sin(e),i*Math.cos(n),i*Math.sin(n)),jB=(e,t,n,i)=>{var r=n-e,a=i-t,s=Math.hypot(r,a)/2,o=180*Math.atan2(a,r)/Math.PI;return"M"+e+","+t+"A"+s+","+s+" "+o+" 0 1 "+n+","+i},Qre=(e,t,n,i)=>jB(t*Math.cos(e),t*Math.sin(e),i*Math.cos(n),i*Math.sin(n)),HB=(e,t,n,i)=>{const r=n-e,a=i-t,s=.2*(r+a),o=.2*(a-r);return"M"+e+","+t+"C"+(e+s)+","+(t+o)+" "+(n+o)+","+(i-s)+" "+n+","+i},Zre=(e,t,n,i)=>HB(t*Math.cos(e),t*Math.sin(e),i*Math.cos(n),i*Math.sin(n)),Kre=(e,t,n,i)=>"M"+e+","+t+"V"+i+"H"+n,Jre=(e,t,n,i)=>"M"+e+","+t+"H"+n+"V"+i,eae=(e,t,n,i)=>{const r=Math.cos(e),a=Math.sin(e),s=Math.cos(n),o=Math.sin(n),l=Math.abs(n-e)>Math.PI?n<=e:n>e;return"M"+t*r+","+t*a+"A"+t+","+t+" 0 0,"+(l?1:0)+" "+t*s+","+t*o+"L"+i*s+","+i*o},tae=(e,t,n,i)=>{const r=(e+n)/2;return"M"+e+","+t+"C"+r+","+t+" "+r+","+i+" "+n+","+i},nae=(e,t,n,i)=>{const r=(t+i)/2;return"M"+e+","+t+"C"+e+","+r+" "+n+","+r+" "+n+","+i},iae=(e,t,n,i)=>{const r=Math.cos(e),a=Math.sin(e),s=Math.cos(n),o=Math.sin(n),l=(t+i)/2;return"M"+t*r+","+t*a+"C"+l*r+","+l*a+" "+l*s+","+l*o+" "+i*s+","+i*o},k6=Sd({line:qB,"line-radial":Wre,arc:jB,"arc-radial":Qre,curve:HB,"curve-radial":Zre,"orthogonal-horizontal":Kre,"orthogonal-vertical":Jre,"orthogonal-radial":eae,"diagonal-horizontal":tae,"diagonal-vertical":nae,"diagonal-radial":iae});function U3(e){J.call(this,null,e)}U3.Definition={type:"Pie",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"startAngle",type:"number",default:0},{name:"endAngle",type:"number",default:6.283185307179586},{name:"sort",type:"boolean",default:!1},{name:"as",type:"string",array:!0,length:2,default:["startAngle","endAngle"]}]};pe(U3,J,{transform(e,t){var n=e.as||["startAngle","endAngle"],i=n[0],r=n[1],a=e.field||vd,s=e.startAngle||0,o=e.endAngle!=null?e.endAngle:2*Math.PI,l=t.source,f=l.map(a),d=f.length,g=s,p=(o-s)/a9(f),y=er(d),v,b,E;for(e.sort&&y.sort((_,w)=>f[_]-f[w]),v=0;v<d;++v)E=f[y[v]],b=l[y[v]],b[i]=g,b[r]=g+=E*p;return this.value=f,t.reflow(e.modified()).modifies(n)}});const rae=5;function aae(e){const t=e.type;return!e.bins&&(t===Gf||t===Bp||t===Ip)}function GB(e){return ZC(e)&&e!==Ua}const sae=ra(["set","modified","clear","type","scheme","schemeExtent","schemeCount","domain","domainMin","domainMid","domainMax","domainRaw","domainImplicit","nice","zero","bins","range","rangeStep","round","reverse","interpolate","interpolateGamma"]);function YB(e){J.call(this,null,e),this.modified(!0)}pe(YB,J,{transform(e,t){var n=t.dataflow,i=this.value,r=oae(e);(!i||r!==i.type)&&(this.value=i=ut(r)());for(r in e)if(!sae[r]){if(r==="padding"&&GB(i.type))continue;qe(i[r])?i[r](e[r]):n.warn("Unsupported scale property: "+r)}return hae(i,e,dae(i,e,lae(i,e,n))),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function oae(e){var t=e.type,n="",i;return t===Ua?Ua+"-"+Gf:(uae(e)&&(i=e.rawDomain?e.rawDomain.length:e.domain?e.domain.length+ +(e.domainMid!=null):0,n=i===2?Ua+"-":i===3?kd+"-":""),(n+t||Gf).toLowerCase())}function uae(e){const t=e.type;return ZC(t)&&t!==Nl&&t!==zl&&(e.scheme||e.range&&e.range.length&&e.range.every(ve))}function lae(e,t,n){const i=cae(e,t.domainRaw,n);if(i>-1)return i;var r=t.domain,a=e.type,s=t.zero||t.zero===void 0&&aae(e),o,l;if(!r)return 0;if((s||t.domainMin!=null||t.domainMax!=null||t.domainMid!=null)&&(o=(r=r.slice()).length-1||1,s&&(r[0]>0&&(r[0]=0),r[o]<0&&(r[o]=0)),t.domainMin!=null&&(r[0]=t.domainMin),t.domainMax!=null&&(r[o]=t.domainMax),t.domainMid!=null)){l=t.domainMid;const f=l>r[o]?o+1:l<r[0]?0:o;f!==o&&n.warn("Scale domainMid exceeds domain min or max.",l),r.splice(f,0,l)}return GB(a)&&t.padding&&r[0]!==Je(r)&&(r=fae(a,r,t.range,t.padding,t.exponent,t.constant)),e.domain(XB(a,r,n)),a===XC&&e.unknown(t.domainImplicit?cw:void 0),t.nice&&e.nice&&e.nice(t.nice!==!0&&e3(e,t.nice)||null),r.length}function cae(e,t,n){return t?(e.domain(XB(e.type,t,n)),t.length):-1}function fae(e,t,n,i,r,a){var s=Math.abs(Je(n)-n[0]),o=s/(s-2*i),l=e===Ws?g$(t,null,o):e===Ip?ey(t,null,o,.5):e===Bp?ey(t,null,o,r||1):e===ob?p$(t,null,o,a||1):h$(t,null,o);return t=t.slice(),t[0]=l[0],t[t.length-1]=l[1],t}function XB(e,t,n){if(iU(e)){var i=Math.abs(t.reduce((r,a)=>r+(a<0?-1:a>0?1:0),0));i!==t.length&&n.warn("Log scale domain includes zero: "+ge(t))}return t}function dae(e,t,n){let i=t.bins;if(i&&!re(i)){const r=e.domain(),a=r[0],s=Je(r),o=i.step;let l=i.start==null?a:i.start,f=i.stop==null?s:i.stop;o||te("Scale bins parameter missing step property."),l<a&&(l=o*Math.ceil(a/o)),f>s&&(f=o*Math.floor(s/o)),i=er(l,f+o/2,o)}return i?e.bins=i:e.bins&&delete e.bins,e.type===VC&&(i?!t.domain&&!t.domainRaw&&(e.domain(i),n=i.length):e.bins=e.domain()),n}function hae(e,t,n){var i=e.type,r=t.round||!1,a=t.range;if(t.rangeStep!=null)a=gae(i,t,n);else if(t.scheme&&(a=pae(i,t,n),qe(a))){if(e.interpolator)return e.interpolator(a);te(`Scale type ${i} does not support interpolating color schemes.`)}if(a&&rU(i))return e.interpolator(cb(Dw(a,t.reverse),t.interpolate,t.interpolateGamma));a&&t.interpolate&&e.interpolate?e.interpolate(KC(t.interpolate,t.interpolateGamma)):qe(e.round)?e.round(r):qe(e.rangeRound)&&e.interpolate(r?Lp:_u),a&&e.range(Dw(a,t.reverse))}function gae(e,t,n){e!==ZL&&e!==yw&&te("Only band and point scales support rangeStep.");var i=(t.paddingOuter!=null?t.paddingOuter:t.padding)||0,r=e===yw?1:(t.paddingInner!=null?t.paddingInner:t.padding)||0;return[0,t.rangeStep*YC(n,r,i)]}function pae(e,t,n){var i=t.schemeExtent,r,a;return re(t.scheme)?a=cb(t.scheme,t.interpolate,t.interpolateGamma):(r=t.scheme.toLowerCase(),a=JC(r),a||te(`Unrecognized scheme name: ${t.scheme}`)),n=e===lb?n+1:e===VC?n-1:e===Yf||e===ub?+t.schemeCount||rae:n,rU(e)?O6(a,i,t.reverse):qe(a)?oU(O6(a,i),n):e===XC?a:a.slice(0,n)}function O6(e,t,n){return qe(e)&&(t||n)?sU(e,Dw(t||[0,1],n)):e}function Dw(e,t){return t?e.slice().reverse():e}function VB(e){J.call(this,null,e)}pe(VB,J,{transform(e,t){const n=e.modified("sort")||t.changed(t.ADD)||t.modified(e.sort.fields)||t.modified("datum");return n&&t.source.sort(nc(e.sort)),this.modified(n),t}});const D6="zero",WB="center",QB="normalize",ZB=["y0","y1"];function B3(e){J.call(this,null,e)}B3.Definition={type:"Stack",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"groupby",type:"field",array:!0},{name:"sort",type:"compare"},{name:"offset",type:"enum",default:D6,values:[D6,WB,QB]},{name:"as",type:"string",array:!0,length:2,default:ZB}]};pe(B3,J,{transform(e,t){var n=e.as||ZB,i=n[0],r=n[1],a=nc(e.sort),s=e.field||vd,o=e.offset===WB?mae:e.offset===QB?yae:vae,l,f,d,g;for(l=bae(t.source,e.groupby,a,s),f=0,d=l.length,g=l.max;f<d;++f)o(l[f],g,s,i,r);return t.reflow(e.modified()).modifies(n)}});function mae(e,t,n,i,r){for(var a=(t-e.sum)/2,s=e.length,o=0,l;o<s;++o)l=e[o],l[i]=a,l[r]=a+=Math.abs(n(l))}function yae(e,t,n,i,r){for(var a=1/e.sum,s=0,o=e.length,l=0,f=0,d;l<o;++l)d=e[l],d[i]=s,d[r]=s=a*(f+=Math.abs(n(d)))}function vae(e,t,n,i,r){for(var a=0,s=0,o=e.length,l=0,f,d;l<o;++l)d=e[l],f=+n(d),f<0?(d[i]=s,d[r]=s+=f):(d[i]=a,d[r]=a+=f)}function bae(e,t,n,i){var r=[],a=b=>b(d),s,o,l,f,d,g,p,y,v;if(t==null)r.push(e.slice());else for(s={},o=0,l=e.length;o<l;++o)d=e[o],g=t.map(a),p=s[g],p||(s[g]=p=[],r.push(p)),p.push(d);for(g=0,v=0,f=r.length;g<f;++g){for(p=r[g],o=0,y=0,l=p.length;o<l;++o)y+=Math.abs(i(p[o]));p.sum=y,y>v&&(v=y),n&&p.sort(n)}return r.max=v,r}const xae=Object.freeze(Object.defineProperty({__proto__:null,axisticks:UB,datajoin:BB,encode:IB,legendentries:PB,linkpath:L3,pie:U3,scale:YB,sortitems:VB,stack:B3},Symbol.toStringTag,{value:"Module"}));var Re=1e-6,Rw=1e-12,Xe=Math.PI,qt=Xe/2,Oy=Xe/4,yi=Xe*2,Vt=180/Xe,Ge=Xe/180,Ke=Math.abs,Dd=Math.atan,Nr=Math.atan2,De=Math.cos,Km=Math.ceil,KB=Math.exp,Nw=Math.hypot,Dy=Math.log,MS=Math.pow,Oe=Math.sin,Ar=Math.sign||function(e){return e>0?1:e<0?-1:0},vi=Math.sqrt,I3=Math.tan;function JB(e){return e>1?0:e<-1?Xe:Math.acos(e)}function zi(e){return e>1?qt:e<-1?-qt:Math.asin(e)}function Fn(){}function Ry(e,t){e&&N6.hasOwnProperty(e.type)&&N6[e.type](e,t)}var R6={Feature:function(e,t){Ry(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,i=-1,r=n.length;++i<r;)Ry(n[i].geometry,t)}},N6={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,i=-1,r=n.length;++i<r;)e=n[i],t.point(e[0],e[1],e[2])},LineString:function(e,t){zw(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,i=-1,r=n.length;++i<r;)zw(n[i],t,0)},Polygon:function(e,t){z6(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,i=-1,r=n.length;++i<r;)z6(n[i],t)},GeometryCollection:function(e,t){for(var n=e.geometries,i=-1,r=n.length;++i<r;)Ry(n[i],t)}};function zw(e,t,n){var i=-1,r=e.length-n,a;for(t.lineStart();++i<r;)a=e[i],t.point(a[0],a[1],a[2]);t.lineEnd()}function z6(e,t){var n=-1,i=e.length;for(t.polygonStart();++n<i;)zw(e[n],t,1);t.polygonEnd()}function Ds(e,t){e&&R6.hasOwnProperty(e.type)?R6[e.type](e,t):Ry(e,t)}var Ny=new pi,zy=new pi,eI,tI,Fw,Lw,Uw,Ya={point:Fn,lineStart:Fn,lineEnd:Fn,polygonStart:function(){Ny=new pi,Ya.lineStart=Eae,Ya.lineEnd=Sae},polygonEnd:function(){var e=+Ny;zy.add(e<0?yi+e:e),this.lineStart=this.lineEnd=this.point=Fn},sphere:function(){zy.add(yi)}};function Eae(){Ya.point=_ae}function Sae(){nI(eI,tI)}function _ae(e,t){Ya.point=nI,eI=e,tI=t,e*=Ge,t*=Ge,Fw=e,Lw=De(t=t/2+Oy),Uw=Oe(t)}function nI(e,t){e*=Ge,t*=Ge,t=t/2+Oy;var n=e-Fw,i=n>=0?1:-1,r=i*n,a=De(t),s=Oe(t),o=Uw*s,l=Lw*a+o*De(r),f=o*i*Oe(r);Ny.add(Nr(f,l)),Fw=e,Lw=a,Uw=s}function wae(e){return zy=new pi,Ds(e,Ya),zy*2}function Fy(e){return[Nr(e[1],e[0]),zi(e[2])]}function Ll(e){var t=e[0],n=e[1],i=De(n);return[i*De(t),i*Oe(t),Oe(n)]}function Jm(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function Kf(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function kS(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function e1(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function Ly(e){var t=vi(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}var zt,Mi,It,Ki,fl,iI,rI,Mf,qg,Io,Qs,ks={point:Bw,lineStart:F6,lineEnd:L6,polygonStart:function(){ks.point=sI,ks.lineStart=Aae,ks.lineEnd=$ae,qg=new pi,Ya.polygonStart()},polygonEnd:function(){Ya.polygonEnd(),ks.point=Bw,ks.lineStart=F6,ks.lineEnd=L6,Ny<0?(zt=-(It=180),Mi=-(Ki=90)):qg>Re?Ki=90:qg<-1e-6&&(Mi=-90),Qs[0]=zt,Qs[1]=It},sphere:function(){zt=-(It=180),Mi=-(Ki=90)}};function Bw(e,t){Io.push(Qs=[zt=e,It=e]),t<Mi&&(Mi=t),t>Ki&&(Ki=t)}function aI(e,t){var n=Ll([e*Ge,t*Ge]);if(Mf){var i=Kf(Mf,n),r=[i[1],-i[0],0],a=Kf(r,i);Ly(a),a=Fy(a);var s=e-fl,o=s>0?1:-1,l=a[0]*Vt*o,f,d=Ke(s)>180;d^(o*fl<l&&l<o*e)?(f=a[1]*Vt,f>Ki&&(Ki=f)):(l=(l+360)%360-180,d^(o*fl<l&&l<o*e)?(f=-a[1]*Vt,f<Mi&&(Mi=f)):(t<Mi&&(Mi=t),t>Ki&&(Ki=t))),d?e<fl?Zi(zt,e)>Zi(zt,It)&&(It=e):Zi(e,It)>Zi(zt,It)&&(zt=e):It>=zt?(e<zt&&(zt=e),e>It&&(It=e)):e>fl?Zi(zt,e)>Zi(zt,It)&&(It=e):Zi(e,It)>Zi(zt,It)&&(zt=e)}else Io.push(Qs=[zt=e,It=e]);t<Mi&&(Mi=t),t>Ki&&(Ki=t),Mf=n,fl=e}function F6(){ks.point=aI}function L6(){Qs[0]=zt,Qs[1]=It,ks.point=Bw,Mf=null}function sI(e,t){if(Mf){var n=e-fl;qg.add(Ke(n)>180?n+(n>0?360:-360):n)}else iI=e,rI=t;Ya.point(e,t),aI(e,t)}function Aae(){Ya.lineStart()}function $ae(){sI(iI,rI),Ya.lineEnd(),Ke(qg)>Re&&(zt=-(It=180)),Qs[0]=zt,Qs[1]=It,Mf=null}function Zi(e,t){return(t-=e)<0?t+360:t}function Cae(e,t){return e[0]-t[0]}function U6(e,t){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}function Tae(e){var t,n,i,r,a,s,o;if(Ki=It=-(zt=Mi=1/0),Io=[],Ds(e,ks),n=Io.length){for(Io.sort(Cae),t=1,i=Io[0],a=[i];t<n;++t)r=Io[t],U6(i,r[0])||U6(i,r[1])?(Zi(i[0],r[1])>Zi(i[0],i[1])&&(i[1]=r[1]),Zi(r[0],i[1])>Zi(i[0],i[1])&&(i[0]=r[0])):a.push(i=r);for(s=-1/0,n=a.length-1,t=0,i=a[n];t<=n;i=r,++t)r=a[t],(o=Zi(i[1],r[0]))>s&&(s=o,zt=r[0],It=i[1])}return Io=Qs=null,zt===1/0||Mi===1/0?[[NaN,NaN],[NaN,NaN]]:[[zt,Mi],[It,Ki]]}var Ag,Uy,By,Iy,Py,qy,jy,Hy,Iw,Pw,qw,oI,uI,li,ci,fi,Jr={sphere:Fn,point:P3,lineStart:B6,lineEnd:I6,polygonStart:function(){Jr.lineStart=Oae,Jr.lineEnd=Dae},polygonEnd:function(){Jr.lineStart=B6,Jr.lineEnd=I6}};function P3(e,t){e*=Ge,t*=Ge;var n=De(t);Kp(n*De(e),n*Oe(e),Oe(t))}function Kp(e,t,n){++Ag,By+=(e-By)/Ag,Iy+=(t-Iy)/Ag,Py+=(n-Py)/Ag}function B6(){Jr.point=Mae}function Mae(e,t){e*=Ge,t*=Ge;var n=De(t);li=n*De(e),ci=n*Oe(e),fi=Oe(t),Jr.point=kae,Kp(li,ci,fi)}function kae(e,t){e*=Ge,t*=Ge;var n=De(t),i=n*De(e),r=n*Oe(e),a=Oe(t),s=Nr(vi((s=ci*a-fi*r)*s+(s=fi*i-li*a)*s+(s=li*r-ci*i)*s),li*i+ci*r+fi*a);Uy+=s,qy+=s*(li+(li=i)),jy+=s*(ci+(ci=r)),Hy+=s*(fi+(fi=a)),Kp(li,ci,fi)}function I6(){Jr.point=P3}function Oae(){Jr.point=Rae}function Dae(){lI(oI,uI),Jr.point=P3}function Rae(e,t){oI=e,uI=t,e*=Ge,t*=Ge,Jr.point=lI;var n=De(t);li=n*De(e),ci=n*Oe(e),fi=Oe(t),Kp(li,ci,fi)}function lI(e,t){e*=Ge,t*=Ge;var n=De(t),i=n*De(e),r=n*Oe(e),a=Oe(t),s=ci*a-fi*r,o=fi*i-li*a,l=li*r-ci*i,f=Nw(s,o,l),d=zi(f),g=f&&-d/f;Iw.add(g*s),Pw.add(g*o),qw.add(g*l),Uy+=d,qy+=d*(li+(li=i)),jy+=d*(ci+(ci=r)),Hy+=d*(fi+(fi=a)),Kp(li,ci,fi)}function Nae(e){Ag=Uy=By=Iy=Py=qy=jy=Hy=0,Iw=new pi,Pw=new pi,qw=new pi,Ds(e,Jr);var t=+Iw,n=+Pw,i=+qw,r=Nw(t,n,i);return r<Rw&&(t=qy,n=jy,i=Hy,Uy<Re&&(t=By,n=Iy,i=Py),r=Nw(t,n,i),r<Rw)?[NaN,NaN]:[Nr(n,t)*Vt,zi(i/r)*Vt]}function jw(e,t){function n(i,r){return i=e(i,r),t(i[0],i[1])}return e.invert&&t.invert&&(n.invert=function(i,r){return i=t.invert(i,r),i&&e.invert(i[0],i[1])}),n}function Hw(e,t){return Ke(e)>Xe&&(e-=Math.round(e/yi)*yi),[e,t]}Hw.invert=Hw;function cI(e,t,n){return(e%=yi)?t||n?jw(q6(e),j6(t,n)):q6(e):t||n?j6(t,n):Hw}function P6(e){return function(t,n){return t+=e,Ke(t)>Xe&&(t-=Math.round(t/yi)*yi),[t,n]}}function q6(e){var t=P6(e);return t.invert=P6(-e),t}function j6(e,t){var n=De(e),i=Oe(e),r=De(t),a=Oe(t);function s(o,l){var f=De(l),d=De(o)*f,g=Oe(o)*f,p=Oe(l),y=p*n+d*i;return[Nr(g*r-y*a,d*n-p*i),zi(y*r+g*a)]}return s.invert=function(o,l){var f=De(l),d=De(o)*f,g=Oe(o)*f,p=Oe(l),y=p*r-g*a;return[Nr(g*r+p*a,d*n+y*i),zi(y*n-d*i)]},s}function zae(e){e=cI(e[0]*Ge,e[1]*Ge,e.length>2?e[2]*Ge:0);function t(n){return n=e(n[0]*Ge,n[1]*Ge),n[0]*=Vt,n[1]*=Vt,n}return t.invert=function(n){return n=e.invert(n[0]*Ge,n[1]*Ge),n[0]*=Vt,n[1]*=Vt,n},t}function Fae(e,t,n,i,r,a){if(n){var s=De(t),o=Oe(t),l=i*n;r==null?(r=t+i*yi,a=t-l/2):(r=H6(s,r),a=H6(s,a),(i>0?r<a:r>a)&&(r+=i*yi));for(var f,d=r;i>0?d>a:d<a;d-=l)f=Fy([s,-o*De(d),-o*Oe(d)]),e.point(f[0],f[1])}}function H6(e,t){t=Ll(t),t[0]-=e,Ly(t);var n=JB(-t[1]);return((-t[2]<0?-n:n)+yi-Re)%yi}function fI(){var e=[],t;return{point:function(n,i,r){t.push([n,i,r])},lineStart:function(){e.push(t=[])},lineEnd:Fn,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function U1(e,t){return Ke(e[0]-t[0])<Re&&Ke(e[1]-t[1])<Re}function t1(e,t,n,i){this.x=e,this.z=t,this.o=n,this.e=i,this.v=!1,this.n=this.p=null}function dI(e,t,n,i,r){var a=[],s=[],o,l;if(e.forEach(function(v){if(!((b=v.length-1)<=0)){var b,E=v[0],_=v[b],w;if(U1(E,_)){if(!E[2]&&!_[2]){for(r.lineStart(),o=0;o<b;++o)r.point((E=v[o])[0],E[1]);r.lineEnd();return}_[0]+=2*Re}a.push(w=new t1(E,v,null,!0)),s.push(w.o=new t1(E,null,w,!1)),a.push(w=new t1(_,v,null,!1)),s.push(w.o=new t1(_,null,w,!0))}}),!!a.length){for(s.sort(t),G6(a),G6(s),o=0,l=s.length;o<l;++o)s[o].e=n=!n;for(var f=a[0],d,g;;){for(var p=f,y=!0;p.v;)if((p=p.n)===f)return;d=p.z,r.lineStart();do{if(p.v=p.o.v=!0,p.e){if(y)for(o=0,l=d.length;o<l;++o)r.point((g=d[o])[0],g[1]);else i(p.x,p.n.x,1,r);p=p.n}else{if(y)for(d=p.p.z,o=d.length-1;o>=0;--o)r.point((g=d[o])[0],g[1]);else i(p.x,p.p.x,-1,r);p=p.p}p=p.o,d=p.z,y=!y}while(!p.v);r.lineEnd()}}}function G6(e){if(t=e.length){for(var t,n=0,i=e[0],r;++n<t;)i.n=r=e[n],r.p=i,i=r;i.n=r=e[0],r.p=i}}function OS(e){return Ke(e[0])<=Xe?e[0]:Ar(e[0])*((Ke(e[0])+Xe)%yi-Xe)}function Lae(e,t){var n=OS(t),i=t[1],r=Oe(i),a=[Oe(n),-De(n),0],s=0,o=0,l=new pi;r===1?i=qt+Re:r===-1&&(i=-qt-Re);for(var f=0,d=e.length;f<d;++f)if(p=(g=e[f]).length)for(var g,p,y=g[p-1],v=OS(y),b=y[1]/2+Oy,E=Oe(b),_=De(b),w=0;w<p;++w,v=$,E=k,_=M,y=A){var A=g[w],$=OS(A),C=A[1]/2+Oy,k=Oe(C),M=De(C),R=$-v,z=R>=0?1:-1,B=z*R,U=B>Xe,V=E*k;if(l.add(Nr(V*z*Oe(B),_*M+V*De(B))),s+=U?R+z*yi:R,U^v>=n^$>=n){var G=Kf(Ll(y),Ll(A));Ly(G);var q=Kf(a,G);Ly(q);var F=(U^R>=0?-1:1)*zi(q[2]);(i>F||i===F&&(G[0]||G[1]))&&(o+=U^R>=0?1:-1)}}return(s<-1e-6||s<Re&&l<-1e-12)^o&1}function hI(e,t,n,i){return function(r){var a=t(r),s=fI(),o=t(s),l=!1,f,d,g,p={point:y,lineStart:b,lineEnd:E,polygonStart:function(){p.point=_,p.lineStart=w,p.lineEnd=A,d=[],f=[]},polygonEnd:function(){p.point=y,p.lineStart=b,p.lineEnd=E,d=r9(d);var $=Lae(f,i);d.length?(l||(r.polygonStart(),l=!0),dI(d,Bae,$,n,r)):$&&(l||(r.polygonStart(),l=!0),r.lineStart(),n(null,null,1,r),r.lineEnd()),l&&(r.polygonEnd(),l=!1),d=f=null},sphere:function(){r.polygonStart(),r.lineStart(),n(null,null,1,r),r.lineEnd(),r.polygonEnd()}};function y($,C){e($,C)&&r.point($,C)}function v($,C){a.point($,C)}function b(){p.point=v,a.lineStart()}function E(){p.point=y,a.lineEnd()}function _($,C){g.push([$,C]),o.point($,C)}function w(){o.lineStart(),g=[]}function A(){_(g[0][0],g[0][1]),o.lineEnd();var $=o.clean(),C=s.result(),k,M=C.length,R,z,B;if(g.pop(),f.push(g),g=null,!!M){if($&1){if(z=C[0],(R=z.length-1)>0){for(l||(r.polygonStart(),l=!0),r.lineStart(),k=0;k<R;++k)r.point((B=z[k])[0],B[1]);r.lineEnd()}return}M>1&&$&2&&C.push(C.pop().concat(C.shift())),d.push(C.filter(Uae))}}return p}}function Uae(e){return e.length>1}function Bae(e,t){return((e=e.x)[0]<0?e[1]-qt-Re:qt-e[1])-((t=t.x)[0]<0?t[1]-qt-Re:qt-t[1])}const Y6=hI(function(){return!0},Iae,qae,[-Xe,-qt]);function Iae(e){var t=NaN,n=NaN,i=NaN,r;return{lineStart:function(){e.lineStart(),r=1},point:function(a,s){var o=a>0?Xe:-Xe,l=Ke(a-t);Ke(l-Xe)<Re?(e.point(t,n=(n+s)/2>0?qt:-qt),e.point(i,n),e.lineEnd(),e.lineStart(),e.point(o,n),e.point(a,n),r=0):i!==o&&l>=Xe&&(Ke(t-i)<Re&&(t-=i*Re),Ke(a-o)<Re&&(a-=o*Re),n=Pae(t,n,a,s),e.point(i,n),e.lineEnd(),e.lineStart(),e.point(o,n),r=0),e.point(t=a,n=s),i=o},lineEnd:function(){e.lineEnd(),t=n=NaN},clean:function(){return 2-r}}}function Pae(e,t,n,i){var r,a,s=Oe(e-n);return Ke(s)>Re?Dd((Oe(t)*(a=De(i))*Oe(n)-Oe(i)*(r=De(t))*Oe(e))/(r*a*s)):(t+i)/2}function qae(e,t,n,i){var r;if(e==null)r=n*qt,i.point(-Xe,r),i.point(0,r),i.point(Xe,r),i.point(Xe,0),i.point(Xe,-r),i.point(0,-r),i.point(-Xe,-r),i.point(-Xe,0),i.point(-Xe,r);else if(Ke(e[0]-t[0])>Re){var a=e[0]<t[0]?Xe:-Xe;r=n*a/2,i.point(-a,r),i.point(0,r),i.point(a,r)}else i.point(t[0],t[1])}function jae(e){var t=De(e),n=2*Ge,i=t>0,r=Ke(t)>Re;function a(d,g,p,y){Fae(y,e,n,p,d,g)}function s(d,g){return De(d)*De(g)>t}function o(d){var g,p,y,v,b;return{lineStart:function(){v=y=!1,b=1},point:function(E,_){var w=[E,_],A,$=s(E,_),C=i?$?0:f(E,_):$?f(E+(E<0?Xe:-Xe),_):0;if(!g&&(v=y=$)&&d.lineStart(),$!==y&&(A=l(g,w),(!A||U1(g,A)||U1(w,A))&&(w[2]=1)),$!==y)b=0,$?(d.lineStart(),A=l(w,g),d.point(A[0],A[1])):(A=l(g,w),d.point(A[0],A[1],2),d.lineEnd()),g=A;else if(r&&g&&i^$){var k;!(C&p)&&(k=l(w,g,!0))&&(b=0,i?(d.lineStart(),d.point(k[0][0],k[0][1]),d.point(k[1][0],k[1][1]),d.lineEnd()):(d.point(k[1][0],k[1][1]),d.lineEnd(),d.lineStart(),d.point(k[0][0],k[0][1],3)))}$&&(!g||!U1(g,w))&&d.point(w[0],w[1]),g=w,y=$,p=C},lineEnd:function(){y&&d.lineEnd(),g=null},clean:function(){return b|(v&&y)<<1}}}function l(d,g,p){var y=Ll(d),v=Ll(g),b=[1,0,0],E=Kf(y,v),_=Jm(E,E),w=E[0],A=_-w*w;if(!A)return!p&&d;var $=t*_/A,C=-t*w/A,k=Kf(b,E),M=e1(b,$),R=e1(E,C);kS(M,R);var z=k,B=Jm(M,z),U=Jm(z,z),V=B*B-U*(Jm(M,M)-1);if(!(V<0)){var G=vi(V),q=e1(z,(-B-G)/U);if(kS(q,M),q=Fy(q),!p)return q;var F=d[0],D=g[0],I=d[1],Y=g[1],K;D<F&&(K=F,F=D,D=K);var N=D-F,W=Ke(N-Xe)<Re,ne=W||N<Re;if(!W&&Y<I&&(K=I,I=Y,Y=K),ne?W?I+Y>0^q[1]<(Ke(q[0]-F)<Re?I:Y):I<=q[1]&&q[1]<=Y:N>Xe^(F<=q[0]&&q[0]<=D)){var se=e1(z,(-B+G)/U);return kS(se,M),[q,Fy(se)]}}}function f(d,g){var p=i?e:Xe-e,y=0;return d<-p?y|=1:d>p&&(y|=2),g<-p?y|=4:g>p&&(y|=8),y}return hI(s,o,a,i?[0,-e]:[-Xe,e-Xe])}function Hae(e,t,n,i,r,a){var s=e[0],o=e[1],l=t[0],f=t[1],d=0,g=1,p=l-s,y=f-o,v;if(v=n-s,!(!p&&v>0)){if(v/=p,p<0){if(v<d)return;v<g&&(g=v)}else if(p>0){if(v>g)return;v>d&&(d=v)}if(v=r-s,!(!p&&v<0)){if(v/=p,p<0){if(v>g)return;v>d&&(d=v)}else if(p>0){if(v<d)return;v<g&&(g=v)}if(v=i-o,!(!y&&v>0)){if(v/=y,y<0){if(v<d)return;v<g&&(g=v)}else if(y>0){if(v>g)return;v>d&&(d=v)}if(v=a-o,!(!y&&v<0)){if(v/=y,y<0){if(v>g)return;v>d&&(d=v)}else if(y>0){if(v<d)return;v<g&&(g=v)}return d>0&&(e[0]=s+d*p,e[1]=o+d*y),g<1&&(t[0]=s+g*p,t[1]=o+g*y),!0}}}}}var n1=1e9,i1=-1e9;function gI(e,t,n,i){function r(f,d){return e<=f&&f<=n&&t<=d&&d<=i}function a(f,d,g,p){var y=0,v=0;if(f==null||(y=s(f,g))!==(v=s(d,g))||l(f,d)<0^g>0)do p.point(y===0||y===3?e:n,y>1?i:t);while((y=(y+g+4)%4)!==v);else p.point(d[0],d[1])}function s(f,d){return Ke(f[0]-e)<Re?d>0?0:3:Ke(f[0]-n)<Re?d>0?2:1:Ke(f[1]-t)<Re?d>0?1:0:d>0?3:2}function o(f,d){return l(f.x,d.x)}function l(f,d){var g=s(f,1),p=s(d,1);return g!==p?g-p:g===0?d[1]-f[1]:g===1?f[0]-d[0]:g===2?f[1]-d[1]:d[0]-f[0]}return function(f){var d=f,g=fI(),p,y,v,b,E,_,w,A,$,C,k,M={point:R,lineStart:V,lineEnd:G,polygonStart:B,polygonEnd:U};function R(F,D){r(F,D)&&d.point(F,D)}function z(){for(var F=0,D=0,I=y.length;D<I;++D)for(var Y=y[D],K=1,N=Y.length,W=Y[0],ne,se,ye=W[0],Se=W[1];K<N;++K)ne=ye,se=Se,W=Y[K],ye=W[0],Se=W[1],se<=i?Se>i&&(ye-ne)*(i-se)>(Se-se)*(e-ne)&&++F:Se<=i&&(ye-ne)*(i-se)<(Se-se)*(e-ne)&&--F;return F}function B(){d=g,p=[],y=[],k=!0}function U(){var F=z(),D=k&&F,I=(p=r9(p)).length;(D||I)&&(f.polygonStart(),D&&(f.lineStart(),a(null,null,1,f),f.lineEnd()),I&&dI(p,o,F,a,f),f.polygonEnd()),d=f,p=y=v=null}function V(){M.point=q,y&&y.push(v=[]),C=!0,$=!1,w=A=NaN}function G(){p&&(q(b,E),_&&$&&g.rejoin(),p.push(g.result())),M.point=R,$&&d.lineEnd()}function q(F,D){var I=r(F,D);if(y&&v.push([F,D]),C)b=F,E=D,_=I,C=!1,I&&(d.lineStart(),d.point(F,D));else if(I&&$)d.point(F,D);else{var Y=[w=Math.max(i1,Math.min(n1,w)),A=Math.max(i1,Math.min(n1,A))],K=[F=Math.max(i1,Math.min(n1,F)),D=Math.max(i1,Math.min(n1,D))];Hae(Y,K,e,t,n,i)?($||(d.lineStart(),d.point(Y[0],Y[1])),d.point(K[0],K[1]),I||d.lineEnd(),k=!1):I&&(d.lineStart(),d.point(F,D),k=!1)}w=F,A=D,$=I}return M}}function X6(e,t,n){var i=er(e,t-Re,n).concat(t);return function(r){return i.map(function(a){return[r,a]})}}function V6(e,t,n){var i=er(e,t-Re,n).concat(t);return function(r){return i.map(function(a){return[a,r]})}}function Gae(){var e,t,n,i,r,a,s,o,l=10,f=l,d=90,g=360,p,y,v,b,E=2.5;function _(){return{type:"MultiLineString",coordinates:w()}}function w(){return er(Km(i/d)*d,n,d).map(v).concat(er(Km(o/g)*g,s,g).map(b)).concat(er(Km(t/l)*l,e,l).filter(function(A){return Ke(A%d)>Re}).map(p)).concat(er(Km(a/f)*f,r,f).filter(function(A){return Ke(A%g)>Re}).map(y))}return _.lines=function(){return w().map(function(A){return{type:"LineString",coordinates:A}})},_.outline=function(){return{type:"Polygon",coordinates:[v(i).concat(b(s).slice(1),v(n).reverse().slice(1),b(o).reverse().slice(1))]}},_.extent=function(A){return arguments.length?_.extentMajor(A).extentMinor(A):_.extentMinor()},_.extentMajor=function(A){return arguments.length?(i=+A[0][0],n=+A[1][0],o=+A[0][1],s=+A[1][1],i>n&&(A=i,i=n,n=A),o>s&&(A=o,o=s,s=A),_.precision(E)):[[i,o],[n,s]]},_.extentMinor=function(A){return arguments.length?(t=+A[0][0],e=+A[1][0],a=+A[0][1],r=+A[1][1],t>e&&(A=t,t=e,e=A),a>r&&(A=a,a=r,r=A),_.precision(E)):[[t,a],[e,r]]},_.step=function(A){return arguments.length?_.stepMajor(A).stepMinor(A):_.stepMinor()},_.stepMajor=function(A){return arguments.length?(d=+A[0],g=+A[1],_):[d,g]},_.stepMinor=function(A){return arguments.length?(l=+A[0],f=+A[1],_):[l,f]},_.precision=function(A){return arguments.length?(E=+A,p=X6(a,r,90),y=V6(t,e,E),v=X6(o,s,90),b=V6(i,n,E),_):E},_.extentMajor([[-180,-90+Re],[180,90-Re]]).extentMinor([[-180,-80-Re],[180,80+Re]])}const fp=e=>e;var DS=new pi,Gw=new pi,pI,mI,Yw,Xw,Rs={point:Fn,lineStart:Fn,lineEnd:Fn,polygonStart:function(){Rs.lineStart=Yae,Rs.lineEnd=Vae},polygonEnd:function(){Rs.lineStart=Rs.lineEnd=Rs.point=Fn,DS.add(Ke(Gw)),Gw=new pi},result:function(){var e=DS/2;return DS=new pi,e}};function Yae(){Rs.point=Xae}function Xae(e,t){Rs.point=yI,pI=Yw=e,mI=Xw=t}function yI(e,t){Gw.add(Xw*e-Yw*t),Yw=e,Xw=t}function Vae(){yI(pI,mI)}var Jf=1/0,Gy=Jf,dp=-Jf,Yy=dp,Xy={point:Wae,lineStart:Fn,lineEnd:Fn,polygonStart:Fn,polygonEnd:Fn,result:function(){var e=[[Jf,Gy],[dp,Yy]];return dp=Yy=-(Gy=Jf=1/0),e}};function Wae(e,t){e<Jf&&(Jf=e),e>dp&&(dp=e),t<Gy&&(Gy=t),t>Yy&&(Yy=t)}var Vw=0,Ww=0,$g=0,Vy=0,Wy=0,Sf=0,Qw=0,Zw=0,Cg=0,vI,bI,Da,Ra,_r={point:Ul,lineStart:W6,lineEnd:Q6,polygonStart:function(){_r.lineStart=Kae,_r.lineEnd=Jae},polygonEnd:function(){_r.point=Ul,_r.lineStart=W6,_r.lineEnd=Q6},result:function(){var e=Cg?[Qw/Cg,Zw/Cg]:Sf?[Vy/Sf,Wy/Sf]:$g?[Vw/$g,Ww/$g]:[NaN,NaN];return Vw=Ww=$g=Vy=Wy=Sf=Qw=Zw=Cg=0,e}};function Ul(e,t){Vw+=e,Ww+=t,++$g}function W6(){_r.point=Qae}function Qae(e,t){_r.point=Zae,Ul(Da=e,Ra=t)}function Zae(e,t){var n=e-Da,i=t-Ra,r=vi(n*n+i*i);Vy+=r*(Da+e)/2,Wy+=r*(Ra+t)/2,Sf+=r,Ul(Da=e,Ra=t)}function Q6(){_r.point=Ul}function Kae(){_r.point=ese}function Jae(){xI(vI,bI)}function ese(e,t){_r.point=xI,Ul(vI=Da=e,bI=Ra=t)}function xI(e,t){var n=e-Da,i=t-Ra,r=vi(n*n+i*i);Vy+=r*(Da+e)/2,Wy+=r*(Ra+t)/2,Sf+=r,r=Ra*e-Da*t,Qw+=r*(Da+e),Zw+=r*(Ra+t),Cg+=r*3,Ul(Da=e,Ra=t)}function EI(e){this._context=e}EI.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._context.moveTo(e,t),this._point=1;break}case 1:{this._context.lineTo(e,t);break}default:{this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,yi);break}}},result:Fn};var Kw=new pi,RS,SI,_I,Tg,Mg,hp={point:Fn,lineStart:function(){hp.point=tse},lineEnd:function(){RS&&wI(SI,_I),hp.point=Fn},polygonStart:function(){RS=!0},polygonEnd:function(){RS=null},result:function(){var e=+Kw;return Kw=new pi,e}};function tse(e,t){hp.point=wI,SI=Tg=e,_I=Mg=t}function wI(e,t){Tg-=e,Mg-=t,Kw.add(vi(Tg*Tg+Mg*Mg)),Tg=e,Mg=t}let Z6,Qy,K6,J6;class e4{constructor(t){this._append=t==null?AI:nse(t),this._radius=4.5,this._=""}pointRadius(t){return this._radius=+t,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(t,n){switch(this._point){case 0:{this._append`M${t},${n}`,this._point=1;break}case 1:{this._append`L${t},${n}`;break}default:{if(this._append`M${t},${n}`,this._radius!==K6||this._append!==Qy){const i=this._radius,r=this._;this._="",this._append`m0,${i}a${i},${i} 0 1,1 0,${-2*i}a${i},${i} 0 1,1 0,${2*i}z`,K6=i,Qy=this._append,J6=this._,this._=r}this._+=J6;break}}}result(){const t=this._;return this._="",t.length?t:null}}function AI(e){let t=1;this._+=e[0];for(const n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function nse(e){const t=Math.floor(e);if(!(t>=0))throw new RangeError(`invalid digits: ${e}`);if(t>15)return AI;if(t!==Z6){const n=10**t;Z6=t,Qy=function(r){let a=1;this._+=r[0];for(const s=r.length;a<s;++a)this._+=Math.round(arguments[a]*n)/n+r[a]}}return Qy}function $I(e,t){let n=3,i=4.5,r,a;function s(o){return o&&(typeof i=="function"&&a.pointRadius(+i.apply(this,arguments)),Ds(o,r(a))),a.result()}return s.area=function(o){return Ds(o,r(Rs)),Rs.result()},s.measure=function(o){return Ds(o,r(hp)),hp.result()},s.bounds=function(o){return Ds(o,r(Xy)),Xy.result()},s.centroid=function(o){return Ds(o,r(_r)),_r.result()},s.projection=function(o){return arguments.length?(r=o==null?(e=null,fp):(e=o).stream,s):e},s.context=function(o){return arguments.length?(a=o==null?(t=null,new e4(n)):new EI(t=o),typeof i!="function"&&a.pointRadius(i),s):t},s.pointRadius=function(o){return arguments.length?(i=typeof o=="function"?o:(a.pointRadius(+o),+o),s):i},s.digits=function(o){if(!arguments.length)return n;if(o==null)n=null;else{const l=Math.floor(o);if(!(l>=0))throw new RangeError(`invalid digits: ${o}`);n=l}return t===null&&(a=new e4(n)),s},s.projection(e).digits(n).context(t)}function _b(e){return function(t){var n=new Jw;for(var i in e)n[i]=e[i];return n.stream=t,n}}function Jw(){}Jw.prototype={constructor:Jw,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function q3(e,t,n){var i=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),i!=null&&e.clipExtent(null),Ds(n,e.stream(Xy)),t(Xy.result()),i!=null&&e.clipExtent(i),e}function wb(e,t,n){return q3(e,function(i){var r=t[1][0]-t[0][0],a=t[1][1]-t[0][1],s=Math.min(r/(i[1][0]-i[0][0]),a/(i[1][1]-i[0][1])),o=+t[0][0]+(r-s*(i[1][0]+i[0][0]))/2,l=+t[0][1]+(a-s*(i[1][1]+i[0][1]))/2;e.scale(150*s).translate([o,l])},n)}function j3(e,t,n){return wb(e,[[0,0],t],n)}function H3(e,t,n){return q3(e,function(i){var r=+t,a=r/(i[1][0]-i[0][0]),s=(r-a*(i[1][0]+i[0][0]))/2,o=-a*i[0][1];e.scale(150*a).translate([s,o])},n)}function G3(e,t,n){return q3(e,function(i){var r=+t,a=r/(i[1][1]-i[0][1]),s=-a*i[0][0],o=(r-a*(i[1][1]+i[0][1]))/2;e.scale(150*a).translate([s,o])},n)}var t4=16,ise=De(30*Ge);function n4(e,t){return+t?ase(e,t):rse(e)}function rse(e){return _b({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}function ase(e,t){function n(i,r,a,s,o,l,f,d,g,p,y,v,b,E){var _=f-i,w=d-r,A=_*_+w*w;if(A>4*t&&b--){var $=s+p,C=o+y,k=l+v,M=vi($*$+C*C+k*k),R=zi(k/=M),z=Ke(Ke(k)-1)<Re||Ke(a-g)<Re?(a+g)/2:Nr(C,$),B=e(z,R),U=B[0],V=B[1],G=U-i,q=V-r,F=w*G-_*q;(F*F/A>t||Ke((_*G+w*q)/A-.5)>.3||s*p+o*y+l*v<ise)&&(n(i,r,a,s,o,l,U,V,z,$/=M,C/=M,k,b,E),E.point(U,V),n(U,V,z,$,C,k,f,d,g,p,y,v,b,E))}}return function(i){var r,a,s,o,l,f,d,g,p,y,v,b,E={point:_,lineStart:w,lineEnd:$,polygonStart:function(){i.polygonStart(),E.lineStart=C},polygonEnd:function(){i.polygonEnd(),E.lineStart=w}};function _(R,z){R=e(R,z),i.point(R[0],R[1])}function w(){g=NaN,E.point=A,i.lineStart()}function A(R,z){var B=Ll([R,z]),U=e(R,z);n(g,p,d,y,v,b,g=U[0],p=U[1],d=R,y=B[0],v=B[1],b=B[2],t4,i),i.point(g,p)}function $(){E.point=_,i.lineEnd()}function C(){w(),E.point=k,E.lineEnd=M}function k(R,z){A(r=R,z),a=g,s=p,o=y,l=v,f=b,E.point=A}function M(){n(g,p,d,y,v,b,a,s,r,o,l,f,t4,i),E.lineEnd=$,$()}return E}}var sse=_b({point:function(e,t){this.stream.point(e*Ge,t*Ge)}});function ose(e){return _b({point:function(t,n){var i=e(t,n);return this.stream.point(i[0],i[1])}})}function use(e,t,n,i,r){function a(s,o){return s*=i,o*=r,[t+e*s,n-e*o]}return a.invert=function(s,o){return[(s-t)/e*i,(n-o)/e*r]},a}function i4(e,t,n,i,r,a){if(!a)return use(e,t,n,i,r);var s=De(a),o=Oe(a),l=s*e,f=o*e,d=s/e,g=o/e,p=(o*n-s*t)/e,y=(o*t+s*n)/e;function v(b,E){return b*=i,E*=r,[l*b-f*E+t,n-f*b-l*E]}return v.invert=function(b,E){return[i*(d*b-g*E+p),r*(y-g*b-d*E)]},v}function ts(e){return CI(function(){return e})()}function CI(e){var t,n=150,i=480,r=250,a=0,s=0,o=0,l=0,f=0,d,g=0,p=1,y=1,v=null,b=Y6,E=null,_,w,A,$=fp,C=.5,k,M,R,z,B;function U(F){return R(F[0]*Ge,F[1]*Ge)}function V(F){return F=R.invert(F[0],F[1]),F&&[F[0]*Vt,F[1]*Vt]}U.stream=function(F){return z&&B===F?z:z=sse(ose(d)(b(k($(B=F)))))},U.preclip=function(F){return arguments.length?(b=F,v=void 0,q()):b},U.postclip=function(F){return arguments.length?($=F,E=_=w=A=null,q()):$},U.clipAngle=function(F){return arguments.length?(b=+F?jae(v=F*Ge):(v=null,Y6),q()):v*Vt},U.clipExtent=function(F){return arguments.length?($=F==null?(E=_=w=A=null,fp):gI(E=+F[0][0],_=+F[0][1],w=+F[1][0],A=+F[1][1]),q()):E==null?null:[[E,_],[w,A]]},U.scale=function(F){return arguments.length?(n=+F,G()):n},U.translate=function(F){return arguments.length?(i=+F[0],r=+F[1],G()):[i,r]},U.center=function(F){return arguments.length?(a=F[0]%360*Ge,s=F[1]%360*Ge,G()):[a*Vt,s*Vt]},U.rotate=function(F){return arguments.length?(o=F[0]%360*Ge,l=F[1]%360*Ge,f=F.length>2?F[2]%360*Ge:0,G()):[o*Vt,l*Vt,f*Vt]},U.angle=function(F){return arguments.length?(g=F%360*Ge,G()):g*Vt},U.reflectX=function(F){return arguments.length?(p=F?-1:1,G()):p<0},U.reflectY=function(F){return arguments.length?(y=F?-1:1,G()):y<0},U.precision=function(F){return arguments.length?(k=n4(M,C=F*F),q()):vi(C)},U.fitExtent=function(F,D){return wb(U,F,D)},U.fitSize=function(F,D){return j3(U,F,D)},U.fitWidth=function(F,D){return H3(U,F,D)},U.fitHeight=function(F,D){return G3(U,F,D)};function G(){var F=i4(n,0,0,p,y,g).apply(null,t(a,s)),D=i4(n,i-F[0],r-F[1],p,y,g);return d=cI(o,l,f),M=jw(t,D),R=jw(d,M),k=n4(M,C),q()}function q(){return z=B=null,U}return function(){return t=e.apply(this,arguments),U.invert=t.invert&&V,G()}}function Y3(e){var t=0,n=Xe/3,i=CI(e),r=i(t,n);return r.parallels=function(a){return arguments.length?i(t=a[0]*Ge,n=a[1]*Ge):[t*Vt,n*Vt]},r}function lse(e){var t=De(e);function n(i,r){return[i*t,Oe(r)/t]}return n.invert=function(i,r){return[i/t,zi(r*t)]},n}function cse(e,t){var n=Oe(e),i=(n+Oe(t))/2;if(Ke(i)<Re)return lse(e);var r=1+n*(2*i-n),a=vi(r)/i;function s(o,l){var f=vi(r-2*i*Oe(l))/i;return[f*Oe(o*=i),a-f*De(o)]}return s.invert=function(o,l){var f=a-l,d=Nr(o,Ke(f))*Ar(f);return f*i<0&&(d-=Xe*Ar(o)*Ar(f)),[d/i,zi((r-(o*o+f*f)*i*i)/(2*i))]},s}function Zy(){return Y3(cse).scale(155.424).center([0,33.6442])}function TI(){return Zy().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function fse(e){var t=e.length;return{point:function(n,i){for(var r=-1;++r<t;)e[r].point(n,i)},sphere:function(){for(var n=-1;++n<t;)e[n].sphere()},lineStart:function(){for(var n=-1;++n<t;)e[n].lineStart()},lineEnd:function(){for(var n=-1;++n<t;)e[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<t;)e[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<t;)e[n].polygonEnd()}}}function dse(){var e,t,n=TI(),i,r=Zy().rotate([154,0]).center([-2,58.5]).parallels([55,65]),a,s=Zy().rotate([157,0]).center([-3,19.9]).parallels([8,18]),o,l,f={point:function(p,y){l=[p,y]}};function d(p){var y=p[0],v=p[1];return l=null,i.point(y,v),l||(a.point(y,v),l)||(o.point(y,v),l)}d.invert=function(p){var y=n.scale(),v=n.translate(),b=(p[0]-v[0])/y,E=(p[1]-v[1])/y;return(E>=.12&&E<.234&&b>=-.425&&b<-.214?r:E>=.166&&E<.234&&b>=-.214&&b<-.115?s:n).invert(p)},d.stream=function(p){return e&&t===p?e:e=fse([n.stream(t=p),r.stream(p),s.stream(p)])},d.precision=function(p){return arguments.length?(n.precision(p),r.precision(p),s.precision(p),g()):n.precision()},d.scale=function(p){return arguments.length?(n.scale(p),r.scale(p*.35),s.scale(p),d.translate(n.translate())):n.scale()},d.translate=function(p){if(!arguments.length)return n.translate();var y=n.scale(),v=+p[0],b=+p[1];return i=n.translate(p).clipExtent([[v-.455*y,b-.238*y],[v+.455*y,b+.238*y]]).stream(f),a=r.translate([v-.307*y,b+.201*y]).clipExtent([[v-.425*y+Re,b+.12*y+Re],[v-.214*y-Re,b+.234*y-Re]]).stream(f),o=s.translate([v-.205*y,b+.212*y]).clipExtent([[v-.214*y+Re,b+.166*y+Re],[v-.115*y-Re,b+.234*y-Re]]).stream(f),g()},d.fitExtent=function(p,y){return wb(d,p,y)},d.fitSize=function(p,y){return j3(d,p,y)},d.fitWidth=function(p,y){return H3(d,p,y)},d.fitHeight=function(p,y){return G3(d,p,y)};function g(){return e=t=null,d}return d.scale(1070)}function MI(e){return function(t,n){var i=De(t),r=De(n),a=e(i*r);return a===1/0?[2,0]:[a*r*Oe(t),a*Oe(n)]}}function Jp(e){return function(t,n){var i=vi(t*t+n*n),r=e(i),a=Oe(r),s=De(r);return[Nr(t*a,i*s),zi(i&&n*a/i)]}}var kI=MI(function(e){return vi(2/(1+e))});kI.invert=Jp(function(e){return 2*zi(e/2)});function hse(){return ts(kI).scale(124.75).clipAngle(180-.001)}var OI=MI(function(e){return(e=JB(e))&&e/Oe(e)});OI.invert=Jp(function(e){return e});function gse(){return ts(OI).scale(79.4188).clipAngle(180-.001)}function Ab(e,t){return[e,Dy(I3((qt+t)/2))]}Ab.invert=function(e,t){return[e,2*Dd(KB(t))-qt]};function pse(){return DI(Ab).scale(961/yi)}function DI(e){var t=ts(e),n=t.center,i=t.scale,r=t.translate,a=t.clipExtent,s=null,o,l,f;t.scale=function(g){return arguments.length?(i(g),d()):i()},t.translate=function(g){return arguments.length?(r(g),d()):r()},t.center=function(g){return arguments.length?(n(g),d()):n()},t.clipExtent=function(g){return arguments.length?(g==null?s=o=l=f=null:(s=+g[0][0],o=+g[0][1],l=+g[1][0],f=+g[1][1]),d()):s==null?null:[[s,o],[l,f]]};function d(){var g=Xe*i(),p=t(zae(t.rotate()).invert([0,0]));return a(s==null?[[p[0]-g,p[1]-g],[p[0]+g,p[1]+g]]:e===Ab?[[Math.max(p[0]-g,s),o],[Math.min(p[0]+g,l),f]]:[[s,Math.max(p[1]-g,o)],[l,Math.min(p[1]+g,f)]])}return d()}function r1(e){return I3((qt+e)/2)}function mse(e,t){var n=De(e),i=e===t?Oe(e):Dy(n/De(t))/Dy(r1(t)/r1(e)),r=n*MS(r1(e),i)/i;if(!i)return Ab;function a(s,o){r>0?o<-qt+Re&&(o=-qt+Re):o>qt-Re&&(o=qt-Re);var l=r/MS(r1(o),i);return[l*Oe(i*s),r-l*De(i*s)]}return a.invert=function(s,o){var l=r-o,f=Ar(i)*vi(s*s+l*l),d=Nr(s,Ke(l))*Ar(l);return l*i<0&&(d-=Xe*Ar(s)*Ar(l)),[d/i,2*Dd(MS(r/f,1/i))-qt]},a}function yse(){return Y3(mse).scale(109.5).parallels([30,30])}function Ky(e,t){return[e,t]}Ky.invert=Ky;function vse(){return ts(Ky).scale(152.63)}function bse(e,t){var n=De(e),i=e===t?Oe(e):(n-De(t))/(t-e),r=n/i+e;if(Ke(i)<Re)return Ky;function a(s,o){var l=r-o,f=i*s;return[l*Oe(f),r-l*De(f)]}return a.invert=function(s,o){var l=r-o,f=Nr(s,Ke(l))*Ar(l);return l*i<0&&(f-=Xe*Ar(s)*Ar(l)),[f/i,r-Ar(i)*vi(s*s+l*l)]},a}function xse(){return Y3(bse).scale(131.154).center([0,13.9389])}var jg=1.340264,Hg=-.081106,Gg=893e-6,Yg=.003796,Jy=vi(3)/2,Ese=12;function RI(e,t){var n=zi(Jy*Oe(t)),i=n*n,r=i*i*i;return[e*De(n)/(Jy*(jg+3*Hg*i+r*(7*Gg+9*Yg*i))),n*(jg+Hg*i+r*(Gg+Yg*i))]}RI.invert=function(e,t){for(var n=t,i=n*n,r=i*i*i,a=0,s,o,l;a<Ese&&(o=n*(jg+Hg*i+r*(Gg+Yg*i))-t,l=jg+3*Hg*i+r*(7*Gg+9*Yg*i),n-=s=o/l,i=n*n,r=i*i*i,!(Ke(s)<Rw));++a);return[Jy*e*(jg+3*Hg*i+r*(7*Gg+9*Yg*i))/De(n),zi(Oe(n)/Jy)]};function Sse(){return ts(RI).scale(177.158)}function NI(e,t){var n=De(t),i=De(e)*n;return[n*Oe(e)/i,Oe(t)/i]}NI.invert=Jp(Dd);function _se(){return ts(NI).scale(144.049).clipAngle(60)}function wse(){var e=1,t=0,n=0,i=1,r=1,a=0,s,o,l=null,f,d,g,p=1,y=1,v=_b({point:function($,C){var k=A([$,C]);this.stream.point(k[0],k[1])}}),b=fp,E,_;function w(){return p=e*i,y=e*r,E=_=null,A}function A($){var C=$[0]*p,k=$[1]*y;if(a){var M=k*s-C*o;C=C*s+k*o,k=M}return[C+t,k+n]}return A.invert=function($){var C=$[0]-t,k=$[1]-n;if(a){var M=k*s+C*o;C=C*s-k*o,k=M}return[C/p,k/y]},A.stream=function($){return E&&_===$?E:E=v(b(_=$))},A.postclip=function($){return arguments.length?(b=$,l=f=d=g=null,w()):b},A.clipExtent=function($){return arguments.length?(b=$==null?(l=f=d=g=null,fp):gI(l=+$[0][0],f=+$[0][1],d=+$[1][0],g=+$[1][1]),w()):l==null?null:[[l,f],[d,g]]},A.scale=function($){return arguments.length?(e=+$,w()):e},A.translate=function($){return arguments.length?(t=+$[0],n=+$[1],w()):[t,n]},A.angle=function($){return arguments.length?(a=$%360*Ge,o=Oe(a),s=De(a),w()):a*Vt},A.reflectX=function($){return arguments.length?(i=$?-1:1,w()):i<0},A.reflectY=function($){return arguments.length?(r=$?-1:1,w()):r<0},A.fitExtent=function($,C){return wb(A,$,C)},A.fitSize=function($,C){return j3(A,$,C)},A.fitWidth=function($,C){return H3(A,$,C)},A.fitHeight=function($,C){return G3(A,$,C)},A}function zI(e,t){var n=t*t,i=n*n;return[e*(.8707-.131979*n+i*(-.013791+i*(.003971*n-.001529*i))),t*(1.007226+n*(.015085+i*(-.044475+.028874*n-.005916*i)))]}zI.invert=function(e,t){var n=t,i=25,r;do{var a=n*n,s=a*a;n-=r=(n*(1.007226+a*(.015085+s*(-.044475+.028874*a-.005916*s)))-t)/(1.007226+a*(.015085*3+s*(-.044475*7+.028874*9*a-.005916*11*s)))}while(Ke(r)>Re&&--i>0);return[e/(.8707+(a=n*n)*(-.131979+a*(-.013791+a*a*a*(.003971-.001529*a)))),n]};function Ase(){return ts(zI).scale(175.295)}function FI(e,t){return[De(t)*Oe(e),Oe(t)]}FI.invert=Jp(zi);function $se(){return ts(FI).scale(249.5).clipAngle(90+Re)}function LI(e,t){var n=De(t),i=1+De(e)*n;return[n*Oe(e)/i,Oe(t)/i]}LI.invert=Jp(function(e){return 2*Dd(e)});function Cse(){return ts(LI).scale(250).clipAngle(142)}function UI(e,t){return[Dy(I3((qt+t)/2)),-e]}UI.invert=function(e,t){return[-t,2*Dd(KB(e))-qt]};function Tse(){var e=DI(UI),t=e.center,n=e.rotate;return e.center=function(i){return arguments.length?t([-i[1],i[0]]):(i=t(),[i[1],-i[0]])},e.rotate=function(i){return arguments.length?n([i[0],i[1],i.length>2?i[2]+90:90]):(i=n(),[i[0],i[1],i[2]-90])},n([0,0,90]).scale(159.155)}var Mse=Math.abs,eA=Math.cos,ev=Math.sin,kse=1e-6,BI=Math.PI,tA=BI/2,r4=Ose(2);function a4(e){return e>1?tA:e<-1?-tA:Math.asin(e)}function Ose(e){return e>0?Math.sqrt(e):0}function Dse(e,t){var n=e*ev(t),i=30,r;do t-=r=(t+ev(t)-n)/(1+eA(t));while(Mse(r)>kse&&--i>0);return t/2}function Rse(e,t,n){function i(r,a){return[e*r*eA(a=Dse(n,a)),t*ev(a)]}return i.invert=function(r,a){return a=a4(a/t),[r/(e*eA(a)),a4((2*a+ev(2*a))/n)]},i}var Nse=Rse(r4/tA,r4,BI);function zse(){return ts(Nse).scale(169.529)}const Fse=$I(),nA=["clipAngle","clipExtent","scale","translate","center","rotate","parallels","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];function Lse(e,t){return function n(){const i=t();return i.type=e,i.path=$I().projection(i),i.copy=i.copy||function(){const r=n();return nA.forEach(a=>{i[a]&&r[a](i[a]())}),r.path.pointRadius(i.path.pointRadius()),r},tU(i)}}function X3(e,t){if(!e||typeof e!="string")throw new Error("Projection type must be a name string.");return e=e.toLowerCase(),arguments.length>1?(tv[e]=Lse(e,t),this):tv[e]||null}function II(e){return e&&e.path||Fse}const tv={albers:TI,albersusa:dse,azimuthalequalarea:hse,azimuthalequidistant:gse,conicconformal:yse,conicequalarea:Zy,conicequidistant:xse,equalEarth:Sse,equirectangular:vse,gnomonic:_se,identity:wse,mercator:pse,mollweide:zse,naturalEarth1:Ase,orthographic:$se,stereographic:Cse,transversemercator:Tse};for(const e in tv)X3(e,tv[e]);function Use(){}const $s=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function PI(){var e=1,t=1,n=o;function i(l,f){return f.map(d=>r(l,d))}function r(l,f){var d=[],g=[];return a(l,f,p=>{n(p,l,f),Bse(p)>0?d.push([p]):g.push(p)}),g.forEach(p=>{for(var y=0,v=d.length,b;y<v;++y)if(Ise((b=d[y])[0],p)!==-1){b.push(p);return}}),{type:"MultiPolygon",value:f,coordinates:d}}function a(l,f,d){var g=[],p=[],y,v,b,E,_,w;for(y=v=-1,E=l[0]>=f,$s[E<<1].forEach(A);++y<e-1;)b=E,E=l[y+1]>=f,$s[b|E<<1].forEach(A);for($s[E<<0].forEach(A);++v<t-1;){for(y=-1,E=l[v*e+e]>=f,_=l[v*e]>=f,$s[E<<1|_<<2].forEach(A);++y<e-1;)b=E,E=l[v*e+e+y+1]>=f,w=_,_=l[v*e+y+1]>=f,$s[b|E<<1|_<<2|w<<3].forEach(A);$s[E|_<<3].forEach(A)}for(y=-1,_=l[v*e]>=f,$s[_<<2].forEach(A);++y<e-1;)w=_,_=l[v*e+y+1]>=f,$s[_<<2|w<<3].forEach(A);$s[_<<3].forEach(A);function A($){var C=[$[0][0]+y,$[0][1]+v],k=[$[1][0]+y,$[1][1]+v],M=s(C),R=s(k),z,B;(z=p[M])?(B=g[R])?(delete p[z.end],delete g[B.start],z===B?(z.ring.push(k),d(z.ring)):g[z.start]=p[B.end]={start:z.start,end:B.end,ring:z.ring.concat(B.ring)}):(delete p[z.end],z.ring.push(k),p[z.end=R]=z):(z=g[R])?(B=p[M])?(delete g[z.start],delete p[B.end],z===B?(z.ring.push(k),d(z.ring)):g[B.start]=p[z.end]={start:B.start,end:z.end,ring:B.ring.concat(z.ring)}):(delete g[z.start],z.ring.unshift(C),g[z.start=M]=z):g[M]=p[R]={start:M,end:R,ring:[C,k]}}}function s(l){return l[0]*2+l[1]*(e+1)*4}function o(l,f,d){l.forEach(g=>{var p=g[0],y=g[1],v=p|0,b=y|0,E,_=f[b*e+v];p>0&&p<e&&v===p&&(E=f[b*e+v-1],g[0]=p+(d-E)/(_-E)-.5),y>0&&y<t&&b===y&&(E=f[(b-1)*e+v],g[1]=y+(d-E)/(_-E)-.5)})}return i.contour=r,i.size=function(l){if(!arguments.length)return[e,t];var f=Math.floor(l[0]),d=Math.floor(l[1]);return f>=0&&d>=0||te("invalid size"),e=f,t=d,i},i.smooth=function(l){return arguments.length?(n=l?o:Use,i):n===o},i}function Bse(e){for(var t=0,n=e.length,i=e[n-1][1]*e[0][0]-e[n-1][0]*e[0][1];++t<n;)i+=e[t-1][1]*e[t][0]-e[t-1][0]*e[t][1];return i}function Ise(e,t){for(var n=-1,i=t.length,r;++n<i;)if(r=Pse(e,t[n]))return r;return 0}function Pse(e,t){for(var n=t[0],i=t[1],r=-1,a=0,s=e.length,o=s-1;a<s;o=a++){var l=e[a],f=l[0],d=l[1],g=e[o],p=g[0],y=g[1];if(qse(l,g,t))return 0;d>i!=y>i&&n<(p-f)*(i-d)/(y-d)+f&&(r=-r)}return r}function qse(e,t,n){var i;return jse(e,t,n)&&Hse(e[i=+(e[0]===t[0])],n[i],t[i])}function jse(e,t,n){return(t[0]-e[0])*(n[1]-e[1])===(n[0]-e[0])*(t[1]-e[1])}function Hse(e,t,n){return e<=t&&t<=n||n<=t&&t<=e}function qI(e,t,n){return function(i){var r=qa(i),a=n?Math.min(r[0],0):r[0],s=r[1],o=s-a,l=t?su(a,s,e):o/(e+1);return er(a+l,s,l)}}function V3(e){J.call(this,null,e)}V3.Definition={type:"Isocontour",metadata:{generates:!0},params:[{name:"field",type:"field"},{name:"thresholds",type:"number",array:!0},{name:"levels",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"zero",type:"boolean",default:!0},{name:"smooth",type:"boolean",default:!0},{name:"scale",type:"number",expr:!0},{name:"translate",type:"number",array:!0,expr:!0},{name:"as",type:"string",null:!0,default:"contour"}]};pe(V3,J,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=t.materialize(t.SOURCE).source,r=e.field||ni,a=PI().smooth(e.smooth!==!1),s=e.thresholds||Gse(i,r,e),o=e.as===null?null:e.as||"contour",l=[];return i.forEach(f=>{const d=r(f),g=a.size([d.width,d.height])(d.values,re(s)?s:s(d.values));Yse(g,d,f,e),g.forEach(p=>{l.push(qv(f,ct(o!=null?{[o]:p}:p)))})}),this.value&&(n.rem=this.value),this.value=n.source=n.add=l,n}});function Gse(e,t,n){const i=qI(n.levels||10,n.nice,n.zero!==!1);return n.resolve!=="shared"?i:i(e.map(r=>Sl(t(r).values)))}function Yse(e,t,n,i){let r=i.scale||t.scale,a=i.translate||t.translate;if(qe(r)&&(r=r(n,i)),qe(a)&&(a=a(n,i)),(r===1||r==null)&&!a)return;const s=(st(r)?r:r[0])||1,o=(st(r)?r:r[1])||1,l=a&&a[0]||0,f=a&&a[1]||0;e.forEach(jI(t,s,o,l,f))}function jI(e,t,n,i,r){const a=e.x1||0,s=e.y1||0,o=t*n<0;function l(g){g.forEach(f)}function f(g){o&&g.reverse(),g.forEach(d)}function d(g){g[0]=(g[0]-a)*t+i,g[1]=(g[1]-s)*n+r}return function(g){return g.coordinates.forEach(l),g}}function s4(e,t,n){const i=e>=0?e:I$(t,n);return Math.round((Math.sqrt(4*i*i+1)-1)/2)}function NS(e){return qe(e)?e:ii(+e)}function HI(){var e=l=>l[0],t=l=>l[1],n=vd,i=[-1,-1],r=960,a=500,s=2;function o(l,f){const d=s4(i[0],l,e)>>s,g=s4(i[1],l,t)>>s,p=d?d+2:0,y=g?g+2:0,v=2*p+(r>>s),b=2*y+(a>>s),E=new Float32Array(v*b),_=new Float32Array(v*b);let w=E;l.forEach($=>{const C=p+(+e($)>>s),k=y+(+t($)>>s);C>=0&&C<v&&k>=0&&k<b&&(E[C+k*v]+=+n($))}),d>0&&g>0?(uf(v,b,E,_,d),lf(v,b,_,E,g),uf(v,b,E,_,d),lf(v,b,_,E,g),uf(v,b,E,_,d),lf(v,b,_,E,g)):d>0?(uf(v,b,E,_,d),uf(v,b,_,E,d),uf(v,b,E,_,d),w=_):g>0&&(lf(v,b,E,_,g),lf(v,b,_,E,g),lf(v,b,E,_,g),w=_);const A=f?Math.pow(2,-2*s):1/a9(w);for(let $=0,C=v*b;$<C;++$)w[$]*=A;return{values:w,scale:1<<s,width:v,height:b,x1:p,y1:y,x2:p+(r>>s),y2:y+(a>>s)}}return o.x=function(l){return arguments.length?(e=NS(l),o):e},o.y=function(l){return arguments.length?(t=NS(l),o):t},o.weight=function(l){return arguments.length?(n=NS(l),o):n},o.size=function(l){if(!arguments.length)return[r,a];var f=+l[0],d=+l[1];return f>=0&&d>=0||te("invalid size"),r=f,a=d,o},o.cellSize=function(l){return arguments.length?((l=+l)>=1||te("invalid cell size"),s=Math.floor(Math.log(l)/Math.LN2),o):1<<s},o.bandwidth=function(l){return arguments.length?(l=Ee(l),l.length===1&&(l=[+l[0],+l[0]]),l.length!==2&&te("invalid bandwidth"),i=l,o):i},o}function uf(e,t,n,i,r){const a=(r<<1)+1;for(let s=0;s<t;++s)for(let o=0,l=0;o<e+r;++o)o<e&&(l+=n[o+s*e]),o>=r&&(o>=a&&(l-=n[o-a+s*e]),i[o-r+s*e]=l/Math.min(o+1,e-1+a-o,a))}function lf(e,t,n,i,r){const a=(r<<1)+1;for(let s=0;s<e;++s)for(let o=0,l=0;o<t+r;++o)o<t&&(l+=n[s+o*e]),o>=r&&(o>=a&&(l-=n[s+(o-a)*e]),i[s+(o-r)*e]=l/Math.min(o+1,t-1+a-o,a))}function W3(e){J.call(this,null,e)}W3.Definition={type:"KDE2D",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"weight",type:"field"},{name:"groupby",type:"field",array:!0},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number",array:!0,length:2},{name:"counts",type:"boolean",default:!1},{name:"as",type:"string",default:"grid"}]};const Xse=["x","y","weight","size","cellSize","bandwidth"];function GI(e,t){return Xse.forEach(n=>t[n]!=null?e[n](t[n]):0),e}pe(W3,J,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=t.materialize(t.SOURCE).source,r=Vse(i,e.groupby),a=(e.groupby||[]).map(jt),s=GI(HI(),e),o=e.as||"grid",l=[];function f(d,g){for(let p=0;p<a.length;++p)d[a[p]]=g[p];return d}return l=r.map(d=>ct(f({[o]:s(d,e.counts)},d.dims))),this.value&&(n.rem=this.value),this.value=n.source=n.add=l,n}});function Vse(e,t){var n=[],i=d=>d(o),r,a,s,o,l,f;if(t==null)n.push(e);else for(r={},a=0,s=e.length;a<s;++a)o=e[a],l=t.map(i),f=r[l],f||(r[l]=f=[],f.dims=l,n.push(f)),f.push(o);return n}function Q3(e){J.call(this,null,e)}Q3.Definition={type:"Contour",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"values",type:"number",array:!0},{name:"x",type:"field"},{name:"y",type:"field"},{name:"weight",type:"field"},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number"},{name:"count",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"thresholds",type:"number",array:!0},{name:"smooth",type:"boolean",default:!0}]};pe(Q3,J,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=PI().smooth(e.smooth!==!1),r=e.values,a=e.thresholds||qI(e.count||10,e.nice,!!r),s=e.size,o,l;return r||(r=t.materialize(t.SOURCE).source,o=GI(HI(),e)(r,!0),l=jI(o,o.scale||1,o.scale||1,0,0),s=[o.width,o.height],r=o.values),a=re(a)?a:a(r),r=i.size(s)(r,a),l&&r.forEach(l),this.value&&(n.rem=this.value),this.value=n.source=n.add=(r||[]).map(ct),n}});const iA="Feature",Z3="FeatureCollection",Wse="MultiPoint";function K3(e){J.call(this,null,e)}K3.Definition={type:"GeoJSON",metadata:{},params:[{name:"fields",type:"field",array:!0,length:2},{name:"geojson",type:"field"}]};pe(K3,J,{transform(e,t){var n=this._features,i=this._points,r=e.fields,a=r&&r[0],s=r&&r[1],o=e.geojson||!r&&ni,l=t.ADD,f;f=e.modified()||t.changed(t.REM)||t.modified(Kn(o))||a&&t.modified(Kn(a))||s&&t.modified(Kn(s)),(!this.value||f)&&(l=t.SOURCE,this._features=n=[],this._points=i=[]),o&&t.visit(l,d=>n.push(o(d))),a&&s&&(t.visit(l,d=>{var g=a(d),p=s(d);g!=null&&p!=null&&(g=+g)===g&&(p=+p)===p&&i.push([g,p])}),n=n.concat({type:iA,geometry:{type:Wse,coordinates:i}})),this.value={type:Z3,features:n}}});function J3(e){J.call(this,null,e)}J3.Definition={type:"GeoPath",metadata:{modifies:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"path"}]};pe(J3,J,{transform(e,t){var n=t.fork(t.ALL),i=this.value,r=e.field||ni,a=e.as||"path",s=n.SOURCE;!i||e.modified()?(this.value=i=II(e.projection),n.materialize().reflow()):s=r===ni||t.modified(r.fields)?n.ADD_MOD:n.ADD;const o=Qse(i,e.pointRadius);return n.visit(s,l=>l[a]=i(r(l))),i.pointRadius(o),n.modifies(a)}});function Qse(e,t){const n=e.pointRadius();return e.context(null),t!=null&&e.pointRadius(t),n}function eT(e){J.call(this,null,e)}eT.Definition={type:"GeoPoint",metadata:{modifies:!0},params:[{name:"projection",type:"projection",required:!0},{name:"fields",type:"field",array:!0,required:!0,length:2},{name:"as",type:"string",array:!0,length:2,default:["x","y"]}]};pe(eT,J,{transform(e,t){var n=e.projection,i=e.fields[0],r=e.fields[1],a=e.as||["x","y"],s=a[0],o=a[1],l;function f(d){const g=n([i(d),r(d)]);g?(d[s]=g[0],d[o]=g[1]):(d[s]=void 0,d[o]=void 0)}return e.modified()?t=t.materialize().reflow(!0).visit(t.SOURCE,f):(l=t.modified(i.fields)||t.modified(r.fields),t.visit(l?t.ADD_MOD:t.ADD,f)),t.modifies(a)}});function tT(e){J.call(this,null,e)}tT.Definition={type:"GeoShape",metadata:{modifies:!0,nomod:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field",default:"datum"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"shape"}]};pe(tT,J,{transform(e,t){var n=t.fork(t.ALL),i=this.value,r=e.as||"shape",a=n.ADD;return(!i||e.modified())&&(this.value=i=Zse(II(e.projection),e.field||kr("datum"),e.pointRadius),n.materialize().reflow(),a=n.SOURCE),n.visit(a,s=>s[r]=i),n.modifies(r)}});function Zse(e,t,n){const i=n==null?r=>e(t(r)):r=>{var a=e.pointRadius(),s=e.pointRadius(n)(t(r));return e.pointRadius(a),s};return i.context=r=>(e.context(r),i),i}function nT(e){J.call(this,[],e),this.generator=Gae()}nT.Definition={type:"Graticule",metadata:{changes:!0,generates:!0},params:[{name:"extent",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMajor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMinor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"step",type:"number",array:!0,length:2},{name:"stepMajor",type:"number",array:!0,length:2,default:[90,360]},{name:"stepMinor",type:"number",array:!0,length:2,default:[10,10]},{name:"precision",type:"number",default:2.5}]};pe(nT,J,{transform(e,t){var n=this.value,i=this.generator,r;if(!n.length||e.modified())for(const a in e)qe(i[a])&&i[a](e[a]);return r=i(),n.length?t.mod.push(e7(n[0],r)):t.add.push(ct(r)),n[0]=r,t}});function iT(e){J.call(this,null,e)}iT.Definition={type:"heatmap",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"color",type:"string",expr:!0},{name:"opacity",type:"number",expr:!0},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"as",type:"string",default:"image"}]};pe(iT,J,{transform(e,t){if(!t.changed()&&!e.modified())return t.StopPropagation;var n=t.materialize(t.SOURCE).source,i=e.resolve==="shared",r=e.field||ni,a=Jse(e.opacity,e),s=Kse(e.color,e),o=e.as||"image",l={$x:0,$y:0,$value:0,$max:i?Sl(n.map(f=>Sl(r(f).values))):0};return n.forEach(f=>{const d=r(f),g=Pe({},f,l);i||(g.$max=Sl(d.values||[])),f[o]=eoe(d,g,s.dep?s:ii(s(g)),a.dep?a:ii(a(g)))}),t.reflow(!0).modifies(o)}});function Kse(e,t){let n;return qe(e)?(n=i=>lu(e(i,t)),n.dep=YI(e)):n=ii(lu(e||"#888")),n}function Jse(e,t){let n;return qe(e)?(n=i=>e(i,t),n.dep=YI(e)):e?n=ii(e):(n=i=>i.$value/i.$max||0,n.dep=!0),n}function YI(e){if(!qe(e))return!1;const t=ra(Kn(e));return t.$x||t.$y||t.$value||t.$max}function eoe(e,t,n,i){const r=e.width,a=e.height,s=e.x1||0,o=e.y1||0,l=e.x2||r,f=e.y2||a,d=e.values,g=d?E=>d[E]:jo,p=nu(l-s,f-o),y=p.getContext("2d"),v=y.getImageData(0,0,l-s,f-o),b=v.data;for(let E=o,_=0;E<f;++E){t.$y=E-o;for(let w=s,A=E*r;w<l;++w,_+=4){t.$x=w-s,t.$value=g(w+A);const $=n(t);b[_+0]=$.r,b[_+1]=$.g,b[_+2]=$.b,b[_+3]=~~(255*i(t))}}return y.putImageData(v,0,0),p}function XI(e){J.call(this,null,e),this.modified(!0)}pe(XI,J,{transform(e,t){let n=this.value;return!n||e.modified("type")?(this.value=n=noe(e.type),nA.forEach(i=>{e[i]!=null&&o4(n,i,e[i])})):nA.forEach(i=>{e.modified(i)&&o4(n,i,e[i])}),e.pointRadius!=null&&n.path.pointRadius(e.pointRadius),e.fit&&toe(n,e),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function toe(e,t){const n=ioe(t.fit);t.extent?e.fitExtent(t.extent,n):t.size&&e.fitSize(t.size,n)}function noe(e){const t=X3((e||"mercator").toLowerCase());return t||te("Unrecognized projection type: "+e),t()}function o4(e,t,n){qe(e[t])&&e[t](n)}function ioe(e){return e=Ee(e),e.length===1?e[0]:{type:Z3,features:e.reduce((t,n)=>t.concat(roe(n)),[])}}function roe(e){return e.type===Z3?e.features:Ee(e).filter(t=>t!=null).map(t=>t.type===iA?t:{type:iA,geometry:t})}const aoe=Object.freeze(Object.defineProperty({__proto__:null,contour:Q3,geojson:K3,geopath:J3,geopoint:eT,geoshape:tT,graticule:nT,heatmap:iT,isocontour:V3,kde2d:W3,projection:XI},Symbol.toStringTag,{value:"Module"}));function soe(e,t){var n,i=1;e==null&&(e=0),t==null&&(t=0);function r(){var a,s=n.length,o,l=0,f=0;for(a=0;a<s;++a)o=n[a],l+=o.x,f+=o.y;for(l=(l/s-e)*i,f=(f/s-t)*i,a=0;a<s;++a)o=n[a],o.x-=l,o.y-=f}return r.initialize=function(a){n=a},r.x=function(a){return arguments.length?(e=+a,r):e},r.y=function(a){return arguments.length?(t=+a,r):t},r.strength=function(a){return arguments.length?(i=+a,r):i},r}function ooe(e){const t=+this._x.call(null,e),n=+this._y.call(null,e);return VI(this.cover(t,n),t,n,e)}function VI(e,t,n,i){if(isNaN(t)||isNaN(n))return e;var r,a=e._root,s={data:i},o=e._x0,l=e._y0,f=e._x1,d=e._y1,g,p,y,v,b,E,_,w;if(!a)return e._root=s,e;for(;a.length;)if((b=t>=(g=(o+f)/2))?o=g:f=g,(E=n>=(p=(l+d)/2))?l=p:d=p,r=a,!(a=a[_=E<<1|b]))return r[_]=s,e;if(y=+e._x.call(null,a.data),v=+e._y.call(null,a.data),t===y&&n===v)return s.next=a,r?r[_]=s:e._root=s,e;do r=r?r[_]=new Array(4):e._root=new Array(4),(b=t>=(g=(o+f)/2))?o=g:f=g,(E=n>=(p=(l+d)/2))?l=p:d=p;while((_=E<<1|b)===(w=(v>=p)<<1|y>=g));return r[w]=a,r[_]=s,e}function uoe(e){var t,n,i=e.length,r,a,s=new Array(i),o=new Array(i),l=1/0,f=1/0,d=-1/0,g=-1/0;for(n=0;n<i;++n)isNaN(r=+this._x.call(null,t=e[n]))||isNaN(a=+this._y.call(null,t))||(s[n]=r,o[n]=a,r<l&&(l=r),r>d&&(d=r),a<f&&(f=a),a>g&&(g=a));if(l>d||f>g)return this;for(this.cover(l,f).cover(d,g),n=0;n<i;++n)VI(this,s[n],o[n],e[n]);return this}function loe(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var n=this._x0,i=this._y0,r=this._x1,a=this._y1;if(isNaN(n))r=(n=Math.floor(e))+1,a=(i=Math.floor(t))+1;else{for(var s=r-n||1,o=this._root,l,f;n>e||e>=r||i>t||t>=a;)switch(f=(t<i)<<1|e<n,l=new Array(4),l[f]=o,o=l,s*=2,f){case 0:r=n+s,a=i+s;break;case 1:n=r-s,a=i+s;break;case 2:r=n+s,i=a-s;break;case 3:n=r-s,i=a-s;break}this._root&&this._root.length&&(this._root=o)}return this._x0=n,this._y0=i,this._x1=r,this._y1=a,this}function coe(){var e=[];return this.visit(function(t){if(!t.length)do e.push(t.data);while(t=t.next)}),e}function foe(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function di(e,t,n,i,r){this.node=e,this.x0=t,this.y0=n,this.x1=i,this.y1=r}function doe(e,t,n){var i,r=this._x0,a=this._y0,s,o,l,f,d=this._x1,g=this._y1,p=[],y=this._root,v,b;for(y&&p.push(new di(y,r,a,d,g)),n==null?n=1/0:(r=e-n,a=t-n,d=e+n,g=t+n,n*=n);v=p.pop();)if(!(!(y=v.node)||(s=v.x0)>d||(o=v.y0)>g||(l=v.x1)<r||(f=v.y1)<a))if(y.length){var E=(s+l)/2,_=(o+f)/2;p.push(new di(y[3],E,_,l,f),new di(y[2],s,_,E,f),new di(y[1],E,o,l,_),new di(y[0],s,o,E,_)),(b=(t>=_)<<1|e>=E)&&(v=p[p.length-1],p[p.length-1]=p[p.length-1-b],p[p.length-1-b]=v)}else{var w=e-+this._x.call(null,y.data),A=t-+this._y.call(null,y.data),$=w*w+A*A;if($<n){var C=Math.sqrt(n=$);r=e-C,a=t-C,d=e+C,g=t+C,i=y.data}}return i}function hoe(e){if(isNaN(d=+this._x.call(null,e))||isNaN(g=+this._y.call(null,e)))return this;var t,n=this._root,i,r,a,s=this._x0,o=this._y0,l=this._x1,f=this._y1,d,g,p,y,v,b,E,_;if(!n)return this;if(n.length)for(;;){if((v=d>=(p=(s+l)/2))?s=p:l=p,(b=g>=(y=(o+f)/2))?o=y:f=y,t=n,!(n=n[E=b<<1|v]))return this;if(!n.length)break;(t[E+1&3]||t[E+2&3]||t[E+3&3])&&(i=t,_=E)}for(;n.data!==e;)if(r=n,!(n=n.next))return this;return(a=n.next)&&delete n.next,r?(a?r.next=a:delete r.next,this):t?(a?t[E]=a:delete t[E],(n=t[0]||t[1]||t[2]||t[3])&&n===(t[3]||t[2]||t[1]||t[0])&&!n.length&&(i?i[_]=n:this._root=n),this):(this._root=a,this)}function goe(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this}function poe(){return this._root}function moe(){var e=0;return this.visit(function(t){if(!t.length)do++e;while(t=t.next)}),e}function yoe(e){var t=[],n,i=this._root,r,a,s,o,l;for(i&&t.push(new di(i,this._x0,this._y0,this._x1,this._y1));n=t.pop();)if(!e(i=n.node,a=n.x0,s=n.y0,o=n.x1,l=n.y1)&&i.length){var f=(a+o)/2,d=(s+l)/2;(r=i[3])&&t.push(new di(r,f,d,o,l)),(r=i[2])&&t.push(new di(r,a,d,f,l)),(r=i[1])&&t.push(new di(r,f,s,o,d)),(r=i[0])&&t.push(new di(r,a,s,f,d))}return this}function voe(e){var t=[],n=[],i;for(this._root&&t.push(new di(this._root,this._x0,this._y0,this._x1,this._y1));i=t.pop();){var r=i.node;if(r.length){var a,s=i.x0,o=i.y0,l=i.x1,f=i.y1,d=(s+l)/2,g=(o+f)/2;(a=r[0])&&t.push(new di(a,s,o,d,g)),(a=r[1])&&t.push(new di(a,d,o,l,g)),(a=r[2])&&t.push(new di(a,s,g,d,f)),(a=r[3])&&t.push(new di(a,d,g,l,f))}n.push(i)}for(;i=n.pop();)e(i.node,i.x0,i.y0,i.x1,i.y1);return this}function boe(e){return e[0]}function xoe(e){return arguments.length?(this._x=e,this):this._x}function Eoe(e){return e[1]}function Soe(e){return arguments.length?(this._y=e,this):this._y}function rT(e,t,n){var i=new aT(t??boe,n??Eoe,NaN,NaN,NaN,NaN);return e==null?i:i.addAll(e)}function aT(e,t,n,i,r,a){this._x=e,this._y=t,this._x0=n,this._y0=i,this._x1=r,this._y1=a,this._root=void 0}function u4(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}var xi=rT.prototype=aT.prototype;xi.copy=function(){var e=new aT(this._x,this._y,this._x0,this._y0,this._x1,this._y1),t=this._root,n,i;if(!t)return e;if(!t.length)return e._root=u4(t),e;for(n=[{source:t,target:e._root=new Array(4)}];t=n.pop();)for(var r=0;r<4;++r)(i=t.source[r])&&(i.length?n.push({source:i,target:t.target[r]=new Array(4)}):t.target[r]=u4(i));return e};xi.add=ooe;xi.addAll=uoe;xi.cover=loe;xi.data=coe;xi.extent=foe;xi.find=doe;xi.remove=hoe;xi.removeAll=goe;xi.root=poe;xi.size=moe;xi.visit=yoe;xi.visitAfter=voe;xi.x=xoe;xi.y=Soe;function hi(e){return function(){return e}}function Qo(e){return(e()-.5)*1e-6}function _oe(e){return e.x+e.vx}function woe(e){return e.y+e.vy}function Aoe(e){var t,n,i,r=1,a=1;typeof e!="function"&&(e=hi(e==null?1:+e));function s(){for(var f,d=t.length,g,p,y,v,b,E,_=0;_<a;++_)for(g=rT(t,_oe,woe).visitAfter(o),f=0;f<d;++f)p=t[f],b=n[p.index],E=b*b,y=p.x+p.vx,v=p.y+p.vy,g.visit(w);function w(A,$,C,k,M){var R=A.data,z=A.r,B=b+z;if(R){if(R.index>p.index){var U=y-R.x-R.vx,V=v-R.y-R.vy,G=U*U+V*V;G<B*B&&(U===0&&(U=Qo(i),G+=U*U),V===0&&(V=Qo(i),G+=V*V),G=(B-(G=Math.sqrt(G)))/G*r,p.vx+=(U*=G)*(B=(z*=z)/(E+z)),p.vy+=(V*=G)*B,R.vx-=U*(B=1-B),R.vy-=V*B)}return}return $>y+B||k<y-B||C>v+B||M<v-B}}function o(f){if(f.data)return f.r=n[f.data.index];for(var d=f.r=0;d<4;++d)f[d]&&f[d].r>f.r&&(f.r=f[d].r)}function l(){if(t){var f,d=t.length,g;for(n=new Array(d),f=0;f<d;++f)g=t[f],n[g.index]=+e(g,f,t)}}return s.initialize=function(f,d){t=f,i=d,l()},s.iterations=function(f){return arguments.length?(a=+f,s):a},s.strength=function(f){return arguments.length?(r=+f,s):r},s.radius=function(f){return arguments.length?(e=typeof f=="function"?f:hi(+f),l(),s):e},s}function $oe(e){return e.index}function l4(e,t){var n=e.get(t);if(!n)throw new Error("node not found: "+t);return n}function Coe(e){var t=$oe,n=g,i,r=hi(30),a,s,o,l,f,d=1;e==null&&(e=[]);function g(E){return 1/Math.min(o[E.source.index],o[E.target.index])}function p(E){for(var _=0,w=e.length;_<d;++_)for(var A=0,$,C,k,M,R,z,B;A<w;++A)$=e[A],C=$.source,k=$.target,M=k.x+k.vx-C.x-C.vx||Qo(f),R=k.y+k.vy-C.y-C.vy||Qo(f),z=Math.sqrt(M*M+R*R),z=(z-a[A])/z*E*i[A],M*=z,R*=z,k.vx-=M*(B=l[A]),k.vy-=R*B,C.vx+=M*(B=1-B),C.vy+=R*B}function y(){if(s){var E,_=s.length,w=e.length,A=new Map(s.map((C,k)=>[t(C,k,s),C])),$;for(E=0,o=new Array(_);E<w;++E)$=e[E],$.index=E,typeof $.source!="object"&&($.source=l4(A,$.source)),typeof $.target!="object"&&($.target=l4(A,$.target)),o[$.source.index]=(o[$.source.index]||0)+1,o[$.target.index]=(o[$.target.index]||0)+1;for(E=0,l=new Array(w);E<w;++E)$=e[E],l[E]=o[$.source.index]/(o[$.source.index]+o[$.target.index]);i=new Array(w),v(),a=new Array(w),b()}}function v(){if(s)for(var E=0,_=e.length;E<_;++E)i[E]=+n(e[E],E,e)}function b(){if(s)for(var E=0,_=e.length;E<_;++E)a[E]=+r(e[E],E,e)}return p.initialize=function(E,_){s=E,f=_,y()},p.links=function(E){return arguments.length?(e=E,y(),p):e},p.id=function(E){return arguments.length?(t=E,p):t},p.iterations=function(E){return arguments.length?(d=+E,p):d},p.strength=function(E){return arguments.length?(n=typeof E=="function"?E:hi(+E),v(),p):n},p.distance=function(E){return arguments.length?(r=typeof E=="function"?E:hi(+E),b(),p):r},p}var Toe={value:()=>{}};function WI(){for(var e=0,t=arguments.length,n={},i;e<t;++e){if(!(i=arguments[e]+"")||i in n||/[\s.]/.test(i))throw new Error("illegal type: "+i);n[i]=[]}return new B1(n)}function B1(e){this._=e}function Moe(e,t){return e.trim().split(/^|\s+/).map(function(n){var i="",r=n.indexOf(".");if(r>=0&&(i=n.slice(r+1),n=n.slice(0,r)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:i}})}B1.prototype=WI.prototype={constructor:B1,on:function(e,t){var n=this._,i=Moe(e+"",n),r,a=-1,s=i.length;if(arguments.length<2){for(;++a<s;)if((r=(e=i[a]).type)&&(r=koe(n[r],e.name)))return r;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++a<s;)if(r=(e=i[a]).type)n[r]=c4(n[r],e.name,t);else if(t==null)for(r in n)n[r]=c4(n[r],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new B1(e)},call:function(e,t){if((r=arguments.length-2)>0)for(var n=new Array(r),i=0,r,a;i<r;++i)n[i]=arguments[i+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(a=this._[e],i=0,r=a.length;i<r;++i)a[i].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var i=this._[e],r=0,a=i.length;r<a;++r)i[r].value.apply(t,n)}};function koe(e,t){for(var n=0,i=e.length,r;n<i;++n)if((r=e[n]).name===t)return r.value}function c4(e,t,n){for(var i=0,r=e.length;i<r;++i)if(e[i].name===t){e[i]=Toe,e=e.slice(0,i).concat(e.slice(i+1));break}return n!=null&&e.push({name:t,value:n}),e}var ed=0,kg=0,ng=0,QI=1e3,nv,Og,iv=0,Bl=0,$b=0,gp=typeof performance=="object"&&performance.now?performance:Date,ZI=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function sT(){return Bl||(ZI(Ooe),Bl=gp.now()+$b)}function Ooe(){Bl=0}function rv(){this._call=this._time=this._next=null}rv.prototype=KI.prototype={constructor:rv,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?sT():+n)+(t==null?0:+t),!this._next&&Og!==this&&(Og?Og._next=this:nv=this,Og=this),this._call=e,this._time=n,rA()},stop:function(){this._call&&(this._call=null,this._time=1/0,rA())}};function KI(e,t,n){var i=new rv;return i.restart(e,t,n),i}function Doe(){sT(),++ed;for(var e=nv,t;e;)(t=Bl-e._time)>=0&&e._call.call(void 0,t),e=e._next;--ed}function f4(){Bl=(iv=gp.now())+$b,ed=kg=0;try{Doe()}finally{ed=0,Noe(),Bl=0}}function Roe(){var e=gp.now(),t=e-iv;t>QI&&($b-=t,iv=e)}function Noe(){for(var e,t=nv,n,i=1/0;t;)t._call?(i>t._time&&(i=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:nv=n);Og=e,rA(i)}function rA(e){if(!ed){kg&&(kg=clearTimeout(kg));var t=e-Bl;t>24?(e<1/0&&(kg=setTimeout(f4,e-gp.now()-$b)),ng&&(ng=clearInterval(ng))):(ng||(iv=gp.now(),ng=setInterval(Roe,QI)),ed=1,ZI(f4))}}function zoe(e,t,n){var i=new rv,r=t;return t==null?(i.restart(e,t,n),i):(i._restart=i.restart,i.restart=function(a,s,o){s=+s,o=o==null?sT():+o,i._restart(function l(f){f+=r,i._restart(l,r+=s,o),a(f)},s,o)},i.restart(e,t,n),i)}const Foe=1664525,Loe=1013904223,d4=4294967296;function Uoe(){let e=1;return()=>(e=(Foe*e+Loe)%d4)/d4}function Boe(e){return e.x}function Ioe(e){return e.y}var Poe=10,qoe=Math.PI*(3-Math.sqrt(5));function joe(e){var t,n=1,i=.001,r=1-Math.pow(i,1/300),a=0,s=.6,o=new Map,l=KI(g),f=WI("tick","end"),d=Uoe();e==null&&(e=[]);function g(){p(),f.call("tick",t),n<i&&(l.stop(),f.call("end",t))}function p(b){var E,_=e.length,w;b===void 0&&(b=1);for(var A=0;A<b;++A)for(n+=(a-n)*r,o.forEach(function($){$(n)}),E=0;E<_;++E)w=e[E],w.fx==null?w.x+=w.vx*=s:(w.x=w.fx,w.vx=0),w.fy==null?w.y+=w.vy*=s:(w.y=w.fy,w.vy=0);return t}function y(){for(var b=0,E=e.length,_;b<E;++b){if(_=e[b],_.index=b,_.fx!=null&&(_.x=_.fx),_.fy!=null&&(_.y=_.fy),isNaN(_.x)||isNaN(_.y)){var w=Poe*Math.sqrt(.5+b),A=b*qoe;_.x=w*Math.cos(A),_.y=w*Math.sin(A)}(isNaN(_.vx)||isNaN(_.vy))&&(_.vx=_.vy=0)}}function v(b){return b.initialize&&b.initialize(e,d),b}return y(),t={tick:p,restart:function(){return l.restart(g),t},stop:function(){return l.stop(),t},nodes:function(b){return arguments.length?(e=b,y(),o.forEach(v),t):e},alpha:function(b){return arguments.length?(n=+b,t):n},alphaMin:function(b){return arguments.length?(i=+b,t):i},alphaDecay:function(b){return arguments.length?(r=+b,t):+r},alphaTarget:function(b){return arguments.length?(a=+b,t):a},velocityDecay:function(b){return arguments.length?(s=1-b,t):1-s},randomSource:function(b){return arguments.length?(d=b,o.forEach(v),t):d},force:function(b,E){return arguments.length>1?(E==null?o.delete(b):o.set(b,v(E)),t):o.get(b)},find:function(b,E,_){var w=0,A=e.length,$,C,k,M,R;for(_==null?_=1/0:_*=_,w=0;w<A;++w)M=e[w],$=b-M.x,C=E-M.y,k=$*$+C*C,k<_&&(R=M,_=k);return R},on:function(b,E){return arguments.length>1?(f.on(b,E),t):f.on(b)}}}function Hoe(){var e,t,n,i,r=hi(-30),a,s=1,o=1/0,l=.81;function f(y){var v,b=e.length,E=rT(e,Boe,Ioe).visitAfter(g);for(i=y,v=0;v<b;++v)t=e[v],E.visit(p)}function d(){if(e){var y,v=e.length,b;for(a=new Array(v),y=0;y<v;++y)b=e[y],a[b.index]=+r(b,y,e)}}function g(y){var v=0,b,E,_=0,w,A,$;if(y.length){for(w=A=$=0;$<4;++$)(b=y[$])&&(E=Math.abs(b.value))&&(v+=b.value,_+=E,w+=E*b.x,A+=E*b.y);y.x=w/_,y.y=A/_}else{b=y,b.x=b.data.x,b.y=b.data.y;do v+=a[b.data.index];while(b=b.next)}y.value=v}function p(y,v,b,E){if(!y.value)return!0;var _=y.x-t.x,w=y.y-t.y,A=E-v,$=_*_+w*w;if(A*A/l<$)return $<o&&(_===0&&(_=Qo(n),$+=_*_),w===0&&(w=Qo(n),$+=w*w),$<s&&($=Math.sqrt(s*$)),t.vx+=_*y.value*i/$,t.vy+=w*y.value*i/$),!0;if(y.length||$>=o)return;(y.data!==t||y.next)&&(_===0&&(_=Qo(n),$+=_*_),w===0&&(w=Qo(n),$+=w*w),$<s&&($=Math.sqrt(s*$)));do y.data!==t&&(A=a[y.data.index]*i/$,t.vx+=_*A,t.vy+=w*A);while(y=y.next)}return f.initialize=function(y,v){e=y,n=v,d()},f.strength=function(y){return arguments.length?(r=typeof y=="function"?y:hi(+y),d(),f):r},f.distanceMin=function(y){return arguments.length?(s=y*y,f):Math.sqrt(s)},f.distanceMax=function(y){return arguments.length?(o=y*y,f):Math.sqrt(o)},f.theta=function(y){return arguments.length?(l=y*y,f):Math.sqrt(l)},f}function Goe(e){var t=hi(.1),n,i,r;typeof e!="function"&&(e=hi(e==null?0:+e));function a(o){for(var l=0,f=n.length,d;l<f;++l)d=n[l],d.vx+=(r[l]-d.x)*i[l]*o}function s(){if(n){var o,l=n.length;for(i=new Array(l),r=new Array(l),o=0;o<l;++o)i[o]=isNaN(r[o]=+e(n[o],o,n))?0:+t(n[o],o,n)}}return a.initialize=function(o){n=o,s()},a.strength=function(o){return arguments.length?(t=typeof o=="function"?o:hi(+o),s(),a):t},a.x=function(o){return arguments.length?(e=typeof o=="function"?o:hi(+o),s(),a):e},a}function Yoe(e){var t=hi(.1),n,i,r;typeof e!="function"&&(e=hi(e==null?0:+e));function a(o){for(var l=0,f=n.length,d;l<f;++l)d=n[l],d.vy+=(r[l]-d.y)*i[l]*o}function s(){if(n){var o,l=n.length;for(i=new Array(l),r=new Array(l),o=0;o<l;++o)i[o]=isNaN(r[o]=+e(n[o],o,n))?0:+t(n[o],o,n)}}return a.initialize=function(o){n=o,s()},a.strength=function(o){return arguments.length?(t=typeof o=="function"?o:hi(+o),s(),a):t},a.y=function(o){return arguments.length?(e=typeof o=="function"?o:hi(+o),s(),a):e},a}const h4={center:soe,collide:Aoe,nbody:Hoe,link:Coe,x:Goe,y:Yoe},Dg="forces",aA=["alpha","alphaMin","alphaTarget","velocityDecay","forces"],Xoe=["static","iterations"],JI=["x","y","vx","vy"];function oT(e){J.call(this,null,e)}oT.Definition={type:"Force",metadata:{modifies:!0},params:[{name:"static",type:"boolean",default:!1},{name:"restart",type:"boolean",default:!1},{name:"iterations",type:"number",default:300},{name:"alpha",type:"number",default:1},{name:"alphaMin",type:"number",default:.001},{name:"alphaTarget",type:"number",default:0},{name:"velocityDecay",type:"number",default:.4},{name:"forces",type:"param",array:!0,params:[{key:{force:"center"},params:[{name:"x",type:"number",default:0},{name:"y",type:"number",default:0}]},{key:{force:"collide"},params:[{name:"radius",type:"number",expr:!0},{name:"strength",type:"number",default:.7},{name:"iterations",type:"number",default:1}]},{key:{force:"nbody"},params:[{name:"strength",type:"number",default:-30,expr:!0},{name:"theta",type:"number",default:.9},{name:"distanceMin",type:"number",default:1},{name:"distanceMax",type:"number"}]},{key:{force:"link"},params:[{name:"links",type:"data"},{name:"id",type:"field"},{name:"distance",type:"number",default:30,expr:!0},{name:"strength",type:"number",expr:!0},{name:"iterations",type:"number",default:1}]},{key:{force:"x"},params:[{name:"strength",type:"number",default:.1},{name:"x",type:"field"}]},{key:{force:"y"},params:[{name:"strength",type:"number",default:.1},{name:"y",type:"field"}]}]},{name:"as",type:"string",array:!0,modify:!1,default:JI}]};pe(oT,J,{transform(e,t){var n=this.value,i=t.changed(t.ADD_REM),r=e.modified(aA),a=e.iterations||300;if(n?(i&&(t.modifies("index"),n.nodes(t.source)),(r||t.changed(t.MOD))&&eP(n,e,0,t)):(this.value=n=Woe(t.source,e),n.on("tick",Voe(t.dataflow,this)),e.static||(i=!0,n.tick()),t.modifies("index")),r||i||e.modified(Xoe)||t.changed()&&e.restart){if(n.alpha(Math.max(n.alpha(),e.alpha||1)).alphaDecay(1-Math.pow(n.alphaMin(),1/a)),e.static)for(n.stop();--a>=0;)n.tick();else if(n.stopped()&&n.restart(),!i)return t.StopPropagation}return this.finish(e,t)},finish(e,t){const n=t.dataflow;for(let o=this._argops,l=0,f=o.length,d;l<f;++l)if(d=o[l],!(d.name!==Dg||d.op._argval.force!=="link")){for(var i=d.op._argops,r=0,a=i.length,s;r<a;++r)if(i[r].name==="links"&&(s=i[r].op.source)){n.pulse(s,n.changeset().reflow());break}}return t.reflow(e.modified()).modifies(JI)}});function Voe(e,t){return()=>e.touch(t).run()}function Woe(e,t){const n=joe(e),i=n.stop,r=n.restart;let a=!1;return n.stopped=()=>a,n.restart=()=>(a=!1,r()),n.stop=()=>(a=!0,i()),eP(n,t,!0).on("end",()=>a=!0)}function eP(e,t,n,i){var r=Ee(t.forces),a,s,o,l;for(a=0,s=aA.length;a<s;++a)o=aA[a],o!==Dg&&t.modified(o)&&e[o](t[o]);for(a=0,s=r.length;a<s;++a)l=Dg+a,o=n||t.modified(Dg,a)?Zoe(r[a]):i&&Qoe(r[a],i)?e.force(l):null,o&&e.force(l,o);for(s=e.numForces||0;a<s;++a)e.force(Dg+a,null);return e.numForces=r.length,e}function Qoe(e,t){var n,i;for(n in e)if(qe(i=e[n])&&t.modified(Kn(i)))return 1;return 0}function Zoe(e){var t,n;_e(h4,e.force)||te("Unrecognized force: "+e.force),t=h4[e.force]();for(n in e)qe(t[n])&&Koe(t[n],e[n],e);return t}function Koe(e,t,n){e(qe(t)?i=>t(i,n):t)}const Joe=Object.freeze(Object.defineProperty({__proto__:null,force:oT},Symbol.toStringTag,{value:"Module"}));function eue(e,t){return e.parent===t.parent?1:2}function tue(e){return e.reduce(nue,0)/e.length}function nue(e,t){return e+t.x}function iue(e){return 1+e.reduce(rue,0)}function rue(e,t){return Math.max(e,t.y)}function aue(e){for(var t;t=e.children;)e=t[0];return e}function sue(e){for(var t;t=e.children;)e=t[t.length-1];return e}function oue(){var e=eue,t=1,n=1,i=!1;function r(a){var s,o=0;a.eachAfter(function(p){var y=p.children;y?(p.x=tue(y),p.y=iue(y)):(p.x=s?o+=e(p,s):0,p.y=0,s=p)});var l=aue(a),f=sue(a),d=l.x-e(l,f)/2,g=f.x+e(f,l)/2;return a.eachAfter(i?function(p){p.x=(p.x-a.x)*t,p.y=(a.y-p.y)*n}:function(p){p.x=(p.x-d)/(g-d)*t,p.y=(1-(a.y?p.y/a.y:1))*n})}return r.separation=function(a){return arguments.length?(e=a,r):e},r.size=function(a){return arguments.length?(i=!1,t=+a[0],n=+a[1],r):i?null:[t,n]},r.nodeSize=function(a){return arguments.length?(i=!0,t=+a[0],n=+a[1],r):i?[t,n]:null},r}function uue(e){var t=0,n=e.children,i=n&&n.length;if(!i)t=1;else for(;--i>=0;)t+=n[i].value;e.value=t}function lue(){return this.eachAfter(uue)}function cue(e,t){let n=-1;for(const i of this)e.call(t,i,++n,this);return this}function fue(e,t){for(var n=this,i=[n],r,a,s=-1;n=i.pop();)if(e.call(t,n,++s,this),r=n.children)for(a=r.length-1;a>=0;--a)i.push(r[a]);return this}function due(e,t){for(var n=this,i=[n],r=[],a,s,o,l=-1;n=i.pop();)if(r.push(n),a=n.children)for(s=0,o=a.length;s<o;++s)i.push(a[s]);for(;n=r.pop();)e.call(t,n,++l,this);return this}function hue(e,t){let n=-1;for(const i of this)if(e.call(t,i,++n,this))return i}function gue(e){return this.eachAfter(function(t){for(var n=+e(t.data)||0,i=t.children,r=i&&i.length;--r>=0;)n+=i[r].value;t.value=n})}function pue(e){return this.eachBefore(function(t){t.children&&t.children.sort(e)})}function mue(e){for(var t=this,n=yue(t,e),i=[t];t!==n;)t=t.parent,i.push(t);for(var r=i.length;e!==n;)i.splice(r,0,e),e=e.parent;return i}function yue(e,t){if(e===t)return e;var n=e.ancestors(),i=t.ancestors(),r=null;for(e=n.pop(),t=i.pop();e===t;)r=e,e=n.pop(),t=i.pop();return r}function vue(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t}function bue(){return Array.from(this)}function xue(){var e=[];return this.eachBefore(function(t){t.children||e.push(t)}),e}function Eue(){var e=this,t=[];return e.each(function(n){n!==e&&t.push({source:n.parent,target:n})}),t}function*Sue(){var e=this,t,n=[e],i,r,a;do for(t=n.reverse(),n=[];e=t.pop();)if(yield e,i=e.children)for(r=0,a=i.length;r<a;++r)n.push(i[r]);while(n.length)}function uT(e,t){e instanceof Map?(e=[void 0,e],t===void 0&&(t=Aue)):t===void 0&&(t=wue);for(var n=new td(e),i,r=[n],a,s,o,l;i=r.pop();)if((s=t(i.data))&&(l=(s=Array.from(s)).length))for(i.children=s,o=l-1;o>=0;--o)r.push(a=s[o]=new td(s[o])),a.parent=i,a.depth=i.depth+1;return n.eachBefore(tP)}function _ue(){return uT(this).eachBefore($ue)}function wue(e){return e.children}function Aue(e){return Array.isArray(e)?e[1]:null}function $ue(e){e.data.value!==void 0&&(e.value=e.data.value),e.data=e.data.data}function tP(e){var t=0;do e.height=t;while((e=e.parent)&&e.height<++t)}function td(e){this.data=e,this.depth=this.height=0,this.parent=null}td.prototype=uT.prototype={constructor:td,count:lue,each:cue,eachAfter:due,eachBefore:fue,find:hue,sum:gue,sort:pue,path:mue,ancestors:vue,descendants:bue,leaves:xue,links:Eue,copy:_ue,[Symbol.iterator]:Sue};function I1(e){return e==null?null:nP(e)}function nP(e){if(typeof e!="function")throw new Error;return e}function yl(){return 0}function mf(e){return function(){return e}}const Cue=1664525,Tue=1013904223,g4=4294967296;function Mue(){let e=1;return()=>(e=(Cue*e+Tue)%g4)/g4}function kue(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Oue(e,t){let n=e.length,i,r;for(;n;)r=t()*n--|0,i=e[n],e[n]=e[r],e[r]=i;return e}function Due(e,t){for(var n=0,i=(e=Oue(Array.from(e),t)).length,r=[],a,s;n<i;)a=e[n],s&&iP(s,a)?++n:(s=Nue(r=Rue(r,a)),n=0);return s}function Rue(e,t){var n,i;if(zS(t,e))return[t];for(n=0;n<e.length;++n)if(a1(t,e[n])&&zS(Rg(e[n],t),e))return[e[n],t];for(n=0;n<e.length-1;++n)for(i=n+1;i<e.length;++i)if(a1(Rg(e[n],e[i]),t)&&a1(Rg(e[n],t),e[i])&&a1(Rg(e[i],t),e[n])&&zS(rP(e[n],e[i],t),e))return[e[n],e[i],t];throw new Error}function a1(e,t){var n=e.r-t.r,i=t.x-e.x,r=t.y-e.y;return n<0||n*n<i*i+r*r}function iP(e,t){var n=e.r-t.r+Math.max(e.r,t.r,1)*1e-9,i=t.x-e.x,r=t.y-e.y;return n>0&&n*n>i*i+r*r}function zS(e,t){for(var n=0;n<t.length;++n)if(!iP(e,t[n]))return!1;return!0}function Nue(e){switch(e.length){case 1:return zue(e[0]);case 2:return Rg(e[0],e[1]);case 3:return rP(e[0],e[1],e[2])}}function zue(e){return{x:e.x,y:e.y,r:e.r}}function Rg(e,t){var n=e.x,i=e.y,r=e.r,a=t.x,s=t.y,o=t.r,l=a-n,f=s-i,d=o-r,g=Math.sqrt(l*l+f*f);return{x:(n+a+l/g*d)/2,y:(i+s+f/g*d)/2,r:(g+r+o)/2}}function rP(e,t,n){var i=e.x,r=e.y,a=e.r,s=t.x,o=t.y,l=t.r,f=n.x,d=n.y,g=n.r,p=i-s,y=i-f,v=r-o,b=r-d,E=l-a,_=g-a,w=i*i+r*r-a*a,A=w-s*s-o*o+l*l,$=w-f*f-d*d+g*g,C=y*v-p*b,k=(v*$-b*A)/(C*2)-i,M=(b*E-v*_)/C,R=(y*A-p*$)/(C*2)-r,z=(p*_-y*E)/C,B=M*M+z*z-1,U=2*(a+k*M+R*z),V=k*k+R*R-a*a,G=-(Math.abs(B)>1e-6?(U+Math.sqrt(U*U-4*B*V))/(2*B):V/U);return{x:i+k+M*G,y:r+R+z*G,r:G}}function p4(e,t,n){var i=e.x-t.x,r,a,s=e.y-t.y,o,l,f=i*i+s*s;f?(a=t.r+n.r,a*=a,l=e.r+n.r,l*=l,a>l?(r=(f+l-a)/(2*f),o=Math.sqrt(Math.max(0,l/f-r*r)),n.x=e.x-r*i-o*s,n.y=e.y-r*s+o*i):(r=(f+a-l)/(2*f),o=Math.sqrt(Math.max(0,a/f-r*r)),n.x=t.x+r*i-o*s,n.y=t.y+r*s+o*i)):(n.x=t.x+n.r,n.y=t.y)}function m4(e,t){var n=e.r+t.r-1e-6,i=t.x-e.x,r=t.y-e.y;return n>0&&n*n>i*i+r*r}function y4(e){var t=e._,n=e.next._,i=t.r+n.r,r=(t.x*n.r+n.x*t.r)/i,a=(t.y*n.r+n.y*t.r)/i;return r*r+a*a}function s1(e){this._=e,this.next=null,this.previous=null}function Fue(e,t){if(!(a=(e=kue(e)).length))return 0;var n,i,r,a,s,o,l,f,d,g,p;if(n=e[0],n.x=0,n.y=0,!(a>1))return n.r;if(i=e[1],n.x=-i.r,i.x=n.r,i.y=0,!(a>2))return n.r+i.r;p4(i,n,r=e[2]),n=new s1(n),i=new s1(i),r=new s1(r),n.next=r.previous=i,i.next=n.previous=r,r.next=i.previous=n;e:for(l=3;l<a;++l){p4(n._,i._,r=e[l]),r=new s1(r),f=i.next,d=n.previous,g=i._.r,p=n._.r;do if(g<=p){if(m4(f._,r._)){i=f,n.next=i,i.previous=n,--l;continue e}g+=f._.r,f=f.next}else{if(m4(d._,r._)){n=d,n.next=i,i.previous=n,--l;continue e}p+=d._.r,d=d.previous}while(f!==d.next);for(r.previous=n,r.next=i,n.next=i.previous=i=r,s=y4(n);(r=r.next)!==i;)(o=y4(r))<s&&(n=r,s=o);i=n.next}for(n=[i._],r=i;(r=r.next)!==i;)n.push(r._);for(r=Due(n,t),l=0;l<a;++l)n=e[l],n.x-=r.x,n.y-=r.y;return r.r}function Lue(e){return Math.sqrt(e.value)}function Uue(){var e=null,t=1,n=1,i=yl;function r(a){const s=Mue();return a.x=t/2,a.y=n/2,e?a.eachBefore(v4(e)).eachAfter(FS(i,.5,s)).eachBefore(b4(1)):a.eachBefore(v4(Lue)).eachAfter(FS(yl,1,s)).eachAfter(FS(i,a.r/Math.min(t,n),s)).eachBefore(b4(Math.min(t,n)/(2*a.r))),a}return r.radius=function(a){return arguments.length?(e=I1(a),r):e},r.size=function(a){return arguments.length?(t=+a[0],n=+a[1],r):[t,n]},r.padding=function(a){return arguments.length?(i=typeof a=="function"?a:mf(+a),r):i},r}function v4(e){return function(t){t.children||(t.r=Math.max(0,+e(t)||0))}}function FS(e,t,n){return function(i){if(r=i.children){var r,a,s=r.length,o=e(i)*t||0,l;if(o)for(a=0;a<s;++a)r[a].r+=o;if(l=Fue(r,n),o)for(a=0;a<s;++a)r[a].r-=o;i.r=l+o}}}function b4(e){return function(t){var n=t.parent;t.r*=e,n&&(t.x=n.x+e*t.x,t.y=n.y+e*t.y)}}function aP(e){e.x0=Math.round(e.x0),e.y0=Math.round(e.y0),e.x1=Math.round(e.x1),e.y1=Math.round(e.y1)}function e0(e,t,n,i,r){for(var a=e.children,s,o=-1,l=a.length,f=e.value&&(i-t)/e.value;++o<l;)s=a[o],s.y0=n,s.y1=r,s.x0=t,s.x1=t+=s.value*f}function Bue(){var e=1,t=1,n=0,i=!1;function r(s){var o=s.height+1;return s.x0=s.y0=n,s.x1=e,s.y1=t/o,s.eachBefore(a(t,o)),i&&s.eachBefore(aP),s}function a(s,o){return function(l){l.children&&e0(l,l.x0,s*(l.depth+1)/o,l.x1,s*(l.depth+2)/o);var f=l.x0,d=l.y0,g=l.x1-n,p=l.y1-n;g<f&&(f=g=(f+g)/2),p<d&&(d=p=(d+p)/2),l.x0=f,l.y0=d,l.x1=g,l.y1=p}}return r.round=function(s){return arguments.length?(i=!!s,r):i},r.size=function(s){return arguments.length?(e=+s[0],t=+s[1],r):[e,t]},r.padding=function(s){return arguments.length?(n=+s,r):n},r}var Iue={depth:-1},x4={},LS={};function Pue(e){return e.id}function que(e){return e.parentId}function E4(){var e=Pue,t=que,n;function i(r){var a=Array.from(r),s=e,o=t,l,f,d,g,p,y,v,b,E=new Map;if(n!=null){const _=a.map(($,C)=>jue(n($,C,r))),w=_.map(S4),A=new Set(_).add("");for(const $ of w)A.has($)||(A.add($),_.push($),w.push(S4($)),a.push(LS));s=($,C)=>_[C],o=($,C)=>w[C]}for(d=0,l=a.length;d<l;++d)f=a[d],y=a[d]=new td(f),(v=s(f,d,r))!=null&&(v+="")&&(b=y.id=v,E.set(b,E.has(b)?x4:y)),(v=o(f,d,r))!=null&&(v+="")&&(y.parent=v);for(d=0;d<l;++d)if(y=a[d],v=y.parent){if(p=E.get(v),!p)throw new Error("missing: "+v);if(p===x4)throw new Error("ambiguous: "+v);p.children?p.children.push(y):p.children=[y],y.parent=p}else{if(g)throw new Error("multiple roots");g=y}if(!g)throw new Error("no root");if(n!=null){for(;g.data===LS&&g.children.length===1;)g=g.children[0],--l;for(let _=a.length-1;_>=0&&(y=a[_],y.data===LS);--_)y.data=null}if(g.parent=Iue,g.eachBefore(function(_){_.depth=_.parent.depth+1,--l}).eachBefore(tP),g.parent=null,l>0)throw new Error("cycle");return g}return i.id=function(r){return arguments.length?(e=I1(r),i):e},i.parentId=function(r){return arguments.length?(t=I1(r),i):t},i.path=function(r){return arguments.length?(n=I1(r),i):n},i}function jue(e){e=`${e}`;let t=e.length;return sA(e,t-1)&&!sA(e,t-2)&&(e=e.slice(0,-1)),e[0]==="/"?e:`/${e}`}function S4(e){let t=e.length;if(t<2)return"";for(;--t>1&&!sA(e,t););return e.slice(0,t)}function sA(e,t){if(e[t]==="/"){let n=0;for(;t>0&&e[--t]==="\\";)++n;if((n&1)===0)return!0}return!1}function Hue(e,t){return e.parent===t.parent?1:2}function US(e){var t=e.children;return t?t[0]:e.t}function BS(e){var t=e.children;return t?t[t.length-1]:e.t}function Gue(e,t,n){var i=n/(t.i-e.i);t.c-=i,t.s+=n,e.c+=i,t.z+=n,t.m+=n}function Yue(e){for(var t=0,n=0,i=e.children,r=i.length,a;--r>=0;)a=i[r],a.z+=t,a.m+=t,t+=a.s+(n+=a.c)}function Xue(e,t,n){return e.a.parent===t.parent?e.a:n}function P1(e,t){this._=e,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=t}P1.prototype=Object.create(td.prototype);function Vue(e){for(var t=new P1(e,0),n,i=[t],r,a,s,o;n=i.pop();)if(a=n._.children)for(n.children=new Array(o=a.length),s=o-1;s>=0;--s)i.push(r=n.children[s]=new P1(a[s],s)),r.parent=n;return(t.parent=new P1(null,0)).children=[t],t}function Wue(){var e=Hue,t=1,n=1,i=null;function r(f){var d=Vue(f);if(d.eachAfter(a),d.parent.m=-d.z,d.eachBefore(s),i)f.eachBefore(l);else{var g=f,p=f,y=f;f.eachBefore(function(w){w.x<g.x&&(g=w),w.x>p.x&&(p=w),w.depth>y.depth&&(y=w)});var v=g===p?1:e(g,p)/2,b=v-g.x,E=t/(p.x+v+b),_=n/(y.depth||1);f.eachBefore(function(w){w.x=(w.x+b)*E,w.y=w.depth*_})}return f}function a(f){var d=f.children,g=f.parent.children,p=f.i?g[f.i-1]:null;if(d){Yue(f);var y=(d[0].z+d[d.length-1].z)/2;p?(f.z=p.z+e(f._,p._),f.m=f.z-y):f.z=y}else p&&(f.z=p.z+e(f._,p._));f.parent.A=o(f,p,f.parent.A||g[0])}function s(f){f._.x=f.z+f.parent.m,f.m+=f.parent.m}function o(f,d,g){if(d){for(var p=f,y=f,v=d,b=p.parent.children[0],E=p.m,_=y.m,w=v.m,A=b.m,$;v=BS(v),p=US(p),v&&p;)b=US(b),y=BS(y),y.a=f,$=v.z+w-p.z-E+e(v._,p._),$>0&&(Gue(Xue(v,f,g),f,$),E+=$,_+=$),w+=v.m,E+=p.m,A+=b.m,_+=y.m;v&&!BS(y)&&(y.t=v,y.m+=w-_),p&&!US(b)&&(b.t=p,b.m+=E-A,g=f)}return g}function l(f){f.x*=t,f.y=f.depth*n}return r.separation=function(f){return arguments.length?(e=f,r):e},r.size=function(f){return arguments.length?(i=!1,t=+f[0],n=+f[1],r):i?null:[t,n]},r.nodeSize=function(f){return arguments.length?(i=!0,t=+f[0],n=+f[1],r):i?[t,n]:null},r}function Cb(e,t,n,i,r){for(var a=e.children,s,o=-1,l=a.length,f=e.value&&(r-n)/e.value;++o<l;)s=a[o],s.x0=t,s.x1=i,s.y0=n,s.y1=n+=s.value*f}var sP=(1+Math.sqrt(5))/2;function oP(e,t,n,i,r,a){for(var s=[],o=t.children,l,f,d=0,g=0,p=o.length,y,v,b=t.value,E,_,w,A,$,C,k;d<p;){y=r-n,v=a-i;do E=o[g++].value;while(!E&&g<p);for(_=w=E,C=Math.max(v/y,y/v)/(b*e),k=E*E*C,$=Math.max(w/k,k/_);g<p;++g){if(E+=f=o[g].value,f<_&&(_=f),f>w&&(w=f),k=E*E*C,A=Math.max(w/k,k/_),A>$){E-=f;break}$=A}s.push(l={value:E,dice:y<v,children:o.slice(d,g)}),l.dice?e0(l,n,i,r,b?i+=v*E/b:a):Cb(l,n,i,b?n+=y*E/b:r,a),b-=E,d=g}return s}const uP=function e(t){function n(i,r,a,s,o){oP(t,i,r,a,s,o)}return n.ratio=function(i){return e((i=+i)>1?i:1)},n}(sP);function Que(){var e=uP,t=!1,n=1,i=1,r=[0],a=yl,s=yl,o=yl,l=yl,f=yl;function d(p){return p.x0=p.y0=0,p.x1=n,p.y1=i,p.eachBefore(g),r=[0],t&&p.eachBefore(aP),p}function g(p){var y=r[p.depth],v=p.x0+y,b=p.y0+y,E=p.x1-y,_=p.y1-y;E<v&&(v=E=(v+E)/2),_<b&&(b=_=(b+_)/2),p.x0=v,p.y0=b,p.x1=E,p.y1=_,p.children&&(y=r[p.depth+1]=a(p)/2,v+=f(p)-y,b+=s(p)-y,E-=o(p)-y,_-=l(p)-y,E<v&&(v=E=(v+E)/2),_<b&&(b=_=(b+_)/2),e(p,v,b,E,_))}return d.round=function(p){return arguments.length?(t=!!p,d):t},d.size=function(p){return arguments.length?(n=+p[0],i=+p[1],d):[n,i]},d.tile=function(p){return arguments.length?(e=nP(p),d):e},d.padding=function(p){return arguments.length?d.paddingInner(p).paddingOuter(p):d.paddingInner()},d.paddingInner=function(p){return arguments.length?(a=typeof p=="function"?p:mf(+p),d):a},d.paddingOuter=function(p){return arguments.length?d.paddingTop(p).paddingRight(p).paddingBottom(p).paddingLeft(p):d.paddingTop()},d.paddingTop=function(p){return arguments.length?(s=typeof p=="function"?p:mf(+p),d):s},d.paddingRight=function(p){return arguments.length?(o=typeof p=="function"?p:mf(+p),d):o},d.paddingBottom=function(p){return arguments.length?(l=typeof p=="function"?p:mf(+p),d):l},d.paddingLeft=function(p){return arguments.length?(f=typeof p=="function"?p:mf(+p),d):f},d}function Zue(e,t,n,i,r){var a=e.children,s,o=a.length,l,f=new Array(o+1);for(f[0]=l=s=0;s<o;++s)f[s+1]=l+=a[s].value;d(0,o,e.value,t,n,i,r);function d(g,p,y,v,b,E,_){if(g>=p-1){var w=a[g];w.x0=v,w.y0=b,w.x1=E,w.y1=_;return}for(var A=f[g],$=y/2+A,C=g+1,k=p-1;C<k;){var M=C+k>>>1;f[M]<$?C=M+1:k=M}$-f[C-1]<f[C]-$&&g+1<C&&--C;var R=f[C]-A,z=y-R;if(E-v>_-b){var B=y?(v*z+E*R)/y:E;d(g,C,R,v,b,B,_),d(C,p,z,B,b,E,_)}else{var U=y?(b*z+_*R)/y:_;d(g,C,R,v,b,E,U),d(C,p,z,v,U,E,_)}}}function Kue(e,t,n,i,r){(e.depth&1?Cb:e0)(e,t,n,i,r)}const Jue=function e(t){function n(i,r,a,s,o){if((l=i._squarify)&&l.ratio===t)for(var l,f,d,g,p=-1,y,v=l.length,b=i.value;++p<v;){for(f=l[p],d=f.children,g=f.value=0,y=d.length;g<y;++g)f.value+=d[g].value;f.dice?e0(f,r,a,s,b?a+=(o-a)*f.value/b:o):Cb(f,r,a,b?r+=(s-r)*f.value/b:s,o),b-=f.value}else i._squarify=l=oP(t,i,r,a,s,o),l.ratio=t}return n.ratio=function(i){return e((i=+i)>1?i:1)},n}(sP);function oA(e,t,n){const i={};return e.each(r=>{const a=r.data;n(a)&&(i[t(a)]=r)}),e.lookup=i,e}function lT(e){J.call(this,null,e)}lT.Definition={type:"Nest",metadata:{treesource:!0,changes:!0},params:[{name:"keys",type:"field",array:!0},{name:"generate",type:"boolean"}]};const ele=e=>e.values;pe(lT,J,{transform(e,t){t.source||te("Nest transform requires an upstream data source.");var n=e.generate,i=e.modified(),r=t.clone(),a=this.value;return(!a||i||t.changed())&&(a&&a.each(s=>{s.children&&Pv(s.data)&&r.rem.push(s.data)}),this.value=a=uT({values:Ee(e.keys).reduce((s,o)=>(s.key(o),s),tle()).entries(r.source)},ele),n&&a.each(s=>{s.children&&(s=ct(s.data),r.add.push(s),r.source.push(s))}),oA(a,ke,ke)),r.source.root=a,r}});function tle(){const e=[],t={entries:r=>i(n(r,0),0),key:r=>(e.push(r),t)};function n(r,a){if(a>=e.length)return r;const s=r.length,o=e[a++],l={},f={};let d=-1,g,p,y;for(;++d<s;)g=o(p=r[d])+"",(y=l[g])?y.push(p):l[g]=[p];for(g in l)f[g]=n(l[g],a);return f}function i(r,a){if(++a>e.length)return r;const s=[];for(const o in r)s.push({key:o,values:i(r[o],a)});return s}return t}function to(e){J.call(this,null,e)}const nle=(e,t)=>e.parent===t.parent?1:2;pe(to,J,{transform(e,t){(!t.source||!t.source.root)&&te(this.constructor.name+" transform requires a backing tree data source.");const n=this.layout(e.method),i=this.fields,r=t.source.root,a=e.as||i;e.field?r.sum(e.field):r.count(),e.sort&&r.sort(nc(e.sort,s=>s.data)),ile(n,this.params,e),n.separation&&n.separation(e.separation!==!1?nle:vd);try{this.value=n(r)}catch(s){te(s)}return r.each(s=>rle(s,i,a)),t.reflow(e.modified()).modifies(a).modifies("leaf")}});function ile(e,t,n){for(let i,r=0,a=t.length;r<a;++r)i=t[r],i in n&&e[i](n[i])}function rle(e,t,n){const i=e.data,r=t.length-1;for(let a=0;a<r;++a)i[n[a]]=e[t[a]];i[n[r]]=e.children?e.children.length:0}const uA=["x","y","r","depth","children"];function cT(e){to.call(this,e)}cT.Definition={type:"Pack",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"radius",type:"field",default:null},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:uA.length,default:uA}]};pe(cT,to,{layout:Uue,params:["radius","size","padding"],fields:uA});const lA=["x0","y0","x1","y1","depth","children"];function fT(e){to.call(this,e)}fT.Definition={type:"Partition",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:lA.length,default:lA}]};pe(fT,to,{layout:Bue,params:["size","round","padding"],fields:lA});function dT(e){J.call(this,null,e)}dT.Definition={type:"Stratify",metadata:{treesource:!0},params:[{name:"key",type:"field",required:!0},{name:"parentKey",type:"field",required:!0}]};pe(dT,J,{transform(e,t){t.source||te("Stratify transform requires an upstream data source.");let n=this.value;const i=e.modified(),r=t.fork(t.ALL).materialize(t.SOURCE),a=!n||i||t.changed(t.ADD_REM)||t.modified(e.key.fields)||t.modified(e.parentKey.fields);return r.source=r.source.slice(),a&&(n=r.source.length?oA(E4().id(e.key).parentId(e.parentKey)(r.source),e.key,Or):oA(E4()([{}]),e.key,e.key)),r.source.root=this.value=n,r}});const _4={tidy:Wue,cluster:oue},cA=["x","y","depth","children"];function hT(e){to.call(this,e)}hT.Definition={type:"Tree",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"tidy",values:["tidy","cluster"]},{name:"size",type:"number",array:!0,length:2},{name:"nodeSize",type:"number",array:!0,length:2},{name:"separation",type:"boolean",default:!0},{name:"as",type:"string",array:!0,length:cA.length,default:cA}]};pe(hT,to,{layout(e){const t=e||"tidy";if(_e(_4,t))return _4[t]();te("Unrecognized Tree layout method: "+t)},params:["size","nodeSize"],fields:cA});function gT(e){J.call(this,[],e)}gT.Definition={type:"TreeLinks",metadata:{tree:!0,generates:!0,changes:!0},params:[]};pe(gT,J,{transform(e,t){const n=this.value,i=t.source&&t.source.root,r=t.fork(t.NO_SOURCE),a={};return i||te("TreeLinks transform requires a tree data source."),t.changed(t.ADD_REM)?(r.rem=n,t.visit(t.SOURCE,s=>a[ke(s)]=1),i.each(s=>{const o=s.data,l=s.parent&&s.parent.data;l&&a[ke(o)]&&a[ke(l)]&&r.add.push(ct({source:l,target:o}))}),this.value=r.add):t.changed(t.MOD)&&(t.visit(t.MOD,s=>a[ke(s)]=1),n.forEach(s=>{(a[ke(s.source)]||a[ke(s.target)])&&r.mod.push(s)})),r}});const w4={binary:Zue,dice:e0,slice:Cb,slicedice:Kue,squarify:uP,resquarify:Jue},fA=["x0","y0","x1","y1","depth","children"];function pT(e){to.call(this,e)}pT.Definition={type:"Treemap",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"squarify",values:["squarify","resquarify","binary","dice","slice","slicedice"]},{name:"padding",type:"number",default:0},{name:"paddingInner",type:"number",default:0},{name:"paddingOuter",type:"number",default:0},{name:"paddingTop",type:"number",default:0},{name:"paddingRight",type:"number",default:0},{name:"paddingBottom",type:"number",default:0},{name:"paddingLeft",type:"number",default:0},{name:"ratio",type:"number",default:1.618033988749895},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:fA.length,default:fA}]};pe(pT,to,{layout(){const e=Que();return e.ratio=t=>{const n=e.tile();n.ratio&&e.tile(n.ratio(t))},e.method=t=>{_e(w4,t)?e.tile(w4[t]):te("Unrecognized Treemap layout method: "+t)},e},params:["method","ratio","size","round","padding","paddingInner","paddingOuter","paddingTop","paddingRight","paddingBottom","paddingLeft"],fields:fA});const ale=Object.freeze(Object.defineProperty({__proto__:null,nest:lT,pack:cT,partition:fT,stratify:dT,tree:hT,treelinks:gT,treemap:pT},Symbol.toStringTag,{value:"Module"})),IS=4278190080;function sle(e,t){const n=e.bitmap();return(t||[]).forEach(i=>n.set(e(i.boundary[0]),e(i.boundary[3]))),[n,void 0]}function ole(e,t,n,i,r){const a=e.width,s=e.height,o=i||r,l=nu(a,s).getContext("2d"),f=nu(a,s).getContext("2d"),d=o&&nu(a,s).getContext("2d");n.forEach(R=>q1(l,R,!1)),q1(f,t,!1),o&&q1(d,t,!0);const g=PS(l,a,s),p=PS(f,a,s),y=o&&PS(d,a,s),v=e.bitmap(),b=o&&e.bitmap();let E,_,w,A,$,C,k,M;for(_=0;_<s;++_)for(E=0;E<a;++E)$=_*a+E,C=g[$]&IS,M=p[$]&IS,k=o&&y[$]&IS,(C||k||M)&&(w=e(E),A=e(_),!r&&(C||M)&&v.set(w,A),o&&(C||k)&&b.set(w,A));return[v,b]}function PS(e,t,n){return new Uint32Array(e.getImageData(0,0,t,n).data.buffer)}function q1(e,t,n){if(!t.length)return;const i=t[0].mark.marktype;i==="group"?t.forEach(r=>{r.items.forEach(a=>q1(e,a.items,n))}):lr[i].draw(e,{items:n?t.map(ule):t})}function ule(e){const t=qv(e,{});return t.stroke&&t.strokeOpacity!==0||t.fill&&t.fillOpacity!==0?{...t,strokeOpacity:1,stroke:"#000",fillOpacity:0}:t}const Cs=5,ai=31,pp=32,Po=new Uint32Array(pp+1),Wr=new Uint32Array(pp+1);Wr[0]=0;Po[0]=~Wr[0];for(let e=1;e<=pp;++e)Wr[e]=Wr[e-1]<<1|1,Po[e]=~Wr[e];function lle(e,t){const n=new Uint32Array(~~((e*t+pp)/pp));function i(a,s){n[a]|=s}function r(a,s){n[a]&=s}return{array:n,get:(a,s)=>{const o=s*e+a;return n[o>>>Cs]&1<<(o&ai)},set:(a,s)=>{const o=s*e+a;i(o>>>Cs,1<<(o&ai))},clear:(a,s)=>{const o=s*e+a;r(o>>>Cs,~(1<<(o&ai)))},getRange:(a,s,o,l)=>{let f=l,d,g,p,y;for(;f>=s;--f)if(d=f*e+a,g=f*e+o,p=d>>>Cs,y=g>>>Cs,p===y){if(n[p]&Po[d&ai]&Wr[(g&ai)+1])return!0}else{if(n[p]&Po[d&ai]||n[y]&Wr[(g&ai)+1])return!0;for(let v=p+1;v<y;++v)if(n[v])return!0}return!1},setRange:(a,s,o,l)=>{let f,d,g,p,y;for(;s<=l;++s)if(f=s*e+a,d=s*e+o,g=f>>>Cs,p=d>>>Cs,g===p)i(g,Po[f&ai]&Wr[(d&ai)+1]);else for(i(g,Po[f&ai]),i(p,Wr[(d&ai)+1]),y=g+1;y<p;++y)i(y,4294967295)},clearRange:(a,s,o,l)=>{let f,d,g,p,y;for(;s<=l;++s)if(f=s*e+a,d=s*e+o,g=f>>>Cs,p=d>>>Cs,g===p)r(g,Wr[f&ai]|Po[(d&ai)+1]);else for(r(g,Wr[f&ai]),r(p,Po[(d&ai)+1]),y=g+1;y<p;++y)r(y,0)},outOfBounds:(a,s,o,l)=>a<0||s<0||l>=t||o>=e}}function cle(e,t,n){const i=Math.max(1,Math.sqrt(e*t/1e6)),r=~~((e+2*n+i)/i),a=~~((t+2*n+i)/i),s=o=>~~((o+n)/i);return s.invert=o=>o*i-n,s.bitmap=()=>lle(r,a),s.ratio=i,s.padding=n,s.width=e,s.height=t,s}function fle(e,t,n,i){const r=e.width,a=e.height;return function(s){const o=s.datum.datum.items[i].items,l=o.length,f=s.datum.fontSize,d=ir.width(s.datum,s.datum.text);let g=0,p,y,v,b,E,_,w;for(let A=0;A<l;++A)p=o[A].x,v=o[A].y,y=o[A].x2===void 0?p:o[A].x2,b=o[A].y2===void 0?v:o[A].y2,E=(p+y)/2,_=(v+b)/2,w=Math.abs(y-p+b-v),w>=g&&(g=w,s.x=E,s.y=_);return E=d/2,_=f/2,p=s.x-E,y=s.x+E,v=s.y-_,b=s.y+_,s.align="center",p<0&&y<=r?s.align="left":0<=p&&r<y&&(s.align="right"),s.baseline="middle",v<0&&b<=a?s.baseline="top":0<=v&&a<b&&(s.baseline="bottom"),!0}}function av(e,t,n,i,r,a){let s=n/2;return e-s<0||e+s>r||t-(s=i/2)<0||t+s>a}function Zo(e,t,n,i,r,a,s,o){const l=r*a/(i*2),f=e(t-l),d=e(t+l),g=e(n-(a=a/2)),p=e(n+a);return s.outOfBounds(f,g,d,p)||s.getRange(f,g,d,p)||o&&o.getRange(f,g,d,p)}function dle(e,t,n,i){const r=e.width,a=e.height,s=t[0],o=t[1];function l(f,d,g,p,y){const v=e.invert(f),b=e.invert(d);let E=g,_=a,w;if(!av(v,b,p,y,r,a)&&!Zo(e,v,b,y,p,E,s,o)&&!Zo(e,v,b,y,p,y,s,null)){for(;_-E>=1;)w=(E+_)/2,Zo(e,v,b,y,p,w,s,o)?_=w:E=w;if(E>g)return[v,b,E,!0]}}return function(f){const d=f.datum.datum.items[i].items,g=d.length,p=f.datum.fontSize,y=ir.width(f.datum,f.datum.text);let v=n?p:0,b=!1,E=!1,_=0,w,A,$,C,k,M,R,z,B,U,V,G,q,F,D,I,Y;for(let K=0;K<g;++K){for(w=d[K].x,$=d[K].y,A=d[K].x2===void 0?w:d[K].x2,C=d[K].y2===void 0?$:d[K].y2,w>A&&(Y=w,w=A,A=Y),$>C&&(Y=$,$=C,C=Y),B=e(w),V=e(A),U=~~((B+V)/2),G=e($),F=e(C),q=~~((G+F)/2),R=U;R>=B;--R)for(z=q;z>=G;--z)I=l(R,z,v,y,p),I&&([f.x,f.y,v,b]=I);for(R=U;R<=V;++R)for(z=q;z<=F;++z)I=l(R,z,v,y,p),I&&([f.x,f.y,v,b]=I);!b&&!n&&(D=Math.abs(A-w+C-$),k=(w+A)/2,M=($+C)/2,D>=_&&!av(k,M,y,p,r,a)&&!Zo(e,k,M,p,y,p,s,null)&&(_=D,f.x=k,f.y=M,E=!0))}return b||E?(k=y/2,M=p/2,s.setRange(e(f.x-k),e(f.y-M),e(f.x+k),e(f.y+M)),f.align="center",f.baseline="middle",!0):!1}}const hle=[-1,-1,1,1],gle=[-1,1,-1,1];function ple(e,t,n,i){const r=e.width,a=e.height,s=t[0],o=t[1],l=e.bitmap();return function(f){const d=f.datum.datum.items[i].items,g=d.length,p=f.datum.fontSize,y=ir.width(f.datum,f.datum.text),v=[];let b=n?p:0,E=!1,_=!1,w=0,A,$,C,k,M,R,z,B,U,V,G,q;for(let F=0;F<g;++F){for(A=d[F].x,C=d[F].y,$=d[F].x2===void 0?A:d[F].x2,k=d[F].y2===void 0?C:d[F].y2,v.push([e((A+$)/2),e((C+k)/2)]);v.length;)if([z,B]=v.pop(),!(s.get(z,B)||o.get(z,B)||l.get(z,B))){l.set(z,B);for(let D=0;D<4;++D)M=z+hle[D],R=B+gle[D],l.outOfBounds(M,R,M,R)||v.push([M,R]);if(M=e.invert(z),R=e.invert(B),U=b,V=a,!av(M,R,y,p,r,a)&&!Zo(e,M,R,p,y,U,s,o)&&!Zo(e,M,R,p,y,p,s,null)){for(;V-U>=1;)G=(U+V)/2,Zo(e,M,R,p,y,G,s,o)?V=G:U=G;U>b&&(f.x=M,f.y=R,b=U,E=!0)}}!E&&!n&&(q=Math.abs($-A+k-C),M=(A+$)/2,R=(C+k)/2,q>=w&&!av(M,R,y,p,r,a)&&!Zo(e,M,R,p,y,p,s,null)&&(w=q,f.x=M,f.y=R,_=!0))}return E||_?(M=y/2,R=p/2,s.setRange(e(f.x-M),e(f.y-R),e(f.x+M),e(f.y+R)),f.align="center",f.baseline="middle",!0):!1}}const mle=["right","center","left"],yle=["bottom","middle","top"];function vle(e,t,n,i){const r=e.width,a=e.height,s=t[0],o=t[1],l=i.length;return function(f){const d=f.boundary,g=f.datum.fontSize;if(d[2]<0||d[5]<0||d[0]>r||d[3]>a)return!1;let p=f.textWidth??0,y,v,b,E,_,w,A,$,C,k,M,R,z,B,U;for(let V=0;V<l;++V){if(y=(n[V]&3)-1,v=(n[V]>>>2&3)-1,b=y===0&&v===0||i[V]<0,E=y&&v?Math.SQRT1_2:1,_=i[V]<0?-1:1,w=d[1+y]+i[V]*y*E,M=d[4+v]+_*g*v/2+i[V]*v*E,$=M-g/2,C=M+g/2,R=e(w),B=e($),U=e(C),!p)if(A4(R,R,B,U,s,o,w,w,$,C,d,b))p=ir.width(f.datum,f.datum.text);else continue;if(k=w+_*p*y/2,w=k-p/2,A=k+p/2,R=e(w),z=e(A),A4(R,z,B,U,s,o,w,A,$,C,d,b))return f.x=y?y*_<0?A:w:k,f.y=v?v*_<0?C:$:M,f.align=mle[y*_+1],f.baseline=yle[v*_+1],s.setRange(R,B,z,U),!0}return!1}}function A4(e,t,n,i,r,a,s,o,l,f,d,g){return!(r.outOfBounds(e,n,t,i)||(g&&a||r).getRange(e,n,t,i))}const qS=0,jS=4,HS=8,GS=0,YS=1,XS=2,ble={"top-left":qS+GS,top:qS+YS,"top-right":qS+XS,left:jS+GS,middle:jS+YS,right:jS+XS,"bottom-left":HS+GS,bottom:HS+YS,"bottom-right":HS+XS},xle={naive:fle,"reduced-search":dle,floodfill:ple};function Ele(e,t,n,i,r,a,s,o,l,f,d){if(!e.length)return e;const g=Math.max(i.length,r.length),p=Sle(i,g),y=_le(r,g),v=wle(e[0].datum),b=v==="group"&&e[0].datum.items[l].marktype,E=b==="area",_=Ale(v,b,o,l),w=f===null||f===1/0,A=E&&d==="naive";let $=-1,C=-1;const k=e.map(B=>{const U=w?ir.width(B,B.text):void 0;return $=Math.max($,U),C=Math.max(C,B.fontSize),{datum:B,opacity:0,x:void 0,y:void 0,align:void 0,baseline:void 0,boundary:_(B),textWidth:U}});f=f===null||f===1/0?Math.max($,C)+Math.max(...i):f;const M=cle(t[0],t[1],f);let R;if(!A){n&&k.sort((V,G)=>n(V.datum,G.datum));let B=!1;for(let V=0;V<y.length&&!B;++V)B=y[V]===5||p[V]<0;const U=(v&&s||E)&&e.map(V=>V.datum);R=a.length||U?ole(M,U||[],a,B,E):sle(M,s&&k)}const z=E?xle[d](M,R,s,l):vle(M,R,y,p);return k.forEach(B=>B.opacity=+z(B)),k}function Sle(e,t){const n=new Float64Array(t),i=e.length;for(let r=0;r<i;++r)n[r]=e[r]||0;for(let r=i;r<t;++r)n[r]=n[i-1];return n}function _le(e,t){const n=new Int8Array(t),i=e.length;for(let r=0;r<i;++r)n[r]|=ble[e[r]];for(let r=i;r<t;++r)n[r]=n[i-1];return n}function wle(e){return e&&e.mark&&e.mark.marktype}function Ale(e,t,n,i){const r=a=>[a.x,a.x,a.x,a.y,a.y,a.y];return e?e==="line"||e==="area"?a=>r(a.datum):t==="line"?a=>{const s=a.datum.items[i].items;return r(s.length?s[n==="start"?0:s.length-1]:{x:NaN,y:NaN})}:a=>{const s=a.datum.bounds;return[s.x1,(s.x1+s.x2)/2,s.x2,s.y1,(s.y1+s.y2)/2,s.y2]}:r}const dA=["x","y","opacity","align","baseline"],lP=["top-left","left","bottom-left","top","bottom","top-right","right","bottom-right"];function mT(e){J.call(this,null,e)}mT.Definition={type:"Label",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"sort",type:"compare"},{name:"anchor",type:"string",array:!0,default:lP},{name:"offset",type:"number",array:!0,default:[1]},{name:"padding",type:"number",default:0,null:!0},{name:"lineAnchor",type:"string",values:["start","end"],default:"end"},{name:"markIndex",type:"number",default:0},{name:"avoidBaseMark",type:"boolean",default:!0},{name:"avoidMarks",type:"data",array:!0},{name:"method",type:"string",default:"naive"},{name:"as",type:"string",array:!0,length:dA.length,default:dA}]};pe(mT,J,{transform(e,t){function n(a){const s=e[a];return qe(s)&&t.modified(s.fields)}const i=e.modified();if(!(i||t.changed(t.ADD_REM)||n("sort")))return;(!e.size||e.size.length!==2)&&te("Size parameter should be specified as a [width, height] array.");const r=e.as||dA;return Ele(t.materialize(t.SOURCE).source||[],e.size,e.sort,Ee(e.offset==null?1:e.offset),Ee(e.anchor||lP),e.avoidMarks||[],e.avoidBaseMark!==!1,e.lineAnchor||"end",e.markIndex||0,e.padding===void 0?0:e.padding,e.method||"naive").forEach(a=>{const s=a.datum;s[r[0]]=a.x,s[r[1]]=a.y,s[r[2]]=a.opacity,s[r[3]]=a.align,s[r[4]]=a.baseline}),t.reflow(i).modifies(r)}});const $le=Object.freeze(Object.defineProperty({__proto__:null,label:mT},Symbol.toStringTag,{value:"Module"}));function cP(e,t){var n=[],i=function(d){return d(o)},r,a,s,o,l,f;if(t==null)n.push(e);else for(r={},a=0,s=e.length;a<s;++a)o=e[a],l=t.map(i),f=r[l],f||(r[l]=f=[],f.dims=l,n.push(f)),f.push(o);return n}function yT(e){J.call(this,null,e)}yT.Definition={type:"Loess",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"bandwidth",type:"number",default:.3},{name:"as",type:"string",array:!0}]};pe(yT,J,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const i=t.materialize(t.SOURCE).source,r=cP(i,e.groupby),a=(e.groupby||[]).map(jt),s=a.length,o=e.as||[jt(e.x),jt(e.y)],l=[];r.forEach(f=>{v7(f,e.x,e.y,e.bandwidth||.3).forEach(d=>{const g={};for(let p=0;p<s;++p)g[a[p]]=f.dims[p];g[o[0]]=d[0],g[o[1]]=d[1],l.push(ct(g))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=l}return n}});const hA={constant:K$,linear:J$,log:g7,exp:p7,pow:m7,quad:eC,poly:y7},Cle=(e,t)=>e==="poly"?t:e==="quad"?2:1;function vT(e){J.call(this,null,e)}vT.Definition={type:"Regression",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"string",default:"linear",values:Object.keys(hA)},{name:"order",type:"number",default:3},{name:"extent",type:"number",array:!0,length:2},{name:"params",type:"boolean",default:!1},{name:"as",type:"string",array:!0}]};pe(vT,J,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const i=t.materialize(t.SOURCE).source,r=cP(i,e.groupby),a=(e.groupby||[]).map(jt),s=e.method||"linear",o=e.order==null?3:e.order,l=Cle(s,o),f=e.as||[jt(e.x),jt(e.y)],d=hA[s],g=[];let p=e.extent;_e(hA,s)||te("Invalid regression method: "+s),p!=null&&s==="log"&&p[0]<=0&&(t.dataflow.warn("Ignoring extent with values <= 0 for log regression."),p=null),r.forEach(y=>{if(y.length<=l){t.dataflow.warn("Skipping regression with more parameters than data points.");return}const b=d(y,e.x,e.y,o);if(e.params){g.push(ct({keys:y.dims,coef:b.coef,rSquared:b.rSquared}));return}const E=p||qa(y,e.x),_=w=>{const A={};for(let $=0;$<a.length;++$)A[a[$]]=y.dims[$];A[f[0]]=w[0],A[f[1]]=w[1],g.push(ct(A))};s==="linear"||s==="constant"?E.forEach(w=>_([w,b.predict(w)])):Wv(b.predict,E,25,200).forEach(_)}),this.value&&(n.rem=this.value),this.value=n.add=n.source=g}return n}});const Tle=Object.freeze(Object.defineProperty({__proto__:null,loess:yT,regression:vT},Symbol.toStringTag,{value:"Module"})),qs=11102230246251565e-32,Gn=134217729,Mle=(3+8*qs)*qs;function VS(e,t,n,i,r){let a,s,o,l,f=t[0],d=i[0],g=0,p=0;d>f==d>-f?(a=f,f=t[++g]):(a=d,d=i[++p]);let y=0;if(g<e&&p<n)for(d>f==d>-f?(s=f+a,o=a-(s-f),f=t[++g]):(s=d+a,o=a-(s-d),d=i[++p]),a=s,o!==0&&(r[y++]=o);g<e&&p<n;)d>f==d>-f?(s=a+f,l=s-a,o=a-(s-l)+(f-l),f=t[++g]):(s=a+d,l=s-a,o=a-(s-l)+(d-l),d=i[++p]),a=s,o!==0&&(r[y++]=o);for(;g<e;)s=a+f,l=s-a,o=a-(s-l)+(f-l),f=t[++g],a=s,o!==0&&(r[y++]=o);for(;p<n;)s=a+d,l=s-a,o=a-(s-l)+(d-l),d=i[++p],a=s,o!==0&&(r[y++]=o);return(a!==0||y===0)&&(r[y++]=a),y}function kle(e,t){let n=t[0];for(let i=1;i<e;i++)n+=t[i];return n}function t0(e){return new Float64Array(e)}const Ole=(3+16*qs)*qs,Dle=(2+12*qs)*qs,Rle=(9+64*qs)*qs*qs,cf=t0(4),$4=t0(8),C4=t0(12),T4=t0(16),si=t0(4);function Nle(e,t,n,i,r,a,s){let o,l,f,d,g,p,y,v,b,E,_,w,A,$,C,k,M,R;const z=e-r,B=n-r,U=t-a,V=i-a;$=z*V,p=Gn*z,y=p-(p-z),v=z-y,p=Gn*V,b=p-(p-V),E=V-b,C=v*E-($-y*b-v*b-y*E),k=U*B,p=Gn*U,y=p-(p-U),v=U-y,p=Gn*B,b=p-(p-B),E=B-b,M=v*E-(k-y*b-v*b-y*E),_=C-M,g=C-_,cf[0]=C-(_+g)+(g-M),w=$+_,g=w-$,A=$-(w-g)+(_-g),_=A-k,g=A-_,cf[1]=A-(_+g)+(g-k),R=w+_,g=R-w,cf[2]=w-(R-g)+(_-g),cf[3]=R;let G=kle(4,cf),q=Dle*s;if(G>=q||-G>=q||(g=e-z,o=e-(z+g)+(g-r),g=n-B,f=n-(B+g)+(g-r),g=t-U,l=t-(U+g)+(g-a),g=i-V,d=i-(V+g)+(g-a),o===0&&l===0&&f===0&&d===0)||(q=Rle*s+Mle*Math.abs(G),G+=z*d+V*o-(U*f+B*l),G>=q||-G>=q))return G;$=o*V,p=Gn*o,y=p-(p-o),v=o-y,p=Gn*V,b=p-(p-V),E=V-b,C=v*E-($-y*b-v*b-y*E),k=l*B,p=Gn*l,y=p-(p-l),v=l-y,p=Gn*B,b=p-(p-B),E=B-b,M=v*E-(k-y*b-v*b-y*E),_=C-M,g=C-_,si[0]=C-(_+g)+(g-M),w=$+_,g=w-$,A=$-(w-g)+(_-g),_=A-k,g=A-_,si[1]=A-(_+g)+(g-k),R=w+_,g=R-w,si[2]=w-(R-g)+(_-g),si[3]=R;const F=VS(4,cf,4,si,$4);$=z*d,p=Gn*z,y=p-(p-z),v=z-y,p=Gn*d,b=p-(p-d),E=d-b,C=v*E-($-y*b-v*b-y*E),k=U*f,p=Gn*U,y=p-(p-U),v=U-y,p=Gn*f,b=p-(p-f),E=f-b,M=v*E-(k-y*b-v*b-y*E),_=C-M,g=C-_,si[0]=C-(_+g)+(g-M),w=$+_,g=w-$,A=$-(w-g)+(_-g),_=A-k,g=A-_,si[1]=A-(_+g)+(g-k),R=w+_,g=R-w,si[2]=w-(R-g)+(_-g),si[3]=R;const D=VS(F,$4,4,si,C4);$=o*d,p=Gn*o,y=p-(p-o),v=o-y,p=Gn*d,b=p-(p-d),E=d-b,C=v*E-($-y*b-v*b-y*E),k=l*f,p=Gn*l,y=p-(p-l),v=l-y,p=Gn*f,b=p-(p-f),E=f-b,M=v*E-(k-y*b-v*b-y*E),_=C-M,g=C-_,si[0]=C-(_+g)+(g-M),w=$+_,g=w-$,A=$-(w-g)+(_-g),_=A-k,g=A-_,si[1]=A-(_+g)+(g-k),R=w+_,g=R-w,si[2]=w-(R-g)+(_-g),si[3]=R;const I=VS(D,C4,4,si,T4);return T4[I-1]}function o1(e,t,n,i,r,a){const s=(t-a)*(n-r),o=(e-r)*(i-a),l=s-o,f=Math.abs(s+o);return Math.abs(l)>=Ole*f?l:-Nle(e,t,n,i,r,a,f)}const M4=Math.pow(2,-52),u1=new Uint32Array(512);class sv{static from(t,n=Ble,i=Ile){const r=t.length,a=new Float64Array(r*2);for(let s=0;s<r;s++){const o=t[s];a[2*s]=n(o),a[2*s+1]=i(o)}return new sv(a)}constructor(t){const n=t.length>>1;if(n>0&&typeof t[0]!="number")throw new Error("Expected coords to contain numbers.");this.coords=t;const i=Math.max(2*n-5,0);this._triangles=new Uint32Array(i*3),this._halfedges=new Int32Array(i*3),this._hashSize=Math.ceil(Math.sqrt(n)),this._hullPrev=new Uint32Array(n),this._hullNext=new Uint32Array(n),this._hullTri=new Uint32Array(n),this._hullHash=new Int32Array(this._hashSize),this._ids=new Uint32Array(n),this._dists=new Float64Array(n),this.update()}update(){const{coords:t,_hullPrev:n,_hullNext:i,_hullTri:r,_hullHash:a}=this,s=t.length>>1;let o=1/0,l=1/0,f=-1/0,d=-1/0;for(let z=0;z<s;z++){const B=t[2*z],U=t[2*z+1];B<o&&(o=B),U<l&&(l=U),B>f&&(f=B),U>d&&(d=U),this._ids[z]=z}const g=(o+f)/2,p=(l+d)/2;let y,v,b;for(let z=0,B=1/0;z<s;z++){const U=WS(g,p,t[2*z],t[2*z+1]);U<B&&(y=z,B=U)}const E=t[2*y],_=t[2*y+1];for(let z=0,B=1/0;z<s;z++){if(z===y)continue;const U=WS(E,_,t[2*z],t[2*z+1]);U<B&&U>0&&(v=z,B=U)}let w=t[2*v],A=t[2*v+1],$=1/0;for(let z=0;z<s;z++){if(z===y||z===v)continue;const B=Lle(E,_,w,A,t[2*z],t[2*z+1]);B<$&&(b=z,$=B)}let C=t[2*b],k=t[2*b+1];if($===1/0){for(let U=0;U<s;U++)this._dists[U]=t[2*U]-t[0]||t[2*U+1]-t[1];_f(this._ids,this._dists,0,s-1);const z=new Uint32Array(s);let B=0;for(let U=0,V=-1/0;U<s;U++){const G=this._ids[U],q=this._dists[G];q>V&&(z[B++]=G,V=q)}this.hull=z.subarray(0,B),this.triangles=new Uint32Array(0),this.halfedges=new Uint32Array(0);return}if(o1(E,_,w,A,C,k)<0){const z=v,B=w,U=A;v=b,w=C,A=k,b=z,C=B,k=U}const M=Ule(E,_,w,A,C,k);this._cx=M.x,this._cy=M.y;for(let z=0;z<s;z++)this._dists[z]=WS(t[2*z],t[2*z+1],M.x,M.y);_f(this._ids,this._dists,0,s-1),this._hullStart=y;let R=3;i[y]=n[b]=v,i[v]=n[y]=b,i[b]=n[v]=y,r[y]=0,r[v]=1,r[b]=2,a.fill(-1),a[this._hashKey(E,_)]=y,a[this._hashKey(w,A)]=v,a[this._hashKey(C,k)]=b,this.trianglesLen=0,this._addTriangle(y,v,b,-1,-1,-1);for(let z=0,B,U;z<this._ids.length;z++){const V=this._ids[z],G=t[2*V],q=t[2*V+1];if(z>0&&Math.abs(G-B)<=M4&&Math.abs(q-U)<=M4||(B=G,U=q,V===y||V===v||V===b))continue;let F=0;for(let N=0,W=this._hashKey(G,q);N<this._hashSize&&(F=a[(W+N)%this._hashSize],!(F!==-1&&F!==i[F]));N++);F=n[F];let D=F,I;for(;I=i[D],o1(G,q,t[2*D],t[2*D+1],t[2*I],t[2*I+1])>=0;)if(D=I,D===F){D=-1;break}if(D===-1)continue;let Y=this._addTriangle(D,V,i[D],-1,-1,r[D]);r[V]=this._legalize(Y+2),r[D]=Y,R++;let K=i[D];for(;I=i[K],o1(G,q,t[2*K],t[2*K+1],t[2*I],t[2*I+1])<0;)Y=this._addTriangle(K,V,I,r[V],-1,r[K]),r[V]=this._legalize(Y+2),i[K]=K,R--,K=I;if(D===F)for(;I=n[D],o1(G,q,t[2*I],t[2*I+1],t[2*D],t[2*D+1])<0;)Y=this._addTriangle(I,V,D,-1,r[D],r[I]),this._legalize(Y+2),r[I]=Y,i[D]=D,R--,D=I;this._hullStart=n[V]=D,i[D]=n[K]=V,i[V]=K,a[this._hashKey(G,q)]=V,a[this._hashKey(t[2*D],t[2*D+1])]=D}this.hull=new Uint32Array(R);for(let z=0,B=this._hullStart;z<R;z++)this.hull[z]=B,B=i[B];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(t,n){return Math.floor(zle(t-this._cx,n-this._cy)*this._hashSize)%this._hashSize}_legalize(t){const{_triangles:n,_halfedges:i,coords:r}=this;let a=0,s=0;for(;;){const o=i[t],l=t-t%3;if(s=l+(t+2)%3,o===-1){if(a===0)break;t=u1[--a];continue}const f=o-o%3,d=l+(t+1)%3,g=f+(o+2)%3,p=n[s],y=n[t],v=n[d],b=n[g];if(Fle(r[2*p],r[2*p+1],r[2*y],r[2*y+1],r[2*v],r[2*v+1],r[2*b],r[2*b+1])){n[t]=b,n[o]=p;const _=i[g];if(_===-1){let A=this._hullStart;do{if(this._hullTri[A]===g){this._hullTri[A]=t;break}A=this._hullPrev[A]}while(A!==this._hullStart)}this._link(t,_),this._link(o,i[s]),this._link(s,g);const w=f+(o+1)%3;a<u1.length&&(u1[a++]=w)}else{if(a===0)break;t=u1[--a]}}return s}_link(t,n){this._halfedges[t]=n,n!==-1&&(this._halfedges[n]=t)}_addTriangle(t,n,i,r,a,s){const o=this.trianglesLen;return this._triangles[o]=t,this._triangles[o+1]=n,this._triangles[o+2]=i,this._link(o,r),this._link(o+1,a),this._link(o+2,s),this.trianglesLen+=3,o}}function zle(e,t){const n=e/(Math.abs(e)+Math.abs(t));return(t>0?3-n:1+n)/4}function WS(e,t,n,i){const r=e-n,a=t-i;return r*r+a*a}function Fle(e,t,n,i,r,a,s,o){const l=e-s,f=t-o,d=n-s,g=i-o,p=r-s,y=a-o,v=l*l+f*f,b=d*d+g*g,E=p*p+y*y;return l*(g*E-b*y)-f*(d*E-b*p)+v*(d*y-g*p)<0}function Lle(e,t,n,i,r,a){const s=n-e,o=i-t,l=r-e,f=a-t,d=s*s+o*o,g=l*l+f*f,p=.5/(s*f-o*l),y=(f*d-o*g)*p,v=(s*g-l*d)*p;return y*y+v*v}function Ule(e,t,n,i,r,a){const s=n-e,o=i-t,l=r-e,f=a-t,d=s*s+o*o,g=l*l+f*f,p=.5/(s*f-o*l),y=e+(f*d-o*g)*p,v=t+(s*g-l*d)*p;return{x:y,y:v}}function _f(e,t,n,i){if(i-n<=20)for(let r=n+1;r<=i;r++){const a=e[r],s=t[a];let o=r-1;for(;o>=n&&t[e[o]]>s;)e[o+1]=e[o--];e[o+1]=a}else{const r=n+i>>1;let a=n+1,s=i;ig(e,r,a),t[e[n]]>t[e[i]]&&ig(e,n,i),t[e[a]]>t[e[i]]&&ig(e,a,i),t[e[n]]>t[e[a]]&&ig(e,n,a);const o=e[a],l=t[o];for(;;){do a++;while(t[e[a]]<l);do s--;while(t[e[s]]>l);if(s<a)break;ig(e,a,s)}e[n+1]=e[s],e[s]=o,i-a+1>=s-n?(_f(e,t,a,i),_f(e,t,n,s-1)):(_f(e,t,n,s-1),_f(e,t,a,i))}}function ig(e,t,n){const i=e[t];e[t]=e[n],e[n]=i}function Ble(e){return e[0]}function Ile(e){return e[1]}const k4=1e-6;class El{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(t,n){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(t,n){this._+=`L${this._x1=+t},${this._y1=+n}`}arc(t,n,i){t=+t,n=+n,i=+i;const r=t+i,a=n;if(i<0)throw new Error("negative radius");this._x1===null?this._+=`M${r},${a}`:(Math.abs(this._x1-r)>k4||Math.abs(this._y1-a)>k4)&&(this._+="L"+r+","+a),i&&(this._+=`A${i},${i},0,1,1,${t-i},${n}A${i},${i},0,1,1,${this._x1=r},${this._y1=a}`)}rect(t,n,i,r){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${+i}v${+r}h${-i}Z`}value(){return this._||null}}class gA{constructor(){this._=[]}moveTo(t,n){this._.push([t,n])}closePath(){this._.push(this._[0].slice())}lineTo(t,n){this._.push([t,n])}value(){return this._.length?this._:null}}let Ple=class{constructor(t,[n,i,r,a]=[0,0,960,500]){if(!((r=+r)>=(n=+n))||!((a=+a)>=(i=+i)))throw new Error("invalid bounds");this.delaunay=t,this._circumcenters=new Float64Array(t.points.length*2),this.vectors=new Float64Array(t.points.length*2),this.xmax=r,this.xmin=n,this.ymax=a,this.ymin=i,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points:t,hull:n,triangles:i},vectors:r}=this;let a,s;const o=this.circumcenters=this._circumcenters.subarray(0,i.length/3*2);for(let b=0,E=0,_=i.length,w,A;b<_;b+=3,E+=2){const $=i[b]*2,C=i[b+1]*2,k=i[b+2]*2,M=t[$],R=t[$+1],z=t[C],B=t[C+1],U=t[k],V=t[k+1],G=z-M,q=B-R,F=U-M,D=V-R,I=(G*D-q*F)*2;if(Math.abs(I)<1e-9){if(a===void 0){a=s=0;for(const K of n)a+=t[K*2],s+=t[K*2+1];a/=n.length,s/=n.length}const Y=1e9*Math.sign((a-M)*D-(s-R)*F);w=(M+U)/2-Y*D,A=(R+V)/2+Y*F}else{const Y=1/I,K=G*G+q*q,N=F*F+D*D;w=M+(D*K-q*N)*Y,A=R+(G*N-F*K)*Y}o[E]=w,o[E+1]=A}let l=n[n.length-1],f,d=l*4,g,p=t[2*l],y,v=t[2*l+1];r.fill(0);for(let b=0;b<n.length;++b)l=n[b],f=d,g=p,y=v,d=l*4,p=t[2*l],v=t[2*l+1],r[f+2]=r[d]=y-v,r[f+3]=r[d+1]=p-g}render(t){const n=t==null?t=new El:void 0,{delaunay:{halfedges:i,inedges:r,hull:a},circumcenters:s,vectors:o}=this;if(a.length<=1)return null;for(let d=0,g=i.length;d<g;++d){const p=i[d];if(p<d)continue;const y=Math.floor(d/3)*2,v=Math.floor(p/3)*2,b=s[y],E=s[y+1],_=s[v],w=s[v+1];this._renderSegment(b,E,_,w,t)}let l,f=a[a.length-1];for(let d=0;d<a.length;++d){l=f,f=a[d];const g=Math.floor(r[f]/3)*2,p=s[g],y=s[g+1],v=l*4,b=this._project(p,y,o[v+2],o[v+3]);b&&this._renderSegment(p,y,b[0],b[1],t)}return n&&n.value()}renderBounds(t){const n=t==null?t=new El:void 0;return t.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),n&&n.value()}renderCell(t,n){const i=n==null?n=new El:void 0,r=this._clip(t);if(r===null||!r.length)return;n.moveTo(r[0],r[1]);let a=r.length;for(;r[0]===r[a-2]&&r[1]===r[a-1]&&a>1;)a-=2;for(let s=2;s<a;s+=2)(r[s]!==r[s-2]||r[s+1]!==r[s-1])&&n.lineTo(r[s],r[s+1]);return n.closePath(),i&&i.value()}*cellPolygons(){const{delaunay:{points:t}}=this;for(let n=0,i=t.length/2;n<i;++n){const r=this.cellPolygon(n);r&&(r.index=n,yield r)}}cellPolygon(t){const n=new gA;return this.renderCell(t,n),n.value()}_renderSegment(t,n,i,r,a){let s;const o=this._regioncode(t,n),l=this._regioncode(i,r);o===0&&l===0?(a.moveTo(t,n),a.lineTo(i,r)):(s=this._clipSegment(t,n,i,r,o,l))&&(a.moveTo(s[0],s[1]),a.lineTo(s[2],s[3]))}contains(t,n,i){return n=+n,n!==n||(i=+i,i!==i)?!1:this.delaunay._step(t,n,i)===t}*neighbors(t){const n=this._clip(t);if(n)for(const i of this.delaunay.neighbors(t)){const r=this._clip(i);if(r){e:for(let a=0,s=n.length;a<s;a+=2)for(let o=0,l=r.length;o<l;o+=2)if(n[a]===r[o]&&n[a+1]===r[o+1]&&n[(a+2)%s]===r[(o+l-2)%l]&&n[(a+3)%s]===r[(o+l-1)%l]){yield i;break e}}}}_cell(t){const{circumcenters:n,delaunay:{inedges:i,halfedges:r,triangles:a}}=this,s=i[t];if(s===-1)return null;const o=[];let l=s;do{const f=Math.floor(l/3);if(o.push(n[f*2],n[f*2+1]),l=l%3===2?l-2:l+1,a[l]!==t)break;l=r[l]}while(l!==s&&l!==-1);return o}_clip(t){if(t===0&&this.delaunay.hull.length===1)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const n=this._cell(t);if(n===null)return null;const{vectors:i}=this,r=t*4;return this._simplify(i[r]||i[r+1]?this._clipInfinite(t,n,i[r],i[r+1],i[r+2],i[r+3]):this._clipFinite(t,n))}_clipFinite(t,n){const i=n.length;let r=null,a,s,o=n[i-2],l=n[i-1],f,d=this._regioncode(o,l),g,p=0;for(let y=0;y<i;y+=2)if(a=o,s=l,o=n[y],l=n[y+1],f=d,d=this._regioncode(o,l),f===0&&d===0)g=p,p=0,r?r.push(o,l):r=[o,l];else{let v,b,E,_,w;if(f===0){if((v=this._clipSegment(a,s,o,l,f,d))===null)continue;[b,E,_,w]=v}else{if((v=this._clipSegment(o,l,a,s,d,f))===null)continue;[_,w,b,E]=v,g=p,p=this._edgecode(b,E),g&&p&&this._edge(t,g,p,r,r.length),r?r.push(b,E):r=[b,E]}g=p,p=this._edgecode(_,w),g&&p&&this._edge(t,g,p,r,r.length),r?r.push(_,w):r=[_,w]}if(r)g=p,p=this._edgecode(r[0],r[1]),g&&p&&this._edge(t,g,p,r,r.length);else if(this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return r}_clipSegment(t,n,i,r,a,s){const o=a<s;for(o&&([t,n,i,r,a,s]=[i,r,t,n,s,a]);;){if(a===0&&s===0)return o?[i,r,t,n]:[t,n,i,r];if(a&s)return null;let l,f,d=a||s;d&8?(l=t+(i-t)*(this.ymax-n)/(r-n),f=this.ymax):d&4?(l=t+(i-t)*(this.ymin-n)/(r-n),f=this.ymin):d&2?(f=n+(r-n)*(this.xmax-t)/(i-t),l=this.xmax):(f=n+(r-n)*(this.xmin-t)/(i-t),l=this.xmin),a?(t=l,n=f,a=this._regioncode(t,n)):(i=l,r=f,s=this._regioncode(i,r))}}_clipInfinite(t,n,i,r,a,s){let o=Array.from(n),l;if((l=this._project(o[0],o[1],i,r))&&o.unshift(l[0],l[1]),(l=this._project(o[o.length-2],o[o.length-1],a,s))&&o.push(l[0],l[1]),o=this._clipFinite(t,o))for(let f=0,d=o.length,g,p=this._edgecode(o[d-2],o[d-1]);f<d;f+=2)g=p,p=this._edgecode(o[f],o[f+1]),g&&p&&(f=this._edge(t,g,p,o,f),d=o.length);else this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(o=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return o}_edge(t,n,i,r,a){for(;n!==i;){let s,o;switch(n){case 5:n=4;continue;case 4:n=6,s=this.xmax,o=this.ymin;break;case 6:n=2;continue;case 2:n=10,s=this.xmax,o=this.ymax;break;case 10:n=8;continue;case 8:n=9,s=this.xmin,o=this.ymax;break;case 9:n=1;continue;case 1:n=5,s=this.xmin,o=this.ymin;break}(r[a]!==s||r[a+1]!==o)&&this.contains(t,s,o)&&(r.splice(a,0,s,o),a+=2)}return a}_project(t,n,i,r){let a=1/0,s,o,l;if(r<0){if(n<=this.ymin)return null;(s=(this.ymin-n)/r)<a&&(l=this.ymin,o=t+(a=s)*i)}else if(r>0){if(n>=this.ymax)return null;(s=(this.ymax-n)/r)<a&&(l=this.ymax,o=t+(a=s)*i)}if(i>0){if(t>=this.xmax)return null;(s=(this.xmax-t)/i)<a&&(o=this.xmax,l=n+(a=s)*r)}else if(i<0){if(t<=this.xmin)return null;(s=(this.xmin-t)/i)<a&&(o=this.xmin,l=n+(a=s)*r)}return[o,l]}_edgecode(t,n){return(t===this.xmin?1:t===this.xmax?2:0)|(n===this.ymin?4:n===this.ymax?8:0)}_regioncode(t,n){return(t<this.xmin?1:t>this.xmax?2:0)|(n<this.ymin?4:n>this.ymax?8:0)}_simplify(t){if(t&&t.length>4){for(let n=0;n<t.length;n+=2){const i=(n+2)%t.length,r=(n+4)%t.length;(t[n]===t[i]&&t[i]===t[r]||t[n+1]===t[i+1]&&t[i+1]===t[r+1])&&(t.splice(i,2),n-=2)}t.length||(t=null)}return t}};const qle=2*Math.PI,ff=Math.pow;function jle(e){return e[0]}function Hle(e){return e[1]}function Gle(e){const{triangles:t,coords:n}=e;for(let i=0;i<t.length;i+=3){const r=2*t[i],a=2*t[i+1],s=2*t[i+2];if((n[s]-n[r])*(n[a+1]-n[r+1])-(n[a]-n[r])*(n[s+1]-n[r+1])>1e-10)return!1}return!0}function Yle(e,t,n){return[e+Math.sin(e+t)*n,t+Math.cos(e-t)*n]}class bT{static from(t,n=jle,i=Hle,r){return new bT("length"in t?Xle(t,n,i,r):Float64Array.from(Vle(t,n,i,r)))}constructor(t){this._delaunator=new sv(t),this.inedges=new Int32Array(t.length/2),this._hullIndex=new Int32Array(t.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const t=this._delaunator,n=this.points;if(t.hull&&t.hull.length>2&&Gle(t)){this.collinear=Int32Array.from({length:n.length/2},(p,y)=>y).sort((p,y)=>n[2*p]-n[2*y]||n[2*p+1]-n[2*y+1]);const l=this.collinear[0],f=this.collinear[this.collinear.length-1],d=[n[2*l],n[2*l+1],n[2*f],n[2*f+1]],g=1e-8*Math.hypot(d[3]-d[1],d[2]-d[0]);for(let p=0,y=n.length/2;p<y;++p){const v=Yle(n[2*p],n[2*p+1],g);n[2*p]=v[0],n[2*p+1]=v[1]}this._delaunator=new sv(n)}else delete this.collinear;const i=this.halfedges=this._delaunator.halfedges,r=this.hull=this._delaunator.hull,a=this.triangles=this._delaunator.triangles,s=this.inedges.fill(-1),o=this._hullIndex.fill(-1);for(let l=0,f=i.length;l<f;++l){const d=a[l%3===2?l-2:l+1];(i[l]===-1||s[d]===-1)&&(s[d]=l)}for(let l=0,f=r.length;l<f;++l)o[r[l]]=l;r.length<=2&&r.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=r[0],s[r[0]]=1,r.length===2&&(s[r[1]]=0,this.triangles[1]=r[1],this.triangles[2]=r[1]))}voronoi(t){return new Ple(this,t)}*neighbors(t){const{inedges:n,hull:i,_hullIndex:r,halfedges:a,triangles:s,collinear:o}=this;if(o){const g=o.indexOf(t);g>0&&(yield o[g-1]),g<o.length-1&&(yield o[g+1]);return}const l=n[t];if(l===-1)return;let f=l,d=-1;do{if(yield d=s[f],f=f%3===2?f-2:f+1,s[f]!==t)return;if(f=a[f],f===-1){const g=i[(r[t]+1)%i.length];g!==d&&(yield g);return}}while(f!==l)}find(t,n,i=0){if(t=+t,t!==t||(n=+n,n!==n))return-1;const r=i;let a;for(;(a=this._step(i,t,n))>=0&&a!==i&&a!==r;)i=a;return a}_step(t,n,i){const{inedges:r,hull:a,_hullIndex:s,halfedges:o,triangles:l,points:f}=this;if(r[t]===-1||!f.length)return(t+1)%(f.length>>1);let d=t,g=ff(n-f[t*2],2)+ff(i-f[t*2+1],2);const p=r[t];let y=p;do{let v=l[y];const b=ff(n-f[v*2],2)+ff(i-f[v*2+1],2);if(b<g&&(g=b,d=v),y=y%3===2?y-2:y+1,l[y]!==t)break;if(y=o[y],y===-1){if(y=a[(s[t]+1)%a.length],y!==v&&ff(n-f[y*2],2)+ff(i-f[y*2+1],2)<g)return y;break}}while(y!==p);return d}render(t){const n=t==null?t=new El:void 0,{points:i,halfedges:r,triangles:a}=this;for(let s=0,o=r.length;s<o;++s){const l=r[s];if(l<s)continue;const f=a[s]*2,d=a[l]*2;t.moveTo(i[f],i[f+1]),t.lineTo(i[d],i[d+1])}return this.renderHull(t),n&&n.value()}renderPoints(t,n){n===void 0&&(!t||typeof t.moveTo!="function")&&(n=t,t=null),n=n==null?2:+n;const i=t==null?t=new El:void 0,{points:r}=this;for(let a=0,s=r.length;a<s;a+=2){const o=r[a],l=r[a+1];t.moveTo(o+n,l),t.arc(o,l,n,0,qle)}return i&&i.value()}renderHull(t){const n=t==null?t=new El:void 0,{hull:i,points:r}=this,a=i[0]*2,s=i.length;t.moveTo(r[a],r[a+1]);for(let o=1;o<s;++o){const l=2*i[o];t.lineTo(r[l],r[l+1])}return t.closePath(),n&&n.value()}hullPolygon(){const t=new gA;return this.renderHull(t),t.value()}renderTriangle(t,n){const i=n==null?n=new El:void 0,{points:r,triangles:a}=this,s=a[t*=3]*2,o=a[t+1]*2,l=a[t+2]*2;return n.moveTo(r[s],r[s+1]),n.lineTo(r[o],r[o+1]),n.lineTo(r[l],r[l+1]),n.closePath(),i&&i.value()}*trianglePolygons(){const{triangles:t}=this;for(let n=0,i=t.length/3;n<i;++n)yield this.trianglePolygon(n)}trianglePolygon(t){const n=new gA;return this.renderTriangle(t,n),n.value()}}function Xle(e,t,n,i){const r=e.length,a=new Float64Array(r*2);for(let s=0;s<r;++s){const o=e[s];a[s*2]=t.call(i,o,s,e),a[s*2+1]=n.call(i,o,s,e)}return a}function*Vle(e,t,n,i){let r=0;for(const a of e)yield t.call(i,a,r,e),yield n.call(i,a,r,e),++r}function xT(e){J.call(this,null,e)}xT.Definition={type:"Voronoi",metadata:{modifies:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"size",type:"number",array:!0,length:2},{name:"extent",type:"array",array:!0,length:2,default:[[-1e5,-1e5],[1e5,1e5]],content:{type:"number",array:!0,length:2}},{name:"as",type:"string",default:"path"}]};const Wle=[-1e5,-1e5,1e5,1e5];pe(xT,J,{transform(e,t){const n=e.as||"path",i=t.source;if(!i||!i.length)return t;let r=e.size;r=r?[0,0,r[0],r[1]]:(r=e.extent)?[r[0][0],r[0][1],r[1][0],r[1][1]]:Wle;const a=this.value=bT.from(i,e.x,e.y).voronoi(r);for(let s=0,o=i.length;s<o;++s){const l=a.cellPolygon(s);i[s][n]=l&&!Zle(l)?Qle(l):null}return t.reflow(e.modified()).modifies(n)}});function Qle(e){const t=e[0][0],n=e[0][1];let i=e.length-1;for(;e[i][0]===t&&e[i][1]===n;--i);return"M"+e.slice(0,i+1).join("L")+"Z"}function Zle(e){return e.length===2&&e[0][0]===e[1][0]&&e[0][1]===e[1][1]}const Kle=Object.freeze(Object.defineProperty({__proto__:null,voronoi:xT},Symbol.toStringTag,{value:"Module"}));var QS=Math.PI/180,Ng=64,j1=2048;function Jle(){var e=[256,256],t,n,i,r,a,s,o,l=fP,f=[],d=Math.random,g={};g.layout=function(){for(var v=p(nu()),b=ace((e[0]>>5)*e[1]),E=null,_=f.length,w=-1,A=[],$=f.map(k=>({text:t(k),font:n(k),style:r(k),weight:a(k),rotate:s(k),size:~~(i(k)+1e-14),padding:o(k),xoff:0,yoff:0,x1:0,y1:0,x0:0,y0:0,hasText:!1,sprite:null,datum:k})).sort((k,M)=>M.size-k.size);++w<_;){var C=$[w];C.x=e[0]*(d()+.5)>>1,C.y=e[1]*(d()+.5)>>1,ece(v,C,$,w),C.hasText&&y(b,C,E)&&(A.push(C),E?nce(E,C):E=[{x:C.x+C.x0,y:C.y+C.y0},{x:C.x+C.x1,y:C.y+C.y1}],C.x-=e[0]>>1,C.y-=e[1]>>1)}return A};function p(v){v.width=v.height=1;var b=Math.sqrt(v.getContext("2d").getImageData(0,0,1,1).data.length>>2);v.width=(Ng<<5)/b,v.height=j1/b;var E=v.getContext("2d");return E.fillStyle=E.strokeStyle="red",E.textAlign="center",{context:E,ratio:b}}function y(v,b,E){for(var _=b.x,w=b.y,A=Math.hypot(e[0],e[1]),$=l(e),C=d()<.5?1:-1,k=-C,M,R,z;(M=$(k+=C))&&(R=~~M[0],z=~~M[1],!(Math.min(Math.abs(R),Math.abs(z))>=A));)if(b.x=_+R,b.y=w+z,!(b.x+b.x0<0||b.y+b.y0<0||b.x+b.x1>e[0]||b.y+b.y1>e[1])&&(!E||!tce(b,v,e[0]))&&(!E||ice(b,E))){for(var B=b.sprite,U=b.width>>5,V=e[0]>>5,G=b.x-(U<<4),q=G&127,F=32-q,D=b.y1-b.y0,I=(b.y+b.y0)*V+(G>>5),Y,K=0;K<D;K++){Y=0;for(var N=0;N<=U;N++)v[I+N]|=Y<<F|(N<U?(Y=B[K*U+N])>>>q:0);I+=V}return b.sprite=null,!0}return!1}return g.words=function(v){return arguments.length?(f=v,g):f},g.size=function(v){return arguments.length?(e=[+v[0],+v[1]],g):e},g.font=function(v){return arguments.length?(n=el(v),g):n},g.fontStyle=function(v){return arguments.length?(r=el(v),g):r},g.fontWeight=function(v){return arguments.length?(a=el(v),g):a},g.rotate=function(v){return arguments.length?(s=el(v),g):s},g.text=function(v){return arguments.length?(t=el(v),g):t},g.spiral=function(v){return arguments.length?(l=sce[v]||v,g):l},g.fontSize=function(v){return arguments.length?(i=el(v),g):i},g.padding=function(v){return arguments.length?(o=el(v),g):o},g.random=function(v){return arguments.length?(d=v,g):d},g}function ece(e,t,n,i){if(!t.sprite){var r=e.context,a=e.ratio;r.clearRect(0,0,(Ng<<5)/a,j1/a);var s=0,o=0,l=0,f=n.length,d,g,p,y,v;for(--i;++i<f;){if(t=n[i],r.save(),r.font=t.style+" "+t.weight+" "+~~((t.size+1)/a)+"px "+t.font,d=r.measureText(t.text+"m").width*a,p=t.size<<1,t.rotate){var b=Math.sin(t.rotate*QS),E=Math.cos(t.rotate*QS),_=d*E,w=d*b,A=p*E,$=p*b;d=Math.max(Math.abs(_+$),Math.abs(_-$))+31>>5<<5,p=~~Math.max(Math.abs(w+A),Math.abs(w-A))}else d=d+31>>5<<5;if(p>l&&(l=p),s+d>=Ng<<5&&(s=0,o+=l,l=0),o+p>=j1)break;r.translate((s+(d>>1))/a,(o+(p>>1))/a),t.rotate&&r.rotate(t.rotate*QS),r.fillText(t.text,0,0),t.padding&&(r.lineWidth=2*t.padding,r.strokeText(t.text,0,0)),r.restore(),t.width=d,t.height=p,t.xoff=s,t.yoff=o,t.x1=d>>1,t.y1=p>>1,t.x0=-t.x1,t.y0=-t.y1,t.hasText=!0,s+=d}for(var C=r.getImageData(0,0,(Ng<<5)/a,j1/a).data,k=[];--i>=0;)if(t=n[i],!!t.hasText){for(d=t.width,g=d>>5,p=t.y1-t.y0,y=0;y<p*g;y++)k[y]=0;if(s=t.xoff,s==null)return;o=t.yoff;var M=0,R=-1;for(v=0;v<p;v++){for(y=0;y<d;y++){var z=g*v+(y>>5),B=C[(o+v)*(Ng<<5)+(s+y)<<2]?1<<31-y%32:0;k[z]|=B,M|=B}M?R=v:(t.y0++,p--,v--,o++)}t.y1=t.y0+R,t.sprite=k.slice(0,(t.y1-t.y0)*g)}}}function tce(e,t,n){n>>=5;for(var i=e.sprite,r=e.width>>5,a=e.x-(r<<4),s=a&127,o=32-s,l=e.y1-e.y0,f=(e.y+e.y0)*n+(a>>5),d,g=0;g<l;g++){d=0;for(var p=0;p<=r;p++)if((d<<o|(p<r?(d=i[g*r+p])>>>s:0))&t[f+p])return!0;f+=n}return!1}function nce(e,t){var n=e[0],i=e[1];t.x+t.x0<n.x&&(n.x=t.x+t.x0),t.y+t.y0<n.y&&(n.y=t.y+t.y0),t.x+t.x1>i.x&&(i.x=t.x+t.x1),t.y+t.y1>i.y&&(i.y=t.y+t.y1)}function ice(e,t){return e.x+e.x1>t[0].x&&e.x+e.x0<t[1].x&&e.y+e.y1>t[0].y&&e.y+e.y0<t[1].y}function fP(e){var t=e[0]/e[1];return function(n){return[t*(n*=.1)*Math.cos(n),n*Math.sin(n)]}}function rce(e){var t=4,n=t*e[0]/e[1],i=0,r=0;return function(a){var s=a<0?-1:1;switch(Math.sqrt(1+4*s*a)-s&3){case 0:i+=n;break;case 1:r+=t;break;case 2:i-=n;break;default:r-=t;break}return[i,r]}}function ace(e){for(var t=[],n=-1;++n<e;)t[n]=0;return t}function el(e){return typeof e=="function"?e:function(){return e}}var sce={archimedean:fP,rectangular:rce};const dP=["x","y","font","fontSize","fontStyle","fontWeight","angle"],oce=["text","font","rotate","fontSize","fontStyle","fontWeight"];function ET(e){J.call(this,Jle(),e)}ET.Definition={type:"Wordcloud",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2},{name:"font",type:"string",expr:!0,default:"sans-serif"},{name:"fontStyle",type:"string",expr:!0,default:"normal"},{name:"fontWeight",type:"string",expr:!0,default:"normal"},{name:"fontSize",type:"number",expr:!0,default:14},{name:"fontSizeRange",type:"number",array:"nullable",default:[10,50]},{name:"rotate",type:"number",expr:!0,default:0},{name:"text",type:"field"},{name:"spiral",type:"string",values:["archimedean","rectangular"]},{name:"padding",type:"number",expr:!0},{name:"as",type:"string",array:!0,length:7,default:dP}]};pe(ET,J,{transform(e,t){e.size&&!(e.size[0]&&e.size[1])&&te("Wordcloud size dimensions must be non-zero.");function n(v){const b=e[v];return qe(b)&&t.modified(b.fields)}const i=e.modified();if(!(i||t.changed(t.ADD_REM)||oce.some(n)))return;const r=t.materialize(t.SOURCE).source,a=this.value,s=e.as||dP;let o=e.fontSize||14,l;if(qe(o)?l=e.fontSizeRange:o=ii(o),l){const v=o,b=ut("sqrt")().domain(qa(r,v)).range(l);o=E=>b(v(E))}r.forEach(v=>{v[s[0]]=NaN,v[s[1]]=NaN,v[s[3]]=0});const f=a.words(r).text(e.text).size(e.size||[500,500]).padding(e.padding||1).spiral(e.spiral||"archimedean").rotate(e.rotate||0).font(e.font||"sans-serif").fontStyle(e.fontStyle||"normal").fontWeight(e.fontWeight||"normal").fontSize(o).random(Rr).layout(),d=a.size(),g=d[0]>>1,p=d[1]>>1,y=f.length;for(let v=0,b,E;v<y;++v)b=f[v],E=b.datum,E[s[0]]=b.x+g,E[s[1]]=b.y+p,E[s[2]]=b.font,E[s[3]]=b.size,E[s[4]]=b.style,E[s[5]]=b.weight,E[s[6]]=b.rotate;return t.reflow(i).modifies(s)}});const uce=Object.freeze(Object.defineProperty({__proto__:null,wordcloud:ET},Symbol.toStringTag,{value:"Module"})),lce=e=>new Uint8Array(e),cce=e=>new Uint16Array(e),Xg=e=>new Uint32Array(e);function fce(){let e=8,t=[],n=Xg(0),i=l1(0,e),r=l1(0,e);return{data:()=>t,seen:()=>n=dce(n,t.length),add(a){for(let s=0,o=t.length,l=a.length,f;s<l;++s)f=a[s],f._index=o++,t.push(f)},remove(a,s){const o=t.length,l=Array(o-a),f=t;let d,g,p;for(g=0;!s[g]&&g<o;++g)l[g]=t[g],f[g]=g;for(p=g;g<o;++g)d=t[g],s[g]?f[g]=-1:(f[g]=p,i[p]=i[g],r[p]=r[g],l[p]=d,d._index=p++),i[g]=0;return t=l,f},size:()=>t.length,curr:()=>i,prev:()=>r,reset:a=>r[a]=i[a],all:()=>e<257?255:e<65537?65535:4294967295,set(a,s){i[a]|=s},clear(a,s){i[a]&=~s},resize(a,s){const o=i.length;(a>o||s>e)&&(e=Math.max(s,e),i=l1(a,e,i),r=l1(a,e))}}}function dce(e,t,n){return e.length>=t?e:(n=n||new e.constructor(t),n.set(e),n)}function l1(e,t,n){const i=(t<257?lce:t<65537?cce:Xg)(e);return n&&i.set(n),i}function O4(e,t,n){const i=1<<t;return{one:i,zero:~i,range:n.slice(),bisect:e.bisect,index:e.index,size:e.size,onAdd(r,a){const s=this,o=s.bisect(s.range,r.value),l=r.index,f=o[0],d=o[1],g=l.length;let p;for(p=0;p<f;++p)a[l[p]]|=i;for(p=d;p<g;++p)a[l[p]]|=i;return s}}}function D4(){let e=Xg(0),t=[],n=0;function i(o,l,f){if(!l.length)return[];const d=n,g=l.length,p=Xg(g);let y=Array(g),v,b,E;for(E=0;E<g;++E)y[E]=o(l[E]),p[E]=E;if(y=hce(y,p),d)v=t,b=e,t=Array(d+g),e=Xg(d+g),gce(f,v,b,d,y,p,g,t,e);else{if(f>0)for(E=0;E<g;++E)p[E]+=f;t=y,e=p}return n=d+g,{index:p,value:y}}function r(o,l){const f=n;let d,g,p;for(g=0;!l[e[g]]&&g<f;++g);for(p=g;g<f;++g)l[d=e[g]]||(e[p]=d,t[p]=t[g],++p);n=f-o}function a(o){for(let l=0,f=n;l<f;++l)e[l]=o[e[l]]}function s(o,l){let f;return l?f=l.length:(l=t,f=n),[vW(l,o[0],0,f),au(l,o[1],0,f)]}return{insert:i,remove:r,bisect:s,reindex:a,index:()=>e,size:()=>n}}function hce(e,t){return e.sort.call(t,(n,i)=>{const r=e[n],a=e[i];return r<a?-1:r>a?1:0}),EW(e,t)}function gce(e,t,n,i,r,a,s,o,l){let f=0,d=0,g;for(g=0;f<i&&d<s;++g)t[f]<r[d]?(o[g]=t[f],l[g]=n[f++]):(o[g]=r[d],l[g]=a[d++]+e);for(;f<i;++f,++g)o[g]=t[f],l[g]=n[f];for(;d<s;++d,++g)o[g]=r[d],l[g]=a[d]+e}function ST(e){J.call(this,fce(),e),this._indices=null,this._dims=null}ST.Definition={type:"CrossFilter",metadata:{},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"query",type:"array",array:!0,required:!0,content:{type:"number",array:!0,length:2}}]};pe(ST,J,{transform(e,t){if(this._dims){var n=e.modified("fields")||e.fields.some(i=>t.modified(i.fields));return n?this.reinit(e,t):this.eval(e,t)}else return this.init(e,t)},init(e,t){const n=e.fields,i=e.query,r=this._indices={},a=this._dims=[],s=i.length;let o=0,l,f;for(;o<s;++o)l=n[o].fname,f=r[l]||(r[l]=D4()),a.push(O4(f,o,i[o]));return this.eval(e,t)},reinit(e,t){const n=t.materialize().fork(),i=e.fields,r=e.query,a=this._indices,s=this._dims,o=this.value,l=o.curr(),f=o.prev(),d=o.all(),g=n.rem=n.add,p=n.mod,y=r.length,v={};let b,E,_,w,A,$,C,k,M;if(f.set(l),t.rem.length&&(A=this.remove(e,t,n)),t.add.length&&o.add(t.add),t.mod.length)for($={},w=t.mod,C=0,k=w.length;C<k;++C)$[w[C]._index]=1;for(C=0;C<y;++C)M=i[C],(!s[C]||e.modified("fields",C)||t.modified(M.fields))&&(_=M.fname,(b=v[_])||(a[_]=E=D4(),v[_]=b=E.insert(M,t.source,0)),s[C]=O4(E,C,r[C]).onAdd(b,l));for(C=0,k=o.data().length;C<k;++C)A[C]||(f[C]!==l[C]?g.push(C):$[C]&&l[C]!==d&&p.push(C));return o.mask=(1<<y)-1,n},eval(e,t){const n=t.materialize().fork(),i=this._dims.length;let r=0;return t.rem.length&&(this.remove(e,t,n),r|=(1<<i)-1),e.modified("query")&&!e.modified("fields")&&(r|=this.update(e,t,n)),t.add.length&&(this.insert(e,t,n),r|=(1<<i)-1),t.mod.length&&(this.modify(t,n),r|=(1<<i)-1),this.value.mask=r,n},insert(e,t,n){const i=t.add,r=this.value,a=this._dims,s=this._indices,o=e.fields,l={},f=n.add,d=r.size()+i.length,g=a.length;let p=r.size(),y,v,b;r.resize(d,g),r.add(i);const E=r.curr(),_=r.prev(),w=r.all();for(y=0;y<g;++y)v=o[y].fname,b=l[v]||(l[v]=s[v].insert(o[y],i,p)),a[y].onAdd(b,E);for(;p<d;++p)_[p]=w,E[p]!==w&&f.push(p)},modify(e,t){const n=t.mod,i=this.value,r=i.curr(),a=i.all(),s=e.mod;let o,l,f;for(o=0,l=s.length;o<l;++o)f=s[o]._index,r[f]!==a&&n.push(f)},remove(e,t,n){const i=this._indices,r=this.value,a=r.curr(),s=r.prev(),o=r.all(),l={},f=n.rem,d=t.rem;let g,p,y,v;for(g=0,p=d.length;g<p;++g)y=d[g]._index,l[y]=1,s[y]=v=a[y],a[y]=o,v!==o&&f.push(y);for(y in i)i[y].remove(p,l);return this.reindex(t,p,l),l},reindex(e,t,n){const i=this._indices,r=this.value;e.runAfter(()=>{const a=r.remove(t,n);for(const s in i)i[s].reindex(a)})},update(e,t,n){const i=this._dims,r=e.query,a=t.stamp,s=i.length;let o=0,l,f;for(n.filters=0,f=0;f<s;++f)e.modified("query",f)&&(l=f,++o);if(o===1)o=i[l].one,this.incrementOne(i[l],r[l],n.add,n.rem);else for(f=0,o=0;f<s;++f)e.modified("query",f)&&(o|=i[f].one,this.incrementAll(i[f],r[f],a,n.add),n.rem=n.add);return o},incrementAll(e,t,n,i){const r=this.value,a=r.seen(),s=r.curr(),o=r.prev(),l=e.index(),f=e.bisect(e.range),d=e.bisect(t),g=d[0],p=d[1],y=f[0],v=f[1],b=e.one;let E,_,w;if(g<y)for(E=g,_=Math.min(y,p);E<_;++E)w=l[E],a[w]!==n&&(o[w]=s[w],a[w]=n,i.push(w)),s[w]^=b;else if(g>y)for(E=y,_=Math.min(g,v);E<_;++E)w=l[E],a[w]!==n&&(o[w]=s[w],a[w]=n,i.push(w)),s[w]^=b;if(p>v)for(E=Math.max(g,v),_=p;E<_;++E)w=l[E],a[w]!==n&&(o[w]=s[w],a[w]=n,i.push(w)),s[w]^=b;else if(p<v)for(E=Math.max(y,p),_=v;E<_;++E)w=l[E],a[w]!==n&&(o[w]=s[w],a[w]=n,i.push(w)),s[w]^=b;e.range=t.slice()},incrementOne(e,t,n,i){const r=this.value,a=r.curr(),s=e.index(),o=e.bisect(e.range),l=e.bisect(t),f=l[0],d=l[1],g=o[0],p=o[1],y=e.one;let v,b,E;if(f<g)for(v=f,b=Math.min(g,d);v<b;++v)E=s[v],a[E]^=y,n.push(E);else if(f>g)for(v=g,b=Math.min(f,p);v<b;++v)E=s[v],a[E]^=y,i.push(E);if(d>p)for(v=Math.max(f,p),b=d;v<b;++v)E=s[v],a[E]^=y,n.push(E);else if(d<p)for(v=Math.max(g,d),b=p;v<b;++v)E=s[v],a[E]^=y,i.push(E);e.range=t.slice()}});function _T(e){J.call(this,null,e)}_T.Definition={type:"ResolveFilter",metadata:{},params:[{name:"ignore",type:"number",required:!0,description:"A bit mask indicating which filters to ignore."},{name:"filter",type:"object",required:!0,description:"Per-tuple filter bitmaps from a CrossFilter transform."}]};pe(_T,J,{transform(e,t){const n=~(e.ignore||0),i=e.filter,r=i.mask;if((r&n)===0)return t.StopPropagation;const a=t.fork(t.ALL),s=i.data(),o=i.curr(),l=i.prev(),f=d=>o[d]&n?null:s[d];return a.filter(a.MOD,f),r&r-1?(a.filter(a.ADD,d=>{const g=o[d]&n;return!g&&g^l[d]&n?s[d]:null}),a.filter(a.REM,d=>{const g=o[d]&n;return g&&!(g^(g^l[d]&n))?s[d]:null})):(a.filter(a.ADD,f),a.filter(a.REM,d=>(o[d]&n)===r?s[d]:null)),a.filter(a.SOURCE,d=>f(d._index))}});const pce=Object.freeze(Object.defineProperty({__proto__:null,crossfilter:ST,resolvefilter:_T},Symbol.toStringTag,{value:"Module"})),mce="RawCode",Il="Literal",yce="Property",vce="Identifier",bce="ArrayExpression",xce="BinaryExpression",hP="CallExpression",Ece="ConditionalExpression",Sce="LogicalExpression",_ce="MemberExpression",wce="ObjectExpression",Ace="UnaryExpression";function fa(e){this.type=e}fa.prototype.visit=function(e){let t,n,i;if(e(this))return 1;for(t=$ce(this),n=0,i=t.length;n<i;++n)if(t[n].visit(e))return 1};function $ce(e){switch(e.type){case bce:return e.elements;case xce:case Sce:return[e.left,e.right];case hP:return[e.callee].concat(e.arguments);case Ece:return[e.test,e.consequent,e.alternate];case _ce:return[e.object,e.property];case wce:return e.properties;case yce:return[e.key,e.value];case Ace:return[e.argument];case vce:case Il:case mce:default:return[]}}var ns,Ae,ee,ei,mt,Tb=1,n0=2,Pl=3,Au=4,Mb=5,sc=6,Ti=7,i0=8,Cce=9;ns={};ns[Tb]="Boolean";ns[n0]="<end>";ns[Pl]="Identifier";ns[Au]="Keyword";ns[Mb]="Null";ns[sc]="Numeric";ns[Ti]="Punctuator";ns[i0]="String";ns[Cce]="RegularExpression";var Tce="ArrayExpression",Mce="BinaryExpression",kce="CallExpression",Oce="ConditionalExpression",gP="Identifier",Dce="Literal",Rce="LogicalExpression",Nce="MemberExpression",zce="ObjectExpression",Fce="Property",Lce="UnaryExpression",Sn="Unexpected token %0",Uce="Unexpected number",Bce="Unexpected string",Ice="Unexpected identifier",Pce="Unexpected reserved word",qce="Unexpected end of input",pA="Invalid regular expression",ZS="Invalid regular expression: missing /",pP="Octal literals are not allowed in strict mode.",jce="Duplicate data property in object literal not allowed in strict mode",Ln="ILLEGAL",mp="Disabled.",Hce=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),Gce=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B2\\u08E4-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58\\u0C59\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D60-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA69D\\uA69F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2D\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]");function kb(e,t){if(!e)throw new Error("ASSERT: "+t)}function Os(e){return e>=48&&e<=57}function wT(e){return"0123456789abcdefABCDEF".includes(e)}function Vg(e){return"01234567".includes(e)}function Yce(e){return e===32||e===9||e===11||e===12||e===160||e>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].includes(e)}function yp(e){return e===10||e===13||e===8232||e===8233}function r0(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e===92||e>=128&&Hce.test(String.fromCharCode(e))}function ov(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57||e===92||e>=128&&Gce.test(String.fromCharCode(e))}const Xce={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1};function mP(){for(;ee<ei;){const e=Ae.charCodeAt(ee);if(Yce(e)||yp(e))++ee;else break}}function mA(e){var t,n,i,r=0;for(n=e==="u"?4:2,t=0;t<n;++t)ee<ei&&wT(Ae[ee])?(i=Ae[ee++],r=r*16+"0123456789abcdef".indexOf(i.toLowerCase())):at({},Sn,Ln);return String.fromCharCode(r)}function Vce(){var e,t,n,i;for(e=Ae[ee],t=0,e==="}"&&at({},Sn,Ln);ee<ei&&(e=Ae[ee++],!!wT(e));)t=t*16+"0123456789abcdef".indexOf(e.toLowerCase());return(t>1114111||e!=="}")&&at({},Sn,Ln),t<=65535?String.fromCharCode(t):(n=(t-65536>>10)+55296,i=(t-65536&1023)+56320,String.fromCharCode(n,i))}function yP(){var e,t;for(e=Ae.charCodeAt(ee++),t=String.fromCharCode(e),e===92&&(Ae.charCodeAt(ee)!==117&&at({},Sn,Ln),++ee,e=mA("u"),(!e||e==="\\"||!r0(e.charCodeAt(0)))&&at({},Sn,Ln),t=e);ee<ei&&(e=Ae.charCodeAt(ee),!!ov(e));)++ee,t+=String.fromCharCode(e),e===92&&(t=t.substr(0,t.length-1),Ae.charCodeAt(ee)!==117&&at({},Sn,Ln),++ee,e=mA("u"),(!e||e==="\\"||!ov(e.charCodeAt(0)))&&at({},Sn,Ln),t+=e);return t}function Wce(){var e,t;for(e=ee++;ee<ei;){if(t=Ae.charCodeAt(ee),t===92)return ee=e,yP();if(ov(t))++ee;else break}return Ae.slice(e,ee)}function Qce(){var e,t,n;return e=ee,t=Ae.charCodeAt(ee)===92?yP():Wce(),t.length===1?n=Pl:Xce.hasOwnProperty(t)?n=Au:t==="null"?n=Mb:t==="true"||t==="false"?n=Tb:n=Pl,{type:n,value:t,start:e,end:ee}}function KS(){var e=ee,t=Ae.charCodeAt(ee),n,i=Ae[ee],r,a,s;switch(t){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++ee,{type:Ti,value:String.fromCharCode(t),start:e,end:ee};default:if(n=Ae.charCodeAt(ee+1),n===61)switch(t){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return ee+=2,{type:Ti,value:String.fromCharCode(t)+String.fromCharCode(n),start:e,end:ee};case 33:case 61:return ee+=2,Ae.charCodeAt(ee)===61&&++ee,{type:Ti,value:Ae.slice(e,ee),start:e,end:ee}}}if(s=Ae.substr(ee,4),s===">>>=")return ee+=4,{type:Ti,value:s,start:e,end:ee};if(a=s.substr(0,3),a===">>>"||a==="<<="||a===">>=")return ee+=3,{type:Ti,value:a,start:e,end:ee};if(r=a.substr(0,2),i===r[1]&&"+-<>&|".includes(i)||r==="=>")return ee+=2,{type:Ti,value:r,start:e,end:ee};if(r==="//"&&at({},Sn,Ln),"<>=!+-*%&|^/".includes(i))return++ee,{type:Ti,value:i,start:e,end:ee};at({},Sn,Ln)}function Zce(e){let t="";for(;ee<ei&&wT(Ae[ee]);)t+=Ae[ee++];return t.length===0&&at({},Sn,Ln),r0(Ae.charCodeAt(ee))&&at({},Sn,Ln),{type:sc,value:parseInt("0x"+t,16),start:e,end:ee}}function Kce(e){let t="0"+Ae[ee++];for(;ee<ei&&Vg(Ae[ee]);)t+=Ae[ee++];return(r0(Ae.charCodeAt(ee))||Os(Ae.charCodeAt(ee)))&&at({},Sn,Ln),{type:sc,value:parseInt(t,8),octal:!0,start:e,end:ee}}function R4(){var e,t,n;if(n=Ae[ee],kb(Os(n.charCodeAt(0))||n===".","Numeric literal must start with a decimal digit or a decimal point"),t=ee,e="",n!=="."){if(e=Ae[ee++],n=Ae[ee],e==="0"){if(n==="x"||n==="X")return++ee,Zce(t);if(Vg(n))return Kce(t);n&&Os(n.charCodeAt(0))&&at({},Sn,Ln)}for(;Os(Ae.charCodeAt(ee));)e+=Ae[ee++];n=Ae[ee]}if(n==="."){for(e+=Ae[ee++];Os(Ae.charCodeAt(ee));)e+=Ae[ee++];n=Ae[ee]}if(n==="e"||n==="E")if(e+=Ae[ee++],n=Ae[ee],(n==="+"||n==="-")&&(e+=Ae[ee++]),Os(Ae.charCodeAt(ee)))for(;Os(Ae.charCodeAt(ee));)e+=Ae[ee++];else at({},Sn,Ln);return r0(Ae.charCodeAt(ee))&&at({},Sn,Ln),{type:sc,value:parseFloat(e),start:t,end:ee}}function Jce(){var e="",t,n,i,r,a=!1;for(t=Ae[ee],kb(t==="'"||t==='"',"String literal must starts with a quote"),n=ee,++ee;ee<ei;)if(i=Ae[ee++],i===t){t="";break}else if(i==="\\")if(i=Ae[ee++],!i||!yp(i.charCodeAt(0)))switch(i){case"u":case"x":Ae[ee]==="{"?(++ee,e+=Vce()):e+=mA(i);break;case"n":e+=`
`;break;case"r":e+="\r";break;case"t":e+="	";break;case"b":e+="\b";break;case"f":e+="\f";break;case"v":e+="\v";break;default:Vg(i)?(r="01234567".indexOf(i),r!==0&&(a=!0),ee<ei&&Vg(Ae[ee])&&(a=!0,r=r*8+"01234567".indexOf(Ae[ee++]),"0123".includes(i)&&ee<ei&&Vg(Ae[ee])&&(r=r*8+"01234567".indexOf(Ae[ee++]))),e+=String.fromCharCode(r)):e+=i;break}else i==="\r"&&Ae[ee]===`
`&&++ee;else{if(yp(i.charCodeAt(0)))break;e+=i}return t!==""&&at({},Sn,Ln),{type:i0,value:e,octal:a,start:n,end:ee}}function efe(e,t){let n=e;t.includes("u")&&(n=n.replace(/\\u\{([0-9a-fA-F]+)\}/g,(i,r)=>{if(parseInt(r,16)<=1114111)return"x";at({},pA)}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{new RegExp(n)}catch{at({},pA)}try{return new RegExp(e,t)}catch{return null}}function tfe(){var e,t,n,i,r;for(e=Ae[ee],kb(e==="/","Regular expression literal must start with a slash"),t=Ae[ee++],n=!1,i=!1;ee<ei;)if(e=Ae[ee++],t+=e,e==="\\")e=Ae[ee++],yp(e.charCodeAt(0))&&at({},ZS),t+=e;else if(yp(e.charCodeAt(0)))at({},ZS);else if(n)e==="]"&&(n=!1);else if(e==="/"){i=!0;break}else e==="["&&(n=!0);return i||at({},ZS),r=t.substr(1,t.length-2),{value:r,literal:t}}function nfe(){var e,t,n;for(t="",n="";ee<ei&&(e=Ae[ee],!!ov(e.charCodeAt(0)));)++ee,e==="\\"&&ee<ei?at({},Sn,Ln):(n+=e,t+=e);return n.search(/[^gimuy]/g)>=0&&at({},pA,n),{value:n,literal:t}}function ife(){var e,t,n,i;return mt=null,mP(),e=ee,t=tfe(),n=nfe(),i=efe(t.value,n.value),{literal:t.literal+n.literal,value:i,regex:{pattern:t.value,flags:n.value},start:e,end:ee}}function rfe(e){return e.type===Pl||e.type===Au||e.type===Tb||e.type===Mb}function vP(){if(mP(),ee>=ei)return{type:n0,start:ee,end:ee};const e=Ae.charCodeAt(ee);return r0(e)?Qce():e===40||e===41||e===59?KS():e===39||e===34?Jce():e===46?Os(Ae.charCodeAt(ee+1))?R4():KS():Os(e)?R4():KS()}function ki(){const e=mt;return ee=e.end,mt=vP(),ee=e.end,e}function bP(){const e=ee;mt=vP(),ee=e}function afe(e){const t=new fa(Tce);return t.elements=e,t}function N4(e,t,n){const i=new fa(e==="||"||e==="&&"?Rce:Mce);return i.operator=e,i.left=t,i.right=n,i}function sfe(e,t){const n=new fa(kce);return n.callee=e,n.arguments=t,n}function ofe(e,t,n){const i=new fa(Oce);return i.test=e,i.consequent=t,i.alternate=n,i}function AT(e){const t=new fa(gP);return t.name=e,t}function zg(e){const t=new fa(Dce);return t.value=e.value,t.raw=Ae.slice(e.start,e.end),e.regex&&(t.raw==="//"&&(t.raw="/(?:)/"),t.regex=e.regex),t}function z4(e,t,n){const i=new fa(Nce);return i.computed=e==="[",i.object=t,i.property=n,i.computed||(n.member=!0),i}function ufe(e){const t=new fa(zce);return t.properties=e,t}function F4(e,t,n){const i=new fa(Fce);return i.key=t,i.value=n,i.kind=e,i}function lfe(e,t){const n=new fa(Lce);return n.operator=e,n.argument=t,n.prefix=!0,n}function at(e,t){var n,i=Array.prototype.slice.call(arguments,2),r=t.replace(/%(\d)/g,(a,s)=>(kb(s<i.length,"Message reference must be in range"),i[s]));throw n=new Error(r),n.index=ee,n.description=r,n}function Ob(e){e.type===n0&&at(e,qce),e.type===sc&&at(e,Uce),e.type===i0&&at(e,Bce),e.type===Pl&&at(e,Ice),e.type===Au&&at(e,Pce),at(e,Sn,e.value)}function ti(e){const t=ki();(t.type!==Ti||t.value!==e)&&Ob(t)}function Tt(e){return mt.type===Ti&&mt.value===e}function JS(e){return mt.type===Au&&mt.value===e}function cfe(){const e=[];for(ee=mt.start,ti("[");!Tt("]");)Tt(",")?(ki(),e.push(null)):(e.push(ql()),Tt("]")||ti(","));return ki(),afe(e)}function L4(){ee=mt.start;const e=ki();return e.type===i0||e.type===sc?(e.octal&&at(e,pP),zg(e)):AT(e.value)}function ffe(){var e,t,n,i;if(ee=mt.start,e=mt,e.type===Pl)return n=L4(),ti(":"),i=ql(),F4("init",n,i);if(e.type===n0||e.type===Ti)Ob(e);else return t=L4(),ti(":"),i=ql(),F4("init",t,i)}function dfe(){var e=[],t,n,i,r={},a=String;for(ee=mt.start,ti("{");!Tt("}");)t=ffe(),t.key.type===gP?n=t.key.name:n=a(t.key.value),i="$"+n,Object.prototype.hasOwnProperty.call(r,i)?at({},jce):r[i]=!0,e.push(t),Tt("}")||ti(",");return ti("}"),ufe(e)}function hfe(){ti("(");const e=$T();return ti(")"),e}const gfe={if:1};function pfe(){var e,t,n;if(Tt("("))return hfe();if(Tt("["))return cfe();if(Tt("{"))return dfe();if(e=mt.type,ee=mt.start,e===Pl||gfe[mt.value])n=AT(ki().value);else if(e===i0||e===sc)mt.octal&&at(mt,pP),n=zg(ki());else{if(e===Au)throw new Error(mp);e===Tb?(t=ki(),t.value=t.value==="true",n=zg(t)):e===Mb?(t=ki(),t.value=null,n=zg(t)):Tt("/")||Tt("/=")?(n=zg(ife()),bP()):Ob(ki())}return n}function mfe(){const e=[];if(ti("("),!Tt(")"))for(;ee<ei&&(e.push(ql()),!Tt(")"));)ti(",");return ti(")"),e}function yfe(){ee=mt.start;const e=ki();return rfe(e)||Ob(e),AT(e.value)}function vfe(){return ti("."),yfe()}function bfe(){ti("[");const e=$T();return ti("]"),e}function xfe(){var e,t,n;for(e=pfe();;)if(Tt("."))n=vfe(),e=z4(".",e,n);else if(Tt("("))t=mfe(),e=sfe(e,t);else if(Tt("["))n=bfe(),e=z4("[",e,n);else break;return e}function U4(){const e=xfe();if(mt.type===Ti&&(Tt("++")||Tt("--")))throw new Error(mp);return e}function H1(){var e,t;if(mt.type!==Ti&&mt.type!==Au)t=U4();else{if(Tt("++")||Tt("--"))throw new Error(mp);if(Tt("+")||Tt("-")||Tt("~")||Tt("!"))e=ki(),t=H1(),t=lfe(e.value,t);else{if(JS("delete")||JS("void")||JS("typeof"))throw new Error(mp);t=U4()}}return t}function B4(e){let t=0;if(e.type!==Ti&&e.type!==Au)return 0;switch(e.value){case"||":t=1;break;case"&&":t=2;break;case"|":t=3;break;case"^":t=4;break;case"&":t=5;break;case"==":case"!=":case"===":case"!==":t=6;break;case"<":case">":case"<=":case">=":case"instanceof":case"in":t=7;break;case"<<":case">>":case">>>":t=8;break;case"+":case"-":t=9;break;case"*":case"/":case"%":t=11;break}return t}function Efe(){var e,t,n,i,r,a,s,o,l,f;if(e=mt,l=H1(),i=mt,r=B4(i),r===0)return l;for(i.prec=r,ki(),t=[e,mt],s=H1(),a=[l,i,s];(r=B4(mt))>0;){for(;a.length>2&&r<=a[a.length-2].prec;)s=a.pop(),o=a.pop().value,l=a.pop(),t.pop(),n=N4(o,l,s),a.push(n);i=ki(),i.prec=r,a.push(i),t.push(mt),n=H1(),a.push(n)}for(f=a.length-1,n=a[f],t.pop();f>1;)t.pop(),n=N4(a[f-1].value,a[f-2],n),f-=2;return n}function ql(){var e,t,n;return e=Efe(),Tt("?")&&(ki(),t=ql(),ti(":"),n=ql(),e=ofe(e,t,n)),e}function $T(){const e=ql();if(Tt(","))throw new Error(mp);return e}function CT(e){Ae=e,ee=0,ei=Ae.length,mt=null,bP();const t=$T();if(mt.type!==n0)throw new Error("Unexpect token after expression.");return t}var xP={NaN:"NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2",MIN_VALUE:"Number.MIN_VALUE",MAX_VALUE:"Number.MAX_VALUE"};function EP(e){function t(s,o,l,f){let d=e(o[0]);return l&&(d=l+"("+d+")",l.lastIndexOf("new ",0)===0&&(d="("+d+")")),d+"."+s+(f<0?"":f===0?"()":"("+o.slice(1).map(e).join(",")+")")}function n(s,o,l){return f=>t(s,f,o,l)}const i="new Date",r="String",a="RegExp";return{isNaN:"Number.isNaN",isFinite:"Number.isFinite",abs:"Math.abs",acos:"Math.acos",asin:"Math.asin",atan:"Math.atan",atan2:"Math.atan2",ceil:"Math.ceil",cos:"Math.cos",exp:"Math.exp",floor:"Math.floor",hypot:"Math.hypot",log:"Math.log",max:"Math.max",min:"Math.min",pow:"Math.pow",random:"Math.random",round:"Math.round",sin:"Math.sin",sqrt:"Math.sqrt",tan:"Math.tan",clamp:function(s){s.length<3&&te("Missing arguments to clamp function."),s.length>3&&te("Too many arguments to clamp function.");const o=s.map(e);return"Math.max("+o[1]+", Math.min("+o[2]+","+o[0]+"))"},now:"Date.now",utc:"Date.UTC",datetime:i,date:n("getDate",i,0),day:n("getDay",i,0),year:n("getFullYear",i,0),month:n("getMonth",i,0),hours:n("getHours",i,0),minutes:n("getMinutes",i,0),seconds:n("getSeconds",i,0),milliseconds:n("getMilliseconds",i,0),time:n("getTime",i,0),timezoneoffset:n("getTimezoneOffset",i,0),utcdate:n("getUTCDate",i,0),utcday:n("getUTCDay",i,0),utcyear:n("getUTCFullYear",i,0),utcmonth:n("getUTCMonth",i,0),utchours:n("getUTCHours",i,0),utcminutes:n("getUTCMinutes",i,0),utcseconds:n("getUTCSeconds",i,0),utcmilliseconds:n("getUTCMilliseconds",i,0),length:n("length",null,-1),parseFloat:"parseFloat",parseInt:"parseInt",upper:n("toUpperCase",r,0),lower:n("toLowerCase",r,0),substring:n("substring",r),split:n("split",r),trim:n("trim",r,0),btoa:"btoa",atob:"atob",regexp:a,test:n("test",a),if:function(s){s.length<3&&te("Missing arguments to if function."),s.length>3&&te("Too many arguments to if function.");const o=s.map(e);return"("+o[0]+"?"+o[1]+":"+o[2]+")"}}}function Sfe(e){const t=e&&e.length-1;return t&&(e[0]==='"'&&e[t]==='"'||e[0]==="'"&&e[t]==="'")?e.slice(1,-1):e}function SP(e){e=e||{};const t=e.allowed?ra(e.allowed):{},n=e.forbidden?ra(e.forbidden):{},i=e.constants||xP,r=(e.functions||EP)(g),a=e.globalvar,s=e.fieldvar,o=qe(a)?a:v=>`${a}["${v}"]`;let l={},f={},d=0;function g(v){if(ve(v))return v;const b=p[v.type];return b==null&&te("Unsupported type: "+v.type),b(v)}const p={Literal:v=>v.raw,Identifier:v=>{const b=v.name;return d>0?b:_e(n,b)?te("Illegal identifier: "+b):_e(i,b)?i[b]:_e(t,b)?b:(l[b]=1,o(b))},MemberExpression:v=>{const b=!v.computed,E=g(v.object);b&&(d+=1);const _=g(v.property);return E===s&&(f[Sfe(_)]=1),b&&(d-=1),E+(b?"."+_:"["+_+"]")},CallExpression:v=>{v.callee.type!=="Identifier"&&te("Illegal callee type: "+v.callee.type);const b=v.callee.name,E=v.arguments,_=_e(r,b)&&r[b];return _||te("Unrecognized function: "+b),qe(_)?_(E):_+"("+E.map(g).join(",")+")"},ArrayExpression:v=>"["+v.elements.map(g).join(",")+"]",BinaryExpression:v=>"("+g(v.left)+" "+v.operator+" "+g(v.right)+")",UnaryExpression:v=>"("+v.operator+g(v.argument)+")",ConditionalExpression:v=>"("+g(v.test)+"?"+g(v.consequent)+":"+g(v.alternate)+")",LogicalExpression:v=>"("+g(v.left)+v.operator+g(v.right)+")",ObjectExpression:v=>"{"+v.properties.map(g).join(",")+"}",Property:v=>{d+=1;const b=g(v.key);return d-=1,b+":"+g(v.value)}};function y(v){const b={code:g(v),globals:Object.keys(l),fields:Object.keys(f)};return l={},f={},b}return y.functions=r,y.constants=i,y}const I4=Symbol("vega_selection_getter");function _P(e){return(!e.getter||!e.getter[I4])&&(e.getter=kr(e.field),e.getter[I4]=!0),e.getter}const TT="intersect",P4="union",_fe="vlMulti",wfe="vlPoint",q4="or",Afe="and",ka="_vgsid_",vp=kr(ka),$fe="E",Cfe="R",Tfe="R-E",Mfe="R-LE",kfe="R-RE",Ofe="E-LT",Dfe="E-LTE",Rfe="E-GT",Nfe="E-GTE",zfe="E-VALID",Ffe="E-ONE",uv="index:unit";function j4(e,t){for(var n=t.fields,i=t.values,r=n.length,a=0,s,o;a<r;++a)if(o=n[a],s=_P(o)(e),Jo(s)&&(s=Qn(s)),Jo(i[a])&&(i[a]=Qn(i[a])),re(i[a])&&Jo(i[a][0])&&(i[a]=i[a].map(Qn)),o.type===$fe){if(re(i[a])?!i[a].includes(s):s!==i[a])return!1}else if(o.type===Cfe){if(!bf(s,i[a]))return!1}else if(o.type===kfe){if(!bf(s,i[a],!0,!1))return!1}else if(o.type===Tfe){if(!bf(s,i[a],!1,!1))return!1}else if(o.type===Mfe){if(!bf(s,i[a],!1,!0))return!1}else if(o.type===Ofe){if(s>=i[a])return!1}else if(o.type===Dfe){if(s>i[a])return!1}else if(o.type===Rfe){if(s<=i[a])return!1}else if(o.type===Nfe){if(s<i[a])return!1}else if(o.type===zfe){if(s===null||isNaN(s))return!1}else if(o.type===Ffe&&i[a].indexOf(s)===-1)return!1;return!0}function Lfe(e,t,n){for(var i=this.context.data[e],r=i?i.values.value:[],a=i?i[uv]&&i[uv].value:void 0,s=n===TT,o=r.length,l=0,f,d,g,p,y;l<o;++l)if(f=r[l],a&&s){if(d=d||{},g=d[p=f.unit]||0,g===-1)continue;if(y=j4(t,f),d[p]=y?-1:++g,y&&a.size===1)return!0;if(!y&&g===a.get(p).count)return!1}else if(y=j4(t,f),s^y)return y;return o&&s}const wP=_d(vp),Ufe=wP.left,Bfe=wP.right;function Ife(e,t,n){const i=this.context.data[e],r=i?i.values.value:[],a=i?i[uv]&&i[uv].value:void 0,s=n===TT,o=vp(t),l=Ufe(r,o);if(l===r.length||vp(r[l])!==o)return!1;if(a&&s){if(a.size===1)return!0;if(Bfe(r,o)-l<a.size)return!1}return!0}function Pfe(e,t){return e.map(n=>Pe(t.fields?{values:t.fields.map(i=>_P(i)(n.datum))}:{[ka]:vp(n.datum)},t))}function qfe(e,t,n,i){for(var r=this.context.data[e],a=r?r.values.value:[],s={},o={},l={},f,d,g,p,y,v,b,E,_,w,A=a.length,$=0,C,k;$<A;++$)if(f=a[$],p=f.unit,d=f.fields,g=f.values,d&&g){for(C=0,k=d.length;C<k;++C)y=d[C],b=s[y.field]||(s[y.field]={}),E=b[p]||(b[p]=[]),l[y.field]=_=y.type.charAt(0),w=e_[`${_}_union`],b[p]=w(E,Ee(g[C]));n&&(E=o[p]||(o[p]=[]),E.push(Ee(g).reduce((M,R,z)=>(M[d[z].field]=R,M),{})))}else y=ka,v=vp(f),b=s[y]||(s[y]={}),E=b[p]||(b[p]=[]),E.push(v),n&&(E=o[p]||(o[p]=[]),E.push({[ka]:v}));if(t=t||P4,s[ka]?s[ka]=e_[`${ka}_${t}`](...Object.values(s[ka])):Object.keys(s).forEach(M=>{s[M]=Object.keys(s[M]).map(R=>s[M][R]).reduce((R,z)=>R===void 0?z:e_[`${l[M]}_${t}`](R,z))}),a=Object.keys(o),n&&a.length){const M=i?wfe:_fe;s[M]=t===P4?{[q4]:a.reduce((R,z)=>(R.push(...o[z]),R),[])}:{[Afe]:a.map(R=>({[q4]:o[R]}))}}return s}var e_={[`${ka}_union`]:kW,[`${ka}_intersect`]:TW,E_union:function(e,t){if(!e.length)return t;for(var n=0,i=t.length;n<i;++n)e.includes(t[n])||e.push(t[n]);return e},E_intersect:function(e,t){return e.length?e.filter(n=>t.includes(n)):t},R_union:function(e,t){var n=Qn(t[0]),i=Qn(t[1]);return n>i&&(n=t[1],i=t[0]),e.length?(e[0]>n&&(e[0]=n),e[1]<i&&(e[1]=i),e):[n,i]},R_intersect:function(e,t){var n=Qn(t[0]),i=Qn(t[1]);return n>i&&(n=t[1],i=t[0]),e.length?i<e[0]||e[1]<n?[]:(e[0]<n&&(e[0]=n),e[1]>i&&(e[1]=i),e):[n,i]}};const jfe=":",Hfe="@";function MT(e,t,n,i){t[0].type!==Il&&te("First argument to selection functions must be a string literal.");const r=t[0].value,a=t.length>=2&&Je(t).value,s="unit",o=Hfe+s,l=jfe+r;a===TT&&!_e(i,o)&&(i[o]=n.getData(r).indataRef(n,s)),_e(i,l)||(i[l]=n.getData(r).tuplesRef())}function AP(e){const t=this.context.data[e];return t?t.values.value:[]}function Gfe(e,t,n){const i=this.context.data[e]["index:"+t],r=i?i.value.get(n):void 0;return r&&r.count}function Yfe(e,t){const n=this.context.dataflow,i=this.context.data[e],r=i.input;return n.pulse(r,n.changeset().remove(Or).insert(t)),1}function Xfe(e,t,n){if(e){const i=this.context.dataflow,r=e.mark.source;i.pulse(r,i.changeset().encode(e,t))}return n!==void 0?n:e}const a0=e=>function(t,n){const i=this.context.dataflow.locale();return t===null?"null":i[e](n)(t)},Vfe=a0("format"),$P=a0("timeFormat"),Wfe=a0("utcFormat"),Qfe=a0("timeParse"),Zfe=a0("utcParse"),c1=new Date(2e3,0,1);function Db(e,t,n){return!Number.isInteger(e)||!Number.isInteger(t)?"":(c1.setYear(2e3),c1.setMonth(e),c1.setDate(t),$P.call(this,c1,n))}function Kfe(e){return Db.call(this,e,1,"%B")}function Jfe(e){return Db.call(this,e,1,"%b")}function ede(e){return Db.call(this,0,2+e,"%A")}function tde(e){return Db.call(this,0,2+e,"%a")}const nde=":",ide="@",yA="%",CP="$";function kT(e,t,n,i){t[0].type!==Il&&te("First argument to data functions must be a string literal.");const r=t[0].value,a=nde+r;if(!_e(a,i))try{i[a]=n.getData(r).tuplesRef()}catch{}}function rde(e,t,n,i){t[0].type!==Il&&te("First argument to indata must be a string literal."),t[1].type!==Il&&te("Second argument to indata must be a string literal.");const r=t[0].value,a=t[1].value,s=ide+a;_e(s,i)||(i[s]=n.getData(r).indataRef(n,a))}function mi(e,t,n,i){if(t[0].type===Il)H4(n,i,t[0].value);else for(e in n.scales)H4(n,i,e)}function H4(e,t,n){const i=yA+n;if(!_e(t,i))try{t[i]=e.scaleRef(n)}catch{}}function is(e,t){if(ve(e)){const n=t.scales[e];return n&&X5(n.value)?n.value:void 0}else if(qe(e))return X5(e)?e:void 0}function ade(e,t,n){t.__bandwidth=r=>r&&r.bandwidth?r.bandwidth():0,n._bandwidth=mi,n._range=mi,n._scale=mi;const i=r=>"_["+(r.type===Il?ge(yA+r.value):ge(yA)+"+"+e(r))+"]";return{_bandwidth:r=>`this.__bandwidth(${i(r[0])})`,_range:r=>`${i(r[0])}.range()`,_scale:r=>`${i(r[0])}(${e(r[1])})`}}function OT(e,t){return function(n,i,r){if(n){const a=is(n,(r||this).context);return a&&a.path[e](i)}else return t(i)}}const sde=OT("area",wae),ode=OT("bounds",Tae),ude=OT("centroid",Nae);function lde(e,t){const n=is(e,(t||this).context);return n&&n.scale()}function cde(e){const t=this.context.group;let n=!1;if(t)for(;e;){if(e===t){n=!0;break}e=e.mark.group}return n}function DT(e,t,n){try{e[t].apply(e,["EXPRESSION"].concat([].slice.call(n)))}catch(i){e.warn(i)}return n[n.length-1]}function fde(){return DT(this.context.dataflow,"warn",arguments)}function dde(){return DT(this.context.dataflow,"info",arguments)}function hde(){return DT(this.context.dataflow,"debug",arguments)}function t_(e){const t=e/255;return t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)}function vA(e){const t=lu(e),n=t_(t.r),i=t_(t.g),r=t_(t.b);return .2126*n+.7152*i+.0722*r}function gde(e,t){const n=vA(e),i=vA(t),r=Math.max(n,i),a=Math.min(n,i);return(r+.05)/(a+.05)}function pde(){const e=[].slice.call(arguments);return e.unshift({}),Pe(...e)}function TP(e,t){return e===t||e!==e&&t!==t?!0:re(e)?re(t)&&e.length===t.length?mde(e,t):!1:be(e)&&be(t)?MP(e,t):!1}function mde(e,t){for(let n=0,i=e.length;n<i;++n)if(!TP(e[n],t[n]))return!1;return!0}function MP(e,t){for(const n in e)if(!TP(e[n],t[n]))return!1;return!0}function G4(e){return t=>MP(e,t)}function yde(e,t,n,i,r,a){const s=this.context.dataflow,o=this.context.data[e],l=o.input,f=s.stamp();let d=o.changes,g,p;if(s._trigger===!1||!(l.value.length||t||i))return 0;if((!d||d.stamp<f)&&(o.changes=d=s.changeset(),d.stamp=f,s.runAfter(()=>{o.modified=!0,s.pulse(l,d).run()},!0,1)),n&&(g=n===!0?Or:re(n)||Pv(n)?n:G4(n),d.remove(g)),t&&d.insert(t),i&&(g=G4(i),l.value.some(g)?d.remove(g):d.insert(i)),r)for(p in a)d.modify(r,p,a[p]);return 1}function vde(e){const t=e.touches,n=t[0].clientX-t[1].clientX,i=t[0].clientY-t[1].clientY;return Math.hypot(n,i)}function bde(e){const t=e.touches;return Math.atan2(t[0].clientY-t[1].clientY,t[0].clientX-t[1].clientX)}const Y4={};function xde(e,t){const n=Y4[t]||(Y4[t]=kr(t));return re(e)?e.map(n):n(e)}function Rb(e){return re(e)||ArrayBuffer.isView(e)?e:null}function RT(e){return Rb(e)||(ve(e)?e:null)}function Ede(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return Rb(e).join(...n)}function Sde(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return RT(e).indexOf(...n)}function _de(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return RT(e).lastIndexOf(...n)}function wde(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return RT(e).slice(...n)}function Ade(e,t,n){return qe(n)&&te("Function argument passed to replace."),!ve(t)&&!v$(t)&&te("Please pass a string or RegExp argument to replace."),String(e).replace(t,n)}function $de(e){return Rb(e).slice().reverse()}function Cde(e){return Rb(e).slice().sort(Ed)}function Tde(e,t,n){return YC(e||0,t||0,n||0)}function Mde(e,t){const n=is(e,(t||this).context);return n&&n.bandwidth?n.bandwidth():0}function kde(e,t){const n=is(e,(t||this).context);return n?n.copy():void 0}function Ode(e,t){const n=is(e,(t||this).context);return n?n.domain():[]}function Dde(e,t,n){const i=is(e,(n||this).context);return i?re(t)?(i.invertRange||i.invert)(t):(i.invert||i.invertExtent)(t):void 0}function Rde(e,t){const n=is(e,(t||this).context);return n&&n.range?n.range():[]}function Nde(e,t,n){const i=is(e,(n||this).context);return i?i(t):void 0}function zde(e,t,n,i,r){e=is(e,(r||this).context);const a=xU(t,n);let s=e.domain(),o=s[0],l=Je(s),f=ni;return l-o?f=uU(e,o,l):e=(e.interpolator?ut("sequential")().interpolator(e.interpolator()):ut("linear")().interpolate(e.interpolate()).range(e.range())).domain([o=0,l=1]),e.ticks&&(s=e.ticks(+i||15),o!==s[0]&&s.unshift(o),l!==Je(s)&&s.push(l)),s.forEach(d=>a.stop(f(d),e(d))),a}function Fde(e,t,n){const i=is(e,(n||this).context);return function(r){return i?i.path.context(r)(t):""}}function Lde(e){let t=null;return function(n){return n?up(n,t=t||Vf(e)):e}}const kP=e=>e.data;function OP(e,t){const n=AP.call(t,e);return n.root&&n.root.lookup||{}}function Ude(e,t,n){const i=OP(e,this),r=i[t],a=i[n];return r&&a?r.path(a).map(kP):void 0}function Bde(e,t){const n=OP(e,this)[t];return n?n.ancestors().map(kP):void 0}const DP=()=>typeof window<"u"&&window||null;function Ide(){const e=DP();return e?e.screen:{}}function Pde(){const e=DP();return e?[e.innerWidth,e.innerHeight]:[void 0,void 0]}function qde(){const e=this.context.dataflow,t=e.container&&e.container();return t?[t.clientWidth,t.clientHeight]:[void 0,void 0]}function RP(e,t,n){if(!e)return[];const[i,r]=e,a=new rn().set(i[0],i[1],r[0],r[1]),s=n||this.context.dataflow.scenegraph().root;return mB(s,a,jde(t))}function jde(e){let t=null;if(e){const n=Ee(e.marktype),i=Ee(e.markname);t=r=>(!n.length||n.some(a=>r.marktype===a))&&(!i.length||i.some(a=>r.name===a))}return t}function Hde(e,t,n){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:5;e=Ee(e);const r=e[e.length-1];return r===void 0||Math.hypot(r[0]-t,r[1]-n)>i?[...e,[t,n]]:e}function Gde(e){return Ee(e).reduce((t,n,i)=>{let[r,a]=n;return t+=i==0?`M ${r},${a} `:i===e.length-1?" Z":`L ${r},${a} `},"")}function Yde(e,t,n){const{x:i,y:r,mark:a}=n,s=new rn().set(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,Number.MIN_SAFE_INTEGER,Number.MIN_SAFE_INTEGER);for(const[l,f]of t)l<s.x1&&(s.x1=l),l>s.x2&&(s.x2=l),f<s.y1&&(s.y1=f),f>s.y2&&(s.y2=f);return s.translate(i,r),RP([[s.x1,s.y1],[s.x2,s.y2]],e,a).filter(l=>Xde(l.x,l.y,t))}function Xde(e,t,n){let i=0;for(let r=0,a=n.length-1;r<n.length;a=r++){const[s,o]=n[a],[l,f]=n[r];f>t!=o>t&&e<(s-l)*(t-f)/(o-f)+l&&i++}return i&1}const bp={random(){return Rr()},cumulativeNormal:Yv,cumulativeLogNormal:Y$,cumulativeUniform:Q$,densityNormal:P$,densityLogNormal:G$,densityUniform:W$,quantileNormal:Xv,quantileLogNormal:X$,quantileUniform:Z$,sampleNormal:Gv,sampleLogNormal:H$,sampleUniform:V$,isArray:re,isBoolean:xu,isDate:Jo,isDefined(e){return e!==void 0},isNumber:st,isObject:be,isRegExp:v$,isString:ve,isTuple:Pv,isValid(e){return e!=null&&e===e},toBoolean:x$,toDate(e){return E$(e)},toNumber:Qn,toString:S$,indexof:Sde,join:Ede,lastindexof:_de,replace:Ade,reverse:$de,sort:Cde,slice:wde,flush:IF,lerp:qF,merge:pde,pad:GF,peek:Je,pluck:xde,span:Dp,inrange:bf,truncate:YF,rgb:lu,lab:py,hcl:my,hsl:hy,luminance:vA,contrast:gde,sequence:er,format:Vfe,utcFormat:Wfe,utcParse:Zfe,utcOffset:A9,utcSequence:T9,timeFormat:$P,timeParse:Qfe,timeOffset:w9,timeSequence:C9,timeUnitSpecifier:h9,monthFormat:Kfe,monthAbbrevFormat:Jfe,dayFormat:ede,dayAbbrevFormat:tde,quarter:FF,utcquarter:LF,week:p9,utcweek:v9,dayofyear:g9,utcdayofyear:y9,warn:fde,info:dde,debug:hde,extent(e){return qa(e)},inScope:cde,intersect:RP,clampRange:UF,pinchDistance:vde,pinchAngle:bde,screen:Ide,containerSize:qde,windowSize:Pde,bandspace:Tde,setdata:Yfe,pathShape:Lde,panLinear:DF,panLog:RF,panPow:NF,panSymlog:zF,zoomLinear:h$,zoomLog:g$,zoomPow:ey,zoomSymlog:p$,encode:Xfe,modify:yde,lassoAppend:Hde,lassoPath:Gde,intersectLasso:Yde},Vde=["view","item","group","xy","x","y"],Wde="event.vega.",NP="this.",NT={},zP={forbidden:["_"],allowed:["datum","event","item"],fieldvar:"datum",globalvar:e=>`_[${ge(CP+e)}]`,functions:Qde,constants:xP,visitors:NT},bA=SP(zP);function Qde(e){const t=EP(e);Vde.forEach(n=>t[n]=Wde+n);for(const n in bp)t[n]=NP+n;return Pe(t,ade(e,bp,NT)),t}function Zt(e,t,n){return arguments.length===1?bp[e]:(bp[e]=t,n&&(NT[e]=n),bA&&(bA.functions[e]=NP+e),this)}Zt("bandwidth",Mde,mi);Zt("copy",kde,mi);Zt("domain",Ode,mi);Zt("range",Rde,mi);Zt("invert",Dde,mi);Zt("scale",Nde,mi);Zt("gradient",zde,mi);Zt("geoArea",sde,mi);Zt("geoBounds",ode,mi);Zt("geoCentroid",ude,mi);Zt("geoShape",Fde,mi);Zt("geoScale",lde,mi);Zt("indata",Gfe,rde);Zt("data",AP,kT);Zt("treePath",Ude,kT);Zt("treeAncestors",Bde,kT);Zt("vlSelectionTest",Lfe,MT);Zt("vlSelectionIdTest",Ife,MT);Zt("vlSelectionResolve",qfe,MT);Zt("vlSelectionTuples",Pfe);function Xa(e,t){const n={};let i;try{e=ve(e)?e:ge(e)+"",i=CT(e)}catch{te("Expression parse error: "+e)}i.visit(a=>{if(a.type!==hP)return;const s=a.callee.name,o=zP.visitors[s];o&&o(s,a.arguments,t,n)});const r=bA(i);return r.globals.forEach(a=>{const s=CP+a;!_e(n,s)&&t.getSignal(a)&&(n[s]=t.signalRef(a))}),{$expr:Pe({code:r.code},t.options.ast?{ast:i}:null),$fields:r.fields,$params:n}}function Zde(e){const t=this,n=e.operators||[];return e.background&&(t.background=e.background),e.eventConfig&&(t.eventConfig=e.eventConfig),e.locale&&(t.locale=e.locale),n.forEach(i=>t.parseOperator(i)),n.forEach(i=>t.parseOperatorParameters(i)),(e.streams||[]).forEach(i=>t.parseStream(i)),(e.updates||[]).forEach(i=>t.parseUpdate(i)),t.resolve()}const Kde=ra(["rule"]),X4=ra(["group","image","rect"]);function Jde(e,t){let n="";return Kde[t]||(e.x2&&(e.x?(X4[t]&&(n+="if(o.x>o.x2)$=o.x,o.x=o.x2,o.x2=$;"),n+="o.width=o.x2-o.x;"):n+="o.x=o.x2-(o.width||0);"),e.xc&&(n+="o.x=o.xc-(o.width||0)/2;"),e.y2&&(e.y?(X4[t]&&(n+="if(o.y>o.y2)$=o.y,o.y=o.y2,o.y2=$;"),n+="o.height=o.y2-o.y;"):n+="o.y=o.y2-(o.height||0);"),e.yc&&(n+="o.y=o.yc-(o.height||0)/2;")),n}function zT(e){return(e+"").toLowerCase()}function ehe(e){return zT(e)==="operator"}function the(e){return zT(e)==="collect"}function rg(e,t,n){n.endsWith(";")||(n="return("+n+");");const i=Function(...t.concat(n));return e&&e.functions?i.bind(e.functions):i}function nhe(e,t,n,i){return`((u = ${e}) < (v = ${t}) || u == null) && v != null ? ${n}
  : (u > v || v == null) && u != null ? ${i}
  : ((v = v instanceof Date ? +v : v), (u = u instanceof Date ? +u : u)) !== u && v === v ? ${n}
  : v !== v && u === u ? ${i} : `}var ihe={operator:(e,t)=>rg(e,["_"],t.code),parameter:(e,t)=>rg(e,["datum","_"],t.code),event:(e,t)=>rg(e,["event"],t.code),handler:(e,t)=>{const n=`var datum=event.item&&event.item.datum;return ${t.code};`;return rg(e,["_","event"],n)},encode:(e,t)=>{const{marktype:n,channels:i}=t;let r="var o=item,datum=o.datum,m=0,$;";for(const a in i){const s="o["+ge(a)+"]";r+=`$=${i[a].code};if(${s}!==$)${s}=$,m=1;`}return r+=Jde(i,n),r+="return m;",rg(e,["item","_"],r)},codegen:{get(e){const t=`[${e.map(ge).join("][")}]`,n=Function("_",`return _${t};`);return n.path=t,n},comparator(e,t){let n;const i=(a,s)=>{const o=t[s];let l,f;return a.path?(l=`a${a.path}`,f=`b${a.path}`):((n=n||{})["f"+s]=a,l=`this.f${s}(a)`,f=`this.f${s}(b)`),nhe(l,f,-o,o)},r=Function("a","b","var u, v; return "+e.map(i).join("")+"0;");return n?r.bind(n):r}}};function rhe(e){const t=this;ehe(e.type)||!e.type?t.operator(e,e.update?t.operatorExpression(e.update):null):t.transform(e,e.type)}function ahe(e){const t=this;if(e.params){const n=t.get(e.id);n||te("Invalid operator id: "+e.id),t.dataflow.connect(n,n.parameters(t.parseParameters(e.params),e.react,e.initonly))}}function she(e,t){t=t||{};const n=this;for(const i in e){const r=e[i];t[i]=re(r)?r.map(a=>V4(a,n,t)):V4(r,n,t)}return t}function V4(e,t,n){if(!e||!be(e))return e;for(let i=0,r=W4.length,a;i<r;++i)if(a=W4[i],_e(e,a.key))return a.parse(e,t,n);return e}var W4=[{key:"$ref",parse:ohe},{key:"$key",parse:lhe},{key:"$expr",parse:uhe},{key:"$field",parse:che},{key:"$encode",parse:dhe},{key:"$compare",parse:fhe},{key:"$context",parse:hhe},{key:"$subflow",parse:ghe},{key:"$tupleid",parse:phe}];function ohe(e,t){return t.get(e.$ref)||te("Operator not defined: "+e.$ref)}function uhe(e,t,n){e.$params&&t.parseParameters(e.$params,n);const i="e:"+e.$expr.code;return t.fn[i]||(t.fn[i]=Bi(t.parameterExpression(e.$expr),e.$fields))}function lhe(e,t){const n="k:"+e.$key+"_"+!!e.$flat;return t.fn[n]||(t.fn[n]=b$(e.$key,e.$flat,t.expr.codegen))}function che(e,t){if(!e.$field)return null;const n="f:"+e.$field+"_"+e.$name;return t.fn[n]||(t.fn[n]=kr(e.$field,e.$name,t.expr.codegen))}function fhe(e,t){const n="c:"+e.$compare+"_"+e.$order,i=Ee(e.$compare).map(r=>r&&r.$tupleid?ke:r);return t.fn[n]||(t.fn[n]=m$(i,e.$order,t.expr.codegen))}function dhe(e,t){const n=e.$encode,i={};for(const r in n){const a=n[r];i[r]=Bi(t.encodeExpression(a.$expr),a.$fields),i[r].output=a.$output}return i}function hhe(e,t){return t}function ghe(e,t){const n=e.$subflow;return function(i,r,a){const s=t.fork().parse(n),o=s.get(n.operators[0].id),l=s.signals.parent;return l&&l.set(a),o.detachSubflow=()=>t.detach(s),o}}function phe(){return ke}function mhe(e){var t=this,n=e.filter!=null?t.eventExpression(e.filter):void 0,i=e.stream!=null?t.get(e.stream):void 0,r;e.source?i=t.events(e.source,e.type,n):e.merge&&(r=e.merge.map(a=>t.get(a)),i=r[0].merge.apply(r[0],r.slice(1))),e.between&&(r=e.between.map(a=>t.get(a)),i=i.between(r[0],r[1])),e.filter&&(i=i.filter(n)),e.throttle!=null&&(i=i.throttle(+e.throttle)),e.debounce!=null&&(i=i.debounce(+e.debounce)),i==null&&te("Invalid stream definition: "+JSON.stringify(e)),e.consume&&i.consume(!0),t.stream(e,i)}function yhe(e){var t=this,n=be(n=e.source)?n.$ref:n,i=t.get(n),r=null,a=e.update,s=void 0;i||te("Source not defined: "+e.source),r=e.target&&e.target.$expr?t.eventExpression(e.target.$expr):t.get(e.target),a&&a.$expr&&(a.$params&&(s=t.parseParameters(a.$params)),a=t.handlerExpression(a.$expr)),t.update(e,i,r,a,s)}const vhe={skip:!0};function bhe(e){var t=this,n={};if(e.signals){var i=n.signals={};Object.keys(t.signals).forEach(a=>{const s=t.signals[a];e.signals(a,s)&&(i[a]=s.value)})}if(e.data){var r=n.data={};Object.keys(t.data).forEach(a=>{const s=t.data[a];e.data(a,s)&&(r[a]=s.input.value)})}return t.subcontext&&e.recurse!==!1&&(n.subcontext=t.subcontext.map(a=>a.getState(e))),n}function xhe(e){var t=this,n=t.dataflow,i=e.data,r=e.signals;Object.keys(r||{}).forEach(a=>{n.update(t.signals[a],r[a],vhe)}),Object.keys(i||{}).forEach(a=>{n.pulse(t.data[a].input,n.changeset().remove(Or).insert(i[a]))}),(e.subcontext||[]).forEach((a,s)=>{const o=t.subcontext[s];o&&o.setState(a)})}function FP(e,t,n,i){return new LP(e,t,n,i)}function LP(e,t,n,i){this.dataflow=e,this.transforms=t,this.events=e.events.bind(e),this.expr=i||ihe,this.signals={},this.scales={},this.nodes={},this.data={},this.fn={},n&&(this.functions=Object.create(n),this.functions.context=this)}function Q4(e){this.dataflow=e.dataflow,this.transforms=e.transforms,this.events=e.events,this.expr=e.expr,this.signals=Object.create(e.signals),this.scales=Object.create(e.scales),this.nodes=Object.create(e.nodes),this.data=Object.create(e.data),this.fn=Object.create(e.fn),e.functions&&(this.functions=Object.create(e.functions),this.functions.context=this)}LP.prototype=Q4.prototype={fork(){const e=new Q4(this);return(this.subcontext||(this.subcontext=[])).push(e),e},detach(e){this.subcontext=this.subcontext.filter(n=>n!==e);const t=Object.keys(e.nodes);for(const n of t)e.nodes[n]._targets=null;for(const n of t)e.nodes[n].detach();e.nodes=null},get(e){return this.nodes[e]},set(e,t){return this.nodes[e]=t},add(e,t){const n=this,i=n.dataflow,r=e.value;if(n.set(e.id,t),the(e.type)&&r&&(r.$ingest?i.ingest(t,r.$ingest,r.$format):r.$request?i.preload(t,r.$request,r.$format):i.pulse(t,i.changeset().insert(r))),e.root&&(n.root=t),e.parent){let a=n.get(e.parent.$ref);a?(i.connect(a,[t]),t.targets().add(a)):(n.unresolved=n.unresolved||[]).push(()=>{a=n.get(e.parent.$ref),i.connect(a,[t]),t.targets().add(a)})}if(e.signal&&(n.signals[e.signal]=t),e.scale&&(n.scales[e.scale]=t),e.data)for(const a in e.data){const s=n.data[a]||(n.data[a]={});e.data[a].forEach(o=>s[o]=t)}},resolve(){return(this.unresolved||[]).forEach(e=>e()),delete this.unresolved,this},operator(e,t){this.add(e,this.dataflow.add(e.value,t))},transform(e,t){this.add(e,this.dataflow.add(this.transforms[zT(t)]))},stream(e,t){this.set(e.id,t)},update(e,t,n,i,r){this.dataflow.on(t,n,i,r,e.options)},operatorExpression(e){return this.expr.operator(this,e)},parameterExpression(e){return this.expr.parameter(this,e)},eventExpression(e){return this.expr.event(this,e)},handlerExpression(e){return this.expr.handler(this,e)},encodeExpression(e){return this.expr.encode(this,e)},parse:Zde,parseOperator:rhe,parseOperatorParameters:ahe,parseParameters:she,parseStream:mhe,parseUpdate:yhe,getState:bhe,setState:xhe};function Ehe(e){const t=e.container();t&&(t.setAttribute("role","graphics-document"),t.setAttribute("aria-roleDescription","visualization"),UP(t,e.description()))}function UP(e,t){e&&(t==null?e.removeAttribute("aria-label"):e.setAttribute("aria-label",t))}function She(e){e.add(null,t=>(e._background=t.bg,e._resize=1,t.bg),{bg:e._signals.background})}const n_="default";function _he(e){const t=e._signals.cursor||(e._signals.cursor=e.add({user:n_,item:null}));e.on(e.events("view","pointermove"),t,(n,i)=>{const r=t.value,a=r?ve(r)?r:r.user:n_,s=i.item&&i.item.cursor||null;return r&&a===r.user&&s==r.item?r:{user:a,item:s}}),e.add(null,function(n){let i=n.cursor,r=this.value;return ve(i)||(r=i.item,i=i.user),xA(e,i&&i!==n_?i:r||i),r},{cursor:t})}function xA(e,t){const n=e.globalCursor()?typeof document<"u"&&document.body:e.container();if(n)return t==null?n.style.removeProperty("cursor"):n.style.cursor=t}function lv(e,t){var n=e._runtime.data;return _e(n,t)||te("Unrecognized data set: "+t),n[t]}function whe(e,t){return arguments.length<2?lv(this,e).values.value:Nb.call(this,e,ic().remove(Or).insert(t))}function Nb(e,t){t7(t)||te("Second argument to changes must be a changeset.");const n=lv(this,e);return n.modified=!0,this.pulse(n.input,t)}function Ahe(e,t){return Nb.call(this,e,ic().insert(t))}function $he(e,t){return Nb.call(this,e,ic().remove(t))}function BP(e){var t=e.padding();return Math.max(0,e._viewWidth+t.left+t.right)}function IP(e){var t=e.padding();return Math.max(0,e._viewHeight+t.top+t.bottom)}function zb(e){var t=e.padding(),n=e._origin;return[t.left+n[0],t.top+n[1]]}function Che(e){var t=zb(e),n=BP(e),i=IP(e);e._renderer.background(e.background()),e._renderer.resize(n,i,t),e._handler.origin(t),e._resizeListeners.forEach(r=>{try{r(n,i)}catch(a){e.error(a)}})}function The(e,t,n){var i=e._renderer,r=i&&i.canvas(),a,s,o;return r&&(o=zb(e),s=t.changedTouches?t.changedTouches[0]:t,a=xb(s,r),a[0]-=o[0],a[1]-=o[1]),t.dataflow=e,t.item=n,t.vega=Mhe(e,n,a),t}function Mhe(e,t,n){const i=t?t.mark.marktype==="group"?t:t.mark.group:null;function r(s){var o=i,l;if(s){for(l=t;l;l=l.mark.group)if(l.mark.name===s){o=l;break}}return o&&o.mark&&o.mark.interactive?o:{}}function a(s){if(!s)return n;ve(s)&&(s=r(s));const o=n.slice();for(;s;)o[0]-=s.x||0,o[1]-=s.y||0,s=s.mark&&s.mark.group;return o}return{view:ii(e),item:ii(t||{}),group:r,xy:a,x:s=>a(s)[0],y:s=>a(s)[1]}}const Z4="view",khe="timer",Ohe="window",Dhe={trap:!1};function Rhe(e){const t=Pe({defaults:{}},e),n=(i,r)=>{r.forEach(a=>{re(i[a])&&(i[a]=ra(i[a]))})};return n(t.defaults,["prevent","allow"]),n(t,["view","window","selector"]),t}function PP(e,t,n,i){e._eventListeners.push({type:n,sources:Ee(t),handler:i})}function Nhe(e,t){var n=e._eventConfig.defaults,i=n.prevent,r=n.allow;return i===!1||r===!0?!1:i===!0||r===!1?!0:i?i[t]:r?!r[t]:e.preventDefault()}function f1(e,t,n){const i=e._eventConfig&&e._eventConfig[t];return i===!1||be(i)&&!i[n]?(e.warn(`Blocked ${t} ${n} event listener.`),!1):!0}function zhe(e,t,n){var i=this,r=new Hv(n),a=function(f,d){i.runAsync(null,()=>{e===Z4&&Nhe(i,t)&&f.preventDefault(),r.receive(The(i,f,d))})},s;if(e===khe)f1(i,"timer",t)&&i.timer(a,t);else if(e===Z4)f1(i,"view",t)&&i.addEventListener(t,a,Dhe);else if(e===Ohe?f1(i,"window",t)&&typeof window<"u"&&(s=[window]):typeof document<"u"&&f1(i,"selector",t)&&(s=Array.from(document.querySelectorAll(e))),!s)i.warn("Can not resolve event source: "+e);else{for(var o=0,l=s.length;o<l;++o)s[o].addEventListener(t,a);PP(i,s,t,a)}return r}function K4(e){return e.item}function J4(e){return e.item.mark.source}function ez(e){return function(t,n){return n.vega.view().changeset().encode(n.item,e)}}function Fhe(e,t){return e=[e||"hover"],t=[t||"update",e[0]],this.on(this.events("view","pointerover",K4),J4,ez(e)),this.on(this.events("view","pointerout",K4),J4,ez(t)),this}function Lhe(){var e=this._tooltip,t=this._timers,n=this._handler.handlers(),i=this._eventListeners,r,a,s,o,l;for(r=t.length;--r>=0;)t[r].stop();for(r=i.length;--r>=0;)for(s=i[r],a=s.sources.length;--a>=0;)s.sources[a].removeEventListener(s.type,s.handler);for(e&&e.call(this,this._handler,null,null,null),r=n.length;--r>=0;)l=n[r].type,o=n[r].handler,this._handler.off(l,o);return this}function rr(e,t,n){const i=document.createElement(e);for(const r in t)i.setAttribute(r,t[r]);return n!=null&&(i.textContent=n),i}const Uhe="vega-bind",Bhe="vega-bind-name",Ihe="vega-bind-radio";function Phe(e,t,n){if(!t)return;const i=n.param;let r=n.state;return r||(r=n.state={elements:null,active:!1,set:null,update:s=>{s!=e.signal(i.signal)&&e.runAsync(null,()=>{r.source=!0,e.signal(i.signal,s)})}},i.debounce&&(r.update=y$(i.debounce,r.update))),(i.input==null&&i.element?qhe:Hhe)(r,t,i,e),r.active||(e.on(e._signals[i.signal],null,()=>{r.source?r.source=!1:r.set(e.signal(i.signal))}),r.active=!0),r}function qhe(e,t,n,i){const r=n.event||"input",a=()=>e.update(t.value);i.signal(n.signal,t.value),t.addEventListener(r,a),PP(i,t,r,a),e.set=s=>{t.value=s,t.dispatchEvent(jhe(r))}}function jhe(e){return typeof Event<"u"?new Event(e):{type:e}}function Hhe(e,t,n,i){const r=i.signal(n.signal),a=rr("div",{class:Uhe}),s=n.input==="radio"?a:a.appendChild(rr("label"));s.appendChild(rr("span",{class:Bhe},n.name||n.signal)),t.appendChild(a);let o=Ghe;switch(n.input){case"checkbox":o=Yhe;break;case"select":o=Xhe;break;case"radio":o=Vhe;break;case"range":o=Whe;break}o(e,s,n,r)}function Ghe(e,t,n,i){const r=rr("input");for(const a in n)a!=="signal"&&a!=="element"&&r.setAttribute(a==="input"?"type":a,n[a]);r.setAttribute("name",n.signal),r.value=i,t.appendChild(r),r.addEventListener("input",()=>e.update(r.value)),e.elements=[r],e.set=a=>r.value=a}function Yhe(e,t,n,i){const r={type:"checkbox",name:n.signal};i&&(r.checked=!0);const a=rr("input",r);t.appendChild(a),a.addEventListener("change",()=>e.update(a.checked)),e.elements=[a],e.set=s=>a.checked=!!s||null}function Xhe(e,t,n,i){const r=rr("select",{name:n.signal}),a=n.labels||[];n.options.forEach((s,o)=>{const l={value:s};cv(s,i)&&(l.selected=!0),r.appendChild(rr("option",l,(a[o]||s)+""))}),t.appendChild(r),r.addEventListener("change",()=>{e.update(n.options[r.selectedIndex])}),e.elements=[r],e.set=s=>{for(let o=0,l=n.options.length;o<l;++o)if(cv(n.options[o],s)){r.selectedIndex=o;return}}}function Vhe(e,t,n,i){const r=rr("span",{class:Ihe}),a=n.labels||[];t.appendChild(r),e.elements=n.options.map((s,o)=>{const l={type:"radio",name:n.signal,value:s};cv(s,i)&&(l.checked=!0);const f=rr("input",l);f.addEventListener("change",()=>e.update(s));const d=rr("label",{},(a[o]||s)+"");return d.prepend(f),r.appendChild(d),f}),e.set=s=>{const o=e.elements,l=o.length;for(let f=0;f<l;++f)cv(o[f].value,s)&&(o[f].checked=!0)}}function Whe(e,t,n,i){i=i!==void 0?i:(+n.max+ +n.min)/2;const r=n.max!=null?n.max:Math.max(100,+i)||100,a=n.min||Math.min(0,r,+i)||0,s=n.step||su(a,r,100),o=rr("input",{type:"range",name:n.signal,min:a,max:r,step:s});o.value=i;const l=rr("span",{},+i);t.appendChild(o),t.appendChild(l);const f=()=>{l.textContent=o.value,e.update(+o.value)};o.addEventListener("input",f),o.addEventListener("change",f),e.elements=[o],e.set=d=>{o.value=d,l.textContent=d}}function cv(e,t){return e===t||e+""==t+""}function qP(e,t,n,i,r,a){return t=t||new i(e.loader()),t.initialize(n,BP(e),IP(e),zb(e),r,a).background(e.background())}function FT(e,t){return t?function(){try{t.apply(this,arguments)}catch(n){e.error(n)}}:null}function Qhe(e,t,n,i){const r=new i(e.loader(),FT(e,e.tooltip())).scene(e.scenegraph().root).initialize(n,zb(e),e);return t&&t.handlers().forEach(a=>{r.on(a.type,a.handler)}),r}function Zhe(e,t){const n=this,i=n._renderType,r=n._eventConfig.bind,a=Eb(i);e=n._el=e?i_(n,e,!0):null,Ehe(n),a||n.error("Unrecognized renderer type: "+i);const s=a.handler||Zp,o=e?a.renderer:a.headless;return n._renderer=o?qP(n,n._renderer,e,o):null,n._handler=Qhe(n,n._handler,e,s),n._redraw=!0,e&&r!=="none"&&(t=t?n._elBind=i_(n,t,!0):e.appendChild(rr("form",{class:"vega-bindings"})),n._bind.forEach(l=>{l.param.element&&r!=="container"&&(l.element=i_(n,l.param.element,!!l.param.input))}),n._bind.forEach(l=>{Phe(n,l.element||t,l)})),n}function i_(e,t,n){if(typeof t=="string")if(typeof document<"u"){if(t=document.querySelector(t),!t)return e.error("Signal bind element not found: "+t),null}else return e.error("DOM document instance not found."),null;if(t&&n)try{t.textContent=""}catch(i){t=null,e.error(i)}return t}const ag=e=>+e||0,Khe=e=>({top:e,bottom:e,left:e,right:e});function tz(e){return be(e)?{top:ag(e.top),bottom:ag(e.bottom),left:ag(e.left),right:ag(e.right)}:Khe(ag(e))}async function LT(e,t,n,i){const r=Eb(t),a=r&&r.headless;return a||te("Unrecognized renderer type: "+t),await e.runAsync(),qP(e,null,null,a,n,i).renderAsync(e._scenegraph.root)}async function Jhe(e,t){e!==Xo.Canvas&&e!==Xo.SVG&&e!==Xo.PNG&&te("Unrecognized image type: "+e);const n=await LT(this,e,t);return e===Xo.SVG?ege(n.svg(),"image/svg+xml"):n.canvas().toDataURL("image/png")}function ege(e,t){const n=new Blob([e],{type:t});return window.URL.createObjectURL(n)}async function tge(e,t){return(await LT(this,Xo.Canvas,e,t)).canvas()}async function nge(e){return(await LT(this,Xo.SVG,e)).svg()}function ige(e,t,n){return FP(e,qf,bp,n).parse(t)}function rge(e){var t=this._runtime.scales;return _e(t,e)||te("Unrecognized scale or projection: "+e),t[e].value}var jP="width",HP="height",UT="padding",nz={skip:!0};function GP(e,t){var n=e.autosize(),i=e.padding();return t-(n&&n.contains===UT?i.left+i.right:0)}function YP(e,t){var n=e.autosize(),i=e.padding();return t-(n&&n.contains===UT?i.top+i.bottom:0)}function age(e){var t=e._signals,n=t[jP],i=t[HP],r=t[UT];function a(){e._autosize=e._resize=1}e._resizeWidth=e.add(null,o=>{e._width=o.size,e._viewWidth=GP(e,o.size),a()},{size:n}),e._resizeHeight=e.add(null,o=>{e._height=o.size,e._viewHeight=YP(e,o.size),a()},{size:i});const s=e.add(null,a,{pad:r});e._resizeWidth.rank=n.rank+1,e._resizeHeight.rank=i.rank+1,s.rank=r.rank+1}function sge(e,t,n,i,r,a){this.runAfter(s=>{let o=0;s._autosize=0,s.width()!==n&&(o=1,s.signal(jP,n,nz),s._resizeWidth.skip(!0)),s.height()!==i&&(o=1,s.signal(HP,i,nz),s._resizeHeight.skip(!0)),s._viewWidth!==e&&(s._resize=1,s._viewWidth=e),s._viewHeight!==t&&(s._resize=1,s._viewHeight=t),(s._origin[0]!==r[0]||s._origin[1]!==r[1])&&(s._resize=1,s._origin=r),o&&s.run("enter"),a&&s.runAfter(l=>l.resize())},!1,1)}function oge(e){return this._runtime.getState(e||{data:uge,signals:lge,recurse:!0})}function uge(e,t){return t.modified&&re(t.input.value)&&!e.startsWith("_:vega:_")}function lge(e,t){return!(e==="parent"||t instanceof qf.proxy)}function cge(e){return this.runAsync(null,t=>{t._trigger=!1,t._runtime.setState(e)},t=>{t._trigger=!0}),this}function fge(e,t){function n(i){e({timestamp:Date.now(),elapsed:i})}this._timers.push(zoe(n,t))}function dge(e,t,n,i){const r=e.element();r&&r.setAttribute("title",hge(i))}function hge(e){return e==null?"":re(e)?XP(e):be(e)&&!Jo(e)?gge(e):e+""}function gge(e){return Object.keys(e).map(t=>{const n=e[t];return t+": "+(re(n)?XP(n):VP(n))}).join(`
`)}function XP(e){return"["+e.map(VP).join(", ")+"]"}function VP(e){return re(e)?"[]":be(e)&&!Jo(e)?"{}":e}function pge(){if(this.renderer()==="canvas"&&this._renderer._canvas){let e=null;const t=()=>{e!=null&&e();const n=matchMedia(`(resolution: ${window.devicePixelRatio}dppx)`);n.addEventListener("change",t),e=()=>{n.removeEventListener("change",t)},this._renderer._canvas.getContext("2d").pixelRatio=window.devicePixelRatio||1,this._redraw=!0,this._resize=1,this.resize().runAsync()};t()}}function WP(e,t){const n=this;if(t=t||{},$f.call(n),t.loader&&n.loader(t.loader),t.logger&&n.logger(t.logger),t.logLevel!=null&&n.logLevel(t.logLevel),t.locale||e.locale){const a=Pe({},e.locale,t.locale);n.locale(G9(a.number,a.time))}n._el=null,n._elBind=null,n._renderType=t.renderer||Xo.Canvas,n._scenegraph=new jU;const i=n._scenegraph.root;n._renderer=null,n._tooltip=t.tooltip||dge,n._redraw=!0,n._handler=new Zp().scene(i),n._globalCursor=!1,n._preventDefault=!1,n._timers=[],n._eventListeners=[],n._resizeListeners=[],n._eventConfig=Rhe(e.eventConfig),n.globalCursor(n._eventConfig.globalCursor);const r=ige(n,e,t.expr);n._runtime=r,n._signals=r.signals,n._bind=(e.bindings||[]).map(a=>({state:null,param:Pe({},a)})),r.root&&r.root.set(i),i.source=r.data.root.input,n.pulse(r.data.root.input,n.changeset().insert(i.items)),n._width=n.width(),n._height=n.height(),n._viewWidth=GP(n,n._width),n._viewHeight=YP(n,n._height),n._origin=[0,0],n._resize=0,n._autosize=1,age(n),She(n),_he(n),n.description(e.description),t.hover&&n.hover(),t.container&&n.initialize(t.container,t.bind),t.watchPixelRatio&&n._watchPixelRatio()}function d1(e,t){return _e(e._signals,t)?e._signals[t]:te("Unrecognized signal name: "+ge(t))}function QP(e,t){const n=(e._targets||[]).filter(i=>i._update&&i._update.handler===t);return n.length?n[0]:null}function iz(e,t,n,i){let r=QP(n,i);return r||(r=FT(e,()=>i(t,n.value)),r.handler=i,e.on(n,null,r)),e}function rz(e,t,n){const i=QP(t,n);return i&&t._targets.remove(i),e}pe(WP,$f,{async evaluate(e,t,n){if(await $f.prototype.evaluate.call(this,e,t),this._redraw||this._resize)try{this._renderer&&(this._resize&&(this._resize=0,Che(this)),await this._renderer.renderAsync(this._scenegraph.root)),this._redraw=!1}catch(i){this.error(i)}return n&&C1(this,n),this},dirty(e){this._redraw=!0,this._renderer&&this._renderer.dirty(e)},description(e){if(arguments.length){const t=e!=null?e+"":null;return t!==this._desc&&UP(this._el,this._desc=t),this}return this._desc},container(){return this._el},scenegraph(){return this._scenegraph},origin(){return this._origin.slice()},signal(e,t,n){const i=d1(this,e);return arguments.length===1?i.value:this.update(i,t,n)},width(e){return arguments.length?this.signal("width",e):this.signal("width")},height(e){return arguments.length?this.signal("height",e):this.signal("height")},padding(e){return arguments.length?this.signal("padding",tz(e)):tz(this.signal("padding"))},autosize(e){return arguments.length?this.signal("autosize",e):this.signal("autosize")},background(e){return arguments.length?this.signal("background",e):this.signal("background")},renderer(e){return arguments.length?(Eb(e)||te("Unrecognized renderer type: "+e),e!==this._renderType&&(this._renderType=e,this._resetRenderer()),this):this._renderType},tooltip(e){return arguments.length?(e!==this._tooltip&&(this._tooltip=e,this._resetRenderer()),this):this._tooltip},loader(e){return arguments.length?(e!==this._loader&&($f.prototype.loader.call(this,e),this._resetRenderer()),this):this._loader},resize(){return this._autosize=1,this.touch(d1(this,"autosize"))},_resetRenderer(){this._renderer&&(this._renderer=null,this.initialize(this._el,this._elBind))},_resizeView:sge,addEventListener(e,t,n){let i=t;return n&&n.trap===!1||(i=FT(this,t),i.raw=t),this._handler.on(e,i),this},removeEventListener(e,t){for(var n=this._handler.handlers(e),i=n.length,r,a;--i>=0;)if(a=n[i].type,r=n[i].handler,e===a&&(t===r||t===r.raw)){this._handler.off(a,r);break}return this},addResizeListener(e){const t=this._resizeListeners;return t.includes(e)||t.push(e),this},removeResizeListener(e){var t=this._resizeListeners,n=t.indexOf(e);return n>=0&&t.splice(n,1),this},addSignalListener(e,t){return iz(this,e,d1(this,e),t)},removeSignalListener(e,t){return rz(this,d1(this,e),t)},addDataListener(e,t){return iz(this,e,lv(this,e).values,t)},removeDataListener(e,t){return rz(this,lv(this,e).values,t)},globalCursor(e){if(arguments.length){if(this._globalCursor!==!!e){const t=xA(this,null);this._globalCursor=!!e,t&&xA(this,t)}return this}else return this._globalCursor},preventDefault(e){return arguments.length?(this._preventDefault=e,this):this._preventDefault},timer:fge,events:zhe,finalize:Lhe,hover:Fhe,data:whe,change:Nb,insert:Ahe,remove:$he,scale:rge,initialize:Zhe,toImageURL:Jhe,toCanvas:tge,toSVG:nge,getState:oge,setState:cge,_watchPixelRatio:pge});const mge="view",fv="[",dv="]",ZP="{",KP="}",yge=":",JP=",",vge="@",bge=">",xge=/[[\]{}]/,Ege={"*":1,arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1};let eq,tq;function $u(e,t,n){return eq=t||mge,tq=n||Ege,nq(e.trim()).map(EA)}function Sge(e){return tq[e]}function Wg(e,t,n,i,r){const a=e.length;let s=0,o;for(;t<a;++t){if(o=e[t],!s&&o===n)return t;r&&r.includes(o)?--s:i&&i.includes(o)&&++s}return t}function nq(e){const t=[],n=e.length;let i=0,r=0;for(;r<n;)r=Wg(e,r,JP,fv+ZP,dv+KP),t.push(e.substring(i,r).trim()),i=++r;if(t.length===0)throw"Empty event selector: "+e;return t}function EA(e){return e[0]==="["?_ge(e):wge(e)}function _ge(e){const t=e.length;let n=1,i;if(n=Wg(e,n,dv,fv,dv),n===t)throw"Empty between selector: "+e;if(i=nq(e.substring(1,n)),i.length!==2)throw"Between selector must have two elements: "+e;if(e=e.slice(n+1).trim(),e[0]!==bge)throw"Expected '>' after between selector: "+e;i=i.map(EA);const r=EA(e.slice(1).trim());return r.between?{between:i,stream:r}:(r.between=i,r)}function wge(e){const t={source:eq},n=[];let i=[0,0],r=0,a=0,s=e.length,o=0,l,f;if(e[s-1]===KP){if(o=e.lastIndexOf(ZP),o>=0){try{i=Age(e.substring(o+1,s-1))}catch{throw"Invalid throttle specification: "+e}e=e.slice(0,o).trim(),s=e.length}else throw"Unmatched right brace: "+e;o=0}if(!s)throw e;if(e[0]===vge&&(r=++o),l=Wg(e,o,yge),l<s&&(n.push(e.substring(a,l).trim()),a=o=++l),o=Wg(e,o,fv),o===s)n.push(e.substring(a,s).trim());else if(n.push(e.substring(a,o).trim()),f=[],a=++o,a===s)throw"Unmatched left bracket: "+e;for(;o<s;){if(o=Wg(e,o,dv),o===s)throw"Unmatched left bracket: "+e;if(f.push(e.substring(a,o).trim()),o<s-1&&e[++o]!==fv)throw"Expected left bracket: "+e;a=++o}if(!(s=n.length)||xge.test(n[s-1]))throw"Invalid event selector: "+e;return s>1?(t.type=n[1],r?t.markname=n[0].slice(1):Sge(n[0])?t.marktype=n[0]:t.source=n[0]):t.type=n[0],t.type.slice(-1)==="!"&&(t.consume=!0,t.type=t.type.slice(0,-1)),f!=null&&(t.filter=f),i[0]&&(t.throttle=i[0]),i[1]&&(t.debounce=i[1]),t}function Age(e){const t=e.split(JP);if(!e.length||t.length>2)throw e;return t.map(n=>{const i=+n;if(i!==i)throw e;return i})}function $ge(e){return be(e)?e:{type:e||"pad"}}const sg=e=>+e||0,Cge=e=>({top:e,bottom:e,left:e,right:e});function Tge(e){return be(e)?e.signal?e:{top:sg(e.top),bottom:sg(e.bottom),left:sg(e.left),right:sg(e.right)}:Cge(sg(e))}const _n=e=>be(e)&&!re(e)?Pe({},e):{value:e};function az(e,t,n,i){return n!=null?(be(n)&&!re(n)||re(n)&&n.length&&be(n[0])?e.update[t]=n:e[i||"enter"][t]={value:n},1):0}function Bn(e,t,n){for(const i in t)az(e,i,t[i]);for(const i in n)az(e,i,n[i],"update")}function Rd(e,t,n){for(const i in t)n&&_e(n,i)||(e[i]=Pe(e[i]||{},t[i]));return e}function yf(e,t){return t&&(t.enter&&t.enter[e]||t.update&&t.update[e])}const BT="mark",IT="frame",PT="scope",Mge="axis",kge="axis-domain",Oge="axis-grid",Dge="axis-label",Rge="axis-tick",Nge="axis-title",zge="legend",Fge="legend-band",Lge="legend-entry",Uge="legend-gradient",iq="legend-label",Bge="legend-symbol",Ige="legend-title",Pge="title",qge="title-text",jge="title-subtitle";function Hge(e,t,n,i,r){const a={},s={};let o,l,f,d;l="lineBreak",t==="text"&&r[l]!=null&&!yf(l,e)&&r_(a,l,r[l]),(n=="legend"||String(n).startsWith("axis"))&&(n=null),d=n===IT?r.group:n===BT?Pe({},r.mark,r[t]):null;for(l in d)f=yf(l,e)||(l==="fill"||l==="stroke")&&(yf("fill",e)||yf("stroke",e)),f||r_(a,l,d[l]);Ee(i).forEach(g=>{const p=r.style&&r.style[g];for(const y in p)yf(y,e)||r_(a,y,p[y])}),e=Pe({},e);for(l in a)d=a[l],d.signal?(o=o||{})[l]=d:s[l]=d;return e.enter=Pe(s,e.enter),o&&(e.update=Pe(o,e.update)),e}function r_(e,t,n){e[t]=n&&n.signal?{signal:n.signal}:{value:n}}const rq=e=>ve(e)?ge(e):e.signal?`(${e.signal})`:aq(e);function Fb(e){if(e.gradient!=null)return Yge(e);let t=e.signal?`(${e.signal})`:e.color?Gge(e.color):e.field!=null?aq(e.field):e.value!==void 0?ge(e.value):void 0;return e.scale!=null&&(t=Xge(e,t)),t===void 0&&(t=null),e.exponent!=null&&(t=`pow(${t},${G1(e.exponent)})`),e.mult!=null&&(t+=`*${G1(e.mult)}`),e.offset!=null&&(t+=`+${G1(e.offset)}`),e.round&&(t=`round(${t})`),t}const h1=(e,t,n,i)=>`(${e}(${[t,n,i].map(Fb).join(",")})+'')`;function Gge(e){return e.c?h1("hcl",e.h,e.c,e.l):e.h||e.s?h1("hsl",e.h,e.s,e.l):e.l||e.a?h1("lab",e.l,e.a,e.b):e.r||e.g||e.b?h1("rgb",e.r,e.g,e.b):null}function Yge(e){const t=[e.start,e.stop,e.count].map(n=>n==null?null:ge(n));for(;t.length&&Je(t)==null;)t.pop();return t.unshift(rq(e.gradient)),`gradient(${t.join(",")})`}function G1(e){return be(e)?"("+Fb(e)+")":e}function aq(e){return sq(be(e)?e:{datum:e})}function sq(e){let t,n,i;if(e.signal)t="datum",i=e.signal;else if(e.group||e.parent){for(n=Math.max(1,e.level||1),t="item";n-- >0;)t+=".mark.group";e.parent?(i=e.parent,t+=".datum"):i=e.group}else e.datum?(t="datum",i=e.datum):te("Invalid field reference: "+ge(e));return e.signal||(i=ve(i)?Za(i).map(ge).join("]["):sq(i)),t+"["+i+"]"}function Xge(e,t){const n=rq(e.scale);return e.range!=null?t=`lerp(_range(${n}), ${+e.range})`:(t!==void 0&&(t=`_scale(${n}, ${t})`),e.band&&(t=(t?t+"+":"")+`_bandwidth(${n})`+(+e.band==1?"":"*"+G1(e.band)),e.extra&&(t=`(datum.extra ? _scale(${n}, datum.extra.value) : ${t})`)),t==null&&(t="0")),t}function Vge(e){let t="";return e.forEach(n=>{const i=Fb(n);t+=n.test?`(${n.test})?${i}:`:i}),Je(t)===":"&&(t+="null"),t}function oq(e,t,n,i,r,a){const s={};a=a||{},a.encoders={$encode:s},e=Hge(e,t,n,i,r.config);for(const o in e)s[o]=Wge(e[o],t,a,r);return a}function Wge(e,t,n,i){const r={},a={};for(const s in e)e[s]!=null&&(r[s]=Zge(Qge(e[s]),i,n,a));return{$expr:{marktype:t,channels:r},$fields:Object.keys(a),$output:Object.keys(e)}}function Qge(e){return re(e)?Vge(e):Fb(e)}function Zge(e,t,n,i){const r=Xa(e,t);return r.$fields.forEach(a=>i[a]=1),Pe(n,r.$params),r.$expr}const Kge="outer",Jge=["value","update","init","react","bind"];function sz(e,t){te(e+' for "outer" push: '+ge(t))}function uq(e,t){const n=e.name;if(e.push===Kge)t.signals[n]||sz("No prior signal definition",n),Jge.forEach(i=>{e[i]!==void 0&&sz("Invalid property ",i)});else{const i=t.addSignal(n,e.value);e.react===!1&&(i.react=!1),e.bind&&t.addBinding(n,e.bind)}}function SA(e,t,n,i){this.id=-1,this.type=e,this.value=t,this.params=n,i&&(this.parent=i)}function Lb(e,t,n,i){return new SA(e,t,n,i)}function hv(e,t){return Lb("operator",e,t)}function Me(e){const t={$ref:e.id};return e.id<0&&(e.refs=e.refs||[]).push(t),t}function xp(e,t){return t?{$field:e,$name:t}:{$field:e}}const _A=xp("key");function oz(e,t){return{$compare:e,$order:t}}function epe(e,t){const n={$key:e};return t&&(n.$flat=!0),n}const tpe="ascending",npe="descending";function ipe(e){return be(e)?(e.order===npe?"-":"+")+Ub(e.op,e.field):""}function Ub(e,t){return(e&&e.signal?"$"+e.signal:e||"")+(e&&t?"_":"")+(t&&t.signal?"$"+t.signal:t||"")}const qT="scope",wA="view";function fn(e){return e&&e.signal}function rpe(e){return e&&e.expr}function Y1(e){if(fn(e))return!0;if(be(e)){for(const t in e)if(Y1(e[t]))return!0}return!1}function Xr(e,t){return e??t}function $l(e){return e&&e.signal||e}const uz="timer";function Ep(e,t){return(e.merge?spe:e.stream?ope:e.type?upe:te("Invalid stream specification: "+ge(e)))(e,t)}function ape(e){return e===qT?wA:e||wA}function spe(e,t){const n=e.merge.map(r=>Ep(r,t)),i=jT({merge:n},e,t);return t.addStream(i).id}function ope(e,t){const n=Ep(e.stream,t),i=jT({stream:n},e,t);return t.addStream(i).id}function upe(e,t){let n;e.type===uz?(n=t.event(uz,e.throttle),e={between:e.between,filter:e.filter}):n=t.event(ape(e.source),e.type);const i=jT({stream:n},e,t);return Object.keys(i).length===1?n:t.addStream(i).id}function jT(e,t,n){let i=t.between;return i&&(i.length!==2&&te('Stream "between" parameter must have 2 entries: '+ge(t)),e.between=[Ep(i[0],n),Ep(i[1],n)]),i=t.filter?[].concat(t.filter):[],(t.marktype||t.markname||t.markrole)&&i.push(lpe(t.marktype,t.markname,t.markrole)),t.source===qT&&i.push("inScope(event.item)"),i.length&&(e.filter=Xa("("+i.join(")&&(")+")",n).$expr),(i=t.throttle)!=null&&(e.throttle=+i),(i=t.debounce)!=null&&(e.debounce=+i),t.consume&&(e.consume=!0),e}function lpe(e,t,n){const i="event.item";return i+(e&&e!=="*"?"&&"+i+".mark.marktype==='"+e+"'":"")+(n?"&&"+i+".mark.role==='"+n+"'":"")+(t?"&&"+i+".mark.name==='"+t+"'":"")}const cpe={code:"_.$value",ast:{type:"Identifier",value:"value"}};function fpe(e,t,n){const i=e.encode,r={target:n};let a=e.events,s=e.update,o=[];a||te("Signal update missing events specification."),ve(a)&&(a=$u(a,t.isSubscope()?qT:wA)),a=Ee(a).filter(l=>l.signal||l.scale?(o.push(l),0):1),o.length>1&&(o=[hpe(o)]),a.length&&o.push(a.length>1?{merge:a}:a[0]),i!=null&&(s&&te("Signal encode and update are mutually exclusive."),s="encode(item(),"+ge(i)+")"),r.update=ve(s)?Xa(s,t):s.expr!=null?Xa(s.expr,t):s.value!=null?s.value:s.signal!=null?{$expr:cpe,$params:{$value:t.signalRef(s.signal)}}:te("Invalid signal update specification."),e.force&&(r.options={force:!0}),o.forEach(l=>t.addUpdate(Pe(dpe(l,t),r)))}function dpe(e,t){return{source:e.signal?t.signalRef(e.signal):e.scale?t.scaleRef(e.scale):Ep(e,t)}}function hpe(e){return{signal:"["+e.map(t=>t.scale?'scale("'+t.scale+'")':t.signal)+"]"}}function gpe(e,t){const n=t.getSignal(e.name);let i=e.update;e.init&&(i?te("Signals can not include both init and update expressions."):(i=e.init,n.initonly=!0)),i&&(i=Xa(i,t),n.update=i.$expr,n.params=i.$params),e.on&&e.on.forEach(r=>fpe(r,t,n.id))}const St=e=>(t,n,i)=>Lb(e,n,t||void 0,i),lq=St("aggregate"),ppe=St("axisticks"),cq=St("bound"),da=St("collect"),lz=St("compare"),mpe=St("datajoin"),fq=St("encode"),ype=St("expression"),vpe=St("facet"),bpe=St("field"),xpe=St("key"),Epe=St("legendentries"),Spe=St("load"),_pe=St("mark"),wpe=St("multiextent"),Ape=St("multivalues"),$pe=St("overlap"),Cpe=St("params"),dq=St("prefacet"),Tpe=St("projection"),Mpe=St("proxy"),kpe=St("relay"),hq=St("render"),Ope=St("scale"),oc=St("sieve"),Dpe=St("sortitems"),gq=St("viewlayout"),Rpe=St("values");let Npe=0;const pq={min:"min",max:"max",count:"sum"};function zpe(e,t){const n=e.type||"linear";nU(n)||te("Unrecognized scale type: "+ge(n)),t.addScale(e.name,{type:n,domain:void 0})}function Fpe(e,t){const n=t.getScale(e.name).params;let i;n.domain=mq(e.domain,e,t),e.range!=null&&(n.range=vq(e,t,n)),e.interpolate!=null&&Ype(e.interpolate,n),e.nice!=null&&(n.nice=Gpe(e.nice,t)),e.bins!=null&&(n.bins=Hpe(e.bins,t));for(i in e)_e(n,i)||i==="name"||(n[i]=$r(e[i],t))}function $r(e,t){return be(e)?e.signal?t.signalRef(e.signal):te("Unsupported object: "+ge(e)):e}function X1(e,t){return e.signal?t.signalRef(e.signal):e.map(n=>$r(n,t))}function Bb(e){te("Can not find data set: "+ge(e))}function mq(e,t,n){if(!e){(t.domainMin!=null||t.domainMax!=null)&&te("No scale domain defined for domainMin/domainMax to override.");return}return e.signal?n.signalRef(e.signal):(re(e)?Lpe:e.fields?Bpe:Upe)(e,t,n)}function Lpe(e,t,n){return e.map(i=>$r(i,n))}function Upe(e,t,n){const i=n.getData(e.data);return i||Bb(e.data),Xf(t.type)?i.valuesRef(n,e.field,yq(e.sort,!1)):aU(t.type)?i.domainRef(n,e.field):i.extentRef(n,e.field)}function Bpe(e,t,n){const i=e.data,r=e.fields.reduce((a,s)=>(s=ve(s)?{data:i,field:s}:re(s)||s.signal?Ipe(s,n):s,a.push(s),a),[]);return(Xf(t.type)?Ppe:aU(t.type)?qpe:jpe)(e,n,r)}function Ipe(e,t){const n="_:vega:_"+Npe++,i=da({});if(re(e))i.value={$ingest:e};else if(e.signal){const r="setdata("+ge(n)+","+e.signal+")";i.params.input=t.signalRef(r)}return t.addDataPipeline(n,[i,oc({})]),{data:n,field:"data"}}function Ppe(e,t,n){const i=yq(e.sort,!0);let r,a;const s=n.map(f=>{const d=t.getData(f.data);return d||Bb(f.data),d.countsRef(t,f.field,i)}),o={groupby:_A,pulse:s};i&&(r=i.op||"count",a=i.field?Ub(r,i.field):"count",o.ops=[pq[r]],o.fields=[t.fieldRef(a)],o.as=[a]),r=t.add(lq(o));const l=t.add(da({pulse:Me(r)}));return a=t.add(Rpe({field:_A,sort:t.sortRef(i),pulse:Me(l)})),Me(a)}function yq(e,t){return e&&(!e.field&&!e.op?be(e)?e.field="key":e={field:"key"}:!e.field&&e.op!=="count"?te("No field provided for sort aggregate op: "+e.op):t&&e.field&&e.op&&!pq[e.op]&&te("Multiple domain scales can not be sorted using "+e.op)),e}function qpe(e,t,n){const i=n.map(r=>{const a=t.getData(r.data);return a||Bb(r.data),a.domainRef(t,r.field)});return Me(t.add(Ape({values:i})))}function jpe(e,t,n){const i=n.map(r=>{const a=t.getData(r.data);return a||Bb(r.data),a.extentRef(t,r.field)});return Me(t.add(wpe({extents:i})))}function Hpe(e,t){return e.signal||re(e)?X1(e,t):t.objectProperty(e)}function Gpe(e,t){return e.signal?t.signalRef(e.signal):be(e)?{interval:$r(e.interval),step:$r(e.step)}:$r(e)}function Ype(e,t){t.interpolate=$r(e.type||e),e.gamma!=null&&(t.interpolateGamma=$r(e.gamma))}function vq(e,t,n){const i=t.config.range;let r=e.range;if(r.signal)return t.signalRef(r.signal);if(ve(r)){if(i&&_e(i,r))return e=Pe({},e,{range:i[r]}),vq(e,t,n);r==="width"?r=[0,{signal:"width"}]:r==="height"?r=Xf(e.type)?[0,{signal:"height"}]:[{signal:"height"},0]:te("Unrecognized scale range value: "+ge(r))}else if(r.scheme){n.scheme=re(r.scheme)?X1(r.scheme,t):$r(r.scheme,t),r.extent&&(n.schemeExtent=X1(r.extent,t)),r.count&&(n.schemeCount=$r(r.count,t));return}else if(r.step){n.rangeStep=$r(r.step,t);return}else{if(Xf(e.type)&&!re(r))return mq(r,e,t);re(r)||te("Unsupported range type: "+ge(r))}return r.map(a=>(re(a)?X1:$r)(a,t))}function Xpe(e,t){const n=t.config.projection||{},i={};for(const r in e)r!=="name"&&(i[r]=AA(e[r],r,t));for(const r in n)i[r]==null&&(i[r]=AA(n[r],r,t));t.addProjection(e.name,i)}function AA(e,t,n){return re(e)?e.map(i=>AA(i,t,n)):be(e)?e.signal?n.signalRef(e.signal):t==="fit"?e:te("Unsupported parameter object: "+ge(e)):e}const ha="top",Nd="left",zd="right",gu="bottom",bq="center",Vpe="vertical",Wpe="start",Qpe="middle",Zpe="end",$A="index",HT="label",Kpe="offset",nd="perc",Jpe="perc2",Tr="value",s0="guide-label",GT="guide-title",e0e="group-title",t0e="group-subtitle",cz="symbol",V1="gradient",CA="discrete",TA="size",n0e="shape",i0e="fill",r0e="stroke",a0e="strokeWidth",s0e="strokeDash",o0e="opacity",YT=[TA,n0e,i0e,r0e,a0e,s0e,o0e],o0={name:1,style:1,interactive:1},tt={value:0},Mr={value:1},Ib="group",xq="rect",XT="rule",u0e="symbol",uc="text";function Sp(e){return e.type=Ib,e.interactive=e.interactive||!1,e}function Ii(e,t){const n=(i,r)=>Xr(e[i],Xr(t[i],r));return n.isVertical=i=>Vpe===Xr(e.direction,t.direction||(i?t.symbolDirection:t.gradientDirection)),n.gradientLength=()=>Xr(e.gradientLength,t.gradientLength||t.gradientWidth),n.gradientThickness=()=>Xr(e.gradientThickness,t.gradientThickness||t.gradientHeight),n.entryColumns=()=>Xr(e.columns,Xr(t.columns,+n.isVertical(!0))),n}function Eq(e,t){const n=t&&(t.update&&t.update[e]||t.enter&&t.enter[e]);return n&&n.signal?n:n?n.value:null}function l0e(e,t,n){const i=t.config.style[n];return i&&i[e]}function Pb(e,t,n){return`item.anchor === '${Wpe}' ? ${e} : item.anchor === '${Zpe}' ? ${t} : ${n}`}const VT=Pb(ge(Nd),ge(zd),ge(bq));function c0e(e){const t=e("tickBand");let n=e("tickOffset"),i,r;return t?t.signal?(i={signal:`(${t.signal}) === 'extent' ? 1 : 0.5`},r={signal:`(${t.signal}) === 'extent'`},be(n)||(n={signal:`(${t.signal}) === 'extent' ? 0 : ${n}`})):t==="extent"?(i=1,r=!0,n=0):(i=.5,r=!1):(i=e("bandPosition"),r=e("tickExtra")),{extra:r,band:i,offset:n}}function Sq(e,t){return t?e?be(e)?Object.assign({},e,{offset:Sq(e.offset,t)}):{value:e,offset:t}:t:e}function cr(e,t){return t?(e.name=t.name,e.style=t.style||e.style,e.interactive=!!t.interactive,e.encode=Rd(e.encode,t,o0)):e.interactive=!1,e}function f0e(e,t,n,i){const r=Ii(e,n),a=r.isVertical(),s=r.gradientThickness(),o=r.gradientLength();let l,f,d,g,p;a?(f=[0,1],d=[0,0],g=s,p=o):(f=[0,0],d=[1,0],g=o,p=s);const y={enter:l={opacity:tt,x:tt,y:tt,width:_n(g),height:_n(p)},update:Pe({},l,{opacity:Mr,fill:{gradient:t,start:f,stop:d}}),exit:{opacity:tt}};return Bn(y,{stroke:r("gradientStrokeColor"),strokeWidth:r("gradientStrokeWidth")},{opacity:r("gradientOpacity")}),cr({type:xq,role:Uge,encode:y},i)}function d0e(e,t,n,i,r){const a=Ii(e,n),s=a.isVertical(),o=a.gradientThickness(),l=a.gradientLength();let f,d,g,p,y="";s?(f="y",g="y2",d="x",p="width",y="1-"):(f="x",g="x2",d="y",p="height");const v={opacity:tt,fill:{scale:t,field:Tr}};v[f]={signal:y+"datum."+nd,mult:l},v[d]=tt,v[g]={signal:y+"datum."+Jpe,mult:l},v[p]=_n(o);const b={enter:v,update:Pe({},v,{opacity:Mr}),exit:{opacity:tt}};return Bn(b,{stroke:a("gradientStrokeColor"),strokeWidth:a("gradientStrokeWidth")},{opacity:a("gradientOpacity")}),cr({type:xq,role:Fge,key:Tr,from:r,encode:b},i)}const h0e=`datum.${nd}<=0?"${Nd}":datum.${nd}>=1?"${zd}":"${bq}"`,g0e=`datum.${nd}<=0?"${gu}":datum.${nd}>=1?"${ha}":"${Qpe}"`;function fz(e,t,n,i){const r=Ii(e,t),a=r.isVertical(),s=_n(r.gradientThickness()),o=r.gradientLength();let l=r("labelOverlap"),f,d,g,p,y="";const v={enter:f={opacity:tt},update:d={opacity:Mr,text:{field:HT}},exit:{opacity:tt}};return Bn(v,{fill:r("labelColor"),fillOpacity:r("labelOpacity"),font:r("labelFont"),fontSize:r("labelFontSize"),fontStyle:r("labelFontStyle"),fontWeight:r("labelFontWeight"),limit:Xr(e.labelLimit,t.gradientLabelLimit)}),a?(f.align={value:"left"},f.baseline=d.baseline={signal:g0e},g="y",p="x",y="1-"):(f.align=d.align={signal:h0e},f.baseline={value:"top"},g="x",p="y"),f[g]=d[g]={signal:y+"datum."+nd,mult:o},f[p]=d[p]=s,s.offset=Xr(e.labelOffset,t.gradientLabelOffset)||0,l=l?{separation:r("labelSeparation"),method:l,order:"datum."+$A}:void 0,cr({type:uc,role:iq,style:s0,key:Tr,from:i,encode:v,overlap:l},n)}function p0e(e,t,n,i,r){const a=Ii(e,t),s=n.entries,o=!!(s&&s.interactive),l=s?s.name:void 0,f=a("clipHeight"),d=a("symbolOffset"),g={data:"value"},p=`(${r}) ? datum.${Kpe} : datum.${TA}`,y=f?_n(f):{field:TA},v=`datum.${$A}`,b=`max(1, ${r})`;let E,_,w,A,$;y.mult=.5,E={enter:_={opacity:tt,x:{signal:p,mult:.5,offset:d},y},update:w={opacity:Mr,x:_.x,y:_.y},exit:{opacity:tt}};let C=null,k=null;e.fill||(C=t.symbolBaseFillColor,k=t.symbolBaseStrokeColor),Bn(E,{fill:a("symbolFillColor",C),shape:a("symbolType"),size:a("symbolSize"),stroke:a("symbolStrokeColor",k),strokeDash:a("symbolDash"),strokeDashOffset:a("symbolDashOffset"),strokeWidth:a("symbolStrokeWidth")},{opacity:a("symbolOpacity")}),YT.forEach(B=>{e[B]&&(w[B]=_[B]={scale:e[B],field:Tr})});const M=cr({type:u0e,role:Bge,key:Tr,from:g,clip:f?!0:void 0,encode:E},n.symbols),R=_n(d);R.offset=a("labelOffset"),E={enter:_={opacity:tt,x:{signal:p,offset:R},y},update:w={opacity:Mr,text:{field:HT},x:_.x,y:_.y},exit:{opacity:tt}},Bn(E,{align:a("labelAlign"),baseline:a("labelBaseline"),fill:a("labelColor"),fillOpacity:a("labelOpacity"),font:a("labelFont"),fontSize:a("labelFontSize"),fontStyle:a("labelFontStyle"),fontWeight:a("labelFontWeight"),limit:a("labelLimit")});const z=cr({type:uc,role:iq,style:s0,key:Tr,from:g,encode:E},n.labels);return E={enter:{noBound:{value:!f},width:tt,height:f?_n(f):tt,opacity:tt},exit:{opacity:tt},update:w={opacity:Mr,row:{signal:null},column:{signal:null}}},a.isVertical(!0)?(A=`ceil(item.mark.items.length / ${b})`,w.row.signal=`${v}%${A}`,w.column.signal=`floor(${v} / ${A})`,$={field:["row",v]}):(w.row.signal=`floor(${v} / ${b})`,w.column.signal=`${v} % ${b}`,$={field:v}),w.column.signal=`(${r})?${w.column.signal}:${v}`,i={facet:{data:i,name:"value",groupby:$A}},Sp({role:PT,from:i,encode:Rd(E,s,o0),marks:[M,z],name:l,interactive:o,sort:$})}function m0e(e,t){const n=Ii(e,t);return{align:n("gridAlign"),columns:n.entryColumns(),center:{row:!0,column:!1},padding:{row:n("rowPadding"),column:n("columnPadding")}}}const WT='item.orient === "left"',QT='item.orient === "right"',qb=`(${WT} || ${QT})`,y0e=`datum.vgrad && ${qb}`,v0e=Pb('"top"','"bottom"','"middle"'),b0e=Pb('"right"','"left"','"center"'),x0e=`datum.vgrad && ${QT} ? (${b0e}) : (${qb} && !(datum.vgrad && ${WT})) ? "left" : ${VT}`,E0e=`item._anchor || (${qb} ? "middle" : "start")`,S0e=`${y0e} ? (${WT} ? -90 : 90) : 0`,_0e=`${qb} ? (datum.vgrad ? (${QT} ? "bottom" : "top") : ${v0e}) : "top"`;function w0e(e,t,n,i){const r=Ii(e,t),a={enter:{opacity:tt},update:{opacity:Mr,x:{field:{group:"padding"}},y:{field:{group:"padding"}}},exit:{opacity:tt}};return Bn(a,{orient:r("titleOrient"),_anchor:r("titleAnchor"),anchor:{signal:E0e},angle:{signal:S0e},align:{signal:x0e},baseline:{signal:_0e},text:e.title,fill:r("titleColor"),fillOpacity:r("titleOpacity"),font:r("titleFont"),fontSize:r("titleFontSize"),fontStyle:r("titleFontStyle"),fontWeight:r("titleFontWeight"),limit:r("titleLimit"),lineHeight:r("titleLineHeight")},{align:r("titleAlign"),baseline:r("titleBaseline")}),cr({type:uc,role:Ige,style:GT,from:i,encode:a},n)}function A0e(e,t){let n;return be(e)&&(e.signal?n=e.signal:e.path?n="pathShape("+dz(e.path)+")":e.sphere&&(n="geoShape("+dz(e.sphere)+', {type: "Sphere"})')),n?t.signalRef(n):!!e}function dz(e){return be(e)&&e.signal?e.signal:ge(e)}function _q(e){const t=e.role||"";return t.startsWith("axis")||t.startsWith("legend")||t.startsWith("title")?t:e.type===Ib?PT:t||BT}function $0e(e){return{marktype:e.type,name:e.name||void 0,role:e.role||_q(e),zindex:+e.zindex||void 0,aria:e.aria,description:e.description}}function C0e(e,t){return e&&e.signal?t.signalRef(e.signal):e!==!1}function ZT(e,t){const n=r7(e.type);n||te("Unrecognized transform type: "+ge(e.type));const i=Lb(n.type.toLowerCase(),null,wq(n,e,t));return e.signal&&t.addSignal(e.signal,t.proxy(i)),i.metadata=n.metadata||{},i}function wq(e,t,n){const i={},r=e.params.length;for(let a=0;a<r;++a){const s=e.params[a];i[s.name]=T0e(s,t,n)}return i}function T0e(e,t,n){const i=e.type,r=t[e.name];if(i==="index")return M0e(e,t,n);if(r===void 0){e.required&&te("Missing required "+ge(t.type)+" parameter: "+ge(e.name));return}else{if(i==="param")return k0e(e,t,n);if(i==="projection")return n.projectionRef(t[e.name])}return e.array&&!fn(r)?r.map(a=>hz(e,a,n)):hz(e,r,n)}function hz(e,t,n){const i=e.type;if(fn(t))return pz(i)?te("Expression references can not be signals."):a_(i)?n.fieldRef(t):mz(i)?n.compareRef(t):n.signalRef(t.signal);{const r=e.expr||a_(i);return r&&O0e(t)?n.exprRef(t.expr,t.as):r&&D0e(t)?xp(t.field,t.as):pz(i)?Xa(t,n):R0e(i)?Me(n.getData(t).values):a_(i)?xp(t):mz(i)?n.compareRef(t):t}}function M0e(e,t,n){return ve(t.from)||te('Lookup "from" parameter must be a string literal.'),n.getData(t.from).lookupRef(n,t.key)}function k0e(e,t,n){const i=t[e.name];return e.array?(re(i)||te("Expected an array of sub-parameters. Instead: "+ge(i)),i.map(r=>gz(e,r,n))):gz(e,i,n)}function gz(e,t,n){const i=e.params.length;let r;for(let s=0;s<i;++s){r=e.params[s];for(const o in r.key)if(r.key[o]!==t[o]){r=null;break}if(r)break}r||te("Unsupported parameter: "+ge(t));const a=Pe(wq(r,t,n),r.key);return Me(n.add(Cpe(a)))}const O0e=e=>e&&e.expr,D0e=e=>e&&e.field,R0e=e=>e==="data",pz=e=>e==="expr",a_=e=>e==="field",mz=e=>e==="compare";function N0e(e,t,n){let i,r,a,s,o;return e?(i=e.facet)&&(t||te("Only group marks can be faceted."),i.field!=null?s=o=W1(i,n):(e.data?o=Me(n.getData(e.data).aggregate):(a=ZT(Pe({type:"aggregate",groupby:Ee(i.groupby)},i.aggregate),n),a.params.key=n.keyRef(i.groupby),a.params.pulse=W1(i,n),s=o=Me(n.add(a))),r=n.keyRef(i.groupby,!0))):s=Me(n.add(da(null,[{}]))),s||(s=W1(e,n)),{key:r,pulse:s,parent:o}}function W1(e,t){return e.$ref?e:e.data&&e.data.$ref?e.data:Me(t.getData(e.data).output)}function jl(e,t,n,i,r){this.scope=e,this.input=t,this.output=n,this.values=i,this.aggregate=r,this.index={}}jl.fromEntries=function(e,t){const n=t.length,i=t[n-1],r=t[n-2];let a=t[0],s=null,o=1;for(a&&a.type==="load"&&(a=t[1]),e.add(t[0]);o<n;++o)t[o].params.pulse=Me(t[o-1]),e.add(t[o]),t[o].type==="aggregate"&&(s=t[o]);return new jl(e,a,r,i,s)};function Aq(e){return ve(e)?e:null}function yz(e,t,n){const i=Ub(n.op,n.field);let r;if(t.ops){for(let a=0,s=t.as.length;a<s;++a)if(t.as[a]===i)return}else t.ops=["count"],t.fields=[null],t.as=["count"];n.op&&(t.ops.push((r=n.op.signal)?e.signalRef(r):n.op),t.fields.push(e.fieldRef(n.field)),t.as.push(i))}function og(e,t,n,i,r,a,s){const o=t[n]||(t[n]={}),l=ipe(a);let f=Aq(r),d,g;if(f!=null&&(e=t.scope,f=f+(l?"|"+l:""),d=o[f]),!d){const p=a?{field:_A,pulse:t.countsRef(e,r,a)}:{field:e.fieldRef(r),pulse:Me(t.output)};l&&(p.sort=e.sortRef(a)),g=e.add(Lb(i,void 0,p)),s&&(t.index[r]=g),d=Me(g),f!=null&&(o[f]=d)}return d}jl.prototype={countsRef(e,t,n){const i=this,r=i.counts||(i.counts={}),a=Aq(t);let s,o,l;return a!=null&&(e=i.scope,s=r[a]),s?n&&n.field&&yz(e,s.agg.params,n):(l={groupby:e.fieldRef(t,"key"),pulse:Me(i.output)},n&&n.field&&yz(e,l,n),o=e.add(lq(l)),s=e.add(da({pulse:Me(o)})),s={agg:o,ref:Me(s)},a!=null&&(r[a]=s)),s.ref},tuplesRef(){return Me(this.values)},extentRef(e,t){return og(e,this,"extent","extent",t,!1)},domainRef(e,t){return og(e,this,"domain","values",t,!1)},valuesRef(e,t,n){return og(e,this,"vals","values",t,n||!0)},lookupRef(e,t){return og(e,this,"lookup","tupleindex",t,!1)},indataRef(e,t){return og(e,this,"indata","tupleindex",t,!0,!0)}};function z0e(e,t,n){const i=e.from.facet,r=i.name,a=W1(i,t);let s;i.name||te("Facet must have a name: "+ge(i)),i.data||te("Facet must reference a data set: "+ge(i)),i.field?s=t.add(dq({field:t.fieldRef(i.field),pulse:a})):i.groupby?s=t.add(vpe({key:t.keyRef(i.groupby),group:Me(t.proxy(n.parent)),pulse:a})):te("Facet must specify groupby or field: "+ge(i));const o=t.fork(),l=o.add(da()),f=o.add(oc({pulse:Me(l)}));o.addData(r,new jl(o,l,l,f)),o.addSignal("parent",null),s.params.subflow={$subflow:o.parse(e).toRuntime()}}function F0e(e,t,n){const i=t.add(dq({pulse:n.pulse})),r=t.fork();r.add(oc()),r.addSignal("parent",null),i.params.subflow={$subflow:r.parse(e).toRuntime()}}function $q(e,t,n){const i=e.remove,r=e.insert,a=e.toggle,s=e.modify,o=e.values,l=t.add(hv()),f="if("+e.trigger+',modify("'+n+'",'+[r,i,a,s,o].map(g=>g??"null").join(",")+"),0)",d=Xa(f,t);l.update=d.$expr,l.params=d.$params}function jb(e,t){const n=_q(e),i=e.type===Ib,r=e.from&&e.from.facet,a=e.overlap;let s=e.layout||n===PT||n===IT,o,l,f,d,g,p,y;const v=n===BT||s||r,b=N0e(e.from,i,t);l=t.add(mpe({key:b.key||(e.key?xp(e.key):void 0),pulse:b.pulse,clean:!i}));const E=Me(l);l=f=t.add(da({pulse:E})),l=t.add(_pe({markdef:$0e(e),interactive:C0e(e.interactive,t),clip:A0e(e.clip,t),context:{$context:!0},groups:t.lookup(),parent:t.signals.parent?t.signalRef("parent"):null,index:t.markpath(),pulse:Me(l)}));const _=Me(l);l=d=t.add(fq(oq(e.encode,e.type,n,e.style,t,{mod:!1,pulse:_}))),l.params.parent=t.encode(),e.transform&&e.transform.forEach(k=>{const M=ZT(k,t),R=M.metadata;(R.generates||R.changes)&&te("Mark transforms should not generate new data."),R.nomod||(d.params.mod=!0),M.params.pulse=Me(l),t.add(l=M)}),e.sort&&(l=t.add(Dpe({sort:t.compareRef(e.sort),pulse:Me(l)})));const w=Me(l);(r||s)&&(s=t.add(gq({layout:t.objectProperty(e.layout),legends:t.legends,mark:_,pulse:w})),p=Me(s));const A=t.add(cq({mark:_,pulse:p||w}));y=Me(A),i&&(v&&(o=t.operators,o.pop(),s&&o.pop()),t.pushState(w,p||y,E),r?z0e(e,t,b):v?F0e(e,t,b):t.parse(e),t.popState(),v&&(s&&o.push(s),o.push(A))),a&&(y=L0e(a,y,t));const $=t.add(hq({pulse:y})),C=t.add(oc({pulse:Me($)},void 0,t.parent()));e.name!=null&&(g=e.name,t.addData(g,new jl(t,f,$,C)),e.on&&e.on.forEach(k=>{(k.insert||k.remove||k.toggle)&&te("Marks only support modify triggers."),$q(k,t,g)}))}function L0e(e,t,n){const i=e.method,r=e.bound,a=e.separation,s={separation:fn(a)?n.signalRef(a.signal):a,method:fn(i)?n.signalRef(i.signal):i,pulse:t};if(e.order&&(s.sort=n.compareRef({field:e.order})),r){const o=r.tolerance;s.boundTolerance=fn(o)?n.signalRef(o.signal):+o,s.boundScale=n.scaleRef(r.scale),s.boundOrient=r.orient}return Me(n.add($pe(s)))}function U0e(e,t){const n=t.config.legend,i=e.encode||{},r=Ii(e,n),a=i.legend||{},s=a.name||void 0,o=a.interactive,l=a.style,f={};let d=0,g,p,y;YT.forEach(A=>e[A]?(f[A]=e[A],d=d||e[A]):0),d||te("Missing valid scale for legend.");const v=B0e(e,t.scaleType(d)),b={title:e.title!=null,scales:f,type:v,vgrad:v!=="symbol"&&r.isVertical()},E=Me(t.add(da(null,[b]))),_={enter:{x:{value:0},y:{value:0}}},w=Me(t.add(Epe(p={type:v,scale:t.scaleRef(d),count:t.objectProperty(r("tickCount")),limit:t.property(r("symbolLimit")),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)})));return v===V1?(y=[f0e(e,d,n,i.gradient),fz(e,n,i.labels,w)],p.count=p.count||t.signalRef(`max(2,2*floor((${$l(r.gradientLength())})/100))`)):v===CA?y=[d0e(e,d,n,i.gradient,w),fz(e,n,i.labels,w)]:(g=m0e(e,n),y=[p0e(e,n,i,w,$l(g.columns))],p.size=q0e(e,t,y[0].marks)),y=[Sp({role:Lge,from:E,encode:_,marks:y,layout:g,interactive:o})],b.title&&y.push(w0e(e,n,i.title,E)),jb(Sp({role:zge,from:E,encode:Rd(P0e(r,e,n),a,o0),marks:y,aria:r("aria"),description:r("description"),zindex:r("zindex"),name:s,interactive:o,style:l}),t)}function B0e(e,t){let n=e.type||cz;return!e.type&&I0e(e)===1&&(e.fill||e.stroke)&&(n=ZC(t)?V1:vw(t)?CA:cz),n!==V1?n:vw(t)?CA:V1}function I0e(e){return YT.reduce((t,n)=>t+(e[n]?1:0),0)}function P0e(e,t,n){const i={enter:{},update:{}};return Bn(i,{orient:e("orient"),offset:e("offset"),padding:e("padding"),titlePadding:e("titlePadding"),cornerRadius:e("cornerRadius"),fill:e("fillColor"),stroke:e("strokeColor"),strokeWidth:n.strokeWidth,strokeDash:n.strokeDash,x:e("legendX"),y:e("legendY"),format:t.format,formatType:t.formatType}),i}function q0e(e,t,n){const i=$l(vz("size",e,n)),r=$l(vz("strokeWidth",e,n)),a=$l(j0e(n[1].encode,t,s0));return Xa(`max(ceil(sqrt(${i})+${r}),${a})`,t)}function vz(e,t,n){return t[e]?`scale("${t[e]}",datum)`:Eq(e,n[0].encode)}function j0e(e,t,n){return Eq("fontSize",e)||l0e("fontSize",t,n)}const H0e=`item.orient==="${Nd}"?-90:item.orient==="${zd}"?90:0`;function G0e(e,t){e=ve(e)?{text:e}:e;const n=Ii(e,t.config.title),i=e.encode||{},r=i.group||{},a=r.name||void 0,s=r.interactive,o=r.style,l=[],f={},d=Me(t.add(da(null,[f])));return l.push(V0e(e,n,Y0e(e),d)),e.subtitle&&l.push(W0e(e,n,i.subtitle,d)),jb(Sp({role:Pge,from:d,encode:X0e(n,r),marks:l,aria:n("aria"),description:n("description"),zindex:n("zindex"),name:a,interactive:s,style:o}),t)}function Y0e(e){const t=e.encode;return t&&t.title||Pe({name:e.name,interactive:e.interactive,style:e.style},t)}function X0e(e,t){const n={enter:{},update:{}};return Bn(n,{orient:e("orient"),anchor:e("anchor"),align:{signal:VT},angle:{signal:H0e},limit:e("limit"),frame:e("frame"),offset:e("offset")||0,padding:e("subtitlePadding")}),Rd(n,t,o0)}function V0e(e,t,n,i){const r={value:0},a=e.text,s={enter:{opacity:r},update:{opacity:{value:1}},exit:{opacity:r}};return Bn(s,{text:a,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("color"),font:t("font"),fontSize:t("fontSize"),fontStyle:t("fontStyle"),fontWeight:t("fontWeight"),lineHeight:t("lineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),cr({type:uc,role:qge,style:e0e,from:i,encode:s},n)}function W0e(e,t,n,i){const r={value:0},a=e.subtitle,s={enter:{opacity:r},update:{opacity:{value:1}},exit:{opacity:r}};return Bn(s,{text:a,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("subtitleColor"),font:t("subtitleFont"),fontSize:t("subtitleFontSize"),fontStyle:t("subtitleFontStyle"),fontWeight:t("subtitleFontWeight"),lineHeight:t("subtitleLineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),cr({type:uc,role:jge,style:t0e,from:i,encode:s},n)}function Q0e(e,t){const n=[];e.transform&&e.transform.forEach(i=>{n.push(ZT(i,t))}),e.on&&e.on.forEach(i=>{$q(i,t,e.name)}),t.addDataPipeline(e.name,Z0e(e,t,n))}function Z0e(e,t,n){const i=[];let r=null,a=!1,s=!1,o,l,f,d,g;for(e.values?fn(e.values)||Y1(e.format)?(i.push(bz(t,e)),i.push(r=tl())):i.push(r=tl({$ingest:e.values,$format:e.format})):e.url?Y1(e.url)||Y1(e.format)?(i.push(bz(t,e)),i.push(r=tl())):i.push(r=tl({$request:e.url,$format:e.format})):e.source&&(r=o=Ee(e.source).map(p=>Me(t.getData(p).output)),i.push(null)),l=0,f=n.length;l<f;++l)d=n[l],g=d.metadata,!r&&!g.source&&i.push(r=tl()),i.push(d),g.generates&&(s=!0),g.modifies&&!s&&(a=!0),g.source?r=d:g.changes&&(r=null);return o&&(f=o.length-1,i[0]=kpe({derive:a,pulse:f?o:o[0]}),(a||f)&&i.splice(1,0,tl())),r||i.push(tl()),i.push(oc({})),i}function tl(e){const t=da({},e);return t.metadata={source:!0},t}function bz(e,t){return Spe({url:t.url?e.property(t.url):void 0,async:t.async?e.property(t.async):void 0,values:t.values?e.property(t.values):void 0,format:e.objectProperty(t.format)})}const Cq=e=>e===gu||e===ha,Hb=(e,t,n)=>fn(e)?tme(e.signal,t,n):e===Nd||e===ha?t:n,wn=(e,t,n)=>fn(e)?J0e(e.signal,t,n):Cq(e)?t:n,na=(e,t,n)=>fn(e)?eme(e.signal,t,n):Cq(e)?n:t,Tq=(e,t,n)=>fn(e)?nme(e.signal,t,n):e===ha?{value:t}:{value:n},K0e=(e,t,n)=>fn(e)?ime(e.signal,t,n):e===zd?{value:t}:{value:n},J0e=(e,t,n)=>Mq(`${e} === '${ha}' || ${e} === '${gu}'`,t,n),eme=(e,t,n)=>Mq(`${e} !== '${ha}' && ${e} !== '${gu}'`,t,n),tme=(e,t,n)=>KT(`${e} === '${Nd}' || ${e} === '${ha}'`,t,n),nme=(e,t,n)=>KT(`${e} === '${ha}'`,t,n),ime=(e,t,n)=>KT(`${e} === '${zd}'`,t,n),Mq=(e,t,n)=>(t=t!=null?_n(t):t,n=n!=null?_n(n):n,xz(t)&&xz(n)?(t=t?t.signal||ge(t.value):null,n=n?n.signal||ge(n.value):null,{signal:`${e} ? (${t}) : (${n})`}):[Pe({test:e},t)].concat(n||[])),xz=e=>e==null||Object.keys(e).length===1,KT=(e,t,n)=>({signal:`${e} ? (${wf(t)}) : (${wf(n)})`}),rme=(e,t,n,i,r)=>({signal:(i!=null?`${e} === '${Nd}' ? (${wf(i)}) : `:"")+(n!=null?`${e} === '${gu}' ? (${wf(n)}) : `:"")+(r!=null?`${e} === '${zd}' ? (${wf(r)}) : `:"")+(t!=null?`${e} === '${ha}' ? (${wf(t)}) : `:"")+"(null)"}),wf=e=>fn(e)?e.signal:e==null?null:ge(e),ame=(e,t)=>t===0?0:fn(e)?{signal:`(${e.signal}) * ${t}`}:{value:e*t},kf=(e,t)=>{const n=e.signal;return n&&n.endsWith("(null)")?{signal:n.slice(0,-6)+t.signal}:e};function df(e,t,n,i){let r;if(t&&_e(t,e))return t[e];if(_e(n,e))return n[e];if(e.startsWith("title")){switch(e){case"titleColor":r="fill";break;case"titleFont":case"titleFontSize":case"titleFontWeight":r=e[5].toLowerCase()+e.slice(6)}return i[GT][r]}else if(e.startsWith("label")){switch(e){case"labelColor":r="fill";break;case"labelFont":case"labelFontSize":r=e[5].toLowerCase()+e.slice(6)}return i[s0][r]}return null}function Ez(e){const t={};for(const n of e)if(n)for(const i in n)t[i]=1;return Object.keys(t)}function sme(e,t){var n=t.config,i=n.style,r=n.axis,a=t.scaleType(e.scale)==="band"&&n.axisBand,s=e.orient,o,l,f;if(fn(s)){const g=Ez([n.axisX,n.axisY]),p=Ez([n.axisTop,n.axisBottom,n.axisLeft,n.axisRight]);o={};for(f of g)o[f]=wn(s,df(f,n.axisX,r,i),df(f,n.axisY,r,i));l={};for(f of p)l[f]=rme(s.signal,df(f,n.axisTop,r,i),df(f,n.axisBottom,r,i),df(f,n.axisLeft,r,i),df(f,n.axisRight,r,i))}else o=s===ha||s===gu?n.axisX:n.axisY,l=n["axis"+s[0].toUpperCase()+s.slice(1)];return o||l||a?Pe({},r,o,l,a):r}function ome(e,t,n,i){const r=Ii(e,t),a=e.orient;let s,o;const l={enter:s={opacity:tt},update:o={opacity:Mr},exit:{opacity:tt}};Bn(l,{stroke:r("domainColor"),strokeCap:r("domainCap"),strokeDash:r("domainDash"),strokeDashOffset:r("domainDashOffset"),strokeWidth:r("domainWidth"),strokeOpacity:r("domainOpacity")});const f=Sz(e,0),d=Sz(e,1);return s.x=o.x=wn(a,f,tt),s.x2=o.x2=wn(a,d),s.y=o.y=na(a,f,tt),s.y2=o.y2=na(a,d),cr({type:XT,role:kge,from:i,encode:l},n)}function Sz(e,t){return{scale:e.scale,range:t}}function ume(e,t,n,i,r){const a=Ii(e,t),s=e.orient,o=e.gridScale,l=Hb(s,1,-1),f=lme(e.offset,l);let d,g,p;const y={enter:d={opacity:tt},update:p={opacity:Mr},exit:g={opacity:tt}};Bn(y,{stroke:a("gridColor"),strokeCap:a("gridCap"),strokeDash:a("gridDash"),strokeDashOffset:a("gridDashOffset"),strokeOpacity:a("gridOpacity"),strokeWidth:a("gridWidth")});const v={scale:e.scale,field:Tr,band:r.band,extra:r.extra,offset:r.offset,round:a("tickRound")},b=wn(s,{signal:"height"},{signal:"width"}),E=o?{scale:o,range:0,mult:l,offset:f}:{value:0,offset:f},_=o?{scale:o,range:1,mult:l,offset:f}:Pe(b,{mult:l,offset:f});return d.x=p.x=wn(s,v,E),d.y=p.y=na(s,v,E),d.x2=p.x2=na(s,_),d.y2=p.y2=wn(s,_),g.x=wn(s,v),g.y=na(s,v),cr({type:XT,role:Oge,key:Tr,from:i,encode:y},n)}function lme(e,t){if(t!==1)if(!be(e))e=fn(t)?{signal:`(${t.signal}) * (${e||0})`}:t*(e||0);else{let n=e=Pe({},e);for(;n.mult!=null;)if(be(n.mult))n=n.mult=Pe({},n.mult);else return n.mult=fn(t)?{signal:`(${n.mult}) * (${t.signal})`}:n.mult*t,e;n.mult=t}return e}function cme(e,t,n,i,r,a){const s=Ii(e,t),o=e.orient,l=Hb(o,-1,1);let f,d,g;const p={enter:f={opacity:tt},update:g={opacity:Mr},exit:d={opacity:tt}};Bn(p,{stroke:s("tickColor"),strokeCap:s("tickCap"),strokeDash:s("tickDash"),strokeDashOffset:s("tickDashOffset"),strokeOpacity:s("tickOpacity"),strokeWidth:s("tickWidth")});const y=_n(r);y.mult=l;const v={scale:e.scale,field:Tr,band:a.band,extra:a.extra,offset:a.offset,round:s("tickRound")};return g.y=f.y=wn(o,tt,v),g.y2=f.y2=wn(o,y),d.x=wn(o,v),g.x=f.x=na(o,tt,v),g.x2=f.x2=na(o,y),d.y=na(o,v),cr({type:XT,role:Rge,key:Tr,from:i,encode:p},n)}function s_(e,t,n,i,r){return{signal:'flush(range("'+e+'"), scale("'+e+'", datum.value), '+t+","+n+","+i+","+r+")"}}function fme(e,t,n,i,r,a){const s=Ii(e,t),o=e.orient,l=e.scale,f=Hb(o,-1,1),d=$l(s("labelFlush")),g=$l(s("labelFlushOffset")),p=s("labelAlign"),y=s("labelBaseline");let v=d===0||!!d,b;const E=_n(r);E.mult=f,E.offset=_n(s("labelPadding")||0),E.offset.mult=f;const _={scale:l,field:Tr,band:.5,offset:Sq(a.offset,s("labelOffset"))},w=wn(o,v?s_(l,d,'"left"','"right"','"center"'):{value:"center"},K0e(o,"left","right")),A=wn(o,Tq(o,"bottom","top"),v?s_(l,d,'"top"','"bottom"','"middle"'):{value:"middle"}),$=s_(l,d,`-(${g})`,g,0);v=v&&g;const C={opacity:tt,x:wn(o,_,E),y:na(o,_,E)},k={enter:C,update:b={opacity:Mr,text:{field:HT},x:C.x,y:C.y,align:w,baseline:A},exit:{opacity:tt,x:C.x,y:C.y}};Bn(k,{dx:!p&&v?wn(o,$):null,dy:!y&&v?na(o,$):null}),Bn(k,{angle:s("labelAngle"),fill:s("labelColor"),fillOpacity:s("labelOpacity"),font:s("labelFont"),fontSize:s("labelFontSize"),fontWeight:s("labelFontWeight"),fontStyle:s("labelFontStyle"),limit:s("labelLimit"),lineHeight:s("labelLineHeight")},{align:p,baseline:y});const M=s("labelBound");let R=s("labelOverlap");return R=R||M?{separation:s("labelSeparation"),method:R,order:"datum.index",bound:M?{scale:l,orient:o,tolerance:M}:null}:void 0,b.align!==w&&(b.align=kf(b.align,w)),b.baseline!==A&&(b.baseline=kf(b.baseline,A)),cr({type:uc,role:Dge,style:s0,key:Tr,from:i,encode:k,overlap:R},n)}function dme(e,t,n,i){const r=Ii(e,t),a=e.orient,s=Hb(a,-1,1);let o,l;const f={enter:o={opacity:tt,anchor:_n(r("titleAnchor",null)),align:{signal:VT}},update:l=Pe({},o,{opacity:Mr,text:_n(e.title)}),exit:{opacity:tt}},d={signal:`lerp(range("${e.scale}"), ${Pb(0,1,.5)})`};return l.x=wn(a,d),l.y=na(a,d),o.angle=wn(a,tt,ame(s,90)),o.baseline=wn(a,Tq(a,gu,ha),{value:gu}),l.angle=o.angle,l.baseline=o.baseline,Bn(f,{fill:r("titleColor"),fillOpacity:r("titleOpacity"),font:r("titleFont"),fontSize:r("titleFontSize"),fontStyle:r("titleFontStyle"),fontWeight:r("titleFontWeight"),limit:r("titleLimit"),lineHeight:r("titleLineHeight")},{align:r("titleAlign"),angle:r("titleAngle"),baseline:r("titleBaseline")}),hme(r,a,f,n),f.update.align=kf(f.update.align,o.align),f.update.angle=kf(f.update.angle,o.angle),f.update.baseline=kf(f.update.baseline,o.baseline),cr({type:uc,role:Nge,style:GT,from:i,encode:f},n)}function hme(e,t,n,i){const r=(o,l)=>o!=null?(n.update[l]=kf(_n(o),n.update[l]),!1):!yf(l,i),a=r(e("titleX"),"x"),s=r(e("titleY"),"y");n.enter.auto=s===a?_n(s):wn(t,_n(s),_n(a))}function gme(e,t){const n=sme(e,t),i=e.encode||{},r=i.axis||{},a=r.name||void 0,s=r.interactive,o=r.style,l=Ii(e,n),f=c0e(l),d={scale:e.scale,ticks:!!l("ticks"),labels:!!l("labels"),grid:!!l("grid"),domain:!!l("domain"),title:e.title!=null},g=Me(t.add(da({},[d]))),p=Me(t.add(ppe({scale:t.scaleRef(e.scale),extra:t.property(f.extra),count:t.objectProperty(e.tickCount),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)}))),y=[];let v;return d.grid&&y.push(ume(e,n,i.grid,p,f)),d.ticks&&(v=l("tickSize"),y.push(cme(e,n,i.ticks,p,v,f))),d.labels&&(v=d.ticks?v:0,y.push(fme(e,n,i.labels,p,v,f))),d.domain&&y.push(ome(e,n,i.domain,g)),d.title&&y.push(dme(e,n,i.title,g)),jb(Sp({role:Mge,from:g,encode:Rd(pme(l,e),r,o0),marks:y,aria:l("aria"),description:l("description"),zindex:l("zindex"),name:a,interactive:s,style:o}),t)}function pme(e,t){const n={enter:{},update:{}};return Bn(n,{orient:e("orient"),offset:e("offset")||0,position:Xr(t.position,0),titlePadding:e("titlePadding"),minExtent:e("minExtent"),maxExtent:e("maxExtent"),range:{signal:`abs(span(range("${t.scale}")))`},translate:e("translate"),format:t.format,formatType:t.formatType}),n}function kq(e,t,n){const i=Ee(e.signals),r=Ee(e.scales);return n||i.forEach(a=>uq(a,t)),Ee(e.projections).forEach(a=>Xpe(a,t)),r.forEach(a=>zpe(a,t)),Ee(e.data).forEach(a=>Q0e(a,t)),r.forEach(a=>Fpe(a,t)),(n||i).forEach(a=>gpe(a,t)),Ee(e.axes).forEach(a=>gme(a,t)),Ee(e.marks).forEach(a=>jb(a,t)),Ee(e.legends).forEach(a=>U0e(a,t)),e.title&&G0e(e.title,t),t.parseLambdas(),t}const mme=e=>Rd({enter:{x:{value:0},y:{value:0}},update:{width:{signal:"width"},height:{signal:"height"}}},e);function yme(e,t){const n=t.config,i=Me(t.root=t.add(hv())),r=vme(e,n);r.forEach(f=>uq(f,t)),t.description=e.description||n.description,t.eventConfig=n.events,t.legends=t.objectProperty(n.legend&&n.legend.layout),t.locale=n.locale;const a=t.add(da()),s=t.add(fq(oq(mme(e.encode),Ib,IT,e.style,t,{pulse:Me(a)}))),o=t.add(gq({layout:t.objectProperty(e.layout),legends:t.legends,autosize:t.signalRef("autosize"),mark:i,pulse:Me(s)}));t.operators.pop(),t.pushState(Me(s),Me(o),null),kq(e,t,r),t.operators.push(o);let l=t.add(cq({mark:i,pulse:Me(o)}));return l=t.add(hq({pulse:Me(l)})),l=t.add(oc({pulse:Me(l)})),t.addData("root",new jl(t,a,a,l)),t}function ug(e,t){return t&&t.signal?{name:e,update:t.signal}:{name:e,value:t}}function vme(e,t){const n=s=>Xr(e[s],t[s]),i=[ug("background",n("background")),ug("autosize",$ge(n("autosize"))),ug("padding",Tge(n("padding"))),ug("width",n("width")||0),ug("height",n("height")||0)],r=i.reduce((s,o)=>(s[o.name]=o,s),{}),a={};return Ee(e.signals).forEach(s=>{_e(r,s.name)?s=Pe(r[s.name],s):i.push(s),a[s.name]=s}),Ee(t.signals).forEach(s=>{!_e(a,s.name)&&!_e(r,s.name)&&i.push(s)}),i}function Oq(e,t){this.config=e||{},this.options=t||{},this.bindings=[],this.field={},this.signals={},this.lambdas={},this.scales={},this.events={},this.data={},this.streams=[],this.updates=[],this.operators=[],this.eventConfig=null,this.locale=null,this._id=0,this._subid=0,this._nextsub=[0],this._parent=[],this._encode=[],this._lookup=[],this._markpath=[]}function _z(e){this.config=e.config,this.options=e.options,this.legends=e.legends,this.field=Object.create(e.field),this.signals=Object.create(e.signals),this.lambdas=Object.create(e.lambdas),this.scales=Object.create(e.scales),this.events=Object.create(e.events),this.data=Object.create(e.data),this.streams=[],this.updates=[],this.operators=[],this._id=0,this._subid=++e._nextsub[0],this._nextsub=e._nextsub,this._parent=e._parent.slice(),this._encode=e._encode.slice(),this._lookup=e._lookup.slice(),this._markpath=e._markpath}Oq.prototype=_z.prototype={parse(e){return kq(e,this)},fork(){return new _z(this)},isSubscope(){return this._subid>0},toRuntime(){return this.finish(),{description:this.description,operators:this.operators,streams:this.streams,updates:this.updates,bindings:this.bindings,eventConfig:this.eventConfig,locale:this.locale}},id(){return(this._subid?this._subid+":":0)+this._id++},add(e){return this.operators.push(e),e.id=this.id(),e.refs&&(e.refs.forEach(t=>{t.$ref=e.id}),e.refs=null),e},proxy(e){const t=e instanceof SA?Me(e):e;return this.add(Mpe({value:t}))},addStream(e){return this.streams.push(e),e.id=this.id(),e},addUpdate(e){return this.updates.push(e),e},finish(){let e,t;this.root&&(this.root.root=!0);for(e in this.signals)this.signals[e].signal=e;for(e in this.scales)this.scales[e].scale=e;function n(i,r,a){let s,o;i&&(s=i.data||(i.data={}),o=s[r]||(s[r]=[]),o.push(a))}for(e in this.data){t=this.data[e],n(t.input,e,"input"),n(t.output,e,"output"),n(t.values,e,"values");for(const i in t.index)n(t.index[i],e,"index:"+i)}return this},pushState(e,t,n){this._encode.push(Me(this.add(oc({pulse:e})))),this._parent.push(t),this._lookup.push(n?Me(this.proxy(n)):null),this._markpath.push(-1)},popState(){this._encode.pop(),this._parent.pop(),this._lookup.pop(),this._markpath.pop()},parent(){return Je(this._parent)},encode(){return Je(this._encode)},lookup(){return Je(this._lookup)},markpath(){const e=this._markpath;return++e[e.length-1]},fieldRef(e,t){if(ve(e))return xp(e,t);e.signal||te("Unsupported field reference: "+ge(e));const n=e.signal;let i=this.field[n];if(!i){const r={name:this.signalRef(n)};t&&(r.as=t),this.field[n]=i=Me(this.add(bpe(r)))}return i},compareRef(e){let t=!1;const n=a=>fn(a)?(t=!0,this.signalRef(a.signal)):rpe(a)?(t=!0,this.exprRef(a.expr)):a,i=Ee(e.field).map(n),r=Ee(e.order).map(n);return t?Me(this.add(lz({fields:i,orders:r}))):oz(i,r)},keyRef(e,t){let n=!1;const i=a=>fn(a)?(n=!0,Me(r[a.signal])):a,r=this.signals;return e=Ee(e).map(i),n?Me(this.add(xpe({fields:e,flat:t}))):epe(e,t)},sortRef(e){if(!e)return e;const t=Ub(e.op,e.field),n=e.order||tpe;return n.signal?Me(this.add(lz({fields:t,orders:this.signalRef(n.signal)}))):oz(t,n)},event(e,t){const n=e+":"+t;if(!this.events[n]){const i=this.id();this.streams.push({id:i,source:e,type:t}),this.events[n]=i}return this.events[n]},hasOwnSignal(e){return _e(this.signals,e)},addSignal(e,t){this.hasOwnSignal(e)&&te("Duplicate signal name: "+ge(e));const n=t instanceof SA?t:this.add(hv(t));return this.signals[e]=n},getSignal(e){return this.signals[e]||te("Unrecognized signal name: "+ge(e)),this.signals[e]},signalRef(e){return this.signals[e]?Me(this.signals[e]):(_e(this.lambdas,e)||(this.lambdas[e]=this.add(hv(null))),Me(this.lambdas[e]))},parseLambdas(){const e=Object.keys(this.lambdas);for(let t=0,n=e.length;t<n;++t){const i=e[t],r=Xa(i,this),a=this.lambdas[i];a.params=r.$params,a.update=r.$expr}},property(e){return e&&e.signal?this.signalRef(e.signal):e},objectProperty(e){return!e||!be(e)?e:this.signalRef(e.signal||JT(e))},exprRef(e,t){const n={expr:Xa(e,this)};return t&&(n.expr.$name=t),Me(this.add(ype(n)))},addBinding(e,t){this.bindings||te("Nested signals do not support binding: "+ge(e)),this.bindings.push(Pe({signal:e},t))},addScaleProj(e,t){_e(this.scales,e)&&te("Duplicate scale or projection name: "+ge(e)),this.scales[e]=this.add(t)},addScale(e,t){this.addScaleProj(e,Ope(t))},addProjection(e,t){this.addScaleProj(e,Tpe(t))},getScale(e){return this.scales[e]||te("Unrecognized scale name: "+ge(e)),this.scales[e]},scaleRef(e){return Me(this.getScale(e))},scaleType(e){return this.getScale(e).params.type},projectionRef(e){return this.scaleRef(e)},projectionType(e){return this.scaleType(e)},addData(e,t){return _e(this.data,e)&&te("Duplicate data set name: "+ge(e)),this.data[e]=t},getData(e){return this.data[e]||te("Undefined data set name: "+ge(e)),this.data[e]},addDataPipeline(e,t){return _e(this.data,e)&&te("Duplicate data set name: "+ge(e)),this.addData(e,jl.fromEntries(this,t))}};function JT(e){return(re(e)?bme:xme)(e)}function bme(e){const t=e.length;let n="[";for(let i=0;i<t;++i){const r=e[i];n+=(i>0?",":"")+(be(r)?r.signal||JT(r):ge(r))}return n+"]"}function xme(e){let t="{",n=0,i,r;for(i in e)r=e[i],t+=(++n>1?",":"")+ge(i)+":"+(be(r)?r.signal||JT(r):ge(r));return t+"}"}function Eme(){const e="sans-serif",i="#4c78a8",r="#000",a="#888",s="#ddd";return{description:"Vega visualization",padding:0,autosize:"pad",background:null,events:{defaults:{allow:["wheel"]}},group:null,mark:null,arc:{fill:i},area:{fill:i},image:null,line:{stroke:i,strokeWidth:2},path:{stroke:i},rect:{fill:i},rule:{stroke:r},shape:{stroke:i},symbol:{fill:i,size:64},text:{fill:r,font:e,fontSize:11},trail:{fill:i,size:2},style:{"guide-label":{fill:r,font:e,fontSize:10},"guide-title":{fill:r,font:e,fontSize:11,fontWeight:"bold"},"group-title":{fill:r,font:e,fontSize:13,fontWeight:"bold"},"group-subtitle":{fill:r,font:e,fontSize:12},point:{size:30,strokeWidth:2,shape:"circle"},circle:{size:30,strokeWidth:2},square:{size:30,strokeWidth:2,shape:"square"},cell:{fill:"transparent",stroke:s},view:{fill:"transparent"}},title:{orient:"top",anchor:"middle",offset:4,subtitlePadding:3},axis:{minExtent:0,maxExtent:200,bandPosition:.5,domain:!0,domainWidth:1,domainColor:a,grid:!1,gridWidth:1,gridColor:s,labels:!0,labelAngle:0,labelLimit:180,labelOffset:0,labelPadding:2,ticks:!0,tickColor:a,tickOffset:0,tickRound:!0,tickSize:5,tickWidth:1,titlePadding:4},axisBand:{tickOffset:-.5},projection:{type:"mercator"},legend:{orient:"right",padding:0,gridAlign:"each",columnPadding:10,rowPadding:2,symbolDirection:"vertical",gradientDirection:"vertical",gradientLength:200,gradientThickness:16,gradientStrokeColor:s,gradientStrokeWidth:0,gradientLabelOffset:2,labelAlign:"left",labelBaseline:"middle",labelLimit:160,labelOffset:4,labelOverlap:!0,symbolLimit:30,symbolType:"circle",symbolSize:100,symbolOffset:0,symbolStrokeWidth:1.5,symbolBaseFillColor:"transparent",symbolBaseStrokeColor:a,titleLimit:180,titleOrient:"top",titlePadding:5,layout:{offset:18,direction:"horizontal",left:{direction:"vertical"},right:{direction:"vertical"}}},range:{category:{scheme:"tableau10"},ordinal:{scheme:"blues"},heatmap:{scheme:"yellowgreenblue"},ramp:{scheme:"blues"},diverging:{scheme:"blueorange",extent:[1,0]},symbol:["circle","square","triangle-up","cross","diamond","triangle-right","triangle-down","triangle-left"]}}}function Sme(e,t,n){return be(e)||te("Input Vega specification must be an object."),t=bd(Eme(),t,e.config),yme(e,new Oq(t,n)).toRuntime()}var _me="6.1.2";Pe(qf,fJ,qre,xae,aoe,Joe,$le,ale,Tle,Kle,uce,pce);const wme=_me,Ame=Object.freeze(Object.defineProperty({__proto__:null,Bounds:rn,CanvasHandler:Zp,CanvasRenderer:Ty,DATE:Ni,DAY:Wn,DAYOFYEAR:Ga,Dataflow:$f,Debug:CF,Error:c$,EventStream:Hv,Gradient:xU,GroupItem:hb,HOURS:or,Handler:S3,HybridHandler:cB,HybridRenderer:Mw,Info:$F,Item:db,MILLISECONDS:aa,MINUTES:ur,MONTH:Jn,Marks:lr,MultiPulse:F$,None:AF,Operator:wt,Parameters:jv,Pulse:tu,QUARTER:Ri,RenderType:Xo,Renderer:Qp,ResourceLoader:$U,SECONDS:Dr,SVGHandler:ZU,SVGRenderer:T3,SVGStringRenderer:lB,Scenegraph:jU,TIME_UNITS:$$,Transform:J,View:WP,WEEK:ln,Warn:f$,YEAR:Un,accessor:Bi,accessorFields:Kn,accessorName:jt,array:Ee,ascending:Ed,bandwidthNRD:I$,bin:o7,bootstrapCI:u7,boundClip:xB,boundContext:Yp,boundItem:ww,boundMark:BU,boundStroke:eo,changeset:ic,clampRange:UF,codegenExpression:SP,compare:m$,constant:ii,cumulativeLogNormal:Y$,cumulativeNormal:Yv,cumulativeUniform:Q$,dayofyear:g9,debounce:y$,defaultLocale:O$,definition:r7,densityLogNormal:G$,densityNormal:P$,densityUniform:W$,domChild:un,domClear:Sr,domCreate:Go,domFind:E3,dotbin:l7,error:te,expressionFunction:Zt,extend:Pe,extent:qa,extentIndex:BF,falsy:zo,fastmap:Sd,field:kr,flush:IF,font:vb,fontFamily:Wp,fontSize:es,format:$1,formatLocale:sy,formats:N$,hasOwnProperty:_e,id:Op,identity:ni,inferType:X9,inferTypes:V9,ingest:ct,inherits:pe,inrange:bf,interpolate:KC,interpolateColors:cb,interpolateRange:sU,intersect:mB,intersectBoxLine:xf,intersectPath:s3,intersectPoint:o3,intersectRule:TU,isArray:re,isBoolean:xu,isDate:Jo,isFunction:qe,isIterable:PF,isNumber:st,isObject:be,isRegExp:v$,isString:ve,isTuple:Pv,key:b$,lerp:qF,lineHeight:fu,loader:Bv,locale:G9,logger:d$,lruCache:jF,markup:C3,merge:HF,mergeConfig:bd,multiLineOffset:v3,one:vd,pad:GF,panLinear:DF,panLog:RF,panPow:NF,panSymlog:zF,parse:Sme,parseExpression:CT,parseSelector:$u,path:Zv,pathCurves:i3,pathEqual:EB,pathParse:Vf,pathRectangle:_U,pathRender:up,pathSymbols:SU,pathTrail:wU,peek:Je,point:xb,projection:X3,quantileLogNormal:X$,quantileNormal:Xv,quantileUniform:Z$,quantiles:U$,quantizeInterpolator:oU,quarter:FF,quartiles:B$,get random(){return Rr},randomInteger:pK,randomKDE:j$,randomLCG:gK,randomLogNormal:f7,randomMixture:d7,randomNormal:q$,randomUniform:h7,read:Z9,regressionConstant:K$,regressionExp:p7,regressionLinear:J$,regressionLoess:v7,regressionLog:g7,regressionPoly:y7,regressionPow:m7,regressionQuad:eC,renderModule:Eb,repeat:mg,resetDefaultLocale:fZ,resetSVGDefIds:sre,responseType:Q9,runtimeContext:FP,sampleCurve:Wv,sampleLogNormal:H$,sampleNormal:Gv,sampleUniform:V$,scale:ut,sceneEqual:M3,sceneFromJSON:PU,scenePickVisit:xy,sceneToJSON:IU,sceneVisit:sa,sceneZOrder:u3,scheme:JC,serializeXML:aB,setHybridRendererOptions:nre,setRandom:dK,span:Dp,splitAccessPath:Za,stringValue:ge,textMetrics:ir,timeBin:O9,timeFloor:E9,timeFormatLocale:np,timeInterval:$d,timeOffset:w9,timeSequence:C9,timeUnitSpecifier:h9,timeUnits:C$,toBoolean:x$,toDate:E$,toNumber:Qn,toSet:ra,toString:S$,transform:a7,transforms:qf,truncate:YF,truthy:Or,tupleid:ke,typeParsers:sw,utcFloor:S9,utcInterval:Cd,utcOffset:A9,utcSequence:T9,utcdayofyear:y9,utcquarter:LF,utcweek:v9,version:wme,visitArray:Uo,week:p9,writeConfig:xd,zero:jo,zoomLinear:h$,zoomLog:g$,zoomPow:ey,zoomSymlog:p$},Symbol.toStringTag,{value:"Module"}));function $me(e,t,n){let i;t.x2&&(t.x?(n&&e.x>e.x2&&(i=e.x,e.x=e.x2,e.x2=i),e.width=e.x2-e.x):e.x=e.x2-(e.width||0)),t.xc&&(e.x=e.xc-(e.width||0)/2),t.y2&&(t.y?(n&&e.y>e.y2&&(i=e.y,e.y=e.y2,e.y2=i),e.height=e.y2-e.y):e.y=e.y2-(e.height||0)),t.yc&&(e.y=e.yc-(e.height||0)/2)}var Cme={NaN:NaN,E:Math.E,LN2:Math.LN2,LN10:Math.LN10,LOG2E:Math.LOG2E,LOG10E:Math.LOG10E,PI:Math.PI,SQRT1_2:Math.SQRT1_2,SQRT2:Math.SQRT2,MIN_VALUE:Number.MIN_VALUE,MAX_VALUE:Number.MAX_VALUE},Tme={"*":(e,t)=>e*t,"+":(e,t)=>e+t,"-":(e,t)=>e-t,"/":(e,t)=>e/t,"%":(e,t)=>e%t,">":(e,t)=>e>t,"<":(e,t)=>e<t,"<=":(e,t)=>e<=t,">=":(e,t)=>e>=t,"==":(e,t)=>e==t,"!=":(e,t)=>e!=t,"===":(e,t)=>e===t,"!==":(e,t)=>e!==t,"&":(e,t)=>e&t,"|":(e,t)=>e|t,"^":(e,t)=>e^t,"<<":(e,t)=>e<<t,">>":(e,t)=>e>>t,">>>":(e,t)=>e>>>t},Mme={"+":e=>+e,"-":e=>-e,"~":e=>~e,"!":e=>!e};const kme=Array.prototype.slice,nl=(e,t,n)=>{const i=n?n(t[0]):t[0];return i[e].apply(i,kme.call(t,1))},Ome=function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,r=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0,a=arguments.length>5&&arguments[5]!==void 0?arguments[5]:0,s=arguments.length>6&&arguments[6]!==void 0?arguments[6]:0;return ve(e)?new Date(e):new Date(e,t,n,i,r,a,s)};var Dme={isNaN:Number.isNaN,isFinite:Number.isFinite,abs:Math.abs,acos:Math.acos,asin:Math.asin,atan:Math.atan,atan2:Math.atan2,ceil:Math.ceil,cos:Math.cos,exp:Math.exp,floor:Math.floor,log:Math.log,max:Math.max,min:Math.min,pow:Math.pow,random:Math.random,round:Math.round,sin:Math.sin,sqrt:Math.sqrt,tan:Math.tan,clamp:(e,t,n)=>Math.max(t,Math.min(n,e)),now:Date.now,utc:Date.UTC,datetime:Ome,date:e=>new Date(e).getDate(),day:e=>new Date(e).getDay(),year:e=>new Date(e).getFullYear(),month:e=>new Date(e).getMonth(),hours:e=>new Date(e).getHours(),minutes:e=>new Date(e).getMinutes(),seconds:e=>new Date(e).getSeconds(),milliseconds:e=>new Date(e).getMilliseconds(),time:e=>new Date(e).getTime(),timezoneoffset:e=>new Date(e).getTimezoneOffset(),utcdate:e=>new Date(e).getUTCDate(),utcday:e=>new Date(e).getUTCDay(),utcyear:e=>new Date(e).getUTCFullYear(),utcmonth:e=>new Date(e).getUTCMonth(),utchours:e=>new Date(e).getUTCHours(),utcminutes:e=>new Date(e).getUTCMinutes(),utcseconds:e=>new Date(e).getUTCSeconds(),utcmilliseconds:e=>new Date(e).getUTCMilliseconds(),length:e=>e.length,join:function(){return nl("join",arguments)},indexof:function(){return nl("indexOf",arguments)},lastindexof:function(){return nl("lastIndexOf",arguments)},slice:function(){return nl("slice",arguments)},reverse:e=>e.slice().reverse(),sort:e=>e.slice().sort(Ed),parseFloat,parseInt,upper:e=>String(e).toUpperCase(),lower:e=>String(e).toLowerCase(),substring:function(){return nl("substring",arguments,String)},split:function(){return nl("split",arguments,String)},replace:function(){return nl("replace",arguments,String)},trim:e=>String(e).trim(),btoa:e=>btoa(e),atob:e=>atob(e),regexp:RegExp,test:(e,t)=>RegExp(e).test(t)};const Rme=["view","item","group","xy","x","y"],MA=new Set([Function,eval,setTimeout,setInterval]);typeof setImmediate=="function"&&MA.add(setImmediate);const Nme={Literal:(e,t)=>t.value,Identifier:(e,t)=>{const n=t.name;return e.memberDepth>0?n:n==="datum"?e.datum:n==="event"?e.event:n==="item"?e.item:Cme[n]||e.params["$"+n]},MemberExpression:(e,t)=>{const n=!t.computed,i=e(t.object);n&&(e.memberDepth+=1);const r=e(t.property);if(n&&(e.memberDepth-=1),MA.has(i[r])){console.error(`Prevented interpretation of member "${r}" which could lead to insecure code execution`);return}return i[r]},CallExpression:(e,t)=>{const n=t.arguments;let i=t.callee.name;return i.startsWith("_")&&(i=i.slice(1)),i==="if"?e(n[0])?e(n[1]):e(n[2]):(e.fn[i]||Dme[i]).apply(e.fn,n.map(e))},ArrayExpression:(e,t)=>t.elements.map(e),BinaryExpression:(e,t)=>Tme[t.operator](e(t.left),e(t.right)),UnaryExpression:(e,t)=>Mme[t.operator](e(t.argument)),ConditionalExpression:(e,t)=>e(t.test)?e(t.consequent):e(t.alternate),LogicalExpression:(e,t)=>t.operator==="&&"?e(t.left)&&e(t.right):e(t.left)||e(t.right),ObjectExpression:(e,t)=>t.properties.reduce((n,i)=>{e.memberDepth+=1;const r=e(i.key);return e.memberDepth-=1,MA.has(e(i.value))?console.error(`Prevented interpretation of property "${r}" which could lead to insecure code execution`):n[r]=e(i.value),n},{})};function lg(e,t,n,i,r,a){const s=o=>Nme[o.type](s,o);return s.memberDepth=0,s.fn=Object.create(t),s.params=n,s.datum=i,s.event=r,s.item=a,Rme.forEach(o=>s.fn[o]=function(){return r.vega[o](...arguments)}),s(e)}var zme={operator(e,t){const n=t.ast,i=e.functions;return r=>lg(n,i,r)},parameter(e,t){const n=t.ast,i=e.functions;return(r,a)=>lg(n,i,a,r)},event(e,t){const n=t.ast,i=e.functions;return r=>lg(n,i,void 0,void 0,r)},handler(e,t){const n=t.ast,i=e.functions;return(r,a)=>{const s=a.item&&a.item.datum;return lg(n,i,r,s,a)}},encode(e,t){const{marktype:n,channels:i}=t,r=e.functions,a=n==="group"||n==="image"||n==="rect";return(s,o)=>{const l=s.datum;let f=0,d;for(const g in i)d=lg(i[g].ast,r,o,l,void 0,s),s[g]!==d&&(s[g]=d,f=1);return n!=="rule"&&$me(s,i,a),f}}},Fme="6.1.0",Lme={version:Fme};function eM(e){return ce(e,"or")}function tM(e){return ce(e,"and")}function nM(e){return ce(e,"not")}function Q1(e,t){if(nM(e))Q1(e.not,t);else if(tM(e))for(const n of e.and)Q1(n,t);else if(eM(e))for(const n of e.or)Q1(n,t);else t(e)}function Of(e,t){return nM(e)?{not:Of(e.not,t)}:tM(e)?{and:e.and.map(n=>Of(n,t))}:eM(e)?{or:e.or.map(n=>Of(n,t))}:t(e)}const Le=structuredClone;function Dq(e){throw new Error(e)}function id(e,t){const n={};for(const i of t)_e(e,i)&&(n[i]=e[i]);return n}function ar(e,t){const n={...e};for(const i of t)delete n[i];return n}Set.prototype.toJSON=function(){return`Set(${[...this].map(e=>dt(e)).join(",")})`};function Ze(e){if(st(e))return e;const t=ve(e)?e:dt(e);if(t.length<250)return t;let n=0;for(let i=0;i<t.length;i++){const r=t.charCodeAt(i);n=(n<<5)-n+r,n=n&n}return n}function kA(e){return e===!1||e===null}function Ve(e,t){return e.includes(t)}function rd(e,t){let n=0;for(const[i,r]of e.entries())if(t(r,i,n++))return!0;return!1}function iM(e,t){let n=0;for(const[i,r]of e.entries())if(!t(r,i,n++))return!1;return!0}function Rq(e,...t){for(const n of t)Ume(e,n??{});return e}function Ume(e,t){for(const n of le(t))xd(e,n,t[n],!0)}function Na(e,t){const n=[],i={};let r;for(const a of e)r=t(a),!(r in i)&&(i[r]=1,n.push(a));return n}function Bme(e,t){const n=le(e),i=le(t);if(n.length!==i.length)return!1;for(const r of n)if(e[r]!==t[r])return!1;return!0}function Nq(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}function rM(e,t){for(const n of e)if(t.has(n))return!0;return!1}function OA(e){const t=new Set;for(const n of e){const r=Za(n).map((s,o)=>o===0?s:`[${s}]`),a=r.map((s,o)=>r.slice(0,o+1).join(""));for(const s of a)t.add(s)}return t}function aM(e,t){return e===void 0||t===void 0?!0:rM(OA(e),OA(t))}function At(e){return le(e).length===0}const le=Object.keys,nn=Object.values,pu=Object.entries;function _p(e){return e===!0||e===!1}function Dt(e){const t=e.replace(/\W/g,"_");return(e.match(/^\d+/)?"_":"")+t}function Qg(e,t){return nM(e)?`!(${Qg(e.not,t)})`:tM(e)?`(${e.and.map(n=>Qg(n,t)).join(") && (")})`:eM(e)?`(${e.or.map(n=>Qg(n,t)).join(") || (")})`:t(e)}function gv(e,t){if(t.length===0)return!0;const n=t.shift();return n in e&&gv(e[n],t)&&delete e[n],At(e)}function u0(e){return e.charAt(0).toUpperCase()+e.substr(1)}function sM(e,t="datum"){const n=Za(e),i=[];for(let r=1;r<=n.length;r++){const a=`[${n.slice(0,r).map(ge).join("][")}]`;i.push(`${t}${a}`)}return i.join(" && ")}function zq(e,t="datum"){return`${t}[${ge(Za(e).join("."))}]`}function pt(e){return`datum['${e.replaceAll("'","\\'")}']`}function Ime(e){return e.replace(/(\[|\]|\.|'|")/g,"\\$1")}function zr(e){return`${Za(e).map(Ime).join("\\.")}`}function Hl(e,t,n){return e.replace(new RegExp(t.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"),"g"),n)}function Fd(e){return`${Za(e).join(".")}`}function ad(e){return e?Za(e).length:0}function Wt(...e){return e.find(t=>t!==void 0)}let Fq=42;function Lq(e){const t=++Fq;return e?String(e)+t:t}function Pme(){Fq=42}function Uq(e){return Bq(e)?e:`__${e}`}function Bq(e){return e.startsWith("__")}function wp(e){if(e!==void 0)return(e%360+360)%360}function Gb(e){return st(e)?!0:!isNaN(e)&&!isNaN(parseFloat(e))}const wz=Object.getPrototypeOf(structuredClone({}));function tr(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor.name!==t.constructor.name)return!1;let n,i;if(Array.isArray(e)){if(n=e.length,n!=t.length)return!1;for(i=n;i--!==0;)if(!tr(e[i],t[i]))return!1;return!0}if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const a of e.entries())if(!t.has(a[0]))return!1;for(const a of e.entries())if(!tr(a[1],t.get(a[0])))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const a of e.entries())if(!t.has(a[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(n=e.length,n!=t.length)return!1;for(i=n;i--!==0;)if(e[i]!==t[i])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf&&e.valueOf!==wz.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString&&e.toString!==wz.toString)return e.toString()===t.toString();const r=Object.keys(e);if(n=r.length,n!==Object.keys(t).length)return!1;for(i=n;i--!==0;)if(!Object.prototype.hasOwnProperty.call(t,r[i]))return!1;for(i=n;i--!==0;){const a=r[i];if(!tr(e[a],t[a]))return!1}return!0}return e!==e&&t!==t}function dt(e){const t=[];return function n(i){if(i!=null&&i.toJSON&&typeof i.toJSON=="function"&&(i=i.toJSON()),i===void 0)return;if(typeof i=="number")return isFinite(i)?`${i}`:"null";if(typeof i!="object")return JSON.stringify(i);let r,a;if(Array.isArray(i)){for(a="[",r=0;r<i.length;r++)r&&(a+=","),a+=n(i[r])||"null";return`${a}]`}if(i===null)return"null";if(t.includes(i))throw new TypeError("Converting circular structure to JSON");const s=t.push(i)-1,o=Object.keys(i).sort();for(a="",r=0;r<o.length;r++){const l=o[r],f=n(i[l]);f&&(a&&(a+=","),a+=`${JSON.stringify(l)}:${f}`)}return t.splice(s,1),`{${a}}`}(e)}function ce(e,t){return be(e)&&_e(e,t)&&e[t]!==void 0}const js="row",Hs="column",Yb="facet",Rt="x",Tn="y",ga="x2",rs="y2",Cu="xOffset",Ld="yOffset",pa="radius",no="radius2",Ur="theta",io="theta2",ma="latitude",ya="longitude",va="latitude2",Fr="longitude2",Tu="time",Fi="color",as="fill",ss="stroke",Li="shape",ro="size",lc="angle",ao="opacity",Mu="fillOpacity",ku="strokeOpacity",Ou="strokeWidth",Du="strokeDash",l0="text",sd="order",c0="detail",Xb="key",Gl="tooltip",Vb="href",Wb="url",Qb="description",qme={x:1,y:1,x2:1,y2:1},Iq={theta:1,theta2:1,radius:1,radius2:1};function Pq(e){return _e(Iq,e)}const oM={longitude:1,longitude2:1,latitude:1,latitude2:1};function qq(e){switch(e){case ma:return"y";case va:return"y2";case ya:return"x";case Fr:return"x2"}}function jq(e){return _e(oM,e)}const jme=le(oM),uM={...qme,...Iq,...oM,xOffset:1,yOffset:1,color:1,fill:1,stroke:1,time:1,opacity:1,fillOpacity:1,strokeOpacity:1,strokeWidth:1,strokeDash:1,size:1,angle:1,shape:1,order:1,text:1,detail:1,key:1,tooltip:1,href:1,url:1,description:1};function Df(e){return e===Fi||e===as||e===ss}const Hq={row:1,column:1,facet:1},Cr=le(Hq),lM={...uM,...Hq},Hme=le(lM),{order:oAe,detail:uAe,tooltip:lAe,...Gme}=lM,{row:cAe,column:fAe,facet:dAe,...Yme}=Gme;function Xme(e){return _e(Yme,e)}function Gq(e){return _e(lM,e)}const Vme=[ga,rs,va,Fr,io,no];function Yq(e){return cc(e)!==e}function cc(e){switch(e){case ga:return Rt;case rs:return Tn;case va:return ma;case Fr:return ya;case io:return Ur;case no:return pa}return e}function mu(e){if(Pq(e))switch(e){case Ur:return"startAngle";case io:return"endAngle";case pa:return"outerRadius";case no:return"innerRadius"}return e}function os(e){switch(e){case Rt:return ga;case Tn:return rs;case ma:return va;case ya:return Fr;case Ur:return io;case pa:return no}}function Ui(e){switch(e){case Rt:case ga:return"width";case Tn:case rs:return"height"}}function Xq(e){switch(e){case Rt:return"xOffset";case Tn:return"yOffset";case ga:return"x2Offset";case rs:return"y2Offset";case Ur:return"thetaOffset";case pa:return"radiusOffset";case io:return"theta2Offset";case no:return"radius2Offset"}}function cM(e){switch(e){case Rt:return"xOffset";case Tn:return"yOffset"}}function Wme(e){switch(e){case"xOffset":return"x";case"yOffset":return"y"}}const Qme=le(uM),{x:hAe,y:gAe,x2:pAe,y2:mAe,xOffset:yAe,yOffset:vAe,latitude:bAe,longitude:xAe,latitude2:EAe,longitude2:SAe,theta:_Ae,theta2:wAe,radius:AAe,radius2:$Ae,...fM}=uM,Zme=le(fM),dM={x:1,y:1},so=le(dM);function Qt(e){return _e(dM,e)}const hM={theta:1,radius:1},Kme=le(hM);function Zb(e){return e==="width"?Rt:Tn}const Vq={xOffset:1,yOffset:1};function f0(e){return _e(Vq,e)}const Jme={time:1};function o_(e){return e in Jme}const{text:CAe,tooltip:TAe,href:MAe,url:kAe,description:OAe,detail:DAe,key:RAe,order:NAe,...Wq}=fM,e1e=le(Wq);function t1e(e){return _e(fM,e)}function n1e(e){switch(e){case Fi:case as:case ss:case ro:case Li:case ao:case Ou:case Du:return!0;case Mu:case ku:case lc:case Tu:return!1}}const Qq={...dM,...hM,...Vq,...Wq},gM=le(Qq);function us(e){return _e(Qq,e)}function i1e(e,t){return a1e(e)[t]}const Zq={arc:"always",area:"always",bar:"always",circle:"always",geoshape:"always",image:"always",line:"always",rule:"always",point:"always",rect:"always",square:"always",trail:"always",text:"always",tick:"always"},{geoshape:zAe,...r1e}=Zq;function a1e(e){switch(e){case Fi:case as:case ss:case Qb:case c0:case Xb:case Gl:case Vb:case sd:case ao:case Mu:case ku:case Ou:case Yb:case js:case Hs:return Zq;case Rt:case Tn:case Cu:case Ld:case ma:case ya:case Tu:return r1e;case ga:case rs:case va:case Fr:return{area:"always",bar:"always",image:"always",rect:"always",rule:"always",circle:"binned",point:"binned",square:"binned",tick:"binned",line:"binned",trail:"binned"};case ro:return{point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",text:"always",line:"always",trail:"always"};case Du:return{line:"always",point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",geoshape:"always"};case Li:return{point:"always",geoshape:"always"};case l0:return{text:"always"};case lc:return{point:"always",square:"always",text:"always"};case Wb:return{image:"always"};case Ur:return{text:"always",arc:"always"};case pa:return{text:"always",arc:"always"};case io:case no:return{arc:"always"}}}function u_(e){switch(e){case Rt:case Tn:case Ur:case pa:case Cu:case Ld:case ro:case lc:case Ou:case ao:case Mu:case ku:case Tu:case ga:case rs:case io:case no:return;case Yb:case js:case Hs:case Li:case Du:case l0:case Gl:case Vb:case Wb:case Qb:return"discrete";case Fi:case as:case ss:return"flexible";case ma:case ya:case va:case Fr:case c0:case Xb:case sd:return}}const s1e={argmax:1,argmin:1,average:1,count:1,distinct:1,exponential:1,exponentialb:1,product:1,max:1,mean:1,median:1,min:1,missing:1,q1:1,q3:1,ci0:1,ci1:1,stderr:1,stdev:1,stdevp:1,sum:1,valid:1,values:1,variance:1,variancep:1},o1e={count:1,min:1,max:1};function Zs(e){return ce(e,"argmin")}function Ru(e){return ce(e,"argmax")}function pM(e){return ve(e)&&_e(s1e,e)}const u1e=new Set(["count","valid","missing","distinct"]);function Kb(e){return ve(e)&&u1e.has(e)}function l1e(e){return ve(e)&&Ve(["min","max"],e)}const c1e=new Set(["count","sum","distinct","valid","missing"]),f1e=new Set(["mean","average","median","q1","q3","min","max"]);function Kq(e){return xu(e)&&(e=cx(e,void 0)),`bin${le(e).map(t=>Jb(e[t])?Dt(`_${t}_${pu(e[t])}`):Dt(`_${t}_${e[t]}`)).join("")}`}function Ct(e){return e===!0||fc(e)&&!e.binned}function Dn(e){return e==="binned"||fc(e)&&e.binned===!0}function fc(e){return be(e)}function Jb(e){return ce(e,"param")}function Az(e){switch(e){case js:case Hs:case ro:case Fi:case as:case ss:case Ou:case ao:case Mu:case ku:case Li:return 6;case Du:return 4;default:return 10}}function d0(e){return ce(e,"expr")}function Rn(e,{level:t}={level:0}){const n=le(e||{}),i={};for(const r of n)i[r]=t===0?Ji(e[r]):Rn(e[r],{level:t-1});return i}function Jq(e){const{anchor:t,frame:n,offset:i,orient:r,angle:a,limit:s,color:o,subtitleColor:l,subtitleFont:f,subtitleFontSize:d,subtitleFontStyle:g,subtitleFontWeight:p,subtitleLineHeight:y,subtitlePadding:v,...b}=e,E={...b,...o?{fill:o}:{}},_={...t?{anchor:t}:{},...n?{frame:n}:{},...i?{offset:i}:{},...r?{orient:r}:{},...a!==void 0?{angle:a}:{},...s!==void 0?{limit:s}:{}},w={...l?{subtitleColor:l}:{},...f?{subtitleFont:f}:{},...d?{subtitleFontSize:d}:{},...g?{subtitleFontStyle:g}:{},...p?{subtitleFontWeight:p}:{},...y?{subtitleLineHeight:y}:{},...v?{subtitlePadding:v}:{}},A=id(e,["align","baseline","dx","dy","limit"]);return{titleMarkConfig:E,subtitleMarkConfig:A,nonMarkTitleProperties:_,subtitle:w}}function qo(e){return ve(e)||re(e)&&ve(e[0])}function Ce(e){return ce(e,"signal")}function dc(e){return ce(e,"step")}function d1e(e){return re(e)?!1:ce(e,"fields")&&!ce(e,"data")}function h1e(e){return re(e)?!1:ce(e,"fields")&&ce(e,"data")}function Bs(e){return re(e)?!1:ce(e,"field")&&ce(e,"data")}const g1e={aria:1,description:1,ariaRole:1,ariaRoleDescription:1,blend:1,opacity:1,fill:1,fillOpacity:1,stroke:1,strokeCap:1,strokeWidth:1,strokeOpacity:1,strokeDash:1,strokeDashOffset:1,strokeJoin:1,strokeOffset:1,strokeMiterLimit:1,startAngle:1,endAngle:1,padAngle:1,innerRadius:1,outerRadius:1,size:1,shape:1,interpolate:1,tension:1,orient:1,align:1,baseline:1,text:1,dir:1,dx:1,dy:1,ellipsis:1,limit:1,radius:1,theta:1,angle:1,font:1,fontSize:1,fontWeight:1,fontStyle:1,lineBreak:1,lineHeight:1,cursor:1,href:1,tooltip:1,cornerRadius:1,cornerRadiusTopLeft:1,cornerRadiusTopRight:1,cornerRadiusBottomLeft:1,cornerRadiusBottomRight:1,aspect:1,width:1,height:1,url:1,smooth:1},p1e=le(g1e),m1e={arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1},DA=["cornerRadius","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight"];function ej(e){const t=re(e.condition)?e.condition.map($z):$z(e.condition);return{...Ji(e),condition:t}}function Ji(e){if(d0(e)){const{expr:t,...n}=e;return{signal:t,...n}}return e}function $z(e){if(d0(e)){const{expr:t,...n}=e;return{signal:t,...n}}return e}function Mt(e){if(d0(e)){const{expr:t,...n}=e;return{signal:t,...n}}return Ce(e)?e:e!==void 0?{value:e}:void 0}function y1e(e){return Ce(e)?e.signal:ge(e)}function Cz(e){return Ce(e)?e.signal:ge(e.value)}function ea(e){return Ce(e)?e.signal:e==null?null:ge(e)}function v1e(e,t,n){for(const i of n){const r=Va(i,t.markDef,t.config);r!==void 0&&(e[i]=Mt(r))}return e}function tj(e){return[].concat(e.type,e.style??[])}function Et(e,t,n,i={}){const{vgChannel:r,ignoreVgConfig:a}=i;return r&&ce(t,r)?t[r]:t[e]!==void 0?t[e]:a&&(!r||r===e)?void 0:Va(e,t,n,i)}function Va(e,t,n,{vgChannel:i}={}){const r=RA(e,t,n.style);return Wt(i?r:void 0,r,i?n[t.type][i]:void 0,n[t.type][e],i?n.mark[i]:n.mark[e])}function RA(e,t,n){return nj(e,tj(t),n)}function nj(e,t,n){t=Ee(t);let i;for(const r of t){const a=n[r];ce(a,e)&&(i=a[e])}return i}function ij(e,t){return Ee(e).reduce((n,i)=>(n.field.push(me(i,t)),n.order.push(i.sort??"ascending"),n),{field:[],order:[]})}function rj(e,t){const n=[...e];return t.forEach(i=>{for(const r of n)if(tr(r,i))return;n.push(i)}),n}function aj(e,t){return tr(e,t)||!t?e:e?[...Ee(e),...Ee(t)].join(", "):t}function sj(e,t){const n=e.value,i=t.value;if(n==null||i===null)return{explicit:e.explicit,value:null};if((qo(n)||Ce(n))&&(qo(i)||Ce(i)))return{explicit:e.explicit,value:aj(n,i)};if(qo(n)||Ce(n))return{explicit:e.explicit,value:n};if(qo(i)||Ce(i))return{explicit:e.explicit,value:i};if(!qo(n)&&!Ce(n)&&!qo(i)&&!Ce(i))return{explicit:e.explicit,value:rj(n,i)};throw new Error("It should never reach here")}function mM(e){return`Invalid specification ${dt(e)}. Make sure the specification includes at least one of the following properties: "mark", "layer", "facet", "hconcat", "vconcat", "concat", or "repeat".`}const b1e='Autosize "fit" only works for single views and layered views.';function Tz(e){return`${e=="width"?"Width":"Height"} "container" only works for single views and layered views.`}function Mz(e){const t=e=="width"?"Width":"Height",n=e=="width"?"x":"y";return`${t} "container" only works well with autosize "fit" or "fit-${n}".`}function kz(e){return e?`Dropping "fit-${e}" because spec has discrete ${Ui(e)}.`:'Dropping "fit" because spec has discrete size.'}function yM(e){return`Unknown field for ${e}. Cannot calculate view size.`}function Oz(e){return`Cannot project a selection on encoding channel "${e}", which has no field.`}function x1e(e,t){return`Cannot project a selection on encoding channel "${e}" as it uses an aggregate function ("${t}").`}function E1e(e){return`The "nearest" transform is not supported for ${e} marks.`}function oj(e){return`Selection not supported for ${e} yet.`}function S1e(e){return`Cannot find a selection named "${e}".`}const _1e="Scale bindings are currently only supported for scales with unbinned, continuous domains.",w1e="Sequntial scales are deprecated. The available quantitative scale type values are linear, log, pow, sqrt, symlog, time and utc",A1e="Legend bindings are only supported for selections over an individual field or encoding channel.";function $1e(e){return`Lookups can only be performed on selection parameters. "${e}" is a variable parameter.`}function C1e(e){return`Cannot define and lookup the "${e}" selection in the same view. Try moving the lookup into a second, layered view?`}const T1e="The same selection must be used to override scale domains in a layered view.",M1e='Interval selections should be initialized using "x", "y", "longitude", or "latitude" keys.';function k1e(e){return`Unknown repeated value "${e}".`}function Dz(e){return`The "columns" property cannot be used when "${e}" has nested row/column.`}const O1e="Multiple timer selections in one unit spec are not supported. Ignoring all but the first.",vM="Animation involving facet, layer, or concat is currently unsupported.";function D1e(e){return`A "field" or "encoding" must be specified when using a selection as a scale domain. Using "field": ${ge(e)}.`}function R1e(e,t,n,i){return`${e.length?"Multiple ":"No "}matching ${ge(t)} encoding found for selection ${ge(n.param)}. Using "field": ${ge(i)}.`}const N1e="Axes cannot be shared in concatenated or repeated views yet (https://github.com/vega/vega-lite/issues/2415).";function z1e(e){return`Unrecognized parse "${e}".`}function Rz(e,t,n){return`An ancestor parsed field "${e}" as ${n} but a child wants to parse the field as ${t}.`}const F1e="Attempt to add the same child twice.";function L1e(e){return`Ignoring an invalid transform: ${dt(e)}.`}const U1e='If "from.fields" is not specified, "as" has to be a string that specifies the key to be used for the data from the secondary source.';function Nz(e){return`Config.customFormatTypes is not true, thus custom format type and format for channel ${e} are dropped.`}function B1e(e){const{parentProjection:t,projection:n}=e;return`Layer's shared projection ${dt(t)} is overridden by a child projection ${dt(n)}.`}const I1e="Arc marks uses theta channel rather than angle, replacing angle with theta.";function P1e(e){return`${e}Offset dropped because ${e} is continuous`}function q1e(e,t,n){return`Channel ${e} is a ${t}. Converted to {value: ${dt(n)}}.`}function uj(e){return`Invalid field type "${e}".`}function j1e(e,t){return`Invalid field type "${e}" for aggregate: "${t}", using "quantitative" instead.`}function H1e(e){return`Invalid aggregation operator "${e}".`}function lj(e,t){const{fill:n,stroke:i}=t;return`Dropping color ${e} as the plot also has ${n&&i?"fill and stroke":n?"fill":"stroke"}.`}function G1e(e){return`Position range does not support relative band size for ${e}.`}function NA(e,t){return`Dropping ${dt(e)} from channel "${t}" since it does not contain any data field, datum, value, or signal.`}const Y1e="Line marks cannot encode size with a non-groupby field. You may want to use trail marks instead.";function ex(e,t,n){return`${e} dropped as it is incompatible with "${t}".`}function X1e(e){return`${e}-encoding is dropped as ${e} is not a valid encoding channel.`}function V1e(e){return`${e} encoding should be discrete (ordinal / nominal / binned).`}function W1e(e){return`${e} encoding should be discrete (ordinal / nominal / binned) or use a discretizing scale (e.g. threshold).`}function Q1e(e){return`Facet encoding dropped as ${e.join(" and ")} ${e.length>1?"are":"is"} also specified.`}function l_(e,t){return`Using discrete channel "${e}" to encode "${t}" field can be misleading as it does not encode ${t==="ordinal"?"order":"magnitude"}.`}function Z1e(e){return`The ${e} for range marks cannot be an expression`}function K1e(e,t){return`Line mark is for continuous lines and thus cannot be used with ${e&&t?"x2 and y2":e?"x2":"y2"}. We will use the rule mark (line segments) instead.`}function J1e(e,t){return`Specified orient "${e}" overridden with "${t}".`}function eye(e){return`Cannot use the scale property "${e}" with non-color channel.`}function tye(e){return`Cannot use the relative band size with ${e} scale.`}function nye(e){return`Using unaggregated domain with raw field has no effect (${dt(e)}).`}function iye(e){return`Unaggregated domain not applicable for "${e}" since it produces values outside the origin domain of the source data.`}function rye(e){return`Unaggregated domain is currently unsupported for log scale (${dt(e)}).`}function aye(e){return`Cannot apply size to non-oriented mark "${e}".`}function sye(e,t,n){return`Channel "${e}" does not work with "${t}" scale. We are using "${n}" scale instead.`}function oye(e,t){return`FieldDef does not work with "${e}" scale. We are using "${t}" scale instead.`}function cj(e,t,n){return`${n}-scale's "${t}" is dropped as it does not work with ${e} scale.`}function fj(e){return`The step for "${e}" is dropped because the ${e==="width"?"x":"y"} is continuous.`}function uye(e,t,n,i){return`Conflicting ${t.toString()} property "${e.toString()}" (${dt(n)} and ${dt(i)}). Using ${dt(n)}.`}function lye(e,t,n,i){return`Conflicting ${t.toString()} property "${e.toString()}" (${dt(n)} and ${dt(i)}). Using the union of the two domains.`}function cye(e){return`Setting the scale to be independent for "${e}" means we also have to set the guide (axis or legend) to be independent.`}function fye(e){return`Dropping sort property ${dt(e)} as unioned domains only support boolean or op "count", "min", and "max".`}const zz="Domains that should be unioned has conflicting sort properties. Sort will be set to true.",dye="Detected faceted independent scales that union domain of multiple fields from different data sources. We will use the first field. The result view size may be incorrect.",hye="Detected faceted independent scales that union domain of the same fields from different source. We will assume that this is the same field from a different fork of the same data source. However, if this is not the case, the result view size may be incorrect.",gye="Detected faceted independent scales that union domain of multiple fields from the same data source. We will use the first field. The result view size may be incorrect.";function pye(e){return`Cannot stack "${e}" if there is already "${e}2".`}function mye(e){return`Stack is applied to a non-linear scale (${e}).`}function yye(e){return`Stacking is applied even though the aggregate function is non-summative ("${e}").`}function pv(e,t){return`Invalid ${e}: ${dt(t)}.`}function vye(e){return`Dropping day from datetime ${dt(e)} as day cannot be combined with other units.`}function bye(e,t){return`${t?"extent ":""}${t&&e?"and ":""}${e?"center ":""}${t&&e?"are ":"is "}not needed when data are aggregated.`}function xye(e,t,n){return`${e} is not usually used with ${t} for ${n}.`}function Eye(e,t){return`Continuous axis should not have customized aggregation function ${e}; ${t} already agregates the axis.`}function Fz(e){return`1D error band does not support ${e}.`}function dj(e){return`Channel ${e} is required for "binned" bin.`}function Sye(e){return`Channel ${e} should not be used with "binned" bin.`}function _ye(e){return`Domain for ${e} is required for threshold scale.`}const hj=d$(f$);let Yl=hj;function wye(e){return Yl=e,Yl}function Aye(){return Yl=hj,Yl}function bM(...e){Yl.error(...e)}function de(...e){Yl.warn(...e)}function $ye(...e){Yl.debug(...e)}function hc(e){if(e&&be(e)){for(const t of EM)if(ce(e,t))return!0}return!1}const gj=["january","february","march","april","may","june","july","august","september","october","november","december"],Cye=gj.map(e=>e.substr(0,3)),pj=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],Tye=pj.map(e=>e.substr(0,3));function Mye(e){if(Gb(e)&&(e=+e),st(e))return e>4&&de(pv("quarter",e)),e-1;throw new Error(pv("quarter",e))}function kye(e){if(Gb(e)&&(e=+e),st(e))return e-1;{const t=e.toLowerCase(),n=gj.indexOf(t);if(n!==-1)return n;const i=t.substr(0,3),r=Cye.indexOf(i);if(r!==-1)return r;throw new Error(pv("month",e))}}function Oye(e){if(Gb(e)&&(e=+e),st(e))return e%7;{const t=e.toLowerCase(),n=pj.indexOf(t);if(n!==-1)return n;const i=t.substr(0,3),r=Tye.indexOf(i);if(r!==-1)return r;throw new Error(pv("day",e))}}function xM(e,t){const n=[];if(t&&e.day!==void 0&&le(e).length>1&&(de(vye(e)),e=Le(e),delete e.day),e.year!==void 0?n.push(e.year):n.push(2012),e.month!==void 0){const i=t?kye(e.month):e.month;n.push(i)}else if(e.quarter!==void 0){const i=t?Mye(e.quarter):e.quarter;n.push(st(i)?i*3:`${i}*3`)}else n.push(0);if(e.date!==void 0)n.push(e.date);else if(e.day!==void 0){const i=t?Oye(e.day):e.day;n.push(st(i)?i+1:`${i}+1`)}else n.push(1);for(const i of["hours","minutes","seconds","milliseconds"]){const r=e[i];n.push(typeof r>"u"?0:r)}return n}function Xl(e){const n=xM(e,!0).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}function Dye(e){const n=xM(e,!1).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}function Rye(e){const t=xM(e,!0);return e.utc?+new Date(Date.UTC(...t)):+new Date(...t)}const mj={year:1,quarter:1,month:1,week:1,day:1,dayofyear:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1},EM=le(mj);function Nye(e){return _e(mj,e)}function gc(e){return be(e)?e.binned:yj(e)}function yj(e){return e==null?void 0:e.startsWith("binned")}function SM(e){return e.startsWith("utc")}function zye(e){return e.substring(3)}const Fye={"year-month":"%b %Y ","year-month-date":"%b %d, %Y "};function tx(e){return EM.filter(t=>bj(e,t))}function vj(e){const t=tx(e);return t[t.length-1]}function bj(e,t){const n=e.indexOf(t);return!(n<0||n>0&&t==="seconds"&&e.charAt(n-1)==="i"||e.length>n+3&&t==="day"&&e.charAt(n+3)==="o"||n>0&&t==="year"&&e.charAt(n-1)==="f")}function Lye(e,t,{end:n}={end:!1}){const i=sM(t),r=SM(e)?"utc":"";function a(l){return l==="quarter"?`(${r}quarter(${i})-1)`:`${r}${l}(${i})`}let s;const o={};for(const l of EM)bj(e,l)&&(o[l]=a(l),s=l);return n&&(o[s]+="+1"),Dye(o)}function xj(e){if(!e)return;const t=tx(e);return`timeUnitSpecifier(${dt(t)}, ${dt(Fye)})`}function Uye(e,t,n){if(!e)return;const i=xj(e);return`${n||SM(e)?"utc":"time"}Format(${t}, ${i})`}function An(e){if(!e)return;let t;return ve(e)?yj(e)?t={unit:e.substring(6),binned:!0}:t={unit:e}:be(e)&&(t={...e,...e.unit?{unit:e.unit}:{}}),SM(t.unit)&&(t.utc=!0,t.unit=zye(t.unit)),t}function Bye(e){const{utc:t,...n}=An(e);return n.unit?(t?"utc":"")+le(n).map(i=>Dt(`${i==="unit"?"":`_${i}_`}${n[i]}`)).join(""):`${t?"utc":""}timeunit${le(n).map(i=>Dt(`_${i}_${n[i]}`)).join("")}`}function Ej(e,t=n=>n){const n=An(e),i=vj(n.unit);if(i&&i!=="day"){const r={year:2001,month:1,date:1,hours:0,minutes:0,seconds:0,milliseconds:0},{step:a,part:s}=Sj(i,n.step),o={...r,[s]:+r[s]+a};return`${t(Xl(o))} - ${t(Xl(r))}`}}const Iye={year:1,month:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1};function Pye(e){return _e(Iye,e)}function Sj(e,t=1){if(Pye(e))return{part:e,step:t};switch(e){case"day":case"dayofyear":return{part:"date",step:t};case"quarter":return{part:"month",step:t*3};case"week":return{part:"date",step:t*7}}}function qye(e){return ce(e,"param")}function _M(e){return!!(e!=null&&e.field)&&e.equal!==void 0}function wM(e){return!!(e!=null&&e.field)&&e.lt!==void 0}function AM(e){return!!(e!=null&&e.field)&&e.lte!==void 0}function $M(e){return!!(e!=null&&e.field)&&e.gt!==void 0}function CM(e){return!!(e!=null&&e.field)&&e.gte!==void 0}function TM(e){if(e!=null&&e.field){if(re(e.range)&&e.range.length===2)return!0;if(Ce(e.range))return!0}return!1}function MM(e){return!!(e!=null&&e.field)&&(re(e.oneOf)||re(e.in))}function jye(e){return!!(e!=null&&e.field)&&e.valid!==void 0}function _j(e){return MM(e)||_M(e)||TM(e)||wM(e)||$M(e)||AM(e)||CM(e)}function $a(e,t){return fx(e,{timeUnit:t,wrapTime:!0})}function Hye(e,t){return e.map(n=>$a(n,t))}function wj(e,t=!0){const{field:n}=e,i=An(e.timeUnit),{unit:r,binned:a}=i||{},s=me(e,{expr:"datum"}),o=r?`time(${a?s:Lye(r,n)})`:s;if(_M(e))return`${o}===${$a(e.equal,r)}`;if(wM(e)){const l=e.lt;return`${o}<${$a(l,r)}`}else if($M(e)){const l=e.gt;return`${o}>${$a(l,r)}`}else if(AM(e)){const l=e.lte;return`${o}<=${$a(l,r)}`}else if(CM(e)){const l=e.gte;return`${o}>=${$a(l,r)}`}else{if(MM(e))return`indexof([${Hye(e.oneOf,r).join(",")}], ${o}) !== -1`;if(jye(e))return nx(o,e.valid);if(TM(e)){const{range:l}=Rn(e),f=Ce(l)?{signal:`${l.signal}[0]`}:l[0],d=Ce(l)?{signal:`${l.signal}[1]`}:l[1];if(f!==null&&d!==null&&t)return`inrange(${o}, [${$a(f,r)}, ${$a(d,r)}])`;const g=[];return f!==null&&g.push(`${o} >= ${$a(f,r)}`),d!==null&&g.push(`${o} <= ${$a(d,r)}`),g.length>0?g.join(" && "):"true"}}throw new Error(`Invalid field predicate: ${dt(e)}`)}function nx(e,t=!0){return t?`isValid(${e}) && isFinite(+${e})`:`!isValid(${e}) || !isFinite(+${e})`}function Gye(e){return _j(e)&&e.timeUnit?{...e,timeUnit:An(e.timeUnit)}:e}const h0={quantitative:"quantitative",ordinal:"ordinal",temporal:"temporal",nominal:"nominal",geojson:"geojson"};function Yye(e){return e==="quantitative"||e==="temporal"}function Aj(e){return e==="ordinal"||e==="nominal"}const Vl=h0.quantitative,kM=h0.ordinal,od=h0.temporal,OM=h0.nominal,Ud=h0.geojson;function Xye(e){if(e)switch(e=e.toLowerCase(),e){case"q":case Vl:return"quantitative";case"t":case od:return"temporal";case"o":case kM:return"ordinal";case"n":case OM:return"nominal";case Ud:return"geojson"}}const Nn={LINEAR:"linear",LOG:"log",POW:"pow",SQRT:"sqrt",TIME:"time",UTC:"utc",POINT:"point",BAND:"band"},zA={linear:"numeric",log:"numeric",pow:"numeric",sqrt:"numeric",symlog:"numeric",identity:"numeric",sequential:"numeric",time:"time",utc:"time",ordinal:"ordinal","bin-ordinal":"bin-ordinal",point:"ordinal-position",band:"ordinal-position",quantile:"discretizing",quantize:"discretizing",threshold:"discretizing"};function Vye(e,t){const n=zA[e],i=zA[t];return n===i||n==="ordinal-position"&&i==="time"||i==="ordinal-position"&&n==="time"}const Wye={linear:0,log:1,pow:1,sqrt:1,symlog:1,identity:1,sequential:1,time:0,utc:0,point:10,band:11,ordinal:0,"bin-ordinal":0,quantile:0,quantize:0,threshold:0};function Lz(e){return Wye[e]}const $j=new Set(["linear","log","pow","sqrt","symlog"]),Cj=new Set([...$j,"time","utc"]);function Tj(e){return $j.has(e)}const Mj=new Set(["quantile","quantize","threshold"]),Qye=new Set([...Cj,...Mj,"sequential","identity"]),Zye=new Set(["ordinal","bin-ordinal","point","band"]);function $n(e){return Zye.has(e)}function oa(e){return Qye.has(e)}function za(e){return Cj.has(e)}function ud(e){return Mj.has(e)}const Kye={pointPadding:.5,barBandPaddingInner:.1,rectBandPaddingInner:0,tickBandPaddingInner:.25,bandWithNestedOffsetPaddingInner:.2,bandWithNestedOffsetPaddingOuter:.2,minBandSize:2,minFontSize:8,maxFontSize:40,minOpacity:.3,maxOpacity:.8,minSize:4,minStrokeWidth:1,maxStrokeWidth:4,quantileCount:4,quantizeCount:4,zero:!0,framesPerSecond:2,animationDuration:5};function Jye(e){return!ve(e)&&ce(e,"name")}function kj(e){return ce(e,"param")}function eve(e){return ce(e,"unionWith")}function tve(e){return be(e)&&"field"in e}const nve={type:1,domain:1,domainMax:1,domainMin:1,domainMid:1,domainRaw:1,align:1,range:1,rangeMax:1,rangeMin:1,scheme:1,bins:1,reverse:1,round:1,clamp:1,nice:1,base:1,exponent:1,constant:1,interpolate:1,zero:1,padding:1,paddingInner:1,paddingOuter:1},{type:FAe,domain:LAe,range:UAe,rangeMax:BAe,rangeMin:IAe,scheme:PAe,...ive}=nve,rve=le(ive);function FA(e,t){switch(t){case"type":case"domain":case"reverse":case"range":return!0;case"scheme":case"interpolate":return!["point","band","identity"].includes(e);case"bins":return!["point","band","identity","ordinal"].includes(e);case"round":return za(e)||e==="band"||e==="point";case"padding":case"rangeMin":case"rangeMax":return za(e)||["point","band"].includes(e);case"paddingOuter":case"align":return["point","band"].includes(e);case"paddingInner":return e==="band";case"domainMax":case"domainMid":case"domainMin":case"domainRaw":case"clamp":return za(e);case"nice":return za(e)||e==="quantize"||e==="threshold";case"exponent":return e==="pow";case"base":return e==="log";case"constant":return e==="symlog";case"zero":return oa(e)&&!Ve(["log","time","utc","threshold","quantile"],e)}}function Oj(e,t){switch(t){case"interpolate":case"scheme":case"domainMid":return Df(e)?void 0:eye(t);case"align":case"type":case"bins":case"domain":case"domainMax":case"domainMin":case"domainRaw":case"range":case"base":case"exponent":case"constant":case"nice":case"padding":case"paddingInner":case"paddingOuter":case"rangeMax":case"rangeMin":case"reverse":case"round":case"clamp":case"zero":return}}function ave(e,t){return Ve([kM,OM],t)?e===void 0||$n(e):t===od?Ve([Nn.TIME,Nn.UTC,void 0],e):t===Vl?Tj(e)||ud(e)||e===void 0:!0}function sve(e,t,n=!1){if(!us(e))return!1;switch(e){case Rt:case Tn:case Cu:case Ld:case Ur:case pa:return za(t)||t==="band"?!0:t==="point"?!n:!1;case Tu:return Ve(["linear","band"],t);case ro:case Ou:case ao:case Mu:case ku:case lc:return za(t)||ud(t)||Ve(["band","point","ordinal"],t);case Fi:case as:case ss:return t!=="band";case Du:case Li:return t==="ordinal"||ud(t)}}function ove(e){return be(e)&&"value"in e}const Ei={arc:"arc",area:"area",bar:"bar",image:"image",line:"line",point:"point",rect:"rect",rule:"rule",text:"text",tick:"tick",trail:"trail",circle:"circle",square:"square",geoshape:"geoshape"},Dj=Ei.arc,ix=Ei.area,rx=Ei.bar,uve=Ei.image,ax=Ei.line,sx=Ei.point,lve=Ei.rect,mv=Ei.rule,Rj=Ei.text,DM=Ei.tick,cve=Ei.trail,RM=Ei.circle,NM=Ei.square,Nj=Ei.geoshape;function Nu(e){return["line","area","trail"].includes(e)}function Ap(e){return["rect","bar","image","arc","tick"].includes(e)}const fve=new Set(le(Ei));function Wa(e){return ce(e,"type")}const dve=["stroke","strokeWidth","strokeDash","strokeDashOffset","strokeOpacity","strokeJoin","strokeMiterLimit"],hve=["fill","fillOpacity"],gve=[...dve,...hve],pve={color:1,filled:1,invalid:1,order:1,radius2:1,theta2:1,timeUnitBandSize:1,timeUnitBandPosition:1},Uz=le(pve),c_=["binSpacing","continuousBandSize","discreteBandSize","minBandSize"],mve={area:["line","point"],bar:c_,rect:c_,line:["point"],tick:["bandSize","thickness",...c_]},yve={color:"#4c78a8",invalid:"break-paths-show-path-domains",timeUnitBandSize:1},vve={mark:1,arc:1,area:1,bar:1,circle:1,image:1,line:1,point:1,rect:1,rule:1,square:1,text:1,tick:1,trail:1,geoshape:1},zj=le(vve);function Wl(e){return ce(e,"band")}const bve={horizontal:["cornerRadiusTopRight","cornerRadiusBottomRight"],vertical:["cornerRadiusTopLeft","cornerRadiusTopRight"]},xve=5,zM={binSpacing:0,continuousBandSize:xve,minBandSize:.25,timeUnitBandPosition:.5},Eve={...zM,binSpacing:1},Sve={...zM,thickness:1};function _ve(e){return Wa(e)?e.type:e}function Fj(e,{isPath:t}){return e===void 0||e==="break-paths-show-path-domains"?t?"break-paths-show-domains":"filter":e===null?"show":e}function FM({markDef:e,config:t,scaleChannel:n,scaleType:i,isCountAggregate:r}){var o,l;if(!i||!oa(i)||r)return"always-valid";const a=Fj(Et("invalid",e,t),{isPath:Nu(e.type)});return((l=(o=t.scale)==null?void 0:o.invalid)==null?void 0:l[n])!==void 0?"show":a}function wve(e){return e==="break-paths-filter-domains"||e==="break-paths-show-domains"}function Lj({scaleName:e,scale:t,mode:n}){const i=`domain('${e}')`;if(!t||!e)return;const r=`${i}[0]`,a=`peek(${i})`,s=t.domainHasZero();return s==="definitely"?{scale:e,value:0}:s==="maybe"?{signal:`scale('${e}', inrange(0, ${i}) ? 0 : ${n==="zeroOrMin"?r:a})`}:{signal:`scale('${e}', ${n==="zeroOrMin"?r:a})`}}function Uj({scaleChannel:e,channelDef:t,scale:n,scaleName:i,markDef:r,config:a}){var d;const s=n==null?void 0:n.get("type"),o=la(t),l=Kb(o==null?void 0:o.aggregate),f=FM({scaleChannel:e,markDef:r,config:a,scaleType:s,isCountAggregate:l});if(o&&f==="show"){const g=((d=a.scale.invalid)==null?void 0:d[e])??"zero-or-min";return{test:nx(me(o,{expr:"datum"}),!1),...Ave(g,n,i)}}}function Ave(e,t,n){if(ove(e)){const{value:i}=e;return Ce(i)?{signal:i.signal}:{value:i}}return Lj({scale:t,scaleName:n,mode:"zeroOrMin"})}function LM(e){const{channel:t,channelDef:n,markDef:i,scale:r,scaleName:a,config:s}=e,o=cc(t),l=UM(e),f=Uj({scaleChannel:o,channelDef:n,scale:r,scaleName:a,markDef:i,config:s});return f!==void 0?[f,l]:l}function $ve(e){const{datum:t}=e;return hc(t)?Xl(t):`${dt(t)}`}function Cl(e,t,n,i){const r={};if(t&&(r.scale=t),ls(e)){const{datum:a}=e;hc(a)?r.signal=Xl(a):Ce(a)?r.signal=a.signal:d0(a)?r.signal=a.expr:r.value=a}else r.field=me(e,n);if(i){const{offset:a,band:s}=i;a&&(r.offset=a),s&&(r.band=s)}return r}function yv({scaleName:e,fieldOrDatumDef:t,fieldOrDatumDef2:n,offset:i,startSuffix:r,endSuffix:a="end",bandPosition:s=.5}){const o=!Ce(s)&&0<s&&s<1?"datum":void 0,l=me(t,{expr:o,suffix:r}),f=n!==void 0?me(n,{expr:o}):me(t,{suffix:a,expr:o}),d={};if(s===0||s===1){d.scale=e;const g=s===0?l:f;d.field=g}else{const g=Ce(s)?`(1-${s.signal}) * ${l} + ${s.signal} * ${f}`:`${1-s} * ${l} + ${s} * ${f}`;d.signal=`scale("${e}", ${g})`}return i&&(d.offset=i),d}function Cve({scaleName:e,fieldDef:t}){const n=me(t,{expr:"datum"}),i=me(t,{expr:"datum",suffix:"end"});return`abs(scale("${e}", ${i}) - scale("${e}", ${n}))`}function UM({channel:e,channelDef:t,channel2Def:n,markDef:i,config:r,scaleName:a,scale:s,stack:o,offset:l,defaultRef:f,bandPosition:d}){if(t){if(Be(t)){const g=s==null?void 0:s.get("type");if(bi(t)){d??(d=yu({fieldDef:t,fieldDef2:n,markDef:i,config:r}));const{bin:p,timeUnit:y,type:v}=t;if(Ct(p)||d&&y&&v===od)return o!=null&&o.impute?Cl(t,a,{binSuffix:"mid"},{offset:l}):d&&!$n(g)?yv({scaleName:a,fieldOrDatumDef:t,bandPosition:d,offset:l}):Cl(t,a,v0(t,e)?{binSuffix:"range"}:{},{offset:l});if(Dn(p)){if(he(n))return yv({scaleName:a,fieldOrDatumDef:t,fieldOrDatumDef2:n,bandPosition:d,offset:l});de(dj(e===Rt?ga:rs))}}return Cl(t,a,$n(g)?{binSuffix:"range"}:{},{offset:l,band:g==="band"?d??t.bandPosition??.5:void 0})}else if(ua(t)){const g=t.value,p=l?{offset:l}:{};return{...Zg(e,g),...p}}}return qe(f)&&(f=f()),f&&{...f,...l?{offset:l}:{}}}function Zg(e,t){return Ve(["x","x2"],e)&&t==="width"?{field:{group:"width"}}:Ve(["y","y2"],e)&&t==="height"?{field:{group:"height"}}:Mt(t)}function Ql(e){return e&&e!=="number"&&e!=="time"}function Bj(e,t,n){return`${e}(${t}${n?`, ${dt(n)}`:""})`}const Tve="  ";function BM({fieldOrDatumDef:e,format:t,formatType:n,expr:i,normalizeStack:r,config:a}){var l,f;if(Ql(n))return ta({fieldOrDatumDef:e,format:t,formatType:n,expr:i,config:a});const s=Ij(e,i,r),o=ld(e);if(t===void 0&&n===void 0&&a.customFormatTypes){if(o==="quantitative"){if(r&&a.normalizedNumberFormatType)return ta({fieldOrDatumDef:e,format:a.normalizedNumberFormat,formatType:a.normalizedNumberFormatType,expr:i,config:a});if(a.numberFormatType)return ta({fieldOrDatumDef:e,format:a.numberFormat,formatType:a.numberFormatType,expr:i,config:a})}if(o==="temporal"&&a.timeFormatType&&he(e)&&e.timeUnit===void 0)return ta({fieldOrDatumDef:e,format:a.timeFormat,formatType:a.timeFormatType,expr:i,config:a})}if(fd(e)){const d=kve({field:s,timeUnit:he(e)?(l=An(e.timeUnit))==null?void 0:l.unit:void 0,format:t,formatType:a.timeFormatType,rawTimeFormat:a.timeFormat,isUTCScale:pc(e)&&((f=e.scale)==null?void 0:f.type)===Nn.UTC});return d?{signal:d}:void 0}if(t=LA({type:o,specifiedFormat:t,config:a,normalizeStack:r}),he(e)&&Ct(e.bin)){const d=me(e,{expr:i,binSuffix:"end"});return{signal:g0(s,d,t,n,a)}}else return t||ld(e)==="quantitative"?{signal:`${jj(s,t)}`}:{signal:`isValid(${s}) ? ${s} : ""+${s}`}}function Ij(e,t,n){return he(e)?n?`${me(e,{expr:t,suffix:"end"})}-${me(e,{expr:t,suffix:"start"})}`:me(e,{expr:t}):$ve(e)}function ta({fieldOrDatumDef:e,format:t,formatType:n,expr:i,normalizeStack:r,config:a,field:s}){if(s??(s=Ij(e,i,r)),s!=="datum.value"&&he(e)&&Ct(e.bin)){const o=me(e,{expr:i,binSuffix:"end"});return{signal:g0(s,o,t,n,a)}}return{signal:Bj(n,s,t)}}function Pj(e,t,n,i,r,a){var s;if(!(ve(i)&&Ql(i))&&!(n===void 0&&i===void 0&&r.customFormatTypes&&ld(e)==="quantitative"&&(r.normalizedNumberFormatType&&cd(e)&&e.stack==="normalize"||r.numberFormatType))){if(cd(e)&&e.stack==="normalize"&&r.normalizedNumberFormat)return LA({type:"quantitative",config:r,normalizeStack:!0});if(fd(e)){const o=he(e)?(s=An(e.timeUnit))==null?void 0:s.unit:void 0;return o===void 0&&r.customFormatTypes&&r.timeFormatType?void 0:Mve({specifiedFormat:n,timeUnit:o,config:r,omitTimeFormatConfig:a})}return LA({type:t,specifiedFormat:n,config:r})}}function qj(e,t,n){var i;if(e&&(Ce(e)||e==="number"||e==="time"))return e;if(fd(t)&&n!=="time"&&n!=="utc")return he(t)&&((i=An(t==null?void 0:t.timeUnit))!=null&&i.utc)?"utc":"time"}function LA({type:e,specifiedFormat:t,config:n,normalizeStack:i}){if(ve(t))return t;if(e===Vl)return i?n.normalizedNumberFormat:n.numberFormat}function Mve({specifiedFormat:e,timeUnit:t,config:n,omitTimeFormatConfig:i}){return e||(t?{signal:xj(t)}:i?void 0:n.timeFormat)}function jj(e,t){return`format(${e}, "${t||""}")`}function Bz(e,t,n,i){return Ql(n)?Bj(n,e,t):jj(e,(ve(t)?t:void 0)??i.numberFormat)}function g0(e,t,n,i,r){if(n===void 0&&i===void 0&&r.customFormatTypes&&r.numberFormatType)return g0(e,t,r.numberFormat,r.numberFormatType,r);const a=Bz(e,n,i,r),s=Bz(t,n,i,r);return`${nx(e,!1)} ? "null" : ${a} + "${Tve}" + ${s}`}function kve({field:e,timeUnit:t,format:n,formatType:i,rawTimeFormat:r,isUTCScale:a}){return!t||n?!t&&i?`${i}(${e}, ${dt(n)})`:(n=ve(n)?n:r,`${a?"utc":"time"}Format(${e}, ${dt(n)})`):Uye(t,e,a)}const ox="min",Ove={x:1,y:1,color:1,fill:1,stroke:1,strokeWidth:1,size:1,shape:1,fillOpacity:1,strokeOpacity:1,opacity:1,text:1};function Iz(e){return _e(Ove,e)}function Dve(e){return ce(e,"encoding")}function Gs(e){return e&&(e.op==="count"||ce(e,"field"))}function Hj(e){return e&&re(e)}function p0(e){return ce(e,"row")||ce(e,"column")}function IM(e){return ce(e,"header")}function ux(e){return ce(e,"facet")}function Rve(e){return ce(e,"param")}function Nve(e){return!ve(e)&&ce(e,"repeat")}function Pz(e){const{field:t,timeUnit:n,bin:i,aggregate:r}=e;return{...n?{timeUnit:n}:{},...i?{bin:i}:{},...r?{aggregate:r}:{},field:t}}function PM(e){return ce(e,"sort")}function yu({fieldDef:e,fieldDef2:t,markDef:n,config:i}){if(Be(e)&&e.bandPosition!==void 0)return e.bandPosition;if(he(e)){const{timeUnit:r,bin:a}=e;if(r&&!t)return Va("timeUnitBandPosition",n,i);if(Ct(a))return .5}}function Gj({channel:e,fieldDef:t,fieldDef2:n,markDef:i,config:r,scaleType:a,useVlSizeChannel:s}){var f,d,g;const o=Ui(e),l=Et(s?"size":o,i,r,{vgChannel:o});if(l!==void 0)return l;if(he(t)){const{timeUnit:p,bin:y}=t;if(p&&!n)return{band:Va("timeUnitBandSize",i,r)};if(Ct(y)&&!$n(a))return{band:1}}if(Ap(i.type))return a?$n(a)?((f=r[i.type])==null?void 0:f.discreteBandSize)||{band:1}:(d=r[i.type])==null?void 0:d.continuousBandSize:(g=r[i.type])==null?void 0:g.discreteBandSize}function Yj(e,t,n,i){return Ct(e.bin)||e.timeUnit&&bi(e)&&e.type==="temporal"?yu({fieldDef:e,fieldDef2:t,markDef:n,config:i})!==void 0:!1}function Xj(e){return ce(e,"sort")&&!ce(e,"field")}function m0(e){return ce(e,"condition")}function lx(e){const t=e==null?void 0:e.condition;return!!t&&!re(t)&&he(t)}function y0(e){const t=e==null?void 0:e.condition;return!!t&&!re(t)&&Be(t)}function zve(e){const t=e==null?void 0:e.condition;return!!t&&(re(t)||ua(t))}function he(e){return ce(e,"field")||(e==null?void 0:e.aggregate)==="count"}function ld(e){return e==null?void 0:e.type}function ls(e){return ce(e,"datum")}function Ko(e){return bi(e)&&!bv(e)||vv(e)}function qz(e){return bi(e)&&e.type==="quantitative"&&!e.bin||vv(e)}function vv(e){return ls(e)&&st(e.datum)}function Be(e){return he(e)||ls(e)}function bi(e){return e&&(ce(e,"field")||e.aggregate==="count")&&ce(e,"type")}function ua(e){return ce(e,"value")}function pc(e){return ce(e,"scale")||ce(e,"sort")}function cd(e){return ce(e,"axis")||ce(e,"stack")||ce(e,"impute")}function Vj(e){return ce(e,"legend")}function Wj(e){return ce(e,"format")||ce(e,"formatType")}function Fve(e){return ar(e,["legend","axis","header","scale"])}function Lve(e){return ce(e,"op")}function me(e,t={}){let n=e.field;const i=t.prefix;let r=t.suffix,a="";if(Bve(e))n=Uq("count");else{let s;if(!t.nofn)if(Lve(e))s=e.op;else{const{bin:o,aggregate:l,timeUnit:f}=e;Ct(o)?(s=Kq(o),r=(t.binSuffix??"")+(t.suffix??"")):l?Ru(l)?(a=`["${n}"]`,n=`argmax_${l.argmax}`):Zs(l)?(a=`["${n}"]`,n=`argmin_${l.argmin}`):s=String(l):f&&!gc(f)&&(s=Bye(f),r=(!["range","mid"].includes(t.binSuffix)&&t.binSuffix||"")+(t.suffix??""))}s&&(n=n?`${s}_${n}`:s)}return r&&(n=`${n}_${r}`),i&&(n=`${i}_${n}`),t.forAs?Fd(n):t.expr?zq(n,t.expr)+a:zr(n)+a}function bv(e){switch(e.type){case"nominal":case"ordinal":case"geojson":return!0;case"quantitative":return he(e)&&!!e.bin;case"temporal":return!1}throw new Error(uj(e.type))}function Uve(e){var t;return pc(e)&&ud((t=e.scale)==null?void 0:t.type)}function Bve(e){return e.aggregate==="count"}function Ive(e,t){var s;const{field:n,bin:i,timeUnit:r,aggregate:a}=e;if(a==="count")return t.countTitle;if(Ct(i))return`${n} (binned)`;if(r&&!gc(r)){const o=(s=An(r))==null?void 0:s.unit;if(o)return`${n} (${tx(o).join("-")})`}else if(a)return Ru(a)?`${n} for max ${a.argmax}`:Zs(a)?`${n} for min ${a.argmin}`:`${u0(a)} of ${n}`;return n}function Pve(e){const{aggregate:t,bin:n,timeUnit:i,field:r}=e;if(Ru(t))return`${r} for argmax(${t.argmax})`;if(Zs(t))return`${r} for argmin(${t.argmin})`;const a=i&&!gc(i)?An(i):void 0,s=t||(a==null?void 0:a.unit)||(a==null?void 0:a.maxbins)&&"timeunit"||Ct(n)&&"bin";return s?`${s.toUpperCase()}(${r})`:r}const Qj=(e,t)=>{switch(t.fieldTitle){case"plain":return e.field;case"functional":return Pve(e);default:return Ive(e,t)}};let Zj=Qj;function Kj(e){Zj=e}function qve(){Kj(Qj)}function Rf(e,t,{allowDisabling:n,includeDefault:i=!0}){var o;const r=(o=qM(e))==null?void 0:o.title;if(!he(e))return r??e.title;const a=e,s=i?jM(a,t):void 0;return n?Wt(r,a.title,s):r??a.title??s}function qM(e){if(cd(e)&&e.axis)return e.axis;if(Vj(e)&&e.legend)return e.legend;if(IM(e)&&e.header)return e.header}function jM(e,t){return Zj(e,t)}function xv(e){if(Wj(e)){const{format:t,formatType:n}=e;return{format:t,formatType:n}}else{const t=qM(e)??{},{format:n,formatType:i}=t;return{format:n,formatType:i}}}function jve(e,t){var a;switch(t){case"latitude":case"longitude":return"quantitative";case"row":case"column":case"facet":case"shape":case"strokeDash":return"nominal";case"order":return"ordinal"}if(PM(e)&&re(e.sort))return"ordinal";const{aggregate:n,bin:i,timeUnit:r}=e;if(r)return"temporal";if(i||n&&!Ru(n)&&!Zs(n))return"quantitative";if(pc(e)&&((a=e.scale)!=null&&a.type))switch(zA[e.scale.type]){case"numeric":case"discretizing":return"quantitative";case"time":return"temporal"}return"nominal"}function la(e){if(he(e))return e;if(lx(e))return e.condition}function cn(e){if(Be(e))return e;if(y0(e))return e.condition}function Jj(e,t,n,i={}){if(ve(e)||st(e)||xu(e)){const r=ve(e)?"string":st(e)?"number":"boolean";return de(q1e(t,r,e)),{value:e}}return Be(e)?Ev(e,t,n,i):y0(e)?{...e,condition:Ev(e.condition,t,n,i)}:e}function Ev(e,t,n,i){if(Wj(e)){const{format:r,formatType:a,...s}=e;if(Ql(a)&&!n.customFormatTypes)return de(Nz(t)),Ev(s,t,n,i)}else{const r=cd(e)?"axis":Vj(e)?"legend":IM(e)?"header":null;if(r&&e[r]){const{format:a,formatType:s,...o}=e[r];if(Ql(s)&&!n.customFormatTypes)return de(Nz(t)),Ev({...e,[r]:o},t,n,i)}}return he(e)?HM(e,t,i):Hve(e)}function Hve(e){let t=e.type;if(t)return e;const{datum:n}=e;return t=st(n)?"quantitative":ve(n)?"nominal":hc(n)?"temporal":void 0,{...e,type:t}}function HM(e,t,{compositeMark:n=!1}={}){const{aggregate:i,timeUnit:r,bin:a,field:s}=e,o={...e};if(!n&&i&&!pM(i)&&!Ru(i)&&!Zs(i)&&(de(H1e(i)),delete o.aggregate),r&&(o.timeUnit=An(r)),s&&(o.field=`${s}`),Ct(a)&&(o.bin=cx(a,t)),Dn(a)&&!Qt(t)&&de(Sye(t)),bi(o)){const{type:l}=o,f=Xye(l);l!==f&&(o.type=f),l!=="quantitative"&&Kb(i)&&(de(j1e(l,i)),o.type="quantitative")}else if(!Yq(t)){const l=jve(o,t);o.type=l}if(bi(o)){const{compatible:l,warning:f}=Gve(o,t)||{};l===!1&&de(f)}if(PM(o)&&ve(o.sort)){const{sort:l}=o;if(Iz(l))return{...o,sort:{encoding:l}};const f=l.substring(1);if(l.charAt(0)==="-"&&Iz(f))return{...o,sort:{encoding:f,order:"descending"}}}if(IM(o)){const{header:l}=o;if(l){const{orient:f,...d}=l;if(f)return{...o,header:{...d,labelOrient:l.labelOrient||f,titleOrient:l.titleOrient||f}}}}return o}function cx(e,t){return xu(e)?{maxbins:Az(t)}:e==="binned"?{binned:!0}:!e.maxbins&&!e.step?{...e,maxbins:Az(t)}:e}const hf={compatible:!0};function Gve(e,t){const n=e.type;if(n==="geojson"&&t!=="shape")return{compatible:!1,warning:`Channel ${t} should not be used with a geojson data.`};switch(t){case js:case Hs:case Yb:return bv(e)?hf:{compatible:!1,warning:V1e(t)};case Rt:case Tn:case Cu:case Ld:case Fi:case as:case ss:case l0:case c0:case Xb:case Gl:case Vb:case Wb:case lc:case Ur:case pa:case Qb:return hf;case ya:case Fr:case ma:case va:return n!==Vl?{compatible:!1,warning:`Channel ${t} should be used with a quantitative field only, not ${e.type} field.`}:hf;case ao:case Mu:case ku:case Ou:case ro:case io:case no:case ga:case rs:case Tu:return n==="nominal"&&!e.sort?{compatible:!1,warning:`Channel ${t} should not be used with an unsorted discrete field.`}:hf;case Li:case Du:return!bv(e)&&!Uve(e)?{compatible:!1,warning:W1e(t)}:hf;case sd:return e.type==="nominal"&&!("sort"in e)?{compatible:!1,warning:"Channel order is inappropriate for nominal field, which has no inherent order."}:hf}}function fd(e){const{formatType:t}=xv(e);return t==="time"||!t&&Yve(e)}function Yve(e){return e&&(e.type==="temporal"||he(e)&&!!e.timeUnit)}function fx(e,{timeUnit:t,type:n,wrapTime:i,undefinedIfExprNotRequired:r}){var l;const a=t&&((l=An(t))==null?void 0:l.unit);let s=a||n==="temporal",o;return d0(e)?o=e.expr:Ce(e)?o=e.signal:hc(e)?(s=!0,o=Xl(e)):(ve(e)||st(e))&&s&&(o=`datetime(${dt(e)})`,Nye(a)&&(st(e)&&e<1e4||ve(e)&&isNaN(Date.parse(e)))&&(o=Xl({[a]:e}))),o?i&&s?`time(${o})`:o:r?void 0:dt(e)}function eH(e,t){const{type:n}=e;return t.map(i=>{const r=he(e)&&!gc(e.timeUnit)?e.timeUnit:void 0,a=fx(i,{timeUnit:r,type:n,undefinedIfExprNotRequired:!0});return a!==void 0?{signal:a}:i})}function v0(e,t){return Ct(e.bin)?us(t)&&["ordinal","nominal"].includes(e.type):(console.warn("Only call this method for binned field defs."),!1)}const jz={labelAlign:{part:"labels",vgProp:"align"},labelBaseline:{part:"labels",vgProp:"baseline"},labelColor:{part:"labels",vgProp:"fill"},labelFont:{part:"labels",vgProp:"font"},labelFontSize:{part:"labels",vgProp:"fontSize"},labelFontStyle:{part:"labels",vgProp:"fontStyle"},labelFontWeight:{part:"labels",vgProp:"fontWeight"},labelOpacity:{part:"labels",vgProp:"opacity"},labelOffset:null,labelPadding:null,gridColor:{part:"grid",vgProp:"stroke"},gridDash:{part:"grid",vgProp:"strokeDash"},gridDashOffset:{part:"grid",vgProp:"strokeDashOffset"},gridOpacity:{part:"grid",vgProp:"opacity"},gridWidth:{part:"grid",vgProp:"strokeWidth"},tickColor:{part:"ticks",vgProp:"stroke"},tickDash:{part:"ticks",vgProp:"strokeDash"},tickDashOffset:{part:"ticks",vgProp:"strokeDashOffset"},tickOpacity:{part:"ticks",vgProp:"opacity"},tickSize:null,tickWidth:{part:"ticks",vgProp:"strokeWidth"}};function b0(e){return e==null?void 0:e.condition}const tH=["domain","grid","labels","ticks","title"],Xve={grid:"grid",gridCap:"grid",gridColor:"grid",gridDash:"grid",gridDashOffset:"grid",gridOpacity:"grid",gridScale:"grid",gridWidth:"grid",orient:"main",bandPosition:"both",aria:"main",description:"main",domain:"main",domainCap:"main",domainColor:"main",domainDash:"main",domainDashOffset:"main",domainOpacity:"main",domainWidth:"main",format:"main",formatType:"main",labelAlign:"main",labelAngle:"main",labelBaseline:"main",labelBound:"main",labelColor:"main",labelFlush:"main",labelFlushOffset:"main",labelFont:"main",labelFontSize:"main",labelFontStyle:"main",labelFontWeight:"main",labelLimit:"main",labelLineHeight:"main",labelOffset:"main",labelOpacity:"main",labelOverlap:"main",labelPadding:"main",labels:"main",labelSeparation:"main",maxExtent:"main",minExtent:"main",offset:"both",position:"main",tickCap:"main",tickColor:"main",tickDash:"main",tickDashOffset:"main",tickMinStep:"both",tickOffset:"both",tickOpacity:"main",tickRound:"both",ticks:"main",tickSize:"main",tickWidth:"both",title:"main",titleAlign:"main",titleAnchor:"main",titleAngle:"main",titleBaseline:"main",titleColor:"main",titleFont:"main",titleFontSize:"main",titleFontStyle:"main",titleFontWeight:"main",titleLimit:"main",titleLineHeight:"main",titleOpacity:"main",titlePadding:"main",titleX:"main",titleY:"main",encode:"both",scale:"both",tickBand:"both",tickCount:"both",tickExtra:"both",translate:"both",values:"both",zindex:"both"},nH={orient:1,aria:1,bandPosition:1,description:1,domain:1,domainCap:1,domainColor:1,domainDash:1,domainDashOffset:1,domainOpacity:1,domainWidth:1,format:1,formatType:1,grid:1,gridCap:1,gridColor:1,gridDash:1,gridDashOffset:1,gridOpacity:1,gridWidth:1,labelAlign:1,labelAngle:1,labelBaseline:1,labelBound:1,labelColor:1,labelFlush:1,labelFlushOffset:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelLineHeight:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labels:1,labelSeparation:1,maxExtent:1,minExtent:1,offset:1,position:1,tickBand:1,tickCap:1,tickColor:1,tickCount:1,tickDash:1,tickDashOffset:1,tickExtra:1,tickMinStep:1,tickOffset:1,tickOpacity:1,tickRound:1,ticks:1,tickSize:1,tickWidth:1,title:1,titleAlign:1,titleAnchor:1,titleAngle:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titlePadding:1,titleX:1,titleY:1,translate:1,values:1,zindex:1},Vve={...nH,style:1,labelExpr:1,encoding:1};function Hz(e){return _e(Vve,e)}const Wve={axis:1,axisBand:1,axisBottom:1,axisDiscrete:1,axisLeft:1,axisPoint:1,axisQuantitative:1,axisRight:1,axisTemporal:1,axisTop:1,axisX:1,axisXBand:1,axisXDiscrete:1,axisXPoint:1,axisXQuantitative:1,axisXTemporal:1,axisY:1,axisYBand:1,axisYDiscrete:1,axisYPoint:1,axisYQuantitative:1,axisYTemporal:1},iH=le(Wve);function oo(e){return ce(e,"mark")}class dx{constructor(t,n){oe(this,"name");oe(this,"run");this.name=t,this.run=n}hasMatchingType(t){return oo(t)?_ve(t.mark)===this.name:!1}}function Tl(e,t){const n=e==null?void 0:e[t];return n?re(n)?rd(n,i=>!!i.field):he(n)||lx(n):!1}function rH(e,t){const n=e==null?void 0:e[t];return n?re(n)?rd(n,i=>!!i.field):he(n)||ls(n)||y0(n):!1}function aH(e,t){if(Qt(t)){const n=e[t];if((he(n)||ls(n))&&(Aj(n.type)||he(n)&&n.timeUnit)){const i=cM(t);return rH(e,i)}}return!1}function sH(e){return rd(Hme,t=>{if(Tl(e,t)){const n=e[t];if(re(n))return rd(n,i=>!!i.aggregate);{const i=la(n);return i&&!!i.aggregate}}return!1})}function oH(e,t){const n=[],i=[],r=[],a=[],s={};return GM(e,(o,l)=>{if(he(o)){const{field:f,aggregate:d,bin:g,timeUnit:p,...y}=o;if(d||p||g){const v=qM(o),b=v==null?void 0:v.title;let E=me(o,{forAs:!0});const _={...b?[]:{title:Rf(o,t,{allowDisabling:!0})},...y,field:E};if(d){let w;if(Ru(d)?(w="argmax",E=me({op:"argmax",field:d.argmax},{forAs:!0}),_.field=`${E}.${f}`):Zs(d)?(w="argmin",E=me({op:"argmin",field:d.argmin},{forAs:!0}),_.field=`${E}.${f}`):d!=="boxplot"&&d!=="errorbar"&&d!=="errorband"&&(w=d),w){const A={op:w,as:E};f&&(A.field=f),a.push(A)}}else if(n.push(E),bi(o)&&Ct(g)){if(i.push({bin:g,field:f,as:E}),n.push(me(o,{binSuffix:"end"})),v0(o,l)&&n.push(me(o,{binSuffix:"range"})),Qt(l)){const w={field:`${E}_end`};s[`${l}2`]=w}_.bin="binned",Yq(l)||(_.type=Vl)}else if(p&&!gc(p)){r.push({timeUnit:p,field:f,as:E});const w=bi(o)&&o.type!==od&&"time";w&&(l===l0||l===Gl?_.formatType=w:t1e(l)?_.legend={formatType:w,..._.legend}:Qt(l)&&(_.axis={formatType:w,..._.axis}))}s[l]=_}else n.push(f),s[l]=e[l]}else s[l]=e[l]}),{bins:i,timeUnits:r,aggregate:a,groupby:n,encoding:s}}function Qve(e,t,n){const i=i1e(t,n);if(i){if(i==="binned"){const r=e[t===ga?Rt:Tn];return!!(he(r)&&he(e[t])&&Dn(r.bin))}}else return!1;return!0}function Zve(e,t,n,i){const r={};for(const a of le(e))Gq(a)||de(X1e(a));for(let a of Qme){if(!e[a])continue;const s=e[a];if(f0(a)){const o=Wme(a),l=r[o];if(he(l)&&Yye(l.type)&&he(s)&&!l.timeUnit){de(P1e(o));continue}}if(a==="angle"&&t==="arc"&&!e.theta&&(de(I1e),a=Ur),!Qve(e,a,t)){de(ex(a,t));continue}if(a===ro&&t==="line"){const o=la(e[a]);if(o!=null&&o.aggregate){de(Y1e);continue}}if(a===Fi&&(n?"fill"in e:"stroke"in e)){de(lj("encoding",{fill:"fill"in e,stroke:"stroke"in e}));continue}if(a===c0||a===sd&&!re(s)&&!ua(s)||a===Gl&&re(s)){if(s){if(a===sd){const o=e[a];if(Xj(o)){r[a]=o;continue}}r[a]=Ee(s).reduce((o,l)=>(he(l)?o.push(HM(l,a)):de(NA(l,a)),o),[])}}else{if(a===Gl&&s===null)r[a]=null;else if(!he(s)&&!ls(s)&&!ua(s)&&!m0(s)&&!Ce(s)){de(NA(s,a));continue}r[a]=Jj(s,a,i)}}return r}function hx(e,t){const n={};for(const i of le(e)){const r=Jj(e[i],i,t,{compositeMark:!0});n[i]=r}return n}function Kve(e){const t=[];for(const n of le(e))if(Tl(e,n)){const i=e[n],r=Ee(i);for(const a of r)he(a)?t.push(a):lx(a)&&t.push(a.condition)}return t}function GM(e,t,n){if(e)for(const i of le(e)){const r=e[i];if(re(r))for(const a of r)t.call(n,a,i);else t.call(n,r,i)}}function Jve(e,t,n,i){return e?le(e).reduce((r,a)=>{const s=e[a];return re(s)?s.reduce((o,l)=>t.call(i,o,l,a),r):t.call(i,r,s,a)},n):n}function uH(e,t){return le(t).reduce((n,i)=>{switch(i){case Rt:case Tn:case Vb:case Qb:case Wb:case ga:case rs:case Cu:case Ld:case Ur:case io:case pa:case no:case Tu:case ma:case ya:case va:case Fr:case l0:case Li:case lc:case Gl:return n;case sd:if(e==="line"||e==="trail")return n;case c0:case Xb:{const r=t[i];if(re(r)||he(r))for(const a of Ee(r))a.aggregate||n.push(me(a,{}));return n}case ro:if(e==="trail")return n;case Fi:case as:case ss:case ao:case Mu:case ku:case Du:case Ou:{const r=la(t[i]);return r&&!r.aggregate&&n.push(me(r,{})),n}}},[])}function ebe(e){const{tooltip:t,...n}=e;if(!t)return{filteredEncoding:n};let i,r;if(re(t)){for(const a of t)a.aggregate?(i||(i=[]),i.push(a)):(r||(r=[]),r.push(a));i&&(n.tooltip=i)}else t.aggregate?n.tooltip=t:r=t;return re(r)&&r.length===1&&(r=r[0]),{customTooltipWithoutAggregatedField:r,filteredEncoding:n}}function UA(e,t,n,i=!0){if("tooltip"in n)return{tooltip:n.tooltip};const r=e.map(({fieldPrefix:s,titlePrefix:o})=>{const l=i?` of ${YM(t)}`:"";return{field:s+t.field,type:t.type,title:Ce(o)?{signal:`${o}"${escape(l)}"`}:o+l}}),a=Kve(n).map(Fve);return{tooltip:[...r,...Na(a,Ze)]}}function YM(e){const{title:t,field:n}=e;return Wt(t,n)}function XM(e,t,n,i,r){const{scale:a,axis:s}=n;return({partName:o,mark:l,positionPrefix:f,endPositionPrefix:d=void 0,extraEncoding:g={}})=>{const p=YM(n);return lH(e,o,r,{mark:l,encoding:{[t]:{field:`${f}_${n.field}`,type:n.type,...p!==void 0?{title:p}:{},...a!==void 0?{scale:a}:{},...s!==void 0?{axis:s}:{}},...ve(d)?{[`${t}2`]:{field:`${d}_${n.field}`}}:{},...i,...g}})}}function lH(e,t,n,i){const{clip:r,color:a,opacity:s}=e,o=e.type;return e[t]||e[t]===void 0&&n[t]?[{...i,mark:{...n[t],...r?{clip:r}:{},...a?{color:a}:{},...s?{opacity:s}:{},...Wa(i.mark)?i.mark:{type:i.mark},style:`${o}-${String(t)}`,...xu(e[t])?{}:e[t]}}]:[]}function cH(e,t,n){const{encoding:i}=e,r=t==="vertical"?"y":"x",a=i[r],s=i[`${r}2`],o=i[`${r}Error`],l=i[`${r}Error2`];return{continuousAxisChannelDef:g1(a,n),continuousAxisChannelDef2:g1(s,n),continuousAxisChannelDefError:g1(o,n),continuousAxisChannelDefError2:g1(l,n),continuousAxis:r}}function g1(e,t){if(e!=null&&e.aggregate){const{aggregate:n,...i}=e;return n!==t&&de(Eye(n,t)),i}else return e}function fH(e,t){const{mark:n,encoding:i}=e,{x:r,y:a}=i;if(Wa(n)&&n.orient)return n.orient;if(Ko(r)){if(Ko(a)){const s=he(r)&&r.aggregate,o=he(a)&&a.aggregate;if(!s&&o===t)return"vertical";if(!o&&s===t)return"horizontal";if(s===t&&o===t)throw new Error("Both x and y cannot have aggregate");return fd(a)&&!fd(r)?"horizontal":"vertical"}return"horizontal"}else{if(Ko(a))return"vertical";throw new Error(`Need a valid continuous axis for ${t}s`)}}const Sv="boxplot",tbe=["box","median","outliers","rule","ticks"],nbe=new dx(Sv,hH);function dH(e){return st(e)?"tukey":e}function hH(e,{config:t}){e={...e,encoding:hx(e.encoding,t)};const{mark:n,encoding:i,params:r,projection:a,...s}=e,o=Wa(n)?n:{type:n};r&&de(oj("boxplot"));const l=o.extent??t.boxplot.extent,f=Et("size",o,t),d=o.invalid,g=dH(l),{bins:p,timeUnits:y,transform:v,continuousAxisChannelDef:b,continuousAxis:E,groupby:_,aggregate:w,encodingWithoutContinuousAxis:A,ticksOrient:$,boxOrient:C,customTooltipWithoutAggregatedField:k}=ibe(e,l,t),M=Fd(b.field),{color:R,size:z,...B}=A,U=Jt=>XM(o,E,b,Jt,t.boxplot),V=U(B),G=U(A),q=(be(t.boxplot.box)?t.boxplot.box.color:t.mark.color)||"#4c78a8",F=U({...B,...z?{size:z}:{},color:{condition:{test:`${pt(`lower_box_${b.field}`)} >= ${pt(`upper_box_${b.field}`)}`,...R||{value:q}}}}),D=UA([{fieldPrefix:g==="min-max"?"upper_whisker_":"max_",titlePrefix:"Max"},{fieldPrefix:"upper_box_",titlePrefix:"Q3"},{fieldPrefix:"mid_box_",titlePrefix:"Median"},{fieldPrefix:"lower_box_",titlePrefix:"Q1"},{fieldPrefix:g==="min-max"?"lower_whisker_":"min_",titlePrefix:"Min"}],b,A),I={type:"tick",color:"black",opacity:1,orient:$,invalid:d,aria:!1},Y=g==="min-max"?D:UA([{fieldPrefix:"upper_whisker_",titlePrefix:"Upper Whisker"},{fieldPrefix:"lower_whisker_",titlePrefix:"Lower Whisker"}],b,A),K=[...V({partName:"rule",mark:{type:"rule",invalid:d,aria:!1},positionPrefix:"lower_whisker",endPositionPrefix:"lower_box",extraEncoding:Y}),...V({partName:"rule",mark:{type:"rule",invalid:d,aria:!1},positionPrefix:"upper_box",endPositionPrefix:"upper_whisker",extraEncoding:Y}),...V({partName:"ticks",mark:I,positionPrefix:"lower_whisker",extraEncoding:Y}),...V({partName:"ticks",mark:I,positionPrefix:"upper_whisker",extraEncoding:Y})],N=[...g!=="tukey"?K:[],...G({partName:"box",mark:{type:"bar",...f?{size:f}:{},orient:C,invalid:d,ariaRoleDescription:"box"},positionPrefix:"lower_box",endPositionPrefix:"upper_box",extraEncoding:D}),...F({partName:"median",mark:{type:"tick",invalid:d,...be(t.boxplot.median)&&t.boxplot.median.color?{color:t.boxplot.median.color}:{},...f?{size:f}:{},orient:$,aria:!1},positionPrefix:"mid_box",extraEncoding:D})];if(g==="min-max")return{...s,transform:(s.transform??[]).concat(v),layer:N};const W=pt(`lower_box_${b.field}`),ne=pt(`upper_box_${b.field}`),se=`(${ne} - ${W})`,ye=`${W} - ${l} * ${se}`,Se=`${ne} + ${l} * ${se}`,$e=pt(b.field),Ht={joinaggregate:gH(b.field),groupby:_},nt={transform:[{filter:`(${ye} <= ${$e}) && (${$e} <= ${Se})`},{aggregate:[{op:"min",field:b.field,as:`lower_whisker_${M}`},{op:"max",field:b.field,as:`upper_whisker_${M}`},{op:"min",field:`lower_box_${b.field}`,as:`lower_box_${M}`},{op:"max",field:`upper_box_${b.field}`,as:`upper_box_${M}`},...w],groupby:_}],layer:K},{tooltip:xe,...Ue}=B,{scale:Ie,axis:fe}=b,Gt=YM(b),it=lH(o,"outliers",t.boxplot,{transform:[{filter:`(${$e} < ${ye}) || (${$e} > ${Se})`}],mark:"point",encoding:{[E]:{field:b.field,type:b.type,...Gt!==void 0?{title:Gt}:{},...Ie!==void 0?{scale:Ie}:{},...fe!==void 0?{axis:fe}:{}},...Ue,...R?{color:R}:{},...k?{tooltip:k}:{}}})[0];let Kt;const gn=[...p,...y,Ht];return it?Kt={transform:gn,layer:[it,nt]}:(Kt=nt,Kt.transform.unshift(...gn)),{...s,layer:[Kt,{transform:v,layer:N}]}}function gH(e){const t=Fd(e);return[{op:"q1",field:e,as:`lower_box_${t}`},{op:"q3",field:e,as:`upper_box_${t}`}]}function ibe(e,t,n){const i=fH(e,Sv),{continuousAxisChannelDef:r,continuousAxis:a}=cH(e,i,Sv),s=r.field,o=Fd(s),l=dH(t),f=[...gH(s),{op:"median",field:s,as:`mid_box_${o}`},{op:"min",field:s,as:(l==="min-max"?"lower_whisker_":"min_")+o},{op:"max",field:s,as:(l==="min-max"?"upper_whisker_":"max_")+o}],d=l==="min-max"||l==="tukey"?[]:[{calculate:`${pt(`upper_box_${o}`)} - ${pt(`lower_box_${o}`)}`,as:`iqr_${o}`},{calculate:`min(${pt(`upper_box_${o}`)} + ${pt(`iqr_${o}`)} * ${t}, ${pt(`max_${o}`)})`,as:`upper_whisker_${o}`},{calculate:`max(${pt(`lower_box_${o}`)} - ${pt(`iqr_${o}`)} * ${t}, ${pt(`min_${o}`)})`,as:`lower_whisker_${o}`}],{[a]:g,...p}=e.encoding,{customTooltipWithoutAggregatedField:y,filteredEncoding:v}=ebe(p),{bins:b,timeUnits:E,aggregate:_,groupby:w,encoding:A}=oH(v,n),$=i==="vertical"?"horizontal":"vertical",C=i,k=[...b,...E,{aggregate:[..._,...f],groupby:w},...d];return{bins:b,timeUnits:E,transform:k,groupby:w,aggregate:_,continuousAxisChannelDef:r,continuousAxis:a,encodingWithoutContinuousAxis:A,ticksOrient:$,boxOrient:C,customTooltipWithoutAggregatedField:y}}const VM="errorbar",rbe=["ticks","rule"],abe=new dx(VM,pH);function pH(e,{config:t}){e={...e,encoding:hx(e.encoding,t)};const{transform:n,continuousAxisChannelDef:i,continuousAxis:r,encodingWithoutContinuousAxis:a,ticksOrient:s,markDef:o,outerSpec:l,tooltipEncoding:f}=mH(e,VM,t);delete a.size;const d=XM(o,r,i,a,t.errorbar),g=o.thickness,p=o.size,y={type:"tick",orient:s,aria:!1,...g!==void 0?{thickness:g}:{},...p!==void 0?{size:p}:{}},v=[...d({partName:"ticks",mark:y,positionPrefix:"lower",extraEncoding:f}),...d({partName:"ticks",mark:y,positionPrefix:"upper",extraEncoding:f}),...d({partName:"rule",mark:{type:"rule",ariaRoleDescription:"errorbar",...g!==void 0?{size:g}:{}},positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:f})];return{...l,transform:n,...v.length>1?{layer:v}:{...v[0]}}}function sbe(e,t){const{encoding:n}=e;if(obe(n))return{orient:fH(e,t),inputType:"raw"};const i=ube(n),r=lbe(n),a=n.x,s=n.y;if(i){if(r)throw new Error(`${t} cannot be both type aggregated-upper-lower and aggregated-error`);const o=n.x2,l=n.y2;if(Be(o)&&Be(l))throw new Error(`${t} cannot have both x2 and y2`);if(Be(o)){if(Ko(a))return{orient:"horizontal",inputType:"aggregated-upper-lower"};throw new Error(`Both x and x2 have to be quantitative in ${t}`)}else if(Be(l)){if(Ko(s))return{orient:"vertical",inputType:"aggregated-upper-lower"};throw new Error(`Both y and y2 have to be quantitative in ${t}`)}throw new Error("No ranged axis")}else{const o=n.xError,l=n.xError2,f=n.yError,d=n.yError2;if(Be(l)&&!Be(o))throw new Error(`${t} cannot have xError2 without xError`);if(Be(d)&&!Be(f))throw new Error(`${t} cannot have yError2 without yError`);if(Be(o)&&Be(f))throw new Error(`${t} cannot have both xError and yError with both are quantiative`);if(Be(o)){if(Ko(a))return{orient:"horizontal",inputType:"aggregated-error"};throw new Error("All x, xError, and xError2 (if exist) have to be quantitative")}else if(Be(f)){if(Ko(s))return{orient:"vertical",inputType:"aggregated-error"};throw new Error("All y, yError, and yError2 (if exist) have to be quantitative")}throw new Error("No ranged axis")}}function obe(e){return(Be(e.x)||Be(e.y))&&!Be(e.x2)&&!Be(e.y2)&&!Be(e.xError)&&!Be(e.xError2)&&!Be(e.yError)&&!Be(e.yError2)}function ube(e){return Be(e.x2)||Be(e.y2)}function lbe(e){return Be(e.xError)||Be(e.xError2)||Be(e.yError)||Be(e.yError2)}function mH(e,t,n){const{mark:i,encoding:r,params:a,projection:s,...o}=e,l=Wa(i)?i:{type:i};a&&de(oj(t));const{orient:f,inputType:d}=sbe(e,t),{continuousAxisChannelDef:g,continuousAxisChannelDef2:p,continuousAxisChannelDefError:y,continuousAxisChannelDefError2:v,continuousAxis:b}=cH(e,f,t),{errorBarSpecificAggregate:E,postAggregateCalculates:_,tooltipSummary:w,tooltipTitleWithFieldName:A}=cbe(l,g,p,y,v,d,t,n),{[b]:$,[b==="x"?"x2":"y2"]:C,[b==="x"?"xError":"yError"]:k,[b==="x"?"xError2":"yError2"]:M,...R}=r,{bins:z,timeUnits:B,aggregate:U,groupby:V,encoding:G}=oH(R,n),q=[...U,...E],F=d!=="raw"?[]:V,D=UA(w,g,G,A);return{transform:[...o.transform??[],...z,...B,...q.length===0?[]:[{aggregate:q,groupby:F}],..._],groupby:F,continuousAxisChannelDef:g,continuousAxis:b,encodingWithoutContinuousAxis:G,ticksOrient:f==="vertical"?"horizontal":"vertical",markDef:l,outerSpec:o,tooltipEncoding:D}}function cbe(e,t,n,i,r,a,s,o){let l=[],f=[];const d=t.field;let g,p=!1;if(a==="raw"){const y=e.center?e.center:e.extent?e.extent==="iqr"?"median":"mean":o.errorbar.center,v=e.extent?e.extent:y==="mean"?"stderr":"iqr";if(y==="median"!=(v==="iqr")&&de(xye(y,v,s)),v==="stderr"||v==="stdev")l=[{op:v,field:d,as:`extent_${d}`},{op:y,field:d,as:`center_${d}`}],f=[{calculate:`${pt(`center_${d}`)} + ${pt(`extent_${d}`)}`,as:`upper_${d}`},{calculate:`${pt(`center_${d}`)} - ${pt(`extent_${d}`)}`,as:`lower_${d}`}],g=[{fieldPrefix:"center_",titlePrefix:u0(y)},{fieldPrefix:"upper_",titlePrefix:Gz(y,v,"+")},{fieldPrefix:"lower_",titlePrefix:Gz(y,v,"-")}],p=!0;else{let b,E,_;v==="ci"?(b="mean",E="ci0",_="ci1"):(b="median",E="q1",_="q3"),l=[{op:E,field:d,as:`lower_${d}`},{op:_,field:d,as:`upper_${d}`},{op:b,field:d,as:`center_${d}`}],g=[{fieldPrefix:"upper_",titlePrefix:Rf({field:d,aggregate:_,type:"quantitative"},o,{allowDisabling:!1})},{fieldPrefix:"lower_",titlePrefix:Rf({field:d,aggregate:E,type:"quantitative"},o,{allowDisabling:!1})},{fieldPrefix:"center_",titlePrefix:Rf({field:d,aggregate:b,type:"quantitative"},o,{allowDisabling:!1})}]}}else{(e.center||e.extent)&&de(bye(e.center,e.extent)),a==="aggregated-upper-lower"?(g=[],f=[{calculate:pt(n.field),as:`upper_${d}`},{calculate:pt(d),as:`lower_${d}`}]):a==="aggregated-error"&&(g=[{fieldPrefix:"",titlePrefix:d}],f=[{calculate:`${pt(d)} + ${pt(i.field)}`,as:`upper_${d}`}],r?f.push({calculate:`${pt(d)} + ${pt(r.field)}`,as:`lower_${d}`}):f.push({calculate:`${pt(d)} - ${pt(i.field)}`,as:`lower_${d}`}));for(const y of f)g.push({fieldPrefix:y.as.substring(0,6),titlePrefix:Hl(Hl(y.calculate,"datum['",""),"']","")})}return{postAggregateCalculates:f,errorBarSpecificAggregate:l,tooltipSummary:g,tooltipTitleWithFieldName:p}}function Gz(e,t,n){return`${u0(e)} ${n} ${t}`}const WM="errorband",fbe=["band","borders"],dbe=new dx(WM,yH);function yH(e,{config:t}){e={...e,encoding:hx(e.encoding,t)};const{transform:n,continuousAxisChannelDef:i,continuousAxis:r,encodingWithoutContinuousAxis:a,markDef:s,outerSpec:o,tooltipEncoding:l}=mH(e,WM,t),f=s,d=XM(f,r,i,a,t.errorband),g=e.encoding.x!==void 0&&e.encoding.y!==void 0;let p={type:g?"area":"rect"},y={type:g?"line":"rule"};const v={...f.interpolate?{interpolate:f.interpolate}:{},...f.tension&&f.interpolate?{tension:f.tension}:{}};return g?(p={...p,...v,ariaRoleDescription:"errorband"},y={...y,...v,aria:!1}):f.interpolate?de(Fz("interpolate")):f.tension&&de(Fz("tension")),{...o,transform:n,layer:[...d({partName:"band",mark:p,positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:l}),...d({partName:"borders",mark:y,positionPrefix:"lower",extraEncoding:l}),...d({partName:"borders",mark:y,positionPrefix:"upper",extraEncoding:l})]}}const vH={};function QM(e,t,n){const i=new dx(e,t);vH[e]={normalizer:i,parts:n}}function hbe(){return le(vH)}QM(Sv,hH,tbe);QM(VM,pH,rbe);QM(WM,yH,fbe);const gbe=["gradientHorizontalMaxLength","gradientHorizontalMinLength","gradientVerticalMaxLength","gradientVerticalMinLength","unselectedOpacity"],bH={titleAlign:"align",titleAnchor:"anchor",titleAngle:"angle",titleBaseline:"baseline",titleColor:"color",titleFont:"font",titleFontSize:"fontSize",titleFontStyle:"fontStyle",titleFontWeight:"fontWeight",titleLimit:"limit",titleLineHeight:"lineHeight",titleOrient:"orient",titlePadding:"offset"},xH={labelAlign:"align",labelAnchor:"anchor",labelAngle:"angle",labelBaseline:"baseline",labelColor:"color",labelFont:"font",labelFontSize:"fontSize",labelFontStyle:"fontStyle",labelFontWeight:"fontWeight",labelLimit:"limit",labelLineHeight:"lineHeight",labelOrient:"orient",labelPadding:"offset"},pbe=le(bH),mbe=le(xH),ybe={header:1,headerRow:1,headerColumn:1,headerFacet:1},EH=le(ybe),SH=["size","shape","fill","stroke","strokeDash","strokeWidth","opacity"],vbe={gradientHorizontalMaxLength:200,gradientHorizontalMinLength:100,gradientVerticalMaxLength:200,gradientVerticalMinLength:64,unselectedOpacity:.35},bbe={aria:1,clipHeight:1,columnPadding:1,columns:1,cornerRadius:1,description:1,direction:1,fillColor:1,format:1,formatType:1,gradientLength:1,gradientOpacity:1,gradientStrokeColor:1,gradientStrokeWidth:1,gradientThickness:1,gridAlign:1,labelAlign:1,labelBaseline:1,labelColor:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labelSeparation:1,legendX:1,legendY:1,offset:1,orient:1,padding:1,rowPadding:1,strokeColor:1,symbolDash:1,symbolDashOffset:1,symbolFillColor:1,symbolLimit:1,symbolOffset:1,symbolOpacity:1,symbolSize:1,symbolStrokeColor:1,symbolStrokeWidth:1,symbolType:1,tickCount:1,tickMinStep:1,title:1,titleAlign:1,titleAnchor:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titleOrient:1,titlePadding:1,type:1,values:1,zindex:1},ca="_vgsid_",xbe={point:{on:"click",fields:[ca],toggle:"event.shiftKey",resolve:"global",clear:"dblclick"},interval:{on:"[pointerdown, window:pointerup] > window:pointermove!",encodings:["x","y"],translate:"[pointerdown, window:pointerup] > window:pointermove!",zoom:"wheel!",mark:{fill:"#333",fillOpacity:.125,stroke:"white"},resolve:"global",clear:"dblclick"}};function ZM(e){return e==="legend"||!!(e!=null&&e.legend)}function f_(e){return ZM(e)&&be(e)}function KM(e){return!!(e!=null&&e.select)}function _H(e){const t=[];for(const n of e||[]){if(KM(n))continue;const{expr:i,bind:r,...a}=n;if(r&&i){const s={...a,bind:r,init:i};t.push(s)}else{const s={...a,...i?{update:i}:{},...r?{bind:r}:{}};t.push(s)}}return t}function Ebe(e){return gx(e)||ek(e)||JM(e)}function JM(e){return ce(e,"concat")}function gx(e){return ce(e,"vconcat")}function ek(e){return ce(e,"hconcat")}function wH({step:e,offsetIsDiscrete:t}){return t?e.for??"offset":"position"}function Qa(e){return ce(e,"step")}function Yz(e){return ce(e,"view")||ce(e,"width")||ce(e,"height")}const Xz=20,Sbe={align:1,bounds:1,center:1,columns:1,spacing:1},_be=le(Sbe);function wbe(e,t,n){const i=n[t],r={},{spacing:a,columns:s}=i;a!==void 0&&(r.spacing=a),s!==void 0&&(ux(e)&&!p0(e.facet)||JM(e))&&(r.columns=s),gx(e)&&(r.columns=1);for(const o of _be)if(e[o]!==void 0)if(o==="spacing"){const l=e[o];r[o]=st(l)?l:{row:l.row??a,column:l.column??a}}else r[o]=e[o];return r}function BA(e,t){return e[t]??e[t==="width"?"continuousWidth":"continuousHeight"]}function IA(e,t){const n=_v(e,t);return Qa(n)?n.step:AH}function _v(e,t){const n=e[t]??e[t==="width"?"discreteWidth":"discreteHeight"];return Wt(n,{step:e.step})}const AH=20,Abe={continuousWidth:300,continuousHeight:300,step:AH},$be={background:"white",padding:5,timeFormat:"%b %d, %Y",countTitle:"Count of Records",view:Abe,mark:yve,arc:{},area:{},bar:Eve,circle:{},geoshape:{},image:{},line:{},point:{},rect:zM,rule:{color:"black"},square:{},text:{color:"black"},tick:Sve,trail:{},boxplot:{size:14,extent:1.5,box:{},median:{color:"white"},outliers:{},rule:{},ticks:null},errorbar:{center:"mean",rule:!0,ticks:!1},errorband:{band:{opacity:.3},borders:!1},scale:Kye,projection:{},legend:vbe,header:{titlePadding:10,labelPadding:10},headerColumn:{},headerRow:{},headerFacet:{},selection:xbe,style:{},title:{},facet:{spacing:Xz},concat:{spacing:Xz},normalizedNumberFormat:".0%"},Ts=["#4c78a8","#f58518","#e45756","#72b7b2","#54a24b","#eeca3b","#b279a2","#ff9da6","#9d755d","#bab0ac"],Vz={text:11,guideLabel:10,guideTitle:11,groupTitle:13,groupSubtitle:12},Wz={blue:Ts[0],orange:Ts[1],red:Ts[2],teal:Ts[3],green:Ts[4],yellow:Ts[5],purple:Ts[6],pink:Ts[7],brown:Ts[8],gray0:"#000",gray1:"#111",gray2:"#222",gray3:"#333",gray4:"#444",gray5:"#555",gray6:"#666",gray7:"#777",gray8:"#888",gray9:"#999",gray10:"#aaa",gray11:"#bbb",gray12:"#ccc",gray13:"#ddd",gray14:"#eee",gray15:"#fff"};function Cbe(e={}){return{signals:[{name:"color",value:be(e)?{...Wz,...e}:Wz}],mark:{color:{signal:"color.blue"}},rule:{color:{signal:"color.gray0"}},text:{color:{signal:"color.gray0"}},style:{"guide-label":{fill:{signal:"color.gray0"}},"guide-title":{fill:{signal:"color.gray0"}},"group-title":{fill:{signal:"color.gray0"}},"group-subtitle":{fill:{signal:"color.gray0"}},cell:{stroke:{signal:"color.gray8"}}},axis:{domainColor:{signal:"color.gray13"},gridColor:{signal:"color.gray8"},tickColor:{signal:"color.gray13"}},range:{category:[{signal:"color.blue"},{signal:"color.orange"},{signal:"color.red"},{signal:"color.teal"},{signal:"color.green"},{signal:"color.yellow"},{signal:"color.purple"},{signal:"color.pink"},{signal:"color.brown"},{signal:"color.grey8"}]}}}function Tbe(e){return{signals:[{name:"fontSize",value:be(e)?{...Vz,...e}:Vz}],text:{fontSize:{signal:"fontSize.text"}},style:{"guide-label":{fontSize:{signal:"fontSize.guideLabel"}},"guide-title":{fontSize:{signal:"fontSize.guideTitle"}},"group-title":{fontSize:{signal:"fontSize.groupTitle"}},"group-subtitle":{fontSize:{signal:"fontSize.groupSubtitle"}}}}}function Mbe(e){return{text:{font:e},style:{"guide-label":{font:e},"guide-title":{font:e},"group-title":{font:e},"group-subtitle":{font:e}}}}function $H(e){const t=le(e||{}),n={};for(const i of t){const r=e[i];n[i]=b0(r)?ej(r):Ji(r)}return n}function kbe(e){const t=le(e),n={};for(const i of t)n[i]=$H(e[i]);return n}const Obe=[...zj,...iH,...EH,"background","padding","legend","lineBreak","scale","style","title","view"];function CH(e={}){const{color:t,font:n,fontSize:i,selection:r,...a}=e,s=bd({},Le($be),n?Mbe(n):{},t?Cbe(t):{},i?Tbe(i):{},a||{});r&&xd(s,"selection",r,!0);const o=ar(s,Obe);for(const l of["background","lineBreak","padding"])s[l]&&(o[l]=Ji(s[l]));for(const l of zj)s[l]&&(o[l]=Rn(s[l]));for(const l of iH)s[l]&&(o[l]=$H(s[l]));for(const l of EH)s[l]&&(o[l]=Rn(s[l]));if(s.legend&&(o.legend=Rn(s.legend)),s.scale){const{invalid:l,...f}=s.scale,d=Rn(l,{level:1});o.scale={...Rn(f),...le(d).length>0?{invalid:d}:{}}}return s.style&&(o.style=kbe(s.style)),s.title&&(o.title=Rn(s.title)),s.view&&(o.view=Rn(s.view)),o}const Dbe=new Set(["view",...fve]),Rbe=["color","fontSize","background","padding","facet","concat","numberFormat","numberFormatType","normalizedNumberFormat","normalizedNumberFormatType","timeFormat","countTitle","header","axisQuantitative","axisTemporal","axisDiscrete","axisPoint","axisXBand","axisXPoint","axisXDiscrete","axisXQuantitative","axisXTemporal","axisYBand","axisYPoint","axisYDiscrete","axisYQuantitative","axisYTemporal","scale","selection","overlay"],Nbe={view:["continuousWidth","continuousHeight","discreteWidth","discreteHeight","step"],...mve};function zbe(e){e=Le(e);for(const t of Rbe)delete e[t];if(e.axis)for(const t in e.axis)b0(e.axis[t])&&delete e.axis[t];if(e.legend)for(const t of gbe)delete e.legend[t];if(e.mark){for(const t of Uz)delete e.mark[t];e.mark.tooltip&&be(e.mark.tooltip)&&delete e.mark.tooltip}e.params&&(e.signals=(e.signals||[]).concat(_H(e.params)),delete e.params);for(const t of Dbe){for(const i of Uz)delete e[t][i];const n=Nbe[t];if(n)for(const i of n)delete e[t][i];Lbe(e,t)}for(const t of hbe())delete e[t];Fbe(e);for(const t in e)be(e[t])&&At(e[t])&&delete e[t];return At(e)?void 0:e}function Fbe(e){const{titleMarkConfig:t,subtitleMarkConfig:n,subtitle:i}=Jq(e.title);At(t)||(e.style["group-title"]={...e.style["group-title"],...t}),At(n)||(e.style["group-subtitle"]={...e.style["group-subtitle"],...n}),At(i)?delete e.title:e.title=i}function Lbe(e,t,n,i){const r=e[t];t==="view"&&(n="cell");const a={...r,...e.style[n??t]};At(a)||(e.style[n??t]=a),delete e[t]}function px(e){return ce(e,"layer")}function Ube(e){return ce(e,"repeat")}function Bbe(e){return!re(e.repeat)&&ce(e.repeat,"layer")}class tk{map(t,n){return ux(t)?this.mapFacet(t,n):Ube(t)?this.mapRepeat(t,n):ek(t)?this.mapHConcat(t,n):gx(t)?this.mapVConcat(t,n):JM(t)?this.mapConcat(t,n):this.mapLayerOrUnit(t,n)}mapLayerOrUnit(t,n){if(px(t))return this.mapLayer(t,n);if(oo(t))return this.mapUnit(t,n);throw new Error(mM(t))}mapLayer(t,n){return{...t,layer:t.layer.map(i=>this.mapLayerOrUnit(i,n))}}mapHConcat(t,n){return{...t,hconcat:t.hconcat.map(i=>this.map(i,n))}}mapVConcat(t,n){return{...t,vconcat:t.vconcat.map(i=>this.map(i,n))}}mapConcat(t,n){const{concat:i,...r}=t;return{...r,concat:i.map(a=>this.map(a,n))}}mapFacet(t,n){return{...t,spec:this.map(t.spec,n)}}mapRepeat(t,n){return{...t,spec:this.map(t.spec,n)}}}const Ibe={zero:1,center:1,normalize:1};function Pbe(e){return _e(Ibe,e)}const qbe=new Set([Dj,rx,ix,mv,sx,RM,NM,ax,Rj,DM]),jbe=new Set([rx,ix,Dj]);function gf(e){return he(e)&&ld(e)==="quantitative"&&!e.bin}function Qz(e,t,{orient:n,type:i}){const r=t==="x"?"y":"radius",a=t==="x"&&["bar","area"].includes(i),s=e[t],o=e[r];if(he(s)&&he(o))if(gf(s)&&gf(o)){if(s.stack)return t;if(o.stack)return r;const l=he(s)&&!!s.aggregate,f=he(o)&&!!o.aggregate;if(l!==f)return l?t:r;if(a){if(n==="vertical")return r;if(n==="horizontal")return t}}else{if(gf(s))return t;if(gf(o))return r}else{if(gf(s))return a&&n==="vertical"?void 0:t;if(gf(o))return a&&n==="horizontal"?void 0:r}}function Hbe(e){switch(e){case"x":return"y";case"y":return"x";case"theta":return"radius";case"radius":return"theta"}}function TH(e,t){var b,E;const n=Wa(e)?e:{type:e},i=n.type;if(!qbe.has(i))return null;const r=Qz(t,"x",n)||Qz(t,"theta",n);if(!r)return null;const a=t[r],s=he(a)?me(a,{}):void 0,o=Hbe(r),l=[],f=new Set;if(t[o]){const _=t[o],w=he(_)?me(_,{}):void 0;w&&w!==s&&(l.push(o),f.add(w))}const d=o==="x"?"xOffset":"yOffset",g=t[d],p=he(g)?me(g,{}):void 0;p&&p!==s&&(l.push(d),f.add(p));const y=Zme.reduce((_,w)=>{if(w!=="tooltip"&&Tl(t,w)){const A=t[w];for(const $ of Ee(A)){const C=la($);if(C.aggregate)continue;const k=me(C,{});(!k||!f.has(k))&&_.push({channel:w,fieldDef:C})}}return _},[]);let v;return a.stack!==void 0?xu(a.stack)?v=a.stack?"zero":null:v=a.stack:jbe.has(i)&&(v="zero"),!v||!Pbe(v)||sH(t)&&y.length===0?null:((b=a==null?void 0:a.scale)!=null&&b.type&&((E=a==null?void 0:a.scale)==null?void 0:E.type)!==Nn.LINEAR&&a!=null&&a.stack&&de(mye(a.scale.type)),Be(t[os(r)])?(a.stack!==void 0&&de(pye(r)),null):(he(a)&&a.aggregate&&!c1e.has(a.aggregate)&&de(yye(a.aggregate)),{groupbyChannels:l,groupbyFields:f,fieldChannel:r,impute:a.impute===null?!1:Nu(i),stackBy:y,offset:v}))}function MH(e,t,n){const i=Rn(e),r=Et("orient",i,n);if(i.orient=Vbe(i.type,t,r),r!==void 0&&r!==i.orient&&de(J1e(i.orient,r)),i.type==="bar"&&i.orient){const l=Et("cornerRadiusEnd",i,n);if(l!==void 0){const f=i.orient==="horizontal"&&t.x2||i.orient==="vertical"&&t.y2?["cornerRadius"]:bve[i.orient];for(const d of f)i[d]=l;i.cornerRadiusEnd!==void 0&&delete i.cornerRadiusEnd}}const a=Et("opacity",i,n),s=Et("fillOpacity",i,n);return a===void 0&&s===void 0&&(i.opacity=Ybe(i.type,t)),Et("cursor",i,n)===void 0&&(i.cursor=Gbe(i,t,n)),i}function Gbe(e,t,n){return t.href||e.href||Et("href",e,n)?"pointer":e.cursor}function Ybe(e,t){if(Ve([sx,DM,RM,NM],e)&&!sH(t))return .7}function Xbe(e,t,{graticule:n}){if(n)return!1;const i=Va("filled",e,t),r=e.type;return Wt(i,r!==sx&&r!==ax&&r!==mv)}function Vbe(e,t,n){switch(e){case sx:case RM:case NM:case Rj:case lve:case uve:return}const{x:i,y:r,x2:a,y2:s}=t;switch(e){case rx:if(he(i)&&(Dn(i.bin)||he(r)&&r.aggregate&&!i.aggregate))return"vertical";if(he(r)&&(Dn(r.bin)||he(i)&&i.aggregate&&!r.aggregate))return"horizontal";if(s||a){if(n)return n;if(!a)return(he(i)&&i.type===Vl&&!Ct(i.bin)||vv(i))&&he(r)&&Dn(r.bin)?"horizontal":"vertical";if(!s)return(he(r)&&r.type===Vl&&!Ct(r.bin)||vv(r))&&he(i)&&Dn(i.bin)?"vertical":"horizontal"}case mv:if(a&&!(he(i)&&Dn(i.bin))&&s&&!(he(r)&&Dn(r.bin)))return;case ix:if(s)return he(r)&&Dn(r.bin)?"horizontal":"vertical";if(a)return he(i)&&Dn(i.bin)?"vertical":"horizontal";if(e===mv){if(i&&!r)return"vertical";if(r&&!i)return"horizontal"}case ax:case DM:{const o=qz(i),l=qz(r);if(n)return n;if(o&&!l)return e!=="tick"?"horizontal":"vertical";if(!o&&l)return e!=="tick"?"vertical":"horizontal";if(o&&l)return"vertical";{const f=bi(i)&&i.type===od,d=bi(r)&&r.type===od;if(f&&!d)return"vertical";if(!f&&d)return"horizontal"}return}}return"vertical"}function Wbe(e){const{point:t,line:n,...i}=e;return le(i).length>1?i:i.type}function Qbe(e){for(const t of["line","area","rule","trail"])e[t]&&(e={...e,[t]:ar(e[t],["point","line"])});return e}function d_(e,t={},n){return e.point==="transparent"?{opacity:0}:e.point?be(e.point)?e.point:{}:e.point!==void 0?null:t.point||n.shape?be(t.point)?t.point:{}:void 0}function Zz(e,t={}){return e.line?e.line===!0?{}:e.line:e.line!==void 0?null:t.line?t.line===!0?{}:t.line:void 0}class Zbe{constructor(){oe(this,"name","path-overlay")}hasMatchingType(t,n){if(oo(t)){const{mark:i,encoding:r}=t,a=Wa(i)?i:{type:i};switch(a.type){case"line":case"rule":case"trail":return!!d_(a,n[a.type],r);case"area":return!!d_(a,n[a.type],r)||!!Zz(a,n[a.type])}}return!1}run(t,n,i){const{config:r}=n,{params:a,projection:s,mark:o,name:l,encoding:f,...d}=t,g=hx(f,r),p=Wa(o)?o:{type:o},y=d_(p,r[p.type],g),v=p.type==="area"&&Zz(p,r[p.type]),b=[{name:l,...a?{params:a}:{},mark:Wbe({...p.type==="area"&&p.opacity===void 0&&p.fillOpacity===void 0?{opacity:.7}:{},...p}),encoding:ar(g,["shape"])}],E=TH(MH(p,g,r),g);let _=g;if(E){const{fieldChannel:w,offset:A}=E;_={...g,[w]:{...g[w],...A?{stack:A}:{}}}}return _=ar(_,["y2","x2"]),v&&b.push({...s?{projection:s}:{},mark:{type:"line",...id(p,["clip","interpolate","tension","tooltip"]),...v},encoding:_}),y&&b.push({...s?{projection:s}:{},mark:{type:"point",opacity:1,filled:!0,...id(p,["clip","tooltip"]),...y},encoding:_}),i({...d,layer:b},{...n,config:Qbe(r)})}}function Kbe(e,t){return t?p0(e)?OH(e,t):kH(e,t):e}function h_(e,t){return t?OH(e,t):e}function PA(e,t,n){const i=t[e];if(Nve(i)){if(i.repeat in n)return{...t,[e]:n[i.repeat]};de(k1e(i.repeat));return}return t}function kH(e,t){if(e=PA("field",e,t),e!==void 0){if(e===null)return null;if(PM(e)&&Gs(e.sort)){const n=PA("field",e.sort,t);e={...e,...n?{sort:n}:{}}}return e}}function Kz(e,t){if(he(e))return kH(e,t);{const n=PA("datum",e,t);return n!==e&&!n.type&&(n.type="nominal"),n}}function Jz(e,t){if(Be(e)){const n=Kz(e,t);if(n)return n;if(m0(e))return{condition:e.condition}}else{if(y0(e)){const n=Kz(e.condition,t);if(n)return{...e,condition:n};{const{condition:i,...r}=e;return r}}return e}}function OH(e,t){const n={};for(const i in e)if(ce(e,i)){const r=e[i];if(re(r))n[i]=r.map(a=>Jz(a,t)).filter(a=>a);else{const a=Jz(r,t);a!==void 0&&(n[i]=a)}}return n}class Jbe{constructor(){oe(this,"name","RuleForRangedLine")}hasMatchingType(t){if(oo(t)){const{encoding:n,mark:i}=t;if(i==="line"||Wa(i)&&i.type==="line")for(const r of Vme){const a=cc(r),s=n[a];if(n[r]&&(he(s)&&!Dn(s.bin)||ls(s)))return!0}}return!1}run(t,n,i){const{encoding:r,mark:a}=t;return de(K1e(!!r.x2,!!r.y2)),i({...t,mark:be(a)?{...a,type:"rule"}:"rule"},n)}}class exe extends tk{constructor(){super(...arguments);oe(this,"nonFacetUnitNormalizers",[nbe,abe,dbe,new Zbe,new Jbe])}map(n,i){if(oo(n)){const r=Tl(n.encoding,js),a=Tl(n.encoding,Hs),s=Tl(n.encoding,Yb);if(r||a||s)return this.mapFacetedUnit(n,i)}return super.map(n,i)}mapUnit(n,i){const{parentEncoding:r,parentProjection:a}=i,s=h_(n.encoding,i.repeater),o={...n,...n.name?{name:[i.repeaterPrefix,n.name].filter(f=>f).join("_")}:{},...s?{encoding:s}:{}};if(r||a)return this.mapUnitWithParentEncodingOrProjection(o,i);const l=this.mapLayerOrUnit.bind(this);for(const f of this.nonFacetUnitNormalizers)if(f.hasMatchingType(o,i.config))return f.run(o,i,l);return o}mapRepeat(n,i){return Bbe(n)?this.mapLayerRepeat(n,i):this.mapNonLayerRepeat(n,i)}mapLayerRepeat(n,i){const{repeat:r,spec:a,...s}=n,{row:o,column:l,layer:f}=r,{repeater:d={},repeaterPrefix:g=""}=i;return o||l?this.mapRepeat({...n,repeat:{...o?{row:o}:{},...l?{column:l}:{}},spec:{repeat:{layer:f},spec:a}},i):{...s,layer:f.map(p=>{const y={...d,layer:p},v=`${(a.name?`${a.name}_`:"")+g}child__layer_${Dt(p)}`,b=this.mapLayerOrUnit(a,{...i,repeater:y,repeaterPrefix:v});return b.name=v,b})}}mapNonLayerRepeat(n,i){const{repeat:r,spec:a,data:s,...o}=n;!re(r)&&n.columns&&(n=ar(n,["columns"]),de(Dz("repeat")));const l=[],{repeater:f={},repeaterPrefix:d=""}=i,g=!re(r)&&r.row||[f?f.row:null],p=!re(r)&&r.column||[f?f.column:null],y=re(r)&&r||[f?f.repeat:null];for(const b of y)for(const E of g)for(const _ of p){const w={repeat:b,row:E,column:_,layer:f.layer},A=`${(a.name?`${a.name}_`:"")+d}child__${re(r)?`${Dt(b)}`:(r.row?`row_${Dt(E)}`:"")+(r.column?`column_${Dt(_)}`:"")}`,$=this.map(a,{...i,repeater:w,repeaterPrefix:A});$.name=A,l.push(ar($,["data"]))}const v=re(r)?n.columns:r.column?r.column.length:1;return{data:a.data??s,align:"all",...o,columns:v,concat:l}}mapFacet(n,i){const{facet:r}=n;return p0(r)&&n.columns&&(n=ar(n,["columns"]),de(Dz("facet"))),super.mapFacet(n,i)}mapUnitWithParentEncodingOrProjection(n,i){const{encoding:r,projection:a}=n,{parentEncoding:s,parentProjection:o,config:l}=i,f=t8({parentProjection:o,projection:a}),d=e8({parentEncoding:s,encoding:h_(r,i.repeater)});return this.mapUnit({...n,...f?{projection:f}:{},...d?{encoding:d}:{}},{config:l})}mapFacetedUnit(n,i){const{row:r,column:a,facet:s,...o}=n.encoding,{mark:l,width:f,projection:d,height:g,view:p,params:y,encoding:v,...b}=n,{facetMapping:E,layout:_}=this.getFacetMappingAndLayout({row:r,column:a,facet:s},i),w=h_(o,i.repeater);return this.mapFacet({...b,..._,facet:E,spec:{...f?{width:f}:{},...g?{height:g}:{},...p?{view:p}:{},...d?{projection:d}:{},mark:l,encoding:w,...y?{params:y}:{}}},i)}getFacetMappingAndLayout(n,i){const{row:r,column:a,facet:s}=n;if(r||a){s&&de(Q1e([...r?[js]:[],...a?[Hs]:[]]));const o={},l={};for(const f of[js,Hs]){const d=n[f];if(d){const{align:g,center:p,spacing:y,columns:v,...b}=d;o[f]=b;for(const E of["align","center","spacing"])d[E]!==void 0&&(l[E]??(l[E]={}),l[E][f]=d[E])}}return{facetMapping:o,layout:l}}else{const{align:o,center:l,spacing:f,columns:d,...g}=s;return{facetMapping:Kbe(g,i.repeater),layout:{...o?{align:o}:{},...l?{center:l}:{},...f?{spacing:f}:{},...d?{columns:d}:{}}}}}mapLayer(n,{parentEncoding:i,parentProjection:r,...a}){const{encoding:s,projection:o,...l}=n,f={...a,parentEncoding:e8({parentEncoding:i,encoding:s,layer:!0}),parentProjection:t8({parentProjection:r,projection:o})};return super.mapLayer({...l,...n.name?{name:[f.repeaterPrefix,n.name].filter(d=>d).join("_")}:{}},f)}}function e8({parentEncoding:e,encoding:t={},layer:n}){let i={};if(e){const r=new Set([...le(e),...le(t)]);for(const a of r){const s=t[a],o=e[a];if(Be(s)){const l={...o,...s};i[a]=l}else y0(s)?i[a]={...s,condition:{...o,...s.condition}}:s||s===null?i[a]=s:(n||ua(o)||Ce(o)||Be(o)||re(o))&&(i[a]=o)}}else i=t;return!i||At(i)?void 0:i}function t8(e){const{parentProjection:t,projection:n}=e;return t&&n&&de(B1e({parentProjection:t,projection:n})),n??t}function nk(e){return ce(e,"filter")}function txe(e){return ce(e,"stop")}function DH(e){return ce(e,"lookup")}function nxe(e){return ce(e,"data")}function ixe(e){return ce(e,"param")}function rxe(e){return ce(e,"pivot")}function axe(e){return ce(e,"density")}function sxe(e){return ce(e,"quantile")}function oxe(e){return ce(e,"regression")}function uxe(e){return ce(e,"loess")}function lxe(e){return ce(e,"sample")}function cxe(e){return ce(e,"window")}function fxe(e){return ce(e,"joinaggregate")}function dxe(e){return ce(e,"flatten")}function hxe(e){return ce(e,"calculate")}function RH(e){return ce(e,"bin")}function gxe(e){return ce(e,"impute")}function pxe(e){return ce(e,"timeUnit")}function mxe(e){return ce(e,"aggregate")}function yxe(e){return ce(e,"stack")}function vxe(e){return ce(e,"fold")}function bxe(e){return ce(e,"extent")&&!ce(e,"density")&&!ce(e,"regression")}function xxe(e){return e.map(t=>nk(t)?{filter:Of(t.filter,Gye)}:t)}class Exe extends tk{map(t,n){return n.emptySelections??(n.emptySelections={}),n.selectionPredicates??(n.selectionPredicates={}),t=n8(t,n),super.map(t,n)}mapLayerOrUnit(t,n){if(t=n8(t,n),t.encoding){const i={};for(const[r,a]of pu(t.encoding))i[r]=NH(a,n);t={...t,encoding:i}}return super.mapLayerOrUnit(t,n)}mapUnit(t,n){const{selection:i,...r}=t;return i?{...r,params:pu(i).map(([a,s])=>{const{init:o,bind:l,empty:f,...d}=s;d.type==="single"?(d.type="point",d.toggle=!1):d.type==="multi"&&(d.type="point"),n.emptySelections[a]=f!=="none";for(const g of nn(n.selectionPredicates[a]??{}))g.empty=f!=="none";return{name:a,value:o,select:d,bind:l}})}:t}}function n8(e,t){const{transform:n,...i}=e;if(n){const r=n.map(a=>{if(nk(a))return{filter:qA(a,t)};if(RH(a)&&fc(a.bin))return{...a,bin:zH(a.bin)};if(DH(a)){const{selection:s,...o}=a.from;return s?{...a,from:{param:s,...o}}:a}return a});return{...i,transform:r}}return e}function NH(e,t){var i,r;const n=Le(e);if(he(n)&&fc(n.bin)&&(n.bin=zH(n.bin)),pc(n)&&((r=(i=n.scale)==null?void 0:i.domain)!=null&&r.selection)){const{selection:a,...s}=n.scale.domain;n.scale.domain={...s,...a?{param:a}:{}}}if(m0(n))if(re(n.condition))n.condition=n.condition.map(a=>{const{selection:s,param:o,test:l,...f}=a;return o?a:{...f,test:qA(a,t)}});else{const{selection:a,param:s,test:o,...l}=NH(n.condition,t);n.condition=s?n.condition:{...l,test:qA(n.condition,t)}}return n}function zH(e){const t=e.extent;if(t!=null&&t.selection){const{selection:n,...i}=t;return{...e,extent:{...i,param:n}}}return e}function qA(e,t){const n=i=>Of(i,r=>{var o;const a=t.emptySelections[r]??!0,s={param:r,empty:a};return(o=t.selectionPredicates)[r]??(o[r]=[]),t.selectionPredicates[r].push(s),s});return e.selection?n(e.selection):Of(e.test||e.filter,i=>i.selection?n(i.selection):i)}class jA extends tk{map(t,n){const i=n.selections??[];if(t.params&&!oo(t)){const r=[];for(const a of t.params)KM(a)?i.push(a):r.push(a);t.params=r}return n.selections=i,super.map(t,n)}mapUnit(t,n){const i=n.selections;if(!i||!i.length)return t;const r=(n.path??[]).concat(t.name),a=[];for(const s of i)if(!s.views||!s.views.length)a.push(s);else for(const o of s.views)(ve(o)&&(o===t.name||r.includes(o))||re(o)&&o.map(l=>r.indexOf(l)).every((l,f,d)=>l!==-1&&(f===0||l>d[f-1])))&&a.push(s);return a.length&&(t.params=a),t}}for(const e of["mapFacet","mapRepeat","mapHConcat","mapVConcat","mapLayer"]){const t=jA.prototype[e];jA.prototype[e]=function(n,i){return t.call(this,n,Sxe(n,i))}}function Sxe(e,t){return e.name?{...t,path:(t.path??[]).concat(e.name)}:t}function FH(e,t){t===void 0&&(t=CH(e.config));const n=$xe(e,t),{width:i,height:r}=e,a=Cxe(n,{width:i,height:r,autosize:e.autosize},t);return{...n,...a?{autosize:a}:{}}}const _xe=new exe,wxe=new Exe,Axe=new jA;function $xe(e,t={}){const n={config:t};return Axe.map(_xe.map(wxe.map(e,n),n),n)}function i8(e){return ve(e)?{type:e}:e??{}}function Cxe(e,t,n){let{width:i,height:r}=t;const a=oo(e)||px(e),s={};a?i=="container"&&r=="container"?(s.type="fit",s.contains="padding"):i=="container"?(s.type="fit-x",s.contains="padding"):r=="container"&&(s.type="fit-y",s.contains="padding"):(i=="container"&&(de(Tz("width")),i=void 0),r=="container"&&(de(Tz("height")),r=void 0));const o={type:"pad",...s,...n?i8(n.autosize):{},...i8(e.autosize)};if(o.type==="fit"&&!a&&(de(b1e),o.type="pad"),i=="container"&&!(o.type=="fit"||o.type=="fit-x")&&de(Mz("width")),r=="container"&&!(o.type=="fit"||o.type=="fit-y")&&de(Mz("height")),!tr(o,{type:"pad"}))return o}function Txe(e){return["fit","fit-x","fit-y"].includes(e)}function Mxe(e){return e?`fit-${Zb(e)}`:"fit"}const kxe=["background","padding"];function r8(e,t){const n={};for(const i of kxe)e&&e[i]!==void 0&&(n[i]=Ji(e[i]));return t&&(n.params=e.params),n}class uo{constructor(t={},n={}){oe(this,"explicit");oe(this,"implicit");this.explicit=t,this.implicit=n}clone(){return new uo(Le(this.explicit),Le(this.implicit))}combine(){return{...this.explicit,...this.implicit}}get(t){return Wt(this.explicit[t],this.implicit[t])}getWithExplicit(t){return this.explicit[t]!==void 0?{explicit:!0,value:this.explicit[t]}:this.implicit[t]!==void 0?{explicit:!1,value:this.implicit[t]}:{explicit:!1,value:void 0}}setWithExplicit(t,{value:n,explicit:i}){n!==void 0&&this.set(t,n,i)}set(t,n,i){return delete this[i?"implicit":"explicit"][t],this[i?"explicit":"implicit"][t]=n,this}copyKeyFromSplit(t,{explicit:n,implicit:i}){n[t]!==void 0?this.set(t,n[t],!0):i[t]!==void 0&&this.set(t,i[t],!1)}copyKeyFromObject(t,n){n[t]!==void 0&&this.set(t,n[t],!0)}copyAll(t){for(const n of le(t.combine())){const i=t.getWithExplicit(n);this.setWithExplicit(n,i)}}}function Ma(e){return{explicit:!0,value:e}}function Qi(e){return{explicit:!1,value:e}}function LH(e){return(t,n,i,r)=>{const a=e(t.value,n.value);return a>0?t:a<0?n:mx(t,n,i,r)}}function mx(e,t,n,i){return e.explicit&&t.explicit&&de(uye(n,i,e.value,t.value)),e}function vu(e,t,n,i,r=mx){return e===void 0||e.value===void 0?t:e.explicit&&!t.explicit?e:t.explicit&&!e.explicit?t:tr(e.value,t.value)?e:r(e,t,n,i)}class Oxe extends uo{constructor(n={},i={},r=!1){super(n,i);oe(this,"explicit");oe(this,"implicit");oe(this,"parseNothing");this.explicit=n,this.implicit=i,this.parseNothing=r}clone(){const n=super.clone();return n.parseNothing=this.parseNothing,n}}function dd(e){return ce(e,"url")}function $p(e){return ce(e,"values")}function UH(e){return ce(e,"name")&&!dd(e)&&!$p(e)&&!ru(e)}function ru(e){return e&&(BH(e)||IH(e)||ik(e))}function BH(e){return ce(e,"sequence")}function IH(e){return ce(e,"sphere")}function ik(e){return ce(e,"graticule")}var Lt;(function(e){e[e.Raw=0]="Raw",e[e.Main=1]="Main",e[e.Row=2]="Row",e[e.Column=3]="Column",e[e.Lookup=4]="Lookup",e[e.PreFilterInvalid=5]="PreFilterInvalid",e[e.PostFilterInvalid=6]="PostFilterInvalid"})(Lt||(Lt={}));function PH({invalid:e,isPath:t}){switch(Fj(e,{isPath:t})){case"filter":return{marks:"exclude-invalid-values",scales:"exclude-invalid-values"};case"break-paths-show-domains":return{marks:t?"include-invalid-values":"exclude-invalid-values",scales:"include-invalid-values"};case"break-paths-filter-domains":return{marks:t?"include-invalid-values":"exclude-invalid-values",scales:"exclude-invalid-values"};case"show":return{marks:"include-invalid-values",scales:"include-invalid-values"}}}function Dxe(e){const{marks:t,scales:n}=PH(e);return t===n?Lt.Main:n==="include-invalid-values"?Lt.PreFilterInvalid:Lt.PostFilterInvalid}class yt{constructor(t,n){oe(this,"debugName");oe(this,"_children",[]);oe(this,"_parent",null);oe(this,"_hash");this.debugName=n,t&&(this.parent=t)}clone(){throw new Error("Cannot clone node")}get parent(){return this._parent}set parent(t){this._parent=t,t&&t.addChild(this)}get children(){return this._children}numChildren(){return this._children.length}addChild(t,n){if(this._children.includes(t)){de(F1e);return}n!==void 0?this._children.splice(n,0,t):this._children.push(t)}removeChild(t){const n=this._children.indexOf(t);return this._children.splice(n,1),n}remove(){let t=this._parent.removeChild(this);for(const n of this._children)n._parent=this._parent,this._parent.addChild(n,t++)}insertAsParentOf(t){const n=t.parent;n.removeChild(this),this.parent=n,t.parent=this}swapWithParent(){const t=this._parent,n=t.parent;for(const r of this._children)r.parent=t;this._children=[],t.removeChild(this);const i=t.parent.removeChild(t);this._parent=n,n.addChild(this,i),t.parent=this}}class Di extends yt{constructor(n,i,r,a){super(n,i);oe(this,"type");oe(this,"refCounts");oe(this,"_source");oe(this,"_name");this.type=r,this.refCounts=a,this._source=this._name=i,this.refCounts&&!(this._name in this.refCounts)&&(this.refCounts[this._name]=0)}clone(){const n=new this.constructor;return n.debugName=`clone_${this.debugName}`,n._source=this._source,n._name=`clone_${this._name}`,n.type=this.type,n.refCounts=this.refCounts,n.refCounts[n._name]=0,n}dependentFields(){return new Set}producedFields(){return new Set}hash(){return this._hash===void 0&&(this._hash=`Output ${Lq()}`),this._hash}getSource(){return this.refCounts[this._name]++,this._source}isRequired(){return!!this.refCounts[this._name]}setSource(n){this._source=n}}function g_(e){return e.as!==void 0}function a8(e){return`${e}_end`}class Ba extends yt{constructor(n,i){super(n);oe(this,"timeUnits");this.timeUnits=i}clone(){return new Ba(null,Le(this.timeUnits))}static makeFromEncoding(n,i){const r=i.reduceFieldDef((a,s,o)=>{const{field:l,timeUnit:f}=s;if(f){let d;if(gc(f)){if(Ft(i)){const{mark:g,markDef:p,config:y}=i,v=yu({fieldDef:s,markDef:p,config:y});(Ap(g)||v)&&(d={timeUnit:An(f),field:l})}}else d={as:me(s,{forAs:!0}),field:l,timeUnit:f};if(Ft(i)){const{mark:g,markDef:p,config:y}=i,v=yu({fieldDef:s,markDef:p,config:y});Ap(g)&&Qt(o)&&v!==.5&&(d.rectBandPosition=v)}d&&(a[Ze(d)]=d)}return a},{});return At(r)?null:new Ba(n,r)}static makeFromTransform(n,i){const{timeUnit:r,...a}={...i},s=An(r),o={...a,timeUnit:s};return new Ba(n,{[Ze(o)]:o})}merge(n){this.timeUnits={...this.timeUnits};for(const i in n.timeUnits)this.timeUnits[i]||(this.timeUnits[i]=n.timeUnits[i]);for(const i of n.children)n.removeChild(i),i.parent=this;n.remove()}removeFormulas(n){const i={};for(const[r,a]of pu(this.timeUnits)){const s=g_(a)?a.as:`${a.field}_end`;n.has(s)||(i[r]=a)}this.timeUnits=i}producedFields(){return new Set(nn(this.timeUnits).map(n=>g_(n)?n.as:a8(n.field)))}dependentFields(){return new Set(nn(this.timeUnits).map(n=>n.field))}hash(){return`TimeUnit ${Ze(this.timeUnits)}`}assemble(){const n=[];for(const i of nn(this.timeUnits)){const{rectBandPosition:r}=i,a=An(i.timeUnit);if(g_(i)){const{field:s,as:o}=i,{unit:l,utc:f,...d}=a,g=[o,`${o}_end`];n.push({field:zr(s),type:"timeunit",...l?{units:tx(l)}:{},...f?{timezone:"utc"}:{},...d,as:g}),n.push(...s8(g,r,a))}else if(i){const{field:s}=i,o=s.replaceAll("\\.","."),l=qH({timeUnit:a,field:o}),f=a8(o);n.push({type:"formula",expr:l,as:f}),n.push(...s8([o,f],r,a))}}return n}}const yx="offsetted_rect_start",vx="offsetted_rect_end";function qH({timeUnit:e,field:t,reverse:n}){const{unit:i,utc:r}=e,a=vj(i),{part:s,step:o}=Sj(a,e.step);return`${r?"utcOffset":"timeOffset"}('${s}', ${pt(t)}, ${n?-o:o})`}function s8([e,t],n,i){if(n!==void 0&&n!==.5){const r=pt(e),a=pt(t);return[{type:"formula",expr:o8([qH({timeUnit:i,field:e,reverse:!0}),r],n+.5),as:`${e}_${yx}`},{type:"formula",expr:o8([r,a],n+.5),as:`${e}_${vx}`}]}return[]}function o8([e,t],n){return`${1-n} * ${e} + ${n} * ${t}`}const x0="_tuple_fields";class Rxe{constructor(...t){oe(this,"hasChannel");oe(this,"hasField");oe(this,"hasSelectionId");oe(this,"timeUnit");oe(this,"items");this.items=t,this.hasChannel={},this.hasField={},this.hasSelectionId=!1}}const Nxe={defined:()=>!0,parse:(e,t,n)=>{const i=t.name,r=t.project??(t.project=new Rxe),a={},s={},o=new Set,l=(v,b)=>{const E=b==="visual"?v.channel:v.field;let _=Dt(`${i}_${E}`);for(let w=1;o.has(_);w++)_=Dt(`${i}_${E}_${w}`);return o.add(_),{[b]:_}},f=t.type,d=e.config.selection[f],g=n.value!==void 0?Ee(n.value):null;let{fields:p,encodings:y}=be(n.select)?n.select:{};if(!p&&!y&&g){for(const v of g)if(be(v))for(const b of le(v))Xme(b)?(y||(y=[])).push(b):f==="interval"?(de(M1e),y=d.encodings):(p??(p=[])).push(b)}!p&&!y&&(y=d.encodings,"fields"in d&&(p=d.fields));for(const v of y??[]){const b=e.fieldDef(v);if(b){let E=b.field;if(b.aggregate){de(x1e(v,b.aggregate));continue}else if(!E){de(Oz(v));continue}if(b.timeUnit&&!gc(b.timeUnit)){E=e.vgField(v);const _={timeUnit:b.timeUnit,as:E,field:b.field};s[Ze(_)]=_}if(!a[E]){const _=f==="interval"&&us(v)&&oa(e.getScaleComponent(v).get("type"))?"R":b.bin?"R-RE":"E",w={field:E,channel:v,type:_,index:r.items.length};w.signals={...l(w,"data"),...l(w,"visual")},r.items.push(a[E]=w),r.hasField[E]=a[E],r.hasSelectionId=r.hasSelectionId||E===ca,jq(v)?(w.geoChannel=v,w.channel=qq(v),r.hasChannel[w.channel]=a[E]):r.hasChannel[v]=a[E]}}else de(Oz(v))}for(const v of p??[]){if(r.hasField[v])continue;const b={type:"E",field:v,index:r.items.length};b.signals={...l(b,"data")},r.items.push(b),r.hasField[v]=b,r.hasSelectionId=r.hasSelectionId||v===ca}g&&(t.init=g.map(v=>r.items.map(b=>be(v)?v[b.geoChannel||b.channel]!==void 0?v[b.geoChannel||b.channel]:v[b.field]:v))),At(s)||(r.timeUnit=new Ba(null,s))},signals:(e,t,n)=>{const i=t.name+x0;return n.filter(a=>a.name===i).length>0||t.project.hasSelectionId?n:n.concat({name:i,value:t.project.items.map(YH)})}},jH="_curr",Z1="anim_value",vf="anim_clock",HA="eased_anim_clock",HH="min_extent",GH="max_range_extent",p_="last_tick_at",m_="is_playing",zxe=1/60*1e3,Fxe=(e,t)=>[{name:HA,update:vf},{name:`${e}_domain`,init:`domain('${t}')`},{name:HH,init:`extent(${e}_domain)[0]`},{name:GH,init:`extent(range('${t}'))[1]`},{name:Z1,update:`invert('${t}', ${HA})`}],Lxe={defined:e=>e.type==="point",topLevelSignals:(e,t,n)=>(Ia(t)&&(n=n.concat([{name:vf,init:"0",on:[{events:{type:"timer",throttle:zxe},update:`${m_} ? (${vf} + (now() - ${p_}) > ${GH} ? 0 : ${vf} + (now() - ${p_})) : ${vf}`}]},{name:p_,init:"now()",on:[{events:[{signal:vf},{signal:m_}],update:"now()"}]},{name:m_,init:"true"}])),n),signals:(e,t,n)=>{const i=t.name,r=i+x0,a=t.project,s="(item().isVoronoi ? datum.datum : datum)",o=nn(e.component.selection??{}).reduce((d,g)=>g.type==="interval"?d.concat(g.name+Nf):d,[]).map(d=>`indexof(item().mark.name, '${d}') < 0`).join(" && "),l=`datum && item().mark.marktype !== 'group' && indexof(item().mark.role, 'legend') < 0${o?` && ${o}`:""}`;let f=`unit: ${Ml(e)}, `;if(t.project.hasSelectionId)f+=`${ca}: ${s}[${ge(ca)}]`;else if(Ia(t))f+=`fields: ${r}, values: [${Z1} ? ${Z1} : ${HH}]`;else{const d=a.items.map(g=>{const p=e.fieldDef(g.channel);return p!=null&&p.bin?`[${s}[${ge(e.vgField(g.channel,{}))}], ${s}[${ge(e.vgField(g.channel,{binSuffix:"end"}))}]]`:`${s}[${ge(g.field)}]`}).join(", ");f+=`fields: ${r}, values: [${d}]`}if(Ia(t))return n.concat(Fxe(t.name,e.scaleName(Tu)),[{name:i+Js,on:[{events:[{signal:HA},{signal:Z1}],update:`{${f}}`,force:!0}]}]);{const d=t.events;return n.concat([{name:i+Js,on:d?[{events:d,update:`${l} ? {${f}} : null`,force:!0}]:[]}])}}};function YH(e){const{signals:t,hasLegend:n,index:i,...r}=e;return r.field=zr(r.field),r}function Zl(e,t=!0,n=ni){if(re(e)){const i=e.map(r=>Zl(r,t,n));return t?`[${i.join(", ")}]`:i}else if(hc(e))return n(t?Xl(e):Rye(e));return t?n(dt(e)):e}function Uxe(e,t){for(const n of nn(e.component.selection??{})){const i=n.name;let r=`${i}${Js}, ${n.resolve==="global"?"true":`{unit: ${Ml(e)}}`}`;for(const a of xx)a.defined(n)&&(a.signals&&(t=a.signals(e,n,t)),a.modifyExpr&&(r=a.modifyExpr(e,n,r)));t.push({name:i+f2e,on:[{events:{signal:n.name+Js},update:`modify(${ge(n.name+Kl)}, ${r})`}]})}return rk(t)}function Bxe(e,t){if(e.component.selection&&le(e.component.selection).length){const n=ge(e.getName("cell"));t.unshift({name:"facet",value:{},on:[{events:$u("pointermove","scope"),update:`isTuple(facet) ? facet : group(${n}).datum`}]})}return rk(t)}function Ixe(e,t){let n=!1;for(const i of nn(e.component.selection??{})){const r=i.name,a=ge(r+Kl);if(t.filter(o=>o.name===r).length===0){const o=i.resolve==="global"?"union":i.resolve,l=i.type==="point"?", true, true)":")";t.push({name:i.name,update:`${lG}(${a}, ${ge(o)}${l}`})}n=!0;for(const o of xx)o.defined(i)&&o.topLevelSignals&&(t=o.topLevelSignals(e,i,t))}return n&&t.filter(r=>r.name==="unit").length===0&&t.unshift({name:"unit",value:{},on:[{events:"pointermove",update:"isTuple(group()) ? group() : unit"}]}),rk(t)}function Pxe(e,t){const n=[],i=[],r=Ml(e,{escape:!1});for(const a of nn(e.component.selection??{})){const s={name:a.name+Kl};if(a.project.hasSelectionId&&(s.transform=[{type:"collect",sort:{field:ca}}]),a.init){const l=a.project.items.map(YH);s.values=a.project.hasSelectionId?a.init.map(f=>({unit:r,[ca]:Zl(f,!1)[0]})):a.init.map(f=>({unit:r,fields:l,values:Zl(f,!1)}))}if([...n,...t].filter(l=>l.name===a.name+Kl).length||n.push(s),Ia(a)&&t.length){const l=e.lookupDataSource(e.getDataName(Lt.Main)),f=t.find(g=>g.name===l),d=f.transform.find(g=>g.type==="filter"&&g.expr.includes("vlSelectionTest"));if(d){f.transform=f.transform.filter(p=>p!==d);const g={name:f.name+jH,source:f.name,transform:[d]};i.push(g)}}}return n.concat(t,i)}function XH(e,t){for(const n of nn(e.component.selection??{}))for(const i of xx)i.defined(n)&&i.marks&&(t=i.marks(e,n,t));return t}function qxe(e,t){for(const n of e.children)Ft(n)&&(t=XH(n,t));return t}function jxe(e,t,n,i){const r=gG(e,t.param,t);return{signal:oa(n.get("type"))&&re(i)&&i[0]>i[1]?`isValid(${r}) && reverse(${r})`:r}}function rk(e){return e.map(t=>(t.on&&!t.on.length&&delete t.on,t))}const Ys={defined:e=>e.type==="interval"&&e.resolve==="global"&&e.bind&&e.bind==="scales",parse:(e,t)=>{const n=t.scales=[];for(const i of t.project.items){const r=i.channel;if(!us(r))continue;const a=e.getScaleComponent(r),s=a?a.get("type"):void 0;if(s=="sequential"&&de(w1e),!a||!oa(s)){de(_1e);continue}a.set("selectionExtent",{param:t.name,field:i.field},!0),n.push(i)}},topLevelSignals:(e,t,n)=>{const i=t.scales.filter(s=>n.filter(o=>o.name===s.signals.data).length===0);if(!e.parent||YA(e)||i.length===0)return n;const r=n.find(s=>s.name===t.name);let a=r.update;if(a.includes(lG))r.update=`{${i.map(s=>`${ge(zr(s.field))}: ${s.signals.data}`).join(", ")}}`;else{for(const s of i){const o=`${ge(zr(s.field))}: ${s.signals.data}`;a.includes(o)||(a=`${a.substring(0,a.length-1)}, ${o}}`)}r.update=a}return n.concat(i.map(s=>({name:s.signals.data})))},signals:(e,t,n)=>{if(e.parent&&!YA(e))for(const i of t.scales){const r=n.find(a=>a.name===i.signals.data);r.push="outer",delete r.value,delete r.update}return n}};function GA(e,t){return`domain(${ge(e.scaleName(t))})`}function YA(e){return e.parent&&jd(e.parent)&&(!e.parent.parent||YA(e.parent.parent))}const Nf="_brush",VH="_scale_trigger",cg="geo_interval_init_tick",WH="_init",Hxe="_center",Gxe={defined:e=>e.type==="interval",parse:(e,t,n)=>{var i;if(e.hasProjection){const r={...be(n.select)?n.select:{}};r.fields=[ca],r.encodings||(r.encodings=n.value?le(n.value):[ya,ma]),n.select={type:"interval",...r}}if(t.translate&&!Ys.defined(t)){const r=`!event.item || event.item.mark.name !== ${ge(t.name+Nf)}`;for(const a of t.events){if(!a.between){de(`${a} is not an ordered event stream for interval selections.`);continue}const s=Ee((i=a.between[0]).filter??(i.filter=[]));s.includes(r)||s.push(r)}}},signals:(e,t,n)=>{const i=t.name,r=i+Js,a=nn(t.project.hasChannel).filter(o=>o.channel===Rt||o.channel===Tn),s=t.init?t.init[0]:null;if(n.push(...a.reduce((o,l)=>o.concat(Yxe(e,t,l,s==null?void 0:s[l.index])),[])),e.hasProjection){const o=ge(e.projectionName()),l=e.projectionName()+Hxe,{x:f,y:d}=t.project.hasChannel,g=f==null?void 0:f.signals.visual,p=d==null?void 0:d.signals.visual,y=f?s==null?void 0:s[f.index]:`${l}[0]`,v=d?s==null?void 0:s[d.index]:`${l}[1]`,b=C=>e.getSizeSignalRef(C).signal,E=`[[${g?`${g}[0]`:"0"}, ${p?`${p}[0]`:"0"}],[${g?`${g}[1]`:b("width")}, ${p?`${p}[1]`:b("height")}]]`;s&&(n.unshift({name:i+WH,init:`[scale(${o}, [${f?y[0]:y}, ${d?v[0]:v}]), scale(${o}, [${f?y[1]:y}, ${d?v[1]:v}])]`}),(!f||!d)&&(n.find(k=>k.name===l)||n.unshift({name:l,update:`invert(${o}, [${b("width")}/2, ${b("height")}/2])`})));const _=`intersect(${E}, {markname: ${ge(e.getName("marks"))}}, unit.mark)`,w=`{unit: ${Ml(e)}}`,A=`vlSelectionTuples(${_}, ${w})`,$=a.map(C=>C.signals.visual);return n.concat({name:r,on:[{events:[...$.length?[{signal:$.join(" || ")}]:[],...s?[{signal:cg}]:[]],update:A}]})}else{if(!Ys.defined(t)){const f=i+VH,d=a.map(g=>{const p=g.channel,{data:y,visual:v}=g.signals,b=ge(e.scaleName(p)),E=e.getScaleComponent(p).get("type"),_=oa(E)?"+":"";return`(!isArray(${y}) || (${_}invert(${b}, ${v})[0] === ${_}${y}[0] && ${_}invert(${b}, ${v})[1] === ${_}${y}[1]))`});d.length&&n.push({name:f,value:{},on:[{events:a.map(g=>({scale:e.scaleName(g.channel)})),update:`${d.join(" && ")} ? ${f} : {}`}]})}const o=a.map(f=>f.signals.data),l=`unit: ${Ml(e)}, fields: ${i+x0}, values`;return n.concat({name:r,...s?{init:`{${l}: ${Zl(s)}}`}:{},...o.length?{on:[{events:[{signal:o.join(" || ")}],update:`${o.join(" && ")} ? {${l}: [${o}]} : null`}]}:{}})}},topLevelSignals:(e,t,n)=>(Ft(e)&&e.hasProjection&&t.init&&(n.filter(r=>r.name===cg).length||n.unshift({name:cg,value:null,on:[{events:"timer{1}",update:`${cg} === null ? {} : ${cg}`}]})),n),marks:(e,t,n)=>{const i=t.name,{x:r,y:a}=t.project.hasChannel,s=r==null?void 0:r.signals.visual,o=a==null?void 0:a.signals.visual,l=`data(${ge(t.name+Kl)})`;if(Ys.defined(t)||!r&&!a)return n;const f={x:r!==void 0?{signal:`${s}[0]`}:{value:0},y:a!==void 0?{signal:`${o}[0]`}:{value:0},x2:r!==void 0?{signal:`${s}[1]`}:{field:{group:"width"}},y2:a!==void 0?{signal:`${o}[1]`}:{field:{group:"height"}}};if(t.resolve==="global")for(const E of le(f))f[E]=[{test:`${l}.length && ${l}[0].unit === ${Ml(e)}`,...f[E]},{value:0}];const{fill:d,fillOpacity:g,cursor:p,...y}=t.mark,v=le(y).reduce((E,_)=>(E[_]=[{test:[r!==void 0&&`${s}[0] !== ${s}[1]`,a!==void 0&&`${o}[0] !== ${o}[1]`].filter(w=>w).join(" && "),value:y[_]},{value:null}],E),{}),b=p??(t.translate?"move":null);return[{name:`${i+Nf}_bg`,type:"rect",clip:!0,encode:{enter:{fill:{value:d},fillOpacity:{value:g}},update:f}},...n,{name:i+Nf,type:"rect",clip:!0,encode:{enter:{...b?{cursor:{value:b}}:{},fill:{value:"transparent"}},update:{...f,...v}}}]}};function Yxe(e,t,n,i){const r=!e.hasProjection,a=n.channel,s=n.signals.visual,o=ge(r?e.scaleName(a):e.projectionName()),l=p=>`scale(${o}, ${p})`,f=e.getSizeSignalRef(a===Rt?"width":"height").signal,d=`${a}(unit)`,g=t.events.reduce((p,y)=>[...p,{events:y.between[0],update:`[${d}, ${d}]`},{events:y,update:`[${s}[0], clamp(${d}, 0, ${f})]`}],[]);if(r){const p=n.signals.data,y=Ys.defined(t),v=e.getScaleComponent(a),b=v?v.get("type"):void 0,E=i?{init:Zl(i,!0,l)}:{value:[]};return g.push({events:{signal:t.name+VH},update:oa(b)?`[${l(`${p}[0]`)}, ${l(`${p}[1]`)}]`:"[0, 0]"}),y?[{name:p,on:[]}]:[{name:s,...E,on:g},{name:p,...i?{init:Zl(i)}:{},on:[{events:{signal:s},update:`${s}[0] === ${s}[1] ? null : invert(${o}, ${s})`}]}]}else{const p=a===Rt?0:1,y=t.name+WH,v=i?{init:`[${y}[0][${p}], ${y}[1][${p}]]`}:{value:[]};return[{name:s,...v,on:g}]}}function Bd({model:e,channelDef:t,vgChannel:n,invalidValueRef:i,mainRefFn:r}){const a=m0(t)&&t.condition;let s=[];a&&(s=Ee(a).map(f=>{const d=r(f);if(Rve(f)){const{param:g,empty:p}=f;return{test:hG(e,{param:g,empty:p}),...d}}else return{test:$v(e,f.test),...d}})),i!==void 0&&s.push(i);const o=r(t);return o!==void 0&&s.push(o),s.length>1||s.length===1&&s[0].test?{[n]:s}:s.length===1?{[n]:s[0]}:{}}function ak(e,t="text"){const n=e.encoding[t];return Bd({model:e,channelDef:n,vgChannel:t,mainRefFn:i=>bx(i,e.config),invalidValueRef:void 0})}function bx(e,t,n="datum"){if(e){if(ua(e))return Mt(e.value);if(Be(e)){const{format:i,formatType:r}=xv(e);return BM({fieldOrDatumDef:e,format:i,formatType:r,expr:n,config:t})}}}function QH(e,t={}){const{encoding:n,markDef:i,config:r,stack:a}=e,s=n.tooltip;if(re(s))return{tooltip:u8({tooltip:s},a,r,t)};{const o=t.reactiveGeom?"datum.datum":"datum";return Bd({model:e,channelDef:s,vgChannel:"tooltip",mainRefFn:f=>{const d=bx(f,r,o);if(d)return d;if(f===null)return;let g=Et("tooltip",i,r);if(g===!0&&(g={content:"encoding"}),ve(g))return{value:g};if(be(g))return Ce(g)?g:g.content==="encoding"?u8(n,a,r,t):{signal:o}},invalidValueRef:void 0})}}function ZH(e,t,n,{reactiveGeom:i}={}){const r={...n,...n.tooltipFormat},a=new Set,s=i?"datum.datum":"datum",o=[];function l(d,g){const p=cc(g),y=bi(d)?d:{...d,type:e[p].type},v=y.title||jM(y,r),b=Ee(v).join(", ").replaceAll(/"/g,'\\"');let E;if(Qt(g)){const _=g==="x"?"x2":"y2",w=la(e[_]);if(Dn(y.bin)&&w){const A=me(y,{expr:s}),$=me(w,{expr:s}),{format:C,formatType:k}=xv(y);E=g0(A,$,C,k,r),a.add(_)}}if((Qt(g)||g===Ur||g===pa)&&t&&t.fieldChannel===g&&t.offset==="normalize"){const{format:_,formatType:w}=xv(y);E=BM({fieldOrDatumDef:y,format:_,formatType:w,expr:s,config:r,normalizeStack:!0}).signal}E??(E=bx(y,r,s).signal),o.push({channel:g,key:b,value:E})}GM(e,(d,g)=>{he(d)?l(d,g):lx(d)&&l(d.condition,g)});const f={};for(const{channel:d,key:g,value:p}of o)!a.has(d)&&!f[g]&&(f[g]=p);return f}function u8(e,t,n,{reactiveGeom:i}={}){const r=ZH(e,t,n,{reactiveGeom:i}),a=pu(r).map(([s,o])=>`"${s}": ${o}`);return a.length>0?{signal:`{${a.join(", ")}}`}:void 0}function Xxe(e){const{markDef:t,config:n}=e,i=Et("aria",t,n);return i===!1?{}:{...i?{aria:i}:{},...Vxe(e),...Wxe(e)}}function Vxe(e){const{mark:t,markDef:n,config:i}=e;if(i.aria===!1)return{};const r=Et("ariaRoleDescription",n,i);return r!=null?{ariaRoleDescription:{value:r}}:_e(m1e,t)?{}:{ariaRoleDescription:{value:t}}}function Wxe(e){const{encoding:t,markDef:n,config:i,stack:r}=e,a=t.description;if(a)return Bd({model:e,channelDef:a,vgChannel:"description",mainRefFn:l=>bx(l,e.config),invalidValueRef:void 0});const s=Et("description",n,i);if(s!=null)return{description:Mt(s)};if(i.aria===!1)return{};const o=ZH(t,r,i);if(!At(o))return{description:{signal:pu(o).map(([l,f],d)=>`"${d>0?"; ":""}${l}: " + (${f})`).join(" + ")}}}function zn(e,t,n={}){const{markDef:i,encoding:r,config:a}=t,{vgChannel:s}=n;let{defaultRef:o,defaultValue:l}=n;const f=r[e];o===void 0&&(l??(l=Et(e,i,a,{vgChannel:s,ignoreVgConfig:!m0(f)})),l!==void 0&&(o=Mt(l)));const d={markDef:i,config:a,scaleName:t.scaleName(e),scale:t.getScaleComponent(e)},g=Uj({...d,scaleChannel:e,channelDef:f});return Bd({model:t,channelDef:f,vgChannel:s??e,invalidValueRef:g,mainRefFn:y=>UM({...d,channel:e,channelDef:y,stack:null,defaultRef:o})})}function KH(e,t={filled:void 0}){const{markDef:n,encoding:i,config:r}=e,{type:a}=n,s=t.filled??Et("filled",n,r),o=Ve(["bar","point","circle","square","geoshape"],a)?"transparent":void 0,l=Et(s===!0?"color":void 0,n,r,{vgChannel:"fill"})??r.mark[s===!0&&"color"]??o,f=Et(s===!1?"color":void 0,n,r,{vgChannel:"stroke"})??r.mark[s===!1&&"color"],d=s?"fill":"stroke",g={...l?{fill:Mt(l)}:{},...f?{stroke:Mt(f)}:{}};return n.color&&(s?n.fill:n.stroke)&&de(lj("property",{fill:"fill"in n,stroke:"stroke"in n})),{...g,...zn("color",e,{vgChannel:d,defaultValue:s?l:f}),...zn("fill",e,{defaultValue:i.fill?l:void 0}),...zn("stroke",e,{defaultValue:i.stroke?f:void 0})}}function Qxe(e){const{encoding:t,mark:n}=e,i=t.order;return!Nu(n)&&ua(i)?Bd({model:e,channelDef:i,vgChannel:"zindex",mainRefFn:r=>Mt(r.value),invalidValueRef:void 0}):{}}function hd({channel:e,markDef:t,encoding:n={},model:i,bandPosition:r}){const a=`${e}Offset`,s=t[a],o=n[a];if((a==="xOffset"||a==="yOffset")&&o)return{offsetType:"encoding",offset:UM({channel:a,channelDef:o,markDef:t,config:i==null?void 0:i.config,scaleName:i.scaleName(a),scale:i.getScaleComponent(a),stack:null,defaultRef:Mt(s),bandPosition:r})};const l=t[a];return l?{offsetType:"visual",offset:l}:{}}function gi(e,t,{defaultPos:n,vgChannel:i}){const{encoding:r,markDef:a,config:s,stack:o}=t,l=r[e],f=r[os(e)],d=t.scaleName(e),g=t.getScaleComponent(e),{offset:p,offsetType:y}=hd({channel:e,markDef:a,encoding:r,model:t,bandPosition:.5}),v=sk({model:t,defaultPos:n,channel:e,scaleName:d,scale:g}),b=!l&&Qt(e)&&(r.latitude||r.longitude)?{field:t.getName(e)}:Zxe({channel:e,channelDef:l,channel2Def:f,markDef:a,config:s,scaleName:d,scale:g,stack:o,offset:p,defaultRef:v,bandPosition:y==="encoding"?0:void 0});return b?{[i||e]:b}:void 0}function Zxe(e){const{channel:t,channelDef:n,scaleName:i,stack:r,offset:a,markDef:s}=e;if(Be(n)&&r&&t===r.fieldChannel){if(he(n)){let o=n.bandPosition;if(o===void 0&&s.type==="text"&&(t==="radius"||t==="theta")&&(o=.5),o!==void 0)return yv({scaleName:i,fieldOrDatumDef:n,startSuffix:"start",bandPosition:o,offset:a})}return Cl(n,i,{suffix:"end"},{offset:a})}return LM(e)}function sk({model:e,defaultPos:t,channel:n,scaleName:i,scale:r}){const{markDef:a,config:s}=e;return()=>{const o=cc(n),l=mu(n),f=Et(n,a,s,{vgChannel:l});if(f!==void 0)return Zg(n,f);switch(t){case"zeroOrMin":return l8({scaleName:i,scale:r,mode:"zeroOrMin",mainChannel:o,config:s});case"zeroOrMax":return l8({scaleName:i,scale:r,mode:{zeroOrMax:{widthSignal:e.width.signal,heightSignal:e.height.signal}},mainChannel:o,config:s});case"mid":return{...e[Ui(n)],mult:.5}}}}function l8({mainChannel:e,config:t,...n}){const i=Lj(n),{mode:r}=n;if(i)return i;switch(e){case"radius":{if(r==="zeroOrMin")return{value:0};const{widthSignal:a,heightSignal:s}=r.zeroOrMax;return{signal:`min(${a},${s})/2`}}case"theta":return r==="zeroOrMin"?{value:0}:{signal:"2*PI"};case"x":return r==="zeroOrMin"?{value:0}:{field:{group:"width"}};case"y":return r==="zeroOrMin"?{field:{group:"height"}}:{value:0}}}const Kxe={left:"x",center:"xc",right:"x2"},Jxe={top:"y",middle:"yc",bottom:"y2"};function JH(e,t,n,i="middle"){if(e==="radius"||e==="theta")return mu(e);const r=e==="x"?"align":"baseline",a=Et(r,t,n);let s;return Ce(a)?(de(Z1e(r)),s=void 0):s=a,e==="x"?Kxe[s||(i==="top"?"left":"center")]:Jxe[s||i]}function wv(e,t,{defaultPos:n,defaultPos2:i,range:r}){return r?eG(e,t,{defaultPos:n,defaultPos2:i}):gi(e,t,{defaultPos:n})}function eG(e,t,{defaultPos:n,defaultPos2:i}){const{markDef:r,config:a}=t,s=os(e),o=Ui(e),l=e2e(t,i,s),f=l[o]?JH(e,r,a):mu(e);return{...gi(e,t,{defaultPos:n,vgChannel:f}),...l}}function e2e(e,t,n){const{encoding:i,mark:r,markDef:a,stack:s,config:o}=e,l=cc(n),f=Ui(n),d=mu(n),g=i[l],p=e.scaleName(l),y=e.getScaleComponent(l),{offset:v}=n in i||n in a?hd({channel:n,markDef:a,encoding:i,model:e}):hd({channel:l,markDef:a,encoding:i,model:e});if(!g&&(n==="x2"||n==="y2")&&(i.latitude||i.longitude)){const E=Ui(n),_=e.markDef[E];return _!=null?{[E]:{value:_}}:{[d]:{field:e.getName(n)}}}const b=t2e({channel:n,channelDef:g,channel2Def:i[n],markDef:a,config:o,scaleName:p,scale:y,stack:s,offset:v,defaultRef:void 0});return b!==void 0?{[d]:b}:p1(n,a)||p1(n,{[n]:RA(n,a,o.style),[f]:RA(f,a,o.style)})||p1(n,o[r])||p1(n,o.mark)||{[d]:sk({model:e,defaultPos:t,channel:n,scaleName:p,scale:y})()}}function t2e({channel:e,channelDef:t,channel2Def:n,markDef:i,config:r,scaleName:a,scale:s,stack:o,offset:l,defaultRef:f}){return Be(t)&&o&&e.charAt(0)===o.fieldChannel.charAt(0)?Cl(t,a,{suffix:"start"},{offset:l}):LM({channel:e,channelDef:n,scaleName:a,scale:s,stack:o,markDef:i,config:r,offset:l,defaultRef:f})}function p1(e,t){const n=Ui(e),i=mu(e);if(t[i]!==void 0)return{[i]:Zg(e,t[i])};if(t[e]!==void 0)return{[i]:Zg(e,t[e])};if(t[n]){const r=t[n];if(Wl(r))de(G1e(n));else return{[n]:Zg(e,r)}}}function Ks(e,t){const{config:n,encoding:i,markDef:r}=e,a=r.type,s=os(t),o=Ui(t),l=i[t],f=i[s],d=e.getScaleComponent(t),g=d?d.get("type"):void 0,p=r.orient,y=i[o]??i.size??Et("size",r,n,{vgChannel:o}),v=Xq(t),b=a==="bar"&&(t==="x"?p==="vertical":p==="horizontal")||a==="tick"&&(t==="y"?p==="vertical":p==="horizontal");return he(l)&&(Ct(l.bin)||Dn(l.bin)||l.timeUnit&&!f)&&!(y&&!Wl(y))&&!i[v]&&!$n(g)?r2e({fieldDef:l,fieldDef2:f,channel:t,model:e}):(Be(l)&&$n(g)||b)&&!f?i2e(l,t,e):eG(t,e,{defaultPos:"zeroOrMax",defaultPos2:"zeroOrMin"})}function n2e(e,t,n,i,r,a,s){if(Wl(r))if(n){const l=n.get("type");if(l==="band"){let f=`bandwidth('${t}')`;r.band!==1&&(f=`${r.band} * ${f}`);const d=Va("minBandSize",{type:s},i);return{signal:d?`max(${ea(d)}, ${f})`:f}}else r.band!==1&&(de(tye(l)),r=void 0)}else return{mult:r.band,field:{group:e}};else{if(Ce(r))return r;if(r)return{value:r}}if(n){const l=n.get("range");if(dc(l)&&st(l.step))return{value:l.step-2}}if(!a){const{bandPaddingInner:l,barBandPaddingInner:f,rectBandPaddingInner:d,tickBandPaddingInner:g}=i.scale,p=Wt(l,s==="tick"?g:s==="bar"?f:d);if(Ce(p))return{signal:`(1 - (${p.signal})) * ${e}`};if(st(p))return{signal:`${1-p} * ${e}`}}return{value:IA(i.view,e)-2}}function i2e(e,t,n){var z,B;const{markDef:i,encoding:r,config:a,stack:s}=n,o=i.orient,l=n.scaleName(t),f=n.getScaleComponent(t),d=Ui(t),g=os(t),p=Xq(t),y=n.scaleName(p),v=n.getScaleComponent(cM(t)),b=i.type==="tick"||o==="horizontal"&&t==="y"||o==="vertical"&&t==="x";let E;(r.size||i.size)&&(b?E=zn("size",n,{vgChannel:d,defaultRef:Mt(i.size)}):de(aye(i.type)));const _=!!E,w=Gj({channel:t,fieldDef:e,markDef:i,config:a,scaleType:(z=f||v)==null?void 0:z.get("type"),useVlSizeChannel:b});E=E||{[d]:n2e(d,y||l,v||f,a,w,!!e,i.type)};const A=((B=f||v)==null?void 0:B.get("type"))==="band"&&Wl(w)&&!_?"top":"middle",$=JH(t,i,a,A),C=$==="xc"||$==="yc",{offset:k,offsetType:M}=hd({channel:t,markDef:i,encoding:r,model:n,bandPosition:C?.5:0}),R=LM({channel:t,channelDef:e,markDef:i,config:a,scaleName:l,scale:f,stack:s,offset:k,defaultRef:sk({model:n,defaultPos:"mid",channel:t,scaleName:l,scale:f}),bandPosition:C?M==="encoding"?0:.5:Ce(w)?{signal:`(1-${w})/2`}:Wl(w)?(1-w.band)/2:0});if(d)return{[$]:R,...E};{const U=mu(g),V=E[d],G=k?{...V,offset:k}:V;return{[$]:R,[U]:re(R)?[R[0],{...R[1],offset:G}]:{...R,offset:G}}}}function c8(e,t,n,i,r,a,s){if(Pq(e))return 0;const o=e==="x"||e==="y2",l=o?-t/2:t/2;if(Ce(n)||Ce(r)||Ce(i)||a){const f=ea(n),d=ea(r),g=ea(i),p=ea(a),v=a?`(${s} < ${p} ? ${o?"":"-"}0.5 * (${p} - (${s})) : ${l})`:l,b=g?`${g} + `:"",E=f?`(${f} ? -1 : 1) * `:"",_=d?`(${d} + ${v})`:v;return{signal:b+E+_}}else return r=r||0,i+(n?-r-l:+r+l)}function r2e({fieldDef:e,fieldDef2:t,channel:n,model:i}){var B;const{config:r,markDef:a,encoding:s}=i,o=i.getScaleComponent(n),l=i.scaleName(n),f=o?o.get("type"):void 0,d=o.get("reverse"),g=Gj({channel:n,fieldDef:e,markDef:a,config:r,scaleType:f}),p=(B=i.component.axes[n])==null?void 0:B[0],y=(p==null?void 0:p.get("translate"))??.5,v=Qt(n)?Et("binSpacing",a,r)??0:0,b=os(n),E=mu(n),_=mu(b),w=Va("minBandSize",a,r),{offset:A}=hd({channel:n,markDef:a,encoding:s,model:i,bandPosition:0}),{offset:$}=hd({channel:b,markDef:a,encoding:s,model:i,bandPosition:0}),C=Cve({fieldDef:e,scaleName:l}),k=c8(n,v,d,y,A,w,C),M=c8(b,v,d,y,$??A,w,C),R=Ce(g)?{signal:`(1-${g.signal})/2`}:Wl(g)?(1-g.band)/2:.5,z=yu({fieldDef:e,fieldDef2:t,markDef:a,config:r});if(Ct(e.bin)||e.timeUnit){const U=e.timeUnit&&z!==.5;return{[_]:f8({fieldDef:e,scaleName:l,bandPosition:R,offset:M,useRectOffsetField:U}),[E]:f8({fieldDef:e,scaleName:l,bandPosition:Ce(R)?{signal:`1-${R.signal}`}:1-R,offset:k,useRectOffsetField:U})}}else if(Dn(e.bin)){const U=Cl(e,l,{},{offset:M});if(he(t))return{[_]:U,[E]:Cl(t,l,{},{offset:k})};if(fc(e.bin)&&e.bin.step)return{[_]:U,[E]:{signal:`scale("${l}", ${me(e,{expr:"datum"})} + ${e.bin.step})`,offset:k}}}de(dj(b))}function f8({fieldDef:e,scaleName:t,bandPosition:n,offset:i,useRectOffsetField:r}){return yv({scaleName:t,fieldOrDatumDef:e,bandPosition:n,offset:i,...r?{startSuffix:yx,endSuffix:vx}:{}})}const a2e=new Set(["aria","width","height"]);function Br(e,t){const{fill:n=void 0,stroke:i=void 0}=t.color==="include"?KH(e):{};return{...s2e(e.markDef,t),...d8("fill",n),...d8("stroke",i),...zn("opacity",e),...zn("fillOpacity",e),...zn("strokeOpacity",e),...zn("strokeWidth",e),...zn("strokeDash",e),...Qxe(e),...QH(e),...ak(e,"href"),...Xxe(e)}}function d8(e,t){return t?{[e]:t}:{}}function s2e(e,t){return p1e.reduce((n,i)=>(!a2e.has(i)&&ce(e,i)&&t[i]!=="ignore"&&(n[i]=Mt(e[i])),n),{})}function ok(e){const{config:t,markDef:n}=e,i=new Set;if(e.forEachFieldDef((r,a)=>{var f;let s;if(!us(a)||!(s=e.getScaleType(a)))return;const o=Kb(r.aggregate),l=FM({scaleChannel:a,markDef:n,config:t,scaleType:s,isCountAggregate:o});if(wve(l)){const d=e.vgField(a,{expr:"datum",binSuffix:(f=e.stack)!=null&&f.impute?"mid":void 0});d&&i.add(d)}}),i.size>0)return{defined:{signal:[...i].map(a=>nx(a,!0)).join(" && ")}}}function h8(e,t){if(t!==void 0)return{[e]:Mt(t)}}const y_="voronoi",tG={defined:e=>e.type==="point"&&e.nearest,parse:(e,t)=>{if(t.events)for(const n of t.events)n.markname=e.getName(y_)},marks:(e,t,n)=>{const{x:i,y:r}=t.project.hasChannel,a=e.mark;if(Nu(a))return de(E1e(a)),n;const s={name:e.getName(y_),type:"path",interactive:!0,from:{data:e.getName("marks")},encode:{update:{fill:{value:"transparent"},strokeWidth:{value:.35},stroke:{value:"transparent"},isVoronoi:{value:!0},...QH(e,{reactiveGeom:!0})}},transform:[{type:"voronoi",x:{expr:i||!r?"datum.datum.x || 0":"0"},y:{expr:r||!i?"datum.datum.y || 0":"0"},size:[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]}]};let o=0,l=!1;return n.forEach((f,d)=>{const g=f.name??"";g===e.component.mark[0].name?o=d:g.includes(y_)&&(l=!0)}),l||n.splice(o+1,0,s),n}},nG={defined:e=>e.type==="point"&&e.resolve==="global"&&e.bind&&e.bind!=="scales"&&!ZM(e.bind),parse:(e,t,n)=>cG(t,n),topLevelSignals:(e,t,n)=>{var l;const i=t.name,r=t.project,a=t.bind,s=(l=t.init)==null?void 0:l[0],o=tG.defined(t)?"(item().isVoronoi ? datum.datum : datum)":"datum";return r.items.forEach((f,d)=>{const g=Dt(`${i}_${f.field}`);n.filter(y=>y.name===g).length||n.unshift({name:g,...s?{init:Zl(s[d])}:{value:null},on:t.events?[{events:t.events,update:`datum && item().mark.marktype !== 'group' ? ${o}[${ge(f.field)}] : null`}]:[],bind:a[f.field]??a[f.channel]??a})}),n},signals:(e,t,n)=>{const i=t.name,r=t.project,a=n.find(f=>f.name===i+Js),s=i+x0,o=r.items.map(f=>Dt(`${i}_${f.field}`)),l=o.map(f=>`${f} !== null`).join(" && ");return o.length&&(a.update=`${l} ? {fields: ${s}, values: [${o.join(", ")}]} : null`),delete a.value,delete a.on,n}},Av="_toggle",iG={defined:e=>e.type==="point"&&!Ia(e)&&!!e.toggle,signals:(e,t,n)=>n.concat({name:t.name+Av,value:!1,on:[{events:t.events,update:t.toggle}]}),modifyExpr:(e,t)=>{const n=t.name+Js,i=t.name+Av;return`${i} ? null : ${n}, ${t.resolve==="global"?`${i} ? null : true, `:`${i} ? null : {unit: ${Ml(e)}}, `}${i} ? ${n} : null`}},o2e={defined:e=>e.clear!==void 0&&e.clear!==!1&&!Ia(e),parse:(e,t)=>{t.clear&&(t.clear=ve(t.clear)?$u(t.clear,"view"):t.clear)},topLevelSignals:(e,t,n)=>{if(nG.defined(t))for(const i of t.project.items){const r=n.findIndex(a=>a.name===Dt(`${t.name}_${i.field}`));r!==-1&&n[r].on.push({events:t.clear,update:"null"})}return n},signals:(e,t,n)=>{function i(r,a){r!==-1&&n[r].on&&n[r].on.push({events:t.clear,update:a})}if(t.type==="interval")for(const r of t.project.items){const a=n.findIndex(s=>s.name===r.signals.visual);if(i(a,"[0, 0]"),a===-1){const s=n.findIndex(o=>o.name===r.signals.data);i(s,"null")}}else{let r=n.findIndex(a=>a.name===t.name+Js);i(r,"null"),iG.defined(t)&&(r=n.findIndex(a=>a.name===t.name+Av),i(r,"false"))}return n}},rG={defined:e=>{const t=e.resolve==="global"&&e.bind&&ZM(e.bind),n=e.project.items.length===1&&e.project.items[0].field!==ca;return t&&!n&&de(A1e),t&&n},parse:(e,t,n)=>{const i=Le(n);if(i.select=ve(i.select)?{type:i.select,toggle:t.toggle}:{...i.select,toggle:t.toggle},cG(t,i),be(n.select)&&(n.select.on||n.select.clear)){const s='event.item && indexof(event.item.mark.role, "legend") < 0';for(const o of t.events)o.filter=Ee(o.filter??[]),o.filter.includes(s)||o.filter.push(s)}const r=f_(t.bind)?t.bind.legend:"click",a=ve(r)?$u(r,"view"):Ee(r);t.bind={legend:{merge:a}}},topLevelSignals:(e,t,n)=>{const i=t.name,r=f_(t.bind)&&t.bind.legend,a=s=>o=>{const l=Le(o);return l.markname=s,l};for(const s of t.project.items){if(!s.hasLegend)continue;const o=`${Dt(s.field)}_legend`,l=`${i}_${o}`;if(n.filter(d=>d.name===l).length===0){const d=r.merge.map(a(`${o}_symbols`)).concat(r.merge.map(a(`${o}_labels`))).concat(r.merge.map(a(`${o}_entries`)));n.unshift({name:l,...t.init?{}:{value:null},on:[{events:d,update:"isDefined(datum.value) ? datum.value : item().items[0].items[0].datum.value",force:!0},{events:r.merge,update:`!event.item || !datum ? null : ${l}`,force:!0}]})}}return n},signals:(e,t,n)=>{const i=t.name,r=t.project,a=n.find(p=>p.name===i+Js),s=i+x0,o=r.items.filter(p=>p.hasLegend).map(p=>Dt(`${i}_${Dt(p.field)}_legend`)),f=`${o.map(p=>`${p} !== null`).join(" && ")} ? {fields: ${s}, values: [${o.join(", ")}]} : null`;t.events&&o.length>0?a.on.push({events:o.map(p=>({signal:p})),update:f}):o.length>0&&(a.update=f,delete a.value,delete a.on);const d=n.find(p=>p.name===i+Av),g=f_(t.bind)&&t.bind.legend;return d&&(t.events?d.on.push({...d.on[0],events:g}):d.on[0].events=g),n}};function u2e(e,t,n){var r;const i=(r=e.fieldDef(t))==null?void 0:r.field;for(const a of nn(e.component.selection??{})){const s=a.project.hasField[i]??a.project.hasChannel[t];if(s&&rG.defined(a)){const o=n.get("selections")??[];o.push(a.name),n.set("selections",o,!1),s.hasLegend=!0}}}const aG="_translate_anchor",sG="_translate_delta",l2e={defined:e=>e.type==="interval"&&e.translate,signals:(e,t,n)=>{const i=t.name,r=Ys.defined(t),a=i+aG,{x:s,y:o}=t.project.hasChannel;let l=$u(t.translate,"scope");return r||(l=l.map(f=>(f.between[0].markname=i+Nf,f))),n.push({name:a,value:{},on:[{events:l.map(f=>f.between[0]),update:`{x: x(unit), y: y(unit)${s!==void 0?`, extent_x: ${r?GA(e,Rt):`slice(${s.signals.visual})`}`:""}${o!==void 0?`, extent_y: ${r?GA(e,Tn):`slice(${o.signals.visual})`}`:""}}`}]},{name:i+sG,value:{},on:[{events:l,update:`{x: ${a}.x - x(unit), y: ${a}.y - y(unit)}`}]}),s!==void 0&&g8(e,t,s,"width",n),o!==void 0&&g8(e,t,o,"height",n),n}};function g8(e,t,n,i,r){const a=t.name,s=a+aG,o=a+sG,l=n.channel,f=Ys.defined(t),d=r.find(C=>C.name===n.signals[f?"data":"visual"]),g=e.getSizeSignalRef(i).signal,p=e.getScaleComponent(l),y=p==null?void 0:p.get("type"),v=p==null?void 0:p.get("reverse"),b=f?l===Rt?v?"":"-":v?"-":"":"",E=`${s}.extent_${l}`,_=`${b}${o}.${l} / ${f?`${g}`:`span(${E})`}`,w=!f||!p?"panLinear":y==="log"?"panLog":y==="symlog"?"panSymlog":y==="pow"?"panPow":"panLinear",A=f?y==="pow"?`, ${p.get("exponent")??1}`:y==="symlog"?`, ${p.get("constant")??1}`:"":"",$=`${w}(${E}, ${_}${A})`;d.on.push({events:{signal:o},update:f?$:`clampRange(${$}, 0, ${g})`})}const oG="_zoom_anchor",uG="_zoom_delta",c2e={defined:e=>e.type==="interval"&&e.zoom,signals:(e,t,n)=>{const i=t.name,r=Ys.defined(t),a=i+uG,{x:s,y:o}=t.project.hasChannel,l=ge(e.scaleName(Rt)),f=ge(e.scaleName(Tn));let d=$u(t.zoom,"scope");return r||(d=d.map(g=>(g.markname=i+Nf,g))),n.push({name:i+oG,on:[{events:d,update:r?`{${[l?`x: invert(${l}, x(unit))`:"",f?`y: invert(${f}, y(unit))`:""].filter(g=>g).join(", ")}}`:"{x: x(unit), y: y(unit)}"}]},{name:a,on:[{events:d,force:!0,update:"pow(1.001, event.deltaY * pow(16, event.deltaMode))"}]}),s!==void 0&&p8(e,t,s,"width",n),o!==void 0&&p8(e,t,o,"height",n),n}};function p8(e,t,n,i,r){const a=t.name,s=n.channel,o=Ys.defined(t),l=r.find(w=>w.name===n.signals[o?"data":"visual"]),f=e.getSizeSignalRef(i).signal,d=e.getScaleComponent(s),g=d==null?void 0:d.get("type"),p=o?GA(e,s):l.name,y=a+uG,v=`${a}${oG}.${s}`,b=!o||!d?"zoomLinear":g==="log"?"zoomLog":g==="symlog"?"zoomSymlog":g==="pow"?"zoomPow":"zoomLinear",E=o?g==="pow"?`, ${d.get("exponent")??1}`:g==="symlog"?`, ${d.get("constant")??1}`:"":"",_=`${b}(${p}, ${v}, ${y}${E})`;l.on.push({events:{signal:y},update:o?_:`clampRange(${_}, 0, ${f})`})}const Kl="_store",Js="_tuple",f2e="_modify",lG="vlSelectionResolve",xx=[Lxe,Gxe,Nxe,iG,nG,Ys,rG,o2e,l2e,c2e,tG];function d2e(e){let t=e.parent;for(;t&&!sr(t);)t=t.parent;return t}function Ml(e,{escape:t}={escape:!0}){let n=t?ge(e.name):e.name;const i=d2e(e);if(i){const{facet:r}=i;for(const a of Cr)r[a]&&(n+=` + '__facet_${a}_' + (facet[${ge(i.vgField(a))}])`)}return n}function uk(e){return nn(e.component.selection??{}).reduce((t,n)=>t||n.project.hasSelectionId,!1)}function cG(e,t){(ve(t.select)||!t.select.on)&&delete e.events,(ve(t.select)||!t.select.clear)&&delete e.clear,(ve(t.select)||!t.select.toggle)&&delete e.toggle}function Ia(e){var t;return(t=e.events)==null?void 0:t.find(n=>"type"in n&&n.type==="timer")}function XA(e){const t=[];return e.type==="Identifier"?[e.name]:e.type==="Literal"?[e.value]:(e.type==="MemberExpression"&&(t.push(...XA(e.object)),t.push(...XA(e.property))),t)}function fG(e){return e.object.type==="MemberExpression"?fG(e.object):e.object.name==="datum"}function dG(e){const t=CT(e),n=new Set;return t.visit(i=>{i.type==="MemberExpression"&&fG(i)&&n.add(XA(i).slice(1).join("."))}),n}class Id extends yt{constructor(n,i,r){super(n);oe(this,"model");oe(this,"filter");oe(this,"expr");oe(this,"_dependentFields");this.model=i,this.filter=r,this.expr=$v(this.model,this.filter,this),this._dependentFields=dG(this.expr)}clone(){return new Id(null,this.model,Le(this.filter))}dependentFields(){return this._dependentFields}producedFields(){return new Set}assemble(){return{type:"filter",expr:this.expr}}hash(){return`Filter ${this.expr}`}}function h2e(e,t){const n={},i=e.config.selection;if(!t||!t.length)return n;let r=0;for(const a of t){const s=Dt(a.name),o=a.select,l=ve(o)?o:o.type,f=be(o)?Le(o):{type:l},d=i[l];for(const y in d)y==="fields"||y==="encodings"||(y==="mark"&&(f.mark={...d.mark,...f.mark}),(f[y]===void 0||f[y]===!0)&&(f[y]=Le(d[y]??f[y])));const g=n[s]={...f,name:s,type:l,init:a.value,bind:a.bind,events:ve(f.on)?$u(f.on,"scope"):Ee(Le(f.on))};if(Ia(g)&&(r++,r>1)){delete n[s];continue}const p=Le(a);for(const y of xx)y.defined(g)&&y.parse&&y.parse(e,g,p)}return r>1&&de(O1e),n}function hG(e,t,n,i="datum"){const r=ve(t)?t:t.param,a=Dt(r),s=ge(a+Kl);let o;try{o=e.getSelectionComponent(a,r)}catch{return`!!${a}`}if(o.project.timeUnit){const p=n??e.component.data.raw,y=o.project.timeUnit.clone();p.parent?y.insertAsParentOf(p):p.parent=y}const l=o.project.hasSelectionId?"vlSelectionIdTest(":"vlSelectionTest(",f=o.resolve==="global"?")":`, ${ge(o.resolve)})`,d=`${l}${s}, ${i}${f}`,g=`length(data(${s}))`;return t.empty===!1?`${g} && ${d}`:`!${g} || ${d}`}function gG(e,t,n){const i=Dt(t),r=n.encoding;let a=n.field,s;try{s=e.getSelectionComponent(i,t)}catch{return i}if(!r&&!a)a=s.project.items[0].field,s.project.items.length>1&&de(D1e(a));else if(r&&!a){const o=s.project.items.filter(l=>l.channel===r);!o.length||o.length>1?(a=s.project.items[0].field,de(R1e(o,r,n,a))):a=o[0].field}return`${s.name}[${ge(zr(a))}]`}function g2e(e,t){for(const[n,i]of pu(e.component.selection??{})){const r=e.getName(`lookup_${n}`);e.component.data.outputNodes[r]=i.materialized=new Di(new Id(t,e,{param:n}),r,Lt.Lookup,e.component.data.outputNodeRefCounts)}}function $v(e,t,n){return Qg(t,i=>ve(i)?i:qye(i)?hG(e,i,n):wj(i))}function p2e(e,t){if(e)return re(e)&&!qo(e)?e.map(n=>jM(n,t)).join(", "):e}function v_(e,t,n,i){var r,a;e.encode??(e.encode={}),(r=e.encode)[t]??(r[t]={}),(a=e.encode[t]).update??(a.update={}),e.encode[t].update[n]=i}function Fg(e,t,n,i={header:!1}){var g,p;const{disable:r,orient:a,scale:s,labelExpr:o,title:l,zindex:f,...d}=e.combine();if(!r){for(const y in d){const v=y,b=Xve[v],E=d[v];if(b&&b!==t&&b!=="both")delete d[v];else if(b0(E)){const{condition:_,...w}=E,A=Ee(_),$=jz[v];if($){const{vgProp:C,part:k}=$,M=[...A.map(R=>{const{test:z,...B}=R;return{test:$v(null,z),...B}}),w];v_(d,k,C,M),delete d[v]}else if($===null){const C={signal:A.map(k=>{const{test:M,...R}=k;return`${$v(null,M)} ? ${Cz(R)} : `}).join("")+Cz(w)};d[v]=C}}else if(Ce(E)){const _=jz[v];if(_){const{vgProp:w,part:A}=_;v_(d,A,w,E),delete d[v]}}Ve(["labelAlign","labelBaseline"],v)&&d[v]===null&&delete d[v]}if(t==="grid"){if(!d.grid)return;if(d.encode){const{grid:y}=d.encode;d.encode={...y?{grid:y}:{}},At(d.encode)&&delete d.encode}return{scale:s,orient:a,...d,domain:!1,labels:!1,aria:!1,maxExtent:0,minExtent:0,ticks:!1,zindex:Wt(f,0)}}else{if(!i.header&&e.mainExtracted)return;if(o!==void 0){let v=o;(p=(g=d.encode)==null?void 0:g.labels)!=null&&p.update&&Ce(d.encode.labels.update.text)&&(v=Hl(o,"datum.label",d.encode.labels.update.text.signal)),v_(d,"labels","text",{signal:v})}if(d.labelAlign===null&&delete d.labelAlign,d.encode){for(const v of tH)e.hasAxisPart(v)||delete d.encode[v];At(d.encode)&&delete d.encode}const y=p2e(l,n);return{scale:s,orient:a,grid:!1,...y?{title:y}:{},...d,...n.aria===!1?{aria:!1}:{},zindex:Wt(f,0)}}}}function pG(e){const{axes:t}=e.component,n=[];for(const i of so)if(t[i]){for(const r of t[i])if(!r.get("disable")&&!r.get("gridScale")){const a=i==="x"?"height":"width",s=e.getSizeSignalRef(a).signal;a!==s&&n.push({name:a,update:s})}}return n}function m2e(e,t){const{x:n=[],y:i=[]}=e;return[...n.map(r=>Fg(r,"grid",t)),...i.map(r=>Fg(r,"grid",t)),...n.map(r=>Fg(r,"main",t)),...i.map(r=>Fg(r,"main",t))].filter(r=>r)}function m8(e,t,n,i){return Object.assign.apply(null,[{},...e.map(r=>{if(r==="axisOrient"){const a=n==="x"?"bottom":"left",s=t[n==="x"?"axisBottom":"axisLeft"]||{},o=t[n==="x"?"axisTop":"axisRight"]||{},l=new Set([...le(s),...le(o)]),f={};for(const d of l.values())f[d]={signal:`${i.signal} === "${a}" ? ${ea(s[d])} : ${ea(o[d])}`};return f}return t[r]})])}function y2e(e,t,n,i){const r=t==="band"?["axisDiscrete","axisBand"]:t==="point"?["axisDiscrete","axisPoint"]:Tj(t)?["axisQuantitative"]:t==="time"||t==="utc"?["axisTemporal"]:[],a=e==="x"?"axisX":"axisY",s=Ce(n)?"axisOrient":`axis${u0(n)}`,o=[...r,...r.map(f=>a+f.substr(4))],l=["axis",s,a];return{vlOnlyAxisConfig:m8(o,i,e,n),vgAxisConfig:m8(l,i,e,n),axisConfigStyle:v2e([...l,...o],i)}}function v2e(e,t){var i;const n=[{}];for(const r of e){let a=(i=t[r])==null?void 0:i.style;if(a){a=Ee(a);for(const s of a)n.push(t.style[s])}}return Object.assign.apply(null,n)}function VA(e,t,n,i={}){var a;const r=nj(e,n,t);if(r!==void 0)return{configFrom:"style",configValue:r};for(const s of["vlOnlyAxisConfig","vgAxisConfig","axisConfigStyle"])if(((a=i[s])==null?void 0:a[e])!==void 0)return{configFrom:s,configValue:i[s][e]};return{}}const y8={scale:({model:e,channel:t})=>e.scaleName(t),format:({format:e})=>e,formatType:({formatType:e})=>e,grid:({fieldOrDatumDef:e,axis:t,scaleType:n})=>t.grid??b2e(n,e),gridScale:({model:e,channel:t})=>x2e(e,t),labelAlign:({axis:e,labelAngle:t,orient:n,channel:i})=>e.labelAlign||yG(t,n,i),labelAngle:({labelAngle:e})=>e,labelBaseline:({axis:e,labelAngle:t,orient:n,channel:i})=>e.labelBaseline||mG(t,n,i),labelFlush:({axis:e,fieldOrDatumDef:t,channel:n})=>e.labelFlush??S2e(t.type,n),labelOverlap:({axis:e,fieldOrDatumDef:t,scaleType:n})=>e.labelOverlap??_2e(t.type,n,he(t)&&!!t.timeUnit,he(t)?t.sort:void 0),orient:({orient:e})=>e,tickCount:({channel:e,model:t,axis:n,fieldOrDatumDef:i,scaleType:r})=>{const a=e==="x"?"width":e==="y"?"height":void 0,s=a?t.getSizeSignalRef(a):void 0;return n.tickCount??A2e({fieldOrDatumDef:i,scaleType:r,size:s,values:n.values})},tickMinStep:({axis:e,format:t,fieldOrDatumDef:n})=>e.tickMinStep??$2e({format:t,fieldOrDatumDef:n}),title:({axis:e,model:t,channel:n})=>{if(e.title!==void 0)return e.title;const i=vG(t,n);if(i!==void 0)return i;const r=t.typedFieldDef(n),a=n==="x"?"x2":"y2",s=t.fieldDef(a);return rj(r?[Pz(r)]:[],he(s)?[Pz(s)]:[])},values:({axis:e,fieldOrDatumDef:t})=>C2e(e,t),zindex:({axis:e,fieldOrDatumDef:t,mark:n})=>e.zindex??T2e(n,t)};function b2e(e,t){return!$n(e)&&he(t)&&!Ct(t==null?void 0:t.bin)&&!Dn(t==null?void 0:t.bin)}function x2e(e,t){const n=t==="x"?"y":"x";if(e.getScaleComponent(n))return e.scaleName(n)}function E2e(e,t,n,i,r){const a=t==null?void 0:t.labelAngle;if(a!==void 0)return Ce(a)?a:wp(a);{const{configValue:s}=VA("labelAngle",i,t==null?void 0:t.style,r);return s!==void 0?wp(s):n===Rt&&Ve([OM,kM],e.type)&&!(he(e)&&e.timeUnit)?270:void 0}}function WA(e){return`(((${e.signal} % 360) + 360) % 360)`}function mG(e,t,n,i){if(e!==void 0)if(n==="x"){if(Ce(e)){const r=WA(e),a=Ce(t)?`(${t.signal} === "top")`:t==="top";return{signal:`(45 < ${r} && ${r} < 135) || (225 < ${r} && ${r} < 315) ? "middle" :(${r} <= 45 || 315 <= ${r}) === ${a} ? "bottom" : "top"`}}if(45<e&&e<135||225<e&&e<315)return"middle";if(Ce(t)){const r=e<=45||315<=e?"===":"!==";return{signal:`${t.signal} ${r} "top" ? "bottom" : "top"`}}return(e<=45||315<=e)==(t==="top")?"bottom":"top"}else{if(Ce(e)){const r=WA(e),a=Ce(t)?`(${t.signal} === "left")`:t==="left";return{signal:`${r} <= 45 || 315 <= ${r} || (135 <= ${r} && ${r} <= 225) ? ${i?'"middle"':"null"} : (45 <= ${r} && ${r} <= 135) === ${a} ? "top" : "bottom"`}}if(e<=45||315<=e||135<=e&&e<=225)return i?"middle":null;if(Ce(t)){const r=45<=e&&e<=135?"===":"!==";return{signal:`${t.signal} ${r} "left" ? "top" : "bottom"`}}return(45<=e&&e<=135)==(t==="left")?"top":"bottom"}}function yG(e,t,n){if(e===void 0)return;const i=n==="x",r=i?0:90,a=i?"bottom":"left";if(Ce(e)){const s=WA(e),o=Ce(t)?`(${t.signal} === "${a}")`:t===a;return{signal:`(${r?`(${s} + 90)`:s} % 180 === 0) ? ${i?null:'"center"'} :(${r} < ${s} && ${s} < ${180+r}) === ${o} ? "left" : "right"`}}if((e+r)%180===0)return i?null:"center";if(Ce(t)){const s=r<e&&e<180+r?"===":"!==";return{signal:`${`${t.signal} ${s} "${a}"`} ? "left" : "right"`}}return(r<e&&e<180+r)==(t===a)?"left":"right"}function S2e(e,t){if(t==="x"&&Ve(["quantitative","temporal"],e))return!0}function _2e(e,t,n,i){if(n&&!be(i)||e!=="nominal"&&e!=="ordinal")return t==="log"||t==="symlog"?"greedy":!0}function w2e(e){return e==="x"?"bottom":"left"}function A2e({fieldOrDatumDef:e,scaleType:t,size:n,values:i}){var r;if(!i&&!$n(t)&&t!=="log"){if(he(e)){if(Ct(e.bin))return{signal:`ceil(${n.signal}/10)`};if(e.timeUnit&&Ve(["month","hours","day","quarter"],(r=An(e.timeUnit))==null?void 0:r.unit))return}return{signal:`ceil(${n.signal}/40)`}}}function $2e({format:e,fieldOrDatumDef:t}){if(e==="d")return 1;if(he(t)){const{timeUnit:n}=t;if(n){const i=Ej(n);if(i)return{signal:i}}}}function vG(e,t){const n=t==="x"?"x2":"y2",i=e.fieldDef(t),r=e.fieldDef(n),a=i?i.title:void 0,s=r?r.title:void 0;if(a&&s)return aj(a,s);if(a)return a;if(s)return s;if(a!==void 0)return a;if(s!==void 0)return s}function C2e(e,t){const n=e.values;if(re(n))return eH(t,n);if(Ce(n))return n}function T2e(e,t){return e==="rect"&&bv(t)?1:0}class gd extends yt{constructor(n,i){super(n);oe(this,"transform");oe(this,"_dependentFields");this.transform=i,this._dependentFields=dG(this.transform.calculate)}clone(){return new gd(null,Le(this.transform))}static parseAllForSortIndex(n,i){return i.forEachFieldDef((r,a)=>{if(pc(r)&&Hj(r.sort)){const{field:s,timeUnit:o}=r,l=r.sort,f=l.map((d,g)=>`${wj({field:s,timeUnit:o,equal:d})} ? ${g} : `).join("")+l.length;n=new gd(n,{calculate:f,as:pd(r,a,{forAs:!0})})}}),n}producedFields(){return new Set([this.transform.as])}dependentFields(){return this._dependentFields}assemble(){return{type:"formula",expr:this.transform.calculate,as:this.transform.as}}hash(){return`Calculate ${Ze(this.transform)}`}}function pd(e,t,n){return me(e,{prefix:t,suffix:"sort_index",...n})}function Ex(e,t){return Ve(["top","bottom"],t)?"column":Ve(["left","right"],t)||e==="row"?"row":"column"}function md(e,t,n,i){const r=i==="row"?n.headerRow:i==="column"?n.headerColumn:n.headerFacet;return Wt((t||{})[e],r[e],n.header[e])}function Sx(e,t,n,i){const r={};for(const a of e){const s=md(a,t||{},n,i);s!==void 0&&(r[a]=s)}return r}const lk=["row","column"],ck=["header","footer"];function M2e(e,t){const n=e.component.layoutHeaders[t].title,i=e.config?e.config:void 0,r=e.component.layoutHeaders[t].facetFieldDef?e.component.layoutHeaders[t].facetFieldDef:void 0,{titleAnchor:a,titleAngle:s,titleOrient:o}=Sx(["titleAnchor","titleAngle","titleOrient"],r.header,i,t),l=Ex(t,o),f=wp(s);return{name:`${t}-title`,type:"group",role:`${l}-title`,title:{text:n,...t==="row"?{orient:"left"}:{},style:"guide-title",...xG(f,l),...bG(l,f,a),...EG(i,r,t,pbe,bH)}}}function bG(e,t,n="middle"){switch(n){case"start":return{align:"left"};case"end":return{align:"right"}}const i=yG(t,e==="row"?"left":"top",e==="row"?"y":"x");return i?{align:i}:{}}function xG(e,t){const n=mG(e,t==="row"?"left":"top",t==="row"?"y":"x",!0);return n?{baseline:n}:{}}function k2e(e,t){const n=e.component.layoutHeaders[t],i=[];for(const r of ck)if(n[r])for(const a of n[r]){const s=D2e(e,t,r,n,a);s!=null&&i.push(s)}return i}function O2e(e,t){const{sort:n}=e;return Gs(n)?{field:me(n,{expr:"datum"}),order:n.order??"ascending"}:re(n)?{field:pd(e,t,{expr:"datum"}),order:"ascending"}:{field:me(e,{expr:"datum"}),order:n??"ascending"}}function QA(e,t,n){const{format:i,formatType:r,labelAngle:a,labelAnchor:s,labelOrient:o,labelExpr:l}=Sx(["format","formatType","labelAngle","labelAnchor","labelOrient","labelExpr"],e.header,n,t),f=BM({fieldOrDatumDef:e,format:i,formatType:r,expr:"parent",config:n}).signal,d=Ex(t,o);return{text:{signal:l?Hl(Hl(l,"datum.label",f),"datum.value",me(e,{expr:"parent"})):f},...t==="row"?{orient:"left"}:{},style:"guide-label",frame:"group",...xG(a,d),...bG(d,a,s),...EG(n,e,t,mbe,xH)}}function D2e(e,t,n,i,r){if(r){let a=null;const{facetFieldDef:s}=i,o=e.config?e.config:void 0;if(s&&r.labels){const{labelOrient:g}=Sx(["labelOrient"],s.header,o,t);(t==="row"&&!Ve(["top","bottom"],g)||t==="column"&&!Ve(["left","right"],g))&&(a=QA(s,t,o))}const l=sr(e)&&!p0(e.facet),f=r.axes,d=(f==null?void 0:f.length)>0;if(a||d){const g=t==="row"?"height":"width";return{name:e.getName(`${t}_${n}`),type:"group",role:`${t}-${n}`,...i.facetFieldDef?{from:{data:e.getName(`${t}_domain`)},sort:O2e(s,t)}:{},...d&&l?{from:{data:e.getName(`facet_domain_${t}`)}}:{},...a?{title:a}:{},...r.sizeSignal?{encode:{update:{[g]:r.sizeSignal}}}:{},...d?{axes:f}:{}}}}return null}const R2e={column:{start:0,end:1},row:{start:1,end:0}};function N2e(e,t){return R2e[t][e]}function z2e(e,t){const n={};for(const i of Cr){const r=e[i];if(r!=null&&r.facetFieldDef){const{titleAnchor:a,titleOrient:s}=Sx(["titleAnchor","titleOrient"],r.facetFieldDef.header,t,i),o=Ex(i,s),l=N2e(a,o);l!==void 0&&(n[o]=l)}}return At(n)?void 0:n}function EG(e,t,n,i,r){const a={};for(const s of i){if(!r[s])continue;const o=md(s,t==null?void 0:t.header,e,n);o!==void 0&&(a[r[s]]=o)}return a}function fk(e){return[...m1(e,"width"),...m1(e,"height"),...m1(e,"childWidth"),...m1(e,"childHeight")]}function m1(e,t){const n=t==="width"?"x":"y",i=e.component.layoutSize.get(t);if(!i||i==="merged")return[];const r=e.getSizeSignalRef(t).signal;if(i==="step"){const a=e.getScaleComponent(n);if(a){const s=a.get("type"),o=a.get("range");if($n(s)&&dc(o)){const l=e.scaleName(n);return sr(e.parent)&&e.parent.component.resolve.scale[n]==="independent"?[v8(l,o)]:[v8(l,o),{name:r,update:SG(l,a,`domain('${l}').length`)}]}}throw new Error("layout size is step although width/height is not step.")}else if(i=="container"){const a=r.endsWith("width"),s=a?"containerSize()[0]":"containerSize()[1]",o=BA(e.config.view,a?"width":"height"),l=`isFinite(${s}) ? ${s} : ${o}`;return[{name:r,init:l,on:[{update:l,events:"window:resize"}]}]}else return[{name:r,value:i}]}function v8(e,t){const n=`${e}_step`;return Ce(t.step)?{name:n,update:t.step.signal}:{name:n,value:t.step}}function SG(e,t,n){const i=t.get("type"),r=t.get("padding"),a=Wt(t.get("paddingOuter"),r);let s=t.get("paddingInner");return s=i==="band"?s!==void 0?s:r:1,`bandspace(${n}, ${ea(s)}, ${ea(a)}) * ${e}_step`}function _G(e){return e==="childWidth"?"width":e==="childHeight"?"height":e}function wG(e,t){return le(e).reduce((n,i)=>({...n,...Bd({model:t,channelDef:e[i],vgChannel:i,mainRefFn:r=>Mt(r.value),invalidValueRef:void 0})}),{})}function AG(e,t){if(sr(t))return e==="theta"?"independent":"shared";if(jd(t))return"shared";if(vk(t))return Qt(e)||e==="theta"||e==="radius"?"independent":"shared";throw new Error("invalid model type for resolve")}function dk(e,t){const n=e.scale[t],i=Qt(t)?"axis":"legend";return n==="independent"?(e[i][t]==="shared"&&de(cye(t)),"independent"):e[i][t]||"shared"}const F2e={...bbe,disable:1,labelExpr:1,selections:1,opacity:1,shape:1,stroke:1,fill:1,size:1,strokeWidth:1,strokeDash:1,encode:1},$G=le(F2e);class L2e extends uo{}const b8={symbols:U2e,gradient:B2e,labels:I2e,entries:P2e};function U2e(e,{fieldOrDatumDef:t,model:n,channel:i,legendCmpt:r,legendType:a}){if(a!=="symbol")return;const{markDef:s,encoding:o,config:l,mark:f}=n,d=s.filled&&f!=="trail";let g={...v1e({},n,gve),...KH(n,{filled:d})};const p=r.get("symbolOpacity")??l.legend.symbolOpacity,y=r.get("symbolFillColor")??l.legend.symbolFillColor,v=r.get("symbolStrokeColor")??l.legend.symbolStrokeColor,b=p===void 0?CG(o.opacity)??s.opacity:void 0;if(g.fill){if(i==="fill"||d&&i===Fi)delete g.fill;else if(ce(g.fill,"field"))y?delete g.fill:(g.fill=Mt(l.legend.symbolBaseFillColor??"black"),g.fillOpacity=Mt(b??1));else if(re(g.fill)){const E=ZA(o.fill??o.color)??s.fill??(d&&s.color);E&&(g.fill=Mt(E))}}if(g.stroke){if(i==="stroke"||!d&&i===Fi)delete g.stroke;else if(ce(g.stroke,"field")||v)delete g.stroke;else if(re(g.stroke)){const E=Wt(ZA(o.stroke||o.color),s.stroke,d?s.color:void 0);E&&(g.stroke={value:E})}}if(i!==ao){const E=he(t)&&MG(n,r,t);E?g.opacity=[{test:E,...Mt(b??1)},Mt(l.legend.unselectedOpacity)]:b&&(g.opacity=Mt(b))}return g={...g,...e},At(g)?void 0:g}function B2e(e,{model:t,legendType:n,legendCmpt:i}){if(n!=="gradient")return;const{config:r,markDef:a,encoding:s}=t;let o={};const f=(i.get("gradientOpacity")??r.legend.gradientOpacity)===void 0?CG(s.opacity)||a.opacity:void 0;return f&&(o.opacity=Mt(f)),o={...o,...e},At(o)?void 0:o}function I2e(e,{fieldOrDatumDef:t,model:n,channel:i,legendCmpt:r}){const a=n.legend(i)||{},s=n.config,o=he(t)?MG(n,r,t):void 0,l=o?[{test:o,value:1},{value:s.legend.unselectedOpacity}]:void 0,{format:f,formatType:d}=a;let g;Ql(d)?g=ta({fieldOrDatumDef:t,field:"datum.value",format:f,formatType:d,config:s}):f===void 0&&d===void 0&&s.customFormatTypes&&(t.type==="quantitative"&&s.numberFormatType?g=ta({fieldOrDatumDef:t,field:"datum.value",format:s.numberFormat,formatType:s.numberFormatType,config:s}):t.type==="temporal"&&s.timeFormatType&&he(t)&&t.timeUnit===void 0&&(g=ta({fieldOrDatumDef:t,field:"datum.value",format:s.timeFormat,formatType:s.timeFormatType,config:s})));const p={...l?{opacity:l}:{},...g?{text:g}:{},...e};return At(p)?void 0:p}function P2e(e,{legendCmpt:t}){const n=t.get("selections");return n!=null&&n.length?{...e,fill:{value:"transparent"}}:e}function CG(e){return TG(e,(t,n)=>Math.max(t,n.value))}function ZA(e){return TG(e,(t,n)=>Wt(t,n.value))}function TG(e,t){if(zve(e))return Ee(e.condition).reduce(t,e.value);if(ua(e))return e.value}function MG(e,t,n){const i=t.get("selections");if(!(i!=null&&i.length))return;const r=ge(n.field);return i.map(a=>`(!length(data(${ge(Dt(a)+Kl)})) || (${a}[${r}] && indexof(${a}[${r}], datum.value) >= 0))`).join(" || ")}const x8={direction:({direction:e})=>e,format:({fieldOrDatumDef:e,legend:t,config:n})=>{const{format:i,formatType:r}=t;return Pj(e,e.type,i,r,n,!1)},formatType:({legend:e,fieldOrDatumDef:t,scaleType:n})=>{const{formatType:i}=e;return qj(i,t,n)},gradientLength:e=>{const{legend:t,legendConfig:n}=e;return t.gradientLength??n.gradientLength??V2e(e)},labelOverlap:({legend:e,legendConfig:t,scaleType:n})=>e.labelOverlap??t.labelOverlap??W2e(n),symbolType:({legend:e,markDef:t,channel:n,encoding:i})=>e.symbolType??j2e(t.type,n,i.shape,t.shape),title:({fieldOrDatumDef:e,config:t})=>Rf(e,t,{allowDisabling:!0}),type:({legendType:e,scaleType:t,channel:n})=>{if(Df(n)&&za(t)){if(e==="gradient")return}else if(e==="symbol")return;return e},values:({fieldOrDatumDef:e,legend:t})=>q2e(t,e)};function q2e(e,t){const n=e.values;if(re(n))return eH(t,n);if(Ce(n))return n}function j2e(e,t,n,i){if(t!=="shape"){const r=ZA(n)??i;if(r)return r}switch(e){case"bar":case"rect":case"image":case"square":return"square";case"line":case"trail":case"rule":return"stroke";case"arc":case"point":case"circle":case"tick":case"geoshape":case"area":case"text":return"circle"}}function H2e(e){const{legend:t}=e;return Wt(t.type,G2e(e))}function G2e({channel:e,timeUnit:t,scaleType:n}){if(Df(e)){if(Ve(["quarter","month","day"],t))return"symbol";if(za(n))return"gradient"}return"symbol"}function Y2e({legendConfig:e,legendType:t,orient:n,legend:i}){return i.direction??e[t?"gradientDirection":"symbolDirection"]??X2e(n,t)}function X2e(e,t){switch(e){case"top":case"bottom":return"horizontal";case"left":case"right":case"none":case void 0:return;default:return t==="gradient"?"horizontal":void 0}}function V2e({legendConfig:e,model:t,direction:n,orient:i,scaleType:r}){const{gradientHorizontalMaxLength:a,gradientHorizontalMinLength:s,gradientVerticalMaxLength:o,gradientVerticalMinLength:l}=e;if(za(r))return n==="horizontal"?i==="top"||i==="bottom"?E8(t,"width",s,a):s:E8(t,"height",l,o)}function E8(e,t,n,i){return{signal:`clamp(${e.getSizeSignalRef(t).signal}, ${n}, ${i})`}}function W2e(e){if(Ve(["quantile","threshold","log","symlog"],e))return"greedy"}function kG(e){const t=Ft(e)?Q2e(e):eEe(e);return e.component.legends=t,t}function Q2e(e){const{encoding:t}=e,n={};for(const i of[Fi,...SH]){const r=cn(t[i]);!r||!e.getScaleComponent(i)||i===Li&&he(r)&&r.type===Ud||(n[i]=J2e(e,i))}return n}function Z2e(e,t){const n=e.scaleName(t);if(e.mark==="trail"){if(t==="color")return{stroke:n};if(t==="size")return{strokeWidth:n}}return t==="color"?e.markDef.filled?{fill:n}:{stroke:n}:{[t]:n}}function K2e(e,t,n,i){switch(t){case"disable":return n!==void 0;case"values":return!!(n!=null&&n.values);case"title":if(t==="title"&&e===(i==null?void 0:i.title))return!0}return e===(n||{})[t]}function J2e(e,t){var $;let n=e.legend(t);const{markDef:i,encoding:r,config:a}=e,s=a.legend,o=new L2e({},Z2e(e,t));u2e(e,t,o);const l=n!==void 0?!n:s.disable;if(o.set("disable",l,n!==void 0),l)return o;n=n||{};const f=e.getScaleComponent(t).get("type"),d=cn(r[t]),g=he(d)?($=An(d.timeUnit))==null?void 0:$.unit:void 0,p=n.orient||a.legend.orient||"right",y=H2e({legend:n,channel:t,timeUnit:g,scaleType:f}),v=Y2e({legend:n,legendType:y,orient:p,legendConfig:s}),b={legend:n,channel:t,model:e,markDef:i,encoding:r,fieldOrDatumDef:d,legendConfig:s,config:a,scaleType:f,orient:p,legendType:y,direction:v};for(const C of $G){if(y==="gradient"&&C.startsWith("symbol")||y==="symbol"&&C.startsWith("gradient"))continue;const k=C in x8?x8[C](b):n[C];if(k!==void 0){const M=K2e(k,C,n,e.fieldDef(t));(M||a.legend[C]===void 0)&&o.set(C,k,M)}}const E=(n==null?void 0:n.encoding)??{},_=o.get("selections"),w={},A={fieldOrDatumDef:d,model:e,channel:t,legendCmpt:o,legendType:y};for(const C of["labels","legend","title","symbols","gradient","entries"]){const k=wG(E[C]??{},e),M=C in b8?b8[C](k,A):k;M!==void 0&&!At(M)&&(w[C]={..._!=null&&_.length&&he(d)?{name:`${Dt(d.field)}_legend_${C}`}:{},..._!=null&&_.length?{interactive:!!_}:{},update:M})}return At(w)||o.set("encode",w,!!(n!=null&&n.encoding)),o}function eEe(e){const{legends:t,resolve:n}=e.component;for(const i of e.children){kG(i);for(const r of le(i.component.legends))n.legend[r]=dk(e.component.resolve,r),n.legend[r]==="shared"&&(t[r]=OG(t[r],i.component.legends[r]),t[r]||(n.legend[r]="independent",delete t[r]))}for(const i of le(t))for(const r of e.children)r.component.legends[i]&&n.legend[i]==="shared"&&delete r.component.legends[i];return t}function OG(e,t){var a,s,o,l;if(!e)return t.clone();const n=e.getWithExplicit("orient"),i=t.getWithExplicit("orient");if(n.explicit&&i.explicit&&n.value!==i.value)return;let r=!1;for(const f of $G){const d=vu(e.getWithExplicit(f),t.getWithExplicit(f),f,"legend",(g,p)=>{switch(f){case"symbolType":return tEe(g,p);case"title":return sj(g,p);case"type":return r=!0,Qi("symbol")}return mx(g,p,f,"legend")});e.setWithExplicit(f,d)}return r&&((s=(a=e.implicit)==null?void 0:a.encode)!=null&&s.gradient&&gv(e.implicit,["encode","gradient"]),(l=(o=e.explicit)==null?void 0:o.encode)!=null&&l.gradient&&gv(e.explicit,["encode","gradient"])),e}function tEe(e,t){return t.value==="circle"?t:e}function nEe(e,t,n,i){var r,a;e.encode??(e.encode={}),(r=e.encode)[t]??(r[t]={}),(a=e.encode[t]).update??(a.update={}),e.encode[t].update[n]=i}function DG(e){const t=e.component.legends,n={};for(const r of le(t)){const a=e.getScaleComponent(r),s=dt(a.get("domains"));if(n[s])for(const o of n[s])OG(o,t[r])||n[s].push(t[r]);else n[s]=[t[r].clone()]}return nn(n).flat().map(r=>iEe(r,e.config)).filter(r=>r!==void 0)}function iEe(e,t){var s,o,l;const{disable:n,labelExpr:i,selections:r,...a}=e.combine();if(!n){if(t.aria===!1&&a.aria==null&&(a.aria=!1),(s=a.encode)!=null&&s.symbols){const f=a.encode.symbols.update;f.fill&&f.fill.value!=="transparent"&&!f.stroke&&!a.stroke&&(f.stroke={value:"transparent"});for(const d of SH)a[d]&&delete f[d]}if(a.title||delete a.title,i!==void 0){let f=i;(l=(o=a.encode)==null?void 0:o.labels)!=null&&l.update&&Ce(a.encode.labels.update.text)&&(f=Hl(i,"datum.label",a.encode.labels.update.text.signal)),nEe(a,"labels","text",{signal:f})}return a}}function rEe(e){return jd(e)||vk(e)?aEe(e):RG(e)}function aEe(e){return e.children.reduce((t,n)=>t.concat(n.assembleProjections()),RG(e))}function RG(e){const t=e.component.projection;if(!t||t.merged)return[];const n=t.combine(),{name:i}=n;if(t.data){const r={signal:`[${t.size.map(s=>s.signal).join(", ")}]`},a=t.data.reduce((s,o)=>{const l=Ce(o)?o.signal:`data('${e.lookupDataSource(o)}')`;return Ve(s,l)||s.push(l),s},[]);if(a.length<=0)throw new Error("Projection's fit didn't find any data sources");return[{name:i,size:r,fit:{signal:a.length>1?`[${a.join(", ")}]`:a[0]},...n}]}else return[{name:i,translate:{signal:"[width / 2, height / 2]"},...n}]}const sEe=["type","clipAngle","clipExtent","center","rotate","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];class NG extends uo{constructor(n,i,r,a){super({...i},{name:n});oe(this,"specifiedProjection");oe(this,"size");oe(this,"data");oe(this,"merged",!1);this.specifiedProjection=i,this.size=r,this.data=a}get isFit(){return!!this.data}}function zG(e){e.component.projection=Ft(e)?oEe(e):cEe(e)}function oEe(e){if(e.hasProjection){const t=Rn(e.specifiedProjection),n=!(t&&(t.scale!=null||t.translate!=null)),i=n?[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]:void 0,r=n?uEe(e):void 0,a=new NG(e.projectionName(!0),{...Rn(e.config.projection),...t},i,r);return a.get("type")||a.set("type","equalEarth",!1),a}}function uEe(e){const t=[],{encoding:n}=e;for(const i of[[ya,ma],[Fr,va]])(cn(n[i[0]])||cn(n[i[1]]))&&t.push({signal:e.getName(`geojson_${t.length}`)});return e.channelHasField(Li)&&e.typedFieldDef(Li).type===Ud&&t.push({signal:e.getName(`geojson_${t.length}`)}),t.length===0&&t.push(e.requestDataName(Lt.Main)),t}function lEe(e,t){const n=iM(sEe,r=>!!(!_e(e.explicit,r)&&!_e(t.explicit,r)||_e(e.explicit,r)&&_e(t.explicit,r)&&tr(e.get(r),t.get(r))));if(tr(e.size,t.size)){if(n)return e;if(tr(e.explicit,{}))return t;if(tr(t.explicit,{}))return e}return null}function cEe(e){if(e.children.length===0)return;let t;for(const i of e.children)zG(i);const n=iM(e.children,i=>{const r=i.component.projection;if(r)if(t){const a=lEe(t,r);return a&&(t=a),!!a}else return t=r,!0;else return!0});if(t&&n){const i=e.projectionName(!0),r=new NG(i,t.specifiedProjection,t.size,Le(t.data));for(const a of e.children){const s=a.component.projection;s&&(s.isFit&&r.data.push(...a.component.projection.data),a.renameProjection(s.get("name"),i),s.merged=!0)}return r}}function fEe(e,t,n,i){if(v0(t,n)){const r=Ft(e)?e.axis(n)??e.legend(n)??{}:{},a=me(t,{expr:"datum"}),s=me(t,{expr:"datum",binSuffix:"end"});return{formulaAs:me(t,{binSuffix:"range",forAs:!0}),formula:g0(a,s,r.format,r.formatType,i)}}return{}}function FG(e,t){return`${Kq(e)}_${t}`}function dEe(e,t){return{signal:e.getName(`${t}_bins`),extentSignal:e.getName(`${t}_extent`)}}function hk(e,t,n){const i=cx(n,void 0)??{},r=FG(i,t);return e.getName(`${r}_bins`)}function hEe(e){return"as"in e}function S8(e,t,n){let i,r;hEe(e)?i=ve(e.as)?[e.as,`${e.as}_end`]:[e.as[0],e.as[1]]:i=[me(e,{forAs:!0}),me(e,{binSuffix:"end",forAs:!0})];const a={...cx(t,void 0)},s=FG(a,e.field),{signal:o,extentSignal:l}=dEe(n,s);if(Jb(a.extent)){const d=a.extent;r=gG(n,d.param,d),delete a.extent}const f={bin:a,field:e.field,as:[i],...o?{signal:o}:{},...l?{extentSignal:l}:{},...r?{span:r}:{}};return{key:s,binComponent:f}}class Pa extends yt{constructor(n,i){super(n);oe(this,"bins");this.bins=i}clone(){return new Pa(null,Le(this.bins))}static makeFromEncoding(n,i){const r=i.reduceFieldDef((a,s,o)=>{if(bi(s)&&Ct(s.bin)){const{key:l,binComponent:f}=S8(s,s.bin,i);a[l]={...f,...a[l],...fEe(i,s,o,i.config)}}return a},{});return At(r)?null:new Pa(n,r)}static makeFromTransform(n,i,r){const{key:a,binComponent:s}=S8(i,i.bin,r);return new Pa(n,{[a]:s})}merge(n,i){for(const r of le(n.bins))r in this.bins?(i(n.bins[r].signal,this.bins[r].signal),this.bins[r].as=Na([...this.bins[r].as,...n.bins[r].as],Ze)):this.bins[r]=n.bins[r];for(const r of n.children)n.removeChild(r),r.parent=this;n.remove()}producedFields(){return new Set(nn(this.bins).map(n=>n.as).flat(2))}dependentFields(){return new Set(nn(this.bins).map(n=>n.field))}hash(){return`Bin ${Ze(this.bins)}`}assemble(){return nn(this.bins).flatMap(n=>{const i=[],[r,...a]=n.as,{extent:s,...o}=n.bin,l={type:"bin",field:zr(n.field),as:r,signal:n.signal,...Jb(s)?{extent:null}:{extent:s},...n.span?{span:{signal:`span(${n.span})`}}:{},...o};!s&&n.extentSignal&&(i.push({type:"extent",field:zr(n.field),signal:n.extentSignal}),l.extent={signal:n.extentSignal}),i.push(l);for(const f of a)for(let d=0;d<2;d++)i.push({type:"formula",expr:me({field:r[d]},{expr:"datum"}),as:f[d]});return n.formula&&i.push({type:"formula",expr:n.formula,as:n.formulaAs}),i})}}function gEe(e,t,n,i){var a;const r=Ft(i)?i.encoding[os(t)]:void 0;if(bi(n)&&Ft(i)&&Yj(n,r,i.markDef,i.config)){e.add(me(n,{})),e.add(me(n,{suffix:"end"}));const{mark:s,markDef:o,config:l}=i,f=yu({fieldDef:n,markDef:o,config:l});Ap(s)&&f!==.5&&Qt(t)&&(e.add(me(n,{suffix:yx})),e.add(me(n,{suffix:vx}))),n.bin&&v0(n,t)&&e.add(me(n,{binSuffix:"range"}))}else if(jq(t)){const s=qq(t);e.add(i.getName(s))}else e.add(me(n));return pc(n)&&tve((a=n.scale)==null?void 0:a.range)&&e.add(n.scale.range.field),e}function pEe(e,t){for(const n of le(t)){const i=t[n];for(const r of le(i))n in e?e[n][r]=new Set([...e[n][r]??[],...i[r]]):e[n]={[r]:i[r]}}}class ia extends yt{constructor(n,i,r){super(n);oe(this,"dimensions");oe(this,"measures");this.dimensions=i,this.measures=r}clone(){return new ia(null,new Set(this.dimensions),Le(this.measures))}get groupBy(){return this.dimensions}static makeFromEncoding(n,i){let r=!1;i.forEachFieldDef(o=>{o.aggregate&&(r=!0)});const a={},s=new Set;return!r||(i.forEachFieldDef((o,l)=>{const{aggregate:f,field:d}=o;if(f)if(f==="count")a["*"]??(a["*"]={}),a["*"].count=new Set([me(o,{forAs:!0})]);else{if(Zs(f)||Ru(f)){const g=Zs(f)?"argmin":"argmax",p=f[g];a[p]??(a[p]={}),a[p][g]=new Set([me({op:g,field:p},{forAs:!0})])}else a[d]??(a[d]={}),a[d][f]=new Set([me(o,{forAs:!0})]);us(l)&&i.scaleDomain(l)==="unaggregated"&&(a[d]??(a[d]={}),a[d].min=new Set([me({field:d,aggregate:"min"},{forAs:!0})]),a[d].max=new Set([me({field:d,aggregate:"max"},{forAs:!0})]))}else gEe(s,l,o,i)}),s.size+le(a).length===0)?null:new ia(n,s,a)}static makeFromTransform(n,i){var s;const r=new Set,a={};for(const o of i.aggregate){const{op:l,field:f,as:d}=o;l&&(l==="count"?(a["*"]??(a["*"]={}),a["*"].count=new Set([d||me(o,{forAs:!0})])):(a[f]??(a[f]={}),(s=a[f])[l]??(s[l]=new Set),a[f][l].add(d||me(o,{forAs:!0}))))}for(const o of i.groupby??[])r.add(o);return r.size+le(a).length===0?null:new ia(n,r,a)}merge(n){return Nq(this.dimensions,n.dimensions)?(pEe(this.measures,n.measures),!0):($ye("different dimensions, cannot merge"),!1)}addDimensions(n){n.forEach(this.dimensions.add,this.dimensions)}dependentFields(){return new Set([...this.dimensions,...le(this.measures)])}producedFields(){const n=new Set;for(const i of le(this.measures))for(const r of le(this.measures[i])){const a=this.measures[i][r];a.size===0?n.add(`${r}_${i}`):a.forEach(n.add,n)}return n}hash(){return`Aggregate ${Ze({dimensions:this.dimensions,measures:this.measures})}`}assemble(){const n=[],i=[],r=[];for(const s of le(this.measures))for(const o of le(this.measures[s]))for(const l of this.measures[s][o])r.push(l),n.push(o),i.push(s==="*"?null:zr(s));return{type:"aggregate",groupby:[...this.dimensions].map(zr),ops:n,fields:i,as:r}}}class Pd extends yt{constructor(n,i,r,a){super(n);oe(this,"model");oe(this,"name");oe(this,"data");oe(this,"column");oe(this,"row");oe(this,"facet");oe(this,"childModel");this.model=i,this.name=r,this.data=a;for(const s of Cr){const o=i.facet[s];if(o){const{bin:l,sort:f}=o;this[s]={name:i.getName(`${s}_domain`),fields:[me(o),...Ct(l)?[me(o,{binSuffix:"end"})]:[]],...Gs(f)?{sortField:f}:re(f)?{sortIndexField:pd(o,s)}:{}}}}this.childModel=i.child}hash(){let n="Facet";for(const i of Cr)this[i]&&(n+=` ${i.charAt(0)}:${Ze(this[i])}`);return n}get fields(){var i;const n=[];for(const r of Cr)(i=this[r])!=null&&i.fields&&n.push(...this[r].fields);return n}dependentFields(){const n=new Set(this.fields);for(const i of Cr)this[i]&&(this[i].sortField&&n.add(this[i].sortField.field),this[i].sortIndexField&&n.add(this[i].sortIndexField));return n}producedFields(){return new Set}getSource(){return this.name}getChildIndependentFieldsWithStep(){const n={};for(const i of so){const r=this.childModel.component.scales[i];if(r&&!r.merged){const a=r.get("type"),s=r.get("range");if($n(a)&&dc(s)){const o=_x(this.childModel,i),l=yk(o);l?n[i]=l:de(yM(i))}}}return n}assembleRowColumnHeaderData(n,i,r){const a={row:"y",column:"x",facet:void 0}[n],s=[],o=[],l=[];a&&r&&r[a]&&(i?(s.push(`distinct_${r[a]}`),o.push("max")):(s.push(r[a]),o.push("distinct")),l.push(`distinct_${r[a]}`));const{sortField:f,sortIndexField:d}=this[n];if(f){const{op:g=ox,field:p}=f;s.push(p),o.push(g),l.push(me(f,{forAs:!0}))}else d&&(s.push(d),o.push("max"),l.push(d));return{name:this[n].name,source:i??this.data,transform:[{type:"aggregate",groupby:this[n].fields,...s.length?{fields:s,ops:o,as:l}:{}}]}}assembleFacetHeaderData(n){var f,d;const{columns:i}=this.model.layout,{layoutHeaders:r}=this.model.component,a=[],s={};for(const g of lk){for(const p of ck){const y=((f=r[g])==null?void 0:f[p])??[];for(const v of y)if(((d=v.axes)==null?void 0:d.length)>0){s[g]=!0;break}}if(s[g]){const p=`length(data("${this.facet.name}"))`,y=g==="row"?i?{signal:`ceil(${p} / ${i})`}:1:i?{signal:`min(${p}, ${i})`}:{signal:p};a.push({name:`${this.facet.name}_${g}`,transform:[{type:"sequence",start:0,stop:y}]})}}const{row:o,column:l}=s;return(o||l)&&a.unshift(this.assembleRowColumnHeaderData("facet",null,n)),a}assemble(){const n=[];let i=null;const r=this.getChildIndependentFieldsWithStep(),{column:a,row:s,facet:o}=this;if(a&&s&&(r.x||r.y)){i=`cross_${this.column.name}_${this.row.name}`;const l=[].concat(r.x??[],r.y??[]),f=l.map(()=>"distinct");n.push({name:i,source:this.data,transform:[{type:"aggregate",groupby:this.fields,fields:l,ops:f}]})}for(const l of[Hs,js])this[l]&&n.push(this.assembleRowColumnHeaderData(l,i,r));if(o){const l=this.assembleFacetHeaderData(r);l&&n.push(...l)}return n}}function _8(e){return e.startsWith("'")&&e.endsWith("'")||e.startsWith('"')&&e.endsWith('"')?e.slice(1,-1):e}function mEe(e,t){const n=sM(e);if(t==="number")return`toNumber(${n})`;if(t==="boolean")return`toBoolean(${n})`;if(t==="string")return`toString(${n})`;if(t==="date")return`toDate(${n})`;if(t==="flatten")return n;if(t.startsWith("date:")){const i=_8(t.slice(5,t.length));return`timeParse(${n},'${i}')`}else if(t.startsWith("utc:")){const i=_8(t.slice(4,t.length));return`utcParse(${n},'${i}')`}else return de(z1e(t)),null}function yEe(e){const t={};return Q1(e.filter,n=>{if(_j(n)){let i=null;_M(n)?i=Ji(n.equal):AM(n)?i=Ji(n.lte):wM(n)?i=Ji(n.lt):$M(n)?i=Ji(n.gt):CM(n)?i=Ji(n.gte):TM(n)?i=n.range[0]:MM(n)&&(i=(n.oneOf??n.in)[0]),i&&(hc(i)?t[n.field]="date":st(i)?t[n.field]="number":ve(i)&&(t[n.field]="string")),n.timeUnit&&(t[n.field]="date")}}),t}function vEe(e){const t={};function n(i){fd(i)?t[i.field]="date":i.type==="quantitative"&&l1e(i.aggregate)?t[i.field]="number":ad(i.field)>1?i.field in t||(t[i.field]="flatten"):pc(i)&&Gs(i.sort)&&ad(i.sort.field)>1&&(i.sort.field in t||(t[i.sort.field]="flatten"))}if((Ft(e)||sr(e))&&e.forEachFieldDef((i,r)=>{if(bi(i))n(i);else{const a=cc(r),s=e.fieldDef(a);n({...i,type:s.type})}}),Ft(e)){const{mark:i,markDef:r,encoding:a}=e;if(Nu(i)&&!e.encoding.order){const s=r.orient==="horizontal"?"y":"x",o=a[s];he(o)&&o.type==="quantitative"&&!(o.field in t)&&(t[o.field]="number")}}return t}function bEe(e){const t={};if(Ft(e)&&e.component.selection)for(const n of le(e.component.selection)){const i=e.component.selection[n];for(const r of i.project.items)!r.channel&&ad(r.field)>1&&(t[r.field]="flatten")}return t}class Zn extends yt{constructor(n,i){super(n);oe(this,"_parse");this._parse=i}clone(){return new Zn(null,Le(this._parse))}hash(){return`Parse ${Ze(this._parse)}`}static makeExplicit(n,i,r){var o;let a={};const s=i.data;return!ru(s)&&((o=s==null?void 0:s.format)!=null&&o.parse)&&(a=s.format.parse),this.makeWithAncestors(n,a,{},r)}static makeWithAncestors(n,i,r,a){for(const l of le(r)){const f=a.getWithExplicit(l);f.value!==void 0&&(f.explicit||f.value===r[l]||f.value==="derived"||r[l]==="flatten"?delete r[l]:de(Rz(l,r[l],f.value)))}for(const l of le(i)){const f=a.get(l);f!==void 0&&(f===i[l]?delete i[l]:de(Rz(l,i[l],f)))}const s=new uo(i,r);a.copyAll(s);const o={};for(const l of le(s.combine())){const f=s.get(l);f!==null&&(o[l]=f)}return le(o).length===0||a.parseNothing?null:new Zn(n,o)}get parse(){return this._parse}merge(n){this._parse={...this._parse,...n.parse},n.remove()}assembleFormatParse(){const n={};for(const i of le(this._parse)){const r=this._parse[i];ad(i)===1&&(n[i]=r)}return n}producedFields(){return new Set(le(this._parse))}dependentFields(){return new Set(le(this._parse))}assembleTransforms(n=!1){return le(this._parse).filter(i=>n?ad(i)>1:!0).map(i=>{const r=mEe(i,this._parse[i]);return r?{type:"formula",expr:r,as:Fd(i)}:null}).filter(i=>i!==null)}}class bu extends yt{clone(){return new bu(null)}constructor(t){super(t)}dependentFields(){return new Set}producedFields(){return new Set([ca])}hash(){return"Identifier"}assemble(){return{type:"identifier",as:ca}}}class E0 extends yt{constructor(n,i){super(n);oe(this,"params");this.params=i}clone(){return new E0(null,this.params)}dependentFields(){return new Set}producedFields(){}hash(){return`Graticule ${Ze(this.params)}`}assemble(){return{type:"graticule",...this.params===!0?{}:this.params}}}class S0 extends yt{constructor(n,i){super(n);oe(this,"params");this.params=i}clone(){return new S0(null,this.params)}dependentFields(){return new Set}producedFields(){return new Set([this.params.as??"data"])}hash(){return`Hash ${Ze(this.params)}`}assemble(){return{type:"sequence",...this.params}}}class Jl extends yt{constructor(n){super(null);oe(this,"_data");oe(this,"_name");oe(this,"_generator");n??(n={name:"source"});let i;if(ru(n)||(i=n.format?{...ar(n.format,["parse"])}:{}),$p(n))this._data={values:n.values};else if(dd(n)){if(this._data={url:n.url},!i.type){let r=/(?:\.([^.]+))?$/.exec(n.url)[1];Ve(["json","csv","tsv","dsv","topojson"],r)||(r="json"),i.type=r}}else IH(n)?this._data={values:[{type:"Sphere"}]}:(UH(n)||ru(n))&&(this._data={});this._generator=ru(n),n.name&&(this._name=n.name),i&&!At(i)&&(this._data.format=i)}dependentFields(){return new Set}producedFields(){}get data(){return this._data}hasName(){return!!this._name}get isGenerator(){return this._generator}get dataName(){return this._name}set dataName(n){this._name=n}set parent(n){throw new Error("Source nodes have to be roots.")}remove(){throw new Error("Source nodes are roots and cannot be removed.")}hash(){throw new Error("Cannot hash sources")}assemble(){return{name:this._name,...this._data,transform:[]}}}function gk(e){return e instanceof Jl||e instanceof E0||e instanceof S0}var Ff;class pk{constructor(){TN(this,Ff);VE(this,Ff,!1)}setModified(){VE(this,Ff,!0)}get modifiedFlag(){return CN(this,Ff)}}Ff=new WeakMap;class mc extends pk{getNodeDepths(t,n,i){i.set(t,n);for(const r of t.children)this.getNodeDepths(r,n+1,i);return i}optimize(t){const i=[...this.getNodeDepths(t,0,new Map).entries()].sort((r,a)=>a[1]-r[1]);for(const r of i)this.run(r[0]);return this.modifiedFlag}}class mk extends pk{optimize(t){this.run(t);for(const n of t.children)this.optimize(n);return this.modifiedFlag}}class xEe extends mk{mergeNodes(t,n){const i=n.shift();for(const r of n)t.removeChild(r),r.parent=i,r.remove()}run(t){const n=t.children.map(r=>r.hash()),i={};for(let r=0;r<n.length;r++)i[n[r]]===void 0?i[n[r]]=[t.children[r]]:i[n[r]].push(t.children[r]);for(const r of le(i))i[r].length>1&&(this.setModified(),this.mergeNodes(t,i[r]))}}class EEe extends mk{constructor(n){super();oe(this,"requiresSelectionId");this.requiresSelectionId=n&&uk(n)}run(n){n instanceof bu&&(this.requiresSelectionId&&(gk(n.parent)||n.parent instanceof ia||n.parent instanceof Zn)||(this.setModified(),n.remove()))}}class SEe extends pk{optimize(t){return this.run(t,new Set),this.modifiedFlag}run(t,n){let i=new Set;t instanceof Ba&&(i=t.producedFields(),rM(i,n)&&(this.setModified(),t.removeFormulas(n),t.producedFields.length===0&&t.remove()));for(const r of t.children)this.run(r,new Set([...n,...i]))}}class _Ee extends mk{constructor(){super()}run(t){t instanceof Di&&!t.isRequired()&&(this.setModified(),t.remove())}}class wEe extends mc{run(t){if(!gk(t)&&!(t.numChildren()>1)){for(const n of t.children)if(n instanceof Zn)if(t instanceof Zn)this.setModified(),t.merge(n);else{if(aM(t.producedFields(),n.dependentFields()))continue;this.setModified(),n.swapWithParent()}}}}class AEe extends mc{run(t){const n=[...t.children],i=t.children.filter(r=>r instanceof Zn);if(t.numChildren()>1&&i.length>=1){const r={},a=new Set;for(const s of i){const o=s.parse;for(const l of le(o))l in r?r[l]!==o[l]&&a.add(l):r[l]=o[l]}for(const s of a)delete r[s];if(!At(r)){this.setModified();const s=new Zn(t,r);for(const o of n){if(o instanceof Zn)for(const l of le(r))delete o.parse[l];t.removeChild(o),o.parent=s,o instanceof Zn&&le(o.parse).length===0&&o.remove()}}}}}class $Ee extends mc{run(t){t instanceof Di||t.numChildren()>0||t instanceof Pd||t instanceof Jl||(this.setModified(),t.remove())}}class CEe extends mc{run(t){const n=t.children.filter(r=>r instanceof Ba),i=n.pop();for(const r of n)this.setModified(),i.merge(r)}}class TEe extends mc{run(t){const n=t.children.filter(r=>r instanceof ia),i={};for(const r of n){const a=Ze(r.groupBy);a in i||(i[a]=[]),i[a].push(r)}for(const r of le(i)){const a=i[r];if(a.length>1){const s=a.pop();for(const o of a)s.merge(o)&&(t.removeChild(o),o.parent=s,o.remove(),this.setModified())}}}}class MEe extends mc{constructor(n){super();oe(this,"model");this.model=n}run(n){const i=!(gk(n)||n instanceof Id||n instanceof Zn||n instanceof bu),r=[],a=[];for(const s of n.children)s instanceof Pa&&(i&&!aM(n.producedFields(),s.dependentFields())?r.push(s):a.push(s));if(r.length>0){const s=r.pop();for(const o of r)s.merge(o,this.model.renameSignal.bind(this.model));this.setModified(),n instanceof Pa?n.merge(s,this.model.renameSignal.bind(this.model)):s.swapWithParent()}if(a.length>1){const s=a.pop();for(const o of a)s.merge(o,this.model.renameSignal.bind(this.model));this.setModified()}}}class kEe extends mc{run(t){const n=[...t.children];if(!rd(n,s=>s instanceof Di)||t.numChildren()<=1)return;const r=[];let a;for(const s of n)if(s instanceof Di){let o=s;for(;o.numChildren()===1;){const[l]=o.children;if(l instanceof Di)o=l;else break}r.push(...o.children),a?(t.removeChild(s),s.parent=a.parent,a.parent.removeChild(a),a.parent=o,this.setModified()):a=o}else r.push(s);if(r.length){this.setModified();for(const s of r)s.parent.removeChild(s),s.parent=a}}}class yc extends yt{constructor(n,i){super(n);oe(this,"transform");this.transform=i}clone(){return new yc(null,Le(this.transform))}addDimensions(n){this.transform.groupby=Na(this.transform.groupby.concat(n),i=>i)}dependentFields(){const n=new Set;return this.transform.groupby&&this.transform.groupby.forEach(n.add,n),this.transform.joinaggregate.map(i=>i.field).filter(i=>i!==void 0).forEach(n.add,n),n}producedFields(){return new Set(this.transform.joinaggregate.map(this.getDefaultName))}getDefaultName(n){return n.as??me(n)}hash(){return`JoinAggregateTransform ${Ze(this.transform)}`}assemble(){const n=[],i=[],r=[];for(const s of this.transform.joinaggregate)i.push(s.op),r.push(this.getDefaultName(s)),n.push(s.field===void 0?null:s.field);const a=this.transform.groupby;return{type:"joinaggregate",as:r,ops:i,fields:n,...a!==void 0?{groupby:a}:{}}}}class yd extends yt{constructor(n,i){super(n);oe(this,"filter");this.filter=i}clone(){return new yd(null,{...this.filter})}static make(n,i,r){const{config:a,markDef:s}=i,{marks:o,scales:l}=r;if(o==="include-invalid-values"&&l==="include-invalid-values")return null;const f=i.reduceFieldDef((d,g,p)=>{const y=us(p)&&i.getScaleComponent(p);if(y){const v=y.get("type"),{aggregate:b}=g,E=FM({scaleChannel:p,markDef:s,config:a,scaleType:v,isCountAggregate:Kb(b)});E!=="show"&&E!=="always-valid"&&(d[g.field]=g)}return d},{});return le(f).length?new yd(n,f):null}dependentFields(){return new Set(le(this.filter))}producedFields(){return new Set}hash(){return`FilterInvalid ${Ze(this.filter)}`}assemble(){const n=le(this.filter).reduce((i,r)=>{const a=this.filter[r],s=me(a,{expr:"datum"});return a!==null&&(a.type==="temporal"?i.push(`(isDate(${s}) || (${KA(s)}))`):a.type==="quantitative"&&i.push(KA(s))),i},[]);return n.length>0?{type:"filter",expr:n.join(" && ")}:null}}function KA(e){return`isValid(${e}) && isFinite(+${e})`}function OEe(e){return e.stack.stackBy.reduce((t,n)=>{const i=n.fieldDef,r=me(i);return r&&t.push(r),t},[])}function DEe(e){return re(e)&&e.every(t=>ve(t))&&e.length>1}class Xs extends yt{constructor(n,i){super(n);oe(this,"_stack");this._stack=i}clone(){return new Xs(null,Le(this._stack))}static makeFromTransform(n,i){const{stack:r,groupby:a,as:s,offset:o="zero"}=i,l=[],f=[];if(i.sort!==void 0)for(const p of i.sort)l.push(p.field),f.push(Wt(p.order,"ascending"));const d={field:l,order:f};let g;return DEe(s)?g=s:ve(s)?g=[s,`${s}_end`]:g=[`${i.stack}_start`,`${i.stack}_end`],new Xs(n,{dimensionFieldDefs:[],stackField:r,groupby:a,offset:o,sort:d,facetby:[],as:g})}static makeFromEncoding(n,i){const r=i.stack,{encoding:a}=i;if(!r)return null;const{groupbyChannels:s,fieldChannel:o,offset:l,impute:f}=r,d=s.map(v=>{const b=a[v];return la(b)}).filter(v=>!!v),g=OEe(i),p=i.encoding.order;let y;if(re(p)||he(p))y=ij(p);else{const v=Xj(p)?p.sort:o==="y"?"descending":"ascending";y=g.reduce((b,E)=>(b.field.includes(E)||(b.field.push(E),b.order.push(v)),b),{field:[],order:[]})}return new Xs(n,{dimensionFieldDefs:d,stackField:i.vgField(o),facetby:[],stackby:g,sort:y,offset:l,impute:f,as:[i.vgField(o,{suffix:"start",forAs:!0}),i.vgField(o,{suffix:"end",forAs:!0})]})}get stack(){return this._stack}addDimensions(n){this._stack.facetby.push(...n)}dependentFields(){const n=new Set;return n.add(this._stack.stackField),this.getGroupbyFields().forEach(n.add,n),this._stack.facetby.forEach(n.add,n),this._stack.sort.field.forEach(n.add,n),n}producedFields(){return new Set(this._stack.as)}hash(){return`Stack ${Ze(this._stack)}`}getGroupbyFields(){const{dimensionFieldDefs:n,impute:i,groupby:r}=this._stack;return n.length>0?n.map(a=>a.bin?i?[me(a,{binSuffix:"mid"})]:[me(a,{}),me(a,{binSuffix:"end"})]:[me(a)]).flat():r??[]}assemble(){const n=[],{facetby:i,dimensionFieldDefs:r,stackField:a,stackby:s,sort:o,offset:l,impute:f,as:d}=this._stack;if(f)for(const g of r){const{bandPosition:p=.5,bin:y}=g;if(y){const v=me(g,{expr:"datum"}),b=me(g,{expr:"datum",binSuffix:"end"});n.push({type:"formula",expr:`${KA(v)} ? ${p}*${v}+${1-p}*${b} : ${v}`,as:me(g,{binSuffix:"mid",forAs:!0})})}n.push({type:"impute",field:a,groupby:[...s,...i],key:me(g,{binSuffix:"mid"}),method:"value",value:0})}return n.push({type:"stack",groupby:[...this.getGroupbyFields(),...i],field:a,sort:o,as:d,offset:l}),n}}class qd extends yt{constructor(n,i){super(n);oe(this,"transform");this.transform=i}clone(){return new qd(null,Le(this.transform))}addDimensions(n){this.transform.groupby=Na(this.transform.groupby.concat(n),i=>i)}dependentFields(){const n=new Set;return(this.transform.groupby??[]).forEach(n.add,n),(this.transform.sort??[]).forEach(i=>n.add(i.field)),this.transform.window.map(i=>i.field).filter(i=>i!==void 0).forEach(n.add,n),n}producedFields(){return new Set(this.transform.window.map(this.getDefaultName))}getDefaultName(n){return n.as??me(n)}hash(){return`WindowTransform ${Ze(this.transform)}`}assemble(){const n=[],i=[],r=[],a=[];for(const p of this.transform.window)i.push(p.op),r.push(this.getDefaultName(p)),a.push(p.param===void 0?null:p.param),n.push(p.field===void 0?null:p.field);const s=this.transform.frame,o=this.transform.groupby;if(s&&s[0]===null&&s[1]===null&&i.every(p=>pM(p)))return{type:"joinaggregate",as:r,ops:i,fields:n,...o!==void 0?{groupby:o}:{}};const l=[],f=[];if(this.transform.sort!==void 0)for(const p of this.transform.sort)l.push(p.field),f.push(p.order??"ascending");const d={field:l,order:f},g=this.transform.ignorePeers;return{type:"window",params:a,as:r,ops:i,fields:n,sort:d,...g!==void 0?{ignorePeers:g}:{},...o!==void 0?{groupby:o}:{},...s!==void 0?{frame:s}:{}}}}function REe(e){function t(n){if(!(n instanceof Pd)){const i=n.clone();if(i instanceof Di){const r=e$+i.getSource();i.setSource(r),e.model.component.data.outputNodes[r]=i}else(i instanceof ia||i instanceof Xs||i instanceof qd||i instanceof yc)&&i.addDimensions(e.fields);for(const r of n.children.flatMap(t))r.parent=i;return[i]}return n.children.flatMap(t)}return t}function JA(e){if(e instanceof Pd)if(e.numChildren()===1&&!(e.children[0]instanceof Di)){const t=e.children[0];(t instanceof ia||t instanceof Xs||t instanceof qd||t instanceof yc)&&t.addDimensions(e.fields),t.swapWithParent(),JA(e)}else{const t=e.model.component.data.main;LG(t);const n=REe(e),i=e.children.map(n).flat();for(const r of i)r.parent=t}else e.children.map(JA)}function LG(e){if(e instanceof Di&&e.type===Lt.Main&&e.numChildren()===1){const t=e.children[0];t instanceof Pd||(t.swapWithParent(),LG(e))}}const e$="scale_",y1=5;function t$(e){for(const t of e){for(const n of t.children)if(n.parent!==t)return!1;if(!t$(t.children))return!1}return!0}function jr(e,t){let n=!1;for(const i of t)n=e.optimize(i)||n;return n}function w8(e,t,n){let i=e.sources,r=!1;return r=jr(new _Ee,i)||r,r=jr(new EEe(t),i)||r,i=i.filter(a=>a.numChildren()>0),r=jr(new $Ee,i)||r,i=i.filter(a=>a.numChildren()>0),n||(r=jr(new wEe,i)||r,r=jr(new MEe(t),i)||r,r=jr(new SEe,i)||r,r=jr(new AEe,i)||r,r=jr(new TEe,i)||r,r=jr(new CEe,i)||r,r=jr(new xEe,i)||r,r=jr(new kEe,i)||r),e.sources=i,r}function NEe(e,t){t$(e.sources);let n=0,i=0;for(let r=0;r<y1&&w8(e,t,!0);r++)n++;e.sources.map(JA);for(let r=0;r<y1&&w8(e,t,!1);r++)i++;t$(e.sources),Math.max(n,i)===y1&&de(`Maximum optimization runs(${y1}) reached.`)}class bn{constructor(t){oe(this,"signal");Object.defineProperty(this,"signal",{enumerable:!0,get:t})}static fromName(t,n){return new bn(()=>t(n))}}function UG(e){Ft(e)?zEe(e):FEe(e)}function zEe(e){const t=e.component.scales;for(const n of le(t)){const i=UEe(e,n);if(t[n].setWithExplicit("domains",i),IEe(e,n),e.component.data.isFaceted){let a=e;for(;!sr(a)&&a.parent;)a=a.parent;if(a.component.resolve.scale[n]==="shared")for(const o of i.value)Bs(o)&&(o.data=e$+o.data.replace(e$,""))}}}function FEe(e){for(const n of e.children)UG(n);const t=e.component.scales;for(const n of le(t)){let i,r=null;for(const a of e.children){const s=a.component.scales[n];if(s){i===void 0?i=s.getWithExplicit("domains"):i=vu(i,s.getWithExplicit("domains"),"domains","scale",n$);const o=s.get("selectionExtent");r&&o&&r.param!==o.param&&de(T1e),r=o}}t[n].setWithExplicit("domains",i),r&&t[n].set("selectionExtent",r,!0)}}function LEe(e,t,n,i){if(e==="unaggregated"){const{valid:r,reason:a}=A8(t,n);if(!r){de(a);return}}else if(e===void 0&&i.useUnaggregatedDomain){const{valid:r}=A8(t,n);if(r)return"unaggregated"}return e}function UEe(e,t){const n=e.getScaleComponent(t).get("type"),{encoding:i}=e,r=LEe(e.scaleDomain(t),e.typedFieldDef(t),n,e.config.scale);return r!==e.scaleDomain(t)&&(e.specifiedScales[t]={...e.specifiedScales[t],domain:r}),t==="x"&&cn(i.x2)?cn(i.x)?vu(Lo(n,r,e,"x"),Lo(n,r,e,"x2"),"domain","scale",n$):Lo(n,r,e,"x2"):t==="y"&&cn(i.y2)?cn(i.y)?vu(Lo(n,r,e,"y"),Lo(n,r,e,"y2"),"domain","scale",n$):Lo(n,r,e,"y2"):Lo(n,r,e,t)}function BEe(e,t,n){return e.map(i=>({signal:`{data: ${fx(i,{timeUnit:n,type:t})}}`}))}function b_(e,t,n){var r;const i=(r=An(n))==null?void 0:r.unit;return t==="temporal"||i?BEe(e,t,i):[e]}function Lo(e,t,n,i){const{encoding:r,markDef:a,mark:s,config:o,stack:l}=n,f=cn(r[i]),{type:d}=f,g=f.timeUnit,p=Dxe({invalid:Va("invalid",a,o),isPath:Nu(s)});if(eve(t)){const b=Lo(e,void 0,n,i),E=b_(t.unionWith,d,g);return Ma([...E,...b.value])}else{if(Ce(t))return Ma([t]);if(t&&t!=="unaggregated"&&!kj(t))return Ma(b_(t,d,g))}if(l&&i===l.fieldChannel){if(l.offset==="normalize")return Qi([[0,1]]);const b=n.requestDataName(p);return Qi([{data:b,field:n.vgField(i,{suffix:"start"})},{data:b,field:n.vgField(i,{suffix:"end"})}])}const y=us(i)&&he(f)?PEe(n,i,e):void 0;if(ls(f)){const b=b_([f.datum],d,g);return Qi(b)}const v=f;if(t==="unaggregated"){const{field:b}=f;return Qi([{data:n.requestDataName(p),field:me({field:b,aggregate:"min"})},{data:n.requestDataName(p),field:me({field:b,aggregate:"max"})}])}else if(Ct(v.bin)){if($n(e))return Qi(e==="bin-ordinal"?[]:[{data:_p(y)?n.requestDataName(p):n.requestDataName(Lt.Raw),field:n.vgField(i,v0(v,i)?{binSuffix:"range"}:{}),sort:y===!0||!be(y)?{field:n.vgField(i,{}),op:"min"}:y}]);{const{bin:b}=v;if(Ct(b)){const E=hk(n,v.field,b);return Qi([new bn(()=>{const _=n.getSignalName(E);return`[${_}.start, ${_}.stop]`})])}else return Qi([{data:n.requestDataName(p),field:n.vgField(i,{})}])}}else if(v.timeUnit&&Ve(["time","utc"],e)){const b=r[os(i)];if(Yj(v,b,a,o)){const E=n.requestDataName(p),_=yu({fieldDef:v,fieldDef2:b,markDef:a,config:o}),w=Ap(s)&&_!==.5&&Qt(i);return Qi([{data:E,field:n.vgField(i,w?{suffix:yx}:{})},{data:E,field:n.vgField(i,{suffix:w?vx:"end"})}])}}return Qi(y?[{data:_p(y)?n.requestDataName(p):n.requestDataName(Lt.Raw),field:n.vgField(i),sort:y}]:[{data:n.requestDataName(p),field:n.vgField(i)}])}function x_(e,t){const{op:n,field:i,order:r}=e;return{op:n??(t?"sum":ox),...i?{field:zr(i)}:{},...r?{order:r}:{}}}function IEe(e,t){var o;const n=e.component.scales[t],i=e.specifiedScales[t].domain,r=(o=e.fieldDef(t))==null?void 0:o.bin,a=kj(i)?i:void 0,s=fc(r)&&Jb(r.extent)?r.extent:void 0;(a||s)&&n.set("selectionExtent",a??s,!0)}function PEe(e,t,n){if(!$n(n))return;const i=e.fieldDef(t),r=i.sort;if(Hj(r))return{op:"min",field:pd(i,t),order:"ascending"};const{stack:a}=e,s=a?new Set([...a.groupbyFields,...a.stackBy.map(o=>o.fieldDef.field)]):void 0;if(Gs(r)){const o=a&&!s.has(r.field);return x_(r,o)}else if(Dve(r)){const{encoding:o,order:l}=r,f=e.fieldDef(o),{aggregate:d,field:g}=f,p=a&&!s.has(g);if(Zs(d)||Ru(d))return x_({field:me(f),order:l},p);if(pM(d)||!d)return x_({op:d,field:g,order:l},p)}else{if(r==="descending")return{op:"min",field:e.vgField(t),order:"descending"};if(Ve(["ascending",void 0],r))return!0}}function A8(e,t){const{aggregate:n,type:i}=e;return n?ve(n)&&!f1e.has(n)?{valid:!1,reason:iye(n)}:i==="quantitative"&&t==="log"?{valid:!1,reason:rye(e)}:{valid:!0}:{valid:!1,reason:nye(e)}}function n$(e,t,n,i){return e.explicit&&t.explicit&&de(lye(n,i,e.value,t.value)),{explicit:e.explicit,value:[...e.value,...t.value]}}function qEe(e){const t=Na(e.map(s=>{if(Bs(s)){const{sort:o,...l}=s;return l}return s}),Ze),n=Na(e.map(s=>{if(Bs(s)){const o=s.sort;return o!==void 0&&!_p(o)&&("op"in o&&o.op==="count"&&delete o.field,o.order==="ascending"&&delete o.order),o}}).filter(s=>s!==void 0),Ze);if(t.length===0)return;if(t.length===1){const s=e[0];if(Bs(s)&&n.length>0){let o=n[0];if(n.length>1){de(zz);const l=n.filter(f=>be(f)&&"op"in f&&f.op!=="min");n.every(f=>be(f)&&"op"in f)&&l.length===1?o=l[0]:o=!0}else if(be(o)&&"field"in o){const l=o.field;s.field===l&&(o=o.order?{order:o.order}:!0)}return{...s,sort:o}}return s}const i=Na(n.map(s=>_p(s)||!("op"in s)||ve(s.op)&&_e(o1e,s.op)?s:(de(fye(s)),!0)),Ze);let r;i.length===1?r=i[0]:i.length>1&&(de(zz),r=!0);const a=Na(e.map(s=>Bs(s)?s.data:null),s=>s);return a.length===1&&a[0]!==null?{data:a[0],fields:t.map(o=>o.field),...r?{sort:r}:{}}:{fields:t,...r?{sort:r}:{}}}function yk(e){if(Bs(e)&&ve(e.field))return e.field;if(d1e(e)){let t;for(const n of e.fields)if(Bs(n)&&ve(n.field)){if(!t)t=n.field;else if(t!==n.field)return de(dye),t}return de(hye),t}else if(h1e(e)){de(gye);const t=e.fields[0];return ve(t)?t:void 0}}function _x(e,t){const i=e.component.scales[t].get("domains").map(r=>(Bs(r)&&(r.data=e.lookupDataSource(r.data)),r));return qEe(i)}function BG(e){return jd(e)||vk(e)?e.children.reduce((t,n)=>t.concat(BG(n)),$8(e)):$8(e)}function $8(e){return le(e.component.scales).reduce((t,n)=>{const i=e.component.scales[n];if(i.merged)return t;const r=i.combine(),{name:a,type:s,selectionExtent:o,domains:l,range:f,reverse:d,...g}=r,p=jEe(r.range,a,n,e),y=_x(e,n),v=o?jxe(e,o,i,y):null;return t.push({name:a,type:s,...y?{domain:y}:{},...v?{domainRaw:v}:{},range:p,...d!==void 0?{reverse:d}:{},...g}),t},[])}function jEe(e,t,n,i){if(Qt(n)){if(dc(e))return{step:{signal:`${t}_step`}}}else if(be(e)&&Bs(e))return{...e,data:i.lookupDataSource(e.data)};return e}class IG extends uo{constructor(n,i){super({},{name:n});oe(this,"merged",!1);this.setWithExplicit("type",i)}domainHasZero(){const n=this.get("type");if(Ve([Nn.LOG,Nn.TIME,Nn.UTC],n))return"definitely-not";const i=this.get("zero");if(i===!0||i===void 0&&Ve([Nn.LINEAR,Nn.SQRT,Nn.POW],n))return"definitely";const r=this.get("domains");if(r.length>0){let a=!1,s=!1,o=!1;for(const l of r){if(re(l)){const f=l[0],d=l[l.length-1];if(st(f)&&st(d))if(f<=0&&d>=0){a=!0;continue}else{s=!0;continue}}o=!0}if(a)return"definitely";if(s&&!o)return"definitely-not"}return"maybe"}}const HEe=["range","scheme"];function GEe(e){const t=e.component.scales;for(const n of gM){const i=t[n];if(!i)continue;const r=YEe(n,e);i.setWithExplicit("range",r)}}function C8(e,t){const n=e.fieldDef(t);if(n!=null&&n.bin){const{bin:i,field:r}=n,a=Ui(t),s=e.getName(a);if(be(i)&&i.binned&&i.step!==void 0)return new bn(()=>{const o=e.scaleName(t),l=`(domain("${o}")[1] - domain("${o}")[0]) / ${i.step}`;return`${e.getSignalName(s)} / (${l})`});if(Ct(i)){const o=hk(e,r,i);return new bn(()=>{const l=e.getSignalName(o),f=`(${l}.stop - ${l}.start) / ${l}.step`;return`${e.getSignalName(s)} / (${f})`})}}}function YEe(e,t){const n=t.specifiedScales[e],{size:i}=t,a=t.getScaleComponent(e).get("type");for(const g of HEe)if(n[g]!==void 0){const p=FA(a,g),y=Oj(e,g);if(!p)de(cj(a,g,e));else if(y)de(y);else switch(g){case"range":{const v=n.range;if(re(v)){if(Qt(e))return Ma(v.map(b=>{if(b==="width"||b==="height"){const E=t.getName(b),_=t.getSignalName.bind(t);return bn.fromName(_,E)}return b}))}else if(be(v))return Ma({data:t.requestDataName(Lt.Main),field:v.field,sort:{op:"min",field:t.vgField(e)}});return Ma(v)}case"scheme":return Ma(XEe(n[g]))}}const s=e===Rt||e==="xOffset"?"width":"height",o=i[s];if(Qa(o)){if(Qt(e))if($n(a)){const g=qG(o,t,e);if(g)return Ma({step:g})}else de(fj(s));else if(f0(e)){const g=e===Cu?"x":"y";if(t.getScaleComponent(g).get("type")==="band"){const v=jG(o,a);if(v)return Ma(v)}}}const{rangeMin:l,rangeMax:f}=n,d=VEe(e,t);return(l!==void 0||f!==void 0)&&FA(a,"rangeMin")&&re(d)&&d.length===2?Ma([l??d[0],f??d[1]]):Qi(d)}function XEe(e){return Jye(e)?{scheme:e.name,...ar(e,["name"])}:{scheme:e}}function PG(e,t,n,{center:i}={}){const r=Ui(e),a=t.getName(r),s=t.getSignalName.bind(t);return e===Tn&&oa(n)?i?[bn.fromName(o=>`${s(o)}/2`,a),bn.fromName(o=>`-${s(o)}/2`,a)]:[bn.fromName(s,a),0]:i?[bn.fromName(o=>`-${s(o)}/2`,a),bn.fromName(o=>`${s(o)}/2`,a)]:[0,bn.fromName(s,a)]}function VEe(e,t){const{size:n,config:i,mark:r,encoding:a}=t,{type:s}=cn(a[e]),l=t.getScaleComponent(e).get("type"),{domain:f,domainMid:d}=t.specifiedScales[e];switch(e){case Rt:case Tn:{if(Ve(["point","band"],l)){const g=HG(e,n,i.view);if(Qa(g))return{step:qG(g,t,e)}}return PG(e,t,l)}case Cu:case Ld:return WEe(e,t,l);case ro:{const g=KEe(r,i),p=JEe(r,n,t,i);return ud(l)?ZEe(g,p,QEe(l,i,f,e)):[g,p]}case Ur:return[0,Math.PI*2];case lc:return[0,360];case pa:return[0,new bn(()=>{const g=t.getSignalName(sr(t.parent)?"child_width":"width"),p=t.getSignalName(sr(t.parent)?"child_height":"height");return`min(${g},${p})/2`})];case Tu:return{step:1e3/i.scale.framesPerSecond};case Ou:return[i.scale.minStrokeWidth,i.scale.maxStrokeWidth];case Du:return[[1,0],[4,2],[2,1],[1,1],[1,2,4,2]];case Li:return"symbol";case Fi:case as:case ss:return l==="ordinal"?s==="nominal"?"category":"ordinal":d!==void 0?"diverging":r==="rect"||r==="geoshape"?"heatmap":"ramp";case ao:case Mu:case ku:return[i.scale.minOpacity,i.scale.maxOpacity]}}function qG(e,t,n){const{encoding:i}=t,r=t.getScaleComponent(n),a=cM(n),s=i[a];if(wH({step:e,offsetIsDiscrete:Be(s)&&Aj(s.type)})==="offset"&&rH(i,a)){const l=t.getScaleComponent(a);let d=`domain('${t.scaleName(a)}').length`;if(l.get("type")==="band"){const p=l.get("paddingInner")??l.get("padding")??0,y=l.get("paddingOuter")??l.get("padding")??0;d=`bandspace(${d}, ${p}, ${y})`}const g=r.get("paddingInner")??r.get("padding");return{signal:`${e.step} * ${d} / (1-${y1e(g)})`}}else return e.step}function jG(e,t){if(wH({step:e,offsetIsDiscrete:$n(t)})==="offset")return{step:e.step}}function WEe(e,t,n){const i=e===Cu?"x":"y",r=t.getScaleComponent(i);if(!r)return PG(i,t,n,{center:!0});const a=r.get("type"),s=t.scaleName(i),{markDef:o,config:l}=t;if(a==="band"){const f=HG(i,t.size,t.config.view);if(Qa(f)){const d=jG(f,n);if(d)return d}return[0,{signal:`bandwidth('${s}')`}]}else{const f=t.encoding[i];if(he(f)&&f.timeUnit){const d=Ej(f.timeUnit,v=>`scale('${s}', ${v})`),g=t.config.scale.bandWithNestedOffsetPaddingInner,p=yu({fieldDef:f,markDef:o,config:l})-.5,y=p!==0?` + ${p}`:"";if(g){const v=Ce(g)?`${g.signal}/2${y}`:`${g/2+p}`,b=Ce(g)?`(1 - ${g.signal}/2)${y}`:`${1-g/2+p}`;return[{signal:`${v} * (${d})`},{signal:`${b} * (${d})`}]}return[0,{signal:d}]}return Dq(`Cannot use ${e} scale if ${i} scale is not discrete.`)}}function HG(e,t,n){const i=e===Rt?"width":"height",r=t[i];return r||_v(n,i)}function QEe(e,t,n,i){switch(e){case"quantile":return t.scale.quantileCount;case"quantize":return t.scale.quantizeCount;case"threshold":return n!==void 0&&re(n)?n.length+1:(de(_ye(i)),3)}}function ZEe(e,t,n){const i=()=>{const r=ea(t),a=ea(e),s=`(${r} - ${a}) / (${n} - 1)`;return`sequence(${a}, ${r} + ${s}, ${s})`};return Ce(t)?new bn(i):{signal:i()}}function KEe(e,t){switch(e){case"bar":case"tick":return t.scale.minBandSize;case"line":case"trail":case"rule":return t.scale.minStrokeWidth;case"text":return t.scale.minFontSize;case"point":case"square":case"circle":return t.scale.minSize}throw new Error(ex("size",e))}const T8=.95;function JEe(e,t,n,i){const r={x:C8(n,"x"),y:C8(n,"y")};switch(e){case"bar":case"tick":{if(i.scale.maxBandSize!==void 0)return i.scale.maxBandSize;const a=M8(t,r,i.view);return st(a)?a-1:new bn(()=>`${a.signal} - 1`)}case"line":case"trail":case"rule":return i.scale.maxStrokeWidth;case"text":return i.scale.maxFontSize;case"point":case"square":case"circle":{if(i.scale.maxSize)return i.scale.maxSize;const a=M8(t,r,i.view);return st(a)?Math.pow(T8*a,2):new bn(()=>`pow(${T8} * ${a.signal}, 2)`)}}throw new Error(ex("size",e))}function M8(e,t,n){const i=Qa(e.width)?e.width.step:IA(n,"width"),r=Qa(e.height)?e.height.step:IA(n,"height");return t.x||t.y?new bn(()=>`min(${[t.x?t.x.signal:i,t.y?t.y.signal:r].join(", ")})`):Math.min(i,r)}function GG(e,t){Ft(e)?eSe(e,t):XG(e,t)}function eSe(e,t){const n=e.component.scales,{config:i,encoding:r,markDef:a,specifiedScales:s}=e;for(const o of le(n)){const l=s[o],f=n[o],d=e.getScaleComponent(o),g=cn(r[o]),p=l[t],y=d.get("type"),v=d.get("padding"),b=d.get("paddingInner"),E=FA(y,t),_=Oj(o,t);if(p!==void 0&&(E?_&&de(_):de(cj(y,t,o))),E&&_===void 0)if(p!==void 0){const w=g.timeUnit,A=g.type;switch(t){case"domainMax":case"domainMin":hc(l[t])||A==="temporal"||w?f.set(t,{signal:fx(l[t],{type:A,timeUnit:w})},!0):f.set(t,l[t],!0);break;default:f.copyKeyFromObject(t,l)}}else{const w=ce(k8,t)?k8[t]({model:e,channel:o,fieldOrDatumDef:g,scaleType:y,scalePadding:v,scalePaddingInner:b,domain:l.domain,domainMin:l.domainMin,domainMax:l.domainMax,markDef:a,config:i,hasNestedOffsetScale:aH(r,o),hasSecondaryRangeChannel:!!r[os(o)]}):i.scale[t];w!==void 0&&f.set(t,w,!1)}}}const k8={bins:({model:e,fieldOrDatumDef:t})=>he(t)?tSe(e,t):void 0,interpolate:({channel:e,fieldOrDatumDef:t})=>nSe(e,t.type),nice:({scaleType:e,channel:t,domain:n,domainMin:i,domainMax:r,fieldOrDatumDef:a})=>iSe(e,t,n,i,r,a),padding:({channel:e,scaleType:t,fieldOrDatumDef:n,markDef:i,config:r})=>rSe(e,t,r.scale,n,i,r.bar),paddingInner:({scalePadding:e,channel:t,markDef:n,scaleType:i,config:r,hasNestedOffsetScale:a})=>aSe(e,t,n.type,i,r.scale,a),paddingOuter:({scalePadding:e,channel:t,scaleType:n,scalePaddingInner:i,config:r,hasNestedOffsetScale:a})=>sSe(e,t,n,i,r.scale,a),reverse:({fieldOrDatumDef:e,scaleType:t,channel:n,config:i})=>{const r=he(e)?e.sort:void 0;return oSe(t,r,n,i.scale)},zero:({channel:e,fieldOrDatumDef:t,domain:n,markDef:i,scaleType:r,config:a,hasSecondaryRangeChannel:s})=>uSe(e,t,n,i,r,a.scale,s)};function YG(e){Ft(e)?GEe(e):XG(e,"range")}function XG(e,t){const n=e.component.scales;for(const i of e.children)t==="range"?YG(i):GG(i,t);for(const i of le(n)){let r;for(const a of e.children){const s=a.component.scales[i];if(s){const o=s.getWithExplicit(t);r=vu(r,o,t,"scale",LH((l,f)=>{switch(t){case"range":return l.step&&f.step?l.step-f.step:0}return 0}))}}n[i].setWithExplicit(t,r)}}function tSe(e,t){const n=t.bin;if(Ct(n)){const i=hk(e,t.field,n);return new bn(()=>e.getSignalName(i))}else if(Dn(n)&&fc(n)&&n.step!==void 0)return{step:n.step}}function nSe(e,t){if(Ve([Fi,as,ss],e)&&t!=="nominal")return"hcl"}function iSe(e,t,n,i,r,a){var s;if(!((s=la(a))!=null&&s.bin||re(n)||r!=null||i!=null||Ve([Nn.TIME,Nn.UTC],e)))return Qt(t)?!0:void 0}function rSe(e,t,n,i,r,a){if(Qt(e)){if(za(t)){if(n.continuousPadding!==void 0)return n.continuousPadding;const{type:s,orient:o}=r;if(s==="bar"&&!(he(i)&&(i.bin||i.timeUnit))&&(o==="vertical"&&e==="x"||o==="horizontal"&&e==="y"))return a.continuousBandSize}if(t===Nn.POINT)return n.pointPadding}}function aSe(e,t,n,i,r,a=!1){if(e===void 0){if(Qt(t)){const{bandPaddingInner:s,barBandPaddingInner:o,rectBandPaddingInner:l,tickBandPaddingInner:f,bandWithNestedOffsetPaddingInner:d}=r;return a?d:Wt(s,n==="bar"?o:n==="tick"?f:l)}else if(f0(t)&&i===Nn.BAND)return r.offsetBandPaddingInner}}function sSe(e,t,n,i,r,a=!1){if(e===void 0){if(Qt(t)){const{bandPaddingOuter:s,bandWithNestedOffsetPaddingOuter:o}=r;if(a)return o;if(n===Nn.BAND)return Wt(s,Ce(i)?{signal:`${i.signal}/2`}:i/2)}else if(f0(t)){if(n===Nn.POINT)return .5;if(n===Nn.BAND)return r.offsetBandPaddingOuter}}}function oSe(e,t,n,i){if(n==="x"&&i.xReverse!==void 0)return oa(e)&&t==="descending"?Ce(i.xReverse)?{signal:`!${i.xReverse.signal}`}:!i.xReverse:i.xReverse;if(oa(e)&&t==="descending")return!0}function uSe(e,t,n,i,r,a,s){if(!!n&&n!=="unaggregated"&&oa(r)){if(re(n)){const l=n[0],f=n[n.length-1];if(st(l)&&l<=0&&st(f)&&f>=0)return!0}return!1}if(e==="size"&&t.type==="quantitative"&&!ud(r))return!0;if(!(he(t)&&t.bin)&&Ve([...so,...Kme],e)){const{orient:l,type:f}=i;return Ve(["bar","area","line","trail"],f)&&(l==="horizontal"&&e==="y"||l==="vertical"&&e==="x")?!1:Ve(["bar","area"],f)&&!s?!0:a==null?void 0:a.zero}return!1}function lSe(e,t,n,i,r=!1){const a=cSe(t,n,i,r),{type:s}=e;return us(t)?s!==void 0?sve(t,s)?he(n)&&!ave(s,n.type)?(de(oye(s,a)),a):s:(de(sye(t,s,a)),a):a:null}function cSe(e,t,n,i){var r;switch(t.type){case"nominal":case"ordinal":{if(Df(e)||u_(e)==="discrete")return e==="shape"&&t.type==="ordinal"&&de(l_(e,"ordinal")),"ordinal";if(o_(e))return"band";if(Qt(e)||f0(e)){if(Ve(["rect","bar","image","rule","tick"],n.type)||i)return"band"}else if(n.type==="arc"&&e in hM)return"band";const a=n[Ui(e)];return Wl(a)||cd(t)&&((r=t.axis)!=null&&r.tickBand)?"band":"point"}case"temporal":return Df(e)?"time":u_(e)==="discrete"?(de(l_(e,"temporal")),"ordinal"):he(t)&&t.timeUnit&&An(t.timeUnit).utc?"utc":o_(e)?"band":"time";case"quantitative":return Df(e)?he(t)&&Ct(t.bin)?"bin-ordinal":"linear":u_(e)==="discrete"?(de(l_(e,"quantitative")),"ordinal"):o_(e)?"band":"linear";case"geojson":return}throw new Error(uj(t.type))}function fSe(e,{ignoreRange:t}={}){VG(e),UG(e);for(const n of rve)GG(e,n);t||YG(e)}function VG(e){Ft(e)?e.component.scales=dSe(e):e.component.scales=gSe(e)}function dSe(e){const{encoding:t,mark:n,markDef:i}=e,r={};for(const a of gM){const s=cn(t[a]);if(s&&n===Nj&&a===Li&&s.type===Ud)continue;let o=s&&s.scale;if(s&&o!==null&&o!==!1){o??(o={});const l=aH(t,a),f=lSe(o,a,s,i,l);r[a]=new IG(e.scaleName(`${a}`,!0),{value:f,explicit:o.type===f})}}return r}const hSe=LH((e,t)=>Lz(e)-Lz(t));function gSe(e){var r;const t=e.component.scales={},n={},i=e.component.resolve;for(const a of e.children){VG(a);for(const s of le(a.component.scales))if((r=i.scale)[s]??(r[s]=AG(s,e)),i.scale[s]==="shared"){const o=n[s],l=a.component.scales[s].getWithExplicit("type");o?Vye(o.value,l.value)?n[s]=vu(o,l,"type","scale",hSe):(i.scale[s]="independent",delete n[s]):n[s]=l}}for(const a of le(n)){const s=e.scaleName(a,!0),o=n[a];t[a]=new IG(s,o);for(const l of e.children){const f=l.component.scales[a];f&&(l.renameScale(f.get("name"),s),f.merged=!0)}}return t}class E_{constructor(){oe(this,"nameMap");this.nameMap={}}rename(t,n){this.nameMap[t]=n}has(t){return this.nameMap[t]!==void 0}get(t){for(;this.nameMap[t]&&t!==this.nameMap[t];)t=this.nameMap[t];return t}}function Ft(e){return(e==null?void 0:e.type)==="unit"}function sr(e){return(e==null?void 0:e.type)==="facet"}function vk(e){return(e==null?void 0:e.type)==="concat"}function jd(e){return(e==null?void 0:e.type)==="layer"}class bk{constructor(t,n,i,r,a,s,o){oe(this,"type");oe(this,"parent");oe(this,"config");oe(this,"name");oe(this,"size");oe(this,"title");oe(this,"description");oe(this,"data");oe(this,"transforms");oe(this,"layout");oe(this,"scaleNameMap");oe(this,"projectionNameMap");oe(this,"signalNameMap");oe(this,"component");oe(this,"view");this.type=n,this.parent=i,this.config=a,this.parent=i,this.config=a,this.view=Rn(o),this.name=t.name??r,this.title=qo(t.title)?{text:t.title}:t.title?Rn(t.title):void 0,this.scaleNameMap=i?i.scaleNameMap:new E_,this.projectionNameMap=i?i.projectionNameMap:new E_,this.signalNameMap=i?i.signalNameMap:new E_,this.data=t.data,this.description=t.description,this.transforms=xxe(t.transform??[]),this.layout=n==="layer"||n==="unit"?{}:wbe(t,n,a),this.component={data:{sources:i?i.component.data.sources:[],outputNodes:i?i.component.data.outputNodes:{},outputNodeRefCounts:i?i.component.data.outputNodeRefCounts:{},isFaceted:ux(t)||(i==null?void 0:i.component.data.isFaceted)&&t.data===void 0},layoutSize:new uo,layoutHeaders:{row:{},column:{},facet:{}},mark:null,resolve:{scale:{},axis:{},legend:{},...s?Le(s):{}},selection:null,scales:null,projection:null,axes:{},legends:{}}}get width(){return this.getSizeSignalRef("width")}get height(){return this.getSizeSignalRef("height")}parse(){this.parseScale(),this.parseLayoutSize(),this.renameTopLevelLayoutSizeSignal(),this.parseSelections(),this.parseProjection(),this.parseData(),this.parseAxesAndHeaders(),this.parseLegends(),this.parseMarkGroup()}parseScale(){fSe(this)}parseProjection(){zG(this)}renameTopLevelLayoutSizeSignal(){this.getName("width")!=="width"&&this.renameSignal(this.getName("width"),"width"),this.getName("height")!=="height"&&this.renameSignal(this.getName("height"),"height")}parseLegends(){kG(this)}assembleEncodeFromView(t){const{style:n,...i}=t,r={};for(const a of le(i)){const s=i[a];s!==void 0&&(r[a]=Mt(s))}return r}assembleGroupEncodeEntry(t){let n={};return this.view&&(n=this.assembleEncodeFromView(this.view)),!t&&(this.description&&(n.description=Mt(this.description)),this.type==="unit"||this.type==="layer")?{width:this.getSizeSignalRef("width"),height:this.getSizeSignalRef("height"),...n}:At(n)?void 0:n}assembleLayout(){if(!this.layout)return;const{spacing:t,...n}=this.layout,{component:i,config:r}=this,a=z2e(i.layoutHeaders,r);return{padding:t,...this.assembleDefaultLayout(),...n,...a?{titleBand:a}:{}}}assembleDefaultLayout(){return{}}assembleHeaderMarks(){const{layoutHeaders:t}=this.component;let n=[];for(const i of Cr)t[i].title&&n.push(M2e(this,i));for(const i of lk)n=n.concat(k2e(this,i));return n}assembleAxes(){return m2e(this.component.axes,this.config)}assembleLegends(){return DG(this)}assembleProjections(){return rEe(this)}assembleTitle(){const{encoding:t,...n}=this.title??{},i={...Jq(this.config.title).nonMarkTitleProperties,...n,...t?{encode:{update:t}}:{}};if(i.text)return Ve(["unit","layer"],this.type)?Ve(["middle",void 0],i.anchor)&&(i.frame??(i.frame="group")):i.anchor??(i.anchor="start"),At(i)?void 0:i}assembleGroup(t=[]){const n={};t=t.concat(this.assembleSignals()),t.length>0&&(n.signals=t);const i=this.assembleLayout();i&&(n.layout=i),n.marks=[].concat(this.assembleHeaderMarks(),this.assembleMarks());const r=!this.parent||sr(this.parent)?BG(this):[];r.length>0&&(n.scales=r);const a=this.assembleAxes();a.length>0&&(n.axes=a);const s=this.assembleLegends();return s.length>0&&(n.legends=s),n}getName(t){return Dt((this.name?`${this.name}_`:"")+t)}getDataName(t){return this.getName(Lt[t].toLowerCase())}requestDataName(t){const n=this.getDataName(t),i=this.component.data.outputNodeRefCounts;return i[n]=(i[n]||0)+1,n}getSizeSignalRef(t){if(sr(this.parent)){const n=_G(t),i=Zb(n),r=this.component.scales[i];if(r&&!r.merged){const a=r.get("type"),s=r.get("range");if($n(a)&&dc(s)){const o=r.get("name"),l=_x(this,i),f=yk(l);if(f){const d=me({aggregate:"distinct",field:f},{expr:"datum"});return{signal:SG(o,r,d)}}else return de(yM(i)),null}}}return{signal:this.signalNameMap.get(this.getName(t))}}lookupDataSource(t){const n=this.component.data.outputNodes[t];return n?n.getSource():t}getSignalName(t){return this.signalNameMap.get(t)}renameSignal(t,n){this.signalNameMap.rename(t,n)}renameScale(t,n){this.scaleNameMap.rename(t,n)}renameProjection(t,n){this.projectionNameMap.rename(t,n)}scaleName(t,n){if(n)return this.getName(t);if(Gq(t)&&us(t)&&this.component.scales[t]||this.scaleNameMap.has(this.getName(t)))return this.scaleNameMap.get(this.getName(t))}projectionName(t){if(t)return this.getName("projection");if(this.component.projection&&!this.component.projection.merged||this.projectionNameMap.has(this.getName("projection")))return this.projectionNameMap.get(this.getName("projection"))}getScaleComponent(t){if(!this.component.scales)throw new Error("getScaleComponent cannot be called before parseScale(). Make sure you have called parseScale or use parseUnitModelWithScale().");const n=this.component.scales[t];return n&&!n.merged?n:this.parent?this.parent.getScaleComponent(t):void 0}getScaleType(t){const n=this.getScaleComponent(t);return n?n.get("type"):void 0}getSelectionComponent(t,n){let i=this.component.selection[t];if(!i&&this.parent&&(i=this.parent.getSelectionComponent(t,n)),!i)throw new Error(S1e(n));return i}hasAxisOrientSignalRef(){var t,n;return((t=this.component.axes.x)==null?void 0:t.some(i=>i.hasOrientSignalRef()))||((n=this.component.axes.y)==null?void 0:n.some(i=>i.hasOrientSignalRef()))}}class WG extends bk{vgField(t,n={}){const i=this.fieldDef(t);if(i)return me(i,n)}reduceFieldDef(t,n){return Jve(this.getMapping(),(i,r,a)=>{const s=la(r);return s?t(i,s,a):i},n)}forEachFieldDef(t,n){GM(this.getMapping(),(i,r)=>{const a=la(i);a&&t(a,r)},n)}}class wx extends yt{constructor(n,i){super(n);oe(this,"transform");this.transform=i,this.transform=Le(i);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"value",r[1]??"density"];const a=this.transform.resolve??"shared";this.transform.resolve=a}clone(){return new wx(null,Le(this.transform))}dependentFields(){return new Set([this.transform.density,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`DensityTransform ${Ze(this.transform)}`}assemble(){const{density:n,...i}=this.transform,r={type:"kde",field:n,...i};return r.resolve=this.transform.resolve,r}}class Ax extends yt{constructor(n,i){super(n);oe(this,"transform");this.transform=i,this.transform=Le(i)}clone(){return new Ax(null,Le(this.transform))}dependentFields(){return new Set([this.transform.extent])}producedFields(){return new Set([])}hash(){return`ExtentTransform ${Ze(this.transform)}`}assemble(){const{extent:n,param:i}=this.transform;return{type:"extent",field:n,signal:i}}}class $x extends yt{constructor(n,i){super(n);oe(this,"transform");this.transform=i,this.transform=Le(i);const{flatten:r,as:a=[]}=this.transform;this.transform.as=r.map((s,o)=>a[o]??s)}clone(){return new $x(this.parent,Le(this.transform))}dependentFields(){return new Set(this.transform.flatten)}producedFields(){return new Set(this.transform.as)}hash(){return`FlattenTransform ${Ze(this.transform)}`}assemble(){const{flatten:n,as:i}=this.transform;return{type:"flatten",fields:n,as:i}}}class Cx extends yt{constructor(n,i){super(n);oe(this,"transform");this.transform=i,this.transform=Le(i);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"key",r[1]??"value"]}clone(){return new Cx(null,Le(this.transform))}dependentFields(){return new Set(this.transform.fold)}producedFields(){return new Set(this.transform.as)}hash(){return`FoldTransform ${Ze(this.transform)}`}assemble(){const{fold:n,as:i}=this.transform;return{type:"fold",fields:n,as:i}}}class zf extends yt{constructor(n,i,r,a){super(n);oe(this,"fields");oe(this,"geojson");oe(this,"signal");this.fields=i,this.geojson=r,this.signal=a}clone(){return new zf(null,Le(this.fields),this.geojson,this.signal)}static parseAll(n,i){if(i.component.projection&&!i.component.projection.isFit)return n;let r=0;for(const a of[[ya,ma],[Fr,va]]){const s=a.map(o=>{const l=cn(i.encoding[o]);return he(l)?l.field:ls(l)?{expr:`${l.datum}`}:ua(l)?{expr:`${l.value}`}:void 0});(s[0]||s[1])&&(n=new zf(n,s,null,i.getName(`geojson_${r++}`)))}if(i.channelHasField(Li)){const a=i.typedFieldDef(Li);a.type===Ud&&(n=new zf(n,null,a.field,i.getName(`geojson_${r++}`)))}return n}dependentFields(){const n=(this.fields??[]).filter(ve);return new Set([...this.geojson?[this.geojson]:[],...n])}producedFields(){return new Set}hash(){return`GeoJSON ${this.geojson} ${this.signal} ${Ze(this.fields)}`}assemble(){return[...this.geojson?[{type:"filter",expr:`isValid(datum["${this.geojson}"])`}]:[],{type:"geojson",...this.fields?{fields:this.fields}:{},...this.geojson?{geojson:this.geojson}:{},signal:this.signal}]}}class Cp extends yt{constructor(n,i,r,a){super(n);oe(this,"projection");oe(this,"fields");oe(this,"as");this.projection=i,this.fields=r,this.as=a}clone(){return new Cp(null,this.projection,Le(this.fields),Le(this.as))}static parseAll(n,i){if(!i.projectionName())return n;for(const r of[[ya,ma],[Fr,va]]){const a=r.map(o=>{const l=cn(i.encoding[o]);return he(l)?l.field:ls(l)?{expr:`${l.datum}`}:ua(l)?{expr:`${l.value}`}:void 0}),s=r[0]===Fr?"2":"";(a[0]||a[1])&&(n=new Cp(n,i.projectionName(),a,[i.getName(`x${s}`),i.getName(`y${s}`)]))}return n}dependentFields(){return new Set(this.fields.filter(ve))}producedFields(){return new Set(this.as)}hash(){return`Geopoint ${this.projection} ${Ze(this.fields)} ${Ze(this.as)}`}assemble(){return{type:"geopoint",projection:this.projection,fields:this.fields,as:this.as}}}class kl extends yt{constructor(n,i){super(n);oe(this,"transform");this.transform=i}clone(){return new kl(null,Le(this.transform))}dependentFields(){return new Set([this.transform.impute,this.transform.key,...this.transform.groupby??[]])}producedFields(){return new Set([this.transform.impute])}processSequence(n){const{start:i=0,stop:r,step:a}=n;return{signal:`sequence(${[i,r,...a?[a]:[]].join(",")})`}}static makeFromTransform(n,i){return new kl(n,i)}static makeFromEncoding(n,i){const r=i.encoding,a=r.x,s=r.y;if(he(a)&&he(s)){const o=a.impute?a:s.impute?s:void 0;if(o===void 0)return;const l=a.impute?s:s.impute?a:void 0,{method:f,value:d,frame:g,keyvals:p}=o.impute,y=uH(i.mark,r);return new kl(n,{impute:o.field,key:l.field,...f?{method:f}:{},...d!==void 0?{value:d}:{},...g?{frame:g}:{},...p!==void 0?{keyvals:p}:{},...y.length?{groupby:y}:{}})}return null}hash(){return`Impute ${Ze(this.transform)}`}assemble(){const{impute:n,key:i,keyvals:r,method:a,groupby:s,value:o,frame:l=[null,null]}=this.transform,f={type:"impute",field:n,key:i,...r?{keyvals:txe(r)?this.processSequence(r):r}:{},method:"value",...s?{groupby:s}:{},value:!a||a==="value"?o:null};if(a&&a!=="value"){const d={type:"window",as:[`imputed_${n}_value`],ops:[a],fields:[n],frame:l,ignorePeers:!1,...s?{groupby:s}:{}},g={type:"formula",expr:`datum.${n} === null ? datum.imputed_${n}_value : datum.${n}`,as:n};return[f,d,g]}else return[f]}}class Tx extends yt{constructor(n,i){super(n);oe(this,"transform");this.transform=i,this.transform=Le(i);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??i.on,r[1]??i.loess]}clone(){return new Tx(null,Le(this.transform))}dependentFields(){return new Set([this.transform.loess,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`LoessTransform ${Ze(this.transform)}`}assemble(){const{loess:n,on:i,...r}=this.transform;return{type:"loess",x:i,y:n,...r}}}class Tp extends yt{constructor(n,i,r){super(n);oe(this,"transform");oe(this,"secondary");this.transform=i,this.secondary=r}clone(){return new Tp(null,Le(this.transform),this.secondary)}static make(n,i,r,a){const s=i.component.data.sources,{from:o}=r;let l=null;if(nxe(o)){let f=KG(o.data,s);f||(f=new Jl(o.data),s.push(f));const d=i.getName(`lookup_${a}`);l=new Di(f,d,Lt.Lookup,i.component.data.outputNodeRefCounts),i.component.data.outputNodes[d]=l}else if(ixe(o)){const f=o.param;r={as:f,...r};let d;try{d=i.getSelectionComponent(Dt(f),f)}catch{throw new Error($1e(f))}if(l=d.materialized,!l)throw new Error(C1e(f))}return new Tp(n,r,l.getSource())}dependentFields(){return new Set([this.transform.lookup])}producedFields(){return new Set(this.transform.as?Ee(this.transform.as):this.transform.from.fields)}hash(){return`Lookup ${Ze({transform:this.transform,secondary:this.secondary})}`}assemble(){let n;if(this.transform.from.fields)n={values:this.transform.from.fields,...this.transform.as?{as:Ee(this.transform.as)}:{}};else{let i=this.transform.as;ve(i)||(de(U1e),i="_lookup"),n={as:[i]}}return{type:"lookup",from:this.secondary,key:this.transform.from.key,fields:[this.transform.lookup],...n,...this.transform.default?{default:this.transform.default}:{}}}}class Mx extends yt{constructor(n,i){super(n);oe(this,"transform");this.transform=i,this.transform=Le(i);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"prob",r[1]??"value"]}clone(){return new Mx(null,Le(this.transform))}dependentFields(){return new Set([this.transform.quantile,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`QuantileTransform ${Ze(this.transform)}`}assemble(){const{quantile:n,...i}=this.transform;return{type:"quantile",field:n,...i}}}class kx extends yt{constructor(n,i){super(n);oe(this,"transform");this.transform=i,this.transform=Le(i);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??i.on,r[1]??i.regression]}clone(){return new kx(null,Le(this.transform))}dependentFields(){return new Set([this.transform.regression,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`RegressionTransform ${Ze(this.transform)}`}assemble(){const{regression:n,on:i,...r}=this.transform;return{type:"regression",x:i,y:n,...r}}}class Ox extends yt{constructor(n,i){super(n);oe(this,"transform");this.transform=i}clone(){return new Ox(null,Le(this.transform))}addDimensions(n){this.transform.groupby=Na((this.transform.groupby??[]).concat(n),i=>i)}producedFields(){}dependentFields(){return new Set([this.transform.pivot,this.transform.value,...this.transform.groupby??[]])}hash(){return`PivotTransform ${Ze(this.transform)}`}assemble(){const{pivot:n,value:i,groupby:r,limit:a,op:s}=this.transform;return{type:"pivot",field:n,value:i,...a!==void 0?{limit:a}:{},...s!==void 0?{op:s}:{},...r!==void 0?{groupby:r}:{}}}}class Dx extends yt{constructor(n,i){super(n);oe(this,"transform");this.transform=i}clone(){return new Dx(null,Le(this.transform))}dependentFields(){return new Set}producedFields(){return new Set}hash(){return`SampleTransform ${Ze(this.transform)}`}assemble(){return{type:"sample",size:this.transform.sample}}}function QG(e){let t=0;function n(i,r){if(i instanceof Jl&&!i.isGenerator&&!dd(i.data)&&(e.push(r),r={name:null,source:r.name,transform:[]}),i instanceof Zn&&(i.parent instanceof Jl&&!r.source?(r.format={...r.format,parse:i.assembleFormatParse()},r.transform.push(...i.assembleTransforms(!0))):r.transform.push(...i.assembleTransforms())),i instanceof Pd){r.name||(r.name=`data_${t++}`),!r.source||r.transform.length>0?(e.push(r),i.data=r.name):i.data=r.source,e.push(...i.assemble());return}switch((i instanceof E0||i instanceof S0||i instanceof yd||i instanceof Id||i instanceof gd||i instanceof Cp||i instanceof ia||i instanceof Tp||i instanceof qd||i instanceof yc||i instanceof Cx||i instanceof $x||i instanceof wx||i instanceof Tx||i instanceof Mx||i instanceof kx||i instanceof bu||i instanceof Dx||i instanceof Ox||i instanceof Ax)&&r.transform.push(i.assemble()),(i instanceof Pa||i instanceof Ba||i instanceof kl||i instanceof Xs||i instanceof zf)&&r.transform.push(...i.assemble()),i instanceof Di&&(r.source&&r.transform.length===0?i.setSource(r.source):i.parent instanceof Di?i.setSource(r.name):(r.name||(r.name=`data_${t++}`),i.setSource(r.name),i.numChildren()===1&&(e.push(r),r={name:null,source:r.name,transform:[]}))),i.numChildren()){case 0:i instanceof Di&&(!r.source||r.transform.length>0)&&e.push(r);break;case 1:n(i.children[0],r);break;default:{r.name||(r.name=`data_${t++}`);let a=r.name;!r.source||r.transform.length>0?e.push(r):a=r.source;for(const s of i.children)n(s,{name:null,source:a,transform:[]});break}}}return n}function pSe(e){const t=[],n=QG(t);for(const i of e.children)n(i,{source:e.name,name:null,transform:[]});return t}function mSe(e,t){const n=[],i=QG(n);let r=0;for(const s of e.sources){s.hasName()||(s.dataName=`source_${r++}`);const o=s.assemble();i(s,o)}for(const s of n)s.transform.length===0&&delete s.transform;let a=0;for(const[s,o]of n.entries())(o.transform??[]).length===0&&!o.source&&n.splice(a++,0,n.splice(s,1)[0]);for(const s of n)for(const o of s.transform??[])o.type==="lookup"&&(o.from=e.outputNodes[o.from].getSource());for(const s of n)s.name in t&&(s.values=t[s.name]);return n}function ySe(e){return e==="top"||e==="left"||Ce(e)?"header":"footer"}function vSe(e){for(const t of Cr)bSe(e,t);O8(e,"x"),O8(e,"y")}function bSe(e,t){var s;const{facet:n,config:i,child:r,component:a}=e;if(e.channelHasField(t)){const o=n[t],l=md("title",null,i,t);let f=Rf(o,i,{allowDisabling:!0,includeDefault:l===void 0||!!l});r.component.layoutHeaders[t].title&&(f=re(f)?f.join(", "):f,f+=` / ${r.component.layoutHeaders[t].title}`,r.component.layoutHeaders[t].title=null);const d=md("labelOrient",o.header,i,t),g=o.header!==null?Wt((s=o.header)==null?void 0:s.labels,i.header.labels,!0):!1,p=Ve(["bottom","right"],d)?"footer":"header";a.layoutHeaders[t]={title:o.header!==null?f:null,facetFieldDef:o,[p]:t==="facet"?[]:[ZG(e,t,g)]}}}function ZG(e,t,n){const i=t==="row"?"height":"width";return{labels:n,sizeSignal:e.child.component.layoutSize.get(i)?e.child.getSizeSignalRef(i):void 0,axes:[]}}function O8(e,t){const{child:n}=e;if(n.component.axes[t]){const{layoutHeaders:i,resolve:r}=e.component;if(r.axis[t]=dk(r,t),r.axis[t]==="shared"){const a=t==="x"?"column":"row",s=i[a];for(const o of n.component.axes[t]){const l=ySe(o.get("orient"));s[l]??(s[l]=[ZG(e,a,!1)]);const f=Fg(o,"main",e.config,{header:!0});f&&s[l][0].axes.push(f),o.mainExtracted=!0}}}}function xSe(e){xk(e),Cv(e,"width"),Cv(e,"height")}function ESe(e){xk(e);const t=e.layout.columns===1?"width":"childWidth",n=e.layout.columns===void 0?"height":"childHeight";Cv(e,t),Cv(e,n)}function xk(e){for(const t of e.children)t.parseLayoutSize()}function Cv(e,t){const n=_G(t),i=Zb(n),r=e.component.resolve,a=e.component.layoutSize;let s;for(const o of e.children){const l=o.component.layoutSize.getWithExplicit(n),f=r.scale[i]??AG(i,e);if(f==="independent"&&l.value==="step"){s=void 0;break}if(s){if(f==="independent"&&s.value!==l.value){s=void 0;break}s=vu(s,l,n,"")}else s=l}if(s){for(const o of e.children)e.renameSignal(o.getName(n),e.getName(t)),o.component.layoutSize.set(n,"merged",!1);a.setWithExplicit(t,s)}else a.setWithExplicit(t,{explicit:!1,value:void 0})}function SSe(e){const{size:t,component:n}=e;for(const i of so){const r=Ui(i);if(t[r]){const a=t[r];n.layoutSize.set(r,Qa(a)?"step":a,!0)}else{const a=_Se(e,r);n.layoutSize.set(r,a,!1)}}}function _Se(e,t){const n=t==="width"?"x":"y",i=e.config,r=e.getScaleComponent(n);if(r){const a=r.get("type"),s=r.get("range");if($n(a)){const o=_v(i.view,t);return dc(s)||Qa(o)?"step":o}else return BA(i.view,t)}else{if(e.hasProjection||e.mark==="arc")return BA(i.view,t);{const a=_v(i.view,t);return Qa(a)?a.step:a}}}function i$(e,t,n){return me(t,{suffix:`by_${me(e)}`,...n})}class Kg extends WG{constructor(n,i,r,a){super(n,"facet",i,r,a,n.resolve);oe(this,"facet");oe(this,"child");oe(this,"children");this.child=Ak(n.spec,this,this.getName("child"),void 0,a),this.children=[this.child],this.facet=this.initFacet(n.facet)}initFacet(n){if(!p0(n))return{facet:this.initFacetFieldDef(n,"facet")};const i=le(n),r={};for(const a of i){if(![js,Hs].includes(a)){de(ex(a,"facet"));break}const s=n[a];if(s.field===void 0){de(NA(s,a));break}r[a]=this.initFacetFieldDef(s,a)}return r}initFacetFieldDef(n,i){const r=HM(n,i);return r.header?r.header=Rn(r.header):r.header===null&&(r.header=null),r}channelHasField(n){return ce(this.facet,n)}fieldDef(n){return this.facet[n]}parseData(){this.component.data=Rx(this),this.child.parseData()}parseLayoutSize(){xk(this)}parseSelections(){this.child.parseSelections(),this.component.selection=this.child.component.selection,nn(this.component.selection).some(n=>Ia(n))&&bM(vM)}parseMarkGroup(){this.child.parseMarkGroup()}parseAxesAndHeaders(){this.child.parseAxesAndHeaders(),vSe(this)}assembleSelectionTopLevelSignals(n){return this.child.assembleSelectionTopLevelSignals(n)}assembleSignals(){return this.child.assembleSignals(),[]}assembleSelectionData(n){return this.child.assembleSelectionData(n)}getHeaderLayoutMixins(){const n={};for(const i of Cr)for(const r of ck){const a=this.component.layoutHeaders[i],s=a[r],{facetFieldDef:o}=a;if(o){const l=md("titleOrient",o.header,this.config,i);if(["right","bottom"].includes(l)){const f=Ex(i,l);n.titleAnchor??(n.titleAnchor={}),n.titleAnchor[f]="end"}}if(s!=null&&s[0]){const l=i==="row"?"height":"width",f=r==="header"?"headerBand":"footerBand";i!=="facet"&&!this.child.component.layoutSize.get(l)&&(n[f]??(n[f]={}),n[f][i]=.5),a.title&&(n.offset??(n.offset={}),n.offset[i==="row"?"rowTitle":"columnTitle"]=10)}}return n}assembleDefaultLayout(){const{column:n,row:i}=this.facet,r=n?this.columnDistinctSignal():i?1:void 0;let a="all";return(!i&&this.component.resolve.scale.x==="independent"||!n&&this.component.resolve.scale.y==="independent")&&(a="none"),{...this.getHeaderLayoutMixins(),...r?{columns:r}:{},bounds:"full",align:a}}assembleLayoutSignals(){return this.child.assembleLayoutSignals()}columnDistinctSignal(){if(!(this.parent&&this.parent instanceof Kg))return{signal:`length(data('${this.getName("column_domain")}'))`}}assembleGroupStyle(){}assembleGroup(n){return this.parent&&this.parent instanceof Kg?{...this.channelHasField("column")?{encode:{update:{columns:{field:me(this.facet.column,{prefix:"distinct"})}}}}:{},...super.assembleGroup(n)}:super.assembleGroup(n)}getCardinalityAggregateForChild(){const n=[],i=[],r=[];if(this.child instanceof Kg){if(this.child.channelHasField("column")){const a=me(this.child.facet.column);n.push(a),i.push("distinct"),r.push(`distinct_${a}`)}}else for(const a of so){const s=this.child.component.scales[a];if(s&&!s.merged){const o=s.get("type"),l=s.get("range");if($n(o)&&dc(l)){const f=_x(this.child,a),d=yk(f);d?(n.push(d),i.push("distinct"),r.push(`distinct_${d}`)):de(yM(a))}}}return{fields:n,ops:i,as:r}}assembleFacet(){const{name:n,data:i}=this.component.data.facetRoot,{row:r,column:a}=this.facet,{fields:s,ops:o,as:l}=this.getCardinalityAggregateForChild(),f=[];for(const g of Cr){const p=this.facet[g];if(p){f.push(me(p));const{bin:y,sort:v}=p;if(Ct(y)&&f.push(me(p,{binSuffix:"end"})),Gs(v)){const{field:b,op:E=ox}=v,_=i$(p,v);r&&a?(s.push(_),o.push("max"),l.push(_)):(s.push(b),o.push(E),l.push(_))}else if(re(v)){const b=pd(p,g);s.push(b),o.push("max"),l.push(b)}}}const d=!!r&&!!a;return{name:n,data:i,groupby:f,...d||s.length>0?{aggregate:{...d?{cross:d}:{},...s.length?{fields:s,ops:o,as:l}:{}}}:{}}}facetSortFields(n){const{facet:i}=this,r=i[n];return r?Gs(r.sort)?[i$(r,r.sort,{expr:"datum"})]:re(r.sort)?[pd(r,n,{expr:"datum"})]:[me(r,{expr:"datum"})]:[]}facetSortOrder(n){const{facet:i}=this,r=i[n];if(r){const{sort:a}=r;return[(Gs(a)?a.order:!re(a)&&a)||"ascending"]}return[]}assembleLabelTitle(){var a;const{facet:n,config:i}=this;if(n.facet)return QA(n.facet,"facet",i);const r={row:["top","bottom"],column:["left","right"]};for(const s of lk)if(n[s]){const o=md("labelOrient",(a=n[s])==null?void 0:a.header,i,s);if(r[s].includes(o))return QA(n[s],s,i)}}assembleMarks(){const{child:n}=this,i=this.component.data.facetRoot,r=pSe(i),a=n.assembleGroupEncodeEntry(!1),s=this.assembleLabelTitle()||n.assembleTitle(),o=n.assembleGroupStyle();return[{name:this.getName("cell"),type:"group",...s?{title:s}:{},...o?{style:o}:{},from:{facet:this.assembleFacet()},sort:{field:Cr.map(f=>this.facetSortFields(f)).flat(),order:Cr.map(f=>this.facetSortOrder(f)).flat()},...r.length>0?{data:r}:{},...a?{encode:{update:a}}:{},...n.assembleGroup(Bxe(this,[]))}]}getMapping(){return this.facet}}function wSe(e,t){const{row:n,column:i}=t;if(n&&i){let r=null;for(const a of[n,i])if(Gs(a.sort)){const{field:s,op:o=ox}=a.sort;e=r=new yc(e,{joinaggregate:[{op:o,field:s,as:i$(a,a.sort,{forAs:!0})}],groupby:[me(a)]})}return r}return null}function KG(e,t){var n,i,r,a;for(const s of t){const o=s.data;if(e.name&&s.hasName()&&e.name!==s.dataName)continue;const l=(n=e.format)==null?void 0:n.mesh,f=(i=o.format)==null?void 0:i.feature;if(l&&f)continue;const d=(r=e.format)==null?void 0:r.feature;if((d||f)&&d!==f)continue;const g=(a=o.format)==null?void 0:a.mesh;if(!((l||g)&&l!==g)){if($p(e)&&$p(o)){if(tr(e.values,o.values))return s}else if(dd(e)&&dd(o)){if(e.url===o.url)return s}else if(UH(e)&&e.name===s.dataName)return s}}return null}function ASe(e,t){if(e.data||!e.parent){if(e.data===null){const i=new Jl({values:[]});return t.push(i),i}const n=KG(e.data,t);if(n)return ru(e.data)||(n.data.format=Rq({},e.data.format,n.data.format)),!n.hasName()&&e.data.name&&(n.dataName=e.data.name),n;{const i=new Jl(e.data);return t.push(i),i}}else return e.parent.component.data.facetRoot?e.parent.component.data.facetRoot:e.parent.component.data.main}function $Se(e,t,n){let i=0;for(const r of t.transforms){let a,s;if(hxe(r))s=e=new gd(e,r),a="derived";else if(nk(r)){const o=yEe(r);s=e=Zn.makeWithAncestors(e,{},o,n)??e,e=new Id(e,t,r.filter)}else if(RH(r))s=e=Pa.makeFromTransform(e,r,t),a="number";else if(pxe(r))a="date",n.getWithExplicit(r.field).value===void 0&&(e=new Zn(e,{[r.field]:a}),n.set(r.field,a,!1)),s=e=Ba.makeFromTransform(e,r);else if(mxe(r))s=e=ia.makeFromTransform(e,r),a="number",uk(t)&&(e=new bu(e));else if(DH(r))s=e=Tp.make(e,t,r,i++),a="derived";else if(cxe(r))s=e=new qd(e,r),a="number";else if(fxe(r))s=e=new yc(e,r),a="number";else if(yxe(r))s=e=Xs.makeFromTransform(e,r),a="derived";else if(vxe(r))s=e=new Cx(e,r),a="derived";else if(bxe(r))s=e=new Ax(e,r),a="derived";else if(dxe(r))s=e=new $x(e,r),a="derived";else if(rxe(r))s=e=new Ox(e,r),a="derived";else if(lxe(r))e=new Dx(e,r);else if(gxe(r))s=e=kl.makeFromTransform(e,r),a="derived";else if(axe(r))s=e=new wx(e,r),a="derived";else if(sxe(r))s=e=new Mx(e,r),a="derived";else if(oxe(r))s=e=new kx(e,r),a="derived";else if(uxe(r))s=e=new Tx(e,r),a="derived";else{de(L1e(r));continue}if(s&&a!==void 0)for(const o of s.producedFields()??[])n.set(o,a,!1)}return e}function Rx(e){var E;let t=ASe(e,e.component.data.sources);const{outputNodes:n,outputNodeRefCounts:i}=e.component.data,r=e.data,s=!(r&&(ru(r)||dd(r)||$p(r)))&&e.parent?e.parent.component.data.ancestorParse.clone():new Oxe;ru(r)?(BH(r)?t=new S0(t,r.sequence):ik(r)&&(t=new E0(t,r.graticule)),s.parseNothing=!0):((E=r==null?void 0:r.format)==null?void 0:E.parse)===null&&(s.parseNothing=!0),t=Zn.makeExplicit(t,e,s)??t,t=new bu(t);const o=e.parent&&jd(e.parent);(Ft(e)||sr(e))&&o&&(t=Pa.makeFromEncoding(t,e)??t),e.transforms.length>0&&(t=$Se(t,e,s));const l=bEe(e),f=vEe(e);t=Zn.makeWithAncestors(t,{},{...l,...f},s)??t,Ft(e)&&(t=zf.parseAll(t,e),t=Cp.parseAll(t,e)),(Ft(e)||sr(e))&&(o||(t=Pa.makeFromEncoding(t,e)??t),t=Ba.makeFromEncoding(t,e)??t,t=gd.parseAllForSortIndex(t,e));const d=t=v1(Lt.Raw,e,t);if(Ft(e)){const _=ia.makeFromEncoding(t,e);_&&(t=_,uk(e)&&(t=new bu(t))),t=kl.makeFromEncoding(t,e)??t,t=Xs.makeFromEncoding(t,e)??t}let g,p;if(Ft(e)){const{markDef:_,mark:w,config:A}=e,$=Et("invalid",_,A),{marks:C,scales:k}=p=PH({invalid:$,isPath:Nu(w)});C!==k&&k==="include-invalid-values"&&(g=t=v1(Lt.PreFilterInvalid,e,t)),C==="exclude-invalid-values"&&(t=yd.make(t,e,p)??t)}const y=t=v1(Lt.Main,e,t);let v;if(Ft(e)&&p){const{marks:_,scales:w}=p;_==="include-invalid-values"&&w==="exclude-invalid-values"&&(t=yd.make(t,e,p)??t,v=t=v1(Lt.PostFilterInvalid,e,t))}Ft(e)&&g2e(e,y);let b=null;if(sr(e)){const _=e.getName("facet");t=wSe(t,e.facet)??t,b=new Pd(t,e,_,y.getSource()),n[_]=b}return{...e.component.data,outputNodes:n,outputNodeRefCounts:i,raw:d,main:y,facetRoot:b,ancestorParse:s,preFilterInvalid:g,postFilterInvalid:v}}function v1(e,t,n){const{outputNodes:i,outputNodeRefCounts:r}=t.component.data,a=t.getDataName(e),s=new Di(n,a,e,r);return i[a]=s,s}class CSe extends bk{constructor(n,i,r,a){var s,o,l,f;super(n,"concat",i,r,a,n.resolve);oe(this,"children");(((o=(s=n.resolve)==null?void 0:s.axis)==null?void 0:o.x)==="shared"||((f=(l=n.resolve)==null?void 0:l.axis)==null?void 0:f.y)==="shared")&&de(N1e),this.children=this.getChildren(n).map((d,g)=>Ak(d,this,this.getName(`concat_${g}`),void 0,a))}parseData(){this.component.data=Rx(this);for(const n of this.children)n.parseData()}parseSelections(){this.component.selection={};for(const n of this.children){n.parseSelections();for(const i of le(n.component.selection))this.component.selection[i]=n.component.selection[i]}nn(this.component.selection).some(n=>Ia(n))&&bM(vM)}parseMarkGroup(){for(const n of this.children)n.parseMarkGroup()}parseAxesAndHeaders(){for(const n of this.children)n.parseAxesAndHeaders()}getChildren(n){return gx(n)?n.vconcat:ek(n)?n.hconcat:n.concat}parseLayoutSize(){ESe(this)}parseAxisGroup(){return null}assembleSelectionTopLevelSignals(n){return this.children.reduce((i,r)=>r.assembleSelectionTopLevelSignals(i),n)}assembleSignals(){return this.children.forEach(n=>n.assembleSignals()),[]}assembleLayoutSignals(){const n=fk(this);for(const i of this.children)n.push(...i.assembleLayoutSignals());return n}assembleSelectionData(n){return this.children.reduce((i,r)=>r.assembleSelectionData(i),n)}assembleMarks(){return this.children.map(n=>{const i=n.assembleTitle(),r=n.assembleGroupStyle(),a=n.assembleGroupEncodeEntry(!1);return{type:"group",name:n.getName("group"),...i?{title:i}:{},...r?{style:r}:{},...a?{encode:{update:a}}:{},...n.assembleGroup()}})}assembleGroupStyle(){}assembleDefaultLayout(){const n=this.layout.columns;return{...n!=null?{columns:n}:{},bounds:"full",align:"each"}}}function TSe(e){return e===!1||e===null}const MSe={disable:1,gridScale:1,scale:1,...nH,labelExpr:1,encode:1},JG=le(MSe);class Ek extends uo{constructor(n={},i={},r=!1){super();oe(this,"explicit");oe(this,"implicit");oe(this,"mainExtracted");this.explicit=n,this.implicit=i,this.mainExtracted=r}clone(){return new Ek(Le(this.explicit),Le(this.implicit),this.mainExtracted)}hasAxisPart(n){return n==="axis"?!0:n==="grid"||n==="title"?!!this.get(n):!TSe(this.get(n))}hasOrientSignalRef(){return Ce(this.explicit.orient)}}function kSe(e,t,n){const{encoding:i,config:r}=e,a=cn(i[t])??cn(i[os(t)]),s=e.axis(t)||{},{format:o,formatType:l}=s;if(Ql(l))return{text:ta({fieldOrDatumDef:a,field:"datum.value",format:o,formatType:l,config:r}),...n};if(o===void 0&&l===void 0&&r.customFormatTypes){if(ld(a)==="quantitative"){if(cd(a)&&a.stack==="normalize"&&r.normalizedNumberFormatType)return{text:ta({fieldOrDatumDef:a,field:"datum.value",format:r.normalizedNumberFormat,formatType:r.normalizedNumberFormatType,config:r}),...n};if(r.numberFormatType)return{text:ta({fieldOrDatumDef:a,field:"datum.value",format:r.numberFormat,formatType:r.numberFormatType,config:r}),...n}}if(ld(a)==="temporal"&&r.timeFormatType&&he(a)&&!a.timeUnit)return{text:ta({fieldOrDatumDef:a,field:"datum.value",format:r.timeFormat,formatType:r.timeFormatType,config:r}),...n}}return n}function OSe(e){return so.reduce((t,n)=>(e.component.scales[n]&&(t[n]=[USe(n,e)]),t),{})}const DSe={bottom:"top",top:"bottom",left:"right",right:"left"};function RSe(e){const{axes:t,resolve:n}=e.component,i={top:0,bottom:0,right:0,left:0};for(const r of e.children){r.parseAxesAndHeaders();for(const a of le(r.component.axes))n.axis[a]=dk(e.component.resolve,a),n.axis[a]==="shared"&&(t[a]=NSe(t[a],r.component.axes[a]),t[a]||(n.axis[a]="independent",delete t[a]))}for(const r of so){for(const a of e.children)if(a.component.axes[r]){if(n.axis[r]==="independent"){t[r]=(t[r]??[]).concat(a.component.axes[r]);for(const s of a.component.axes[r]){const{value:o,explicit:l}=s.getWithExplicit("orient");if(!Ce(o)){if(i[o]>0&&!l){const f=DSe[o];i[o]>i[f]&&s.set("orient",f,!1)}i[o]++}}}delete a.component.axes[r]}if(n.axis[r]==="independent"&&t[r]&&t[r].length>1)for(const[a,s]of(t[r]||[]).entries())a>0&&s.get("grid")&&!s.explicit.grid&&(s.implicit.grid=!1)}}function NSe(e,t){if(e){if(e.length!==t.length)return;const n=e.length;for(let i=0;i<n;i++){const r=e[i],a=t[i];if(!!r!=!!a)return;if(r&&a){const s=r.getWithExplicit("orient"),o=a.getWithExplicit("orient");if(s.explicit&&o.explicit&&s.value!==o.value)return;e[i]=zSe(r,a)}}}else return t.map(n=>n.clone());return e}function zSe(e,t){for(const n of JG){const i=vu(e.getWithExplicit(n),t.getWithExplicit(n),n,"axis",(r,a)=>{switch(n){case"title":return sj(r,a);case"gridScale":return{explicit:r.explicit,value:Wt(r.value,a.value)}}return mx(r,a,n,"axis")});e.setWithExplicit(n,i)}return e}function FSe(e,t,n,i,r){if(t==="disable")return n!==void 0;switch(n=n||{},t){case"titleAngle":case"labelAngle":return e===(Ce(n.labelAngle)?n.labelAngle:wp(n.labelAngle));case"values":return!!n.values;case"encode":return!!n.encoding||!!n.labelAngle;case"title":if(e===vG(i,r))return!0}return e===n[t]}const LSe=new Set(["grid","translate","format","formatType","orient","labelExpr","tickCount","position","tickMinStep"]);function USe(e,t){var _,w;let n=t.axis(e);const i=new Ek,r=cn(t.encoding[e]),{mark:a,config:s}=t,o=(n==null?void 0:n.orient)||((_=s[e==="x"?"axisX":"axisY"])==null?void 0:_.orient)||((w=s.axis)==null?void 0:w.orient)||w2e(e),l=t.getScaleComponent(e).get("type"),f=y2e(e,l,o,t.config),d=n!==void 0?!n:VA("disable",s.style,n==null?void 0:n.style,f).configValue;if(i.set("disable",d,n!==void 0),d)return i;n=n||{};const g=E2e(r,n,e,s.style,f),p=qj(n.formatType,r,l),y=Pj(r,r.type,n.format,n.formatType,s,!0),v={fieldOrDatumDef:r,axis:n,channel:e,model:t,scaleType:l,orient:o,labelAngle:g,format:y,formatType:p,mark:a,config:s};for(const A of JG){const $=A in y8?y8[A](v):Hz(A)?n[A]:void 0,C=$!==void 0,k=FSe($,A,n,t,e);if(C&&k)i.set(A,$,k);else{const{configValue:M=void 0,configFrom:R=void 0}=Hz(A)&&A!=="values"?VA(A,s.style,n.style,f):{},z=M!==void 0;C&&!z?i.set(A,$,k):(R!=="vgAxisConfig"||LSe.has(A)&&z||b0(M)||Ce(M))&&i.set(A,M,!1)}}const b=n.encoding??{},E=tH.reduce((A,$)=>{if(!i.hasAxisPart($))return A;const C=wG(b[$]??{},t),k=$==="labels"?kSe(t,e,C):C;return k!==void 0&&!At(k)&&(A[$]={update:k}),A},{});return At(E)||i.set("encode",E,!!n.encoding||n.labelAngle!==void 0),i}function BSe({encoding:e,size:t}){for(const n of so){const i=Ui(n);Qa(t[i])&&Ko(e[n])&&(delete t[i],de(fj(i)))}return t}const ISe={vgMark:"arc",encodeEntry:e=>({...Br(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...gi("x",e,{defaultPos:"mid"}),...gi("y",e,{defaultPos:"mid"}),...Ks(e,"radius"),...Ks(e,"theta")})},PSe={vgMark:"area",encodeEntry:e=>({...Br(e,{align:"ignore",baseline:"ignore",color:"include",orient:"include",size:"ignore",theta:"ignore"}),...wv("x",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="horizontal"}),...wv("y",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="vertical"}),...ok(e)})},qSe={vgMark:"rect",encodeEntry:e=>({...Br(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...Ks(e,"x"),...Ks(e,"y")})},jSe={vgMark:"shape",encodeEntry:e=>({...Br(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"})}),postEncodingTransform:e=>{const{encoding:t}=e,n=t.shape;return[{type:"geoshape",projection:e.projectionName(),...n&&he(n)&&n.type===Ud?{field:me(n,{expr:"datum"})}:{}}]}},HSe={vgMark:"image",encodeEntry:e=>({...Br(e,{align:"ignore",baseline:"ignore",color:"ignore",orient:"ignore",size:"ignore",theta:"ignore"}),...Ks(e,"x"),...Ks(e,"y"),...ak(e,"url")})},GSe={vgMark:"line",encodeEntry:e=>({...Br(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...gi("x",e,{defaultPos:"mid"}),...gi("y",e,{defaultPos:"mid"}),...zn("size",e,{vgChannel:"strokeWidth"}),...ok(e)})},YSe={vgMark:"trail",encodeEntry:e=>({...Br(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...gi("x",e,{defaultPos:"mid"}),...gi("y",e,{defaultPos:"mid"}),...zn("size",e),...ok(e)})};function Sk(e,t){const{config:n}=e;return{...Br(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...gi("x",e,{defaultPos:"mid"}),...gi("y",e,{defaultPos:"mid"}),...zn("size",e),...zn("angle",e),...XSe(e,n,t)}}function XSe(e,t,n){return n?{shape:{value:n}}:zn("shape",e)}const VSe={vgMark:"symbol",encodeEntry:e=>Sk(e)},WSe={vgMark:"symbol",encodeEntry:e=>Sk(e,"circle")},QSe={vgMark:"symbol",encodeEntry:e=>Sk(e,"square")},ZSe={vgMark:"rect",encodeEntry:e=>({...Br(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...Ks(e,"x"),...Ks(e,"y")})},KSe={vgMark:"rule",encodeEntry:e=>{const{markDef:t}=e,n=t.orient;return!e.encoding.x&&!e.encoding.y&&!e.encoding.latitude&&!e.encoding.longitude?{}:{...Br(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...wv("x",e,{defaultPos:n==="horizontal"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="vertical"}),...wv("y",e,{defaultPos:n==="vertical"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="horizontal"}),...zn("size",e,{vgChannel:"strokeWidth"})}}},JSe={vgMark:"text",encodeEntry:e=>{const{config:t,encoding:n}=e;return{...Br(e,{align:"include",baseline:"include",color:"include",size:"ignore",orient:"ignore",theta:"include"}),...gi("x",e,{defaultPos:"mid"}),...gi("y",e,{defaultPos:"mid"}),...ak(e),...zn("size",e,{vgChannel:"fontSize"}),...zn("angle",e),...h8("align",e_e(e.markDef,n,t)),...h8("baseline",t_e(e.markDef,n,t)),...gi("radius",e,{defaultPos:null}),...gi("theta",e,{defaultPos:null})}}};function e_e(e,t,n){if(Et("align",e,n)===void 0)return"center"}function t_e(e,t,n){if(Et("baseline",e,n)===void 0)return"middle"}const n_e={vgMark:"rect",encodeEntry:e=>{const{config:t,markDef:n}=e,i=n.orient,r=i==="horizontal"?"x":"y",a=i==="horizontal"?"y":"x",s=i==="horizontal"?"height":"width";return{...Br(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...Ks(e,r),...gi(a,e,{defaultPos:"mid",vgChannel:a==="y"?"yc":"xc"}),[s]:Mt(Et("thickness",n,t))}}},b1={arc:ISe,area:PSe,bar:qSe,circle:WSe,geoshape:jSe,image:HSe,line:GSe,point:VSe,rect:ZSe,rule:KSe,square:QSe,text:JSe,tick:n_e,trail:YSe};function i_e(e){if(Ve([ax,ix,cve],e.mark)){const t=uH(e.mark,e.encoding);if(t.length>0)return r_e(e,t)}else if(e.mark===rx){const t=DA.some(n=>Et(n,e.markDef,e.config));if(e.stack&&!e.fieldDef("size")&&t)return a_e(e)}return _k(e)}const D8="faceted_path_";function r_e(e,t){return[{name:e.getName("pathgroup"),type:"group",from:{facet:{name:D8+e.requestDataName(Lt.Main),data:e.requestDataName(Lt.Main),groupby:t}},encode:{update:{width:{field:{group:"width"}},height:{field:{group:"height"}}}},marks:_k(e,{fromPrefix:D8})}]}const R8="stack_group_";function a_e(e){var f;const[t]=_k(e,{fromPrefix:R8}),n=e.scaleName(e.stack.fieldChannel),i=(d={})=>e.vgField(e.stack.fieldChannel,d),r=(d,g)=>{const p=[i({prefix:"min",suffix:"start",expr:g}),i({prefix:"max",suffix:"start",expr:g}),i({prefix:"min",suffix:"end",expr:g}),i({prefix:"max",suffix:"end",expr:g})];return`${d}(${p.map(y=>`scale('${n}',${y})`).join(",")})`};let a,s;e.stack.fieldChannel==="x"?(a={...id(t.encode.update,["y","yc","y2","height",...DA]),x:{signal:r("min","datum")},x2:{signal:r("max","datum")},clip:{value:!0}},s={x:{field:{group:"x"},mult:-1},height:{field:{group:"height"}}},t.encode.update={...ar(t.encode.update,["y","yc","y2"]),height:{field:{group:"height"}}}):(a={...id(t.encode.update,["x","xc","x2","width"]),y:{signal:r("min","datum")},y2:{signal:r("max","datum")},clip:{value:!0}},s={y:{field:{group:"y"},mult:-1},width:{field:{group:"width"}}},t.encode.update={...ar(t.encode.update,["x","xc","x2"]),width:{field:{group:"width"}}});for(const d of DA){const g=Va(d,e.markDef,e.config);t.encode.update[d]?(a[d]=t.encode.update[d],delete t.encode.update[d]):g&&(a[d]=Mt(g)),g&&(t.encode.update[d]={value:0})}const o=[];if(((f=e.stack.groupbyChannels)==null?void 0:f.length)>0)for(const d of e.stack.groupbyChannels){const g=e.fieldDef(d),p=me(g);p&&o.push(p),(g!=null&&g.bin||g!=null&&g.timeUnit)&&o.push(me(g,{binSuffix:"end"}))}return a=["stroke","strokeWidth","strokeJoin","strokeCap","strokeDash","strokeDashOffset","strokeMiterLimit","strokeOpacity"].reduce((d,g)=>{if(t.encode.update[g])return{...d,[g]:t.encode.update[g]};{const p=Va(g,e.markDef,e.config);return p!==void 0?{...d,[g]:Mt(p)}:d}},a),a.stroke&&(a.strokeForeground={value:!0},a.strokeOffset={value:0}),[{type:"group",from:{facet:{data:e.requestDataName(Lt.Main),name:R8+e.requestDataName(Lt.Main),groupby:o,aggregate:{fields:[i({suffix:"start"}),i({suffix:"start"}),i({suffix:"end"}),i({suffix:"end"})],ops:["min","max","min","max"]}}},encode:{update:a},marks:[{type:"group",encode:{update:s},marks:[t]}]}]}function s_e(e){const{encoding:t,stack:n,mark:i,markDef:r,config:a}=e,s=t.order;if(!(!re(s)&&ua(s)&&kA(s.value)||!s&&kA(Et("order",r,a)))){if((re(s)||he(s))&&!n)return ij(s,{expr:"datum"});if(Nu(i)){const o=r.orient==="horizontal"?"y":"x",l=t[o];if(he(l))return{field:o}}}}function _k(e,t={fromPrefix:""}){const{mark:n,markDef:i,encoding:r,config:a}=e,s=Wt(i.clip,o_e(e),u_e(e)),o=tj(i),l=r.key,f=s_e(e),d=l_e(e),g=Et("aria",i,a),p=b1[n].postEncodingTransform?b1[n].postEncodingTransform(e):null;return[{name:e.getName("marks"),type:b1[n].vgMark,...s?{clip:s}:{},...o?{style:o}:{},...l?{key:l.field}:{},...f?{sort:f}:{},...d||{},...g===!1?{aria:g}:{},from:{data:t.fromPrefix+e.requestDataName(Lt.Main)},encode:{update:b1[n].encodeEntry(e)},...p?{transform:p}:{}}]}function o_e(e){const t=e.getScaleComponent("x"),n=e.getScaleComponent("y");return t!=null&&t.get("selectionExtent")||n!=null&&n.get("selectionExtent")?!0:void 0}function u_e(e){const t=e.component.projection;return t&&!t.isFit?!0:void 0}function l_e(e){if(!e.component.selection)return null;const t=le(e.component.selection).length;let n=t,i=e.parent;for(;i&&n===0;)n=le(i.component.selection).length,i=i.parent;return n?{interactive:t>0||e.mark==="geoshape"||!!e.encoding.tooltip||!!e.markDef.tooltip}:null}class eY extends WG{constructor(n,i,r,a={},s){super(n,"unit",i,r,s,void 0,Yz(n)?n.view:void 0);oe(this,"markDef");oe(this,"encoding");oe(this,"specifiedScales",{});oe(this,"stack");oe(this,"specifiedAxes",{});oe(this,"specifiedLegends",{});oe(this,"specifiedProjection",{});oe(this,"selection",[]);oe(this,"children",[]);oe(this,"correctDataNames",n=>{var i,r,a;return(i=n.from)!=null&&i.data&&(n.from.data=this.lookupDataSource(n.from.data),"time"in this.encoding&&(n.from.data=n.from.data+jH)),(a=(r=n.from)==null?void 0:r.facet)!=null&&a.data&&(n.from.facet.data=this.lookupDataSource(n.from.facet.data)),n});const o=Wa(n.mark)?{...n.mark}:{type:n.mark},l=o.type;o.filled===void 0&&(o.filled=Xbe(o,s,{graticule:n.data&&ik(n.data)}));const f=this.encoding=Zve(n.encoding||{},l,o.filled,s);this.markDef=MH(o,f,s),this.size=BSe({encoding:f,size:Yz(n)?{...a,...n.width?{width:n.width}:{},...n.height?{height:n.height}:{}}:a}),this.stack=TH(this.markDef,f),this.specifiedScales=this.initScales(l,f),this.specifiedAxes=this.initAxes(f),this.specifiedLegends=this.initLegends(f),this.specifiedProjection=n.projection,this.selection=(n.params??[]).filter(d=>KM(d))}get hasProjection(){const{encoding:n}=this,i=this.mark===Nj,r=n&&jme.some(a=>Be(n[a]));return i||r}scaleDomain(n){const i=this.specifiedScales[n];return i?i.domain:void 0}axis(n){return this.specifiedAxes[n]}legend(n){return this.specifiedLegends[n]}initScales(n,i){return gM.reduce((r,a)=>{const s=cn(i[a]);return s&&(r[a]=this.initScale(s.scale??{})),r},{})}initScale(n){const{domain:i,range:r}=n,a=Rn(n);return re(i)&&(a.domain=i.map(Ji)),re(r)&&(a.range=r.map(Ji)),a}initAxes(n){return so.reduce((i,r)=>{const a=n[r];if(Be(a)||r===Rt&&Be(n.x2)||r===Tn&&Be(n.y2)){const s=Be(a)?a.axis:void 0;i[r]=s&&this.initAxis({...s})}return i},{})}initAxis(n){const i=le(n),r={};for(const a of i){const s=n[a];r[a]=b0(s)?ej(s):Ji(s)}return r}initLegends(n){return e1e.reduce((i,r)=>{const a=cn(n[r]);if(a&&n1e(r)){const s=a.legend;i[r]=s&&Rn(s)}return i},{})}parseData(){this.component.data=Rx(this)}parseLayoutSize(){SSe(this)}parseSelections(){this.component.selection=h2e(this,this.selection)}parseMarkGroup(){this.component.mark=i_e(this)}parseAxesAndHeaders(){this.component.axes=OSe(this)}assembleSelectionTopLevelSignals(n){return Ixe(this,n)}assembleSignals(){return[...pG(this),...Uxe(this,[])]}assembleSelectionData(n){return Pxe(this,n)}assembleLayout(){return null}assembleLayoutSignals(){return fk(this)}assembleMarks(){let n=this.component.mark??[];return(!this.parent||!jd(this.parent))&&(n=XH(this,n)),n.map(this.correctDataNames)}assembleGroupStyle(){const{style:n}=this.view||{};return n!==void 0?n:this.encoding.x||this.encoding.y?"cell":"view"}getMapping(){return this.encoding}get mark(){return this.markDef.type}channelHasField(n){return Tl(this.encoding,n)}fieldDef(n){const i=this.encoding[n];return la(i)}typedFieldDef(n){const i=this.fieldDef(n);return bi(i)?i:null}}class wk extends bk{constructor(n,i,r,a,s){super(n,"layer",i,r,s,n.resolve,n.view);oe(this,"children");const o={...a,...n.width?{width:n.width}:{},...n.height?{height:n.height}:{}};this.children=n.layer.map((l,f)=>{if(px(l))return new wk(l,this,this.getName(`layer_${f}`),o,s);if(oo(l))return new eY(l,this,this.getName(`layer_${f}`),o,s);throw new Error(mM(l))})}parseData(){this.component.data=Rx(this);for(const n of this.children)n.parseData()}parseLayoutSize(){xSe(this)}parseSelections(){this.component.selection={};for(const n of this.children){n.parseSelections();for(const i of le(n.component.selection))this.component.selection[i]=n.component.selection[i]}nn(this.component.selection).some(n=>Ia(n))&&bM(vM)}parseMarkGroup(){for(const n of this.children)n.parseMarkGroup()}parseAxesAndHeaders(){RSe(this)}assembleSelectionTopLevelSignals(n){return this.children.reduce((i,r)=>r.assembleSelectionTopLevelSignals(i),n)}assembleSignals(){return this.children.reduce((n,i)=>n.concat(i.assembleSignals()),pG(this))}assembleLayoutSignals(){return this.children.reduce((n,i)=>n.concat(i.assembleLayoutSignals()),fk(this))}assembleSelectionData(n){return this.children.reduce((i,r)=>r.assembleSelectionData(i),n)}assembleGroupStyle(){const n=new Set;for(const r of this.children)for(const a of Ee(r.assembleGroupStyle()))n.add(a);const i=Array.from(n);return i.length>1?i:i.length===1?i[0]:void 0}assembleTitle(){let n=super.assembleTitle();if(n)return n;for(const i of this.children)if(n=i.assembleTitle(),n)return n}assembleLayout(){return null}assembleMarks(){return qxe(this,this.children.flatMap(n=>n.assembleMarks()))}assembleLegends(){return this.children.reduce((n,i)=>n.concat(i.assembleLegends()),DG(this))}}function Ak(e,t,n,i,r){if(ux(e))return new Kg(e,t,n,r);if(px(e))return new wk(e,t,n,i,r);if(oo(e))return new eY(e,t,n,i,r);if(Ebe(e))return new CSe(e,t,n,r);throw new Error(mM(e))}function c_e(e,t={}){t.logger&&wye(t.logger),t.fieldTitle&&Kj(t.fieldTitle);try{const n=CH(bd(t.config,e.config)),i=FH(e,n),r=Ak(i,null,"",void 0,n);return r.parse(),NEe(r.component.data,r),{spec:d_e(r,f_e(e,i.autosize,n,r),e.datasets,e.usermeta),normalized:i}}finally{t.logger&&Aye(),t.fieldTitle&&qve()}}function f_e(e,t,n,i){const r=i.component.layoutSize.get("width"),a=i.component.layoutSize.get("height");if(t===void 0?(t={type:"pad"},i.hasAxisOrientSignalRef()&&(t.resize=!0)):ve(t)&&(t={type:t}),r&&a&&Txe(t.type)){if(r==="step"&&a==="step")de(kz()),t.type="pad";else if(r==="step"||a==="step"){const s=r==="step"?"width":"height";de(kz(Zb(s)));const o=s==="width"?"height":"width";t.type=Mxe(o)}}return{...le(t).length===1&&t.type?t.type==="pad"?{}:{autosize:t.type}:{autosize:t},...r8(n,!1),...r8(e,!0)}}function d_e(e,t,n={},i){const r=e.config?zbe(e.config):void 0,a=mSe(e.component.data,n),s=e.assembleSelectionData(a),o=e.assembleProjections(),l=e.assembleTitle(),f=e.assembleGroupStyle(),d=e.assembleGroupEncodeEntry(!0);let g=e.assembleLayoutSignals();g=g.filter(v=>(v.name==="width"||v.name==="height")&&v.value!==void 0?(t[v.name]=+v.value,!1):!0);const{params:p,...y}=t;return{$schema:"https://vega.github.io/schema/vega/v6.json",...e.description?{description:e.description}:{},...y,...l?{title:l}:{},...f?{style:f}:{},...d?{encode:{update:d}}:{},data:s,...o.length>0?{projections:o}:{},...e.assembleGroup([...g,...e.assembleSelectionTopLevelSignals([]),..._H(p)]),...r?{config:r}:{},...i?{usermeta:i}:{}}}const h_e=Lme.version,g_e=Object.freeze(Object.defineProperty({__proto__:null,accessPathDepth:ad,accessPathWithDatum:sM,accessWithDatumToUnescapedPath:pt,compile:c_e,contains:Ve,deepEqual:tr,deleteNestedProperty:gv,duplicate:Le,entries:pu,every:iM,fieldIntersection:aM,flatAccessWithDatum:zq,getFirstDefined:Wt,hasIntersection:rM,hasProperty:ce,hash:Ze,internalField:Uq,isBoolean:_p,isEmpty:At,isEqual:Bme,isInternalField:Bq,isNullOrFalse:kA,isNumeric:Gb,keys:le,logicalExpr:Qg,mergeDeep:Rq,never:Dq,normalize:FH,normalizeAngle:wp,omit:ar,pick:id,prefixGenerator:OA,removePathFromField:Fd,replaceAll:Hl,replacePathInField:zr,resetIdCounter:Pme,setEqual:Nq,some:rd,stringify:dt,titleCase:u0,unique:Na,uniqueId:Lq,vals:nn,varName:Dt,version:h_e},Symbol.toStringTag,{value:"Module"}));function tY(e){const[t,n]=/schema\/([\w-]+)\/([\w\.\-]+)\.json$/g.exec(e).slice(1,3);return{library:t,version:n}}var p_e="3.0.0",m_e={version:p_e};const pf="#fff",N8="#888",y_e={background:"#333",view:{stroke:N8},title:{color:pf,subtitleColor:pf},style:{"guide-label":{fill:pf},"guide-title":{fill:pf}},axis:{domainColor:pf,gridColor:N8,tickColor:pf}},il="#4572a7",v_e={background:"#fff",arc:{fill:il},area:{fill:il},line:{stroke:il,strokeWidth:2},path:{stroke:il},rect:{fill:il},shape:{stroke:il},symbol:{fill:il,strokeWidth:1.5,size:50},axis:{bandPosition:.5,grid:!0,gridColor:"#000000",gridOpacity:1,gridWidth:.5,labelPadding:10,tickSize:5,tickWidth:.5},axisBand:{grid:!1,tickExtra:!0},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:50,symbolType:"square"},range:{category:["#4572a7","#aa4643","#8aa453","#71598e","#4598ae","#d98445","#94aace","#d09393","#b9cc98","#a99cbc"]}},rl="#30a2da",S_="#cbcbcb",b_e="#999",x_e="#333",z8="#f0f0f0",F8="#333",E_e={arc:{fill:rl},area:{fill:rl},axis:{domainColor:S_,grid:!0,gridColor:S_,gridWidth:1,labelColor:b_e,labelFontSize:10,titleColor:x_e,tickColor:S_,tickSize:10,titleFontSize:14,titlePadding:10,labelPadding:4},axisBand:{grid:!1},background:z8,group:{fill:z8},legend:{labelColor:F8,labelFontSize:11,padding:1,symbolSize:30,symbolType:"square",titleColor:F8,titleFontSize:14,titlePadding:10},line:{stroke:rl,strokeWidth:2},path:{stroke:rl,strokeWidth:.5},rect:{fill:rl},range:{category:["#30a2da","#fc4f30","#e5ae38","#6d904f","#8b8b8b","#b96db8","#ff9e27","#56cc60","#52d2ca","#52689e","#545454","#9fe4f8"],diverging:["#cc0020","#e77866","#f6e7e1","#d6e8ed","#91bfd9","#1d78b5"],heatmap:["#d6e8ed","#cee0e5","#91bfd9","#549cc6","#1d78b5"]},point:{filled:!0,shape:"circle"},shape:{stroke:rl},bar:{binSpacing:2,fill:rl,stroke:null},title:{anchor:"start",fontSize:24,fontWeight:600,offset:20}},al="#000",S_e={group:{fill:"#e5e5e5"},arc:{fill:al},area:{fill:al},line:{stroke:al},path:{stroke:al},rect:{fill:al},shape:{stroke:al},symbol:{fill:al,size:40},axis:{domain:!1,grid:!0,gridColor:"#FFFFFF",gridOpacity:1,labelColor:"#7F7F7F",labelPadding:4,tickColor:"#7F7F7F",tickSize:5.67,titleFontSize:16,titleFontWeight:"normal"},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:40},range:{category:["#000000","#7F7F7F","#1A1A1A","#999999","#333333","#B0B0B0","#4D4D4D","#C9C9C9","#666666","#DCDCDC"]}},__e=22,w_e="normal",L8="Benton Gothic, sans-serif",U8=11.5,A_e="normal",sl="#82c6df",__="Benton Gothic Bold, sans-serif",B8="normal",I8=13,fg={"category-6":["#ec8431","#829eb1","#c89d29","#3580b1","#adc839","#ab7fb4"],"fire-7":["#fbf2c7","#f9e39c","#f8d36e","#f4bb6a","#e68a4f","#d15a40","#ab4232"],"fireandice-6":["#e68a4f","#f4bb6a","#f9e39c","#dadfe2","#a6b7c6","#849eae"]},$_e={background:"#ffffff",title:{anchor:"start",color:"#000000",font:__,fontSize:__e,fontWeight:w_e},arc:{fill:sl},area:{fill:sl},line:{stroke:sl,strokeWidth:2},path:{stroke:sl},rect:{fill:sl},shape:{stroke:sl},symbol:{fill:sl,size:30},axis:{labelFont:L8,labelFontSize:U8,labelFontWeight:A_e,titleFont:__,titleFontSize:I8,titleFontWeight:B8},axisX:{labelAngle:0,labelPadding:4,tickSize:3},axisY:{labelBaseline:"middle",maxExtent:45,minExtent:45,tickSize:2,titleAlign:"left",titleAngle:0,titleX:-45,titleY:-11},legend:{labelFont:L8,labelFontSize:U8,symbolType:"square",titleFont:__,titleFontSize:I8,titleFontWeight:B8},range:{category:fg["category-6"],diverging:fg["fireandice-6"],heatmap:fg["fire-7"],ordinal:fg["fire-7"],ramp:fg["fire-7"]}},ol="#ab5787",x1="#979797",C_e={background:"#f9f9f9",arc:{fill:ol},area:{fill:ol},line:{stroke:ol},path:{stroke:ol},rect:{fill:ol},shape:{stroke:ol},symbol:{fill:ol,size:30},axis:{domainColor:x1,domainWidth:.5,gridWidth:.2,labelColor:x1,tickColor:x1,tickWidth:.2,titleColor:x1},axisBand:{grid:!1},axisX:{grid:!0,tickSize:10},axisY:{domain:!1,grid:!0,tickSize:0},legend:{labelFontSize:11,padding:1,symbolSize:30,symbolType:"square"},range:{category:["#ab5787","#51b2e5","#703c5c","#168dd9","#d190b6","#00609f","#d365ba","#154866","#666666","#c4c4c4"]}},ul="#3e5c69",T_e={background:"#fff",arc:{fill:ul},area:{fill:ul},line:{stroke:ul},path:{stroke:ul},rect:{fill:ul},shape:{stroke:ul},symbol:{fill:ul},axis:{domainWidth:.5,grid:!0,labelPadding:2,tickSize:5,tickWidth:.5,titleFontWeight:"normal"},axisBand:{grid:!1},axisX:{gridWidth:.2},axisY:{gridDash:[3],gridWidth:.4},legend:{labelFontSize:11,padding:1,symbolType:"square"},range:{category:["#3e5c69","#6793a6","#182429","#0570b0","#3690c0","#74a9cf","#a6bddb","#e2ddf2"]}},Er="#1696d2",P8="#000000",M_e="#FFFFFF",E1="Lato",w_="Lato",k_e="Lato",O_e="#DEDDDD",D_e=18,dg={"shades-blue":["#CFE8F3","#A2D4EC","#73BFE2","#46ABDB","#1696D2","#12719E","#0A4C6A","#062635"],"six-groups-cat-1":["#1696d2","#ec008b","#fdbf11","#000000","#d2d2d2","#55b748"],"six-groups-seq":["#cfe8f3","#a2d4ec","#73bfe2","#46abdb","#1696d2","#12719e"],"diverging-colors":["#ca5800","#fdbf11","#fdd870","#fff2cf","#cfe8f3","#73bfe2","#1696d2","#0a4c6a"]},R_e={background:M_e,title:{anchor:"start",fontSize:D_e,font:E1},axisX:{domain:!0,domainColor:P8,domainWidth:1,grid:!1,labelFontSize:12,labelFont:w_,labelAngle:0,tickColor:P8,tickSize:5,titleFontSize:12,titlePadding:10,titleFont:E1},axisY:{domain:!1,domainWidth:1,grid:!0,gridColor:O_e,gridWidth:1,labelFontSize:12,labelFont:w_,labelPadding:8,ticks:!1,titleFontSize:12,titlePadding:10,titleFont:E1,titleAngle:0,titleY:-10,titleX:18},legend:{labelFontSize:12,labelFont:w_,symbolSize:100,titleFontSize:12,titlePadding:10,titleFont:E1,orient:"right",offset:10},view:{stroke:"transparent"},range:{category:dg["six-groups-cat-1"],diverging:dg["diverging-colors"],heatmap:dg["diverging-colors"],ordinal:dg["six-groups-seq"],ramp:dg["shades-blue"]},area:{fill:Er},rect:{fill:Er},line:{color:Er,stroke:Er,strokeWidth:5},trail:{color:Er,stroke:Er,strokeWidth:0,size:1},path:{stroke:Er,strokeWidth:.5},point:{filled:!0},text:{font:k_e,color:Er,fontSize:11,align:"center",fontWeight:400,size:11},style:{bar:{fill:Er,stroke:null}},arc:{fill:Er},shape:{stroke:Er},symbol:{fill:Er,size:30}},ll="#3366CC",q8="#ccc",S1="Arial, sans-serif",N_e={arc:{fill:ll},area:{fill:ll},path:{stroke:ll},rect:{fill:ll},shape:{stroke:ll},symbol:{stroke:ll},circle:{fill:ll},background:"#fff",padding:{top:10,right:10,bottom:10,left:10},style:{"guide-label":{font:S1,fontSize:12},"guide-title":{font:S1,fontSize:12},"group-title":{font:S1,fontSize:12}},title:{font:S1,fontSize:14,fontWeight:"bold",dy:-3,anchor:"start"},axis:{gridColor:q8,tickColor:q8,domain:!1,grid:!0},range:{category:["#4285F4","#DB4437","#F4B400","#0F9D58","#AB47BC","#00ACC1","#FF7043","#9E9D24","#5C6BC0","#F06292","#00796B","#C2185B"],heatmap:["#c6dafc","#5e97f6","#2a56c6"]}},$k=e=>e*(1/3+1),j8=$k(9),H8=$k(10),G8=$k(12),hg="Segoe UI",Y8="wf_standard-font, helvetica, arial, sans-serif",X8="#252423",gg="#605E5C",V8="transparent",z_e="#C8C6C4",Gr="#118DFF",F_e="#12239E",L_e="#E66C37",U_e="#6B007B",B_e="#E044A7",I_e="#744EC2",P_e="#D9B300",q_e="#D64550",nY=Gr,iY="#DEEFFF",W8=[iY,nY],j_e=[iY,"#c7e4ff","#b0d9ff","#9aceff","#83c3ff","#6cb9ff","#55aeff","#3fa3ff","#2898ff",nY],H_e={view:{stroke:V8},background:V8,font:hg,header:{titleFont:Y8,titleFontSize:G8,titleColor:X8,labelFont:hg,labelFontSize:H8,labelColor:gg},axis:{ticks:!1,grid:!1,domain:!1,labelColor:gg,labelFontSize:j8,titleFont:Y8,titleColor:X8,titleFontSize:G8,titleFontWeight:"normal"},axisQuantitative:{tickCount:3,grid:!0,gridColor:z_e,gridDash:[1,5],labelFlush:!1},axisBand:{tickExtra:!0},axisX:{labelPadding:5},axisY:{labelPadding:10},bar:{fill:Gr},line:{stroke:Gr,strokeWidth:3,strokeCap:"round",strokeJoin:"round"},text:{font:hg,fontSize:j8,fill:gg},arc:{fill:Gr},area:{fill:Gr,line:!0,opacity:.6},path:{stroke:Gr},rect:{fill:Gr},point:{fill:Gr,filled:!0,size:75},shape:{stroke:Gr},symbol:{fill:Gr,strokeWidth:1.5,size:50},legend:{titleFont:hg,titleFontWeight:"bold",titleColor:gg,labelFont:hg,labelFontSize:H8,labelColor:gg,symbolType:"circle",symbolSize:75},range:{category:[Gr,F_e,L_e,U_e,B_e,I_e,P_e,q_e],diverging:W8,heatmap:W8,ordinal:j_e}},A_='IBM Plex Sans,system-ui,-apple-system,BlinkMacSystemFont,".sfnstext-regular",sans-serif',G_e='IBM Plex Sans Condensed, system-ui, -apple-system, BlinkMacSystemFont, ".SFNSText-Regular", sans-serif',$_=400,_1={textPrimary:{g90:"#f4f4f4",g100:"#f4f4f4",white:"#161616",g10:"#161616"},textSecondary:{g90:"#c6c6c6",g100:"#c6c6c6",white:"#525252",g10:"#525252"},layerAccent01:{white:"#e0e0e0",g10:"#e0e0e0",g90:"#525252",g100:"#393939"},gridBg:{white:"#ffffff",g10:"#ffffff",g90:"#161616",g100:"#161616"}},Y_e=["#8a3ffc","#33b1ff","#007d79","#ff7eb6","#fa4d56","#fff1f1","#6fdc8c","#4589ff","#d12771","#d2a106","#08bdba","#bae6ff","#ba4e00","#d4bbff"],X_e=["#6929c4","#1192e8","#005d5d","#9f1853","#fa4d56","#570408","#198038","#002d9c","#ee538b","#b28600","#009d9a","#012749","#8a3800","#a56eff"];function Nx({theme:e,background:t}){const n=["white","g10"].includes(e)?"light":"dark",i=_1.gridBg[e],r=_1.textPrimary[e],a=_1.textSecondary[e],s=n==="dark"?Y_e:X_e,o=n==="dark"?"#d4bbff":"#6929c4";return{background:t,arc:{fill:o},area:{fill:o},path:{stroke:o},rect:{fill:o},shape:{stroke:o},symbol:{stroke:o},circle:{fill:o},view:{fill:i,stroke:i},group:{fill:i},title:{color:r,anchor:"start",dy:-15,fontSize:16,font:A_,fontWeight:600},axis:{labelColor:a,labelFontSize:12,labelFont:G_e,labelFontWeight:$_,titleColor:r,titleFontWeight:600,titleFontSize:12,grid:!0,gridColor:_1.layerAccent01[e],labelAngle:0},axisX:{titlePadding:10},axisY:{titlePadding:2.5},style:{"guide-label":{font:A_,fill:a,fontWeight:$_},"guide-title":{font:A_,fill:a,fontWeight:$_}},range:{category:s,diverging:["#750e13","#a2191f","#da1e28","#fa4d56","#ff8389","#ffb3b8","#ffd7d9","#fff1f1","#e5f6ff","#bae6ff","#82cfff","#33b1ff","#1192e8","#0072c3","#00539a","#003a6d"],heatmap:["#f6f2ff","#e8daff","#d4bbff","#be95ff","#a56eff","#8a3ffc","#6929c4","#491d8b","#31135e","#1c0f30"]}}}const V_e=Nx({theme:"white",background:"#ffffff"}),W_e=Nx({theme:"g10",background:"#f4f4f4"}),Q_e=Nx({theme:"g90",background:"#262626"}),Z_e=Nx({theme:"g100",background:"#161616"}),K_e=m_e.version,J_e=Object.freeze(Object.defineProperty({__proto__:null,carbong10:W_e,carbong100:Z_e,carbong90:Q_e,carbonwhite:V_e,dark:y_e,excel:v_e,fivethirtyeight:E_e,ggplot2:S_e,googlecharts:N_e,latimes:$_e,powerbi:H_e,quartz:C_e,urbaninstitute:R_e,version:K_e,vox:T_e},Symbol.toStringTag,{value:"Module"}));function ewe(e,t,n,i){if(re(e))return`[${e.map(r=>t(ve(r)?r:Q8(r,n))).join(", ")}]`;if(be(e)){let r="";const{title:a,image:s,...o}=e;a&&(r+=`<h2>${t(a)}</h2>`),s&&(r+=`<img src="${new URL(t(s),i||location.href).href}">`);const l=Object.keys(o);if(l.length>0){r+="<table>";for(const f of l){let d=o[f];d!==void 0&&(be(d)&&(d=Q8(d,n)),r+=`<tr><td class="key">${t(f)}</td><td class="value">${t(d)}</td></tr>`)}r+="</table>"}return r||"{}"}return t(e)}function twe(e){const t=[];return function(n,i){if(typeof i!="object"||i===null)return i;const r=t.indexOf(this)+1;return t.length=r,t.length>e?"[Object]":t.indexOf(i)>=0?"[Circular]":(t.push(i),i)}}function Q8(e,t){return JSON.stringify(e,twe(t))}var nwe=`#vg-tooltip-element {
  visibility: hidden;
  padding: 8px;
  position: fixed;
  z-index: 1000;
  font-family: sans-serif;
  font-size: 11px;
  border-radius: 3px;
  box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
  /* The default theme is the light theme. */
  background-color: rgba(255, 255, 255, 0.95);
  border: 1px solid #d9d9d9;
  color: black;
}
#vg-tooltip-element.visible {
  visibility: visible;
}
#vg-tooltip-element h2 {
  margin-top: 0;
  margin-bottom: 10px;
  font-size: 13px;
}
#vg-tooltip-element table {
  border-spacing: 0;
}
#vg-tooltip-element table tr {
  border: none;
}
#vg-tooltip-element table tr td {
  overflow: hidden;
  text-overflow: ellipsis;
  padding-top: 2px;
  padding-bottom: 2px;
}
#vg-tooltip-element table tr td.key {
  color: #808080;
  max-width: 150px;
  text-align: right;
  padding-right: 4px;
}
#vg-tooltip-element table tr td.value {
  display: block;
  max-width: 300px;
  max-height: 7em;
  text-align: left;
}
#vg-tooltip-element.dark-theme {
  background-color: rgba(32, 32, 32, 0.9);
  border: 1px solid #f5f5f5;
  color: white;
}
#vg-tooltip-element.dark-theme td.key {
  color: #bfbfbf;
}
`;const rY="vg-tooltip-element",iwe={offsetX:10,offsetY:10,id:rY,styleId:"vega-tooltip-style",theme:"light",disableDefaultStyle:!1,sanitize:rwe,maxDepth:2,formatTooltip:ewe,baseURL:"",anchor:"cursor",position:["top","bottom","left","right","top-left","top-right","bottom-left","bottom-right"]};function rwe(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;")}function awe(e){if(!/^[A-Za-z]+[-:.\w]*$/.test(e))throw new Error("Invalid HTML ID");return nwe.toString().replaceAll(rY,e)}function aY(e,t,{offsetX:n,offsetY:i}){const r=sY({x1:e.clientX,x2:e.clientX,y1:e.clientY,y2:e.clientY},t,n,i),a=["bottom-right","bottom-left","top-right","top-left"];for(const s of a)if(oY(r[s],t))return r[s];return r["top-left"]}function swe(e,t,n,i,r){const{position:a,offsetX:s,offsetY:o}=r,l=e._el.getBoundingClientRect(),f=e._origin,d=owe(l,f,n),g=sY(d,i,s,o),p=Array.isArray(a)?a:[a];for(const y of p)if(oY(g[y],i)&&!uwe(t,g[y],i))return g[y];return aY(t,i,r)}function owe(e,t,n){const i=n.isVoronoi?n.datum.bounds:n.bounds;let r=e.left+t[0]+i.x1,a=e.top+t[1]+i.y1,s=n;for(;s.mark.group;)s=s.mark.group,r+=s.x??0,a+=s.y??0;const o=i.x2-i.x1,l=i.y2-i.y1;return{x1:r,x2:r+o,y1:a,y2:a+l}}function sY(e,t,n,i){const r=(e.x1+e.x2)/2,a=(e.y1+e.y2)/2,s=e.x1-t.width-n,o=r-t.width/2,l=e.x2+n,f=e.y1-t.height-i,d=a-t.height/2,g=e.y2+i;return{top:{x:o,y:f},bottom:{x:o,y:g},left:{x:s,y:d},right:{x:l,y:d},"top-left":{x:s,y:f},"top-right":{x:l,y:f},"bottom-left":{x:s,y:g},"bottom-right":{x:l,y:g}}}function oY(e,t){return e.x>=0&&e.y>=0&&e.x+t.width<=window.innerWidth&&e.y+t.height<=window.innerHeight}function uwe(e,t,n){return e.clientX>=t.x&&e.clientX<=t.x+n.width&&e.clientY>=t.y&&e.clientY<=t.y+n.height}class lwe{constructor(t){oe(this,"call");oe(this,"options");oe(this,"el");this.options={...iwe,...t};const n=this.options.id;if(this.el=null,this.call=this.tooltipHandler.bind(this),!this.options.disableDefaultStyle&&!document.getElementById(this.options.styleId)){const i=document.createElement("style");i.setAttribute("id",this.options.styleId),i.innerHTML=awe(n);const r=document.head;r.childNodes.length>0?r.insertBefore(i,r.childNodes[0]):r.appendChild(i)}}tooltipHandler(t,n,i,r){if(this.el=document.getElementById(this.options.id),this.el||(this.el=document.createElement("div"),this.el.setAttribute("id",this.options.id),this.el.classList.add("vg-tooltip"),(document.fullscreenElement??document.body).appendChild(this.el)),r==null||r===""){this.el.classList.remove("visible",`${this.options.theme}-theme`);return}this.el.innerHTML=this.options.formatTooltip(r,this.options.sanitize,this.options.maxDepth,this.options.baseURL),this.el.classList.add("visible",`${this.options.theme}-theme`);const{x:a,y:s}=this.options.anchor==="mark"?swe(t,n,i,this.el.getBoundingClientRect(),this.options):aY(n,this.el.getBoundingClientRect(),this.options);this.el.style.top=`${s}px`,this.el.style.left=`${a}px`}}var C_={};/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2022 Joachim Wester
 * MIT licensed
 */var cwe=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)r.hasOwnProperty(a)&&(i[a]=r[a])},e(t,n)};return function(t,n){e(t,n);function i(){this.constructor=t}t.prototype=n===null?Object.create(n):(i.prototype=n.prototype,new i)}}(),fwe=Object.prototype.hasOwnProperty;function r$(e,t){return fwe.call(e,t)}function a$(e){if(Array.isArray(e)){for(var t=new Array(e.length),n=0;n<t.length;n++)t[n]=""+n;return t}if(Object.keys)return Object.keys(e);var i=[];for(var r in e)r$(e,r)&&i.push(r);return i}function nr(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}}function s$(e){for(var t=0,n=e.length,i;t<n;){if(i=e.charCodeAt(t),i>=48&&i<=57){t++;continue}return!1}return!0}function dl(e){return e.indexOf("/")===-1&&e.indexOf("~")===-1?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function uY(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function o$(e){if(e===void 0)return!0;if(e){if(Array.isArray(e)){for(var t=0,n=e.length;t<n;t++)if(o$(e[t]))return!0}else if(typeof e=="object"){for(var i=a$(e),r=i.length,a=0;a<r;a++)if(o$(e[i[a]]))return!0}}return!1}function Z8(e,t){var n=[e];for(var i in t){var r=typeof t[i]=="object"?JSON.stringify(t[i],null,2):t[i];typeof r<"u"&&n.push(i+": "+r)}return n.join(`
`)}var lY=function(e){cwe(t,e);function t(n,i,r,a,s){var o=this.constructor,l=e.call(this,Z8(n,{name:i,index:r,operation:a,tree:s}))||this;return l.name=i,l.index=r,l.operation=a,l.tree=s,Object.setPrototypeOf(l,o.prototype),l.message=Z8(n,{name:i,index:r,operation:a,tree:s}),l}return t}(Error),Pt=lY,dwe=nr,Af={add:function(e,t,n){return e[t]=this.value,{newDocument:n}},remove:function(e,t,n){var i=e[t];return delete e[t],{newDocument:n,removed:i}},replace:function(e,t,n){var i=e[t];return e[t]=this.value,{newDocument:n,removed:i}},move:function(e,t,n){var i=Tv(n,this.path);i&&(i=nr(i));var r=Ol(n,{op:"remove",path:this.from}).removed;return Ol(n,{op:"add",path:this.path,value:r}),{newDocument:n,removed:i}},copy:function(e,t,n){var i=Tv(n,this.from);return Ol(n,{op:"add",path:this.path,value:nr(i)}),{newDocument:n}},test:function(e,t,n){return{newDocument:n,test:Mp(e[t],this.value)}},_get:function(e,t,n){return this.value=e[t],{newDocument:n}}},hwe={add:function(e,t,n){return s$(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:n,index:t}},remove:function(e,t,n){var i=e.splice(t,1);return{newDocument:n,removed:i[0]}},replace:function(e,t,n){var i=e[t];return e[t]=this.value,{newDocument:n,removed:i}},move:Af.move,copy:Af.copy,test:Af.test,_get:Af._get};function Tv(e,t){if(t=="")return e;var n={op:"_get",path:t};return Ol(e,n),n.value}function Ol(e,t,n,i,r,a){if(n===void 0&&(n=!1),i===void 0&&(i=!0),r===void 0&&(r=!0),a===void 0&&(a=0),n&&(typeof n=="function"?n(t,0,e,t.path):Mv(t,0)),t.path===""){var s={newDocument:e};if(t.op==="add")return s.newDocument=t.value,s;if(t.op==="replace")return s.newDocument=t.value,s.removed=e,s;if(t.op==="move"||t.op==="copy")return s.newDocument=Tv(e,t.from),t.op==="move"&&(s.removed=e),s;if(t.op==="test"){if(s.test=Mp(e,t.value),s.test===!1)throw new Pt("Test operation failed","TEST_OPERATION_FAILED",a,t,e);return s.newDocument=e,s}else{if(t.op==="remove")return s.removed=e,s.newDocument=null,s;if(t.op==="_get")return t.value=e,s;if(n)throw new Pt("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",a,t,e);return s}}else{i||(e=nr(e));var o=t.path||"",l=o.split("/"),f=e,d=1,g=l.length,p=void 0,y=void 0,v=void 0;for(typeof n=="function"?v=n:v=Mv;;){if(y=l[d],y&&y.indexOf("~")!=-1&&(y=uY(y)),r&&(y=="__proto__"||y=="prototype"&&d>0&&l[d-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&p===void 0&&(f[y]===void 0?p=l.slice(0,d).join("/"):d==g-1&&(p=t.path),p!==void 0&&v(t,0,e,p)),d++,Array.isArray(f)){if(y==="-")y=f.length;else{if(n&&!s$(y))throw new Pt("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",a,t,e);s$(y)&&(y=~~y)}if(d>=g){if(n&&t.op==="add"&&y>f.length)throw new Pt("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",a,t,e);var s=hwe[t.op].call(t,f,y,e);if(s.test===!1)throw new Pt("Test operation failed","TEST_OPERATION_FAILED",a,t,e);return s}}else if(d>=g){var s=Af[t.op].call(t,f,y,e);if(s.test===!1)throw new Pt("Test operation failed","TEST_OPERATION_FAILED",a,t,e);return s}if(f=f[y],n&&d<g&&(!f||typeof f!="object"))throw new Pt("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",a,t,e)}}}function zx(e,t,n,i,r){if(i===void 0&&(i=!0),r===void 0&&(r=!0),n&&!Array.isArray(t))throw new Pt("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");i||(e=nr(e));for(var a=new Array(t.length),s=0,o=t.length;s<o;s++)a[s]=Ol(e,t[s],n,!0,r,s),e=a[s].newDocument;return a.newDocument=e,a}function gwe(e,t,n){var i=Ol(e,t);if(i.test===!1)throw new Pt("Test operation failed","TEST_OPERATION_FAILED",n,t,e);return i.newDocument}function Mv(e,t,n,i){if(typeof e!="object"||e===null||Array.isArray(e))throw new Pt("Operation is not an object","OPERATION_NOT_AN_OBJECT",t,e,n);if(Af[e.op]){if(typeof e.path!="string")throw new Pt("Operation `path` property is not a string","OPERATION_PATH_INVALID",t,e,n);if(e.path.indexOf("/")!==0&&e.path.length>0)throw new Pt('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",t,e,n);if((e.op==="move"||e.op==="copy")&&typeof e.from!="string")throw new Pt("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&e.value===void 0)throw new Pt("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&o$(e.value))throw new Pt("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",t,e,n);if(n){if(e.op=="add"){var r=e.path.split("/").length,a=i.split("/").length;if(r!==a+1&&r!==a)throw new Pt("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",t,e,n)}else if(e.op==="replace"||e.op==="remove"||e.op==="_get"){if(e.path!==i)throw new Pt("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",t,e,n)}else if(e.op==="move"||e.op==="copy"){var s={op:"_get",path:e.from,value:void 0},o=cY([s],n);if(o&&o.name==="OPERATION_PATH_UNRESOLVABLE")throw new Pt("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",t,e,n)}}}else throw new Pt("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",t,e,n)}function cY(e,t,n){try{if(!Array.isArray(e))throw new Pt("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)zx(nr(t),nr(e),n||!0);else{n=n||Mv;for(var i=0;i<e.length;i++)n(e[i],i,t,void 0)}}catch(r){if(r instanceof Pt)return r;throw r}}function Mp(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){var n=Array.isArray(e),i=Array.isArray(t),r,a,s;if(n&&i){if(a=e.length,a!=t.length)return!1;for(r=a;r--!==0;)if(!Mp(e[r],t[r]))return!1;return!0}if(n!=i)return!1;var o=Object.keys(e);if(a=o.length,a!==Object.keys(t).length)return!1;for(r=a;r--!==0;)if(!t.hasOwnProperty(o[r]))return!1;for(r=a;r--!==0;)if(s=o[r],!Mp(e[s],t[s]))return!1;return!0}return e!==e&&t!==t}var pwe=Object.freeze({__proto__:null,JsonPatchError:Pt,_areEquals:Mp,applyOperation:Ol,applyPatch:zx,applyReducer:gwe,deepClone:dwe,getValueByPointer:Tv,validate:cY,validator:Mv});/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2021 Joachim Wester
 * MIT license
 */var Ck=new WeakMap,mwe=function(){function e(t){this.observers=new Map,this.obj=t}return e}(),ywe=function(){function e(t,n){this.callback=t,this.observer=n}return e}();function vwe(e){return Ck.get(e)}function bwe(e,t){return e.observers.get(t)}function xwe(e,t){e.observers.delete(t.callback)}function Ewe(e,t){t.unobserve()}function Swe(e,t){var n=[],i,r=vwe(e);if(!r)r=new mwe(e),Ck.set(e,r);else{var a=bwe(r,t);i=a&&a.observer}if(i)return i;if(i={},r.value=nr(e),t){i.callback=t,i.next=null;var s=function(){u$(i)},o=function(){clearTimeout(i.next),i.next=setTimeout(s)};typeof window<"u"&&(window.addEventListener("mouseup",o),window.addEventListener("keyup",o),window.addEventListener("mousedown",o),window.addEventListener("keydown",o),window.addEventListener("change",o))}return i.patches=n,i.object=e,i.unobserve=function(){u$(i),clearTimeout(i.next),xwe(r,i),typeof window<"u"&&(window.removeEventListener("mouseup",o),window.removeEventListener("keyup",o),window.removeEventListener("mousedown",o),window.removeEventListener("keydown",o),window.removeEventListener("change",o))},r.observers.set(t,new ywe(t,i)),i}function u$(e,t){t===void 0&&(t=!1);var n=Ck.get(e.object);Tk(n.value,e.object,e.patches,"",t),e.patches.length&&zx(n.value,e.patches);var i=e.patches;return i.length>0&&(e.patches=[],e.callback&&e.callback(i)),i}function Tk(e,t,n,i,r){if(t!==e){typeof t.toJSON=="function"&&(t=t.toJSON());for(var a=a$(t),s=a$(e),o=!1,l=s.length-1;l>=0;l--){var f=s[l],d=e[f];if(r$(t,f)&&!(t[f]===void 0&&d!==void 0&&Array.isArray(t)===!1)){var g=t[f];typeof d=="object"&&d!=null&&typeof g=="object"&&g!=null&&Array.isArray(d)===Array.isArray(g)?Tk(d,g,n,i+"/"+dl(f),r):d!==g&&(r&&n.push({op:"test",path:i+"/"+dl(f),value:nr(d)}),n.push({op:"replace",path:i+"/"+dl(f),value:nr(g)}))}else Array.isArray(e)===Array.isArray(t)?(r&&n.push({op:"test",path:i+"/"+dl(f),value:nr(d)}),n.push({op:"remove",path:i+"/"+dl(f)}),o=!0):(r&&n.push({op:"test",path:i,value:e}),n.push({op:"replace",path:i,value:t}))}if(!(!o&&a.length==s.length))for(var l=0;l<a.length;l++){var f=a[l];!r$(e,f)&&t[f]!==void 0&&n.push({op:"add",path:i+"/"+dl(f),value:nr(t[f])})}}}function _we(e,t,n){n===void 0&&(n=!1);var i=[];return Tk(e,t,i,"",n),i}var wwe=Object.freeze({__proto__:null,compare:_we,generate:u$,observe:Swe,unobserve:Ewe});Object.assign({},pwe,wwe,{JsonPatchError:lY,deepClone:nr,escapePathComponent:dl,unescapePathComponent:uY});function Awe(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var T_,K8;function $we(){if(K8)return T_;K8=1;class e{constructor(){this.max=1e3,this.map=new Map}get(n){const i=this.map.get(n);if(i!==void 0)return this.map.delete(n),this.map.set(n,i),i}delete(n){return this.map.delete(n)}set(n,i){if(!this.delete(n)&&i!==void 0){if(this.map.size>=this.max){const a=this.map.keys().next().value;this.delete(a)}this.map.set(n,i)}return this}}return T_=e,T_}var M_,J8;function Mk(){if(J8)return M_;J8=1;const e=Object.freeze({loose:!0}),t=Object.freeze({});return M_=i=>i?typeof i!="object"?e:i:t,M_}var w1={exports:{}},k_,eF;function kk(){if(eF)return k_;eF=1;const e="2.0.0",t=256,n=Number.MAX_SAFE_INTEGER||9007199254740991,i=16,r=t-6;return k_={MAX_LENGTH:t,MAX_SAFE_COMPONENT_LENGTH:i,MAX_SAFE_BUILD_LENGTH:r,MAX_SAFE_INTEGER:n,RELEASE_TYPES:["major","premajor","minor","preminor","patch","prepatch","prerelease"],SEMVER_SPEC_VERSION:e,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2},k_}var O_,tF;function Fx(){return tF||(tF=1,O_=typeof process=="object"&&C_&&C_.NODE_DEBUG&&/\bsemver\b/i.test(C_.NODE_DEBUG)?(...t)=>console.error("SEMVER",...t):()=>{}),O_}var nF;function Ok(){return nF||(nF=1,function(e,t){const{MAX_SAFE_COMPONENT_LENGTH:n,MAX_SAFE_BUILD_LENGTH:i,MAX_LENGTH:r}=kk(),a=Fx();t=e.exports={};const s=t.re=[],o=t.safeRe=[],l=t.src=[],f=t.safeSrc=[],d=t.t={};let g=0;const p="[a-zA-Z0-9-]",y=[["\\s",1],["\\d",r],[p,i]],v=E=>{for(const[_,w]of y)E=E.split(`${_}*`).join(`${_}{0,${w}}`).split(`${_}+`).join(`${_}{1,${w}}`);return E},b=(E,_,w)=>{const A=v(_),$=g++;a(E,$,_),d[E]=$,l[$]=_,f[$]=A,s[$]=new RegExp(_,w?"g":void 0),o[$]=new RegExp(A,w?"g":void 0)};b("NUMERICIDENTIFIER","0|[1-9]\\d*"),b("NUMERICIDENTIFIERLOOSE","\\d+"),b("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${p}*`),b("MAINVERSION",`(${l[d.NUMERICIDENTIFIER]})\\.(${l[d.NUMERICIDENTIFIER]})\\.(${l[d.NUMERICIDENTIFIER]})`),b("MAINVERSIONLOOSE",`(${l[d.NUMERICIDENTIFIERLOOSE]})\\.(${l[d.NUMERICIDENTIFIERLOOSE]})\\.(${l[d.NUMERICIDENTIFIERLOOSE]})`),b("PRERELEASEIDENTIFIER",`(?:${l[d.NUMERICIDENTIFIER]}|${l[d.NONNUMERICIDENTIFIER]})`),b("PRERELEASEIDENTIFIERLOOSE",`(?:${l[d.NUMERICIDENTIFIERLOOSE]}|${l[d.NONNUMERICIDENTIFIER]})`),b("PRERELEASE",`(?:-(${l[d.PRERELEASEIDENTIFIER]}(?:\\.${l[d.PRERELEASEIDENTIFIER]})*))`),b("PRERELEASELOOSE",`(?:-?(${l[d.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${l[d.PRERELEASEIDENTIFIERLOOSE]})*))`),b("BUILDIDENTIFIER",`${p}+`),b("BUILD",`(?:\\+(${l[d.BUILDIDENTIFIER]}(?:\\.${l[d.BUILDIDENTIFIER]})*))`),b("FULLPLAIN",`v?${l[d.MAINVERSION]}${l[d.PRERELEASE]}?${l[d.BUILD]}?`),b("FULL",`^${l[d.FULLPLAIN]}$`),b("LOOSEPLAIN",`[v=\\s]*${l[d.MAINVERSIONLOOSE]}${l[d.PRERELEASELOOSE]}?${l[d.BUILD]}?`),b("LOOSE",`^${l[d.LOOSEPLAIN]}$`),b("GTLT","((?:<|>)?=?)"),b("XRANGEIDENTIFIERLOOSE",`${l[d.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),b("XRANGEIDENTIFIER",`${l[d.NUMERICIDENTIFIER]}|x|X|\\*`),b("XRANGEPLAIN",`[v=\\s]*(${l[d.XRANGEIDENTIFIER]})(?:\\.(${l[d.XRANGEIDENTIFIER]})(?:\\.(${l[d.XRANGEIDENTIFIER]})(?:${l[d.PRERELEASE]})?${l[d.BUILD]}?)?)?`),b("XRANGEPLAINLOOSE",`[v=\\s]*(${l[d.XRANGEIDENTIFIERLOOSE]})(?:\\.(${l[d.XRANGEIDENTIFIERLOOSE]})(?:\\.(${l[d.XRANGEIDENTIFIERLOOSE]})(?:${l[d.PRERELEASELOOSE]})?${l[d.BUILD]}?)?)?`),b("XRANGE",`^${l[d.GTLT]}\\s*${l[d.XRANGEPLAIN]}$`),b("XRANGELOOSE",`^${l[d.GTLT]}\\s*${l[d.XRANGEPLAINLOOSE]}$`),b("COERCEPLAIN",`(^|[^\\d])(\\d{1,${n}})(?:\\.(\\d{1,${n}}))?(?:\\.(\\d{1,${n}}))?`),b("COERCE",`${l[d.COERCEPLAIN]}(?:$|[^\\d])`),b("COERCEFULL",l[d.COERCEPLAIN]+`(?:${l[d.PRERELEASE]})?(?:${l[d.BUILD]})?(?:$|[^\\d])`),b("COERCERTL",l[d.COERCE],!0),b("COERCERTLFULL",l[d.COERCEFULL],!0),b("LONETILDE","(?:~>?)"),b("TILDETRIM",`(\\s*)${l[d.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",b("TILDE",`^${l[d.LONETILDE]}${l[d.XRANGEPLAIN]}$`),b("TILDELOOSE",`^${l[d.LONETILDE]}${l[d.XRANGEPLAINLOOSE]}$`),b("LONECARET","(?:\\^)"),b("CARETTRIM",`(\\s*)${l[d.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",b("CARET",`^${l[d.LONECARET]}${l[d.XRANGEPLAIN]}$`),b("CARETLOOSE",`^${l[d.LONECARET]}${l[d.XRANGEPLAINLOOSE]}$`),b("COMPARATORLOOSE",`^${l[d.GTLT]}\\s*(${l[d.LOOSEPLAIN]})$|^$`),b("COMPARATOR",`^${l[d.GTLT]}\\s*(${l[d.FULLPLAIN]})$|^$`),b("COMPARATORTRIM",`(\\s*)${l[d.GTLT]}\\s*(${l[d.LOOSEPLAIN]}|${l[d.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",b("HYPHENRANGE",`^\\s*(${l[d.XRANGEPLAIN]})\\s+-\\s+(${l[d.XRANGEPLAIN]})\\s*$`),b("HYPHENRANGELOOSE",`^\\s*(${l[d.XRANGEPLAINLOOSE]})\\s+-\\s+(${l[d.XRANGEPLAINLOOSE]})\\s*$`),b("STAR","(<|>)?=?\\s*\\*"),b("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),b("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")}(w1,w1.exports)),w1.exports}var D_,iF;function Cwe(){if(iF)return D_;iF=1;const e=/^[0-9]+$/,t=(i,r)=>{const a=e.test(i),s=e.test(r);return a&&s&&(i=+i,r=+r),i===r?0:a&&!s?-1:s&&!a?1:i<r?-1:1};return D_={compareIdentifiers:t,rcompareIdentifiers:(i,r)=>t(r,i)},D_}var R_,rF;function Dk(){if(rF)return R_;rF=1;const e=Fx(),{MAX_LENGTH:t,MAX_SAFE_INTEGER:n}=kk(),{safeRe:i,safeSrc:r,t:a}=Ok(),s=Mk(),{compareIdentifiers:o}=Cwe();class l{constructor(d,g){if(g=s(g),d instanceof l){if(d.loose===!!g.loose&&d.includePrerelease===!!g.includePrerelease)return d;d=d.version}else if(typeof d!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof d}".`);if(d.length>t)throw new TypeError(`version is longer than ${t} characters`);e("SemVer",d,g),this.options=g,this.loose=!!g.loose,this.includePrerelease=!!g.includePrerelease;const p=d.trim().match(g.loose?i[a.LOOSE]:i[a.FULL]);if(!p)throw new TypeError(`Invalid Version: ${d}`);if(this.raw=d,this.major=+p[1],this.minor=+p[2],this.patch=+p[3],this.major>n||this.major<0)throw new TypeError("Invalid major version");if(this.minor>n||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>n||this.patch<0)throw new TypeError("Invalid patch version");p[4]?this.prerelease=p[4].split(".").map(y=>{if(/^[0-9]+$/.test(y)){const v=+y;if(v>=0&&v<n)return v}return y}):this.prerelease=[],this.build=p[5]?p[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(d){if(e("SemVer.compare",this.version,this.options,d),!(d instanceof l)){if(typeof d=="string"&&d===this.version)return 0;d=new l(d,this.options)}return d.version===this.version?0:this.compareMain(d)||this.comparePre(d)}compareMain(d){return d instanceof l||(d=new l(d,this.options)),o(this.major,d.major)||o(this.minor,d.minor)||o(this.patch,d.patch)}comparePre(d){if(d instanceof l||(d=new l(d,this.options)),this.prerelease.length&&!d.prerelease.length)return-1;if(!this.prerelease.length&&d.prerelease.length)return 1;if(!this.prerelease.length&&!d.prerelease.length)return 0;let g=0;do{const p=this.prerelease[g],y=d.prerelease[g];if(e("prerelease compare",g,p,y),p===void 0&&y===void 0)return 0;if(y===void 0)return 1;if(p===void 0)return-1;if(p===y)continue;return o(p,y)}while(++g)}compareBuild(d){d instanceof l||(d=new l(d,this.options));let g=0;do{const p=this.build[g],y=d.build[g];if(e("build compare",g,p,y),p===void 0&&y===void 0)return 0;if(y===void 0)return 1;if(p===void 0)return-1;if(p===y)continue;return o(p,y)}while(++g)}inc(d,g,p){if(d.startsWith("pre")){if(!g&&p===!1)throw new Error("invalid increment argument: identifier is empty");if(g){const y=new RegExp(`^${this.options.loose?r[a.PRERELEASELOOSE]:r[a.PRERELEASE]}$`),v=`-${g}`.match(y);if(!v||v[1]!==g)throw new Error(`invalid identifier: ${g}`)}}switch(d){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",g,p);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",g,p);break;case"prepatch":this.prerelease.length=0,this.inc("patch",g,p),this.inc("pre",g,p);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",g,p),this.inc("pre",g,p);break;case"release":if(this.prerelease.length===0)throw new Error(`version ${this.raw} is not a prerelease`);this.prerelease.length=0;break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const y=Number(p)?1:0;if(this.prerelease.length===0)this.prerelease=[y];else{let v=this.prerelease.length;for(;--v>=0;)typeof this.prerelease[v]=="number"&&(this.prerelease[v]++,v=-2);if(v===-1){if(g===this.prerelease.join(".")&&p===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(y)}}if(g){let v=[g,y];p===!1&&(v=[g]),o(this.prerelease[0],g)===0?isNaN(this.prerelease[1])&&(this.prerelease=v):this.prerelease=v}break}default:throw new Error(`invalid increment argument: ${d}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}}return R_=l,R_}var N_,aF;function Hd(){if(aF)return N_;aF=1;const e=Dk();return N_=(n,i,r)=>new e(n,r).compare(new e(i,r)),N_}var z_,sF;function Twe(){if(sF)return z_;sF=1;const e=Hd();return z_=(n,i,r)=>e(n,i,r)===0,z_}var F_,oF;function Mwe(){if(oF)return F_;oF=1;const e=Hd();return F_=(n,i,r)=>e(n,i,r)!==0,F_}var L_,uF;function kwe(){if(uF)return L_;uF=1;const e=Hd();return L_=(n,i,r)=>e(n,i,r)>0,L_}var U_,lF;function Owe(){if(lF)return U_;lF=1;const e=Hd();return U_=(n,i,r)=>e(n,i,r)>=0,U_}var B_,cF;function Dwe(){if(cF)return B_;cF=1;const e=Hd();return B_=(n,i,r)=>e(n,i,r)<0,B_}var I_,fF;function Rwe(){if(fF)return I_;fF=1;const e=Hd();return I_=(n,i,r)=>e(n,i,r)<=0,I_}var P_,dF;function Nwe(){if(dF)return P_;dF=1;const e=Twe(),t=Mwe(),n=kwe(),i=Owe(),r=Dwe(),a=Rwe();return P_=(o,l,f,d)=>{switch(l){case"===":return typeof o=="object"&&(o=o.version),typeof f=="object"&&(f=f.version),o===f;case"!==":return typeof o=="object"&&(o=o.version),typeof f=="object"&&(f=f.version),o!==f;case"":case"=":case"==":return e(o,f,d);case"!=":return t(o,f,d);case">":return n(o,f,d);case">=":return i(o,f,d);case"<":return r(o,f,d);case"<=":return a(o,f,d);default:throw new TypeError(`Invalid operator: ${l}`)}},P_}var q_,hF;function zwe(){if(hF)return q_;hF=1;const e=Symbol("SemVer ANY");class t{static get ANY(){return e}constructor(d,g){if(g=n(g),d instanceof t){if(d.loose===!!g.loose)return d;d=d.value}d=d.trim().split(/\s+/).join(" "),s("comparator",d,g),this.options=g,this.loose=!!g.loose,this.parse(d),this.semver===e?this.value="":this.value=this.operator+this.semver.version,s("comp",this)}parse(d){const g=this.options.loose?i[r.COMPARATORLOOSE]:i[r.COMPARATOR],p=d.match(g);if(!p)throw new TypeError(`Invalid comparator: ${d}`);this.operator=p[1]!==void 0?p[1]:"",this.operator==="="&&(this.operator=""),p[2]?this.semver=new o(p[2],this.options.loose):this.semver=e}toString(){return this.value}test(d){if(s("Comparator.test",d,this.options.loose),this.semver===e||d===e)return!0;if(typeof d=="string")try{d=new o(d,this.options)}catch{return!1}return a(d,this.operator,this.semver,this.options)}intersects(d,g){if(!(d instanceof t))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new l(d.value,g).test(this.value):d.operator===""?d.value===""?!0:new l(this.value,g).test(d.semver):(g=n(g),g.includePrerelease&&(this.value==="<0.0.0-0"||d.value==="<0.0.0-0")||!g.includePrerelease&&(this.value.startsWith("<0.0.0")||d.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&d.operator.startsWith(">")||this.operator.startsWith("<")&&d.operator.startsWith("<")||this.semver.version===d.semver.version&&this.operator.includes("=")&&d.operator.includes("=")||a(this.semver,"<",d.semver,g)&&this.operator.startsWith(">")&&d.operator.startsWith("<")||a(this.semver,">",d.semver,g)&&this.operator.startsWith("<")&&d.operator.startsWith(">")))}}q_=t;const n=Mk(),{safeRe:i,t:r}=Ok(),a=Nwe(),s=Fx(),o=Dk(),l=fY();return q_}var j_,gF;function fY(){if(gF)return j_;gF=1;const e=/\s+/g;class t{constructor(F,D){if(D=r(D),F instanceof t)return F.loose===!!D.loose&&F.includePrerelease===!!D.includePrerelease?F:new t(F.raw,D);if(F instanceof a)return this.raw=F.value,this.set=[[F]],this.formatted=void 0,this;if(this.options=D,this.loose=!!D.loose,this.includePrerelease=!!D.includePrerelease,this.raw=F.trim().replace(e," "),this.set=this.raw.split("||").map(I=>this.parseRange(I.trim())).filter(I=>I.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const I=this.set[0];if(this.set=this.set.filter(Y=>!b(Y[0])),this.set.length===0)this.set=[I];else if(this.set.length>1){for(const Y of this.set)if(Y.length===1&&E(Y[0])){this.set=[Y];break}}}this.formatted=void 0}get range(){if(this.formatted===void 0){this.formatted="";for(let F=0;F<this.set.length;F++){F>0&&(this.formatted+="||");const D=this.set[F];for(let I=0;I<D.length;I++)I>0&&(this.formatted+=" "),this.formatted+=D[I].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(F){const I=((this.options.includePrerelease&&y)|(this.options.loose&&v))+":"+F,Y=i.get(I);if(Y)return Y;const K=this.options.loose,N=K?l[f.HYPHENRANGELOOSE]:l[f.HYPHENRANGE];F=F.replace(N,V(this.options.includePrerelease)),s("hyphen replace",F),F=F.replace(l[f.COMPARATORTRIM],d),s("comparator trim",F),F=F.replace(l[f.TILDETRIM],g),s("tilde trim",F),F=F.replace(l[f.CARETTRIM],p),s("caret trim",F);let W=F.split(" ").map(Se=>w(Se,this.options)).join(" ").split(/\s+/).map(Se=>U(Se,this.options));K&&(W=W.filter(Se=>(s("loose invalid filter",Se,this.options),!!Se.match(l[f.COMPARATORLOOSE])))),s("range list",W);const ne=new Map,se=W.map(Se=>new a(Se,this.options));for(const Se of se){if(b(Se))return[Se];ne.set(Se.value,Se)}ne.size>1&&ne.has("")&&ne.delete("");const ye=[...ne.values()];return i.set(I,ye),ye}intersects(F,D){if(!(F instanceof t))throw new TypeError("a Range is required");return this.set.some(I=>_(I,D)&&F.set.some(Y=>_(Y,D)&&I.every(K=>Y.every(N=>K.intersects(N,D)))))}test(F){if(!F)return!1;if(typeof F=="string")try{F=new o(F,this.options)}catch{return!1}for(let D=0;D<this.set.length;D++)if(G(this.set[D],F,this.options))return!0;return!1}}j_=t;const n=$we(),i=new n,r=Mk(),a=zwe(),s=Fx(),o=Dk(),{safeRe:l,t:f,comparatorTrimReplace:d,tildeTrimReplace:g,caretTrimReplace:p}=Ok(),{FLAG_INCLUDE_PRERELEASE:y,FLAG_LOOSE:v}=kk(),b=q=>q.value==="<0.0.0-0",E=q=>q.value==="",_=(q,F)=>{let D=!0;const I=q.slice();let Y=I.pop();for(;D&&I.length;)D=I.every(K=>Y.intersects(K,F)),Y=I.pop();return D},w=(q,F)=>(s("comp",q,F),q=k(q,F),s("caret",q),q=$(q,F),s("tildes",q),q=R(q,F),s("xrange",q),q=B(q,F),s("stars",q),q),A=q=>!q||q.toLowerCase()==="x"||q==="*",$=(q,F)=>q.trim().split(/\s+/).map(D=>C(D,F)).join(" "),C=(q,F)=>{const D=F.loose?l[f.TILDELOOSE]:l[f.TILDE];return q.replace(D,(I,Y,K,N,W)=>{s("tilde",q,I,Y,K,N,W);let ne;return A(Y)?ne="":A(K)?ne=`>=${Y}.0.0 <${+Y+1}.0.0-0`:A(N)?ne=`>=${Y}.${K}.0 <${Y}.${+K+1}.0-0`:W?(s("replaceTilde pr",W),ne=`>=${Y}.${K}.${N}-${W} <${Y}.${+K+1}.0-0`):ne=`>=${Y}.${K}.${N} <${Y}.${+K+1}.0-0`,s("tilde return",ne),ne})},k=(q,F)=>q.trim().split(/\s+/).map(D=>M(D,F)).join(" "),M=(q,F)=>{s("caret",q,F);const D=F.loose?l[f.CARETLOOSE]:l[f.CARET],I=F.includePrerelease?"-0":"";return q.replace(D,(Y,K,N,W,ne)=>{s("caret",q,Y,K,N,W,ne);let se;return A(K)?se="":A(N)?se=`>=${K}.0.0${I} <${+K+1}.0.0-0`:A(W)?K==="0"?se=`>=${K}.${N}.0${I} <${K}.${+N+1}.0-0`:se=`>=${K}.${N}.0${I} <${+K+1}.0.0-0`:ne?(s("replaceCaret pr",ne),K==="0"?N==="0"?se=`>=${K}.${N}.${W}-${ne} <${K}.${N}.${+W+1}-0`:se=`>=${K}.${N}.${W}-${ne} <${K}.${+N+1}.0-0`:se=`>=${K}.${N}.${W}-${ne} <${+K+1}.0.0-0`):(s("no pr"),K==="0"?N==="0"?se=`>=${K}.${N}.${W}${I} <${K}.${N}.${+W+1}-0`:se=`>=${K}.${N}.${W}${I} <${K}.${+N+1}.0-0`:se=`>=${K}.${N}.${W} <${+K+1}.0.0-0`),s("caret return",se),se})},R=(q,F)=>(s("replaceXRanges",q,F),q.split(/\s+/).map(D=>z(D,F)).join(" ")),z=(q,F)=>{q=q.trim();const D=F.loose?l[f.XRANGELOOSE]:l[f.XRANGE];return q.replace(D,(I,Y,K,N,W,ne)=>{s("xRange",q,I,Y,K,N,W,ne);const se=A(K),ye=se||A(N),Se=ye||A(W),$e=Se;return Y==="="&&$e&&(Y=""),ne=F.includePrerelease?"-0":"",se?Y===">"||Y==="<"?I="<0.0.0-0":I="*":Y&&$e?(ye&&(N=0),W=0,Y===">"?(Y=">=",ye?(K=+K+1,N=0,W=0):(N=+N+1,W=0)):Y==="<="&&(Y="<",ye?K=+K+1:N=+N+1),Y==="<"&&(ne="-0"),I=`${Y+K}.${N}.${W}${ne}`):ye?I=`>=${K}.0.0${ne} <${+K+1}.0.0-0`:Se&&(I=`>=${K}.${N}.0${ne} <${K}.${+N+1}.0-0`),s("xRange return",I),I})},B=(q,F)=>(s("replaceStars",q,F),q.trim().replace(l[f.STAR],"")),U=(q,F)=>(s("replaceGTE0",q,F),q.trim().replace(l[F.includePrerelease?f.GTE0PRE:f.GTE0],"")),V=q=>(F,D,I,Y,K,N,W,ne,se,ye,Se,$e)=>(A(I)?D="":A(Y)?D=`>=${I}.0.0${q?"-0":""}`:A(K)?D=`>=${I}.${Y}.0${q?"-0":""}`:N?D=`>=${D}`:D=`>=${D}${q?"-0":""}`,A(se)?ne="":A(ye)?ne=`<${+se+1}.0.0-0`:A(Se)?ne=`<${se}.${+ye+1}.0-0`:$e?ne=`<=${se}.${ye}.${Se}-${$e}`:q?ne=`<${se}.${ye}.${+Se+1}-0`:ne=`<=${ne}`,`${D} ${ne}`.trim()),G=(q,F,D)=>{for(let I=0;I<q.length;I++)if(!q[I].test(F))return!1;if(F.prerelease.length&&!D.includePrerelease){for(let I=0;I<q.length;I++)if(s(q[I].semver),q[I].semver!==a.ANY&&q[I].semver.prerelease.length>0){const Y=q[I].semver;if(Y.major===F.major&&Y.minor===F.minor&&Y.patch===F.patch)return!0}return!1}return!0};return j_}var H_,pF;function Fwe(){if(pF)return H_;pF=1;const e=fY();return H_=(n,i,r)=>{try{i=new e(i,r)}catch{return!1}return i.test(n)},H_}var Lwe=Fwe(),dY=Awe(Lwe);function Uwe(e,t,n){const i=e.open(t),r=250,{origin:a}=new URL(t);let s=40;function o(f){f.source===i&&(s=0,e.removeEventListener("message",o,!1))}e.addEventListener("message",o,!1);function l(){s<=0||(i.postMessage(n,a),setTimeout(l,r),s-=1)}setTimeout(l,r)}var Bwe=`.vega-embed {
  position: relative;
  display: inline-block;
  box-sizing: border-box;
}
.vega-embed.has-actions {
  padding-right: 38px;
}
.vega-embed details:not([open]) > :not(summary) {
  display: none !important;
}
.vega-embed summary {
  list-style: none;
  position: absolute;
  top: 0;
  right: 0;
  padding: 6px;
  z-index: 1000;
  background: white;
  box-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1);
  color: #1b1e23;
  border: 1px solid #aaa;
  border-radius: 999px;
  opacity: 0.2;
  transition: opacity 0.4s ease-in;
  cursor: pointer;
  line-height: 0px;
}
.vega-embed summary::-webkit-details-marker {
  display: none;
}
.vega-embed summary:active {
  box-shadow: #aaa 0px 0px 0px 1px inset;
}
.vega-embed summary svg {
  width: 14px;
  height: 14px;
}
.vega-embed details[open] summary {
  opacity: 0.7;
}
.vega-embed:hover summary, .vega-embed:focus-within summary {
  opacity: 1 !important;
  transition: opacity 0.2s ease;
}
.vega-embed .vega-actions {
  position: absolute;
  z-index: 1001;
  top: 35px;
  right: -9px;
  display: flex;
  flex-direction: column;
  padding-bottom: 8px;
  padding-top: 8px;
  border-radius: 4px;
  box-shadow: 0 2px 8px 0 rgba(0, 0, 0, 0.2);
  border: 1px solid #d9d9d9;
  background: white;
  animation-duration: 0.15s;
  animation-name: scale-in;
  animation-timing-function: cubic-bezier(0.2, 0, 0.13, 1.5);
  text-align: left;
}
.vega-embed .vega-actions a {
  padding: 8px 16px;
  font-family: sans-serif;
  font-size: 14px;
  font-weight: 600;
  white-space: nowrap;
  color: #434a56;
  text-decoration: none;
}
.vega-embed .vega-actions a:hover, .vega-embed .vega-actions a:focus {
  background-color: #f7f7f9;
  color: black;
}
.vega-embed .vega-actions::before, .vega-embed .vega-actions::after {
  content: "";
  display: inline-block;
  position: absolute;
}
.vega-embed .vega-actions::before {
  left: auto;
  right: 14px;
  top: -16px;
  border: 8px solid rgba(0, 0, 0, 0);
  border-bottom-color: #d9d9d9;
}
.vega-embed .vega-actions::after {
  left: auto;
  right: 15px;
  top: -14px;
  border: 7px solid rgba(0, 0, 0, 0);
  border-bottom-color: #fff;
}
.vega-embed .chart-wrapper.fit-x {
  width: 100%;
}
.vega-embed .chart-wrapper.fit-y {
  height: 100%;
}

.vega-embed-wrapper {
  max-width: 100%;
  overflow: auto;
  padding-right: 14px;
}

@keyframes scale-in {
  from {
    opacity: 0;
    transform: scale(0.6);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}
`;function hY(e,...t){for(const n of t)Iwe(e,n);return e}function Iwe(e,t){for(const n of Object.keys(t))xd(e,n,t[n],!0)}const Ca=Ame;let kp=g_e;const A1=typeof window<"u"?window:void 0;var _F;kp===void 0&&((_F=A1==null?void 0:A1.vl)!=null&&_F.compile)&&(kp=A1.vl);const Pwe={export:{svg:!0,png:!0},source:!0,compiled:!0,editor:!0},qwe={CLICK_TO_VIEW_ACTIONS:"Click to view actions",COMPILED_ACTION:"View Compiled Vega",EDITOR_ACTION:"Open in Vega Editor",PNG_ACTION:"Save as PNG",SOURCE_ACTION:"View Source",SVG_ACTION:"Save as SVG"},Lg={vega:"Vega","vega-lite":"Vega-Lite"},kv={vega:Ca.version,"vega-lite":kp?kp.version:"not available"},jwe={vega:e=>e,"vega-lite":(e,t)=>kp.compile(e,{config:t}).spec},Hwe=`
<svg viewBox="0 0 16 16" fill="currentColor" stroke="none" stroke-width="1" stroke-linecap="round" stroke-linejoin="round">
  <circle r="2" cy="8" cx="2"></circle>
  <circle r="2" cy="8" cx="8"></circle>
  <circle r="2" cy="8" cx="14"></circle>
</svg>`,Gwe="chart-wrapper";function Ywe(e){return typeof e=="function"}function mF(e,t,n,i){const r=`<html><head>${t}</head><body><pre><code class="json">`,a=`</code></pre>${n}</body></html>`,s=window.open("");s.document.write(r+e+a),s.document.title=`${Lg[i]} JSON Source`}function Xwe(e,t){if(e.$schema){const n=tY(e.$schema);t&&t!==n.library&&console.warn(`The given visualization spec is written in ${Lg[n.library]}, but mode argument sets ${Lg[t]??t}.`);const i=n.library;return dY(kv[i],`^${n.version.slice(1)}`)||console.warn(`The input spec uses ${Lg[i]} ${n.version}, but the current version of ${Lg[i]} is v${kv[i]}.`),i}return"mark"in e||"encoding"in e||"layer"in e||"hconcat"in e||"vconcat"in e||"facet"in e||"repeat"in e?"vega-lite":"marks"in e||"signals"in e||"scales"in e||"axes"in e?"vega":t??"vega"}function gY(e){return!!(e&&"load"in e)}function yF(e){return gY(e)?e:Ca.loader(e)}function Vwe(e){var n;const t=((n=e.usermeta)==null?void 0:n.embedOptions)??{};return ve(t.defaultStyle)&&(t.defaultStyle=!1),t}async function Wwe(e,t,n={}){let i,r;ve(t)?(r=yF(n.loader),i=JSON.parse(await r.load(t))):i=t;const a=Vwe(i),s=a.loader;(!r||s)&&(r=yF(n.loader??s));const o=await vF(a,r),l=await vF(n,r),f={...hY(l,o),config:bd(l.config??{},o.config??{})};return await Zwe(e,i,f,r)}async function vF(e,t){const n=ve(e.config)?JSON.parse(await t.load(e.config)):e.config??{},i=ve(e.patch)?JSON.parse(await t.load(e.patch)):e.patch;return{...e,...i?{patch:i}:{},...n?{config:n}:{}}}function Qwe(e){const t=e.getRootNode?e.getRootNode():document;return t instanceof ShadowRoot?{root:t,rootContainer:t}:{root:document,rootContainer:document.head??document.body}}async function Zwe(e,t,n={},i){const r=n.theme?bd(J_e[n.theme],n.config??{}):n.config,a=xu(n.actions)?n.actions:hY({},Pwe,n.actions??{}),s={...qwe,...n.i18n},o=n.renderer??"svg",l=n.logLevel??Ca.Warn,f=n.downloadFileName??"visualization",d=typeof e=="string"?document.querySelector(e):e;if(!d)throw new Error(`${e} does not exist`);if(n.defaultStyle!==!1){const C="vega-embed-style",{root:k,rootContainer:M}=Qwe(d);if(!k.getElementById(C)){const R=document.createElement("style");R.id=C,R.innerHTML=n.defaultStyle===void 0||n.defaultStyle===!0?Bwe.toString():n.defaultStyle,M.appendChild(R)}}const g=Xwe(t,n.mode);let p=jwe[g](t,r);if(g==="vega-lite"&&p.$schema){const C=tY(p.$schema);dY(kv.vega,`^${C.version.slice(1)}`)||console.warn(`The compiled spec uses Vega ${C.version}, but current version is v${kv.vega}.`)}d.classList.add("vega-embed"),a&&d.classList.add("has-actions"),d.innerHTML="";let y=d;if(a){const C=document.createElement("div");C.classList.add(Gwe),d.appendChild(C),y=C}const v=n.patch;if(v&&(p=v instanceof Function?v(p):zx(p,v,!0,!1).newDocument),n.formatLocale&&Ca.formatLocale(n.formatLocale),n.timeFormatLocale&&Ca.timeFormatLocale(n.timeFormatLocale),n.expressionFunctions)for(const C in n.expressionFunctions){const k=n.expressionFunctions[C];"fn"in k?Ca.expressionFunction(C,k.fn,k.visitor):k instanceof Function&&Ca.expressionFunction(C,k)}const{ast:b}=n,E=Ca.parse(p,g==="vega-lite"?{}:r,{ast:b}),_=new(n.viewClass||Ca.View)(E,{loader:i,logLevel:l,renderer:o,...b?{expr:Ca.expressionInterpreter??n.expr??zme}:{}});if(_.addSignalListener("autosize",(C,k)=>{const{type:M}=k;M=="fit-x"?(y.classList.add("fit-x"),y.classList.remove("fit-y")):M=="fit-y"?(y.classList.remove("fit-x"),y.classList.add("fit-y")):M=="fit"?y.classList.add("fit-x","fit-y"):y.classList.remove("fit-x","fit-y")}),n.tooltip!==!1){const{loader:C,tooltip:k}=n,M=C&&!gY(C)?C==null?void 0:C.baseURL:void 0,R=Ywe(k)?k:new lwe({baseURL:M,...k===!0?{}:k}).call;_.tooltip(R)}let{hover:w}=n;if(w===void 0&&(w=g==="vega"),w){const{hoverSet:C,updateSet:k}=typeof w=="boolean"?{}:w;_.hover(C,k)}n&&(n.width!=null&&_.width(n.width),n.height!=null&&_.height(n.height),n.padding!=null&&_.padding(n.padding)),await _.initialize(y,n.bind).runAsync();let A;if(a!==!1){let C=d;if(n.defaultStyle!==!1||n.forceActionsMenu){const M=document.createElement("details");M.title=s.CLICK_TO_VIEW_ACTIONS,d.append(M),C=M;const R=document.createElement("summary");R.innerHTML=Hwe,M.append(R),A=z=>{M.contains(z.target)||M.removeAttribute("open")},document.addEventListener("click",A)}const k=document.createElement("div");if(C.append(k),k.classList.add("vega-actions"),a===!0||a.export!==!1){for(const M of["svg","png"])if(a===!0||a.export===!0||a.export[M]){const R=s[`${M.toUpperCase()}_ACTION`],z=document.createElement("a"),B=be(n.scaleFactor)?n.scaleFactor[M]:n.scaleFactor;z.text=R,z.href="#",z.target="_blank",z.download=`${f}.${M}`,z.addEventListener("mousedown",async function(U){U.preventDefault();const V=await _.toImageURL(M,B);this.href=V}),k.append(z)}}if(a===!0||a.source!==!1){const M=document.createElement("a");M.text=s.SOURCE_ACTION,M.href="#",M.addEventListener("click",function(R){mF(tS(t),n.sourceHeader??"",n.sourceFooter??"",g),R.preventDefault()}),k.append(M)}if(g==="vega-lite"&&(a===!0||a.compiled!==!1)){const M=document.createElement("a");M.text=s.COMPILED_ACTION,M.href="#",M.addEventListener("click",function(R){mF(tS(p),n.sourceHeader??"",n.sourceFooter??"","vega"),R.preventDefault()}),k.append(M)}if(a===!0||a.editor!==!1){const M=n.editorUrl??"https://vega.github.io/editor/",R=document.createElement("a");R.text=s.EDITOR_ACTION,R.href="#",R.addEventListener("click",function(z){Uwe(window,M,{config:r,mode:v?"vega":g,renderer:o,spec:tS(v?p:t)}),z.preventDefault()}),k.append(R)}}function $(){A&&document.removeEventListener("click",A),_.finalize()}return{view:_,spec:t,vgSpec:p,finalize:$,embedOptions:n}}const Kwe=({spec:e})=>{const t=Y_.useRef(null);return Y_.useEffect(()=>{Wwe(t.current,e).catch(console.error)},[e]),Jg.jsx("div",{ref:t})},bF="#0b5582",G_="#d6e5ec",Jwe="#bbbbbb",xF=60*60*24*1e3,EF=155,Ug=15,K1=6,pg=14,eAe=K1*2+Ug*3,SF=110,tAe={description:"A line chart showing values over time.",width:600,height:300,padding:5,signals:[{name:"lookupDate",on:[{events:"pointermove",update:"invert('x', clamp(x(), 0, width))"}]}],data:[{name:"actuals",url:"data/actuals.json",format:{type:"json",parse:{date:"date:'%Y-%m-%d'"}}},{name:"anticipated",url:"data/anticipated.json",format:{type:"json",parse:{date:"date:'%Y-%m-%d'"}}},{name:"anticipated_filtered",source:"anticipated",transform:[{type:"filter",expr:`(datum.date < lookupDate) & (datum.date > lookupDate - ${xF})`},{type:"aggregate",fields:["value","value"],ops:["min","argmin"],as:["min","argmin"]}]},{name:"actuals_filtered",source:"actuals",transform:[{type:"filter",expr:`(datum.date < lookupDate) & (datum.date > lookupDate - ${xF})`},{type:"aggregate",fields:["value","value"],ops:["min","argmin"],as:["min","argmin"]}]}],scales:[{name:"x",type:"time",domain:{fields:[{data:"actuals",field:"date"},{data:"anticipated",field:"date"}]},range:"width"},{name:"y",type:"linear",domain:{data:"anticipated",field:"value"},range:"height",nice:!0,zero:!1},{name:"color",type:"ordinal",range:[bF,G_],domain:["Actual Level","Anticipated Level"]}],axes:[{orient:"bottom",scale:"x",format:"%b %Y",title:"Date",tickCount:9},{orient:"left",scale:"y",title:"Level"}],marks:[{type:"line",from:{data:"actuals"},encode:{enter:{x:{scale:"x",field:"date"},y:{scale:"y",field:"value"},stroke:{value:"steelblue"},strokeWidth:{value:2}}}},{type:"line",from:{data:"anticipated"},clip:!0,encode:{enter:{x:{scale:"x",field:"date"},y:{scale:"y",field:"value"},stroke:{value:G_},strokeWidth:{value:2}}}},{type:"symbol",from:{data:"actuals_filtered"},encode:{update:{x:{scale:"x",field:"argmin.date"},y:{scale:"y",field:"min"},stroke:{value:bF},fill:{value:"#fff"},size:{value:100},strokeWidth:{value:3},opacity:{value:1},zindex:{value:1}}}},{type:"symbol",from:{data:"anticipated_filtered"},encode:{update:{x:{scale:"x",field:"argmin.date"},y:{scale:"y",field:"min"},stroke:{value:G_},fill:{value:"#fff"},size:{value:100},strokeWidth:{value:2},opacity:{value:1},zindex:{value:1}}}},{type:"rule",encode:{update:{x:{scale:"x",signal:"lookupDate",offset:.5},y:{value:0},y2:{field:{group:"height"}},stroke:{value:Jwe},strokeDash:{value:[3,3]}}}},{type:"group",from:{data:"anticipated_filtered"},encode:{update:{x:{scale:"x",signal:`min(datum.argmin.date, invert('x', clamp(x(), 0, width - ${EF})))`,offset:0},y:{scale:"y",signal:"max(datum.min, invert('y', clamp(y(), 0, height - 60)))",offset:15},width:{value:EF},height:{value:eAe},fill:{value:"#fff"},fillOpacity:{value:.85},stroke:{value:"#aaa"},strokeWidth:{value:.5}}},marks:[{type:"text",from:{data:"anticipated_filtered"},encode:{update:{x:{value:K1},y:{value:pg},text:{signal:"timeFormat(datum.argmin.date, '%b %d, %Y')"},baseline:{value:"middle"},fontWeight:{value:"bold"}}}},{type:"text",encode:{update:{x:{value:K1},y:{value:pg+Ug},text:{signal:"'Anticipated Level:'"},baseline:{value:"middle"},fontWeight:{value:"bold"}}}},{type:"text",from:{data:"anticipated_filtered"},encode:{update:{x:{value:SF},y:{value:pg+Ug},text:{signal:"round(datum.min * 100) / 100"},baseline:{value:"middle"}}}},{type:"text",encode:{update:{x:{value:K1},y:{value:pg+Ug*2},text:{signal:"'Actual Level:'"},baseline:{value:"middle"},fontWeight:{value:"bold"}}}},{type:"text",from:{data:"actuals_filtered"},encode:{update:{x:{value:SF},y:{value:pg+Ug*2},text:{signal:"round(datum.min * 100) / 100"},baseline:{value:"middle"}}}}]}],legends:[{fill:"color",title:"Levels",orient:"bottom-right",offset:8,encode:{symbols:{update:{strokeWidth:{value:0},shape:{value:"square"},opacity:{value:.3}}}}}]};function nAe(){return Jg.jsx("section",{className:"w-full h-[100vh] flex items-center justify-center",children:Jg.jsx(Kwe,{spec:tAe})})}GV.createRoot(document.getElementById("root")).render(Jg.jsx(Y_.StrictMode,{children:Jg.jsx(nAe,{})}));
